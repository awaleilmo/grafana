"use strict";(globalThis.webpackChunktempo=globalThis.webpackChunktempo||[]).push([[3380],{838:(e,t,n)=>{n.d(t,{I:()=>i});var a=n(5959),r=n(6819);const i=({children:e,...t})=>a.createElement(r.x,{...t,kind:"sub-section"},e)},1080:(e,t,n)=>{n.d(t,{g:()=>o});var a=n(5959),r=n(6089),i=n(2007),l=n(838);n(7781);const o=({config:e,onChange:t,className:n})=>{const o={container:(0,r.css)({maxWidth:578})};return a.createElement(l.I,{title:"Advanced HTTP settings",className:(0,r.cx)(o.container,n)},a.createElement(i.InlineField,{htmlFor:"advanced-http-cookies",label:"Allowed cookies",labelWidth:24,tooltip:"Grafana proxy deletes forwarded cookies by default. Specify cookies by name that should be forwarded to the data source.",disabled:e.readOnly,grow:!0},a.createElement(i.TagsInput,{id:"advanced-http-cookies",placeholder:"New cookie (hit enter to add)",tags:e.jsonData.keepCookies,onChange:n=>{t({...e,jsonData:{...e.jsonData,keepCookies:n}})}})),a.createElement(i.InlineField,{htmlFor:"advanced-http-timeout",label:"Timeout",labelWidth:24,tooltip:"HTTP request timeout in seconds",disabled:e.readOnly,grow:!0},a.createElement(i.Input,{id:"advanced-http-timeout",type:"number",min:0,placeholder:"Timeout in seconds","aria-label":"Timeout in seconds",value:e.jsonData.timeout,onChange:n=>{t({...e,jsonData:{...e.jsonData,timeout:parseInt(n.currentTarget.value,10)}})}})))}},1535:(e,t,n)=>{n.d(t,{u:()=>o});var a=n(5959),r=n(6089),i=n(2007),l=n(364);n(7781);const o=({config:e,onChange:t,description:n,urlPlaceholder:o,urlTooltip:s,urlLabel:c,className:d})=>{const u=void 0!==e.url&&/^(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?$/.test(e.url),h={container:(0,r.css)({maxWidth:578})};return a.createElement(a.Fragment,null,a.createElement(l.A,{title:"Connection",description:n,className:(0,r.cx)(h.container,d)},a.createElement(i.InlineField,{htmlFor:"connection-url",label:c||"URL",labelWidth:24,tooltip:s||a.createElement(a.Fragment,null,"Specify a complete HTTP URL",a.createElement("br",null),"(for example https://example.com:8080)"),grow:!0,disabled:e.readOnly,required:!0,invalid:!u&&!e.readOnly,error:u?"":"Please enter a valid URL",interactive:!0},a.createElement(i.Input,{id:"connection-url","aria-label":"Data source connection URL",onChange:n=>t({...e,url:n.currentTarget.value}),value:e.url||"",placeholder:o||"URL"}))))}},3260:(e,t,n)=>{n.d(t,{N:()=>E});var a=n(5959),r=n(6089),i=n(2007);n(7781);const l=()=>({inlineFieldNoMarginRight:(0,r.css)({marginRight:0}),inlineFieldWithSecret:(0,r.css)({'[class$="layoutChildrenWrapper"]:first-child':{flexGrow:1}})}),o=({user:e,passwordConfigured:t,userLabel:n="User",userTooltip:o="The username of the data source account",userPlaceholder:s="User",passwordLabel:c="Password",passwordTooltip:d="The password of the data source account",passwordPlaceholder:u="Password",onUserChange:h,onPasswordChange:m,onPasswordReset:g,readOnly:p})=>{const C=l(),f={lastInlineField:(0,r.css)({marginBottom:0})};return a.createElement(a.Fragment,null,a.createElement(i.InlineField,{className:C.inlineFieldNoMarginRight,label:n,labelWidth:24,tooltip:o,required:!0,htmlFor:"basic-auth-user-input",interactive:!0,grow:!0,disabled:p},a.createElement(i.Input,{id:"basic-auth-user-input",placeholder:s,value:e,onChange:e=>h(e.currentTarget.value),required:!0})),a.createElement(i.InlineField,{className:(0,r.cx)(C.inlineFieldNoMarginRight,C.inlineFieldWithSecret,f.lastInlineField),label:c,labelWidth:24,tooltip:d,required:!0,htmlFor:"basic-auth-password-input",interactive:!0,grow:!0,disabled:p},a.createElement(i.SecretInput,{id:"basic-auth-password-input",isConfigured:t,onReset:p?()=>{}:g,placeholder:u,onChange:e=>m(e.currentTarget.value),required:!0})))};var s=n(838),c=n(4043);const d={[c.q.BasicAuth]:{label:"Basic authentication",value:c.q.BasicAuth,description:"Authenticate with your data source username and password"},[c.q.CrossSiteCredentials]:{label:"Enable cross-site access control requests",value:c.q.CrossSiteCredentials,description:"Allow cross-site Access-Control requests with your existing credentials and cookies. This enables the server to authenticate the user and perform authorized requests on their behalf on other domains."},[c.q.OAuthForward]:{label:"Forward OAuth Identity",value:c.q.OAuthForward,description:"Forward the OAuth access token (and if available: the OIDC ID token) of the user querying to the data source"},[c.q.NoAuth]:{label:"No Authentication",value:c.q.NoAuth,description:"Data source is available without authentication"}},u=({selectedMethod:e,mostCommonMethod:t,visibleMethods:n,defaultOptionsOverrides:l,customMethods:u,onAuthMethodSelect:h,basicAuth:m,readOnly:g})=>{var p,C,f,v;const[b,A]=(0,a.useState)(!1),{colors:E,spacing:T}=(0,i.useTheme2)(),F=(0,a.useMemo)((()=>{var e;return null!=n?n:[c.q.BasicAuth,c.q.OAuthForward,c.q.NoAuth,...null!=(e=null==u?void 0:u.map((e=>e.id)))?e:[]]}),[u,n]),y=F.length>1,w=(0,a.useMemo)((()=>{var e;const n=null!=(e=null==u?void 0:u.reduce(((e,t)=>(e[t.id]={label:t.label,value:t.id,description:t.description},e)),{}))?e:{},a={};let r;for(r in d)a[r]={...d[r],...null==l?void 0:l[r]};const i={...n,...a};return F.filter((e=>Boolean(i[e]))).map((e=>{const n=i[e];return e===t&&y?{...n,label:`${n.label} (most common)`}:n}))}),[F,u,l,t,y]);let N=e;y?e===c.q.NoAuth&&t&&!b&&(N=t):N=F[0];let D=null;N===c.q.BasicAuth&&m?D=a.createElement(o,{...m,readOnly:g}):N.startsWith("custom-")&&(D=null!=(C=null==(p=null==u?void 0:u.find((e=>e.id===N)))?void 0:p.component)?C:null);const S=y?"Authentication methods":null!=(f=w[0].label)?f:"",O=y?"Choose an authentication method to access the data source":null!=(v=w[0].description)?v:"",I={authMethods:(0,r.css)({marginTop:T(2.5),...y&&{padding:T(2),border:`1px solid ${E.border.weak}`}}),selectedMethodFields:(0,r.css)({marginTop:T(1.5)})};return a.createElement(s.I,{title:S,description:O},a.createElement("div",{className:I.authMethods},y&&a.createElement(i.Field,{label:"Authentication method"},a.createElement(i.Select,{inputId:"auth-method-select",options:w,value:N,onChange:e=>{A(!0),h(e.value)},disabled:g})),D&&a.createElement("div",{className:I.selectedMethodFields},D)))},h=({children:e,enabled:t,label:n,tooltipText:l,onToggle:o,readOnly:s})=>{const{colors:c,spacing:d}=(0,i.useTheme2)(),u={container:(0,r.css)({marginTop:3}),checkboxContainer:(0,r.css)({display:"flex",alignItems:"center"}),infoIcon:(0,r.css)({marginTop:-2,marginLeft:5,color:c.text.secondary}),content:(0,r.css)({margin:d(1,0,2,3)})};return a.createElement("div",{className:u.container},a.createElement("div",{className:u.checkboxContainer},a.createElement(i.Checkbox,{value:t,label:n,onChange:()=>o(!t),disabled:s}),a.createElement(i.Tooltip,{placement:"top",content:l,interactive:!0},a.createElement(i.Icon,{name:"info-circle",className:u.infoIcon,size:"sm"}))),t&&e&&a.createElement("div",{className:u.content},e))},m=({enabled:e,certificateConfigured:t,onToggle:n,onCertificateChange:o,onCertificateReset:s,tooltips:c,readOnly:d})=>{var u;const m=l();return a.createElement(h,{enabled:e,label:"Add self-signed certificate",tooltipText:"Add your own Certificate Authority (CA) certificate on top of one generated by the certificate authorities for additional security measures",onToggle:e=>n(e),readOnly:d},a.createElement(i.InlineField,{label:"CA Certificate",labelWidth:24,tooltip:null!=(u=null==c?void 0:c.certificateLabel)?u:"Your self-signed certificate",required:!0,htmlFor:"self-signed-certificate-input",interactive:!0,grow:!0,className:(0,r.cx)(m.inlineFieldNoMarginRight,m.inlineFieldWithSecret),disabled:d},a.createElement(i.SecretTextArea,{id:"self-signed-certificate-input",isConfigured:t,onChange:e=>o(e.currentTarget.value),onReset:d?()=>{}:s,placeholder:"Begins with --- BEGIN CERTIFICATE ---",rows:6,required:!0})))},g=({enabled:e,serverName:t,clientCertificateConfigured:n,clientKeyConfigured:o,onToggle:s,onServerNameChange:c,onClientCertificateChange:d,onClientKeyChange:u,onClientCertificateReset:m,onClientKeyReset:g,tooltips:p,readOnly:C})=>{var f,v,b;const A=l();return a.createElement(h,{enabled:e,label:"TLS Client Authentication",tooltipText:"Validate using TLS client authentication, in which the server authenticates the client",onToggle:e=>s(e),readOnly:C},a.createElement(i.InlineField,{label:"ServerName",labelWidth:24,tooltip:null!=(f=null==p?void 0:p.serverNameLabel)?f:"A Servername is used to verify the hostname on the returned certificate",required:!0,htmlFor:"client-auth-servername-input",interactive:!0,grow:!0,className:A.inlineFieldNoMarginRight,disabled:C},a.createElement(i.Input,{id:"client-auth-servername-input",placeholder:"domain.example.com",value:t,onChange:e=>c(e.currentTarget.value),required:!0})),a.createElement(i.InlineField,{label:"Client Certificate",labelWidth:24,tooltip:null!=(v=null==p?void 0:p.certificateLabel)?v:"The client certificate can be generated from a Certificate Authority or be self-signed",required:!0,htmlFor:"client-auth-client-certificate-input",interactive:!0,grow:!0,className:(0,r.cx)(A.inlineFieldNoMarginRight,A.inlineFieldWithSecret),disabled:C},a.createElement(i.SecretTextArea,{id:"client-auth-client-certificate-input",isConfigured:n,onChange:e=>d(e.currentTarget.value),onReset:C?()=>{}:m,placeholder:"Begins with --- BEGIN CERTIFICATE ---",rows:6,required:!0})),a.createElement(i.InlineField,{label:"Client Key",labelWidth:24,tooltip:null!=(b=null==p?void 0:p.keyLabel)?b:"The client key can be generated from a Certificate Authority or be self-signed",required:!0,htmlFor:"client-auth-client-key-input",interactive:!0,grow:!0,className:(0,r.cx)(A.inlineFieldNoMarginRight,A.inlineFieldWithSecret),disabled:C},a.createElement(i.SecretTextArea,{id:"client-auth-client-key-input",isConfigured:o,onChange:e=>u(e.currentTarget.value),onReset:C?()=>{}:g,placeholder:"Begins with --- RSA PRIVATE KEY CERTIFICATE ---",rows:6,required:!0})))},p=({enabled:e,onToggle:t,readOnly:n})=>a.createElement(h,{enabled:e,label:"Skip TLS certificate validation",tooltipText:"Skipping TLS certificate validation is not recommended unless absolutely necessary or for testing",onToggle:e=>t(e),readOnly:n}),C=({selfSignedCertificate:e,TLSClientAuth:t,skipTLSVerification:n,readOnly:l})=>{const{spacing:o}=(0,i.useTheme2)(),c={container:(0,r.css)({marginTop:o(3)})};return a.createElement(s.I,{className:c.container,title:"TLS settings",description:"Additional security measures that can be applied on top of authentication"},a.createElement(m,{...e,readOnly:l}),a.createElement(g,{...t,readOnly:l}),a.createElement(p,{...n,readOnly:l}))},f=({header:e,onChange:t,onBlur:n,onDelete:o,readOnly:s})=>{const{spacing:c}=(0,i.useTheme2)(),d=l(),u={container:(0,r.css)({alignItems:"center"}),input:(0,r.css)({minWidth:"100%"}),headerNameField:(0,r.css)({width:"40%",marginRight:0,paddingRight:c(1)}),headerValueField:(0,r.css)({width:"45%",marginRight:0}),removeHeaderBtn:(0,r.css)({margin:"0 0 3px 10px"})};return a.createElement(a.Fragment,null,a.createElement(i.InlineFieldRow,{className:u.container},a.createElement(i.InlineField,{label:"Header",labelWidth:9,grow:!0,className:u.headerNameField,htmlFor:`custom-header-${e.id}-name-input`,disabled:s},a.createElement(i.Input,{id:`custom-header-${e.id}-name-input`,placeholder:"X-Custom-Header",value:e.name,width:12,onChange:n=>t({...e,name:n.currentTarget.value}),onBlur:n,className:u.input})),a.createElement(i.InlineField,{label:"Value",labelWidth:9,grow:!0,className:(0,r.cx)(d.inlineFieldWithSecret,u.headerValueField),htmlFor:`custom-header-${e.id}-value-input`,disabled:s},a.createElement(i.SecretInput,{id:`custom-header-${e.id}-value-input`,isConfigured:e.configured,placeholder:"Header value",value:e.value,width:12,onChange:n=>t({...e,value:n.currentTarget.value}),onReset:s?()=>{}:()=>t({...e,configured:!1,value:""}),onBlur:n,className:u.input})),a.createElement(i.IconButton,{name:"trash-alt",tooltip:"Remove header",tooltipPlacement:"top",className:u.removeHeaderBtn,onClick:o,type:"button",disabled:s})))},v=({headers:e,onChange:t,readOnly:n})=>{const{spacing:l}=(0,i.useTheme2)(),[o,c]=(0,a.useState)(e.map((e=>({...e,id:b(),value:""}))));(0,a.useEffect)((()=>{c((t=>{let n=!1;const a=t.map((t=>{var a;const r=null==(a=e.find((e=>e.name===t.name)))?void 0:a.configured;return void 0!==r&&t.configured!==r?(n=!0,{...t,configured:r}):t}));return n?a:t}))}),[e]);const d=()=>{t(o.map((({name:e,value:t,configured:n})=>({name:e,value:t,configured:n}))))},u={container:(0,r.css)({marginTop:l(3)}),addHeaderButton:(0,r.css)({marginTop:l(1.5)})};return a.createElement("div",{className:u.container},a.createElement(s.I,{title:"HTTP headers",description:"Pass along additional context and metadata about the request/response",isCollapsible:!0,isInitiallyOpen:o.length>0},a.createElement("div",null,o.map((e=>a.createElement(f,{key:e.id,header:e,onChange:e=>((e,t)=>{c(o.map((n=>n.id===e?{...t}:n)))})(e.id,e),onDelete:()=>(e=>{const n=o.findIndex((t=>t.id===e));if(-1===n)return;const a=[...o];a.splice(n,1),c(a),t(a.map((({name:e,value:t,configured:n})=>({name:e,value:t,configured:n}))))})(e.id),onBlur:d,readOnly:n})))),a.createElement("div",{className:u.addHeaderButton},a.createElement(i.Button,{icon:"plus",variant:"secondary",fill:"outline",onClick:()=>{c([...o,{id:b(),name:"",value:"",configured:!1}])},disabled:n},0===o.length?"Add header":"Add another header"))))};function b(){return Math.random().toString(16).slice(2)}var A=n(364);const E=({selectedMethod:e,mostCommonMethod:t,visibleMethods:n,defaultOptionsOverrides:i,customMethods:l,onAuthMethodSelect:o,basicAuth:s,TLS:c,customHeaders:d,readOnly:h=!1})=>{const m={container:(0,r.css)({maxWidth:578})};return a.createElement("div",{className:m.container},a.createElement(A.A,{title:"Authentication"},a.createElement(u,{selectedMethod:e,mostCommonMethod:t,customMethods:l,visibleMethods:n,defaultOptionsOverrides:i,onAuthMethodSelect:o,basicAuth:s,readOnly:h}),c&&a.createElement(C,{...c,readOnly:h}),d&&a.createElement(v,{...d,readOnly:h})))}},4043:(e,t,n)=>{n.d(t,{q:()=>a});n(5959);var a=(e=>(e.NoAuth="NoAuth",e.BasicAuth="BasicAuth",e.OAuthForward="OAuthForward",e.CrossSiteCredentials="CrossSiteCredentials",e))(a||{})},4305:(e,t,n)=>{n.d(t,{I:()=>l});var a=n(5959),r=n(6089),i=n(2007);const l=({dataSourceName:e,docsLink:t,hasRequiredFields:n=!0,className:l})=>{const o=(0,i.useTheme2)(),s={container:(0,r.css)({p:{margin:0},"p + p":{marginTop:o.spacing(2)}}),text:(0,r.css)({...o.typography.body,color:o.colors.text.secondary,a:(0,r.css)({color:o.colors.text.link,textDecoration:"underline","&:hover":{textDecoration:"none"}})})};return a.createElement("div",{className:(0,r.cx)(s.container,l)},a.createElement("p",{className:s.text},"Before you can use the ",e," data source, you must configure it below or in the config file. For detailed instructions,"," ",a.createElement("a",{href:t,target:"_blank",rel:"noreferrer"},"view the documentation"),"."),n&&a.createElement("p",{className:s.text},a.createElement("i",null,"Fields marked with * are required")))}},6321:(e,t,n)=>{n.d(t,{A:()=>l});var a=n(5959),r=n(4769);function i(e,t,n){void 0===t&&(t=[]),void 0===n&&(n={loading:!1});var i,l,o=(0,a.useRef)(0),s=(i=(0,a.useRef)(!1),l=(0,a.useCallback)((function(){return i.current}),[]),(0,a.useEffect)((function(){return i.current=!0,function(){i.current=!1}}),[]),l),c=(0,a.useState)(n),d=c[0],u=c[1],h=(0,a.useCallback)((function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var a=++o.current;return d.loading||u((function(e){return(0,r.__assign)((0,r.__assign)({},e),{loading:!0})})),e.apply(void 0,t).then((function(e){return s()&&a===o.current&&u({value:e,loading:!1}),e}),(function(e){return s()&&a===o.current&&u({error:e,loading:!1}),e}))}),t);return[d,h]}function l(e,t){void 0===t&&(t=[]);var n=i(e,t,{loading:!0}),r=n[0],l=n[1];return(0,a.useEffect)((function(){l()}),[l]),r}},8455:(e,t,n)=>{n.d(t,{pe:()=>l});n(5959),n(6089);var a=n(4043);n(2007),n(7781);const r="httpHeaderName",i="httpHeaderValue";function l({config:e,onChange:t}){return{selectedMethod:o(e),onAuthMethodSelect:s(e,t),basicAuth:c(e,t),TLS:d(e,t),customHeaders:u(e,t),readOnly:e.readOnly}}function o(e){return e.basicAuth?a.q.BasicAuth:e.withCredentials?a.q.CrossSiteCredentials:e.jsonData.oauthPassThru?a.q.OAuthForward:a.q.NoAuth}function s(e,t){return n=>{t({...e,basicAuth:n===a.q.BasicAuth,withCredentials:n===a.q.CrossSiteCredentials,jsonData:{...e.jsonData,oauthPassThru:n===a.q.OAuthForward}})}}function c(e,t){return{user:e.basicAuthUser,passwordConfigured:e.secureJsonFields.basicAuthPassword,onUserChange:n=>t({...e,basicAuthUser:n}),onPasswordChange:n=>t({...e,secureJsonData:{...e.secureJsonData,basicAuthPassword:n}}),onPasswordReset:()=>t({...e,secureJsonData:{...e.secureJsonData,basicAuthPassword:""},secureJsonFields:{...e.secureJsonFields,basicAuthPassword:!1}})}}function d(e,t){var n,a,r;return{selfSignedCertificate:{enabled:Boolean(e.jsonData.tlsAuthWithCACert),certificateConfigured:!!(null==(n=e.secureJsonFields)?void 0:n.tlsCACert),onToggle:n=>t(n?{...e,jsonData:{...e.jsonData,tlsAuthWithCACert:n}}:{...e,jsonData:{...e.jsonData,tlsAuthWithCACert:n},secureJsonData:{...e.secureJsonData,tlsCACert:""},secureJsonFields:{...e.secureJsonFields,tlsCACert:!1}}),onCertificateChange:n=>t({...e,secureJsonData:{...e.secureJsonData,tlsCACert:n}}),onCertificateReset:()=>t({...e,secureJsonData:{...e.secureJsonData,tlsCACert:""},secureJsonFields:{...e.secureJsonFields,tlsCACert:!1}})},TLSClientAuth:{enabled:e.jsonData.tlsAuth,serverName:e.jsonData.serverName,clientCertificateConfigured:!!(null==(a=e.secureJsonFields)?void 0:a.tlsClientCert),clientKeyConfigured:!!(null==(r=e.secureJsonFields)?void 0:r.tlsClientKey),onToggle:n=>t(n?{...e,jsonData:{...e.jsonData,tlsAuth:n}}:{...e,jsonData:{...e.jsonData,tlsAuth:n,serverName:""},secureJsonData:{...e.secureJsonData,tlsClientCert:"",tlsClientKey:""},secureJsonFields:{...e.secureJsonFields,tlsClientCert:!1,tlsClientKey:!1}}),onServerNameChange:n=>t({...e,jsonData:{...e.jsonData,serverName:n}}),onClientCertificateChange:n=>t({...e,secureJsonData:{...e.secureJsonData,tlsClientCert:n}}),onClientCertificateReset:()=>t({...e,secureJsonData:{...e.secureJsonData,tlsClientCert:""},secureJsonFields:{...e.secureJsonFields,tlsClientCert:!1}}),onClientKeyChange:n=>t({...e,secureJsonData:{...e.secureJsonData,tlsClientKey:n}}),onClientKeyReset:()=>t({...e,secureJsonData:{...e.secureJsonData,tlsClientKey:""},secureJsonFields:{...e.secureJsonFields,tlsClientKey:!1}})},skipTLSVerification:{enabled:e.jsonData.tlsSkipVerify,onToggle:n=>t({...e,jsonData:{...e.jsonData,tlsSkipVerify:n}})}}}function u(e,t){return{headers:Object.keys(e.jsonData).filter((e=>e.startsWith(r))).sort().map((t=>{var n;const a=t.slice(r.length);return{name:e.jsonData[t],configured:null!=(n=e.secureJsonFields[`${i}${a}`])&&n}})),onChange:n=>{const a=Object.fromEntries(Object.entries(e.jsonData).filter((([e])=>!e.startsWith(r)))),l=Object.fromEntries(Object.entries(e.secureJsonData||{}).filter((([e])=>!e.startsWith(i)))),o=Object.fromEntries(Object.entries(e.secureJsonFields).filter((([e])=>!e.startsWith(i))));n.forEach(((e,t)=>{a[`${r}${t+1}`]=e.name,e.configured?o[`${i}${t+1}`]=!0:l[`${i}${t+1}`]=e.value})),t({...e,jsonData:a,secureJsonData:l,secureJsonFields:o})}}}}}]);
//# sourceMappingURL=3380.js.map