{"version":3,"file":"6082.js","mappings":"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","sources":["webpack://tempo/../../../../../packages/grafana-o11y-ds-frontend/src/TraceToMetrics/TraceToMetricsSettings.tsx","webpack://tempo/../../../../../packages/grafana-o11y-ds-frontend/src/pyroscope/ProfileTypesCascader.tsx","webpack://tempo/../../../../../packages/grafana-o11y-ds-frontend/src/TraceToProfiles/TraceToProfilesSettings.tsx","webpack://tempo/../../../../../packages/grafana-o11y-ds-frontend/src/NodeGraph/NodeGraphSettings.tsx","webpack://tempo/../../../../../packages/grafana-o11y-ds-frontend/src/SpanBar/SpanBarSettings.tsx","webpack://tempo/./configuration/ServiceGraphSettings.tsx","webpack://tempo/./configuration/StreamingSection.tsx","webpack://tempo/./configuration/TagLimitSettings.tsx","webpack://tempo/./configuration/TraceQLSearchTags.tsx","webpack://tempo/./configuration/TraceQLSearchSettings.tsx","webpack://tempo/./configuration/ConfigEditor.tsx"],"sourcesContent":["import { css } from '@emotion/css';\n\nimport {\n  DataSourceInstanceSettings,\n  DataSourceJsonData,\n  DataSourcePluginOptionsEditorProps,\n  GrafanaTheme2,\n  updateDatasourcePluginJsonDataOption,\n} from '@grafana/data';\nimport { ConfigDescriptionLink, ConfigSection } from '@grafana/plugin-ui';\nimport { DataSourcePicker } from '@grafana/runtime';\nimport { Button, InlineField, InlineFieldRow, Input, useStyles2 } from '@grafana/ui';\n\nimport { IntervalInput } from '../IntervalInput/IntervalInput';\nimport { TagMappingInput } from '../TraceToLogs/TagMappingInput';\nimport { getTimeShiftLabel, getTimeShiftTooltip, invalidTimeShiftError } from '../TraceToLogs/TraceToLogsSettings';\n\nexport interface TraceToMetricsOptions {\n  datasourceUid?: string;\n  tags?: Array<{ key: string; value: string }>;\n  queries: TraceToMetricQuery[];\n  spanStartTimeShift?: string;\n  spanEndTimeShift?: string;\n}\n\nexport interface TraceToMetricQuery {\n  name?: string;\n  query?: string;\n}\n\nexport interface TraceToMetricsData extends DataSourceJsonData {\n  tracesToMetrics?: TraceToMetricsOptions;\n}\n\ninterface Props extends DataSourcePluginOptionsEditorProps<TraceToMetricsData> {}\n\nexport function TraceToMetricsSettings({ options, onOptionsChange }: Props) {\n  const styles = useStyles2(getStyles);\n\n  return (\n    <div className={css({ width: '100%' })}>\n      <InlineFieldRow className={styles.row}>\n        <InlineField\n          tooltip=\"The Prometheus data source the trace is going to navigate to\"\n          label=\"Data source\"\n          labelWidth={26}\n        >\n          <DataSourcePicker\n            inputId=\"trace-to-metrics-data-source-picker\"\n            pluginId=\"prometheus\"\n            current={options.jsonData.tracesToMetrics?.datasourceUid}\n            noDefault={true}\n            width={40}\n            onChange={(ds: DataSourceInstanceSettings) =>\n              updateDatasourcePluginJsonDataOption({ onOptionsChange, options }, 'tracesToMetrics', {\n                ...options.jsonData.tracesToMetrics,\n                datasourceUid: ds.uid,\n              })\n            }\n            onClear={() =>\n              updateDatasourcePluginJsonDataOption({ onOptionsChange, options }, 'tracesToMetrics', {\n                ...options.jsonData.tracesToMetrics,\n                datasourceUid: undefined,\n              })\n            }\n          />\n        </InlineField>\n      </InlineFieldRow>\n\n      <InlineFieldRow>\n        <IntervalInput\n          label={getTimeShiftLabel('start')}\n          tooltip={getTimeShiftTooltip('start', '-2m')}\n          value={options.jsonData.tracesToMetrics?.spanStartTimeShift || ''}\n          onChange={(val) => {\n            updateDatasourcePluginJsonDataOption({ onOptionsChange, options }, 'tracesToMetrics', {\n              ...options.jsonData.tracesToMetrics,\n              spanStartTimeShift: val,\n            });\n          }}\n          placeholder={'-2m'}\n          isInvalidError={invalidTimeShiftError}\n        />\n      </InlineFieldRow>\n\n      <InlineFieldRow>\n        <IntervalInput\n          label={getTimeShiftLabel('end')}\n          tooltip={getTimeShiftTooltip('end', '2m')}\n          value={options.jsonData.tracesToMetrics?.spanEndTimeShift || ''}\n          onChange={(val) => {\n            updateDatasourcePluginJsonDataOption({ onOptionsChange, options }, 'tracesToMetrics', {\n              ...options.jsonData.tracesToMetrics,\n              spanEndTimeShift: val,\n            });\n          }}\n          placeholder={'2m'}\n          isInvalidError={invalidTimeShiftError}\n        />\n      </InlineFieldRow>\n\n      <InlineFieldRow>\n        <InlineField tooltip=\"Tags that will be used in the metrics query\" label=\"Tags\" labelWidth={26}>\n          <TagMappingInput\n            values={options.jsonData.tracesToMetrics?.tags ?? []}\n            onChange={(v) =>\n              updateDatasourcePluginJsonDataOption({ onOptionsChange, options }, 'tracesToMetrics', {\n                ...options.jsonData.tracesToMetrics,\n                tags: v,\n              })\n            }\n          />\n        </InlineField>\n      </InlineFieldRow>\n\n      {options.jsonData.tracesToMetrics?.queries?.map((query, i) => (\n        <div key={i} className={styles.queryRow}>\n          <InlineField label=\"Link Label\" labelWidth={26} tooltip=\"Descriptive label for the linked query\">\n            <Input\n              label=\"Link Label\"\n              type=\"text\"\n              allowFullScreen\n              value={query.name}\n              width={40}\n              onChange={(e) => {\n                const newQueries = (options.jsonData.tracesToMetrics?.queries ?? []).map(\n                  (traceToMetricQuery, index) => {\n                    return index === i ? { ...traceToMetricQuery, name: e.currentTarget.value } : traceToMetricQuery;\n                  }\n                );\n                updateDatasourcePluginJsonDataOption({ onOptionsChange, options }, 'tracesToMetrics', {\n                  ...options.jsonData.tracesToMetrics,\n                  queries: newQueries,\n                });\n              }}\n            />\n          </InlineField>\n          <InlineField\n            label=\"Query\"\n            labelWidth={10}\n            tooltip=\"The Prometheus query that will run when navigating from a trace to metrics. Interpolate tags using the `$__tags` keyword\"\n            grow\n          >\n            <Input\n              label=\"Query\"\n              type=\"text\"\n              allowFullScreen\n              value={query.query}\n              onChange={(e) => {\n                const updatedQueries = (options.jsonData.tracesToMetrics?.queries ?? []).map(\n                  (traceToMetricQuery, index) => {\n                    return index === i ? { ...traceToMetricQuery, query: e.currentTarget.value } : traceToMetricQuery;\n                  }\n                );\n                updateDatasourcePluginJsonDataOption({ onOptionsChange, options }, 'tracesToMetrics', {\n                  ...options.jsonData.tracesToMetrics,\n                  queries: updatedQueries,\n                });\n              }}\n            />\n          </InlineField>\n\n          <Button\n            variant=\"destructive\"\n            aria-label=\"Remove query\"\n            icon=\"times\"\n            type=\"button\"\n            onClick={() => {\n              const newQueries = options.jsonData.tracesToMetrics?.queries.filter((_, index) => index !== i);\n              updateDatasourcePluginJsonDataOption({ onOptionsChange, options }, 'tracesToMetrics', {\n                ...options.jsonData.tracesToMetrics,\n                queries: newQueries,\n              });\n            }}\n          />\n        </div>\n      ))}\n\n      <Button\n        variant=\"secondary\"\n        title=\"Add query\"\n        icon=\"plus\"\n        type=\"button\"\n        onClick={() => {\n          updateDatasourcePluginJsonDataOption({ onOptionsChange, options }, 'tracesToMetrics', {\n            ...options.jsonData.tracesToMetrics,\n            queries: [...(options.jsonData.tracesToMetrics?.queries ?? []), { query: '' }],\n          });\n        }}\n      >\n        Add query\n      </Button>\n    </div>\n  );\n}\n\nexport const TraceToMetricsSection = ({ options, onOptionsChange }: DataSourcePluginOptionsEditorProps) => {\n  let suffix = options.type;\n  suffix += options.type === 'tempo' ? '/configure-tempo-data-source/#trace-to-metrics' : '/#trace-to-metrics';\n\n  return (\n    <ConfigSection\n      title=\"Trace to metrics\"\n      description={\n        <ConfigDescriptionLink\n          description=\"Navigate from a trace span to the selected data source's metrics.\"\n          suffix={suffix}\n          feature=\"trace to metrics\"\n        />\n      }\n      isCollapsible={true}\n      isInitiallyOpen={true}\n    >\n      <TraceToMetricsSettings options={options} onOptionsChange={onOptionsChange} />\n    </ConfigSection>\n  );\n};\n\nconst getStyles = (theme: GrafanaTheme2) => ({\n  infoText: {\n    paddingBottom: theme.spacing(2),\n    color: theme.colors.text.secondary,\n  },\n  row: css({\n    label: 'row',\n    alignItems: 'baseline',\n  }),\n  queryRow: css({\n    label: 'queryRow',\n    display: 'flex',\n    flexFlow: 'wrap',\n  }),\n});\n","import { useEffect, useMemo, useState } from 'react';\n\nimport { Cascader, CascaderOption } from '@grafana/ui';\n\nimport { PyroscopeDataSource } from './datasource';\nimport { ProfileTypeMessage } from './types';\n\ntype Props = {\n  initialProfileTypeId?: string;\n  profileTypes?: ProfileTypeMessage[];\n  onChange: (value: string) => void;\n  placeholder?: string;\n  width?: number;\n};\n\nexport function ProfileTypesCascader(props: Props) {\n  const cascaderOptions = useCascaderOptions(props.profileTypes);\n\n  return (\n    <Cascader\n      placeholder={props.placeholder}\n      separator={'-'}\n      displayAllSelectedLevels={true}\n      initialValue={props.initialProfileTypeId}\n      allowCustomValue={true}\n      onSelect={props.onChange}\n      options={cascaderOptions}\n      changeOnSelect={false}\n      width={props.width ?? 26}\n    />\n  );\n}\n\n// Turn profileTypes into cascader options\nfunction useCascaderOptions(profileTypes?: ProfileTypeMessage[]): CascaderOption[] {\n  return useMemo(() => {\n    if (!profileTypes) {\n      return [];\n    }\n    let mainTypes = new Map<string, CascaderOption>();\n    // Classify profile types by name then sample type.\n    // The profileTypes are something like cpu:sample:nanoseconds:sample:count or app.something.something\n    for (let profileType of profileTypes) {\n      let parts: string[] = [];\n      if (profileType.id.indexOf(':') > -1) {\n        parts = profileType.id.split(':');\n      }\n\n      const [name, type] = parts;\n\n      if (!mainTypes.has(name)) {\n        mainTypes.set(name, {\n          label: name,\n          value: name,\n          items: [],\n        });\n      }\n      mainTypes.get(name)?.items!.push({\n        label: type,\n        value: profileType.id,\n      });\n    }\n    return Array.from(mainTypes.values());\n  }, [profileTypes]);\n}\n\n/**\n * Loads the profile types.\n *\n * This is exported and not used directly in the ProfileTypesCascader component because in some case we need to know\n * the profileTypes before rendering the cascader.\n * @param datasource\n */\nexport function useProfileTypes(datasource: PyroscopeDataSource) {\n  const [profileTypes, setProfileTypes] = useState<ProfileTypeMessage[]>();\n\n  useEffect(() => {\n    (async () => {\n      const profileTypes = await datasource.getProfileTypes();\n      setProfileTypes(profileTypes);\n    })();\n  }, [datasource]);\n\n  return profileTypes;\n}\n","import { css } from '@emotion/css';\nimport { useEffect, useMemo, useState } from 'react';\nimport * as React from 'react';\nimport { useAsync } from 'react-use';\n\nimport {\n  DataSourceJsonData,\n  DataSourceInstanceSettings,\n  DataSourcePluginOptionsEditorProps,\n  updateDatasourcePluginJsonDataOption,\n} from '@grafana/data';\nimport { ConfigDescriptionLink, ConfigSection } from '@grafana/plugin-ui';\nimport { DataSourcePicker, DataSourceWithBackend, getDataSourceSrv } from '@grafana/runtime';\nimport { InlineField, InlineFieldRow, Input, InlineSwitch } from '@grafana/ui';\n\nimport { TagMappingInput } from '../TraceToLogs/TagMappingInput';\nimport { ProfileTypesCascader } from '../pyroscope/ProfileTypesCascader';\nimport { ProfileTypeMessage } from '../pyroscope/types';\n\nexport interface TraceToProfilesOptions {\n  datasourceUid?: string;\n  tags?: Array<{ key: string; value?: string }>;\n  query?: string;\n  profileTypeId?: string;\n  customQuery: boolean;\n}\n\nexport interface TraceToProfilesData extends DataSourceJsonData {\n  tracesToProfiles?: TraceToProfilesOptions;\n}\n\ninterface Props extends DataSourcePluginOptionsEditorProps<TraceToProfilesData> {}\n\nexport function TraceToProfilesSettings({ options, onOptionsChange }: Props) {\n  const supportedDataSourceTypes = useMemo(() => ['grafana-pyroscope-datasource'], []);\n\n  const [profileTypes, setProfileTypes] = useState<ProfileTypeMessage[]>([]);\n  const profileTypesPlaceholder = useMemo(() => {\n    let placeholder = profileTypes.length === 0 ? 'No profile types found' : 'Select profile type';\n    if (!options.jsonData.tracesToProfiles?.datasourceUid) {\n      placeholder = 'Please select profiling data source';\n    }\n    return placeholder;\n  }, [options.jsonData.tracesToProfiles?.datasourceUid, profileTypes]);\n\n  const { value: dataSource } = useAsync(async () => {\n    return await getDataSourceSrv().get(options.jsonData.tracesToProfiles?.datasourceUid);\n  }, [options.jsonData.tracesToProfiles?.datasourceUid]);\n\n  const { value: pTypes } = useAsync(async () => {\n    if (\n      dataSource instanceof DataSourceWithBackend &&\n      supportedDataSourceTypes.includes(dataSource.type) &&\n      dataSource.uid === options.jsonData.tracesToProfiles?.datasourceUid\n    ) {\n      return await dataSource?.getResource('profileTypes');\n    }\n  }, [dataSource]);\n\n  useEffect(() => {\n    setProfileTypes(pTypes ?? []);\n  }, [pTypes]);\n\n  return (\n    <div className={css({ width: '100%' })}>\n      <InlineFieldRow>\n        <InlineField\n          tooltip=\"The profiles data source the trace is going to navigate to\"\n          label=\"Data source\"\n          labelWidth={26}\n        >\n          <DataSourcePicker\n            inputId=\"trace-to-profiles-data-source-picker\"\n            filter={(ds) => supportedDataSourceTypes.includes(ds.type)}\n            current={options.jsonData.tracesToProfiles?.datasourceUid}\n            noDefault={true}\n            width={40}\n            onChange={(ds: DataSourceInstanceSettings) => {\n              updateDatasourcePluginJsonDataOption({ onOptionsChange, options }, 'tracesToProfiles', {\n                ...options.jsonData.tracesToProfiles,\n                datasourceUid: ds.uid,\n              });\n            }}\n            onClear={() => {\n              updateDatasourcePluginJsonDataOption({ onOptionsChange, options }, 'tracesToProfiles', {\n                ...options.jsonData.tracesToProfiles,\n                datasourceUid: undefined,\n              });\n            }}\n          />\n        </InlineField>\n      </InlineFieldRow>\n\n      <InlineFieldRow>\n        <InlineField\n          tooltip=\"Tags that will be used in the query. Default tags: 'service.name', 'service.namespace'\"\n          label=\"Tags\"\n          labelWidth={26}\n        >\n          <TagMappingInput\n            values={options.jsonData.tracesToProfiles?.tags ?? []}\n            onChange={(v) => {\n              updateDatasourcePluginJsonDataOption({ onOptionsChange, options }, 'tracesToProfiles', {\n                ...options.jsonData.tracesToProfiles,\n                tags: v,\n              });\n            }}\n          />\n        </InlineField>\n      </InlineFieldRow>\n\n      <InlineFieldRow>\n        <InlineField tooltip=\"Profile type that will be used in the query\" label=\"Profile type\" labelWidth={26}>\n          <ProfileTypesCascader\n            profileTypes={profileTypes}\n            placeholder={profileTypesPlaceholder}\n            initialProfileTypeId={options.jsonData.tracesToProfiles?.profileTypeId}\n            onChange={(val) => {\n              updateDatasourcePluginJsonDataOption({ onOptionsChange, options }, 'tracesToProfiles', {\n                ...options.jsonData.tracesToProfiles,\n                profileTypeId: val,\n              });\n            }}\n            width={40}\n          />\n        </InlineField>\n      </InlineFieldRow>\n\n      <InlineFieldRow>\n        <InlineField\n          tooltip=\"Use a custom query with the possibility to interpolate variables from the trace or span\"\n          label=\"Use custom query\"\n          labelWidth={26}\n        >\n          <InlineSwitch\n            id={'profilesCustomQuerySwitch'}\n            value={options.jsonData.tracesToProfiles?.customQuery}\n            onChange={(event: React.SyntheticEvent<HTMLInputElement>) =>\n              updateDatasourcePluginJsonDataOption({ onOptionsChange, options }, 'tracesToProfiles', {\n                ...options.jsonData.tracesToProfiles,\n                customQuery: event.currentTarget.checked,\n              })\n            }\n          />\n        </InlineField>\n      </InlineFieldRow>\n\n      {options.jsonData.tracesToProfiles?.customQuery && (\n        <InlineField\n          label=\"Query\"\n          labelWidth={26}\n          tooltip=\"The query that will run when navigating from a trace to profiles data source. Interpolate tags using the `$__tags` keyword\"\n          grow\n        >\n          <Input\n            label=\"Query\"\n            type=\"text\"\n            allowFullScreen\n            value={options.jsonData.tracesToProfiles?.query || ''}\n            onChange={(e) =>\n              updateDatasourcePluginJsonDataOption({ onOptionsChange, options }, 'tracesToProfiles', {\n                ...options.jsonData.tracesToProfiles,\n                query: e.currentTarget.value,\n              })\n            }\n          />\n        </InlineField>\n      )}\n    </div>\n  );\n}\n\nexport const TraceToProfilesSection = ({ options, onOptionsChange }: DataSourcePluginOptionsEditorProps) => {\n  return (\n    <ConfigSection\n      title=\"Trace to profiles\"\n      description={\n        <ConfigDescriptionLink\n          description=\"Navigate from a trace span to the selected data source's profiles.\"\n          suffix={`${options.type}/configure-tempo-data-source/#trace-to-profiles`}\n          feature=\"trace to profiles\"\n        />\n      }\n      isCollapsible={true}\n      isInitiallyOpen={true}\n    >\n      <TraceToProfilesSettings options={options} onOptionsChange={onOptionsChange} />\n    </ConfigSection>\n  );\n};\n","import { css } from '@emotion/css';\nimport * as React from 'react';\n\nimport {\n  DataSourceJsonData,\n  DataSourcePluginOptionsEditorProps,\n  GrafanaTheme2,\n  updateDatasourcePluginJsonDataOption,\n} from '@grafana/data';\nimport { ConfigDescriptionLink, ConfigSubSection } from '@grafana/plugin-ui';\nimport { InlineField, InlineFieldRow, InlineSwitch, useStyles2 } from '@grafana/ui';\n\nexport interface NodeGraphOptions {\n  enabled?: boolean;\n}\n\nexport interface NodeGraphData extends DataSourceJsonData {\n  nodeGraph?: NodeGraphOptions;\n}\n\ninterface Props extends DataSourcePluginOptionsEditorProps<NodeGraphData> {}\n\nexport function NodeGraphSettings({ options, onOptionsChange }: Props) {\n  const styles = useStyles2(getStyles);\n\n  return (\n    <div className={styles.container}>\n      <InlineFieldRow className={styles.row}>\n        <InlineField\n          tooltip=\"Displays the node graph above the trace view. Default: disabled\"\n          label=\"Enable node graph\"\n          labelWidth={26}\n        >\n          <InlineSwitch\n            id=\"enableNodeGraph\"\n            value={options.jsonData.nodeGraph?.enabled}\n            onChange={(event: React.SyntheticEvent<HTMLInputElement>) =>\n              updateDatasourcePluginJsonDataOption({ onOptionsChange, options }, 'nodeGraph', {\n                ...options.jsonData.nodeGraph,\n                enabled: event.currentTarget.checked,\n              })\n            }\n          />\n        </InlineField>\n      </InlineFieldRow>\n    </div>\n  );\n}\n\nexport const NodeGraphSection = ({ options, onOptionsChange }: DataSourcePluginOptionsEditorProps) => {\n  let suffix = options.type;\n  suffix += options.type === 'tempo' ? '/configure-tempo-data-source/#node-graph' : '/#node-graph';\n\n  return (\n    <ConfigSubSection\n      title=\"Node graph\"\n      description={\n        <ConfigDescriptionLink\n          description=\"Show or hide the node graph visualization.\"\n          suffix={suffix}\n          feature=\"the node graph\"\n        />\n      }\n    >\n      <NodeGraphSettings options={options} onOptionsChange={onOptionsChange} />\n    </ConfigSubSection>\n  );\n};\n\nconst getStyles = (theme: GrafanaTheme2) => ({\n  infoText: css({\n    label: 'infoText',\n    paddingBottom: theme.spacing(2),\n    color: theme.colors.text.secondary,\n  }),\n  container: css({\n    label: 'container',\n    width: '100%',\n  }),\n  row: css({\n    label: 'row',\n    alignItems: 'baseline',\n  }),\n});\n","import { css } from '@emotion/css';\n\nimport {\n  DataSourceJsonData,\n  DataSourcePluginOptionsEditorProps,\n  GrafanaTheme2,\n  toOption,\n  updateDatasourcePluginJsonDataOption,\n} from '@grafana/data';\nimport { ConfigDescriptionLink, ConfigSubSection } from '@grafana/plugin-ui';\nimport { InlineField, InlineFieldRow, Input, Select, useStyles2 } from '@grafana/ui';\n\nexport interface SpanBarOptions {\n  type?: string;\n  tag?: string;\n}\n\nexport interface SpanBarOptionsData extends DataSourceJsonData {\n  spanBar?: SpanBarOptions;\n}\n\nexport const NONE = 'None';\nexport const DURATION = 'Duration';\nexport const TAG = 'Tag';\n\ninterface Props extends DataSourcePluginOptionsEditorProps<SpanBarOptionsData> {}\n\nexport default function SpanBarSettings({ options, onOptionsChange }: Props) {\n  const styles = useStyles2(getStyles);\n  const selectOptions = [NONE, DURATION, TAG].map(toOption);\n\n  return (\n    <div className={css({ width: '100%' })}>\n      <InlineFieldRow className={styles.row}>\n        <InlineField label=\"Label\" labelWidth={26} tooltip=\"Default: duration\" grow>\n          <Select\n            inputId=\"label\"\n            options={selectOptions}\n            value={options.jsonData.spanBar?.type || ''}\n            onChange={(v) => {\n              updateDatasourcePluginJsonDataOption({ onOptionsChange, options }, 'spanBar', {\n                ...options.jsonData.spanBar,\n                type: v?.value ?? '',\n              });\n            }}\n            placeholder=\"Duration\"\n            isClearable\n            aria-label={'select-label-name'}\n            width={40}\n          />\n        </InlineField>\n      </InlineFieldRow>\n      {options.jsonData.spanBar?.type === TAG && (\n        <InlineFieldRow className={styles.row}>\n          <InlineField\n            label=\"Tag key\"\n            labelWidth={26}\n            tooltip=\"Tag key which will be used to get the tag value. A span's attributes and resources will be searched for the tag key\"\n          >\n            <Input\n              type=\"text\"\n              placeholder=\"Enter tag key\"\n              onChange={(v) =>\n                updateDatasourcePluginJsonDataOption({ onOptionsChange, options }, 'spanBar', {\n                  ...options.jsonData.spanBar,\n                  tag: v.currentTarget.value,\n                })\n              }\n              value={options.jsonData.spanBar?.tag || ''}\n              width={40}\n            />\n          </InlineField>\n        </InlineFieldRow>\n      )}\n    </div>\n  );\n}\n\nexport const SpanBarSection = ({ options, onOptionsChange }: DataSourcePluginOptionsEditorProps) => {\n  let suffix = options.type;\n  suffix += options.type === 'tempo' ? '/configure-tempo-data-source/#span-bar' : '/#span-bar';\n\n  return (\n    <ConfigSubSection\n      title=\"Span bar\"\n      description={\n        <ConfigDescriptionLink\n          description=\"Add additional info next to the service and operation on a span bar row in the trace view.\"\n          suffix={suffix}\n          feature=\"the span bar\"\n        />\n      }\n    >\n      <SpanBarSettings options={options} onOptionsChange={onOptionsChange} />\n    </ConfigSubSection>\n  );\n};\n\nconst getStyles = (theme: GrafanaTheme2) => ({\n  infoText: css({\n    label: 'infoText',\n    paddingBottom: theme.spacing(2),\n    color: theme.colors.text.secondary,\n  }),\n  row: css({\n    label: 'row',\n    alignItems: 'baseline',\n  }),\n});\n","import {\n  DataSourceInstanceSettings,\n  DataSourcePluginOptionsEditorProps,\n  updateDatasourcePluginJsonDataOption,\n} from '@grafana/data';\nimport { DataSourcePicker } from '@grafana/runtime';\nimport { Button, InlineField, InlineFieldRow, useStyles2, Combobox, TextLink } from '@grafana/ui';\n\nimport { TempoJsonData } from '../types';\n\nimport { getStyles } from './QuerySettings';\n\ninterface Props extends DataSourcePluginOptionsEditorProps<TempoJsonData> {}\n\nexport function ServiceGraphSettings({ options, onOptionsChange }: Props) {\n  const styles = useStyles2(getStyles);\n\n  const histogramOptions = [\n    { label: 'Classic', value: 'classic' },\n    { label: 'Native', value: 'native' },\n    { label: 'Both', value: 'both' },\n  ];\n\n  const nativeHistogramDocs = (\n    <>\n      Select which type of histograms are configured in the {metricsGeneratorDocsLink()}. If native histograms are\n      configured, you must also configure native histograms ingestion in {prometheusNativeHistogramsDocsLink()} or{' '}\n      {mimirNativeHistogramsDocsLink()}.\n    </>\n  );\n\n  function metricsGeneratorDocsLink() {\n    return (\n      <TextLink href=\"https://grafana.com/docs/tempo/latest/setup-and-configuration/metrics-generator/\" external>\n        Tempo metrics generator\n      </TextLink>\n    );\n  }\n\n  function prometheusNativeHistogramsDocsLink() {\n    return (\n      <TextLink href=\"https://prometheus.io/docs/specs/native_histograms/#native-histograms\" external>\n        Prometheus\n      </TextLink>\n    );\n  }\n\n  function mimirNativeHistogramsDocsLink() {\n    return (\n      <TextLink\n        href=\"https://grafana.com/docs/mimir/latest/configure/configure-native-histograms-ingestion/#configure-native-histograms-globally\"\n        external\n      >\n        Mimir\n      </TextLink>\n    );\n  }\n\n  return (\n    <div className={styles.container}>\n      <InlineFieldRow className={styles.row}>\n        <InlineField\n          tooltip=\"The Prometheus data source with the service graph data\"\n          label=\"Data source\"\n          labelWidth={26}\n        >\n          <DataSourcePicker\n            inputId=\"service-graph-data-source-picker\"\n            pluginId=\"prometheus\"\n            current={options.jsonData.serviceMap?.datasourceUid}\n            noDefault={true}\n            width={40}\n            onChange={(ds: DataSourceInstanceSettings) =>\n              updateDatasourcePluginJsonDataOption({ onOptionsChange, options }, 'serviceMap', {\n                datasourceUid: ds.uid,\n              })\n            }\n          />\n        </InlineField>\n        {options.jsonData.serviceMap?.datasourceUid ? (\n          <Button\n            type={'button'}\n            variant={'secondary'}\n            size={'sm'}\n            fill={'text'}\n            onClick={() => {\n              updateDatasourcePluginJsonDataOption({ onOptionsChange, options }, 'serviceMap', {\n                datasourceUid: undefined,\n              });\n            }}\n          >\n            Clear\n          </Button>\n        ) : null}\n      </InlineFieldRow>\n      <InlineFieldRow className={styles.row}>\n        {/* TODO: Remove this in favor of automatic detection of native histograms https://github.com/grafana/grafana/issues/109709 */}\n        <InlineField tooltip={nativeHistogramDocs} label=\"Histogram type\" labelWidth={26} interactive={true}>\n          <Combobox\n            id=\"histogram-type-select\"\n            value={options.jsonData.serviceMap?.histogramType || 'classic'}\n            width={40}\n            options={histogramOptions}\n            onChange={(value) =>\n              updateDatasourcePluginJsonDataOption({ onOptionsChange, options }, 'serviceMap', {\n                ...options.jsonData.serviceMap,\n                histogramType: value.value,\n              })\n            }\n          />\n        </InlineField>\n      </InlineFieldRow>\n    </div>\n  );\n}\n","import React from 'react';\n\nimport {\n  DataSourceJsonData,\n  DataSourcePluginOptionsEditorProps,\n  updateDatasourcePluginJsonDataOption,\n} from '@grafana/data';\nimport { ConfigSection } from '@grafana/plugin-ui';\nimport { InlineFieldRow, InlineField, InlineSwitch, Alert, Stack, TextLink } from '@grafana/ui';\n\nimport { FeatureName, featuresToTempoVersion } from '../datasource';\n\ninterface StreamingOptions extends DataSourceJsonData {\n  streamingEnabled?: {\n    search?: boolean;\n    metrics?: boolean;\n  };\n}\ninterface Props extends DataSourcePluginOptionsEditorProps<StreamingOptions> {}\n\nexport const StreamingSection = ({ options, onOptionsChange }: Props) => {\n  return (\n    <ConfigSection\n      title=\"Streaming\"\n      isCollapsible={false}\n      description={\n        <Stack gap={0.5}>\n          <div>Enable streaming for different Tempo features.</div>\n          <TextLink external href={'https://grafana.com/docs/tempo/latest/traceql/#stream-query-results'}>\n            Learn more\n          </TextLink>\n        </Stack>\n      }\n    >\n      <Alert severity=\"info\" title=\"Streaming and self-managed Tempo instances\">\n        If your Tempo instance is behind a load balancer or proxy that does not supporting gRPC or HTTP2, streaming will\n        probably not work and should be disabled.\n      </Alert>\n      <InlineFieldRow>\n        <InlineField\n          tooltip={`Enable streaming for search queries. Minimum required version for Tempo: ${featuresToTempoVersion[FeatureName.searchStreaming]}.`}\n          label=\"Search queries\"\n          labelWidth={26}\n        >\n          <InlineSwitch\n            id={'streamingEnabled.search'}\n            // TECHDEBT: We should check whether the feature is supported by the Tempo version,\n            // but here we don't have easily access to such information\n            value={options.jsonData.streamingEnabled?.search || false}\n            onChange={(event: React.SyntheticEvent<HTMLInputElement>) => {\n              updateDatasourcePluginJsonDataOption({ onOptionsChange, options }, 'streamingEnabled', {\n                ...options.jsonData.streamingEnabled,\n                search: event.currentTarget.checked,\n              });\n            }}\n          />\n        </InlineField>\n      </InlineFieldRow>\n      <InlineFieldRow>\n        <InlineField\n          tooltip={`Enable streaming for metrics queries. Minimum required version for Tempo: ${featuresToTempoVersion[FeatureName.metricsStreaming]}.`}\n          label=\"Metrics queries\"\n          labelWidth={26}\n        >\n          <InlineSwitch\n            id={'streamingEnabled.metrics'}\n            // TECHDEBT: We should check whether the feature is supported by the Tempo version,\n            // but here we don't have easily access to such information\n            value={options.jsonData.streamingEnabled?.metrics || false}\n            onChange={(event: React.SyntheticEvent<HTMLInputElement>) => {\n              updateDatasourcePluginJsonDataOption({ onOptionsChange, options }, 'streamingEnabled', {\n                ...options.jsonData.streamingEnabled,\n                metrics: event.currentTarget.checked,\n              });\n            }}\n          />\n        </InlineField>\n      </InlineFieldRow>\n    </ConfigSection>\n  );\n};\n","import { css } from '@emotion/css';\n\nimport {\n  DataSourceJsonData,\n  DataSourcePluginOptionsEditorProps,\n  GrafanaTheme2,\n  updateDatasourcePluginJsonDataOption,\n} from '@grafana/data';\nimport { ConfigDescriptionLink, ConfigSubSection } from '@grafana/plugin-ui';\nimport { InlineField, InlineFieldRow, Input, useStyles2 } from '@grafana/ui';\n\nexport interface TagLimitOptions extends DataSourceJsonData {\n  tagLimit?: number;\n}\n\ninterface Props extends DataSourcePluginOptionsEditorProps<TagLimitOptions> {}\n\nexport default function TagLimitSettings({ options, onOptionsChange }: Props) {\n  const styles = useStyles2(getStyles);\n\n  return (\n    <div className={css({ width: '100%' })}>\n      <InlineFieldRow className={styles.row}>\n        <InlineField\n          label=\"Max tags and tag values\"\n          labelWidth={26}\n          tooltip=\"Specify the max number of tags and tag values to display in the Tempo editor. Default: 5000\"\n        >\n          <Input\n            type=\"number\"\n            placeholder=\"5000\"\n            onChange={(v) =>\n              updateDatasourcePluginJsonDataOption({ onOptionsChange, options }, 'tagLimit', v.currentTarget.value)\n            }\n            value={options.jsonData.tagLimit || ''}\n            width={40}\n          />\n        </InlineField>\n      </InlineFieldRow>\n    </div>\n  );\n}\n\nexport const TagLimitSection = ({ options, onOptionsChange }: DataSourcePluginOptionsEditorProps) => {\n  return (\n    <ConfigSubSection\n      title=\"Tag limit\"\n      description={\n        <ConfigDescriptionLink\n          description=\"Specify the limit for tags and tag values.\"\n          suffix={'tempo/configure-tempo-data-source/#tag-limit'}\n          feature=\"the tag limit\"\n        />\n      }\n    >\n      <TagLimitSettings options={options} onOptionsChange={onOptionsChange} />\n    </ConfigSubSection>\n  );\n};\n\nconst getStyles = (theme: GrafanaTheme2) => ({\n  infoText: css({\n    label: 'infoText',\n    paddingBottom: theme.spacing(2),\n    color: theme.colors.text.secondary,\n  }),\n  row: css({\n    label: 'row',\n    alignItems: 'baseline',\n  }),\n});\n","import { useCallback, useEffect } from 'react';\nimport useAsync from 'react-use/lib/useAsync';\n\nimport { DataSourcePluginOptionsEditorProps, updateDatasourcePluginJsonDataOption } from '@grafana/data';\nimport { Alert } from '@grafana/ui';\n\nimport TagsInput from '../SearchTraceQLEditor/TagsInput';\nimport { replaceAt } from '../SearchTraceQLEditor/utils';\nimport { TraceqlFilter, TraceqlSearchScope } from '../dataquery.gen';\nimport { TempoDatasource } from '../datasource';\nimport { TempoJsonData } from '../types';\nimport { getErrorMessage } from '../utils';\n\ninterface Props extends DataSourcePluginOptionsEditorProps<TempoJsonData> {\n  datasource?: TempoDatasource;\n}\n\nexport function TraceQLSearchTags({ options, onOptionsChange, datasource }: Props) {\n  const fetchTags = async () => {\n    if (!datasource) {\n      throw new Error('Unable to retrieve datasource');\n    }\n\n    try {\n      await datasource.languageProvider.start();\n    } catch (err) {\n      // @ts-ignore\n      throw new Error(getErrorMessage(err.data.message, 'Unable to query Tempo'));\n    }\n  };\n\n  const { error, loading } = useAsync(fetchTags, [datasource, options]);\n\n  const updateFilter = useCallback(\n    (s: TraceqlFilter) => {\n      let copy = options.jsonData.search?.filters;\n      copy ||= [];\n      const indexOfFilter = copy.findIndex((f) => f.id === s.id);\n      if (indexOfFilter >= 0) {\n        // update in place if the filter already exists, for consistency and to avoid UI bugs\n        copy = replaceAt(copy, indexOfFilter, s);\n      } else {\n        copy.push(s);\n      }\n      updateDatasourcePluginJsonDataOption({ onOptionsChange, options }, 'search', {\n        ...options.jsonData.search,\n        filters: copy,\n      });\n    },\n    [onOptionsChange, options]\n  );\n\n  const deleteFilter = (s: TraceqlFilter) => {\n    updateDatasourcePluginJsonDataOption({ onOptionsChange, options }, 'search', {\n      ...options.jsonData.search,\n      filters: options.jsonData.search?.filters?.filter((f) => f.id !== s.id),\n    });\n  };\n\n  useEffect(() => {\n    if (!options.jsonData.search?.filters) {\n      updateDatasourcePluginJsonDataOption({ onOptionsChange, options }, 'search', {\n        ...options.jsonData.search,\n        filters: [\n          {\n            id: 'service-name',\n            tag: 'service.name',\n            operator: '=',\n            scope: TraceqlSearchScope.Resource,\n          },\n          { id: 'span-name', tag: 'name', operator: '=', scope: TraceqlSearchScope.Span },\n        ],\n      });\n    }\n  }, [onOptionsChange, options]);\n\n  // filter out tags that already exist in TraceQLSearch editor\n  const staticTags = ['duration'];\n\n  const missingTag = options.jsonData.search?.filters?.find((f) => !f.tag);\n\n  return (\n    <>\n      {datasource ? (\n        <TagsInput\n          updateFilter={updateFilter}\n          deleteFilter={deleteFilter}\n          filters={options.jsonData.search?.filters || []}\n          datasource={datasource}\n          setError={() => {}}\n          staticTags={staticTags}\n          isTagsLoading={loading}\n          hideValues={true}\n          generateQueryWithoutFilter={() => '{}'}\n        />\n      ) : (\n        <div>Invalid data source, please create a valid data source and try again</div>\n      )}\n      {error && (\n        <Alert title={'Unable to fetch TraceQL tags'} severity={'error'} topSpacing={1}>\n          {error.message}\n        </Alert>\n      )}\n      {missingTag && (\n        <Alert title={'Please ensure each filter has a selected tag'} severity={'warning'} topSpacing={1}></Alert>\n      )}\n    </>\n  );\n}\n","import * as React from 'react';\nimport useAsync from 'react-use/lib/useAsync';\n\nimport { DataSourcePluginOptionsEditorProps, updateDatasourcePluginJsonDataOption } from '@grafana/data';\nimport { getDataSourceSrv } from '@grafana/runtime';\nimport { InlineField, InlineFieldRow, InlineSwitch, useStyles2 } from '@grafana/ui';\n\nimport { TempoDatasource } from '../datasource';\nimport { TempoJsonData } from '../types';\n\nimport { getStyles } from './QuerySettings';\nimport { TraceQLSearchTags } from './TraceQLSearchTags';\n\ninterface Props extends DataSourcePluginOptionsEditorProps<TempoJsonData> {}\n\nexport function TraceQLSearchSettings({ options, onOptionsChange }: Props) {\n  const styles = useStyles2(getStyles);\n  const dataSourceSrv = getDataSourceSrv();\n  const fetchDatasource = async () => {\n    return (await dataSourceSrv.get({ type: options.type, uid: options.uid })) as TempoDatasource;\n  };\n\n  const { value: datasource } = useAsync(fetchDatasource, [dataSourceSrv, options]);\n\n  return (\n    <div className={styles.container}>\n      <InlineFieldRow className={styles.row}>\n        <InlineField tooltip=\"Removes the search tab from the query editor\" label=\"Hide search\" labelWidth={26}>\n          <InlineSwitch\n            id=\"hideSearch\"\n            value={options.jsonData.search?.hide}\n            onChange={(event: React.SyntheticEvent<HTMLInputElement>) =>\n              updateDatasourcePluginJsonDataOption({ onOptionsChange, options }, 'search', {\n                ...options.jsonData.search,\n                hide: event.currentTarget.checked,\n              })\n            }\n          />\n        </InlineField>\n      </InlineFieldRow>\n      <InlineFieldRow className={styles.row}>\n        <InlineField tooltip=\"Configures which fields are available in the UI\" label=\"Static filters\" labelWidth={26}>\n          <TraceQLSearchTags datasource={datasource} options={options} onOptionsChange={onOptionsChange} />\n        </InlineField>\n      </InlineFieldRow>\n    </div>\n  );\n}\n","import { css } from '@emotion/css';\n\nimport { DataSourcePluginOptionsEditorProps, GrafanaTheme2 } from '@grafana/data';\nimport {\n  NodeGraphSection,\n  SpanBarSection,\n  TraceToLogsSection,\n  TraceToMetricsSection,\n  TraceToProfilesSection,\n} from '@grafana/o11y-ds-frontend';\nimport {\n  AdvancedHttpSettings,\n  Auth,\n  ConfigSection,\n  ConfigDescriptionLink,\n  ConfigSubSection,\n  ConnectionSettings,\n  convertLegacyAuthProps,\n  DataSourceDescription,\n} from '@grafana/plugin-ui';\nimport { config } from '@grafana/runtime';\nimport { SecureSocksProxySettings, useStyles2, Divider, Stack } from '@grafana/ui';\n\nimport { QuerySettings } from './QuerySettings';\nimport { ServiceGraphSettings } from './ServiceGraphSettings';\nimport { StreamingSection } from './StreamingSection';\nimport { TagLimitSection } from './TagLimitSettings';\nimport { TagsTimeRangeSettings } from './TagsTimeRangeSettings';\nimport { TraceQLSearchSettings } from './TraceQLSearchSettings';\n\nexport type ConfigEditorProps = DataSourcePluginOptionsEditorProps;\n\nconst ConfigEditor = ({ options, onOptionsChange }: ConfigEditorProps) => {\n  const styles = useStyles2(getStyles);\n\n  return (\n    <div className={styles.container}>\n      <DataSourceDescription\n        dataSourceName=\"Tempo\"\n        docsLink=\"https://grafana.com/docs/grafana/latest/datasources/tempo\"\n        hasRequiredFields={false}\n      />\n\n      <Divider spacing={4} />\n      <ConnectionSettings config={options} onChange={onOptionsChange} urlPlaceholder=\"http://localhost:3200\" />\n\n      <Divider spacing={4} />\n      <Auth\n        {...convertLegacyAuthProps({\n          config: options,\n          onChange: onOptionsChange,\n        })}\n      />\n      <Divider spacing={4} />\n\n      <StreamingSection options={options} onOptionsChange={onOptionsChange} />\n      <Divider spacing={4} />\n\n      <TraceToLogsSection options={options} onOptionsChange={onOptionsChange} />\n      <Divider spacing={4} />\n\n      <TraceToMetricsSection options={options} onOptionsChange={onOptionsChange} />\n      <Divider spacing={4} />\n\n      <TraceToProfilesSection options={options} onOptionsChange={onOptionsChange} />\n      <Divider spacing={4} />\n\n      <ConfigSection\n        title=\"Additional settings\"\n        description=\"Additional settings are optional settings that can be configured for more control over your data source.\"\n        isCollapsible={true}\n        isInitiallyOpen={false}\n      >\n        <Stack gap={5} direction=\"column\">\n          <AdvancedHttpSettings config={options} onChange={onOptionsChange} />\n\n          {config.secureSocksDSProxyEnabled && (\n            <SecureSocksProxySettings options={options} onOptionsChange={onOptionsChange} />\n          )}\n\n          <ConfigSubSection\n            title=\"Service graph\"\n            description={\n              <ConfigDescriptionLink\n                description=\"Select a Prometheus data source that contains the service graph data.\"\n                suffix=\"tempo/configure-tempo-data-source/#service-graph\"\n                feature=\"the service graph\"\n              />\n            }\n          >\n            <ServiceGraphSettings options={options} onOptionsChange={onOptionsChange} />\n          </ConfigSubSection>\n\n          <NodeGraphSection options={options} onOptionsChange={onOptionsChange} />\n\n          <ConfigSubSection\n            title=\"Tempo search\"\n            description={\n              <ConfigDescriptionLink\n                description=\"Modify how traces are searched.\"\n                suffix=\"tempo/configure-tempo-data-source/#tempo-search\"\n                feature=\"Tempo search\"\n              />\n            }\n          >\n            <TraceQLSearchSettings options={options} onOptionsChange={onOptionsChange} />\n          </ConfigSubSection>\n\n          <ConfigSubSection\n            title=\"TraceID query\"\n            description={\n              <ConfigDescriptionLink\n                description=\"Modify how TraceID queries are run.\"\n                suffix=\"tempo/configure-tempo-data-source/#traceid-query\"\n                feature=\"the TraceID query\"\n              />\n            }\n          >\n            <QuerySettings options={options} onOptionsChange={onOptionsChange} />\n          </ConfigSubSection>\n\n          <ConfigSubSection\n            title=\"Tags time range\"\n            description={\n              <ConfigDescriptionLink\n                description=\"Modify how tags and tag values queries are run.\"\n                suffix=\"tempo/configure-tempo-data-source/#tags-time-range\"\n                feature=\"the tags time range\"\n              />\n            }\n          >\n            <TagsTimeRangeSettings options={options} onOptionsChange={onOptionsChange} />\n          </ConfigSubSection>\n\n          <TagLimitSection options={options} onOptionsChange={onOptionsChange} />\n          <SpanBarSection options={options} onOptionsChange={onOptionsChange} />\n        </Stack>\n      </ConfigSection>\n    </div>\n  );\n};\n\nconst getStyles = (theme: GrafanaTheme2) => ({\n  container: css({\n    marginBottom: theme.spacing(2),\n    maxWidth: '900px',\n  }),\n});\n\nexport default ConfigEditor;\n"],"names":["TraceToMetricsSettings","options","onOptionsChange","styles","useStyles2","getStyles","div","className","css","width","InlineFieldRow","row","InlineField","tooltip","label","labelWidth","DataSourcePicker","inputId","pluginId","current","jsonData","tracesToMetrics","datasourceUid","noDefault","onChange","ds","updateDatasourcePluginJsonDataOption","uid","onClear","undefined","IntervalInput","getTimeShiftLabel","getTimeShiftTooltip","value","spanStartTimeShift","val","placeholder","isInvalidError","invalidTimeShiftError","spanEndTimeShift","TagMappingInput","values","tags","v","queries","map","query","i","queryRow","Input","type","allowFullScreen","name","e","newQueries","traceToMetricQuery","index","currentTarget","grow","updatedQueries","Button","variant","aria-label","icon","onClick","filter","_","title","TraceToMetricsSection","suffix","ConfigSection","description","ConfigDescriptionLink","feature","isCollapsible","isInitiallyOpen","theme","infoText","paddingBottom","spacing","color","colors","text","secondary","alignItems","display","flexFlow","ProfileTypesCascader","props","cascaderOptions","profileTypes","useMemo","mainTypes","Map","profileType","parts","id","indexOf","split","has","set","items","get","push","Array","from","Cascader","separator","displayAllSelectedLevels","initialValue","initialProfileTypeId","allowCustomValue","onSelect","changeOnSelect","TraceToProfilesSettings","supportedDataSourceTypes","setProfileTypes","useState","profileTypesPlaceholder","length","tracesToProfiles","dataSource","useAsync","getDataSourceSrv","pTypes","DataSourceWithBackend","includes","getResource","useEffect","profileTypeId","InlineSwitch","customQuery","event","checked","TraceToProfilesSection","NodeGraphSettings","container","nodeGraph","enabled","NodeGraphSection","ConfigSubSection","NONE","DURATION","TAG","SpanBarSettings","selectOptions","toOption","Select","spanBar","isClearable","tag","SpanBarSection","ServiceGraphSettings","nativeHistogramDocs","TextLink","href","external","serviceMap","size","fill","interactive","Combobox","histogramType","StreamingSection","Stack","gap","Alert","severity","featuresToTempoVersion","FeatureName","searchStreaming","streamingEnabled","search","metricsStreaming","metrics","TagLimitSettings","tagLimit","TagLimitSection","TraceQLSearchTags","datasource","error","loading","Error","languageProvider","start","err","getErrorMessage","data","message","updateFilter","useCallback","s","copy","filters","indexOfFilter","findIndex","f","replaceAt","operator","scope","TraceqlSearchScope","Resource","Span","missingTag","find","TagsInput","deleteFilter","setError","staticTags","isTagsLoading","hideValues","generateQueryWithoutFilter","topSpacing","TraceQLSearchSettings","dataSourceSrv","hide","marginBottom","maxWidth","DataSourceDescription","dataSourceName","docsLink","hasRequiredFields","Divider","ConnectionSettings","config","urlPlaceholder","Auth","convertLegacyAuthProps","TraceToLogsSection","direction","AdvancedHttpSettings","secureSocksDSProxyEnabled","SecureSocksProxySettings","QuerySettings","TagsTimeRangeSettings"],"sourceRoot":""}