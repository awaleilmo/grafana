"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[7197],{5878:(N,P,t)=>{N.exports=t.p+"static/img/grab_light.322c3334.svg"},20230:(N,P,t)=>{N.exports=t.p+"static/img/grab_dark.4ee8d28b.svg"},27787:(N,P,t)=>{t.r(P),t.d(P,{default:()=>Ds});var s=t(74848),l=t(43173),e=t(22803),v=t(96540),D=t(54148),m=t(75683),L=t(51898),O=t(45863),p=t(63142),T=t(41654),E=t(30703),i=t(31286),g=t(34999),y=t(13791),u=t(11098);const R=t.p+"static/img/grafana_text_logo_dark.70a1e5ee.svg",z=t.p+"static/img/grafana_text_logo_light.467e047c.svg",I="https://grafana.com/?src=grafananet&cnt=public-dashboards",U=z,G=R,S="grafana-logo",A=o=>{const a=(0,p.$j)(),n=(0,p.of)(w),{footerHide:c,footerText:r,footerLink:f,footerLogo:d,headerLogoHide:x}=o||{footerHide:!1,footerText:"Powered by",footerLogo:S,footerLink:I,headerLogoHide:!1};return{footerHide:c,footerText:(0,s.jsx)("span",{className:n.text,children:r}),footerLogo:d===S?a.isDark?U:G:d,footerLink:f,headerLogoHide:x}};let B=()=>A();function Ls(o){B=()=>A(o)}const w=o=>({text:(0,e.css)({color:o.colors.text.secondary,fontSize:o.typography.body.fontSize})}),q=L.Tp.pages.PublicDashboard,Q=function(){const o=(0,p.of)(_),a=B();return a.footerHide?null:(0,s.jsx)("div",{className:o.footer,"data-testid":q.footer,children:(0,s.jsxs)("a",{className:o.link,href:a.footerLink,target:"_blank",rel:"noreferrer noopener",children:[a.footerText," ",(0,s.jsx)("img",{className:o.logoImg,alt:"",src:a.footerLogo})]})})},_=o=>({footer:(0,e.css)({display:"flex",justifyContent:"end",height:"30px",backgroundColor:o.colors.background.canvas,position:"sticky",bottom:0,zIndex:o.zIndex.navbarFixed,padding:o.spacing(.5,0)}),link:(0,e.css)({display:"flex",alignItems:"center"}),logoImg:(0,e.css)({height:"16px",marginLeft:o.spacing(.5)})});var W=t(92745),k=t(92948),ss=t(58102);const H=L.Tp.pages.PublicDashboard.NotAvailable,M=({paused:o})=>{const a=(0,p.of)(os),n=(0,p.of)(ss.YO),c=k.M.LoginBoxBackground();return(0,s.jsx)(k.M.LoginBackground,{className:a.container,"data-testid":H.container,children:(0,s.jsxs)("div",{className:(0,e.cx)(a.box,c),children:[(0,s.jsx)(k.M.LoginLogo,{className:n.loginLogo}),(0,s.jsx)("p",{className:a.title,"data-testid":H.title,children:o?(0,W.t)("dashboard.public-dashboard-not-available.paused","This dashboard has been paused by the administrator"):(0,W.t)("dashboard.public-dashboard-not-available.does-not-exist","The dashboard you are trying to access does not exist")}),o&&(0,s.jsx)("p",{className:a.description,"data-testid":H.pausedDescription,children:(0,s.jsx)(W.x6,{i18nKey:"dashboard.public-dashboard-not-available.try-again-later",children:"Try again later"})})]})})},os=o=>({container:(0,e.css)({display:"flex",justifyContent:"center",alignItems:"center",height:"100%",":before":{opacity:1}}),box:(0,e.css)({width:"608px",display:"flex",alignItems:"center",flexDirection:"column",gap:o.spacing(4),zIndex:1,borderRadius:o.shape.borderRadius(4),padding:o.spacing(6,8),opacity:1}),title:(0,e.css)({fontSize:o.typography.h3.fontSize,textAlign:"center",margin:0}),description:(0,e.css)({fontSize:o.typography.h5.fontSize,margin:0})});var Z=t(96221),ts=t(6262),as=t(41644);const K=L.Tp.pages.PublicDashboardScene;function ns({route:o}){const{accessToken:a=""}=(0,D.g)(),n=(0,as.sP)(),c=(0,p.of)(Y),{dashboard:r,isLoading:f,loadError:d}=n.useState();return(0,v.useEffect)(()=>(n.loadDashboard({uid:a,route:ts.Z4.Public}),()=>{n.clearState()}),[n,a,o.routeName]),d?(0,s.jsx)(es,{error:d}):r?r.state.controls?.state.hideTimeControls?(0,s.jsx)(V,{model:r}):(0,s.jsx)(O.$L,{scene:r,children:(0,s.jsx)(V,{model:r})}):(0,s.jsx)(y.Y,{layout:m.k.Custom,className:c.loadingPage,"data-testid":K.loadingPage,children:f&&(0,s.jsx)(u.A,{})})}function V({model:o}){const[a,n]=(0,v.useState)(!1),{controls:c,title:r,body:f}=o.useState(),{timePicker:d,refreshPicker:x,hideTimeControls:h}=c.useState(),b=(0,p.of)(Y),j=B();return(0,v.useEffect)(()=>x.activate(),[x]),(0,v.useEffect)(()=>(n(!0),o.activate()),[o]),a?(0,s.jsxs)(y.Y,{layout:m.k.Custom,className:b.page,"data-testid":K.page,children:[(0,s.jsxs)("div",{className:b.controls,children:[(0,s.jsxs)(T.B,{alignItems:"center",children:[!j.headerLogoHide&&(0,s.jsx)("div",{className:b.iconTitle,children:(0,s.jsx)(E.I,{name:"grafana",size:"lg","aria-hidden":!0})}),(0,s.jsx)("span",{className:b.title,children:r})]}),!h&&(0,s.jsxs)(T.B,{children:[(0,s.jsx)(d.Component,{model:d}),(0,s.jsx)(x.Component,{model:x})]})]}),(0,s.jsx)("div",{className:b.body,children:(0,s.jsx)(f.Component,{model:f})}),(0,s.jsx)(Q,{})]}):null}function Y(o){return{loadingPage:(0,e.css)({justifyContent:"center"}),page:(0,e.css)({padding:o.spacing(0,2)}),controls:(0,e.css)({display:"flex",justifyContent:"space-between",alignItems:"center",position:"sticky",top:0,zIndex:o.zIndex.navbarFixed,background:o.colors.background.canvas,padding:o.spacing(2,0),[o.breakpoints.down("sm")]:{flexDirection:"column",gap:o.spacing(1),alignItems:"stretch"}}),iconTitle:(0,e.css)({display:"none",[o.breakpoints.up("sm")]:{display:"flex",alignItems:"center"}}),title:(0,e.css)({overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",display:"flex",fontSize:o.typography.h4.fontSize,margin:0}),body:(0,e.css)({label:"body",display:"flex",flex:1,flexDirection:"column",overflowY:"auto"})}}function es({error:o}){const a=(0,p.of)(Y),n=o.status,c=o.messageId,r=o.message,f=n===403&&c==="publicdashboards.notEnabled",d=n===404&&c==="publicdashboards.notFound",x=n===404&&c==="publicdashboards.dashboardNotFound",h=d?void 0:!f,b=d||x;return h===!1?(0,s.jsx)(M,{paused:!0}):b?(0,s.jsx)(M,{}):(0,s.jsx)(y.Y,{layout:m.k.Custom,className:a.loadingPage,"data-testid":K.loadingPage,children:(0,s.jsx)(i.a,{paddingY:4,display:"flex",direction:"column",alignItems:"center",children:(0,s.jsx)(g.F,{severity:Z.Qd.Error,title:r,children:r})})})}var is=t(84596),rs=t(84600),ls=t(27963),cs=t(69289),$=t(52763),ds=t(74618),gs=t(47797);const J=({initError:o})=>o?(0,s.jsx)("div",{className:us.dashboardLoading,children:(0,s.jsx)(g.F,{severity:Z.Qd.Error,title:o.message,children:(0,gs.q6)(o.error)})}):null,us={dashboardLoading:(0,e.css)({height:"60vh",display:"flex",alignItems:"center",justifyContent:"center"})};var fs=t(46505),xs=t(77598),X=t(75421),hs=t(27081);const ms=L.Tp.pages.PublicDashboard,ps=({dashboard:o})=>{const a=(0,$.wA)(),n=B(),c=r=>{a((0,cs.Cj)(r))};return(0,s.jsx)(rs.d,{title:o.title,pageIcon:n.headerLogoHide?void 0:"grafana",buttonOverflowAlignment:"right",children:!o.timepicker.hidden&&(0,s.jsx)(ds.$,{dashboard:o,onChangeTimeZone:c})})},bs=o=>{const{route:a}=o,n=(0,D.zy)(),{accessToken:c}=(0,D.g)(),r=(0,$.wA)(),f=(0,ls.Il)(),d=(0,is.A)({...o,location:n}),x=(0,p.of)(ys),h=(0,$.d4)(C=>C.dashboard),b=h.initError,j=h.getModel();return(0,v.useEffect)(()=>{r((0,hs.v)({routeName:a.routeName,fixUrl:!1,accessToken:c,keybindingSrv:f.keybindings}))},[a.routeName,c,f.keybindings,r]),(0,v.useEffect)(()=>{if(d?.location.search!==n.search){const C=d?.queryParams,F=o.queryParams;(F?.from!==C?.from||F?.to!==C?.to)&&!j?.timepicker.hidden&&(0,X.jG)().updateTimeRangeFromUrl(),!C?.refresh&&F?.refresh&&(0,X.jG)().setAutoRefresh(F.refresh)}},[d,n.search,o.queryParams,j?.timepicker.hidden,c]),b?(0,s.jsx)(js,{error:b}):j?(0,s.jsxs)(y.Y,{pageNav:{text:j.title},layout:m.k.Custom,"data-testid":ms.page,children:[(0,s.jsx)(ps,{dashboard:j}),h.initError&&(0,s.jsx)(J,{initError:h.initError}),(0,s.jsx)("div",{className:x.gridContainer,children:(0,s.jsx)(xs.N,{dashboard:j,isEditable:!1,viewPanel:null,editPanel:null,hidePanelMenus:!0})}),(0,s.jsx)("div",{className:x.footer,children:(0,s.jsx)(Q,{})})]}):(0,s.jsx)(fs.P,{initPhase:h.initPhase})},ys=o=>({gridContainer:(0,e.css)({flex:1,padding:o.spacing(2,2,2,2),overflow:"auto"}),footer:(0,e.css)({padding:o.spacing(0,2)})}),vs=bs;function js({error:o}){let a,n;if(typeof o.error=="object"&&o.error!==null&&"data"in o.error){const h=o.error;a=h.data.statusCode,n=h.data.messageId}const c=a===403&&n==="publicdashboards.notEnabled",r=a===404&&n==="publicdashboards.notFound",f=a===404&&n==="publicdashboards.dashboardNotFound",d=r?void 0:!c,x=r||f;return d===!1?(0,s.jsx)(M,{paused:!0}):x?(0,s.jsx)(M,{}):(0,s.jsx)(J,{initError:o})}function Ps(o){return l.$.featureToggles.publicDashboardsScene?(0,s.jsx)(ns,{...o}):(0,s.jsx)(vs,{...o})}const Ds=Ps},58102:(N,P,t)=>{t.d(P,{GU:()=>p,YO:()=>E,qm:()=>O});var s=t(74848),l=t(22803),e=t(96540),v=t(92745),D=t(63142),m=t(92948),L=t(10388);const O=({children:i,enterAnimation:g=!0})=>{const y=(0,D.of)(E);return(0,s.jsx)("div",{className:(0,l.cx)(y.loginInnerBox,g&&y.enterAnimation),children:i})},p=({children:i,branding:g,isChangingPassword:y})=>{const u=(0,D.of)(E),[R,z]=(0,e.useState)(!1),I=g?.loginSubtitle??m.M.GetLoginSubTitle(),U=g?.loginTitle??m.M.LoginTitle,G=g?.loginBoxBackground||m.M.LoginBoxBackground(),S=g?.loginLogo,A=g?.hideEdition??m.M.HideEdition;return(0,e.useEffect)(()=>z(!0),[]),(0,s.jsxs)(m.M.LoginBackground,{className:(0,l.cx)(u.container,R&&u.loginAnim,g?.loginBackground),children:[(0,s.jsx)("div",{className:u.loginMain,children:(0,s.jsxs)("div",{className:(0,l.cx)(u.loginContent,G,"login-content-box"),children:[(0,s.jsxs)("div",{className:u.loginLogoWrapper,children:[(0,s.jsx)(m.M.LoginLogo,{className:u.loginLogo,logo:S}),(0,s.jsx)("div",{className:u.titleWrapper,children:y?(0,s.jsx)("h1",{className:u.mainTitle,children:(0,s.jsx)(v.x6,{i18nKey:"login.layout.update-password",children:"Update your password"})}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("h1",{className:u.mainTitle,children:U}),I&&(0,s.jsx)("h3",{className:u.subTitle,children:I})]})})]}),(0,s.jsx)("div",{className:u.loginOuterBox,children:i})]})}),g?.hideFooter?(0,s.jsx)(s.Fragment,{}):(0,s.jsx)(L.wi,{hideEdition:A,customLinks:g?.footerLinks})]})},T=(0,l.keyframes)`
from{
  opacity: 0;
  transform: translate(-60px, 0px);
}

to{
  opacity: 1;
  transform: translate(0px, 0px);
}`,E=i=>({loginMain:(0,l.css)({flexGrow:1,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minWidth:"100%"}),container:(0,l.css)({minHeight:"100%",backgroundPosition:"center",backgroundRepeat:"no-repeat",flex:1,minWidth:"100%",marginLeft:0,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"}),loginAnim:(0,l.css)({"&:before":{opacity:1},".login-content-box":{opacity:1}}),submitButton:(0,l.css)({justifyContent:"center",width:"100%"}),loginLogo:(0,l.css)({width:"100%",maxWidth:60,marginBottom:i.spacing(2),[i.breakpoints.up("sm")]:{maxWidth:100}}),loginLogoWrapper:(0,l.css)({display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",padding:i.spacing(3)}),titleWrapper:(0,l.css)({textAlign:"center"}),mainTitle:(0,l.css)({fontSize:22,[i.breakpoints.up("sm")]:{fontSize:32}}),subTitle:(0,l.css)({fontSize:i.typography.size.md,color:i.colors.text.secondary}),loginContent:(0,l.css)({maxWidth:478,width:"calc(100% - 2rem)",display:"flex",alignItems:"stretch",flexDirection:"column",position:"relative",justifyContent:"flex-start",zIndex:1,minHeight:320,borderRadius:i.shape.radius.default,padding:i.spacing(2,0),opacity:0,[i.transitions.handleMotion("no-preference","reduce")]:{transition:"opacity 0.5s ease-in-out"},[i.breakpoints.up("sm")]:{minHeight:i.spacing(40),justifyContent:"center"}}),loginOuterBox:(0,l.css)({display:"flex",overflowY:"hidden",alignItems:"center",justifyContent:"center"}),loginInnerBox:(0,l.css)({padding:i.spacing(0,2,2,2),display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",flexGrow:1,maxWidth:415,width:"100%",transform:"translate(0px, 0px)",[i.transitions.handleMotion("no-preference")]:{transition:"0.25s ease"}}),enterAnimation:(0,l.css)({[i.transitions.handleMotion("no-preference")]:{animation:`${T} ease-out 0.2s`}})})}}]);

//# sourceMappingURL=PublicDashboardPage.f232c6f1b14550ceae77.js.map