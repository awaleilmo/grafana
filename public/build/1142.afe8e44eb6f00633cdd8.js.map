{"version":3,"file":"1142.afe8e44eb6f00633cdd8.js","mappings":"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","sources":["webpack://grafana/./node_modules/react-data-grid/lib/index.js","webpack://grafana/./node_modules/uwrap/dist/uWrap.mjs","webpack://grafana/./packages/grafana-ui/src/components/Table/TableNG/constants.ts","webpack://grafana/./packages/grafana-ui/src/components/Table/TableNG/styles.ts","webpack://grafana/./packages/grafana-ui/src/components/Table/TableNG/Cells/PillCell.tsx","webpack://grafana/./packages/grafana-ui/src/components/Table/TableNG/utils.ts","webpack://grafana/./packages/grafana-ui/src/components/Table/TableNG/Cells/ActionsCell.tsx","webpack://grafana/./packages/grafana-ui/src/components/Table/TableNG/components/MaybeWrapWithLink.tsx","webpack://grafana/./packages/grafana-ui/src/components/Table/TableNG/Cells/AutoCell.tsx","webpack://grafana/./packages/grafana-ui/src/components/Table/TableNG/Cells/BarGaugeCell.tsx","webpack://grafana/./packages/grafana-ui/src/components/Table/TableNG/Cells/DataLinksCell.tsx","webpack://grafana/./packages/grafana-ui/src/components/Table/TableNG/Cells/GeoCell.tsx","webpack://grafana/./packages/grafana-ui/src/components/Table/TableNG/Cells/ImageCell.tsx","webpack://grafana/./packages/grafana-ui/src/components/Table/TableNG/Cells/MarkdownCell.tsx","webpack://grafana/./packages/grafana-ui/src/components/Table/TableNG/Cells/SparklineCell.tsx","webpack://grafana/./packages/grafana-ui/src/components/Table/TableNG/Cells/renderers.tsx","webpack://grafana/./packages/grafana-ui/src/components/Table/TableNG/Filter/utils.ts","webpack://grafana/./packages/grafana-ui/src/components/Table/TableNG/Filter/FilterPopup.tsx","webpack://grafana/./packages/grafana-ui/src/components/Table/TableNG/Filter/FilterList.tsx","webpack://grafana/./packages/grafana-ui/src/components/Table/TableNG/Filter/Filter.tsx","webpack://grafana/./packages/grafana-ui/src/components/Table/TableNG/components/HeaderCell.tsx","webpack://grafana/./packages/grafana-ui/src/components/Table/TableNG/components/RowExpander.tsx","webpack://grafana/./packages/grafana-ui/src/components/Table/TableNG/hooks.ts","webpack://grafana/./packages/grafana-ui/src/components/Table/TableNG/components/SummaryCell.tsx","webpack://grafana/./packages/grafana-ui/src/components/Table/TableNG/types.ts","webpack://grafana/./packages/grafana-ui/src/components/Table/TableNG/components/TableCellActions.tsx","webpack://grafana/./packages/grafana-ui/src/components/Table/TableNG/components/TableCellTooltip.tsx","webpack://grafana/./packages/grafana-ui/src/components/Table/TableNG/TableNG.tsx"],"sourcesContent":["import { createContext, forwardRef, memo, useCallback, useContext, useEffect, useImperativeHandle, useLayoutEffect, useMemo, useRef, useState } from \"react\";\nimport { flushSync } from \"react-dom\";\nimport clsx from \"clsx\";\nimport { Fragment, jsx, jsxs } from \"react/jsx-runtime\";\n\n//#region src/utils/colSpanUtils.ts\nfunction getColSpan(column, lastFrozenColumnIndex, args) {\n\tconst colSpan = typeof column.colSpan === \"function\" ? column.colSpan(args) : 1;\n\tif (Number.isInteger(colSpan) && colSpan > 1 && (!column.frozen || column.idx + colSpan - 1 <= lastFrozenColumnIndex)) return colSpan;\n\treturn void 0;\n}\n\n//#endregion\n//#region src/utils/domUtils.ts\nfunction stopPropagation(event) {\n\tevent.stopPropagation();\n}\nfunction scrollIntoView(element, behavior = \"instant\") {\n\telement?.scrollIntoView({\n\t\tinline: \"nearest\",\n\t\tblock: \"nearest\",\n\t\tbehavior\n\t});\n}\n\n//#endregion\n//#region src/utils/eventUtils.ts\nfunction createCellEvent(event) {\n\tlet defaultPrevented = false;\n\tconst cellEvent = {\n\t\t...event,\n\t\tpreventGridDefault() {\n\t\t\tdefaultPrevented = true;\n\t\t},\n\t\tisGridDefaultPrevented() {\n\t\t\treturn defaultPrevented;\n\t\t}\n\t};\n\tObject.setPrototypeOf(cellEvent, Object.getPrototypeOf(event));\n\treturn cellEvent;\n}\n\n//#endregion\n//#region src/utils/keyboardUtils.ts\nconst nonInputKeys = new Set([\n\t\"Unidentified\",\n\t\"Alt\",\n\t\"AltGraph\",\n\t\"CapsLock\",\n\t\"Control\",\n\t\"Fn\",\n\t\"FnLock\",\n\t\"Meta\",\n\t\"NumLock\",\n\t\"ScrollLock\",\n\t\"Shift\",\n\t\"Tab\",\n\t\"ArrowDown\",\n\t\"ArrowLeft\",\n\t\"ArrowRight\",\n\t\"ArrowUp\",\n\t\"End\",\n\t\"Home\",\n\t\"PageDown\",\n\t\"PageUp\",\n\t\"Insert\",\n\t\"ContextMenu\",\n\t\"Escape\",\n\t\"Pause\",\n\t\"Play\",\n\t\"PrintScreen\",\n\t\"F1\",\n\t\"F3\",\n\t\"F4\",\n\t\"F5\",\n\t\"F6\",\n\t\"F7\",\n\t\"F8\",\n\t\"F9\",\n\t\"F10\",\n\t\"F11\",\n\t\"F12\"\n]);\nfunction isCtrlKeyHeldDown(e) {\n\treturn (e.ctrlKey || e.metaKey) && e.key !== \"Control\";\n}\nconst vKey = 86;\nfunction isDefaultCellInput(event, isUserHandlingPaste) {\n\tif (isCtrlKeyHeldDown(event) && (event.keyCode !== vKey || isUserHandlingPaste)) return false;\n\treturn !nonInputKeys.has(event.key);\n}\n/**\n* By default, the following navigation keys are enabled while an editor is open, under specific conditions:\n* - Tab:\n*   - The editor must be an <input>, a <textarea>, or a <select> element.\n*   - The editor element must be the only immediate child of the editor container/a label.\n*/\nfunction onEditorNavigation({ key, target }) {\n\tif (key === \"Tab\" && (target instanceof HTMLInputElement || target instanceof HTMLTextAreaElement || target instanceof HTMLSelectElement)) return target.closest(\".rdg-editor-container\")?.querySelectorAll(\"input, textarea, select\").length === 1;\n\treturn false;\n}\nfunction getLeftRightKey(direction) {\n\tconst isRtl = direction === \"rtl\";\n\treturn {\n\t\tleftKey: isRtl ? \"ArrowRight\" : \"ArrowLeft\",\n\t\trightKey: isRtl ? \"ArrowLeft\" : \"ArrowRight\"\n\t};\n}\n\n//#endregion\n//#region src/utils/renderMeasuringCells.tsx\nconst measuringCellClassname = \"mlln6zg7-0-0-beta-56\";\nfunction renderMeasuringCells(viewportColumns) {\n\treturn viewportColumns.map(({ key, idx, minWidth, maxWidth }) => /* @__PURE__ */ jsx(\"div\", {\n\t\tclassName: measuringCellClassname,\n\t\tstyle: {\n\t\t\tgridColumnStart: idx + 1,\n\t\t\tminWidth,\n\t\t\tmaxWidth\n\t\t},\n\t\t\"data-measuring-cell-key\": key\n\t}, key));\n}\n\n//#endregion\n//#region src/utils/selectedCellUtils.ts\nfunction isSelectedCellEditable({ selectedPosition, columns, rows }) {\n\tconst column = columns[selectedPosition.idx];\n\tconst row$1 = rows[selectedPosition.rowIdx];\n\treturn isCellEditableUtil(column, row$1);\n}\nfunction isCellEditableUtil(column, row$1) {\n\treturn column.renderEditCell != null && (typeof column.editable === \"function\" ? column.editable(row$1) : column.editable) !== false;\n}\nfunction getSelectedCellColSpan({ rows, topSummaryRows, bottomSummaryRows, rowIdx, mainHeaderRowIdx, lastFrozenColumnIndex, column }) {\n\tconst topSummaryRowsCount = topSummaryRows?.length ?? 0;\n\tif (rowIdx === mainHeaderRowIdx) return getColSpan(column, lastFrozenColumnIndex, { type: \"HEADER\" });\n\tif (topSummaryRows && rowIdx > mainHeaderRowIdx && rowIdx <= topSummaryRowsCount + mainHeaderRowIdx) return getColSpan(column, lastFrozenColumnIndex, {\n\t\ttype: \"SUMMARY\",\n\t\trow: topSummaryRows[rowIdx + topSummaryRowsCount]\n\t});\n\tif (rowIdx >= 0 && rowIdx < rows.length) {\n\t\tconst row$1 = rows[rowIdx];\n\t\treturn getColSpan(column, lastFrozenColumnIndex, {\n\t\t\ttype: \"ROW\",\n\t\t\trow: row$1\n\t\t});\n\t}\n\tif (bottomSummaryRows) return getColSpan(column, lastFrozenColumnIndex, {\n\t\ttype: \"SUMMARY\",\n\t\trow: bottomSummaryRows[rowIdx - rows.length]\n\t});\n\treturn void 0;\n}\nfunction getNextSelectedCellPosition({ moveUp, moveNext, cellNavigationMode, columns, colSpanColumns, rows, topSummaryRows, bottomSummaryRows, minRowIdx, mainHeaderRowIdx, maxRowIdx, currentPosition: { idx: currentIdx, rowIdx: currentRowIdx }, nextPosition, lastFrozenColumnIndex, isCellWithinBounds }) {\n\tlet { idx: nextIdx, rowIdx: nextRowIdx } = nextPosition;\n\tconst columnsCount = columns.length;\n\tconst setColSpan = (moveNext$1) => {\n\t\tfor (const column of colSpanColumns) {\n\t\t\tconst colIdx = column.idx;\n\t\t\tif (colIdx > nextIdx) break;\n\t\t\tconst colSpan = getSelectedCellColSpan({\n\t\t\t\trows,\n\t\t\t\ttopSummaryRows,\n\t\t\t\tbottomSummaryRows,\n\t\t\t\trowIdx: nextRowIdx,\n\t\t\t\tmainHeaderRowIdx,\n\t\t\t\tlastFrozenColumnIndex,\n\t\t\t\tcolumn\n\t\t\t});\n\t\t\tif (colSpan && nextIdx > colIdx && nextIdx < colSpan + colIdx) {\n\t\t\t\tnextIdx = colIdx + (moveNext$1 ? colSpan : 0);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t};\n\tconst getParentRowIdx = (parent) => {\n\t\treturn parent.level + mainHeaderRowIdx;\n\t};\n\tconst setHeaderGroupColAndRowSpan = () => {\n\t\tif (moveNext) {\n\t\t\tconst nextColumn = columns[nextIdx];\n\t\t\tlet parent = nextColumn.parent;\n\t\t\twhile (parent !== void 0) {\n\t\t\t\tconst parentRowIdx = getParentRowIdx(parent);\n\t\t\t\tif (nextRowIdx === parentRowIdx) {\n\t\t\t\t\tnextIdx = parent.idx + parent.colSpan;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tparent = parent.parent;\n\t\t\t}\n\t\t} else if (moveUp) {\n\t\t\tconst nextColumn = columns[nextIdx];\n\t\t\tlet parent = nextColumn.parent;\n\t\t\tlet found = false;\n\t\t\twhile (parent !== void 0) {\n\t\t\t\tconst parentRowIdx = getParentRowIdx(parent);\n\t\t\t\tif (nextRowIdx >= parentRowIdx) {\n\t\t\t\t\tnextIdx = parent.idx;\n\t\t\t\t\tnextRowIdx = parentRowIdx;\n\t\t\t\t\tfound = true;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tparent = parent.parent;\n\t\t\t}\n\t\t\tif (!found) {\n\t\t\t\tnextIdx = currentIdx;\n\t\t\t\tnextRowIdx = currentRowIdx;\n\t\t\t}\n\t\t}\n\t};\n\tif (isCellWithinBounds(nextPosition)) {\n\t\tsetColSpan(moveNext);\n\t\tif (nextRowIdx < mainHeaderRowIdx) setHeaderGroupColAndRowSpan();\n\t}\n\tif (cellNavigationMode === \"CHANGE_ROW\") {\n\t\tconst isAfterLastColumn = nextIdx === columnsCount;\n\t\tconst isBeforeFirstColumn = nextIdx === -1;\n\t\tif (isAfterLastColumn) {\n\t\t\tconst isLastRow = nextRowIdx === maxRowIdx;\n\t\t\tif (!isLastRow) {\n\t\t\t\tnextIdx = 0;\n\t\t\t\tnextRowIdx += 1;\n\t\t\t}\n\t\t} else if (isBeforeFirstColumn) {\n\t\t\tconst isFirstRow = nextRowIdx === minRowIdx;\n\t\t\tif (!isFirstRow) {\n\t\t\t\tnextRowIdx -= 1;\n\t\t\t\tnextIdx = columnsCount - 1;\n\t\t\t}\n\t\t\tsetColSpan(false);\n\t\t}\n\t}\n\tif (nextRowIdx < mainHeaderRowIdx && nextIdx > -1 && nextIdx < columnsCount) {\n\t\tconst nextColumn = columns[nextIdx];\n\t\tlet parent = nextColumn.parent;\n\t\tconst nextParentRowIdx = nextRowIdx;\n\t\tnextRowIdx = mainHeaderRowIdx;\n\t\twhile (parent !== void 0) {\n\t\t\tconst parentRowIdx = getParentRowIdx(parent);\n\t\t\tif (parentRowIdx >= nextParentRowIdx) {\n\t\t\t\tnextRowIdx = parentRowIdx;\n\t\t\t\tnextIdx = parent.idx;\n\t\t\t}\n\t\t\tparent = parent.parent;\n\t\t}\n\t}\n\treturn {\n\t\tidx: nextIdx,\n\t\trowIdx: nextRowIdx\n\t};\n}\nfunction canExitGrid({ maxColIdx, minRowIdx, maxRowIdx, selectedPosition: { rowIdx, idx }, shiftKey }) {\n\tconst atLastCellInRow = idx === maxColIdx;\n\tconst atFirstCellInRow = idx === 0;\n\tconst atLastRow = rowIdx === maxRowIdx;\n\tconst atFirstRow = rowIdx === minRowIdx;\n\treturn shiftKey ? atFirstCellInRow && atFirstRow : atLastCellInRow && atLastRow;\n}\n\n//#endregion\n//#region src/style/cell.ts\nconst cell = \"cj343x07-0-0-beta-56\";\nconst cellClassname = `rdg-cell ${cell}`;\nconst cellFrozen = \"csofj7r7-0-0-beta-56\";\nconst cellFrozenClassname = `rdg-cell-frozen ${cellFrozen}`;\nconst cellDragHandle = \"ch2wcw87-0-0-beta-56\";\nconst cellDragHandleFrozenClassname = \"c1wvphzh7-0-0-beta-56\";\nconst cellDragHandleClassname = `rdg-cell-drag-handle ${cellDragHandle}`;\n\n//#endregion\n//#region src/utils/styleUtils.ts\nfunction getRowStyle(rowIdx) {\n\treturn { \"--rdg-grid-row-start\": rowIdx };\n}\nfunction getHeaderCellStyle(column, rowIdx, rowSpan) {\n\tconst gridRowEnd = rowIdx + 1;\n\tconst paddingBlockStart = `calc(${rowSpan - 1} * var(--rdg-header-row-height))`;\n\tif (column.parent === void 0) return {\n\t\tinsetBlockStart: 0,\n\t\tgridRowStart: 1,\n\t\tgridRowEnd,\n\t\tpaddingBlockStart\n\t};\n\treturn {\n\t\tinsetBlockStart: `calc(${rowIdx - rowSpan} * var(--rdg-header-row-height))`,\n\t\tgridRowStart: gridRowEnd - rowSpan,\n\t\tgridRowEnd,\n\t\tpaddingBlockStart\n\t};\n}\nfunction getCellStyle(column, colSpan = 1) {\n\tconst index = column.idx + 1;\n\treturn {\n\t\tgridColumnStart: index,\n\t\tgridColumnEnd: index + colSpan,\n\t\tinsetInlineStart: column.frozen ? `var(--rdg-frozen-left-${column.idx})` : void 0\n\t};\n}\nfunction getCellClassname(column, ...extraClasses) {\n\treturn clsx(cellClassname, { [cellFrozenClassname]: column.frozen }, ...extraClasses);\n}\n\n//#endregion\n//#region src/utils/index.ts\nconst { min, max, floor, sign, abs } = Math;\nfunction assertIsValidKeyGetter(keyGetter) {\n\tif (typeof keyGetter !== \"function\") throw new Error(\"Please specify the rowKeyGetter prop to use selection\");\n}\nfunction clampColumnWidth(width, { minWidth, maxWidth }) {\n\twidth = max(width, minWidth);\n\tif (typeof maxWidth === \"number\" && maxWidth >= minWidth) return min(width, maxWidth);\n\treturn width;\n}\nfunction getHeaderCellRowSpan(column, rowIdx) {\n\treturn column.parent === void 0 ? rowIdx : column.level - column.parent.level;\n}\n\n//#endregion\n//#region src/cellRenderers/renderCheckbox.tsx\nconst checkbox = \"c1bn88vv7-0-0-beta-56\";\nconst checkboxClassname = `rdg-checkbox-input ${checkbox}`;\nfunction renderCheckbox({ onChange, indeterminate,...props }) {\n\tfunction handleChange(e) {\n\t\tonChange(e.target.checked, e.nativeEvent.shiftKey);\n\t}\n\treturn /* @__PURE__ */ jsx(\"input\", {\n\t\tref: (el) => {\n\t\t\tif (el) el.indeterminate = indeterminate === true;\n\t\t},\n\t\ttype: \"checkbox\",\n\t\tclassName: checkboxClassname,\n\t\tonChange: handleChange,\n\t\t...props\n\t});\n}\n\n//#endregion\n//#region src/cellRenderers/renderToggleGroup.tsx\nconst groupCellContent = \"g1s9ylgp7-0-0-beta-56\";\nconst groupCellContentClassname = `rdg-group-cell-content ${groupCellContent}`;\nconst caret = \"cz54e4y7-0-0-beta-56\";\nconst caretClassname = `rdg-caret ${caret}`;\nfunction renderToggleGroup(props) {\n\treturn /* @__PURE__ */ jsx(ToggleGroup, { ...props });\n}\nfunction ToggleGroup({ groupKey, isExpanded, tabIndex, toggleGroup }) {\n\tfunction handleKeyDown({ key }) {\n\t\tif (key === \"Enter\") toggleGroup();\n\t}\n\tconst d = isExpanded ? \"M1 1 L 7 7 L 13 1\" : \"M1 7 L 7 1 L 13 7\";\n\treturn /* @__PURE__ */ jsxs(\"span\", {\n\t\tclassName: groupCellContentClassname,\n\t\ttabIndex,\n\t\tonKeyDown: handleKeyDown,\n\t\tchildren: [groupKey, /* @__PURE__ */ jsx(\"svg\", {\n\t\t\tviewBox: \"0 0 14 8\",\n\t\t\twidth: \"14\",\n\t\t\theight: \"8\",\n\t\t\tclassName: caretClassname,\n\t\t\t\"aria-hidden\": true,\n\t\t\tchildren: /* @__PURE__ */ jsx(\"path\", { d })\n\t\t})]\n\t});\n}\n\n//#endregion\n//#region src/cellRenderers/renderValue.tsx\nfunction renderValue(props) {\n\ttry {\n\t\treturn props.row[props.column.key];\n\t} catch {\n\t\treturn null;\n\t}\n}\n\n//#endregion\n//#region src/DataGridDefaultRenderersContext.ts\nconst DataGridDefaultRenderersContext = createContext(void 0);\nfunction useDefaultRenderers() {\n\treturn useContext(DataGridDefaultRenderersContext);\n}\n\n//#endregion\n//#region src/cellRenderers/SelectCellFormatter.tsx\nfunction SelectCellFormatter({ value, tabIndex, indeterminate, disabled, onChange, \"aria-label\": ariaLabel, \"aria-labelledby\": ariaLabelledBy }) {\n\tconst renderCheckbox$1 = useDefaultRenderers().renderCheckbox;\n\treturn renderCheckbox$1({\n\t\t\"aria-label\": ariaLabel,\n\t\t\"aria-labelledby\": ariaLabelledBy,\n\t\ttabIndex,\n\t\tindeterminate,\n\t\tdisabled,\n\t\tchecked: value,\n\t\tonChange\n\t});\n}\n\n//#endregion\n//#region src/hooks/useRowSelection.ts\nconst RowSelectionContext = createContext(void 0);\nconst RowSelectionChangeContext = createContext(void 0);\nfunction useRowSelection() {\n\tconst rowSelectionContext = useContext(RowSelectionContext);\n\tconst rowSelectionChangeContext = useContext(RowSelectionChangeContext);\n\tif (rowSelectionContext === void 0 || rowSelectionChangeContext === void 0) throw new Error(\"useRowSelection must be used within renderCell\");\n\treturn {\n\t\tisRowSelectionDisabled: rowSelectionContext.isRowSelectionDisabled,\n\t\tisRowSelected: rowSelectionContext.isRowSelected,\n\t\tonRowSelectionChange: rowSelectionChangeContext\n\t};\n}\nconst HeaderRowSelectionContext = createContext(void 0);\nconst HeaderRowSelectionChangeContext = createContext(void 0);\nfunction useHeaderRowSelection() {\n\tconst headerRowSelectionContext = useContext(HeaderRowSelectionContext);\n\tconst headerRowSelectionChangeContext = useContext(HeaderRowSelectionChangeContext);\n\tif (headerRowSelectionContext === void 0 || headerRowSelectionChangeContext === void 0) throw new Error(\"useHeaderRowSelection must be used within renderHeaderCell\");\n\treturn {\n\t\tisIndeterminate: headerRowSelectionContext.isIndeterminate,\n\t\tisRowSelected: headerRowSelectionContext.isRowSelected,\n\t\tonRowSelectionChange: headerRowSelectionChangeContext\n\t};\n}\n\n//#endregion\n//#region src/Columns.tsx\nconst SELECT_COLUMN_KEY = \"rdg-select-column\";\nfunction HeaderRenderer(props) {\n\tconst { isIndeterminate, isRowSelected, onRowSelectionChange } = useHeaderRowSelection();\n\treturn /* @__PURE__ */ jsx(SelectCellFormatter, {\n\t\t\"aria-label\": \"Select All\",\n\t\ttabIndex: props.tabIndex,\n\t\tindeterminate: isIndeterminate,\n\t\tvalue: isRowSelected,\n\t\tonChange: (checked) => {\n\t\t\tonRowSelectionChange({ checked: isIndeterminate ? false : checked });\n\t\t}\n\t});\n}\nfunction SelectFormatter(props) {\n\tconst { isRowSelectionDisabled, isRowSelected, onRowSelectionChange } = useRowSelection();\n\treturn /* @__PURE__ */ jsx(SelectCellFormatter, {\n\t\t\"aria-label\": \"Select\",\n\t\ttabIndex: props.tabIndex,\n\t\tdisabled: isRowSelectionDisabled,\n\t\tvalue: isRowSelected,\n\t\tonChange: (checked, isShiftClick) => {\n\t\t\tonRowSelectionChange({\n\t\t\t\trow: props.row,\n\t\t\t\tchecked,\n\t\t\t\tisShiftClick\n\t\t\t});\n\t\t}\n\t});\n}\nfunction SelectGroupFormatter(props) {\n\tconst { isRowSelected, onRowSelectionChange } = useRowSelection();\n\treturn /* @__PURE__ */ jsx(SelectCellFormatter, {\n\t\t\"aria-label\": \"Select Group\",\n\t\ttabIndex: props.tabIndex,\n\t\tvalue: isRowSelected,\n\t\tonChange: (checked) => {\n\t\t\tonRowSelectionChange({\n\t\t\t\trow: props.row,\n\t\t\t\tchecked,\n\t\t\t\tisShiftClick: false\n\t\t\t});\n\t\t}\n\t});\n}\nconst SelectColumn = {\n\tkey: SELECT_COLUMN_KEY,\n\tname: \"\",\n\twidth: 35,\n\tminWidth: 35,\n\tmaxWidth: 35,\n\tresizable: false,\n\tsortable: false,\n\tfrozen: true,\n\trenderHeaderCell(props) {\n\t\treturn /* @__PURE__ */ jsx(HeaderRenderer, { ...props });\n\t},\n\trenderCell(props) {\n\t\treturn /* @__PURE__ */ jsx(SelectFormatter, { ...props });\n\t},\n\trenderGroupCell(props) {\n\t\treturn /* @__PURE__ */ jsx(SelectGroupFormatter, { ...props });\n\t}\n};\n\n//#endregion\n//#region src/renderHeaderCell.tsx\nconst headerSortCellClassname = \"h44jtk67-0-0-beta-56\";\nconst headerSortName = \"hcgkhxz7-0-0-beta-56\";\nconst headerSortNameClassname = `rdg-header-sort-name ${headerSortName}`;\nfunction renderHeaderCell({ column, sortDirection, priority }) {\n\tif (!column.sortable) return column.name;\n\treturn /* @__PURE__ */ jsx(SortableHeaderCell, {\n\t\tsortDirection,\n\t\tpriority,\n\t\tchildren: column.name\n\t});\n}\nfunction SortableHeaderCell({ sortDirection, priority, children }) {\n\tconst renderSortStatus$1 = useDefaultRenderers().renderSortStatus;\n\treturn /* @__PURE__ */ jsxs(\"span\", {\n\t\tclassName: headerSortCellClassname,\n\t\tchildren: [/* @__PURE__ */ jsx(\"span\", {\n\t\t\tclassName: headerSortNameClassname,\n\t\t\tchildren\n\t\t}), /* @__PURE__ */ jsx(\"span\", { children: renderSortStatus$1({\n\t\t\tsortDirection,\n\t\t\tpriority\n\t\t}) })]\n\t});\n}\n\n//#endregion\n//#region src/hooks/useCalculatedColumns.ts\nconst DEFAULT_COLUMN_WIDTH = \"auto\";\nconst DEFAULT_COLUMN_MIN_WIDTH = 50;\nfunction useCalculatedColumns({ rawColumns, defaultColumnOptions, getColumnWidth, viewportWidth, scrollLeft, enableVirtualization }) {\n\tconst defaultWidth = defaultColumnOptions?.width ?? DEFAULT_COLUMN_WIDTH;\n\tconst defaultMinWidth = defaultColumnOptions?.minWidth ?? DEFAULT_COLUMN_MIN_WIDTH;\n\tconst defaultMaxWidth = defaultColumnOptions?.maxWidth ?? void 0;\n\tconst defaultRenderCell$1 = defaultColumnOptions?.renderCell ?? renderValue;\n\tconst defaultRenderHeaderCell = defaultColumnOptions?.renderHeaderCell ?? renderHeaderCell;\n\tconst defaultSortable = defaultColumnOptions?.sortable ?? false;\n\tconst defaultResizable = defaultColumnOptions?.resizable ?? false;\n\tconst defaultDraggable = defaultColumnOptions?.draggable ?? false;\n\tconst { columns, colSpanColumns, lastFrozenColumnIndex, headerRowsCount } = useMemo(() => {\n\t\tlet lastFrozenColumnIndex$1 = -1;\n\t\tlet headerRowsCount$1 = 1;\n\t\tconst columns$1 = [];\n\t\tcollectColumns(rawColumns, 1);\n\t\tfunction collectColumns(rawColumns$1, level, parent) {\n\t\t\tfor (const rawColumn of rawColumns$1) {\n\t\t\t\tif (\"children\" in rawColumn) {\n\t\t\t\t\tconst calculatedColumnParent = {\n\t\t\t\t\t\tname: rawColumn.name,\n\t\t\t\t\t\tparent,\n\t\t\t\t\t\tidx: -1,\n\t\t\t\t\t\tcolSpan: 0,\n\t\t\t\t\t\tlevel: 0,\n\t\t\t\t\t\theaderCellClass: rawColumn.headerCellClass\n\t\t\t\t\t};\n\t\t\t\t\tcollectColumns(rawColumn.children, level + 1, calculatedColumnParent);\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tconst frozen = rawColumn.frozen ?? false;\n\t\t\t\tconst column = {\n\t\t\t\t\t...rawColumn,\n\t\t\t\t\tparent,\n\t\t\t\t\tidx: 0,\n\t\t\t\t\tlevel: 0,\n\t\t\t\t\tfrozen,\n\t\t\t\t\twidth: rawColumn.width ?? defaultWidth,\n\t\t\t\t\tminWidth: rawColumn.minWidth ?? defaultMinWidth,\n\t\t\t\t\tmaxWidth: rawColumn.maxWidth ?? defaultMaxWidth,\n\t\t\t\t\tsortable: rawColumn.sortable ?? defaultSortable,\n\t\t\t\t\tresizable: rawColumn.resizable ?? defaultResizable,\n\t\t\t\t\tdraggable: rawColumn.draggable ?? defaultDraggable,\n\t\t\t\t\trenderCell: rawColumn.renderCell ?? defaultRenderCell$1,\n\t\t\t\t\trenderHeaderCell: rawColumn.renderHeaderCell ?? defaultRenderHeaderCell\n\t\t\t\t};\n\t\t\t\tcolumns$1.push(column);\n\t\t\t\tif (frozen) lastFrozenColumnIndex$1++;\n\t\t\t\tif (level > headerRowsCount$1) headerRowsCount$1 = level;\n\t\t\t}\n\t\t}\n\t\tcolumns$1.sort(({ key: aKey, frozen: frozenA }, { key: bKey, frozen: frozenB }) => {\n\t\t\tif (aKey === SELECT_COLUMN_KEY) return -1;\n\t\t\tif (bKey === SELECT_COLUMN_KEY) return 1;\n\t\t\tif (frozenA) {\n\t\t\t\tif (frozenB) return 0;\n\t\t\t\treturn -1;\n\t\t\t}\n\t\t\tif (frozenB) return 1;\n\t\t\treturn 0;\n\t\t});\n\t\tconst colSpanColumns$1 = [];\n\t\tcolumns$1.forEach((column, idx) => {\n\t\t\tcolumn.idx = idx;\n\t\t\tupdateColumnParent(column, idx, 0);\n\t\t\tif (column.colSpan != null) colSpanColumns$1.push(column);\n\t\t});\n\t\treturn {\n\t\t\tcolumns: columns$1,\n\t\t\tcolSpanColumns: colSpanColumns$1,\n\t\t\tlastFrozenColumnIndex: lastFrozenColumnIndex$1,\n\t\t\theaderRowsCount: headerRowsCount$1\n\t\t};\n\t}, [\n\t\trawColumns,\n\t\tdefaultWidth,\n\t\tdefaultMinWidth,\n\t\tdefaultMaxWidth,\n\t\tdefaultRenderCell$1,\n\t\tdefaultRenderHeaderCell,\n\t\tdefaultResizable,\n\t\tdefaultSortable,\n\t\tdefaultDraggable\n\t]);\n\tconst { templateColumns, layoutCssVars, totalFrozenColumnWidth, columnMetrics } = useMemo(() => {\n\t\tconst columnMetrics$1 = /* @__PURE__ */ new Map();\n\t\tlet left = 0;\n\t\tlet totalFrozenColumnWidth$1 = 0;\n\t\tconst templateColumns$1 = [];\n\t\tfor (const column of columns) {\n\t\t\tlet width = getColumnWidth(column);\n\t\t\tif (typeof width === \"number\") width = clampColumnWidth(width, column);\n\t\t\telse width = column.minWidth;\n\t\t\ttemplateColumns$1.push(`${width}px`);\n\t\t\tcolumnMetrics$1.set(column, {\n\t\t\t\twidth,\n\t\t\t\tleft\n\t\t\t});\n\t\t\tleft += width;\n\t\t}\n\t\tif (lastFrozenColumnIndex !== -1) {\n\t\t\tconst columnMetric = columnMetrics$1.get(columns[lastFrozenColumnIndex]);\n\t\t\ttotalFrozenColumnWidth$1 = columnMetric.left + columnMetric.width;\n\t\t}\n\t\tconst layoutCssVars$1 = {};\n\t\tfor (let i = 0; i <= lastFrozenColumnIndex; i++) {\n\t\t\tconst column = columns[i];\n\t\t\tlayoutCssVars$1[`--rdg-frozen-left-${column.idx}`] = `${columnMetrics$1.get(column).left}px`;\n\t\t}\n\t\treturn {\n\t\t\ttemplateColumns: templateColumns$1,\n\t\t\tlayoutCssVars: layoutCssVars$1,\n\t\t\ttotalFrozenColumnWidth: totalFrozenColumnWidth$1,\n\t\t\tcolumnMetrics: columnMetrics$1\n\t\t};\n\t}, [\n\t\tgetColumnWidth,\n\t\tcolumns,\n\t\tlastFrozenColumnIndex\n\t]);\n\tconst [colOverscanStartIdx, colOverscanEndIdx] = useMemo(() => {\n\t\tif (!enableVirtualization) return [0, columns.length - 1];\n\t\tconst viewportLeft = scrollLeft + totalFrozenColumnWidth;\n\t\tconst viewportRight = scrollLeft + viewportWidth;\n\t\tconst lastColIdx = columns.length - 1;\n\t\tconst firstUnfrozenColumnIdx = min(lastFrozenColumnIndex + 1, lastColIdx);\n\t\tif (viewportLeft >= viewportRight) return [firstUnfrozenColumnIdx, firstUnfrozenColumnIdx];\n\t\tlet colVisibleStartIdx = firstUnfrozenColumnIdx;\n\t\twhile (colVisibleStartIdx < lastColIdx) {\n\t\t\tconst { left, width } = columnMetrics.get(columns[colVisibleStartIdx]);\n\t\t\tif (left + width > viewportLeft) break;\n\t\t\tcolVisibleStartIdx++;\n\t\t}\n\t\tlet colVisibleEndIdx = colVisibleStartIdx;\n\t\twhile (colVisibleEndIdx < lastColIdx) {\n\t\t\tconst { left, width } = columnMetrics.get(columns[colVisibleEndIdx]);\n\t\t\tif (left + width >= viewportRight) break;\n\t\t\tcolVisibleEndIdx++;\n\t\t}\n\t\tconst colOverscanStartIdx$1 = max(firstUnfrozenColumnIdx, colVisibleStartIdx - 1);\n\t\tconst colOverscanEndIdx$1 = min(lastColIdx, colVisibleEndIdx + 1);\n\t\treturn [colOverscanStartIdx$1, colOverscanEndIdx$1];\n\t}, [\n\t\tcolumnMetrics,\n\t\tcolumns,\n\t\tlastFrozenColumnIndex,\n\t\tscrollLeft,\n\t\ttotalFrozenColumnWidth,\n\t\tviewportWidth,\n\t\tenableVirtualization\n\t]);\n\treturn {\n\t\tcolumns,\n\t\tcolSpanColumns,\n\t\tcolOverscanStartIdx,\n\t\tcolOverscanEndIdx,\n\t\ttemplateColumns,\n\t\tlayoutCssVars,\n\t\theaderRowsCount,\n\t\tlastFrozenColumnIndex,\n\t\ttotalFrozenColumnWidth\n\t};\n}\nfunction updateColumnParent(column, index, level) {\n\tif (level < column.level) column.level = level;\n\tif (column.parent !== void 0) {\n\t\tconst { parent } = column;\n\t\tif (parent.idx === -1) parent.idx = index;\n\t\tparent.colSpan += 1;\n\t\tupdateColumnParent(parent, index, level - 1);\n\t}\n}\n\n//#endregion\n//#region src/hooks/useLayoutEffect.ts\nconst useLayoutEffect$1 = typeof window === \"undefined\" ? useEffect : useLayoutEffect;\n\n//#endregion\n//#region src/hooks/useColumnWidths.ts\nfunction useColumnWidths(columns, viewportColumns, templateColumns, gridRef, gridWidth, columnWidths, onColumnWidthsChange, onColumnResize, setColumnResizing) {\n\tconst [columnToAutoResize, setColumnToAutoResize] = useState(null);\n\tconst [columnsToMeasureOnResize, setColumnsToMeasureOnResize] = useState(null);\n\tconst [prevGridWidth, setPreviousGridWidth] = useState(gridWidth);\n\tconst columnsCanFlex = columns.length === viewportColumns.length;\n\tconst ignorePreviouslyMeasuredColumnsOnGridWidthChange = columnsCanFlex && gridWidth !== prevGridWidth;\n\tconst newTemplateColumns = [...templateColumns];\n\tconst columnsToMeasure = [];\n\tfor (const { key, idx, width } of viewportColumns) {\n\t\tconst columnWidth = columnWidths.get(key);\n\t\tif (key === columnToAutoResize?.key) {\n\t\t\tnewTemplateColumns[idx] = columnToAutoResize.width === \"max-content\" ? columnToAutoResize.width : `${columnToAutoResize.width}px`;\n\t\t\tcolumnsToMeasure.push(key);\n\t\t} else if (typeof width === \"string\" && columnWidth?.type !== \"resized\" && (ignorePreviouslyMeasuredColumnsOnGridWidthChange || columnsToMeasureOnResize?.has(key) === true || columnWidth === void 0)) {\n\t\t\tnewTemplateColumns[idx] = width;\n\t\t\tcolumnsToMeasure.push(key);\n\t\t}\n\t}\n\tconst gridTemplateColumns = newTemplateColumns.join(\" \");\n\tuseLayoutEffect$1(updateMeasuredAndResizedWidths);\n\tfunction updateMeasuredAndResizedWidths() {\n\t\tsetPreviousGridWidth(gridWidth);\n\t\tif (columnsToMeasure.length === 0) return;\n\t\tconst newColumnWidths = new Map(columnWidths);\n\t\tlet hasChanges = false;\n\t\tfor (const key of columnsToMeasure) {\n\t\t\tconst measuredWidth = measureColumnWidth(gridRef, key);\n\t\t\thasChanges ||= measuredWidth !== columnWidths.get(key)?.width;\n\t\t\tif (measuredWidth === void 0) newColumnWidths.delete(key);\n\t\t\telse newColumnWidths.set(key, {\n\t\t\t\ttype: \"measured\",\n\t\t\t\twidth: measuredWidth\n\t\t\t});\n\t\t}\n\t\tif (columnToAutoResize !== null) {\n\t\t\tconst resizingKey = columnToAutoResize.key;\n\t\t\tconst oldWidth = columnWidths.get(resizingKey)?.width;\n\t\t\tconst newWidth = measureColumnWidth(gridRef, resizingKey);\n\t\t\tif (newWidth !== void 0 && oldWidth !== newWidth) {\n\t\t\t\thasChanges = true;\n\t\t\t\tnewColumnWidths.set(resizingKey, {\n\t\t\t\t\ttype: \"resized\",\n\t\t\t\t\twidth: newWidth\n\t\t\t\t});\n\t\t\t}\n\t\t\tsetColumnToAutoResize(null);\n\t\t}\n\t\tif (hasChanges) onColumnWidthsChange(newColumnWidths);\n\t}\n\tfunction handleColumnResize(column, nextWidth) {\n\t\tconst { key: resizingKey } = column;\n\t\tflushSync(() => {\n\t\t\tif (columnsCanFlex) {\n\t\t\t\tconst columnsToRemeasure = /* @__PURE__ */ new Set();\n\t\t\t\tfor (const { key, width } of viewportColumns) if (resizingKey !== key && typeof width === \"string\" && columnWidths.get(key)?.type !== \"resized\") columnsToRemeasure.add(key);\n\t\t\t\tsetColumnsToMeasureOnResize(columnsToRemeasure);\n\t\t\t}\n\t\t\tsetColumnToAutoResize({\n\t\t\t\tkey: resizingKey,\n\t\t\t\twidth: nextWidth\n\t\t\t});\n\t\t\tsetColumnResizing(typeof nextWidth === \"number\");\n\t\t});\n\t\tsetColumnsToMeasureOnResize(null);\n\t\tif (onColumnResize) {\n\t\t\tconst previousWidth = columnWidths.get(resizingKey)?.width;\n\t\t\tconst newWidth = typeof nextWidth === \"number\" ? nextWidth : measureColumnWidth(gridRef, resizingKey);\n\t\t\tif (newWidth !== void 0 && newWidth !== previousWidth) onColumnResize(column, newWidth);\n\t\t}\n\t}\n\treturn {\n\t\tgridTemplateColumns,\n\t\thandleColumnResize\n\t};\n}\nfunction measureColumnWidth(gridRef, key) {\n\tconst selector = `[data-measuring-cell-key=\"${CSS.escape(key)}\"]`;\n\tconst measuringCell = gridRef.current?.querySelector(selector);\n\treturn measuringCell?.getBoundingClientRect().width;\n}\n\n//#endregion\n//#region src/hooks/useGridDimensions.ts\nfunction useGridDimensions() {\n\tconst gridRef = useRef(null);\n\tconst [inlineSize, setInlineSize] = useState(1);\n\tconst [blockSize, setBlockSize] = useState(1);\n\tconst [horizontalScrollbarHeight, setHorizontalScrollbarHeight] = useState(0);\n\tuseLayoutEffect$1(() => {\n\t\tconst { ResizeObserver } = window;\n\t\tif (ResizeObserver == null) return;\n\t\tconst { clientWidth, clientHeight, offsetWidth, offsetHeight } = gridRef.current;\n\t\tconst { width, height } = gridRef.current.getBoundingClientRect();\n\t\tconst initialHorizontalScrollbarHeight = offsetHeight - clientHeight;\n\t\tconst initialWidth = width - offsetWidth + clientWidth;\n\t\tconst initialHeight = height - initialHorizontalScrollbarHeight;\n\t\tsetInlineSize(initialWidth);\n\t\tsetBlockSize(initialHeight);\n\t\tsetHorizontalScrollbarHeight(initialHorizontalScrollbarHeight);\n\t\tconst resizeObserver = new ResizeObserver((entries) => {\n\t\t\tconst size = entries[0].contentBoxSize[0];\n\t\t\tconst { clientHeight: clientHeight$1, offsetHeight: offsetHeight$1 } = gridRef.current;\n\t\t\tflushSync(() => {\n\t\t\t\tsetInlineSize(size.inlineSize);\n\t\t\t\tsetBlockSize(size.blockSize);\n\t\t\t\tsetHorizontalScrollbarHeight(offsetHeight$1 - clientHeight$1);\n\t\t\t});\n\t\t});\n\t\tresizeObserver.observe(gridRef.current);\n\t\treturn () => {\n\t\t\tresizeObserver.disconnect();\n\t\t};\n\t}, []);\n\treturn [\n\t\tgridRef,\n\t\tinlineSize,\n\t\tblockSize,\n\t\thorizontalScrollbarHeight\n\t];\n}\n\n//#endregion\n//#region src/hooks/useLatestFunc.ts\nfunction useLatestFunc(fn) {\n\tconst ref = useRef(fn);\n\tuseLayoutEffect(() => {\n\t\tref.current = fn;\n\t});\n\tconst callbackFn = useCallback((...args) => {\n\t\tref.current(...args);\n\t}, []);\n\treturn fn ? callbackFn : fn;\n}\n\n//#endregion\n//#region src/hooks/useRovingTabIndex.ts\nfunction useRovingTabIndex(isSelected) {\n\tconst [isChildFocused, setIsChildFocused] = useState(false);\n\tif (isChildFocused && !isSelected) setIsChildFocused(false);\n\tfunction onFocus(event) {\n\t\tif (event.target === event.currentTarget) {\n\t\t\tconst elementToFocus = event.currentTarget.querySelector(\"[tabindex=\\\"0\\\"]\");\n\t\t\tif (elementToFocus !== null) {\n\t\t\t\telementToFocus.focus({ preventScroll: true });\n\t\t\t\tsetIsChildFocused(true);\n\t\t\t} else setIsChildFocused(false);\n\t\t} else setIsChildFocused(true);\n\t}\n\tconst isFocusable = isSelected && !isChildFocused;\n\treturn {\n\t\ttabIndex: isFocusable ? 0 : -1,\n\t\tchildTabIndex: isSelected ? 0 : -1,\n\t\tonFocus: isSelected ? onFocus : void 0\n\t};\n}\n\n//#endregion\n//#region src/hooks/useViewportColumns.ts\nfunction useViewportColumns({ columns, colSpanColumns, rows, topSummaryRows, bottomSummaryRows, colOverscanStartIdx, colOverscanEndIdx, lastFrozenColumnIndex, rowOverscanStartIdx, rowOverscanEndIdx }) {\n\tconst startIdx = useMemo(() => {\n\t\tif (colOverscanStartIdx === 0) return 0;\n\t\tlet startIdx$1 = colOverscanStartIdx;\n\t\tconst updateStartIdx = (colIdx, colSpan) => {\n\t\t\tif (colSpan !== void 0 && colIdx + colSpan > colOverscanStartIdx) {\n\t\t\t\tstartIdx$1 = colIdx;\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn false;\n\t\t};\n\t\tfor (const column of colSpanColumns) {\n\t\t\tconst colIdx = column.idx;\n\t\t\tif (colIdx >= startIdx$1) break;\n\t\t\tif (updateStartIdx(colIdx, getColSpan(column, lastFrozenColumnIndex, { type: \"HEADER\" }))) break;\n\t\t\tfor (let rowIdx = rowOverscanStartIdx; rowIdx <= rowOverscanEndIdx; rowIdx++) {\n\t\t\t\tconst row$1 = rows[rowIdx];\n\t\t\t\tif (updateStartIdx(colIdx, getColSpan(column, lastFrozenColumnIndex, {\n\t\t\t\t\ttype: \"ROW\",\n\t\t\t\t\trow: row$1\n\t\t\t\t}))) break;\n\t\t\t}\n\t\t\tif (topSummaryRows != null) {\n\t\t\t\tfor (const row$1 of topSummaryRows) if (updateStartIdx(colIdx, getColSpan(column, lastFrozenColumnIndex, {\n\t\t\t\t\ttype: \"SUMMARY\",\n\t\t\t\t\trow: row$1\n\t\t\t\t}))) break;\n\t\t\t}\n\t\t\tif (bottomSummaryRows != null) {\n\t\t\t\tfor (const row$1 of bottomSummaryRows) if (updateStartIdx(colIdx, getColSpan(column, lastFrozenColumnIndex, {\n\t\t\t\t\ttype: \"SUMMARY\",\n\t\t\t\t\trow: row$1\n\t\t\t\t}))) break;\n\t\t\t}\n\t\t}\n\t\treturn startIdx$1;\n\t}, [\n\t\trowOverscanStartIdx,\n\t\trowOverscanEndIdx,\n\t\trows,\n\t\ttopSummaryRows,\n\t\tbottomSummaryRows,\n\t\tcolOverscanStartIdx,\n\t\tlastFrozenColumnIndex,\n\t\tcolSpanColumns\n\t]);\n\treturn useMemo(() => {\n\t\tconst viewportColumns = [];\n\t\tfor (let colIdx = 0; colIdx <= colOverscanEndIdx; colIdx++) {\n\t\t\tconst column = columns[colIdx];\n\t\t\tif (colIdx < startIdx && !column.frozen) continue;\n\t\t\tviewportColumns.push(column);\n\t\t}\n\t\treturn viewportColumns;\n\t}, [\n\t\tstartIdx,\n\t\tcolOverscanEndIdx,\n\t\tcolumns\n\t]);\n}\n\n//#endregion\n//#region src/hooks/useViewportRows.ts\nfunction useViewportRows({ element, rows, rowHeight, clientHeight, scrollTop, enableVirtualization, gridHeight }) {\n\tconst { totalRowHeight, gridTemplateRows, getRowTop, getRowHeight, findRowIdx } = useMemo(() => {\n\t\tif (typeof rowHeight === \"number\") return {\n\t\t\ttotalRowHeight: rowHeight * rows.length,\n\t\t\tgridTemplateRows: ` repeat(${rows.length}, ${rowHeight}px)`,\n\t\t\tgetRowTop: (rowIdx) => rowIdx * rowHeight,\n\t\t\tgetRowHeight: () => rowHeight,\n\t\t\tfindRowIdx: (offset) => floor(offset / rowHeight)\n\t\t};\n\t\tif (typeof rowHeight === \"string\") {\n\t\t\tconst getRowElementFirstCell = (element$1, rowIdx) => {\n\t\t\t\tconst nth = element$1.querySelector(\".rdg-header-row\") ? rowIdx + 2 : rowIdx + 1;\n\t\t\t\treturn element$1.querySelector(`[role=\"row\"][aria-rowindex=\"${nth}\"] > [role=\"gridcell\"]`);\n\t\t\t};\n\t\t\tconst getRowYTop = (element$1, rowIdx) => {\n\t\t\t\tconst cell$1 = getRowElementFirstCell(element$1, rowIdx);\n\t\t\t\tif (!cell$1) return -1;\n\t\t\t\treturn cell$1.getBoundingClientRect().top + element$1.scrollTop;\n\t\t\t};\n\t\t\treturn {\n\t\t\t\ttotalRowHeight: element?.scrollHeight ?? gridHeight,\n\t\t\t\tgridTemplateRows: ` repeat(${rows.length}, ${rowHeight})`,\n\t\t\t\tgetRowTop(rowIdx) {\n\t\t\t\t\tif (!element) return -1;\n\t\t\t\t\tconst cell$1 = getRowElementFirstCell(element, rowIdx);\n\t\t\t\t\tif (!cell$1) return -1;\n\t\t\t\t\treturn cell$1.getBoundingClientRect().top + element.scrollTop;\n\t\t\t\t},\n\t\t\t\tgetRowHeight(rowIdx) {\n\t\t\t\t\tif (!element) return -1;\n\t\t\t\t\tconst cell$1 = getRowElementFirstCell(element, rowIdx);\n\t\t\t\t\tif (!cell$1) return -1;\n\t\t\t\t\treturn cell$1.clientHeight;\n\t\t\t\t},\n\t\t\t\tfindRowIdx(offset) {\n\t\t\t\t\tif (!element) return -1;\n\t\t\t\t\tlet start = 0;\n\t\t\t\t\tlet end = rows.length - 1;\n\t\t\t\t\twhile (start <= end) {\n\t\t\t\t\t\tconst middle = start + floor((end - start) / 2);\n\t\t\t\t\t\tconst currentScrollTop = getRowYTop(element, middle);\n\t\t\t\t\t\tconst prevScrollTop = getRowYTop(element, middle - 1);\n\t\t\t\t\t\tif (currentScrollTop >= offset && prevScrollTop < offset) return middle;\n\t\t\t\t\t\tif (currentScrollTop < offset) start = middle + 1;\n\t\t\t\t\t\telse if (currentScrollTop > offset) end = middle - 1;\n\t\t\t\t\t\tif (start > end) return end;\n\t\t\t\t\t}\n\t\t\t\t\treturn -1;\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t\tlet totalRowHeight$1 = 0;\n\t\tlet gridTemplateRows$1 = \" \";\n\t\tconst rowPositions = rows.map((row$1) => {\n\t\t\tconst currentRowHeight = rowHeight(row$1);\n\t\t\tconst position = {\n\t\t\t\ttop: totalRowHeight$1,\n\t\t\t\theight: currentRowHeight\n\t\t\t};\n\t\t\tgridTemplateRows$1 += `${currentRowHeight}px `;\n\t\t\ttotalRowHeight$1 += currentRowHeight;\n\t\t\treturn position;\n\t\t});\n\t\tconst validateRowIdx = (rowIdx) => {\n\t\t\treturn max(0, min(rows.length - 1, rowIdx));\n\t\t};\n\t\treturn {\n\t\t\ttotalRowHeight: totalRowHeight$1,\n\t\t\tgridTemplateRows: gridTemplateRows$1,\n\t\t\tgetRowTop: (rowIdx) => rowPositions[validateRowIdx(rowIdx)].top,\n\t\t\tgetRowHeight: (rowIdx) => rowPositions[validateRowIdx(rowIdx)].height,\n\t\t\tfindRowIdx(offset) {\n\t\t\t\tlet start = 0;\n\t\t\t\tlet end = rowPositions.length - 1;\n\t\t\t\twhile (start <= end) {\n\t\t\t\t\tconst middle = start + floor((end - start) / 2);\n\t\t\t\t\tconst currentOffset = rowPositions[middle].top;\n\t\t\t\t\tif (currentOffset === offset) return middle;\n\t\t\t\t\tif (currentOffset < offset) start = middle + 1;\n\t\t\t\t\telse if (currentOffset > offset) end = middle - 1;\n\t\t\t\t\tif (start > end) return end;\n\t\t\t\t}\n\t\t\t\treturn 0;\n\t\t\t}\n\t\t};\n\t}, [\n\t\telement,\n\t\tgridHeight,\n\t\trowHeight,\n\t\trows\n\t]);\n\tlet rowOverscanStartIdx = 0;\n\tlet rowOverscanEndIdx = rows.length - 1;\n\tif (enableVirtualization) {\n\t\tconst overscanThreshold = 4;\n\t\tconst rowVisibleStartIdx = findRowIdx(scrollTop);\n\t\tconst rowVisibleEndIdx = findRowIdx(scrollTop + clientHeight);\n\t\trowOverscanStartIdx = max(0, rowVisibleStartIdx - overscanThreshold);\n\t\trowOverscanEndIdx = min(rows.length - 1, rowVisibleEndIdx + overscanThreshold);\n\t}\n\treturn {\n\t\trowOverscanStartIdx,\n\t\trowOverscanEndIdx,\n\t\ttotalRowHeight,\n\t\tgridTemplateRows,\n\t\tgetRowTop,\n\t\tgetRowHeight,\n\t\tfindRowIdx\n\t};\n}\n\n//#endregion\n//#region src/Cell.tsx\nconst cellDraggedOver = \"c6ra8a37-0-0-beta-56\";\nconst cellDraggedOverClassname = `rdg-cell-dragged-over ${cellDraggedOver}`;\nfunction Cell({ column, colSpan, isCellSelected, isDraggedOver, row: row$1, rowIdx, className, onMouseDown, onCellMouseDown, onClick, onCellClick, onDoubleClick, onCellDoubleClick, onContextMenu, onCellContextMenu, onRowChange, selectCell, style,...props }, ref) {\n\tconst { tabIndex, childTabIndex, onFocus } = useRovingTabIndex(isCellSelected);\n\tconst { cellClass } = column;\n\tclassName = getCellClassname(column, { [cellDraggedOverClassname]: isDraggedOver }, typeof cellClass === \"function\" ? cellClass(row$1) : cellClass, className);\n\tconst isEditable = isCellEditableUtil(column, row$1);\n\tfunction selectCellWrapper(enableEditor) {\n\t\tselectCell({\n\t\t\trowIdx,\n\t\t\tidx: column.idx\n\t\t}, { enableEditor });\n\t}\n\tfunction handleMouseEvent(event, eventHandler) {\n\t\tlet eventHandled = false;\n\t\tif (eventHandler) {\n\t\t\tconst cellEvent = createCellEvent(event);\n\t\t\teventHandler({\n\t\t\t\trowIdx,\n\t\t\t\trow: row$1,\n\t\t\t\tcolumn,\n\t\t\t\tselectCell: selectCellWrapper\n\t\t\t}, cellEvent);\n\t\t\teventHandled = cellEvent.isGridDefaultPrevented();\n\t\t}\n\t\treturn eventHandled;\n\t}\n\tfunction handleMouseDown(event) {\n\t\tonMouseDown?.(event);\n\t\tif (!handleMouseEvent(event, onCellMouseDown)) selectCellWrapper();\n\t}\n\tfunction handleClick(event) {\n\t\tonClick?.(event);\n\t\thandleMouseEvent(event, onCellClick);\n\t}\n\tfunction handleDoubleClick(event) {\n\t\tonDoubleClick?.(event);\n\t\tif (!handleMouseEvent(event, onCellDoubleClick)) selectCellWrapper(true);\n\t}\n\tfunction handleContextMenu(event) {\n\t\tonContextMenu?.(event);\n\t\thandleMouseEvent(event, onCellContextMenu);\n\t}\n\tfunction handleRowChange(newRow) {\n\t\tonRowChange(column, newRow);\n\t}\n\treturn /* @__PURE__ */ jsx(\"div\", {\n\t\trole: \"gridcell\",\n\t\t\"aria-colindex\": column.idx + 1,\n\t\t\"aria-colspan\": colSpan,\n\t\t\"aria-selected\": isCellSelected,\n\t\t\"aria-readonly\": !isEditable || void 0,\n\t\tref,\n\t\ttabIndex,\n\t\tclassName,\n\t\tstyle: {\n\t\t\t...getCellStyle(column, colSpan),\n\t\t\t...style\n\t\t},\n\t\tonClick: handleClick,\n\t\tonMouseDown: handleMouseDown,\n\t\tonDoubleClick: handleDoubleClick,\n\t\tonContextMenu: handleContextMenu,\n\t\tonFocus,\n\t\t...props,\n\t\tchildren: column.renderCell({\n\t\t\tcolumn,\n\t\t\trow: row$1,\n\t\t\trowIdx,\n\t\t\tisCellEditable: isEditable,\n\t\t\ttabIndex: childTabIndex,\n\t\t\tonRowChange: handleRowChange\n\t\t})\n\t});\n}\nconst CellComponent = memo(forwardRef(Cell));\nvar Cell_default = CellComponent;\nfunction defaultRenderCell(key, props) {\n\treturn /* @__PURE__ */ jsx(CellComponent, { ...props }, key);\n}\n\n//#endregion\n//#region src/EditCell.tsx\nconst canUsePostTask = typeof scheduler === \"object\" && typeof scheduler.postTask === \"function\";\nconst cellEditing = \"cis5rrm7-0-0-beta-56\";\nfunction EditCell({ column, colSpan, row: row$1, rowIdx, onRowChange, closeEditor, onKeyDown, navigate }) {\n\tconst captureEventRef = useRef(void 0);\n\tconst abortControllerRef = useRef(void 0);\n\tconst frameRequestRef = useRef(void 0);\n\tconst commitOnOutsideClick = column.editorOptions?.commitOnOutsideClick ?? true;\n\tconst commitOnOutsideMouseDown = useLatestFunc(() => {\n\t\tonClose(true, false);\n\t});\n\tuseLayoutEffect(() => {\n\t\tif (!commitOnOutsideClick) return;\n\t\tfunction onWindowCaptureMouseDown(event) {\n\t\t\tcaptureEventRef.current = event;\n\t\t\tif (canUsePostTask) {\n\t\t\t\tconst abortController = new AbortController();\n\t\t\t\tconst { signal } = abortController;\n\t\t\t\tabortControllerRef.current = abortController;\n\t\t\t\tscheduler.postTask(commitOnOutsideMouseDown, {\n\t\t\t\t\tpriority: \"user-blocking\",\n\t\t\t\t\tsignal\n\t\t\t\t}).catch(() => {});\n\t\t\t} else frameRequestRef.current = requestAnimationFrame(commitOnOutsideMouseDown);\n\t\t}\n\t\tfunction onWindowMouseDown(event) {\n\t\t\tif (captureEventRef.current === event) commitOnOutsideMouseDown();\n\t\t}\n\t\taddEventListener(\"mousedown\", onWindowCaptureMouseDown, { capture: true });\n\t\taddEventListener(\"mousedown\", onWindowMouseDown);\n\t\treturn () => {\n\t\t\tremoveEventListener(\"mousedown\", onWindowCaptureMouseDown, { capture: true });\n\t\t\tremoveEventListener(\"mousedown\", onWindowMouseDown);\n\t\t\tcancelTask();\n\t\t};\n\t}, [commitOnOutsideClick, commitOnOutsideMouseDown]);\n\tfunction cancelTask() {\n\t\tcaptureEventRef.current = void 0;\n\t\tif (abortControllerRef.current !== void 0) {\n\t\t\tabortControllerRef.current.abort();\n\t\t\tabortControllerRef.current = void 0;\n\t\t}\n\t\tif (frameRequestRef.current !== void 0) {\n\t\t\tcancelAnimationFrame(frameRequestRef.current);\n\t\t\tframeRequestRef.current = void 0;\n\t\t}\n\t}\n\tfunction handleKeyDown(event) {\n\t\tif (onKeyDown) {\n\t\t\tconst cellEvent = createCellEvent(event);\n\t\t\tonKeyDown({\n\t\t\t\tmode: \"EDIT\",\n\t\t\t\trow: row$1,\n\t\t\t\tcolumn,\n\t\t\t\trowIdx,\n\t\t\t\tnavigate() {\n\t\t\t\t\tnavigate(event);\n\t\t\t\t},\n\t\t\t\tonClose\n\t\t\t}, cellEvent);\n\t\t\tif (cellEvent.isGridDefaultPrevented()) return;\n\t\t}\n\t\tif (event.key === \"Escape\") onClose();\n\t\telse if (event.key === \"Enter\") onClose(true);\n\t\telse if (onEditorNavigation(event)) navigate(event);\n\t}\n\tfunction onClose(commitChanges = false, shouldFocusCell = true) {\n\t\tif (commitChanges) onRowChange(row$1, true, shouldFocusCell);\n\t\telse closeEditor(shouldFocusCell);\n\t}\n\tfunction onEditorRowChange(row$2, commitChangesAndFocus = false) {\n\t\tonRowChange(row$2, commitChangesAndFocus, commitChangesAndFocus);\n\t}\n\tconst { cellClass } = column;\n\tconst className = getCellClassname(column, \"rdg-editor-container\", !column.editorOptions?.displayCellContent && cellEditing, typeof cellClass === \"function\" ? cellClass(row$1) : cellClass);\n\treturn /* @__PURE__ */ jsx(\"div\", {\n\t\trole: \"gridcell\",\n\t\t\"aria-colindex\": column.idx + 1,\n\t\t\"aria-colspan\": colSpan,\n\t\t\"aria-selected\": true,\n\t\tclassName,\n\t\tstyle: getCellStyle(column, colSpan),\n\t\tonKeyDown: handleKeyDown,\n\t\tonMouseDownCapture: cancelTask,\n\t\tchildren: column.renderEditCell != null && /* @__PURE__ */ jsxs(Fragment, { children: [column.renderEditCell({\n\t\t\tcolumn,\n\t\t\trow: row$1,\n\t\t\trowIdx,\n\t\t\tonRowChange: onEditorRowChange,\n\t\t\tonClose\n\t\t}), column.editorOptions?.displayCellContent && column.renderCell({\n\t\t\tcolumn,\n\t\t\trow: row$1,\n\t\t\trowIdx,\n\t\t\tisCellEditable: true,\n\t\t\ttabIndex: -1,\n\t\t\tonRowChange: onEditorRowChange\n\t\t})] })\n\t});\n}\n\n//#endregion\n//#region src/GroupedColumnHeaderCell.tsx\nfunction GroupedColumnHeaderCell({ column, rowIdx, isCellSelected, selectCell }) {\n\tconst { tabIndex, onFocus } = useRovingTabIndex(isCellSelected);\n\tconst { colSpan } = column;\n\tconst rowSpan = getHeaderCellRowSpan(column, rowIdx);\n\tconst index = column.idx + 1;\n\tfunction onMouseDown() {\n\t\tselectCell({\n\t\t\tidx: column.idx,\n\t\t\trowIdx\n\t\t});\n\t}\n\treturn /* @__PURE__ */ jsx(\"div\", {\n\t\trole: \"columnheader\",\n\t\t\"aria-colindex\": index,\n\t\t\"aria-colspan\": colSpan,\n\t\t\"aria-rowspan\": rowSpan,\n\t\t\"aria-selected\": isCellSelected,\n\t\ttabIndex,\n\t\tclassName: clsx(cellClassname, column.headerCellClass),\n\t\tstyle: {\n\t\t\t...getHeaderCellStyle(column, rowIdx, rowSpan),\n\t\t\tgridColumnStart: index,\n\t\t\tgridColumnEnd: index + colSpan\n\t\t},\n\t\tonFocus,\n\t\tonMouseDown,\n\t\tchildren: column.name\n\t});\n}\n\n//#endregion\n//#region src/HeaderCell.tsx\nconst cellSortableClassname = \"c6l2wv17-0-0-beta-56\";\nconst cellResizable = \"c1kqdw7y7-0-0-beta-56\";\nconst cellResizableClassname = `rdg-cell-resizable ${cellResizable}`;\nconst resizeHandleClassname = \"r1y6ywlx7-0-0-beta-56\";\nconst cellDraggableClassname = \"rdg-cell-draggable\";\nconst cellDragging = \"c1bezg5o7-0-0-beta-56\";\nconst cellDraggingClassname = `rdg-cell-dragging ${cellDragging}`;\nconst cellOver = \"c1vc96037-0-0-beta-56\";\nconst cellOverClassname = `rdg-cell-drag-over ${cellOver}`;\nconst dragImageClassname = \"d8rwc9w7-0-0-beta-56\";\nfunction HeaderCell({ column, colSpan, rowIdx, isCellSelected, onColumnResize, onColumnResizeEnd, onColumnsReorder, sortColumns, onSortColumnsChange, selectCell, shouldFocusGrid, direction, draggedColumnKey, setDraggedColumnKey }) {\n\tconst [isOver, setIsOver] = useState(false);\n\tconst dragImageRef = useRef(null);\n\tconst isDragging = draggedColumnKey === column.key;\n\tconst rowSpan = getHeaderCellRowSpan(column, rowIdx);\n\tconst { tabIndex, childTabIndex, onFocus } = useRovingTabIndex(shouldFocusGrid || isCellSelected);\n\tconst sortIndex = sortColumns?.findIndex((sort) => sort.columnKey === column.key);\n\tconst sortColumn = sortIndex !== void 0 && sortIndex > -1 ? sortColumns[sortIndex] : void 0;\n\tconst sortDirection = sortColumn?.direction;\n\tconst priority = sortColumn !== void 0 && sortColumns.length > 1 ? sortIndex + 1 : void 0;\n\tconst ariaSort = sortDirection && !priority ? sortDirection === \"ASC\" ? \"ascending\" : \"descending\" : void 0;\n\tconst { sortable, resizable, draggable } = column;\n\tconst className = getCellClassname(column, column.headerCellClass, {\n\t\t[cellSortableClassname]: sortable,\n\t\t[cellResizableClassname]: resizable,\n\t\t[cellDraggableClassname]: draggable,\n\t\t[cellDraggingClassname]: isDragging,\n\t\t[cellOverClassname]: isOver\n\t});\n\tfunction onSort(ctrlClick) {\n\t\tif (onSortColumnsChange == null) return;\n\t\tconst { sortDescendingFirst } = column;\n\t\tif (sortColumn === void 0) {\n\t\t\tconst nextSort = {\n\t\t\t\tcolumnKey: column.key,\n\t\t\t\tdirection: sortDescendingFirst ? \"DESC\" : \"ASC\"\n\t\t\t};\n\t\t\tonSortColumnsChange(sortColumns && ctrlClick ? [...sortColumns, nextSort] : [nextSort]);\n\t\t} else {\n\t\t\tlet nextSortColumn;\n\t\t\tif (sortDescendingFirst === true && sortDirection === \"DESC\" || sortDescendingFirst !== true && sortDirection === \"ASC\") nextSortColumn = {\n\t\t\t\tcolumnKey: column.key,\n\t\t\t\tdirection: sortDirection === \"ASC\" ? \"DESC\" : \"ASC\"\n\t\t\t};\n\t\t\tif (ctrlClick) {\n\t\t\t\tconst nextSortColumns = [...sortColumns];\n\t\t\t\tif (nextSortColumn) nextSortColumns[sortIndex] = nextSortColumn;\n\t\t\t\telse nextSortColumns.splice(sortIndex, 1);\n\t\t\t\tonSortColumnsChange(nextSortColumns);\n\t\t\t} else onSortColumnsChange(nextSortColumn ? [nextSortColumn] : []);\n\t\t}\n\t}\n\tfunction handleFocus(event) {\n\t\tonFocus?.(event);\n\t\tif (shouldFocusGrid) selectCell({\n\t\t\tidx: 0,\n\t\t\trowIdx\n\t\t});\n\t}\n\tfunction onMouseDown() {\n\t\tselectCell({\n\t\t\tidx: column.idx,\n\t\t\trowIdx\n\t\t});\n\t}\n\tfunction onClick(event) {\n\t\tif (sortable) onSort(event.ctrlKey || event.metaKey);\n\t}\n\tfunction onKeyDown(event) {\n\t\tconst { key } = event;\n\t\tif (sortable && (key === \" \" || key === \"Enter\")) {\n\t\t\tevent.preventDefault();\n\t\t\tonSort(event.ctrlKey || event.metaKey);\n\t\t} else if (resizable && isCtrlKeyHeldDown(event) && (key === \"ArrowLeft\" || key === \"ArrowRight\")) {\n\t\t\tevent.stopPropagation();\n\t\t\tconst { width } = event.currentTarget.getBoundingClientRect();\n\t\t\tconst { leftKey } = getLeftRightKey(direction);\n\t\t\tconst offset = key === leftKey ? -10 : 10;\n\t\t\tconst newWidth = clampColumnWidth(width + offset, column);\n\t\t\tif (newWidth !== width) onColumnResize(column, newWidth);\n\t\t}\n\t}\n\tfunction onDragStart(event) {\n\t\tflushSync(() => {\n\t\t\tsetDraggedColumnKey(column.key);\n\t\t});\n\t\tevent.dataTransfer.setDragImage(dragImageRef.current, 0, 0);\n\t\tevent.dataTransfer.dropEffect = \"move\";\n\t}\n\tfunction onDragEnd() {\n\t\tsetDraggedColumnKey(void 0);\n\t}\n\tfunction onDragOver(event) {\n\t\tevent.preventDefault();\n\t\tevent.dataTransfer.dropEffect = \"move\";\n\t}\n\tfunction onDrop(event) {\n\t\tsetIsOver(false);\n\t\tevent.preventDefault();\n\t\tonColumnsReorder?.(draggedColumnKey, column.key);\n\t}\n\tfunction onDragEnter(event) {\n\t\tif (isEventPertinent(event)) setIsOver(true);\n\t}\n\tfunction onDragLeave(event) {\n\t\tif (isEventPertinent(event)) setIsOver(false);\n\t}\n\tlet dragTargetProps;\n\tlet dropTargetProps;\n\tif (draggable) {\n\t\tdragTargetProps = {\n\t\t\tdraggable: true,\n\t\t\tonDragStart,\n\t\t\tonDragEnd\n\t\t};\n\t\tif (draggedColumnKey !== void 0 && draggedColumnKey !== column.key) dropTargetProps = {\n\t\t\tonDragOver,\n\t\t\tonDragEnter,\n\t\t\tonDragLeave,\n\t\t\tonDrop\n\t\t};\n\t}\n\tconst style = {\n\t\t...getHeaderCellStyle(column, rowIdx, rowSpan),\n\t\t...getCellStyle(column, colSpan)\n\t};\n\tconst content = column.renderHeaderCell({\n\t\tcolumn,\n\t\tsortDirection,\n\t\tpriority,\n\t\ttabIndex: childTabIndex\n\t});\n\treturn /* @__PURE__ */ jsxs(Fragment, { children: [isDragging && /* @__PURE__ */ jsx(\"div\", {\n\t\tref: dragImageRef,\n\t\tstyle,\n\t\tclassName: getCellClassname(column, column.headerCellClass, dragImageClassname),\n\t\tchildren: content\n\t}), /* @__PURE__ */ jsxs(\"div\", {\n\t\trole: \"columnheader\",\n\t\t\"aria-colindex\": column.idx + 1,\n\t\t\"aria-colspan\": colSpan,\n\t\t\"aria-rowspan\": rowSpan,\n\t\t\"aria-selected\": isCellSelected,\n\t\t\"aria-sort\": ariaSort,\n\t\ttabIndex,\n\t\tclassName,\n\t\tstyle,\n\t\tonMouseDown,\n\t\tonFocus: handleFocus,\n\t\tonClick,\n\t\tonKeyDown,\n\t\t...dragTargetProps,\n\t\t...dropTargetProps,\n\t\tchildren: [content, resizable && /* @__PURE__ */ jsx(ResizeHandle, {\n\t\t\tdirection,\n\t\t\tcolumn,\n\t\t\tonColumnResize,\n\t\t\tonColumnResizeEnd\n\t\t})]\n\t})] });\n}\nfunction ResizeHandle({ direction, column, onColumnResize, onColumnResizeEnd }) {\n\tconst resizingOffsetRef = useRef(void 0);\n\tconst isRtl = direction === \"rtl\";\n\tfunction onPointerDown(event) {\n\t\tif (event.pointerType === \"mouse\" && event.buttons !== 1) return;\n\t\tevent.preventDefault();\n\t\tconst { currentTarget, pointerId } = event;\n\t\tcurrentTarget.setPointerCapture(pointerId);\n\t\tconst headerCell = currentTarget.parentElement;\n\t\tconst { right, left } = headerCell.getBoundingClientRect();\n\t\tresizingOffsetRef.current = isRtl ? event.clientX - left : right - event.clientX;\n\t}\n\tfunction onPointerMove(event) {\n\t\tconst offset = resizingOffsetRef.current;\n\t\tif (offset === void 0) return;\n\t\tconst { width, right, left } = event.currentTarget.parentElement.getBoundingClientRect();\n\t\tlet newWidth = isRtl ? right + offset - event.clientX : event.clientX + offset - left;\n\t\tnewWidth = clampColumnWidth(newWidth, column);\n\t\tif (width > 0 && newWidth !== width) onColumnResize(column, newWidth);\n\t}\n\tfunction onLostPointerCapture() {\n\t\tonColumnResizeEnd();\n\t\tresizingOffsetRef.current = void 0;\n\t}\n\tfunction onDoubleClick() {\n\t\tonColumnResize(column, \"max-content\");\n\t}\n\treturn /* @__PURE__ */ jsx(\"div\", {\n\t\tclassName: resizeHandleClassname,\n\t\tonClick: stopPropagation,\n\t\tonPointerDown,\n\t\tonPointerMove,\n\t\tonLostPointerCapture,\n\t\tonDoubleClick\n\t});\n}\nfunction isEventPertinent(event) {\n\tconst relatedTarget = event.relatedTarget;\n\treturn !event.currentTarget.contains(relatedTarget);\n}\n\n//#endregion\n//#region src/style/row.ts\nconst row = \"r1upfr807-0-0-beta-56\";\nconst rowClassname = `rdg-row ${row}`;\nconst rowSelected = \"r190mhd37-0-0-beta-56\";\nconst rowSelectedClassname = \"rdg-row-selected\";\nconst rowSelectedWithFrozenCell = \"r139qu9m7-0-0-beta-56\";\nconst topSummaryRowClassname = \"rdg-top-summary-row\";\nconst bottomSummaryRowClassname = \"rdg-bottom-summary-row\";\n\n//#endregion\n//#region src/HeaderRow.tsx\nconst headerRow = \"h10tskcx7-0-0-beta-56\";\nconst headerRowClassname = `rdg-header-row ${headerRow}`;\nfunction HeaderRow({ headerRowClass, rowIdx, columns, onColumnResize, onColumnResizeEnd, onColumnsReorder, sortColumns, onSortColumnsChange, lastFrozenColumnIndex, selectedCellIdx, selectCell, shouldFocusGrid, direction }) {\n\tconst [draggedColumnKey, setDraggedColumnKey] = useState();\n\tconst cells = [];\n\tfor (let index = 0; index < columns.length; index++) {\n\t\tconst column = columns[index];\n\t\tconst colSpan = getColSpan(column, lastFrozenColumnIndex, { type: \"HEADER\" });\n\t\tif (colSpan !== void 0) index += colSpan - 1;\n\t\tcells.push(/* @__PURE__ */ jsx(HeaderCell, {\n\t\t\tcolumn,\n\t\t\tcolSpan,\n\t\t\trowIdx,\n\t\t\tisCellSelected: selectedCellIdx === column.idx,\n\t\t\tonColumnResize,\n\t\t\tonColumnResizeEnd,\n\t\t\tonColumnsReorder,\n\t\t\tonSortColumnsChange,\n\t\t\tsortColumns,\n\t\t\tselectCell,\n\t\t\tshouldFocusGrid: shouldFocusGrid && index === 0,\n\t\t\tdirection,\n\t\t\tdraggedColumnKey,\n\t\t\tsetDraggedColumnKey\n\t\t}, column.key));\n\t}\n\treturn /* @__PURE__ */ jsx(\"div\", {\n\t\trole: \"row\",\n\t\t\"aria-rowindex\": rowIdx,\n\t\tclassName: clsx(headerRowClassname, { [rowSelectedClassname]: selectedCellIdx === -1 }, headerRowClass),\n\t\tchildren: cells\n\t});\n}\nvar HeaderRow_default = memo(HeaderRow);\n\n//#endregion\n//#region src/GroupedColumnHeaderRow.tsx\nfunction GroupedColumnHeaderRow({ rowIdx, level, columns, selectedCellIdx, selectCell }) {\n\tconst cells = [];\n\tconst renderedParents = /* @__PURE__ */ new Set();\n\tfor (const column of columns) {\n\t\tlet { parent } = column;\n\t\tif (parent === void 0) continue;\n\t\twhile (parent.level > level) {\n\t\t\tif (parent.parent === void 0) break;\n\t\t\tparent = parent.parent;\n\t\t}\n\t\tif (parent.level === level && !renderedParents.has(parent)) {\n\t\t\trenderedParents.add(parent);\n\t\t\tconst { idx } = parent;\n\t\t\tcells.push(/* @__PURE__ */ jsx(GroupedColumnHeaderCell, {\n\t\t\t\tcolumn: parent,\n\t\t\t\trowIdx,\n\t\t\t\tisCellSelected: selectedCellIdx === idx,\n\t\t\t\tselectCell\n\t\t\t}, idx));\n\t\t}\n\t}\n\treturn /* @__PURE__ */ jsx(\"div\", {\n\t\trole: \"row\",\n\t\t\"aria-rowindex\": rowIdx,\n\t\tclassName: headerRowClassname,\n\t\tchildren: cells\n\t});\n}\nvar GroupedColumnHeaderRow_default = memo(GroupedColumnHeaderRow);\n\n//#endregion\n//#region src/Row.tsx\nfunction Row({ className, rowIdx, gridRowStart, selectedCellIdx, isRowSelectionDisabled, isRowSelected, draggedOverCellIdx, lastFrozenColumnIndex, row: row$1, viewportColumns, selectedCellEditor, onCellMouseDown, onCellClick, onCellDoubleClick, onCellContextMenu, rowClass, onRowChange, selectCell, style,...props }, ref) {\n\tconst renderCell = useDefaultRenderers().renderCell;\n\tconst handleRowChange = useLatestFunc((column, newRow) => {\n\t\tonRowChange(column, rowIdx, newRow);\n\t});\n\tclassName = clsx(rowClassname, `rdg-row-${rowIdx % 2 === 0 ? \"even\" : \"odd\"}`, { [rowSelectedClassname]: selectedCellIdx === -1 }, rowClass?.(row$1, rowIdx), className);\n\tconst cells = [];\n\tfor (let index = 0; index < viewportColumns.length; index++) {\n\t\tconst column = viewportColumns[index];\n\t\tconst { idx } = column;\n\t\tconst colSpan = getColSpan(column, lastFrozenColumnIndex, {\n\t\t\ttype: \"ROW\",\n\t\t\trow: row$1\n\t\t});\n\t\tif (colSpan !== void 0) index += colSpan - 1;\n\t\tconst isCellSelected = selectedCellIdx === idx;\n\t\tif (isCellSelected && selectedCellEditor) cells.push(selectedCellEditor);\n\t\telse cells.push(renderCell(column.key, {\n\t\t\tcolumn,\n\t\t\tcolSpan,\n\t\t\trow: row$1,\n\t\t\trowIdx,\n\t\t\tisDraggedOver: draggedOverCellIdx === idx,\n\t\t\tisCellSelected,\n\t\t\tonCellMouseDown,\n\t\t\tonCellClick,\n\t\t\tonCellDoubleClick,\n\t\t\tonCellContextMenu,\n\t\t\tonRowChange: handleRowChange,\n\t\t\tselectCell\n\t\t}));\n\t}\n\tconst selectionValue = useMemo(() => ({\n\t\tisRowSelected,\n\t\tisRowSelectionDisabled\n\t}), [isRowSelectionDisabled, isRowSelected]);\n\treturn /* @__PURE__ */ jsx(RowSelectionContext.Provider, {\n\t\tvalue: selectionValue,\n\t\tchildren: /* @__PURE__ */ jsx(\"div\", {\n\t\t\trole: \"row\",\n\t\t\tref,\n\t\t\tclassName,\n\t\t\tstyle: {\n\t\t\t\t...getRowStyle(gridRowStart),\n\t\t\t\t...style\n\t\t\t},\n\t\t\t...props,\n\t\t\tchildren: cells\n\t\t})\n\t});\n}\nconst RowComponent = memo(forwardRef(Row));\nvar Row_default = RowComponent;\nfunction defaultRenderRow(key, props) {\n\treturn /* @__PURE__ */ jsx(RowComponent, { ...props }, key);\n}\n\n//#endregion\n//#region src/ScrollToCell.tsx\nfunction ScrollToCell({ scrollToPosition: { idx, rowIdx }, gridRef, setScrollToCellPosition }) {\n\tconst ref = useRef(null);\n\tuseLayoutEffect$1(() => {\n\t\tscrollIntoView(ref.current, \"auto\");\n\t});\n\tuseLayoutEffect$1(() => {\n\t\tfunction removeScrollToCell() {\n\t\t\tsetScrollToCellPosition(null);\n\t\t}\n\t\tconst observer = new IntersectionObserver(removeScrollToCell, {\n\t\t\troot: gridRef.current,\n\t\t\tthreshold: 1\n\t\t});\n\t\tobserver.observe(ref.current);\n\t\treturn () => {\n\t\t\tobserver.disconnect();\n\t\t};\n\t}, [gridRef, setScrollToCellPosition]);\n\treturn /* @__PURE__ */ jsx(\"div\", {\n\t\tref,\n\t\tstyle: {\n\t\t\tgridColumn: idx === void 0 ? \"1/-1\" : idx + 1,\n\t\t\tgridRow: rowIdx === void 0 ? \"1/-1\" : rowIdx + 2\n\t\t}\n\t});\n}\n\n//#endregion\n//#region src/sortStatus.tsx\nconst arrow = \"a3ejtar7-0-0-beta-56\";\nconst arrowClassname = `rdg-sort-arrow ${arrow}`;\nfunction renderSortStatus({ sortDirection, priority }) {\n\treturn /* @__PURE__ */ jsxs(Fragment, { children: [renderSortIcon({ sortDirection }), renderSortPriority({ priority })] });\n}\nfunction renderSortIcon({ sortDirection }) {\n\tif (sortDirection === void 0) return null;\n\treturn /* @__PURE__ */ jsx(\"svg\", {\n\t\tviewBox: \"0 0 12 8\",\n\t\twidth: \"12\",\n\t\theight: \"8\",\n\t\tclassName: arrowClassname,\n\t\t\"aria-hidden\": true,\n\t\tchildren: /* @__PURE__ */ jsx(\"path\", { d: sortDirection === \"ASC\" ? \"M0 8 6 0 12 8\" : \"M0 0 6 8 12 0\" })\n\t});\n}\nfunction renderSortPriority({ priority }) {\n\treturn priority;\n}\n\n//#endregion\n//#region src/style/core.ts\nconst root = \"rnvodz57-0-0-beta-56\";\nconst rootClassname = `rdg ${root}`;\nconst viewportDragging = \"vlqv91k7-0-0-beta-56\";\nconst viewportDraggingClassname = `rdg-viewport-dragging ${viewportDragging}`;\nconst focusSinkClassname = \"f1lsfrzw7-0-0-beta-56\";\nconst focusSinkHeaderAndSummaryClassname = \"f1cte0lg7-0-0-beta-56\";\n\n//#endregion\n//#region src/SummaryCell.tsx\nconst summaryCellClassname = \"s8wc6fl7-0-0-beta-56\";\nfunction SummaryCell({ column, colSpan, row: row$1, rowIdx, isCellSelected, selectCell }) {\n\tconst { tabIndex, childTabIndex, onFocus } = useRovingTabIndex(isCellSelected);\n\tconst { summaryCellClass } = column;\n\tconst className = getCellClassname(column, summaryCellClassname, typeof summaryCellClass === \"function\" ? summaryCellClass(row$1) : summaryCellClass);\n\tfunction onMouseDown() {\n\t\tselectCell({\n\t\t\trowIdx,\n\t\t\tidx: column.idx\n\t\t});\n\t}\n\treturn /* @__PURE__ */ jsx(\"div\", {\n\t\trole: \"gridcell\",\n\t\t\"aria-colindex\": column.idx + 1,\n\t\t\"aria-colspan\": colSpan,\n\t\t\"aria-selected\": isCellSelected,\n\t\ttabIndex,\n\t\tclassName,\n\t\tstyle: getCellStyle(column, colSpan),\n\t\tonMouseDown,\n\t\tonFocus,\n\t\tchildren: column.renderSummaryCell?.({\n\t\t\tcolumn,\n\t\t\trow: row$1,\n\t\t\ttabIndex: childTabIndex\n\t\t})\n\t});\n}\nvar SummaryCell_default = memo(SummaryCell);\n\n//#endregion\n//#region src/SummaryRow.tsx\nconst summaryRow = \"skuhp557-0-0-beta-56\";\nconst topSummaryRow = \"tf8l5ub7-0-0-beta-56\";\nconst summaryRowClassname = `rdg-summary-row ${summaryRow}`;\nfunction SummaryRow({ rowIdx, gridRowStart, row: row$1, viewportColumns, top, bottom, lastFrozenColumnIndex, selectedCellIdx, isTop, selectCell, \"aria-rowindex\": ariaRowIndex }) {\n\tconst cells = [];\n\tfor (let index = 0; index < viewportColumns.length; index++) {\n\t\tconst column = viewportColumns[index];\n\t\tconst colSpan = getColSpan(column, lastFrozenColumnIndex, {\n\t\t\ttype: \"SUMMARY\",\n\t\t\trow: row$1\n\t\t});\n\t\tif (colSpan !== void 0) index += colSpan - 1;\n\t\tconst isCellSelected = selectedCellIdx === column.idx;\n\t\tcells.push(/* @__PURE__ */ jsx(SummaryCell_default, {\n\t\t\tcolumn,\n\t\t\tcolSpan,\n\t\t\trow: row$1,\n\t\t\trowIdx,\n\t\t\tisCellSelected,\n\t\t\tselectCell\n\t\t}, column.key));\n\t}\n\treturn /* @__PURE__ */ jsx(\"div\", {\n\t\trole: \"row\",\n\t\t\"aria-rowindex\": ariaRowIndex,\n\t\tclassName: clsx(rowClassname, `rdg-row-${rowIdx % 2 === 0 ? \"even\" : \"odd\"}`, summaryRowClassname, {\n\t\t\t[rowSelectedClassname]: selectedCellIdx === -1,\n\t\t\t[`${topSummaryRowClassname} ${topSummaryRow}`]: isTop,\n\t\t\t[bottomSummaryRowClassname]: !isTop\n\t\t}),\n\t\tstyle: {\n\t\t\t...getRowStyle(gridRowStart),\n\t\t\t\"--rdg-summary-row-top\": top !== void 0 ? `${top}px` : void 0,\n\t\t\t\"--rdg-summary-row-bottom\": bottom !== void 0 ? `${bottom}px` : void 0\n\t\t},\n\t\tchildren: cells\n\t});\n}\nvar SummaryRow_default = memo(SummaryRow);\n\n//#endregion\n//#region src/DataGrid.tsx\n/**\n* Main API Component to render a data grid of rows and columns\n*\n* @example\n*\n* <DataGrid columns={columns} rows={rows} />\n*/\nfunction DataGridBase(props, ref) {\n\tconst { columns: rawColumns, rows, topSummaryRows, bottomSummaryRows, rowKeyGetter, onRowsChange, rowHeight: rawRowHeight, headerRowHeight: rawHeaderRowHeight, summaryRowHeight: rawSummaryRowHeight, columnWidths: columnWidthsRaw, onColumnWidthsChange: onColumnWidthsChangeRaw, selectedRows, isRowSelectionDisabled, onSelectedRowsChange, sortColumns, onSortColumnsChange, defaultColumnOptions, onCellMouseDown, onCellClick, onCellDoubleClick, onCellContextMenu, onCellKeyDown, onSelectedCellChange, onScroll, onColumnResize, onColumnsReorder, onFill, onCellCopy, onCellPaste, enableVirtualization: rawEnableVirtualization, renderers, className, style, rowClass, headerRowClass, direction: rawDirection, role: rawRole, \"aria-label\": ariaLabel, \"aria-labelledby\": ariaLabelledBy, \"aria-description\": ariaDescription, \"aria-describedby\": ariaDescribedBy, \"aria-rowcount\": rawAriaRowCount, \"data-testid\": testId, \"data-cy\": dataCy } = props;\n\t/**\n\t* defaults\n\t*/\n\tconst defaultRenderers = useDefaultRenderers();\n\tconst role = rawRole ?? \"grid\";\n\tconst rowHeight = rawRowHeight ?? 35;\n\tconst headerRowHeight = rawHeaderRowHeight ?? (typeof rowHeight === \"number\" ? rowHeight : 35);\n\tconst summaryRowHeight = rawSummaryRowHeight ?? (typeof rowHeight === \"number\" ? rowHeight : 35);\n\tconst renderRow = renderers?.renderRow ?? defaultRenderers?.renderRow ?? defaultRenderRow;\n\tconst renderCell = renderers?.renderCell ?? defaultRenderers?.renderCell ?? defaultRenderCell;\n\tconst renderSortStatus$1 = renderers?.renderSortStatus ?? defaultRenderers?.renderSortStatus ?? renderSortStatus;\n\tconst renderCheckbox$1 = renderers?.renderCheckbox ?? defaultRenderers?.renderCheckbox ?? renderCheckbox;\n\tconst noRowsFallback = renderers?.noRowsFallback ?? defaultRenderers?.noRowsFallback;\n\tconst enableVirtualization = rawEnableVirtualization ?? typeof rawRowHeight !== \"string\";\n\tconst direction = rawDirection ?? \"ltr\";\n\tif (enableVirtualization && typeof rowHeight === \"string\") throw new Error(\"`rowHeight` cannot be a string when `enableVirtualization` is true.\");\n\t/**\n\t* states\n\t*/\n\tconst [scrollTop, setScrollTop] = useState(0);\n\tconst [scrollLeft, setScrollLeft] = useState(0);\n\tconst [columnWidthsInternal, setColumnWidthsInternal] = useState(() => columnWidthsRaw ?? /* @__PURE__ */ new Map());\n\tconst [isColumnResizing, setColumnResizing] = useState(false);\n\tconst [isDragging, setDragging] = useState(false);\n\tconst [draggedOverRowIdx, setDraggedOverRowIdx] = useState(void 0);\n\tconst [scrollToPosition, setScrollToPosition] = useState(null);\n\tconst [shouldFocusCell, setShouldFocusCell] = useState(false);\n\tconst [previousRowIdx, setPreviousRowIdx] = useState(-1);\n\tconst isColumnWidthsControlled = columnWidthsRaw != null && onColumnWidthsChangeRaw != null && !isColumnResizing;\n\tconst columnWidths = isColumnWidthsControlled ? columnWidthsRaw : columnWidthsInternal;\n\tconst onColumnWidthsChange = isColumnWidthsControlled ? (columnWidths$1) => {\n\t\tsetColumnWidthsInternal(columnWidths$1);\n\t\tonColumnWidthsChangeRaw(columnWidths$1);\n\t} : setColumnWidthsInternal;\n\tconst getColumnWidth = useCallback((column) => {\n\t\treturn columnWidths.get(column.key)?.width ?? column.width;\n\t}, [columnWidths]);\n\tconst [gridRef, gridWidth, gridHeight, horizontalScrollbarHeight] = useGridDimensions();\n\tconst { columns, colSpanColumns, lastFrozenColumnIndex, headerRowsCount, colOverscanStartIdx, colOverscanEndIdx, templateColumns, layoutCssVars, totalFrozenColumnWidth } = useCalculatedColumns({\n\t\trawColumns,\n\t\tdefaultColumnOptions,\n\t\tgetColumnWidth,\n\t\tscrollLeft,\n\t\tviewportWidth: gridWidth,\n\t\tenableVirtualization\n\t});\n\tconst topSummaryRowsCount = topSummaryRows?.length ?? 0;\n\tconst bottomSummaryRowsCount = bottomSummaryRows?.length ?? 0;\n\tconst summaryRowsCount = topSummaryRowsCount + bottomSummaryRowsCount;\n\tconst headerAndTopSummaryRowsCount = headerRowsCount + topSummaryRowsCount;\n\tconst groupedColumnHeaderRowsCount = headerRowsCount - 1;\n\tconst minRowIdx = -headerAndTopSummaryRowsCount;\n\tconst mainHeaderRowIdx = minRowIdx + groupedColumnHeaderRowsCount;\n\tconst maxRowIdx = rows.length + bottomSummaryRowsCount - 1;\n\tconst [selectedPosition, setSelectedPosition] = useState(() => ({\n\t\tidx: -1,\n\t\trowIdx: minRowIdx - 1,\n\t\tmode: \"SELECT\"\n\t}));\n\t/**\n\t* refs\n\t*/\n\tconst focusSinkRef = useRef(null);\n\t/**\n\t* computed values\n\t*/\n\tconst isTreeGrid = role === \"treegrid\";\n\tconst headerRowsHeight = headerRowsCount * headerRowHeight;\n\tconst summaryRowsHeight = summaryRowsCount * summaryRowHeight;\n\tconst clientHeight = gridHeight - headerRowsHeight - summaryRowsHeight;\n\tconst isSelectable = selectedRows != null && onSelectedRowsChange != null;\n\tconst { leftKey, rightKey } = getLeftRightKey(direction);\n\tconst ariaRowCount = rawAriaRowCount ?? headerRowsCount + rows.length + summaryRowsCount;\n\tconst defaultGridComponents = useMemo(() => ({\n\t\trenderCheckbox: renderCheckbox$1,\n\t\trenderSortStatus: renderSortStatus$1,\n\t\trenderCell\n\t}), [\n\t\trenderCheckbox$1,\n\t\trenderSortStatus$1,\n\t\trenderCell\n\t]);\n\tconst headerSelectionValue = useMemo(() => {\n\t\tlet hasSelectedRow = false;\n\t\tlet hasUnselectedRow = false;\n\t\tif (rowKeyGetter != null && selectedRows != null && selectedRows.size > 0) for (const row$1 of rows) {\n\t\t\tif (selectedRows.has(rowKeyGetter(row$1))) hasSelectedRow = true;\n\t\t\telse hasUnselectedRow = true;\n\t\t\tif (hasSelectedRow && hasUnselectedRow) break;\n\t\t}\n\t\treturn {\n\t\t\tisRowSelected: hasSelectedRow && !hasUnselectedRow,\n\t\t\tisIndeterminate: hasSelectedRow && hasUnselectedRow\n\t\t};\n\t}, [\n\t\trows,\n\t\tselectedRows,\n\t\trowKeyGetter\n\t]);\n\tconst { rowOverscanStartIdx, rowOverscanEndIdx, totalRowHeight, gridTemplateRows, getRowTop, getRowHeight, findRowIdx } = useViewportRows({\n\t\telement: gridRef.current,\n\t\trows,\n\t\trowHeight,\n\t\tclientHeight,\n\t\tscrollTop,\n\t\tenableVirtualization,\n\t\tgridHeight\n\t});\n\tconst viewportColumns = useViewportColumns({\n\t\tcolumns,\n\t\tcolSpanColumns,\n\t\tcolOverscanStartIdx,\n\t\tcolOverscanEndIdx,\n\t\tlastFrozenColumnIndex,\n\t\trowOverscanStartIdx,\n\t\trowOverscanEndIdx,\n\t\trows,\n\t\ttopSummaryRows,\n\t\tbottomSummaryRows\n\t});\n\tconst { gridTemplateColumns, handleColumnResize } = useColumnWidths(columns, viewportColumns, templateColumns, gridRef, gridWidth, columnWidths, onColumnWidthsChange, onColumnResize, setColumnResizing);\n\tconst minColIdx = isTreeGrid ? -1 : 0;\n\tconst maxColIdx = columns.length - 1;\n\tconst selectedCellIsWithinSelectionBounds = isCellWithinSelectionBounds(selectedPosition);\n\tconst selectedCellIsWithinViewportBounds = isCellWithinViewportBounds(selectedPosition);\n\tconst scrollHeight = headerRowHeight + totalRowHeight + summaryRowsHeight + horizontalScrollbarHeight;\n\t/**\n\t* The identity of the wrapper function is stable so it won't break memoization\n\t*/\n\tconst handleColumnResizeLatest = useLatestFunc(handleColumnResize);\n\tconst handleColumnResizeEndLatest = useLatestFunc(handleColumnResizeEnd);\n\tconst onColumnsReorderLastest = useLatestFunc(onColumnsReorder);\n\tconst onSortColumnsChangeLatest = useLatestFunc(onSortColumnsChange);\n\tconst onCellMouseDownLatest = useLatestFunc(onCellMouseDown);\n\tconst onCellClickLatest = useLatestFunc(onCellClick);\n\tconst onCellDoubleClickLatest = useLatestFunc(onCellDoubleClick);\n\tconst onCellContextMenuLatest = useLatestFunc(onCellContextMenu);\n\tconst selectHeaderRowLatest = useLatestFunc(selectHeaderRow);\n\tconst selectRowLatest = useLatestFunc(selectRow);\n\tconst handleFormatterRowChangeLatest = useLatestFunc(updateRow);\n\tconst selectCellLatest = useLatestFunc(selectCell);\n\tconst selectHeaderCellLatest = useLatestFunc(selectHeaderCell);\n\t/**\n\t* callbacks\n\t*/\n\tconst focusCell = useCallback((shouldScroll = true) => {\n\t\tconst cell$1 = getCellToScroll(gridRef.current);\n\t\tif (cell$1 === null) return;\n\t\tif (shouldScroll) scrollIntoView(cell$1);\n\t\tcell$1.focus({ preventScroll: true });\n\t}, [gridRef]);\n\t/**\n\t* effects\n\t*/\n\tuseLayoutEffect$1(() => {\n\t\tif (shouldFocusCell) {\n\t\t\tif (focusSinkRef.current !== null && selectedPosition.idx === -1) {\n\t\t\t\tfocusSinkRef.current.focus({ preventScroll: true });\n\t\t\t\tscrollIntoView(focusSinkRef.current);\n\t\t\t} else focusCell();\n\t\t\tsetShouldFocusCell(false);\n\t\t}\n\t}, [\n\t\tshouldFocusCell,\n\t\tfocusCell,\n\t\tselectedPosition.idx\n\t]);\n\tuseImperativeHandle(ref, () => ({\n\t\telement: gridRef.current,\n\t\tscrollToCell({ idx, rowIdx }) {\n\t\t\tconst scrollToIdx = idx !== void 0 && idx > lastFrozenColumnIndex && idx < columns.length ? idx : void 0;\n\t\t\tconst scrollToRowIdx = rowIdx !== void 0 && isRowIdxWithinViewportBounds(rowIdx) ? rowIdx : void 0;\n\t\t\tif (scrollToIdx !== void 0 || scrollToRowIdx !== void 0) setScrollToPosition({\n\t\t\t\tidx: scrollToIdx,\n\t\t\t\trowIdx: scrollToRowIdx\n\t\t\t});\n\t\t},\n\t\tselectCell\n\t}));\n\t/**\n\t* event handlers\n\t*/\n\tfunction selectHeaderRow(args) {\n\t\tif (!onSelectedRowsChange) return;\n\t\tassertIsValidKeyGetter(rowKeyGetter);\n\t\tconst newSelectedRows = new Set(selectedRows);\n\t\tfor (const row$1 of rows) {\n\t\t\tif (isRowSelectionDisabled?.(row$1) === true) continue;\n\t\t\tconst rowKey = rowKeyGetter(row$1);\n\t\t\tif (args.checked) newSelectedRows.add(rowKey);\n\t\t\telse newSelectedRows.delete(rowKey);\n\t\t}\n\t\tonSelectedRowsChange(newSelectedRows);\n\t}\n\tfunction selectRow(args) {\n\t\tif (!onSelectedRowsChange) return;\n\t\tassertIsValidKeyGetter(rowKeyGetter);\n\t\tconst { row: row$1, checked, isShiftClick } = args;\n\t\tif (isRowSelectionDisabled?.(row$1) === true) return;\n\t\tconst newSelectedRows = new Set(selectedRows);\n\t\tconst rowKey = rowKeyGetter(row$1);\n\t\tconst rowIdx = rows.indexOf(row$1);\n\t\tsetPreviousRowIdx(rowIdx);\n\t\tif (checked) newSelectedRows.add(rowKey);\n\t\telse newSelectedRows.delete(rowKey);\n\t\tif (isShiftClick && previousRowIdx !== -1 && previousRowIdx !== rowIdx && previousRowIdx < rows.length) {\n\t\t\tconst step = sign(rowIdx - previousRowIdx);\n\t\t\tfor (let i = previousRowIdx + step; i !== rowIdx; i += step) {\n\t\t\t\tconst row$2 = rows[i];\n\t\t\t\tif (isRowSelectionDisabled?.(row$2) === true) continue;\n\t\t\t\tif (checked) newSelectedRows.add(rowKeyGetter(row$2));\n\t\t\t\telse newSelectedRows.delete(rowKeyGetter(row$2));\n\t\t\t}\n\t\t}\n\t\tonSelectedRowsChange(newSelectedRows);\n\t}\n\tfunction handleKeyDown(event) {\n\t\tconst { idx, rowIdx, mode } = selectedPosition;\n\t\tif (mode === \"EDIT\") return;\n\t\tif (onCellKeyDown && isRowIdxWithinViewportBounds(rowIdx)) {\n\t\t\tconst row$1 = rows[rowIdx];\n\t\t\tconst cellEvent = createCellEvent(event);\n\t\t\tonCellKeyDown({\n\t\t\t\tmode: \"SELECT\",\n\t\t\t\trow: row$1,\n\t\t\t\tcolumn: columns[idx],\n\t\t\t\trowIdx,\n\t\t\t\tselectCell\n\t\t\t}, cellEvent);\n\t\t\tif (cellEvent.isGridDefaultPrevented()) return;\n\t\t}\n\t\tif (!(event.target instanceof Element)) return;\n\t\tconst isCellEvent = event.target.closest(\".rdg-cell\") !== null;\n\t\tconst isRowEvent = isTreeGrid && event.target === focusSinkRef.current;\n\t\tif (!isCellEvent && !isRowEvent) return;\n\t\tswitch (event.key) {\n\t\t\tcase \"ArrowUp\":\n\t\t\tcase \"ArrowDown\":\n\t\t\tcase \"ArrowLeft\":\n\t\t\tcase \"ArrowRight\":\n\t\t\tcase \"Tab\":\n\t\t\tcase \"Home\":\n\t\t\tcase \"End\":\n\t\t\tcase \"PageUp\":\n\t\t\tcase \"PageDown\":\n\t\t\t\tnavigate(event);\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\thandleCellInput(event);\n\t\t\t\tbreak;\n\t\t}\n\t}\n\tfunction handleScroll(event) {\n\t\tconst { scrollTop: scrollTop$1, scrollLeft: scrollLeft$1 } = event.currentTarget;\n\t\tflushSync(() => {\n\t\t\tsetScrollTop(scrollTop$1);\n\t\t\tsetScrollLeft(abs(scrollLeft$1));\n\t\t});\n\t\tonScroll?.(event);\n\t}\n\tfunction updateRow(column, rowIdx, row$1) {\n\t\tif (typeof onRowsChange !== \"function\") return;\n\t\tif (row$1 === rows[rowIdx]) return;\n\t\tconst updatedRows = rows.with(rowIdx, row$1);\n\t\tonRowsChange(updatedRows, {\n\t\t\tindexes: [rowIdx],\n\t\t\tcolumn\n\t\t});\n\t}\n\tfunction commitEditorChanges() {\n\t\tif (selectedPosition.mode !== \"EDIT\") return;\n\t\tupdateRow(columns[selectedPosition.idx], selectedPosition.rowIdx, selectedPosition.row);\n\t}\n\tfunction handleCellCopy(event) {\n\t\tif (!selectedCellIsWithinViewportBounds) return;\n\t\tconst { idx, rowIdx } = selectedPosition;\n\t\tonCellCopy?.({\n\t\t\trow: rows[rowIdx],\n\t\t\tcolumn: columns[idx]\n\t\t}, event);\n\t}\n\tfunction handleCellPaste(event) {\n\t\tif (!onCellPaste || !onRowsChange || !isCellEditable(selectedPosition)) return;\n\t\tconst { idx, rowIdx } = selectedPosition;\n\t\tconst column = columns[idx];\n\t\tconst updatedRow = onCellPaste({\n\t\t\trow: rows[rowIdx],\n\t\t\tcolumn\n\t\t}, event);\n\t\tupdateRow(column, rowIdx, updatedRow);\n\t}\n\tfunction handleCellInput(event) {\n\t\tif (!selectedCellIsWithinViewportBounds) return;\n\t\tconst row$1 = rows[selectedPosition.rowIdx];\n\t\tconst { key, shiftKey } = event;\n\t\tif (isSelectable && shiftKey && key === \" \") {\n\t\t\tassertIsValidKeyGetter(rowKeyGetter);\n\t\t\tconst rowKey = rowKeyGetter(row$1);\n\t\t\tselectRow({\n\t\t\t\trow: row$1,\n\t\t\t\tchecked: !selectedRows.has(rowKey),\n\t\t\t\tisShiftClick: false\n\t\t\t});\n\t\t\tevent.preventDefault();\n\t\t\treturn;\n\t\t}\n\t\tif (isCellEditable(selectedPosition) && isDefaultCellInput(event, onCellPaste != null)) setSelectedPosition(({ idx, rowIdx }) => ({\n\t\t\tidx,\n\t\t\trowIdx,\n\t\t\tmode: \"EDIT\",\n\t\t\trow: row$1,\n\t\t\toriginalRow: row$1\n\t\t}));\n\t}\n\tfunction handleColumnResizeEnd() {\n\t\tif (isColumnResizing) {\n\t\t\tonColumnWidthsChangeRaw?.(columnWidths);\n\t\t\tsetColumnResizing(false);\n\t\t}\n\t}\n\tfunction handleDragHandlePointerDown(event) {\n\t\tevent.preventDefault();\n\t\tif (event.pointerType === \"mouse\" && event.buttons !== 1) return;\n\t\tsetDragging(true);\n\t\tevent.currentTarget.setPointerCapture(event.pointerId);\n\t}\n\tfunction handleDragHandlePointerMove(event) {\n\t\tconst gridEl = gridRef.current;\n\t\tconst headerAndTopSummaryRowsHeight = headerRowsHeight + topSummaryRowsCount * summaryRowHeight;\n\t\tconst offset = scrollTop - headerAndTopSummaryRowsHeight + event.clientY - gridEl.getBoundingClientRect().top;\n\t\tconst overRowIdx = findRowIdx(offset);\n\t\tsetDraggedOverRowIdx(overRowIdx);\n\t\tconst ariaRowIndex = headerAndTopSummaryRowsCount + overRowIdx + 1;\n\t\tconst el = gridEl.querySelector(`:scope > [aria-rowindex=\"${ariaRowIndex}\"] > [aria-colindex=\"${selectedPosition.idx + 1}\"]`);\n\t\tscrollIntoView(el);\n\t}\n\tfunction handleDragHandleLostPointerCapture() {\n\t\tsetDragging(false);\n\t\tif (draggedOverRowIdx === void 0) return;\n\t\tconst { rowIdx } = selectedPosition;\n\t\tconst [startRowIndex, endRowIndex] = rowIdx < draggedOverRowIdx ? [rowIdx + 1, draggedOverRowIdx + 1] : [draggedOverRowIdx, rowIdx];\n\t\tupdateRows(startRowIndex, endRowIndex);\n\t\tsetDraggedOverRowIdx(void 0);\n\t}\n\tfunction handleDragHandleClick() {\n\t\tfocusCell(false);\n\t}\n\tfunction handleDragHandleDoubleClick(event) {\n\t\tevent.stopPropagation();\n\t\tupdateRows(selectedPosition.rowIdx + 1, rows.length);\n\t}\n\tfunction updateRows(startRowIdx, endRowIdx) {\n\t\tif (onRowsChange == null) return;\n\t\tconst { rowIdx, idx } = selectedPosition;\n\t\tconst column = columns[idx];\n\t\tconst sourceRow = rows[rowIdx];\n\t\tconst updatedRows = [...rows];\n\t\tconst indexes = [];\n\t\tfor (let i = startRowIdx; i < endRowIdx; i++) if (isCellEditable({\n\t\t\trowIdx: i,\n\t\t\tidx\n\t\t})) {\n\t\t\tconst updatedRow = onFill({\n\t\t\t\tcolumnKey: column.key,\n\t\t\t\tsourceRow,\n\t\t\t\ttargetRow: rows[i]\n\t\t\t});\n\t\t\tif (updatedRow !== rows[i]) {\n\t\t\t\tupdatedRows[i] = updatedRow;\n\t\t\t\tindexes.push(i);\n\t\t\t}\n\t\t}\n\t\tif (indexes.length > 0) onRowsChange(updatedRows, {\n\t\t\tindexes,\n\t\t\tcolumn\n\t\t});\n\t}\n\t/**\n\t* utils\n\t*/\n\tfunction isColIdxWithinSelectionBounds(idx) {\n\t\treturn idx >= minColIdx && idx <= maxColIdx;\n\t}\n\tfunction isRowIdxWithinViewportBounds(rowIdx) {\n\t\treturn rowIdx >= 0 && rowIdx < rows.length;\n\t}\n\tfunction isCellWithinSelectionBounds({ idx, rowIdx }) {\n\t\treturn rowIdx >= minRowIdx && rowIdx <= maxRowIdx && isColIdxWithinSelectionBounds(idx);\n\t}\n\tfunction isCellWithinEditBounds({ idx, rowIdx }) {\n\t\treturn isRowIdxWithinViewportBounds(rowIdx) && idx >= 0 && idx <= maxColIdx;\n\t}\n\tfunction isCellWithinViewportBounds({ idx, rowIdx }) {\n\t\treturn isRowIdxWithinViewportBounds(rowIdx) && isColIdxWithinSelectionBounds(idx);\n\t}\n\tfunction isCellEditable(position) {\n\t\treturn isCellWithinEditBounds(position) && isSelectedCellEditable({\n\t\t\tcolumns,\n\t\t\trows,\n\t\t\tselectedPosition: position\n\t\t});\n\t}\n\tfunction selectCell(position, options) {\n\t\tif (!isCellWithinSelectionBounds(position)) return;\n\t\tcommitEditorChanges();\n\t\tconst samePosition = isSamePosition(selectedPosition, position);\n\t\tif (options?.enableEditor && isCellEditable(position)) {\n\t\t\tconst row$1 = rows[position.rowIdx];\n\t\t\tsetSelectedPosition({\n\t\t\t\t...position,\n\t\t\t\tmode: \"EDIT\",\n\t\t\t\trow: row$1,\n\t\t\t\toriginalRow: row$1\n\t\t\t});\n\t\t} else if (samePosition) scrollIntoView(getCellToScroll(gridRef.current));\n\t\telse {\n\t\t\tsetShouldFocusCell(options?.shouldFocusCell === true);\n\t\t\tsetSelectedPosition({\n\t\t\t\t...position,\n\t\t\t\tmode: \"SELECT\"\n\t\t\t});\n\t\t}\n\t\tif (onSelectedCellChange && !samePosition) onSelectedCellChange({\n\t\t\trowIdx: position.rowIdx,\n\t\t\trow: isRowIdxWithinViewportBounds(position.rowIdx) ? rows[position.rowIdx] : void 0,\n\t\t\tcolumn: columns[position.idx]\n\t\t});\n\t}\n\tfunction selectHeaderCell({ idx, rowIdx }) {\n\t\tselectCell({\n\t\t\trowIdx: minRowIdx + rowIdx - 1,\n\t\t\tidx\n\t\t});\n\t}\n\tfunction getNextPosition(key, ctrlKey, shiftKey) {\n\t\tconst { idx, rowIdx } = selectedPosition;\n\t\tconst isRowSelected = selectedCellIsWithinSelectionBounds && idx === -1;\n\t\tswitch (key) {\n\t\t\tcase \"ArrowUp\": return {\n\t\t\t\tidx,\n\t\t\t\trowIdx: rowIdx - 1\n\t\t\t};\n\t\t\tcase \"ArrowDown\": return {\n\t\t\t\tidx,\n\t\t\t\trowIdx: rowIdx + 1\n\t\t\t};\n\t\t\tcase leftKey: return {\n\t\t\t\tidx: idx - 1,\n\t\t\t\trowIdx\n\t\t\t};\n\t\t\tcase rightKey: return {\n\t\t\t\tidx: idx + 1,\n\t\t\t\trowIdx\n\t\t\t};\n\t\t\tcase \"Tab\": return {\n\t\t\t\tidx: idx + (shiftKey ? -1 : 1),\n\t\t\t\trowIdx\n\t\t\t};\n\t\t\tcase \"Home\":\n\t\t\t\tif (isRowSelected) return {\n\t\t\t\t\tidx,\n\t\t\t\t\trowIdx: minRowIdx\n\t\t\t\t};\n\t\t\t\treturn {\n\t\t\t\t\tidx: 0,\n\t\t\t\t\trowIdx: ctrlKey ? minRowIdx : rowIdx\n\t\t\t\t};\n\t\t\tcase \"End\":\n\t\t\t\tif (isRowSelected) return {\n\t\t\t\t\tidx,\n\t\t\t\t\trowIdx: maxRowIdx\n\t\t\t\t};\n\t\t\t\treturn {\n\t\t\t\t\tidx: maxColIdx,\n\t\t\t\t\trowIdx: ctrlKey ? maxRowIdx : rowIdx\n\t\t\t\t};\n\t\t\tcase \"PageUp\": {\n\t\t\t\tif (selectedPosition.rowIdx === minRowIdx) return selectedPosition;\n\t\t\t\tconst nextRowY = getRowTop(rowIdx) + getRowHeight(rowIdx) - clientHeight;\n\t\t\t\treturn {\n\t\t\t\t\tidx,\n\t\t\t\t\trowIdx: nextRowY > 0 ? findRowIdx(nextRowY) : 0\n\t\t\t\t};\n\t\t\t}\n\t\t\tcase \"PageDown\": {\n\t\t\t\tif (selectedPosition.rowIdx >= rows.length) return selectedPosition;\n\t\t\t\tconst nextRowY = getRowTop(rowIdx) + clientHeight;\n\t\t\t\treturn {\n\t\t\t\t\tidx,\n\t\t\t\t\trowIdx: nextRowY < totalRowHeight ? findRowIdx(nextRowY) : rows.length - 1\n\t\t\t\t};\n\t\t\t}\n\t\t\tdefault: return selectedPosition;\n\t\t}\n\t}\n\tfunction navigate(event) {\n\t\tconst { key, shiftKey } = event;\n\t\tlet cellNavigationMode = \"NONE\";\n\t\tif (key === \"Tab\") {\n\t\t\tif (canExitGrid({\n\t\t\t\tshiftKey,\n\t\t\t\tmaxColIdx,\n\t\t\t\tminRowIdx,\n\t\t\t\tmaxRowIdx,\n\t\t\t\tselectedPosition\n\t\t\t})) {\n\t\t\t\tcommitEditorChanges();\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tcellNavigationMode = \"CHANGE_ROW\";\n\t\t}\n\t\tevent.preventDefault();\n\t\tconst ctrlKey = isCtrlKeyHeldDown(event);\n\t\tconst nextPosition = getNextPosition(key, ctrlKey, shiftKey);\n\t\tif (isSamePosition(selectedPosition, nextPosition)) return;\n\t\tconst nextSelectedCellPosition = getNextSelectedCellPosition({\n\t\t\tmoveUp: key === \"ArrowUp\",\n\t\t\tmoveNext: key === rightKey || key === \"Tab\" && !shiftKey,\n\t\t\tcolumns,\n\t\t\tcolSpanColumns,\n\t\t\trows,\n\t\t\ttopSummaryRows,\n\t\t\tbottomSummaryRows,\n\t\t\tminRowIdx,\n\t\t\tmainHeaderRowIdx,\n\t\t\tmaxRowIdx,\n\t\t\tlastFrozenColumnIndex,\n\t\t\tcellNavigationMode,\n\t\t\tcurrentPosition: selectedPosition,\n\t\t\tnextPosition,\n\t\t\tisCellWithinBounds: isCellWithinSelectionBounds\n\t\t});\n\t\tselectCell(nextSelectedCellPosition, { shouldFocusCell: true });\n\t}\n\tfunction getDraggedOverCellIdx(currentRowIdx) {\n\t\tif (draggedOverRowIdx === void 0) return;\n\t\tconst { rowIdx } = selectedPosition;\n\t\tconst isDraggedOver = rowIdx < draggedOverRowIdx ? rowIdx < currentRowIdx && currentRowIdx <= draggedOverRowIdx : rowIdx > currentRowIdx && currentRowIdx >= draggedOverRowIdx;\n\t\treturn isDraggedOver ? selectedPosition.idx : void 0;\n\t}\n\tfunction getDragHandle() {\n\t\tif (onFill == null || selectedPosition.mode === \"EDIT\" || !isCellWithinViewportBounds(selectedPosition)) return;\n\t\tconst { idx, rowIdx } = selectedPosition;\n\t\tconst column = columns[idx];\n\t\tif (column.renderEditCell == null || column.editable === false) return;\n\t\tconst isLastRow = rowIdx === maxRowIdx;\n\t\tconst columnWidth = getColumnWidth(column);\n\t\tconst colSpan = column.colSpan?.({\n\t\t\ttype: \"ROW\",\n\t\t\trow: rows[rowIdx]\n\t\t}) ?? 1;\n\t\tconst { insetInlineStart,...style$1 } = getCellStyle(column, colSpan);\n\t\tconst marginEnd = \"calc(var(--rdg-drag-handle-size) * -0.5 + 1px)\";\n\t\tconst isLastColumn = column.idx + colSpan - 1 === maxColIdx;\n\t\tconst dragHandleStyle = {\n\t\t\t...style$1,\n\t\t\tgridRowStart: headerAndTopSummaryRowsCount + rowIdx + 1,\n\t\t\tmarginInlineEnd: isLastColumn ? void 0 : marginEnd,\n\t\t\tmarginBlockEnd: isLastRow ? void 0 : marginEnd,\n\t\t\tinsetInlineStart: insetInlineStart ? `calc(${insetInlineStart} + ${columnWidth}px + var(--rdg-drag-handle-size) * -0.5 - 1px)` : void 0\n\t\t};\n\t\treturn /* @__PURE__ */ jsx(\"div\", {\n\t\t\tstyle: dragHandleStyle,\n\t\t\tclassName: clsx(cellDragHandleClassname, column.frozen && cellDragHandleFrozenClassname),\n\t\t\tonPointerDown: handleDragHandlePointerDown,\n\t\t\tonPointerMove: isDragging ? handleDragHandlePointerMove : void 0,\n\t\t\tonLostPointerCapture: isDragging ? handleDragHandleLostPointerCapture : void 0,\n\t\t\tonClick: handleDragHandleClick,\n\t\t\tonDoubleClick: handleDragHandleDoubleClick\n\t\t});\n\t}\n\tfunction getCellEditor(rowIdx) {\n\t\tif (selectedPosition.rowIdx !== rowIdx || selectedPosition.mode === \"SELECT\") return;\n\t\tconst { idx, row: row$1 } = selectedPosition;\n\t\tconst column = columns[idx];\n\t\tconst colSpan = getColSpan(column, lastFrozenColumnIndex, {\n\t\t\ttype: \"ROW\",\n\t\t\trow: row$1\n\t\t});\n\t\tconst closeOnExternalRowChange = column.editorOptions?.closeOnExternalRowChange ?? true;\n\t\tconst closeEditor = (shouldFocusCell$1) => {\n\t\t\tsetShouldFocusCell(shouldFocusCell$1);\n\t\t\tsetSelectedPosition(({ idx: idx$1, rowIdx: rowIdx$1 }) => ({\n\t\t\t\tidx: idx$1,\n\t\t\t\trowIdx: rowIdx$1,\n\t\t\t\tmode: \"SELECT\"\n\t\t\t}));\n\t\t};\n\t\tconst onRowChange = (row$2, commitChanges, shouldFocusCell$1) => {\n\t\t\tif (commitChanges) flushSync(() => {\n\t\t\t\tupdateRow(column, selectedPosition.rowIdx, row$2);\n\t\t\t\tcloseEditor(shouldFocusCell$1);\n\t\t\t});\n\t\t\telse setSelectedPosition((position) => ({\n\t\t\t\t...position,\n\t\t\t\trow: row$2\n\t\t\t}));\n\t\t};\n\t\tif (closeOnExternalRowChange && rows[selectedPosition.rowIdx] !== selectedPosition.originalRow) closeEditor(false);\n\t\treturn /* @__PURE__ */ jsx(EditCell, {\n\t\t\tcolumn,\n\t\t\tcolSpan,\n\t\t\trow: row$1,\n\t\t\trowIdx,\n\t\t\tonRowChange,\n\t\t\tcloseEditor,\n\t\t\tonKeyDown: onCellKeyDown,\n\t\t\tnavigate\n\t\t}, column.key);\n\t}\n\tfunction getRowViewportColumns(rowIdx) {\n\t\tconst selectedColumn = selectedPosition.idx === -1 ? void 0 : columns[selectedPosition.idx];\n\t\tif (selectedColumn !== void 0 && selectedPosition.rowIdx === rowIdx && !viewportColumns.includes(selectedColumn)) return selectedPosition.idx > colOverscanEndIdx ? [...viewportColumns, selectedColumn] : [\n\t\t\t...viewportColumns.slice(0, lastFrozenColumnIndex + 1),\n\t\t\tselectedColumn,\n\t\t\t...viewportColumns.slice(lastFrozenColumnIndex + 1)\n\t\t];\n\t\treturn viewportColumns;\n\t}\n\tfunction getViewportRows() {\n\t\tconst rowElements = [];\n\t\tconst { idx: selectedIdx, rowIdx: selectedRowIdx } = selectedPosition;\n\t\tconst startRowIdx = selectedCellIsWithinViewportBounds && selectedRowIdx < rowOverscanStartIdx ? rowOverscanStartIdx - 1 : rowOverscanStartIdx;\n\t\tconst endRowIdx = selectedCellIsWithinViewportBounds && selectedRowIdx > rowOverscanEndIdx ? rowOverscanEndIdx + 1 : rowOverscanEndIdx;\n\t\tfor (let viewportRowIdx = startRowIdx; viewportRowIdx <= endRowIdx; viewportRowIdx++) {\n\t\t\tconst isRowOutsideViewport = viewportRowIdx === rowOverscanStartIdx - 1 || viewportRowIdx === rowOverscanEndIdx + 1;\n\t\t\tconst rowIdx = isRowOutsideViewport ? selectedRowIdx : viewportRowIdx;\n\t\t\tlet rowColumns = viewportColumns;\n\t\t\tconst selectedColumn = selectedIdx === -1 ? void 0 : columns[selectedIdx];\n\t\t\tif (selectedColumn !== void 0) if (isRowOutsideViewport) rowColumns = [selectedColumn];\n\t\t\telse rowColumns = getRowViewportColumns(rowIdx);\n\t\t\tconst row$1 = rows[rowIdx];\n\t\t\tconst gridRowStart = headerAndTopSummaryRowsCount + rowIdx + 1;\n\t\t\tlet key = rowIdx;\n\t\t\tlet isRowSelected = false;\n\t\t\tif (typeof rowKeyGetter === \"function\") {\n\t\t\t\tkey = rowKeyGetter(row$1);\n\t\t\t\tisRowSelected = selectedRows?.has(key) ?? false;\n\t\t\t}\n\t\t\trowElements.push(renderRow(key, {\n\t\t\t\t\"aria-rowindex\": headerAndTopSummaryRowsCount + rowIdx + 1,\n\t\t\t\t\"aria-selected\": isSelectable ? isRowSelected : void 0,\n\t\t\t\trowIdx,\n\t\t\t\trow: row$1,\n\t\t\t\tviewportColumns: rowColumns,\n\t\t\t\tisRowSelectionDisabled: isRowSelectionDisabled?.(row$1) ?? false,\n\t\t\t\tisRowSelected,\n\t\t\t\tonCellMouseDown: onCellMouseDownLatest,\n\t\t\t\tonCellClick: onCellClickLatest,\n\t\t\t\tonCellDoubleClick: onCellDoubleClickLatest,\n\t\t\t\tonCellContextMenu: onCellContextMenuLatest,\n\t\t\t\trowClass,\n\t\t\t\tgridRowStart,\n\t\t\t\tselectedCellIdx: selectedRowIdx === rowIdx ? selectedIdx : void 0,\n\t\t\t\tdraggedOverCellIdx: getDraggedOverCellIdx(rowIdx),\n\t\t\t\tlastFrozenColumnIndex,\n\t\t\t\tonRowChange: handleFormatterRowChangeLatest,\n\t\t\t\tselectCell: selectCellLatest,\n\t\t\t\tselectedCellEditor: getCellEditor(rowIdx)\n\t\t\t}));\n\t\t}\n\t\treturn rowElements;\n\t}\n\tif (selectedPosition.idx > maxColIdx || selectedPosition.rowIdx > maxRowIdx) {\n\t\tsetSelectedPosition({\n\t\t\tidx: -1,\n\t\t\trowIdx: minRowIdx - 1,\n\t\t\tmode: \"SELECT\"\n\t\t});\n\t\tsetDraggedOverRowIdx(void 0);\n\t}\n\tif (isColumnWidthsControlled && columnWidthsInternal !== columnWidthsRaw) setColumnWidthsInternal(columnWidthsRaw);\n\tlet templateRows = `repeat(${headerRowsCount}, ${headerRowHeight}px)`;\n\tif (topSummaryRowsCount > 0) templateRows += ` repeat(${topSummaryRowsCount}, ${summaryRowHeight}px)`;\n\tif (rows.length > 0) templateRows += gridTemplateRows;\n\tif (bottomSummaryRowsCount > 0) templateRows += ` repeat(${bottomSummaryRowsCount}, ${summaryRowHeight}px)`;\n\tconst isGroupRowFocused = selectedPosition.idx === -1 && selectedPosition.rowIdx !== minRowIdx - 1;\n\treturn /* @__PURE__ */ jsxs(\"div\", {\n\t\trole,\n\t\t\"aria-label\": ariaLabel,\n\t\t\"aria-labelledby\": ariaLabelledBy,\n\t\t\"aria-description\": ariaDescription,\n\t\t\"aria-describedby\": ariaDescribedBy,\n\t\t\"aria-multiselectable\": isSelectable ? true : void 0,\n\t\t\"aria-colcount\": columns.length,\n\t\t\"aria-rowcount\": ariaRowCount,\n\t\ttabIndex: -1,\n\t\tclassName: clsx(rootClassname, { [viewportDraggingClassname]: isDragging }, className),\n\t\tstyle: {\n\t\t\t...style,\n\t\t\tscrollPaddingInlineStart: selectedPosition.idx > lastFrozenColumnIndex || scrollToPosition?.idx !== void 0 ? `${totalFrozenColumnWidth}px` : void 0,\n\t\t\tscrollPaddingBlock: isRowIdxWithinViewportBounds(selectedPosition.rowIdx) || scrollToPosition?.rowIdx !== void 0 ? `${headerRowsHeight + topSummaryRowsCount * summaryRowHeight}px ${bottomSummaryRowsCount * summaryRowHeight}px` : void 0,\n\t\t\tgridTemplateColumns,\n\t\t\tgridTemplateRows: templateRows,\n\t\t\t\"--rdg-header-row-height\": `${headerRowHeight}px`,\n\t\t\t\"--rdg-scroll-height\": `${scrollHeight}px`,\n\t\t\t...layoutCssVars\n\t\t},\n\t\tdir: direction,\n\t\tref: gridRef,\n\t\tonScroll: handleScroll,\n\t\tonKeyDown: handleKeyDown,\n\t\tonCopy: handleCellCopy,\n\t\tonPaste: handleCellPaste,\n\t\t\"data-testid\": testId,\n\t\t\"data-cy\": dataCy,\n\t\tchildren: [\n\t\t\t/* @__PURE__ */ jsxs(DataGridDefaultRenderersContext.Provider, {\n\t\t\t\tvalue: defaultGridComponents,\n\t\t\t\tchildren: [/* @__PURE__ */ jsx(HeaderRowSelectionChangeContext.Provider, {\n\t\t\t\t\tvalue: selectHeaderRowLatest,\n\t\t\t\t\tchildren: /* @__PURE__ */ jsxs(HeaderRowSelectionContext.Provider, {\n\t\t\t\t\t\tvalue: headerSelectionValue,\n\t\t\t\t\t\tchildren: [Array.from({ length: groupedColumnHeaderRowsCount }, (_, index) => /* @__PURE__ */ jsx(GroupedColumnHeaderRow_default, {\n\t\t\t\t\t\t\trowIdx: index + 1,\n\t\t\t\t\t\t\tlevel: -groupedColumnHeaderRowsCount + index,\n\t\t\t\t\t\t\tcolumns: getRowViewportColumns(minRowIdx + index),\n\t\t\t\t\t\t\tselectedCellIdx: selectedPosition.rowIdx === minRowIdx + index ? selectedPosition.idx : void 0,\n\t\t\t\t\t\t\tselectCell: selectHeaderCellLatest\n\t\t\t\t\t\t}, index)), /* @__PURE__ */ jsx(HeaderRow_default, {\n\t\t\t\t\t\t\theaderRowClass,\n\t\t\t\t\t\t\trowIdx: headerRowsCount,\n\t\t\t\t\t\t\tcolumns: getRowViewportColumns(mainHeaderRowIdx),\n\t\t\t\t\t\t\tonColumnResize: handleColumnResizeLatest,\n\t\t\t\t\t\t\tonColumnResizeEnd: handleColumnResizeEndLatest,\n\t\t\t\t\t\t\tonColumnsReorder: onColumnsReorderLastest,\n\t\t\t\t\t\t\tsortColumns,\n\t\t\t\t\t\t\tonSortColumnsChange: onSortColumnsChangeLatest,\n\t\t\t\t\t\t\tlastFrozenColumnIndex,\n\t\t\t\t\t\t\tselectedCellIdx: selectedPosition.rowIdx === mainHeaderRowIdx ? selectedPosition.idx : void 0,\n\t\t\t\t\t\t\tselectCell: selectHeaderCellLatest,\n\t\t\t\t\t\t\tshouldFocusGrid: !selectedCellIsWithinSelectionBounds,\n\t\t\t\t\t\t\tdirection\n\t\t\t\t\t\t})]\n\t\t\t\t\t})\n\t\t\t\t}), rows.length === 0 && noRowsFallback ? noRowsFallback : /* @__PURE__ */ jsxs(Fragment, { children: [\n\t\t\t\t\ttopSummaryRows?.map((row$1, rowIdx) => {\n\t\t\t\t\t\tconst gridRowStart = headerRowsCount + 1 + rowIdx;\n\t\t\t\t\t\tconst summaryRowIdx = mainHeaderRowIdx + 1 + rowIdx;\n\t\t\t\t\t\tconst isSummaryRowSelected = selectedPosition.rowIdx === summaryRowIdx;\n\t\t\t\t\t\tconst top = headerRowsHeight + summaryRowHeight * rowIdx;\n\t\t\t\t\t\treturn /* @__PURE__ */ jsx(SummaryRow_default, {\n\t\t\t\t\t\t\t\"aria-rowindex\": gridRowStart,\n\t\t\t\t\t\t\trowIdx: summaryRowIdx,\n\t\t\t\t\t\t\tgridRowStart,\n\t\t\t\t\t\t\trow: row$1,\n\t\t\t\t\t\t\ttop,\n\t\t\t\t\t\t\tbottom: void 0,\n\t\t\t\t\t\t\tviewportColumns: getRowViewportColumns(summaryRowIdx),\n\t\t\t\t\t\t\tlastFrozenColumnIndex,\n\t\t\t\t\t\t\tselectedCellIdx: isSummaryRowSelected ? selectedPosition.idx : void 0,\n\t\t\t\t\t\t\tisTop: true,\n\t\t\t\t\t\t\tselectCell: selectCellLatest\n\t\t\t\t\t\t}, rowIdx);\n\t\t\t\t\t}),\n\t\t\t\t\t/* @__PURE__ */ jsx(RowSelectionChangeContext.Provider, {\n\t\t\t\t\t\tvalue: selectRowLatest,\n\t\t\t\t\t\tchildren: getViewportRows()\n\t\t\t\t\t}),\n\t\t\t\t\tbottomSummaryRows?.map((row$1, rowIdx) => {\n\t\t\t\t\t\tconst gridRowStart = headerAndTopSummaryRowsCount + rows.length + rowIdx + 1;\n\t\t\t\t\t\tconst summaryRowIdx = rows.length + rowIdx;\n\t\t\t\t\t\tconst isSummaryRowSelected = selectedPosition.rowIdx === summaryRowIdx;\n\t\t\t\t\t\tconst top = clientHeight > totalRowHeight ? gridHeight - summaryRowHeight * (bottomSummaryRows.length - rowIdx) : void 0;\n\t\t\t\t\t\tconst bottom = top === void 0 ? summaryRowHeight * (bottomSummaryRows.length - 1 - rowIdx) : void 0;\n\t\t\t\t\t\treturn /* @__PURE__ */ jsx(SummaryRow_default, {\n\t\t\t\t\t\t\t\"aria-rowindex\": ariaRowCount - bottomSummaryRowsCount + rowIdx + 1,\n\t\t\t\t\t\t\trowIdx: summaryRowIdx,\n\t\t\t\t\t\t\tgridRowStart,\n\t\t\t\t\t\t\trow: row$1,\n\t\t\t\t\t\t\ttop,\n\t\t\t\t\t\t\tbottom,\n\t\t\t\t\t\t\tviewportColumns: getRowViewportColumns(summaryRowIdx),\n\t\t\t\t\t\t\tlastFrozenColumnIndex,\n\t\t\t\t\t\t\tselectedCellIdx: isSummaryRowSelected ? selectedPosition.idx : void 0,\n\t\t\t\t\t\t\tisTop: false,\n\t\t\t\t\t\t\tselectCell: selectCellLatest\n\t\t\t\t\t\t}, rowIdx);\n\t\t\t\t\t})\n\t\t\t\t] })]\n\t\t\t}),\n\t\t\tgetDragHandle(),\n\t\t\trenderMeasuringCells(viewportColumns),\n\t\t\tisTreeGrid && /* @__PURE__ */ jsx(\"div\", {\n\t\t\t\tref: focusSinkRef,\n\t\t\t\ttabIndex: isGroupRowFocused ? 0 : -1,\n\t\t\t\tclassName: clsx(focusSinkClassname, {\n\t\t\t\t\t[focusSinkHeaderAndSummaryClassname]: !isRowIdxWithinViewportBounds(selectedPosition.rowIdx),\n\t\t\t\t\t[rowSelected]: isGroupRowFocused,\n\t\t\t\t\t[rowSelectedWithFrozenCell]: isGroupRowFocused && lastFrozenColumnIndex !== -1\n\t\t\t\t}),\n\t\t\t\tstyle: { gridRowStart: selectedPosition.rowIdx + headerAndTopSummaryRowsCount + 1 }\n\t\t\t}),\n\t\t\tscrollToPosition !== null && /* @__PURE__ */ jsx(ScrollToCell, {\n\t\t\t\tscrollToPosition,\n\t\t\t\tsetScrollToCellPosition: setScrollToPosition,\n\t\t\t\tgridRef\n\t\t\t})\n\t\t]\n\t});\n}\nconst DataGrid = forwardRef(DataGridBase);\nfunction getCellToScroll(gridEl) {\n\treturn gridEl.querySelector(\":scope > [role=\\\"row\\\"] > [tabindex=\\\"0\\\"]\");\n}\nfunction isSamePosition(p1, p2) {\n\treturn p1.idx === p2.idx && p1.rowIdx === p2.rowIdx;\n}\n\n//#endregion\n//#region src/GroupCell.tsx\nfunction GroupCell({ id, groupKey, childRows, isExpanded, isCellSelected, column, row: row$1, groupColumnIndex, isGroupByColumn, toggleGroup: toggleGroupWrapper }) {\n\tconst { tabIndex, childTabIndex, onFocus } = useRovingTabIndex(isCellSelected);\n\tfunction toggleGroup() {\n\t\ttoggleGroupWrapper(id);\n\t}\n\tconst isLevelMatching = isGroupByColumn && groupColumnIndex === column.idx;\n\treturn /* @__PURE__ */ jsx(\"div\", {\n\t\trole: \"gridcell\",\n\t\t\"aria-colindex\": column.idx + 1,\n\t\t\"aria-selected\": isCellSelected,\n\t\ttabIndex,\n\t\tclassName: getCellClassname(column),\n\t\tstyle: {\n\t\t\t...getCellStyle(column),\n\t\t\tcursor: isLevelMatching ? \"pointer\" : \"default\"\n\t\t},\n\t\tonMouseDown: (event) => {\n\t\t\tevent.preventDefault();\n\t\t},\n\t\tonClick: isLevelMatching ? toggleGroup : void 0,\n\t\tonFocus,\n\t\tchildren: (!isGroupByColumn || isLevelMatching) && column.renderGroupCell?.({\n\t\t\tgroupKey,\n\t\t\tchildRows,\n\t\t\tcolumn,\n\t\t\trow: row$1,\n\t\t\tisExpanded,\n\t\t\ttabIndex: childTabIndex,\n\t\t\ttoggleGroup\n\t\t})\n\t}, column.key);\n}\nvar GroupCell_default = memo(GroupCell);\n\n//#endregion\n//#region src/GroupRow.tsx\nconst groupRow = \"g1yxluv37-0-0-beta-56\";\nconst groupRowClassname = `rdg-group-row ${groupRow}`;\nfunction GroupedRow({ className, row: row$1, rowIdx, viewportColumns, selectedCellIdx, isRowSelected, selectCell, gridRowStart, groupBy, toggleGroup, isRowSelectionDisabled,...props }) {\n\tconst idx = viewportColumns[0].key === SELECT_COLUMN_KEY ? row$1.level + 1 : row$1.level;\n\tfunction handleSelectGroup() {\n\t\tselectCell({\n\t\t\trowIdx,\n\t\t\tidx: -1\n\t\t}, { shouldFocusCell: true });\n\t}\n\tconst selectionValue = useMemo(() => ({\n\t\tisRowSelectionDisabled: false,\n\t\tisRowSelected\n\t}), [isRowSelected]);\n\treturn /* @__PURE__ */ jsx(RowSelectionContext.Provider, {\n\t\tvalue: selectionValue,\n\t\tchildren: /* @__PURE__ */ jsx(\"div\", {\n\t\t\trole: \"row\",\n\t\t\t\"aria-level\": row$1.level + 1,\n\t\t\t\"aria-setsize\": row$1.setSize,\n\t\t\t\"aria-posinset\": row$1.posInSet + 1,\n\t\t\t\"aria-expanded\": row$1.isExpanded,\n\t\t\tclassName: clsx(rowClassname, groupRowClassname, `rdg-row-${rowIdx % 2 === 0 ? \"even\" : \"odd\"}`, selectedCellIdx === -1 && rowSelectedClassname, className),\n\t\t\tonMouseDown: handleSelectGroup,\n\t\t\tstyle: getRowStyle(gridRowStart),\n\t\t\t...props,\n\t\t\tchildren: viewportColumns.map((column) => /* @__PURE__ */ jsx(GroupCell_default, {\n\t\t\t\tid: row$1.id,\n\t\t\t\tgroupKey: row$1.groupKey,\n\t\t\t\tchildRows: row$1.childRows,\n\t\t\t\tisExpanded: row$1.isExpanded,\n\t\t\t\tisCellSelected: selectedCellIdx === column.idx,\n\t\t\t\tcolumn,\n\t\t\t\trow: row$1,\n\t\t\t\tgroupColumnIndex: idx,\n\t\t\t\ttoggleGroup,\n\t\t\t\tisGroupByColumn: groupBy.includes(column.key)\n\t\t\t}, column.key))\n\t\t})\n\t});\n}\nvar GroupRow_default = memo(GroupedRow);\n\n//#endregion\n//#region src/TreeDataGrid.tsx\nfunction TreeDataGrid({ columns: rawColumns, rows: rawRows, rowHeight: rawRowHeight, rowKeyGetter: rawRowKeyGetter, onCellKeyDown: rawOnCellKeyDown, onCellCopy: rawOnCellCopy, onCellPaste: rawOnCellPaste, onRowsChange, selectedRows: rawSelectedRows, onSelectedRowsChange: rawOnSelectedRowsChange, renderers, groupBy: rawGroupBy, rowGrouper, expandedGroupIds, onExpandedGroupIdsChange, groupIdGetter: rawGroupIdGetter,...props }) {\n\tconst defaultRenderers = useDefaultRenderers();\n\tconst rawRenderRow = renderers?.renderRow ?? defaultRenderers?.renderRow ?? defaultRenderRow;\n\tconst headerAndTopSummaryRowsCount = 1 + (props.topSummaryRows?.length ?? 0);\n\tconst { leftKey, rightKey } = getLeftRightKey(props.direction);\n\tconst toggleGroupLatest = useLatestFunc(toggleGroup);\n\tconst groupIdGetter = rawGroupIdGetter ?? defaultGroupIdGetter;\n\tconst { columns, groupBy } = useMemo(() => {\n\t\tconst columns$1 = rawColumns.toSorted(({ key: aKey }, { key: bKey }) => {\n\t\t\tif (aKey === SELECT_COLUMN_KEY) return -1;\n\t\t\tif (bKey === SELECT_COLUMN_KEY) return 1;\n\t\t\tif (rawGroupBy.includes(aKey)) {\n\t\t\t\tif (rawGroupBy.includes(bKey)) return rawGroupBy.indexOf(aKey) - rawGroupBy.indexOf(bKey);\n\t\t\t\treturn -1;\n\t\t\t}\n\t\t\tif (rawGroupBy.includes(bKey)) return 1;\n\t\t\treturn 0;\n\t\t});\n\t\tconst groupBy$1 = [];\n\t\tfor (const [index, column] of columns$1.entries()) if (rawGroupBy.includes(column.key)) {\n\t\t\tgroupBy$1.push(column.key);\n\t\t\tcolumns$1[index] = {\n\t\t\t\t...column,\n\t\t\t\tfrozen: true,\n\t\t\t\trenderCell: () => null,\n\t\t\t\trenderGroupCell: column.renderGroupCell ?? renderToggleGroup,\n\t\t\t\teditable: false\n\t\t\t};\n\t\t}\n\t\treturn {\n\t\t\tcolumns: columns$1,\n\t\t\tgroupBy: groupBy$1\n\t\t};\n\t}, [rawColumns, rawGroupBy]);\n\tconst [groupedRows, rowsCount] = useMemo(() => {\n\t\tif (groupBy.length === 0) return [void 0, rawRows.length];\n\t\tconst groupRows = (rows$1, [groupByKey, ...remainingGroupByKeys], startRowIndex) => {\n\t\t\tlet groupRowsCount = 0;\n\t\t\tconst groups = {};\n\t\t\tfor (const [key, childRows] of Object.entries(rowGrouper(rows$1, groupByKey))) {\n\t\t\t\tconst [childGroups, childRowsCount] = remainingGroupByKeys.length === 0 ? [childRows, childRows.length] : groupRows(childRows, remainingGroupByKeys, startRowIndex + groupRowsCount + 1);\n\t\t\t\tgroups[key] = {\n\t\t\t\t\tchildRows,\n\t\t\t\t\tchildGroups,\n\t\t\t\t\tstartRowIndex: startRowIndex + groupRowsCount\n\t\t\t\t};\n\t\t\t\tgroupRowsCount += childRowsCount + 1;\n\t\t\t}\n\t\t\treturn [groups, groupRowsCount];\n\t\t};\n\t\treturn groupRows(rawRows, groupBy, 0);\n\t}, [\n\t\tgroupBy,\n\t\trowGrouper,\n\t\trawRows\n\t]);\n\tconst [rows, isGroupRow] = useMemo(() => {\n\t\tconst allGroupRows = /* @__PURE__ */ new Set();\n\t\tif (!groupedRows) return [rawRows, isGroupRow$1];\n\t\tconst flattenedRows = [];\n\t\tconst expandGroup = (rows$1, parentId, level) => {\n\t\t\tif (isReadonlyArray(rows$1)) {\n\t\t\t\tflattenedRows.push(...rows$1);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tObject.keys(rows$1).forEach((groupKey, posInSet, keys) => {\n\t\t\t\tconst id = groupIdGetter(groupKey, parentId);\n\t\t\t\tconst isExpanded = expandedGroupIds.has(id);\n\t\t\t\tconst { childRows, childGroups, startRowIndex } = rows$1[groupKey];\n\t\t\t\tconst groupRow$1 = {\n\t\t\t\t\tid,\n\t\t\t\t\tparentId,\n\t\t\t\t\tgroupKey,\n\t\t\t\t\tisExpanded,\n\t\t\t\t\tchildRows,\n\t\t\t\t\tlevel,\n\t\t\t\t\tposInSet,\n\t\t\t\t\tstartRowIndex,\n\t\t\t\t\tsetSize: keys.length\n\t\t\t\t};\n\t\t\t\tflattenedRows.push(groupRow$1);\n\t\t\t\tallGroupRows.add(groupRow$1);\n\t\t\t\tif (isExpanded) expandGroup(childGroups, id, level + 1);\n\t\t\t});\n\t\t};\n\t\texpandGroup(groupedRows, void 0, 0);\n\t\treturn [flattenedRows, isGroupRow$1];\n\t\tfunction isGroupRow$1(row$1) {\n\t\t\treturn allGroupRows.has(row$1);\n\t\t}\n\t}, [\n\t\texpandedGroupIds,\n\t\tgroupedRows,\n\t\trawRows,\n\t\tgroupIdGetter\n\t]);\n\tconst rowHeight = useMemo(() => {\n\t\tif (typeof rawRowHeight === \"function\") return (row$1) => {\n\t\t\tif (isGroupRow(row$1)) return rawRowHeight({\n\t\t\t\ttype: \"GROUP\",\n\t\t\t\trow: row$1\n\t\t\t});\n\t\t\treturn rawRowHeight({\n\t\t\t\ttype: \"ROW\",\n\t\t\t\trow: row$1\n\t\t\t});\n\t\t};\n\t\treturn rawRowHeight;\n\t}, [isGroupRow, rawRowHeight]);\n\tconst getParentRowAndIndex = useCallback((row$1) => {\n\t\tconst rowIdx = rows.indexOf(row$1);\n\t\tfor (let i = rowIdx - 1; i >= 0; i--) {\n\t\t\tconst parentRow = rows[i];\n\t\t\tif (isGroupRow(parentRow) && (!isGroupRow(row$1) || row$1.parentId === parentRow.id)) return [parentRow, i];\n\t\t}\n\t\treturn void 0;\n\t}, [isGroupRow, rows]);\n\tconst rowKeyGetter = useCallback((row$1) => {\n\t\tif (isGroupRow(row$1)) return row$1.id;\n\t\tif (typeof rawRowKeyGetter === \"function\") return rawRowKeyGetter(row$1);\n\t\tconst parentRowAndIndex = getParentRowAndIndex(row$1);\n\t\tif (parentRowAndIndex !== void 0) {\n\t\t\tconst { startRowIndex, childRows } = parentRowAndIndex[0];\n\t\t\tconst groupIndex = childRows.indexOf(row$1);\n\t\t\treturn startRowIndex + groupIndex + 1;\n\t\t}\n\t\treturn rows.indexOf(row$1);\n\t}, [\n\t\tgetParentRowAndIndex,\n\t\tisGroupRow,\n\t\trawRowKeyGetter,\n\t\trows\n\t]);\n\tconst selectedRows = useMemo(() => {\n\t\tif (rawSelectedRows == null) return null;\n\t\tassertIsValidKeyGetter(rawRowKeyGetter);\n\t\tconst selectedRows$1 = new Set(rawSelectedRows);\n\t\tfor (const row$1 of rows) if (isGroupRow(row$1)) {\n\t\t\tconst isGroupRowSelected = row$1.childRows.every((cr) => rawSelectedRows.has(rawRowKeyGetter(cr)));\n\t\t\tif (isGroupRowSelected) selectedRows$1.add(row$1.id);\n\t\t}\n\t\treturn selectedRows$1;\n\t}, [\n\t\tisGroupRow,\n\t\trawRowKeyGetter,\n\t\trawSelectedRows,\n\t\trows\n\t]);\n\tfunction onSelectedRowsChange(newSelectedRows) {\n\t\tif (!rawOnSelectedRowsChange) return;\n\t\tassertIsValidKeyGetter(rawRowKeyGetter);\n\t\tconst newRawSelectedRows = new Set(rawSelectedRows);\n\t\tfor (const row$1 of rows) {\n\t\t\tconst key = rowKeyGetter(row$1);\n\t\t\tif (selectedRows?.has(key) && !newSelectedRows.has(key)) if (isGroupRow(row$1)) for (const cr of row$1.childRows) newRawSelectedRows.delete(rawRowKeyGetter(cr));\n\t\t\telse newRawSelectedRows.delete(key);\n\t\t\telse if (!selectedRows?.has(key) && newSelectedRows.has(key)) if (isGroupRow(row$1)) for (const cr of row$1.childRows) newRawSelectedRows.add(rawRowKeyGetter(cr));\n\t\t\telse newRawSelectedRows.add(key);\n\t\t}\n\t\trawOnSelectedRowsChange(newRawSelectedRows);\n\t}\n\tfunction handleKeyDown(args, event) {\n\t\trawOnCellKeyDown?.(args, event);\n\t\tif (event.isGridDefaultPrevented()) return;\n\t\tif (args.mode === \"EDIT\") return;\n\t\tconst { column, rowIdx, selectCell } = args;\n\t\tconst idx = column?.idx ?? -1;\n\t\tconst row$1 = rows[rowIdx];\n\t\tif (!isGroupRow(row$1)) return;\n\t\tif (idx === -1 && (event.key === leftKey && row$1.isExpanded || event.key === rightKey && !row$1.isExpanded)) {\n\t\t\tevent.preventDefault();\n\t\t\tevent.preventGridDefault();\n\t\t\ttoggleGroup(row$1.id);\n\t\t}\n\t\tif (idx === -1 && event.key === leftKey && !row$1.isExpanded && row$1.level !== 0) {\n\t\t\tconst parentRowAndIndex = getParentRowAndIndex(row$1);\n\t\t\tif (parentRowAndIndex !== void 0) {\n\t\t\t\tevent.preventGridDefault();\n\t\t\t\tselectCell({\n\t\t\t\t\tidx,\n\t\t\t\t\trowIdx: parentRowAndIndex[1]\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\tfunction handleCellCopy({ row: row$1, column }, event) {\n\t\tif (!isGroupRow(row$1)) rawOnCellCopy?.({\n\t\t\trow: row$1,\n\t\t\tcolumn\n\t\t}, event);\n\t}\n\tfunction handleCellPaste({ row: row$1, column }, event) {\n\t\treturn isGroupRow(row$1) ? row$1 : rawOnCellPaste({\n\t\t\trow: row$1,\n\t\t\tcolumn\n\t\t}, event);\n\t}\n\tfunction handleRowsChange(updatedRows, { indexes, column }) {\n\t\tif (!onRowsChange) return;\n\t\tconst updatedRawRows = [...rawRows];\n\t\tconst rawIndexes = [];\n\t\tfor (const index of indexes) {\n\t\t\tconst rawIndex = rawRows.indexOf(rows[index]);\n\t\t\tupdatedRawRows[rawIndex] = updatedRows[index];\n\t\t\trawIndexes.push(rawIndex);\n\t\t}\n\t\tonRowsChange(updatedRawRows, {\n\t\t\tindexes: rawIndexes,\n\t\t\tcolumn\n\t\t});\n\t}\n\tfunction toggleGroup(groupId) {\n\t\tconst newExpandedGroupIds = new Set(expandedGroupIds);\n\t\tif (newExpandedGroupIds.has(groupId)) newExpandedGroupIds.delete(groupId);\n\t\telse newExpandedGroupIds.add(groupId);\n\t\tonExpandedGroupIdsChange(newExpandedGroupIds);\n\t}\n\tfunction renderRow(key, { row: row$1, rowClass, onCellMouseDown, onCellClick, onCellDoubleClick, onCellContextMenu, onRowChange, lastFrozenColumnIndex, draggedOverCellIdx, selectedCellEditor,...rowProps }) {\n\t\tif (isGroupRow(row$1)) {\n\t\t\tconst { startRowIndex } = row$1;\n\t\t\treturn /* @__PURE__ */ jsx(GroupRow_default, {\n\t\t\t\t...rowProps,\n\t\t\t\t\"aria-rowindex\": headerAndTopSummaryRowsCount + startRowIndex + 1,\n\t\t\t\trow: row$1,\n\t\t\t\tgroupBy,\n\t\t\t\ttoggleGroup: toggleGroupLatest\n\t\t\t}, key);\n\t\t}\n\t\tlet ariaRowIndex = rowProps[\"aria-rowindex\"];\n\t\tconst parentRowAndIndex = getParentRowAndIndex(row$1);\n\t\tif (parentRowAndIndex !== void 0) {\n\t\t\tconst { startRowIndex, childRows } = parentRowAndIndex[0];\n\t\t\tconst groupIndex = childRows.indexOf(row$1);\n\t\t\tariaRowIndex = startRowIndex + headerAndTopSummaryRowsCount + groupIndex + 2;\n\t\t}\n\t\treturn rawRenderRow(key, {\n\t\t\t...rowProps,\n\t\t\t\"aria-rowindex\": ariaRowIndex,\n\t\t\trow: row$1,\n\t\t\trowClass,\n\t\t\tonCellMouseDown,\n\t\t\tonCellClick,\n\t\t\tonCellDoubleClick,\n\t\t\tonCellContextMenu,\n\t\t\tonRowChange,\n\t\t\tlastFrozenColumnIndex,\n\t\t\tdraggedOverCellIdx,\n\t\t\tselectedCellEditor\n\t\t});\n\t}\n\treturn /* @__PURE__ */ jsx(DataGrid, {\n\t\t...props,\n\t\trole: \"treegrid\",\n\t\t\"aria-rowcount\": rowsCount + 1 + (props.topSummaryRows?.length ?? 0) + (props.bottomSummaryRows?.length ?? 0),\n\t\tcolumns,\n\t\trows,\n\t\trowHeight,\n\t\trowKeyGetter,\n\t\tonRowsChange: handleRowsChange,\n\t\tselectedRows,\n\t\tonSelectedRowsChange,\n\t\tonCellKeyDown: handleKeyDown,\n\t\tonCellCopy: handleCellCopy,\n\t\tonCellPaste: rawOnCellPaste ? handleCellPaste : void 0,\n\t\trenderers: {\n\t\t\t...renderers,\n\t\t\trenderRow\n\t\t}\n\t});\n}\nfunction defaultGroupIdGetter(groupKey, parentId) {\n\treturn parentId !== void 0 ? `${parentId}__${groupKey}` : groupKey;\n}\nfunction isReadonlyArray(arr) {\n\treturn Array.isArray(arr);\n}\n\n//#endregion\n//#region src/editors/textEditor.tsx\nconst textEditorInternalClassname = \"t7vyx3i7-0-0-beta-56\";\nconst textEditorClassname = `rdg-text-editor ${textEditorInternalClassname}`;\nfunction autoFocusAndSelect(input) {\n\tinput?.focus();\n\tinput?.select();\n}\nfunction textEditor({ row: row$1, column, onRowChange, onClose }) {\n\treturn /* @__PURE__ */ jsx(\"input\", {\n\t\tclassName: textEditorClassname,\n\t\tref: autoFocusAndSelect,\n\t\tvalue: row$1[column.key],\n\t\tonChange: (event) => onRowChange({\n\t\t\t...row$1,\n\t\t\t[column.key]: event.target.value\n\t\t}),\n\t\tonBlur: () => onClose(true, false)\n\t});\n}\n\n//#endregion\nexport { Cell_default as Cell, DataGrid, DataGridDefaultRenderersContext, Row_default as Row, SELECT_COLUMN_KEY, SelectCellFormatter, SelectColumn, ToggleGroup, TreeDataGrid, renderCheckbox, renderHeaderCell, renderSortIcon, renderSortPriority, renderToggleGroup, renderValue, textEditor, useHeaderRowSelection, useRowSelection };\n//# sourceMappingURL=index.js.map","/**\n* Copyright (c) 2025, Leon Sorokin\n* All rights reserved. (MIT Licensed)\n*\n* uWrap.js\n* A small, fast line wrapping thing for Canvas2D\n* https://github.com/leeoniya/uWrap (v0.1.2)\n*/\n\n// BREAKS\nconst D = \"-\".charCodeAt(0);\nconst S = \" \".charCodeAt(0);\nconst N = \"\\n\".charCodeAt(0);\n// const R = \"\\r\".charCodeAt(0); (TODO: support \\r\\n breaks)\n// const T = \"\\t\".charCodeAt(0);\nconst SYMBS = `\\`~!@#$%^&*()_+-=[]\\\\{}|;':\",./<>? \\t`;\nconst NUMS = \"1234567890\";\nconst UPPER = \"ABCDEFGHIJKLMNOPQRSTUVWXYZ\";\nconst LOWER = \"abcdefghijklmnopqrstuvwxyz\";\nconst CHARS = `${UPPER}${LOWER}${NUMS}${SYMBS}`;\nfunction supportsLetterSpacing(ctx) {\n    const _w = ctx.measureText('W').width;\n    const _letterSpacing = ctx.letterSpacing;\n    ctx.letterSpacing = '101px';\n    const w = ctx.measureText('W').width;\n    ctx.letterSpacing = _letterSpacing;\n    return w > _w;\n}\nfunction varPreLine(ctx) {\n    // Safari pre-18.4 does not support Canvas letterSpacing, and measureText() does not account for it\n    // so we have to add it manually. https://caniuse.com/mdn-api_canvasrenderingcontext2d_letterspacing\n    const fauxLetterSpacing = !supportsLetterSpacing(ctx) ? parseFloat(ctx.letterSpacing) : 0;\n    // single-char widths in isolation\n    const WIDTHS = {};\n    for (let i = 0; i < CHARS.length; i++)\n        WIDTHS[CHARS.charCodeAt(i)] = ctx.measureText(CHARS[i]).width + fauxLetterSpacing;\n    const wordSpacing = parseFloat(ctx.wordSpacing);\n    if (wordSpacing > 0)\n        WIDTHS[S] = wordSpacing;\n    // build kerning/spacing LUT of upper+lower, upper+sym, upper+upper pairs. (this includes letterSpacing)\n    // holds kerning-adjusted width of the uppers\n    const PAIRS = {};\n    for (let i = 0; i < UPPER.length; i++) {\n        let uc = UPPER.charCodeAt(i);\n        PAIRS[uc] = {};\n        for (let j = 0; j < CHARS.length; j++) {\n            let ch = CHARS.charCodeAt(j);\n            let wid = ctx.measureText(`${UPPER[i]}${CHARS[j]}`).width - WIDTHS[ch] + fauxLetterSpacing;\n            PAIRS[uc][ch] = wid;\n        }\n    }\n    const eachLine = () => { };\n    function each(text, width, cb = eachLine) {\n        let fr = 0;\n        while (text.charCodeAt(fr) === S)\n            fr++;\n        let to = text.length - 1;\n        while (text.charCodeAt(to) === S)\n            to--;\n        let headIdx = fr;\n        let headEnd = 0;\n        let headWid = 0;\n        let tailIdx = -1; // wrap candidate\n        let tailWid = 0;\n        let inWS = false;\n        for (let i = fr; i <= to; i++) {\n            let c = text.charCodeAt(i);\n            let w = 0;\n            if (c in PAIRS) {\n                let n = text.charCodeAt(i + 1);\n                if (n in PAIRS[c])\n                    w = PAIRS[c][n];\n            }\n            if (w === 0)\n                w = WIDTHS[c] ?? (WIDTHS[c] = ctx.measureText(text[i]).width);\n            if (c === S) { //  || c === T || c === N || c === R\n                // set possible wrap point\n                if (text.charCodeAt(i + 1) !== c) {\n                    tailIdx = i + 1;\n                    tailWid = 0;\n                }\n                if (!inWS && headWid > 0) {\n                    headWid += w;\n                    headEnd = i;\n                }\n                inWS = true;\n            }\n            else if (c === N) {\n                if (cb(headIdx, i) === false)\n                    return;\n                headIdx = headEnd = i + 1;\n                headWid = tailWid = 0;\n                tailWid = 0;\n                tailIdx = -1;\n            }\n            else {\n                if (headEnd > headIdx && headWid + w > width) {\n                    if (cb(headIdx, headEnd) === false)\n                        return;\n                    headWid = tailWid + w;\n                    headIdx = headEnd = tailIdx;\n                    tailWid = 0;\n                    tailIdx = -1;\n                }\n                else {\n                    if (c === D) {\n                        // set possible wrap point\n                        if (text.charCodeAt(i + 1) !== c) {\n                            tailIdx = headEnd = i + 1;\n                            tailWid = 0;\n                        }\n                    }\n                    headWid += w;\n                    tailWid += w;\n                }\n                inWS = false;\n            }\n        }\n        cb(headIdx, to + 1);\n    }\n    let mayWrap = /\\s|-/;\n    return {\n        each,\n        split: (text, width, limit = Infinity) => {\n            let out = [];\n            if (mayWrap.test(text)) {\n                each(text, width, (idx0, idx1) => {\n                    out.push(text.slice(idx0, idx1));\n                    if (out.length === limit)\n                        return false;\n                });\n            }\n            else {\n                out.push(text);\n            }\n            return out;\n        },\n        count: (text, width) => {\n            let count = 0;\n            if (mayWrap.test(text)) {\n                each(text, width, () => { count++; });\n            }\n            else {\n                count = 1;\n            }\n            return count;\n        },\n        test: (text, width) => {\n            let count = 0;\n            if (mayWrap.test(text)) {\n                each(text, width, () => {\n                    if (++count === 2)\n                        return false;\n                });\n            }\n            else {\n                count = 1;\n            }\n            return count === 2;\n        },\n    };\n}\n/*\nfunction isMonospace(ctx: CanvasRenderingContext2D) {\n  let w = ctx.measureText('.').width;\n  return ctx.measureText('i').width === w && ctx.measureText('.').width === w;\n}\n*/\n\nexport { varPreLine };\n","/** Column width and sizing configuration */\nexport const COLUMN = {\n  DEFAULT_WIDTH: 150,\n  EXPANDER_WIDTH: 50,\n  // This will need to eventually change to 36\n  MIN_WIDTH: 50,\n};\n\n/** Table layout and display constants */\nexport const TABLE = {\n  CELL_PADDING: 6,\n  LINE_HEIGHT: 22,\n  HEADER_ROW_HEIGHT: 28,\n  MAX_CELL_HEIGHT: 48,\n  PAGINATION_LIMIT: 750,\n  SCROLL_BAR_WIDTH: 8,\n  SCROLL_BAR_MARGIN: 2,\n  HEADER_HEIGHT: 28,\n  NESTED_NO_DATA_HEIGHT: 60,\n  BORDER_RIGHT: 1,\n};\n","import { css } from '@emotion/css';\nimport { Property } from 'csstype';\n\nimport { GrafanaTheme2, colorManipulator } from '@grafana/data';\n\nimport { COLUMN, TABLE } from './constants';\nimport { TableCellStyles } from './types';\nimport { getJustifyContent, TextAlign } from './utils';\n\nexport const getGridStyles = (theme: GrafanaTheme2, enablePagination?: boolean, transparent?: boolean) => {\n  const bgColor = transparent ? theme.colors.background.canvas : theme.colors.background.primary;\n  // this needs to be pre-calc'd since the theme colors have alpha and the border color becomes\n  // unpredictable for background color cells\n  const borderColor = colorManipulator.onBackground(theme.colors.border.weak, bgColor).toHexString();\n\n  return {\n    grid: css({\n      '--rdg-background-color': bgColor,\n      '--rdg-header-background-color': bgColor,\n      '--rdg-border-color': borderColor,\n      '--rdg-color': theme.colors.text.primary,\n      '--rdg-summary-border-color': borderColor,\n      '--rdg-summary-border-width': '1px',\n\n      '--rdg-selection-color': theme.colors.info.transparent,\n\n      // note: this cannot have any transparency since default cells that\n      // overlay/overflow on hover inherit this background and need to occlude cells below\n      '--rdg-row-background-color': bgColor,\n      '--rdg-row-hover-background-color': transparent\n        ? theme.colors.background.primary\n        : theme.colors.background.secondary,\n\n      // TODO: magic 32px number is unfortunate. it would be better to have the content\n      // flow using flexbox rather than hard-coding this size via a calc\n      blockSize: enablePagination ? 'calc(100% - 32px)' : '100%',\n      scrollbarWidth: 'thin',\n      scrollbarColor: theme.isDark ? '#fff5 #fff1' : '#0005 #0001',\n\n      border: 'none',\n\n      '.rdg-cell': {\n        padding: TABLE.CELL_PADDING,\n\n        '&:last-child': {\n          borderInlineEnd: 'none',\n        },\n      },\n\n      // add a box shadow on hover and selection for all body cells\n      '& > :not(.rdg-summary-row, .rdg-header-row) > .rdg-cell': {\n        [getActiveCellSelector()]: { boxShadow: theme.shadows.z2 },\n        // selected cells should appear below hovered cells.\n        '&:hover': { zIndex: theme.zIndex.tooltip - 7 },\n        '&[aria-selected=true]': { zIndex: theme.zIndex.tooltip - 6 },\n      },\n\n      '.rdg-cell.rdg-cell-frozen': {\n        backgroundColor: '--rdg-row-background-color',\n        zIndex: theme.zIndex.tooltip - 4,\n        '&:hover': { zIndex: theme.zIndex.tooltip - 2 },\n        '&[aria-selected=true]': { zIndex: theme.zIndex.tooltip - 3 },\n      },\n\n      '.rdg-header-row, .rdg-summary-row': {\n        '.rdg-cell': {\n          zIndex: theme.zIndex.tooltip - 5,\n          '&.rdg-cell-frozen': {\n            zIndex: theme.zIndex.tooltip - 1,\n          },\n        },\n      },\n\n      '.rdg-summary-row >': {\n        '.rdg-cell': {\n          // 0.75 padding causes \"jumping\" on hover.\n          paddingBlock: theme.spacing(0.625),\n        },\n        [getActiveCellSelector()]: {\n          whiteSpace: 'pre-line',\n          height: '100%',\n          minHeight: 'fit-content',\n          overflowY: 'visible',\n          boxShadow: theme.shadows.z2,\n        },\n      },\n    }),\n    gridNested: css({\n      height: '100%',\n      width: `calc(100% - ${COLUMN.EXPANDER_WIDTH - TABLE.CELL_PADDING * 2 - 1}px)`,\n      overflowX: 'scroll',\n      overflowY: 'hidden',\n      marginLeft: COLUMN.EXPANDER_WIDTH - TABLE.CELL_PADDING - 1,\n      marginBlock: TABLE.CELL_PADDING,\n    }),\n    cellNested: css({ '&[aria-selected=true]': { outline: 'none' } }),\n    noDataNested: css({\n      height: TABLE.NESTED_NO_DATA_HEIGHT,\n      display: 'flex',\n      alignItems: 'center',\n      justifyContent: 'center',\n      color: theme.colors.text.secondary,\n      fontSize: theme.typography.h4.fontSize,\n    }),\n    headerRow: css({\n      paddingBlockStart: 0,\n      fontWeight: 'normal',\n      '& .rdg-cell': { height: '100%', alignItems: 'flex-end' },\n    }),\n    displayNone: css({ display: 'none' }),\n    paginationContainer: css({\n      alignItems: 'center',\n      display: 'flex',\n      justifyContent: 'center',\n      marginTop: '8px',\n      width: '100%',\n    }),\n    paginationSummary: css({\n      color: theme.colors.text.secondary,\n      fontSize: theme.typography.bodySmall.fontSize,\n      display: 'flex',\n      justifyContent: 'flex-end',\n      padding: theme.spacing(0, 1, 0, 2),\n    }),\n    menuItem: css({ maxWidth: '200px' }),\n  };\n};\n\nexport const getHeaderCellStyles = (theme: GrafanaTheme2, justifyContent: Property.JustifyContent) =>\n  css({\n    display: 'flex',\n    gap: theme.spacing(0.5),\n    zIndex: theme.zIndex.tooltip - 1,\n    paddingInline: TABLE.CELL_PADDING,\n    paddingBlockEnd: TABLE.CELL_PADDING,\n    justifyContent,\n    '&:last-child': { borderInlineEnd: 'none' },\n  });\n\nexport const getDefaultCellStyles: TableCellStyles = (theme, { textAlign, shouldOverflow, maxHeight }) =>\n  css({\n    display: 'flex',\n    alignItems: 'center',\n    textAlign,\n    justifyContent: Boolean(maxHeight) ? 'flex-start' : getJustifyContent(textAlign),\n    ...(maxHeight && { overflowY: 'hidden' }),\n    ...(shouldOverflow && { minHeight: '100%' }),\n\n    [getActiveCellSelector()]: {\n      '.table-cell-actions': { display: 'flex' },\n      ...(shouldOverflow && {\n        zIndex: theme.zIndex.tooltip - 2,\n        height: 'fit-content',\n        minWidth: 'fit-content',\n      }),\n    },\n  });\n\nexport const getMaxHeightCellStyles: TableCellStyles = (_theme, { textAlign, maxHeight }) =>\n  css({\n    display: 'flex',\n    alignItems: 'center',\n    textAlign,\n    justifyContent: getJustifyContent(textAlign),\n    maxHeight,\n    width: '100%',\n    overflowY: 'hidden',\n    [getActiveCellSelector(true)]: {\n      maxHeight: 'none',\n      minHeight: '100%',\n    },\n  });\n\nexport const getCellActionStyles = (theme: GrafanaTheme2, textAlign: TextAlign) =>\n  css({\n    display: 'none',\n    position: 'absolute',\n    top: 0,\n    margin: 'auto',\n    height: '100%',\n    color: theme.colors.text.primary,\n    background: theme.isDark ? 'rgba(0, 0, 0, 0.7)' : 'rgba(255, 255, 255, 0.7)',\n    padding: theme.spacing.x0_5,\n    paddingInlineStart: theme.spacing.x1,\n    [textAlign === 'right' ? 'left' : 'right']: 0,\n  });\n\nexport const getLinkStyles = (theme: GrafanaTheme2, canBeColorized: boolean) =>\n  css({\n    a: {\n      cursor: 'pointer',\n      ...(canBeColorized\n        ? {\n            color: 'inherit',\n            textDecoration: 'underline',\n          }\n        : {\n            color: theme.colors.text.link,\n            textDecoration: 'none',\n            '&:hover': { textDecoration: 'underline' },\n          }),\n    },\n  });\n\nconst caretTriangle = (direction: 'left' | 'right', bgColor: string) =>\n  `linear-gradient(to top ${direction}, transparent 62.5%, ${bgColor} 50%)`;\n\nexport const getTooltipStyles = (theme: GrafanaTheme2, textAlign: TextAlign) => ({\n  tooltipContent: css({\n    height: '100%',\n    width: '100%',\n    display: 'flex',\n    alignItems: 'center',\n  }),\n  tooltipWrapper: css({\n    background: theme.colors.background.primary,\n    border: `1px solid ${theme.colors.border.weak}`,\n    borderRadius: theme.shape.radius.default,\n    boxShadow: theme.shadows.z3,\n    overflow: 'hidden',\n    padding: theme.spacing(1),\n    width: 'inherit',\n  }),\n  tooltipCaret: css({\n    cursor: 'pointer',\n    position: 'absolute',\n    top: theme.spacing(0.25),\n    [textAlign === 'right' ? 'right' : 'left']: theme.spacing(0.25),\n    width: theme.spacing(1.75),\n    height: theme.spacing(1.75),\n    background: caretTriangle(textAlign === 'right' ? 'right' : 'left', theme.colors.border.medium),\n    '&:hover, &[aria-pressed=true]': {\n      background: caretTriangle(textAlign === 'right' ? 'right' : 'left', theme.colors.border.strong),\n    },\n  }),\n});\n\nexport const getActiveCellSelector = (isNested?: boolean) =>\n  isNested ? '.rdg-cell:hover &, [aria-selected=true] &' : '&:hover, &[aria-selected=true]';\n","import { css } from '@emotion/css';\nimport { useMemo } from 'react';\n\nimport {\n  GrafanaTheme2,\n  classicColors,\n  Field,\n  getColorByStringHash,\n  FALLBACK_COLOR,\n  fieldColorModeRegistry,\n} from '@grafana/data';\nimport { FieldColorModeId } from '@grafana/schema';\n\nimport { getActiveCellSelector } from '../styles';\nimport { PillCellProps, TableCellStyles, TableCellValue } from '../types';\n\nexport function PillCell({ rowIdx, field, theme, getTextColorForBackground }: PillCellProps) {\n  const value = field.values[rowIdx];\n  const pills: Pill[] = useMemo(() => {\n    const pillValues = inferPills(value);\n    return pillValues.length > 0\n      ? pillValues.map((pill, index) => {\n          const bgColor = getPillColor(pill, field, theme);\n          const textColor = getTextColorForBackground(bgColor);\n          return {\n            value: String(pill),\n            key: `${pill}-${index}`,\n            bgColor,\n            color: textColor,\n          };\n        })\n      : [];\n  }, [value, field, theme, getTextColorForBackground]);\n\n  if (pills.length === 0) {\n    return null;\n  }\n\n  return pills.map((pill) => (\n    <span\n      key={pill.key}\n      style={{\n        backgroundColor: pill.bgColor,\n        color: pill.color,\n        border: pill.bgColor === TRANSPARENT ? `1px solid ${theme.colors.border.strong}` : undefined,\n      }}\n    >\n      {pill.value}\n    </span>\n  ));\n}\n\ninterface Pill {\n  value: string;\n  key: string;\n  bgColor: string;\n  color: string;\n}\n\nconst SPLIT_RE = /\\s*,\\s*/;\nconst TRANSPARENT = 'rgba(0,0,0,0)';\n\nexport function inferPills(rawValue: TableCellValue): unknown[] {\n  if (rawValue === '' || rawValue == null) {\n    return [];\n  }\n\n  const value = String(rawValue);\n\n  if (value[0] === '[') {\n    try {\n      return JSON.parse(value);\n    } catch {\n      return value.trim().split(SPLIT_RE);\n    }\n  }\n\n  return value.trim().split(SPLIT_RE);\n}\n\n// FIXME: this does not yet support \"shades of a color\"\nfunction getPillColor(value: unknown, field: Field, theme: GrafanaTheme2): string {\n  const cfg = field.config;\n\n  if (cfg.mappings?.length ?? 0 > 0) {\n    return field.display!(value).color ?? FALLBACK_COLOR;\n  }\n\n  if (cfg.color?.mode === FieldColorModeId.Fixed) {\n    return theme.visualization.getColorByName(cfg.color?.fixedColor ?? FALLBACK_COLOR);\n  }\n\n  let colors = classicColors;\n  const configuredColor = cfg.color;\n  if (configuredColor) {\n    const mode = fieldColorModeRegistry.get(configuredColor.mode);\n    if (typeof mode?.getColors === 'function') {\n      colors = mode.getColors(theme);\n    }\n  }\n\n  return getColorByStringHash(colors, String(value));\n}\n\nexport const getStyles: TableCellStyles = (theme, { textWrap, shouldOverflow, maxHeight }) =>\n  css({\n    display: 'inline-flex',\n    gap: theme.spacing(0.5),\n    flexWrap: textWrap ? 'wrap' : 'nowrap',\n\n    ...(shouldOverflow && {\n      [getActiveCellSelector(Boolean(maxHeight))]: {\n        flexWrap: 'wrap',\n      },\n    }),\n\n    '> span': {\n      display: 'flex',\n      padding: theme.spacing(0.25, 0.75),\n      borderRadius: theme.shape.radius.default,\n      fontSize: theme.typography.bodySmall.fontSize,\n      lineHeight: theme.typography.bodySmall.lineHeight,\n      whiteSpace: 'nowrap',\n    },\n  });\n","import { Property } from 'csstype';\nimport memoize from 'micro-memoize';\nimport { CSSProperties } from 'react';\nimport { SortColumn } from 'react-data-grid';\nimport tinycolor from 'tinycolor2';\nimport { Count, varPreLine } from 'uwrap';\n\nimport {\n  FieldType,\n  Field,\n  formattedValueToString,\n  GrafanaTheme2,\n  DisplayValue,\n  LinkModel,\n  DisplayValueAlignmentFactors,\n  DataFrame,\n  DisplayProcessor,\n} from '@grafana/data';\nimport {\n  BarGaugeDisplayMode,\n  FieldTextAlignment,\n  TableCellBackgroundDisplayMode,\n  TableCellDisplayMode,\n  TableCellHeight,\n} from '@grafana/schema';\n\nimport { getTextColorForAlphaBackground } from '../../../utils/colors';\nimport { TableCellOptions } from '../types';\n\nimport { inferPills } from './Cells/PillCell';\nimport { AutoCellRenderer, getCellRenderer } from './Cells/renderers';\nimport { COLUMN, TABLE } from './constants';\nimport {\n  TableRow,\n  ColumnTypes,\n  FrameToRowsConverter,\n  Comparator,\n  TypographyCtx,\n  MeasureCellHeight,\n  MeasureCellHeightEntry,\n} from './types';\n\n/* ---------------------------- Cell calculations --------------------------- */\nexport type CellNumLinesCalculator = (text: string, cellWidth: number) => number;\n\n/**\n * @internal\n * Returns the default row height based on the theme and cell height setting.\n */\nexport function getDefaultRowHeight(\n  theme: GrafanaTheme2,\n  fields?: Field[],\n  cellHeight?: TableCellHeight\n): NonNullable<CSSProperties['height']> {\n  if (fields?.some((field) => field.config?.custom?.cellOptions?.dynamicHeight)) {\n    return 'auto';\n  }\n\n  switch (cellHeight) {\n    case TableCellHeight.Sm:\n      return 36;\n    case TableCellHeight.Md:\n      return 42;\n    case TableCellHeight.Lg:\n      return TABLE.MAX_CELL_HEIGHT;\n  }\n\n  return TABLE.CELL_PADDING * 2 + theme.typography.fontSize * theme.typography.body.lineHeight;\n}\n\n/**\n * @internal\n * Returns true if cell inspection (hover to see full content) is enabled for the field.\n */\nexport function isCellInspectEnabled(field: Field): boolean {\n  return field.config?.custom?.inspect ?? false;\n}\n\n/**\n * @internal\n * Returns true if text wrapping should be applied to the cell.\n */\nexport function shouldTextWrap(field: Field): boolean {\n  return Boolean(field.config.custom?.wrapText);\n}\n\n/**\n * @internal wrap a cell height measurer to clamp its output to the maxHeight defined in the field, if any.\n */\nfunction clampByMaxHeight(measurer: MeasureCellHeight, maxHeight = Infinity): MeasureCellHeight {\n  return (value, width, field, rowIdx, lineHeight) => {\n    const rawHeight = measurer(value, width, field, rowIdx, lineHeight);\n    return Math.min(rawHeight, maxHeight);\n  };\n}\n\n/**\n * @internal creates a typography context based on a font size and family. used to measure text\n * and estimate size of text in cells.\n */\nexport function createTypographyContext(fontSize: number, fontFamily: string, letterSpacing = 0.15): TypographyCtx {\n  const font = `${fontSize}px ${fontFamily}`;\n  const canvas = document.createElement('canvas');\n  const ctx = canvas.getContext('2d')!;\n\n  ctx.letterSpacing = `${letterSpacing}px`;\n  ctx.font = font;\n  // 1/6 of the characters in this string are capitalized. Since the avgCharWidth is used for estimation, it's\n  // better that the estimation over-estimates the width than if it underestimates it, so we're a little on the\n  // aggressive side here and could even go more aggressive if we get complaints in the future.\n  const txt =\n    \"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s. 1234567890 ALL CAPS TO HELP WITH MEASUREMENT.\";\n  const txtWidth = ctx.measureText(txt).width;\n  const avgCharWidth = txtWidth / txt.length + letterSpacing;\n  const { count } = varPreLine(ctx);\n\n  return {\n    ctx,\n    fontFamily,\n    letterSpacing,\n    avgCharWidth,\n    estimateHeight: getTextHeightEstimator(avgCharWidth),\n    measureHeight: getTextHeightMeasurerFromUwrapCount(count),\n  };\n}\n\n/**\n * @internal wraps the uwrap count function to ensure that it is given a string.\n */\nexport function getTextHeightMeasurerFromUwrapCount(count: Count): MeasureCellHeight {\n  return (value, width, _field, _rowIdx, lineHeight) => {\n    if (value == null) {\n      return lineHeight;\n    }\n\n    const lines = count(String(value), width);\n    return lines * lineHeight;\n  };\n}\n\n/**\n * @internal returns a measurer which guesstimates a number of lines in a text cell based on the typography context's avgCharWidth.\n */\nexport function getTextHeightEstimator(avgCharWidth: number): MeasureCellHeight {\n  return (value, width, _field, _rowIdx, lineHeight) => {\n    if (!value) {\n      return -1;\n    }\n\n    // we don't have string breaking enabled in the table,\n    // so an unbroken string is by definition a single line.\n    const strValue = String(value);\n    if (!spaceRegex.test(strValue)) {\n      return -1;\n    }\n\n    const charsPerLine = width / avgCharWidth;\n    const lines = Math.ceil(strValue.length / charsPerLine);\n    return lines * lineHeight;\n  };\n}\n\n/**\n * @internal\n */\nexport function getDataLinksHeightMeasurer(): MeasureCellHeight {\n  const linksCountCache: Record<string, number> = {};\n\n  // when we render links, we need to filter out the invalid links. since the call to `getLinks` is expensive,\n  // we'll cache the result and reuse it for every row in the table. this cache is cleared when line counts are\n  // rebuilt anytime from the `useRowHeight` hook, and that includes adding and removing data links.\n  return (_value, _width, field, _rowIdx, lineHeight) => {\n    const cacheKey = getDisplayName(field);\n    if (linksCountCache[cacheKey] === undefined) {\n      let count = 0;\n      for (const l of field.config?.links ?? []) {\n        if (l.onClick || l.url) {\n          count += 1;\n        }\n      }\n      linksCountCache[cacheKey] = count;\n    }\n\n    return linksCountCache[cacheKey] * lineHeight;\n  };\n}\n\nconst PILLS_FONT_SIZE = 12;\nconst PILLS_SPACING = 12; // 6px horizontal padding on each side\nconst PILLS_GAP = 4; // gap between pills\n\nexport function getPillCellHeightMeasurer(measureWidth: (value: string) => number): MeasureCellHeight {\n  const widthCache: Record<string, number> = {};\n\n  return (value, width, _field, _rowIdx, lineHeight) => {\n    if (value == null) {\n      return 0;\n    }\n\n    const pillValues = inferPills(String(value));\n    if (pillValues.length === 0) {\n      return 0;\n    }\n\n    let lines = 0;\n    let currentLineUse = width;\n\n    for (const pillValue of pillValues) {\n      const strPill = String(pillValue);\n      let rawWidth = widthCache[strPill];\n      if (rawWidth === undefined) {\n        rawWidth = measureWidth(strPill);\n        widthCache[strPill] = rawWidth;\n      }\n      const pillWidth = rawWidth + PILLS_SPACING;\n\n      if (currentLineUse + pillWidth + PILLS_GAP > width) {\n        lines++;\n        currentLineUse = pillWidth;\n      } else {\n        currentLineUse += pillWidth + PILLS_GAP;\n      }\n    }\n\n    // default line height happens to be the height of a pill, but maybe we need a custom\n    // const here to make sure this doesn't get out of sync with the actual pill height.\n    return lines * lineHeight + (lines - 1) * PILLS_GAP;\n  };\n}\n\n/**\n * @internal return a text measurer for every field which has wrapHeaderText enabled.\n */\nexport function buildHeaderHeightMeasurers(\n  fields: Field[],\n  typographyCtx: TypographyCtx\n): MeasureCellHeightEntry[] | undefined {\n  const wrappedColIdxs = fields.reduce((acc: number[], field, idx) => {\n    if (field.config?.custom?.wrapHeaderText) {\n      acc.push(idx);\n    }\n    return acc;\n  }, []);\n\n  if (wrappedColIdxs.length === 0) {\n    return undefined;\n  }\n\n  // don't bother with estimating the line counts for the headers, because it's punishing\n  // when we get it wrong and there won't be that many compared to how many rows a table might contain.\n  return [{ measure: typographyCtx.measureHeight, fieldIdxs: wrappedColIdxs }];\n}\n\nconst spaceRegex = /[\\s-]/;\n\n/**\n * @internal return a text height measurer for every field which has wrapHeaderText enabled. we do this once as we're rendering\n * the table, and then getRowHeight uses the output of this to caluclate the height of each row.\n */\nexport function buildCellHeightMeasurers(\n  fields: Field[],\n  typographyCtx: TypographyCtx,\n  maxHeight?: number\n): MeasureCellHeightEntry[] | undefined {\n  const result: Record<string, MeasureCellHeightEntry> = {};\n  let wrappedFields = 0;\n\n  const measurerFactory: Record<\n    TableCellDisplayMode.Auto | TableCellDisplayMode.DataLinks | TableCellDisplayMode.Pill,\n    () => [MeasureCellHeight, MeasureCellHeight?]\n  > = {\n    // for string fields, we estimate the length of a line using `avgCharWidth` to limit expensive calls `count`.\n    [TableCellDisplayMode.Auto]: () => [typographyCtx.measureHeight, typographyCtx.estimateHeight],\n    [TableCellDisplayMode.DataLinks]: () => [getDataLinksHeightMeasurer(), undefined],\n    // pills use a different font size, so they require their own typography context.\n    [TableCellDisplayMode.Pill]: () => {\n      const pillTypographyCtx = createTypographyContext(\n        PILLS_FONT_SIZE,\n        typographyCtx.fontFamily,\n        typographyCtx.letterSpacing\n      );\n      return [\n        getPillCellHeightMeasurer((value) => pillTypographyCtx.ctx.measureText(value).width),\n        getPillCellHeightMeasurer((value) => value.length * pillTypographyCtx.avgCharWidth),\n      ];\n    },\n  } as const;\n\n  const setupMeasurerForIdx = (measurerFactoryKey: keyof typeof measurerFactory, fieldIdx: number) => {\n    if (!result[measurerFactoryKey]) {\n      const [measure, estimate] = measurerFactory[measurerFactoryKey]();\n      result[measurerFactoryKey] = {\n        measure: clampByMaxHeight(measure, maxHeight),\n        estimate: estimate != null ? clampByMaxHeight(estimate, maxHeight) : undefined,\n        fieldIdxs: [],\n      };\n    }\n    result[measurerFactoryKey].fieldIdxs.push(fieldIdx);\n  };\n\n  for (let fieldIdx = 0; fieldIdx < fields.length; fieldIdx++) {\n    const field = fields[fieldIdx];\n    if (shouldTextWrap(field)) {\n      wrappedFields++;\n\n      const cellType = getCellOptions(field).type;\n      if (cellType === TableCellDisplayMode.DataLinks) {\n        setupMeasurerForIdx(TableCellDisplayMode.DataLinks, fieldIdx);\n      } else if (cellType === TableCellDisplayMode.Pill) {\n        setupMeasurerForIdx(TableCellDisplayMode.Pill, fieldIdx);\n      } else if (\n        field.type === FieldType.string &&\n        getCellRenderer(field, getCellOptions(field)) === AutoCellRenderer\n      ) {\n        setupMeasurerForIdx(TableCellDisplayMode.Auto, fieldIdx);\n      } else {\n        // no measurer was configured for this cell type\n        wrappedFields--;\n      }\n    }\n  }\n\n  if (wrappedFields === 0) {\n    return undefined;\n  }\n\n  return Object.values(result);\n}\n\n// in some cases, the estimator might return a value that is less than 1, but when calculated by the measurer, it actually\n// realizes that it's a multi-line cell. to avoid this, we want to give a little buffer away from 1 before we fully trust\n// the estimator to have told us that a cell is single-line.\nexport const SINGLE_LINE_ESTIMATE_THRESHOLD = 18.5;\n\n/**\n * @internal\n * loop through the fields and their values, determine which cell is going to determine the height of the row based\n * on its content and width, and return the height in pixels of that row, with vertial padding applied.\n */\nexport function getRowHeight(\n  fields: Field[],\n  rowIdx: number,\n  columnWidths: number[],\n  defaultHeight: number,\n  measurers?: MeasureCellHeightEntry[],\n  lineHeight = TABLE.LINE_HEIGHT,\n  verticalPadding = TABLE.CELL_PADDING * 2\n): number {\n  if (!measurers?.length) {\n    return defaultHeight;\n  }\n\n  let maxHeight = -1;\n  let maxValue = '';\n  let maxWidth = 0;\n  let maxField: Field | undefined;\n  let preciseMeasurer: MeasureCellHeight | undefined;\n\n  for (const { estimate, measure, fieldIdxs } of measurers) {\n    // for some of the cell height measurers, getting the precise height is expensive. those entries set\n    // both \"estimate\" and \"measure\" functions. if the cell we find to be the max was estimated, we will\n    // get the \"true\" value right before calculating the row height by keeping a reference to the measure fn.\n    const measurer = (estimate ?? measure) satisfies MeasureCellHeight;\n    const isEstimating = estimate !== undefined;\n\n    for (const fieldIdx of fieldIdxs) {\n      const field = fields[fieldIdx];\n      // special case: for the header, provide `-1` as the row index.\n      const cellValueRaw = rowIdx === -1 ? getDisplayName(field) : field.values[rowIdx];\n      if (cellValueRaw != null) {\n        const colWidth = columnWidths[fieldIdx];\n        const estimatedHeight = measurer(cellValueRaw, colWidth, field, rowIdx, lineHeight);\n        if (estimatedHeight > maxHeight) {\n          maxHeight = estimatedHeight;\n          maxValue = cellValueRaw;\n          maxWidth = colWidth;\n          maxField = field;\n          preciseMeasurer = isEstimating ? measure : undefined;\n        }\n      }\n    }\n  }\n\n  // if the value is -1 or the estimate for the max cell was less than the SINGLE_LINE_ESTIMATE_THRESHOLD, we trust\n  // that the estimator correctly identified that no text wrapping is needed for this row, skipping the preciseMeasurer.\n  if (maxField === undefined || maxHeight < SINGLE_LINE_ESTIMATE_THRESHOLD) {\n    return defaultHeight;\n  }\n\n  // if we finished this row height loop with an estimate, we need to call\n  // the `preciseMeasurer` method to get the exact line count.\n  if (preciseMeasurer !== undefined) {\n    maxHeight = preciseMeasurer(maxValue, maxWidth, maxField, rowIdx, lineHeight);\n  }\n\n  // adjust for vertical padding, and clamp to a minimum default height\n  return Math.max(maxHeight + verticalPadding, defaultHeight);\n}\n\n/**\n * @internal\n * Returns true if text overflow handling should be applied to the cell.\n */\nexport function shouldTextOverflow(field: Field): boolean {\n  const cellOptions = getCellOptions(field);\n  const eligibleCellType =\n    // Tech debt: Technically image cells are of type string, which is misleading (kinda?)\n    // so we need to ensurefield.type === FieldType.string we don't apply overflow hover states for type image\n    (field.type === FieldType.string && cellOptions.type !== TableCellDisplayMode.Image) ||\n    // regardless of the underlying cell type, data links cells have text overflow.\n    cellOptions.type === TableCellDisplayMode.DataLinks;\n\n  return eligibleCellType && !shouldTextWrap(field) && !isCellInspectEnabled(field);\n}\n\n// we only want to infer justifyContent and textAlign for these cellTypes\nconst TEXT_CELL_TYPES = new Set<TableCellDisplayMode>([\n  TableCellDisplayMode.Auto,\n  TableCellDisplayMode.ColorText,\n  TableCellDisplayMode.ColorBackground,\n]);\n\nexport type TextAlign = 'left' | 'right' | 'center';\n\n/**\n * @internal\n * Returns the text-align value for inline-displayed cells for a field based on its type and configuration.\n */\nexport function getAlignment(field: Field): TextAlign {\n  const align: FieldTextAlignment | undefined = field.config.custom?.align;\n\n  if (!align || align === 'auto') {\n    if (TEXT_CELL_TYPES.has(getCellOptions(field).type) && field.type === FieldType.number) {\n      return 'right';\n    }\n    return 'left';\n  }\n\n  return align;\n}\n\n/**\n * @internal\n * Returns the justify-content value for flex-displayed cells for a field based on its type and configuration.\n */\nexport function getJustifyContent(textAlign: TextAlign): Property.JustifyContent {\n  return textAlign === 'center' ? 'center' : textAlign === 'right' ? 'flex-end' : 'flex-start';\n}\n\nconst DEFAULT_CELL_OPTIONS = { type: TableCellDisplayMode.Auto } as const;\n\n/**\n * @internal\n * Returns the cell options for a field, migrating from legacy displayMode if necessary.\n * TODO: remove live migration in favor of doing it in dashboard or panel migrator\n */\nexport function getCellOptions(field: Field): TableCellOptions {\n  if (field.config.custom?.displayMode) {\n    return migrateTableDisplayModeToCellOptions(field.config.custom?.displayMode);\n  }\n\n  return field.config.custom?.cellOptions ?? DEFAULT_CELL_OPTIONS;\n}\n\n/**\n * @internal\n * Getting gauge or sparkline values to align is very tricky without looking at all values and passing them through display processor.\n * For very large tables that could pretty expensive. So this is kind of a compromise. We look at the first 1000 rows and cache the longest value.\n * If we have a cached value we just check if the current value is longer and update the alignmentFactor. This can obviously still lead to\n * unaligned gauges but it should a lot less common.\n **/\nexport function getAlignmentFactor(\n  field: Field,\n  displayValue: DisplayValue,\n  rowIndex: number\n): DisplayValueAlignmentFactors {\n  let alignmentFactor = field.state?.alignmentFactors;\n\n  if (alignmentFactor) {\n    // check if current alignmentFactor is still the longest\n    if (formattedValueToString(alignmentFactor).length < formattedValueToString(displayValue).length) {\n      alignmentFactor = { ...displayValue };\n      field.state!.alignmentFactors = alignmentFactor;\n    }\n    return alignmentFactor;\n  } else {\n    // look at the next 1000 rows\n    alignmentFactor = { ...displayValue };\n    const maxIndex = Math.min(field.values.length, rowIndex + 1000);\n\n    for (let i = rowIndex + 1; i < maxIndex; i++) {\n      const nextDisplayValue = field.display?.(field.values[i]) ?? field.values[i];\n      if (formattedValueToString(alignmentFactor).length > formattedValueToString(nextDisplayValue).length) {\n        alignmentFactor.text = displayValue.text;\n      }\n    }\n\n    if (field.state) {\n      field.state.alignmentFactors = alignmentFactor;\n    } else {\n      field.state = { alignmentFactors: alignmentFactor };\n    }\n\n    return alignmentFactor;\n  }\n}\n\n/* ------------------------- Cell color calculation ------------------------- */\nconst CELL_COLOR_DARKENING_MULTIPLIER = 10;\nconst CELL_GRADIENT_HUE_ROTATION_DEGREES = 5;\n\n/**\n * @internal\n * Returns the text and background colors for a table cell based on its options and display value.\n */\nexport function getCellColorInlineStylesFactory(theme: GrafanaTheme2) {\n  const bgCellTextColor = memoize((color: string) => getTextColorForAlphaBackground(color, theme.isDark), {\n    maxSize: 1000,\n  });\n  const darkeningFactor = theme.isDark ? 1 : -0.7; // How much to darken elements depends upon if we're in dark mode\n  const gradientBg = memoize(\n    (color: string) =>\n      tinycolor(color)\n        .darken(CELL_COLOR_DARKENING_MULTIPLIER * darkeningFactor)\n        .spin(CELL_GRADIENT_HUE_ROTATION_DEGREES)\n        .toRgbString(),\n    { maxSize: 1000 }\n  );\n  const isTransparent = memoize(\n    (color: string) => {\n      // if hex, do the simple thing.\n      if (color[0] === '#') {\n        return color.length === 9 && color.endsWith('00');\n      }\n      // if not hex, just use tinycolor to avoid extra logic.\n      return tinycolor(color).getAlpha() === 0;\n    },\n    { maxSize: 1000 }\n  );\n\n  return (cellOptions: TableCellOptions, displayValue: DisplayValue, hasApplyToRow: boolean): CSSProperties => {\n    const result: CSSProperties = {};\n    const displayValueColor = displayValue.color;\n\n    if (!displayValueColor) {\n      return result;\n    }\n\n    if (cellOptions.type === TableCellDisplayMode.ColorText) {\n      result.color = displayValueColor;\n    } else if (cellOptions.type === TableCellDisplayMode.ColorBackground) {\n      // return without setting anything if the bg is transparent. this allows\n      // the cell to inherit the row bg color if `applyToRow` is set.\n      if (hasApplyToRow && isTransparent(displayValueColor)) {\n        return result;\n      }\n\n      const mode = cellOptions.mode ?? TableCellBackgroundDisplayMode.Gradient;\n      result.color = bgCellTextColor(displayValueColor);\n      result.background =\n        mode === TableCellBackgroundDisplayMode.Gradient\n          ? `linear-gradient(120deg, ${gradientBg(displayValueColor)}, ${displayValueColor})`\n          : displayValueColor;\n    }\n\n    return result;\n  };\n}\n\n/**\n * @internal\n * Extracts numeric pixel value from theme spacing\n */\nexport const extractPixelValue = (spacing: string | number): number => {\n  return typeof spacing === 'number' ? spacing : parseFloat(spacing) || 0;\n};\n\n/* ------------------------------- Data links ------------------------------- */\n/**\n * @internal\n */\nexport const getCellLinks = (field: Field, rowIdx: number) => {\n  let links: Array<LinkModel<unknown>> | undefined;\n  if (field.getLinks) {\n    links = field.getLinks({\n      valueRowIndex: rowIdx,\n    });\n  }\n\n  if (!links) {\n    return;\n  }\n\n  for (let i = 0; i < links?.length; i++) {\n    if (links[i].onClick) {\n      const origOnClick = links[i].onClick;\n\n      links[i].onClick = (event: MouseEvent) => {\n        // Allow opening in new tab\n        if (!(event.ctrlKey || event.metaKey || event.shiftKey)) {\n          event.preventDefault();\n          origOnClick!(event, {\n            field,\n            rowIndex: rowIdx,\n          });\n        }\n      };\n    }\n  }\n\n  return links.filter((link) => link.href || link.onClick != null);\n};\n\n/* ----------------------------- Data grid sorting ---------------------------- */\n/**\n * @internal\n */\nexport function applySort(\n  rows: TableRow[],\n  fields: Field[],\n  sortColumns: SortColumn[],\n  columnTypes: ColumnTypes = getColumnTypes(fields),\n  hasNestedFrames: boolean = getIsNestedTable(fields)\n): TableRow[] {\n  if (sortColumns.length === 0) {\n    return rows;\n  }\n\n  const sortNanos = sortColumns.map(\n    (c) => fields.find((f) => f.type === FieldType.time && getDisplayName(f) === c.columnKey)?.nanos\n  );\n\n  const compareRows = (a: TableRow, b: TableRow): number => {\n    let result = 0;\n\n    for (let i = 0; i < sortColumns.length; i++) {\n      const { columnKey, direction } = sortColumns[i];\n      const compare = getComparator(columnTypes[columnKey]);\n      const sortDir = direction === 'ASC' ? 1 : -1;\n\n      result = sortDir * compare(a[columnKey], b[columnKey]);\n\n      if (result === 0) {\n        const nanos = sortNanos[i];\n\n        if (nanos !== undefined) {\n          result = sortDir * (nanos[a.__index] - nanos[b.__index]);\n        }\n      }\n\n      if (result !== 0) {\n        break;\n      }\n    }\n\n    return result;\n  };\n\n  // Handle nested tables\n  if (hasNestedFrames) {\n    return processNestedTableRows(rows, (parents) => [...parents].sort(compareRows));\n  }\n\n  // Regular sort for tables without nesting\n  return [...rows].sort(compareRows);\n}\n\n/* ----------------------------- Data grid mapping ---------------------------- */\n/**\n * @internal\n */\nexport const frameToRecords = (frame: DataFrame): TableRow[] => {\n  const fnBody = `\n    const rows = Array(frame.length);\n    const values = frame.fields.map(f => f.values);\n    let rowCount = 0;\n    for (let i = 0; i < frame.length; i++) {\n      rows[rowCount] = {\n        __depth: 0,\n        __index: i,\n        ${frame.fields.map((field, fieldIdx) => `${JSON.stringify(getDisplayName(field))}: values[${fieldIdx}][i]`).join(',')}\n      };\n      rowCount += 1;\n      if (rows[rowCount-1]['__nestedFrames']){\n        const childFrame = rows[rowCount-1]['__nestedFrames'];\n        rows[rowCount] = {__depth: 1, __index: i, data: childFrame[0]}\n        rowCount += 1;\n      }\n    }\n    return rows;\n  `;\n\n  // Creates a function that converts a DataFrame into an array of TableRows\n  // Uses new Function() for performance as it's faster than creating rows using loops\n  const convert = new Function('frame', fnBody) as FrameToRowsConverter;\n  return convert(frame);\n};\n\n/* ----------------------------- Data grid comparator ---------------------------- */\n// The numeric: true option is used to sort numbers as strings correctly. It recognizes numeric sequences\n// within strings and sorts numerically instead of lexicographically.\nconst compare = new Intl.Collator('en', { sensitivity: 'base', numeric: true }).compare;\nconst strCompare: Comparator = (a, b) => compare(String(a ?? ''), String(b ?? ''));\nconst numCompare: Comparator = (a, b) => {\n  if (a === b) {\n    return 0;\n  }\n  if (a == null) {\n    return -1;\n  }\n  if (b == null) {\n    return 1;\n  }\n  return Number(a) - Number(b);\n};\nconst frameCompare: Comparator = (a, b) => {\n  // @ts-ignore The compared vals are DataFrameWithValue. the value is the rendered stat (first, last, etc.)\n  return (a?.value ?? 0) - (b?.value ?? 0);\n};\n\n/**\n * @internal\n */\nexport function getComparator(sortColumnType: FieldType): Comparator {\n  switch (sortColumnType) {\n    // Handle sorting for frame type fields (sparklines)\n    case FieldType.frame:\n      return frameCompare;\n    case FieldType.time:\n    case FieldType.number:\n    case FieldType.boolean:\n      return numCompare;\n    case FieldType.string:\n    case FieldType.enum:\n    default:\n      return strCompare;\n  }\n}\n\ntype TableCellGaugeDisplayModes =\n  | TableCellDisplayMode.BasicGauge\n  | TableCellDisplayMode.GradientGauge\n  | TableCellDisplayMode.LcdGauge;\nconst TABLE_CELL_GAUGE_DISPLAY_MODES_TO_DISPLAY_MODES: Record<TableCellGaugeDisplayModes, BarGaugeDisplayMode> = {\n  [TableCellDisplayMode.BasicGauge]: BarGaugeDisplayMode.Basic,\n  [TableCellDisplayMode.GradientGauge]: BarGaugeDisplayMode.Gradient,\n  [TableCellDisplayMode.LcdGauge]: BarGaugeDisplayMode.Lcd,\n};\n\ntype TableCellColorBackgroundDisplayModes =\n  | TableCellDisplayMode.ColorBackground\n  | TableCellDisplayMode.ColorBackgroundSolid;\nconst TABLE_CELL_COLOR_BACKGROUND_DISPLAY_MODES_TO_DISPLAY_MODES: Record<\n  TableCellColorBackgroundDisplayModes,\n  TableCellBackgroundDisplayMode\n> = {\n  [TableCellDisplayMode.ColorBackground]: TableCellBackgroundDisplayMode.Gradient,\n  [TableCellDisplayMode.ColorBackgroundSolid]: TableCellBackgroundDisplayMode.Basic,\n};\n\n/* ---------------------------- Miscellaneous ---------------------------- */\n/**\n * Migrates table cell display mode to new object format.\n *\n * @param displayMode The display mode of the cell\n * @returns TableCellOptions object in the correct format\n * relative to the old display mode.\n */\nexport function migrateTableDisplayModeToCellOptions(displayMode: TableCellDisplayMode): TableCellOptions {\n  switch (displayMode) {\n    // In the case of the gauge we move to a different option\n    case TableCellDisplayMode.BasicGauge:\n    case TableCellDisplayMode.GradientGauge:\n    case TableCellDisplayMode.LcdGauge:\n      return {\n        type: TableCellDisplayMode.Gauge,\n        mode: TABLE_CELL_GAUGE_DISPLAY_MODES_TO_DISPLAY_MODES[displayMode],\n      };\n    // Also true in the case of the color background\n    case TableCellDisplayMode.ColorBackground:\n    case TableCellDisplayMode.ColorBackgroundSolid:\n      return {\n        type: TableCellDisplayMode.ColorBackground,\n        mode: TABLE_CELL_COLOR_BACKGROUND_DISPLAY_MODES_TO_DISPLAY_MODES[displayMode],\n      };\n    // catching a nonsense case: `displayMode`: 'custom' should pre-date the CustomCell.\n    // if it doesn't, we need to just nope out and return an auto cell.\n    case TableCellDisplayMode.Custom:\n      return {\n        type: TableCellDisplayMode.Auto,\n      };\n    default:\n      return {\n        type: displayMode,\n      };\n  }\n}\n\n/**\n * @internal\n * Returns true if the DataFrame contains nested frames\n */\nexport const getIsNestedTable = (fields: Field[]): boolean =>\n  fields.some(({ type }) => type === FieldType.nestedFrames);\n\n/**\n * @internal\n * Processes nested table rows\n */\nexport const processNestedTableRows = (\n  rows: TableRow[],\n  processParents: (parents: TableRow[]) => TableRow[]\n): TableRow[] => {\n  // Separate parent and child rows\n  // Array for parentRows: enables sorting and maintains order for iteration\n  // Map for childRows: provides O(1) lookup by parent index when reconstructing the result\n  const parentRows: TableRow[] = [];\n  const childRows: Map<number, TableRow> = new Map();\n\n  for (const row of rows) {\n    if (row.__depth === 0) {\n      parentRows.push(row);\n    } else {\n      childRows.set(row.__index, row);\n    }\n  }\n\n  // Process parent rows (filter or sort)\n  const processedParents = processParents(parentRows);\n\n  // Reconstruct the result\n  const result: TableRow[] = [];\n  processedParents.forEach((row) => {\n    result.push(row);\n    const childRow = childRows.get(row.__index);\n    if (childRow) {\n      result.push(childRow);\n    }\n  });\n\n  return result;\n};\n\n/**\n * @internal\n * Calculate the footer height based on the maximum reducer count\n */\nexport const calculateFooterHeight = (fields: Field[]): number => {\n  let maxReducerCount = 0;\n  for (const field of fields) {\n    maxReducerCount = Math.max(maxReducerCount, field.config.custom?.footer?.reducers?.length ?? 0);\n  }\n\n  // Base height (+ padding) + height per reducer\n  return maxReducerCount > 0 ? maxReducerCount * TABLE.LINE_HEIGHT + TABLE.CELL_PADDING * 2 : 0;\n};\n\n/**\n * @internal\n * returns the display name of a field\n * returns the display name of a field.\n * We intentionally do not want to use @grafana/data's getFieldDisplayName here,\n * instead we have a call to cacheFieldDisplayNames up in TablePanel to handle this\n * before we begin.\n */\nexport const getDisplayName = (field: Field): string => {\n  return field.state?.displayName ?? field.name;\n};\n\n/**\n * @internal given a field name or display name, returns a predicate function that checks if a field matches that name.\n */\nexport const predicateByName = (name: string) => (f: Field) => f.name === name || getDisplayName(f) === name;\n\n/**\n * @internal\n * returns only fields that are not nested tables and not explicitly hidden\n */\nexport function getVisibleFields(fields: Field[]): Field[] {\n  return fields.filter((field) => field.type !== FieldType.nestedFrames && field.config.custom?.hideFrom?.viz !== true);\n}\n\n/**\n * @internal\n * returns a map of column types by display name\n */\nexport function getColumnTypes(fields: Field[]): ColumnTypes {\n  return fields.reduce<ColumnTypes>((acc, field) => {\n    switch (field.type) {\n      case FieldType.nestedFrames:\n        return { ...acc, ...getColumnTypes(field.values[0]?.[0]?.fields ?? []) };\n      default:\n        return { ...acc, [getDisplayName(field)]: field.type };\n    }\n  }, {});\n}\n\n/**\n * @internal\n * calculates the width of each field, with the following logic:\n * 1. manual sizing minWidth is hard-coded to 50px, we set this in RDG since it enforces the hard limit correctly\n * 2. if minWidth is configured in fieldConfig (or defaults to 150), it serves as the bottom of the auto-size clamp\n */\nexport function computeColWidths(fields: Field[], availWidth: number) {\n  let autoCount = 0;\n  let definedWidth = 0;\n\n  return (\n    fields\n      // first pass to add up how many fields have pre-defined widths and what that width totals to.\n      .map((field) => {\n        const width: number = field.config.custom?.width ?? 0;\n\n        if (width === 0) {\n          autoCount++;\n        } else {\n          definedWidth += width;\n        }\n\n        return width;\n      })\n      // second pass once `autoCount` and `definedWidth` are known.\n      .map(\n        (width, i) =>\n          width ||\n          Math.max(fields[i].config.custom?.minWidth ?? COLUMN.DEFAULT_WIDTH, (availWidth - definedWidth) / autoCount)\n      )\n  );\n}\n\n/**\n * @internal\n * if applyToRow is true in any field, return a function that gets the row background color\n */\nexport function getApplyToRowBgFn(\n  fields: Field[],\n  getCellColorInlineStyles: ReturnType<typeof getCellColorInlineStylesFactory>\n): ((rowIndex: number) => CSSProperties) | void {\n  for (const field of fields) {\n    const cellOptions = getCellOptions(field);\n    const fieldDisplay = field.display;\n    if (\n      fieldDisplay !== undefined &&\n      cellOptions.type === TableCellDisplayMode.ColorBackground &&\n      cellOptions.applyToRow === true\n    ) {\n      return (rowIndex: number) => getCellColorInlineStyles(cellOptions, fieldDisplay(field.values[rowIndex]), true);\n    }\n  }\n}\n\n/** @internal */\nexport function withDataLinksActionsTooltip(field: Field, cellType: TableCellDisplayMode) {\n  return (\n    cellType !== TableCellDisplayMode.DataLinks &&\n    cellType !== TableCellDisplayMode.Actions &&\n    (field.config.links?.length ?? 0) + (field.config.actions?.length ?? 0) > 1\n  );\n}\n\n/** @internal */\nexport function canFieldBeColorized(\n  cellType: TableCellDisplayMode,\n  applyToRowBgFn?: (rowIndex: number) => CSSProperties\n) {\n  return (\n    cellType === TableCellDisplayMode.ColorBackground ||\n    cellType === TableCellDisplayMode.ColorText ||\n    Boolean(applyToRowBgFn)\n  );\n}\n\nexport const displayJsonValue: DisplayProcessor = (value: unknown): DisplayValue => {\n  let displayValue: string;\n\n  // Handle string values that might be JSON\n  if (typeof value === 'string') {\n    try {\n      const parsed = JSON.parse(value);\n      displayValue = JSON.stringify(parsed, null, ' ');\n    } catch {\n      displayValue = value; // Keep original if not valid JSON\n    }\n  } else {\n    // For non-string values, stringify them\n    try {\n      displayValue = JSON.stringify(value, null, ' ');\n    } catch (error) {\n      // Handle circular references or other stringify errors\n      displayValue = String(value);\n    }\n  }\n\n  return { text: displayValue, numeric: Number.NaN };\n};\n\nexport function getSummaryCellTextAlign(textAlign: TextAlign, cellType: TableCellDisplayMode): TextAlign {\n  // gauge is weird. left-aligned gauge has the viz on the left and its numbers on the right, and vice-versa.\n  // if you center-aligned your gauge... ok.\n  if (cellType === TableCellDisplayMode.Gauge) {\n    return (\n      {\n        left: 'right',\n        right: 'left',\n        center: 'center',\n      } as const\n    )[textAlign];\n  }\n\n  return textAlign;\n}\n","import { css } from '@emotion/css';\n\nimport { ActionButton } from '../../../Actions/ActionButton';\nimport { ActionCellProps, TableCellStyles } from '../types';\n\nexport const ActionsCell = ({ field, rowIdx, getActions }: ActionCellProps) => {\n  const actions = getActions(field, rowIdx);\n\n  if (actions.length === 0) {\n    return null;\n  }\n\n  return actions.map((action, i) => <ActionButton key={i} action={action} variant=\"secondary\" />);\n};\n\nexport const getStyles: TableCellStyles = (theme) => css({ gap: theme.spacing(0.75) });\n","import { memo, ReactNode } from 'react';\n\nimport { Field } from '@grafana/data';\nimport { t } from '@grafana/i18n';\n\nimport { renderSingleLink } from '../../DataLinksActionsTooltip';\nimport { getCellLinks } from '../utils';\n\ninterface MaybeWrapWithLinkProps {\n  field: Field;\n  rowIdx: number;\n  children: ReactNode;\n}\n\nexport const MaybeWrapWithLink = memo(({ field, rowIdx, children }: MaybeWrapWithLinkProps): ReactNode => {\n  const linksCount = field.config.links?.length ?? 0;\n  const actionsCount = field.config.actions?.length ?? 0;\n\n  // as real, single link\n  if (linksCount === 1 && actionsCount === 0) {\n    let link = (getCellLinks(field, rowIdx) ?? [])[0];\n    return link != null ? renderSingleLink(link, children) : children;\n  }\n  // as faux link that acts as hit-area for tooltip activation\n  else if (linksCount + actionsCount > 0) {\n    return (\n      // eslint-disable-next-line jsx-a11y/anchor-is-valid\n      <a title={t('table.link-wrapper.menu', 'view data links and actions')} aria-haspopup=\"menu\">\n        {children}\n      </a>\n    );\n  }\n\n  // raw value\n  return children;\n});\nMaybeWrapWithLink.displayName = 'MaybeWrapWithLink';\n","import { css } from '@emotion/css';\n\nimport { formattedValueToString } from '@grafana/data';\n\nimport { MaybeWrapWithLink } from '../components/MaybeWrapWithLink';\nimport { TABLE } from '../constants';\nimport { getActiveCellSelector } from '../styles';\nimport { AutoCellProps, TableCellStyles } from '../types';\n\nexport function AutoCell({ value, field, rowIdx }: AutoCellProps) {\n  const displayValue = field.display!(value);\n  const formattedValue = formattedValueToString(displayValue);\n  return (\n    <MaybeWrapWithLink field={field} rowIdx={rowIdx}>\n      {formattedValue}\n    </MaybeWrapWithLink>\n  );\n}\n\nexport const getStyles: TableCellStyles = (_theme, { textWrap, shouldOverflow, maxHeight }) =>\n  css({\n    ...(textWrap && { whiteSpace: 'pre-line' }),\n    ...(shouldOverflow && {\n      [getActiveCellSelector(Boolean(maxHeight))]: {\n        whiteSpace: 'pre-line',\n      },\n    }),\n    ...(maxHeight != null &&\n      textWrap && {\n        height: 'auto',\n        overflowY: 'hidden',\n        display: '-webkit-box',\n        WebkitBoxOrient: 'vertical',\n        WebkitLineClamp: Math.floor(maxHeight / TABLE.LINE_HEIGHT),\n        [getActiveCellSelector(true)]: {\n          display: 'flex',\n          WebkitLineClamp: 'none',\n          WebkitBoxOrient: 'unset',\n          overflowY: 'auto',\n          height: 'fit-content',\n        },\n      }),\n  });\n\nexport const getJsonCellStyles: TableCellStyles = (_theme, { textWrap, shouldOverflow, maxHeight }) =>\n  css({\n    fontFamily: 'monospace',\n    ...(textWrap && { whiteSpace: 'pre' }),\n    ...(shouldOverflow && {\n      [getActiveCellSelector(Boolean(maxHeight))]: {\n        whiteSpace: 'pre',\n      },\n    }),\n  });\n","import { ThresholdsConfig, ThresholdsMode, VizOrientation, getFieldConfigWithMinMax } from '@grafana/data';\nimport { BarGaugeDisplayMode, BarGaugeValueMode, TableCellDisplayMode } from '@grafana/schema';\n\nimport { BarGauge } from '../../../BarGauge/BarGauge';\nimport { MaybeWrapWithLink } from '../components/MaybeWrapWithLink';\nimport { TABLE } from '../constants';\nimport { BarGaugeCellProps } from '../types';\nimport { getCellOptions, getAlignmentFactor } from '../utils';\n\nconst defaultScale: ThresholdsConfig = {\n  mode: ThresholdsMode.Absolute,\n  steps: [\n    {\n      color: 'blue',\n      value: -Infinity,\n    },\n    {\n      color: 'green',\n      value: 20,\n    },\n  ],\n};\n\nexport const BarGaugeCell = ({ value, field, theme, height, width, rowIdx }: BarGaugeCellProps) => {\n  const displayValue = field.display!(value);\n  const cellOptions = getCellOptions(field);\n  const heightOffset = TABLE.CELL_PADDING * 2;\n\n  let config = getFieldConfigWithMinMax(field, false);\n  if (!config.thresholds) {\n    config = {\n      ...config,\n      thresholds: defaultScale,\n    };\n  }\n\n  // Set default display mode and update if defined\n  // and update the valueMode if defined\n  let barGaugeMode: BarGaugeDisplayMode = BarGaugeDisplayMode.Gradient;\n  let valueDisplayMode: BarGaugeValueMode | undefined = undefined;\n\n  if (cellOptions.type === TableCellDisplayMode.Gauge) {\n    barGaugeMode = cellOptions.mode ?? BarGaugeDisplayMode.Gradient;\n    valueDisplayMode =\n      cellOptions.valueDisplayMode !== undefined ? cellOptions.valueDisplayMode : BarGaugeValueMode.Text;\n  }\n\n  const alignmentFactors = getAlignmentFactor(field, displayValue, rowIdx!);\n  // clamp the height of the gauge so it isn't stretched for large rows\n  const renderedHeight = Math.min(height - heightOffset, TABLE.MAX_CELL_HEIGHT);\n\n  return (\n    <MaybeWrapWithLink field={field} rowIdx={rowIdx}>\n      <BarGauge\n        width={width}\n        height={renderedHeight}\n        field={config}\n        display={field.display}\n        text={{ valueSize: 14 }}\n        value={displayValue}\n        orientation={VizOrientation.Horizontal}\n        theme={theme}\n        alignmentFactors={alignmentFactors}\n        itemSpacing={1}\n        lcdCellWidth={8}\n        displayMode={barGaugeMode}\n        valueDisplayMode={valueDisplayMode}\n      />\n    </MaybeWrapWithLink>\n  );\n};\n","import { css } from '@emotion/css';\n\nimport { DataLinksCellProps, TableCellStyles } from '../types';\nimport { getCellLinks, getJustifyContent } from '../utils';\n\nexport const DataLinksCell = ({ field, rowIdx }: DataLinksCellProps) => {\n  const links = getCellLinks(field, rowIdx);\n\n  if (!links?.length) {\n    return null;\n  }\n\n  return links.map((link, idx) => (\n    <a key={idx} onClick={link.onClick} href={link.href} target={link.target}>\n      {link.title}\n    </a>\n  ));\n};\n\nexport const getStyles: TableCellStyles = (theme, { textWrap, textAlign }) =>\n  css({\n    ...(textWrap && {\n      flexDirection: 'column',\n      justifyContent: 'center',\n      alignItems: `${getJustifyContent(textAlign)} !important`, // we can't guarantee order, and alignItems is set on a sibling class.\n    }),\n    '> a': {\n      flexWrap: 'nowrap',\n      ...(!textWrap && {\n        paddingInline: theme.spacing(0.5),\n        borderRight: `2px solid ${theme.colors.border.medium}`,\n        '&:first-child': {\n          paddingInlineStart: 0,\n        },\n        '&:last-child': {\n          paddingInlineEnd: 0,\n          borderRight: 'none',\n        },\n      }),\n    },\n  });\n","import { css } from '@emotion/css';\nimport WKT from 'ol/format/WKT';\nimport { Geometry } from 'ol/geom';\n\nimport { GeoCellProps, TableCellStyles } from '../types';\n\nexport function GeoCell({ value }: GeoCellProps) {\n  let disp = null;\n\n  if (value instanceof Geometry) {\n    disp = new WKT().writeGeometry(value, {\n      featureProjection: 'EPSG:3857',\n      dataProjection: 'EPSG:4326',\n    });\n  } else if (value != null) {\n    disp = `${value}`;\n  }\n\n  return disp;\n}\n\nexport const getStyles: TableCellStyles = () =>\n  css({\n    fontFamily: 'monospace',\n    whiteSpace: 'nowrap',\n    overflow: 'hidden',\n    textOverflow: 'ellipsis',\n  });\n","import { css } from '@emotion/css';\n\nimport { TableCellDisplayMode } from '../../types';\nimport { MaybeWrapWithLink } from '../components/MaybeWrapWithLink';\nimport { ImageCellProps, TableCellStyles } from '../types';\n\nexport const ImageCell = ({ cellOptions, field, value, rowIdx }: ImageCellProps) => {\n  const { text } = field.display!(value);\n  const { alt, title } =\n    cellOptions.type === TableCellDisplayMode.Image ? cellOptions : { alt: undefined, title: undefined };\n\n  return (\n    <MaybeWrapWithLink field={field} rowIdx={rowIdx}>\n      <img alt={alt} src={text} title={title} />\n    </MaybeWrapWithLink>\n  );\n};\n\nexport const getStyles: TableCellStyles = () =>\n  css({\n    '&, a, img': {\n      width: '100%',\n      height: '100%',\n    },\n    img: {\n      objectFit: 'contain',\n    },\n  });\n","import { css } from '@emotion/css';\n\nimport { renderMarkdown } from '@grafana/data';\n\nimport { MaybeWrapWithLink } from '../components/MaybeWrapWithLink';\nimport { getActiveCellSelector } from '../styles';\nimport { MarkdownCellProps, TableCellStyles } from '../types';\n\nexport function MarkdownCell({ field, rowIdx, disableSanitizeHtml }: MarkdownCellProps) {\n  const rawValue = field.values[rowIdx];\n  if (rawValue == null) {\n    return null;\n  }\n\n  const renderValue = field.display!(rawValue);\n\n  return (\n    <MaybeWrapWithLink field={field} rowIdx={rowIdx}>\n      <div\n        className=\"markdown-container\"\n        dangerouslySetInnerHTML={{\n          __html: renderMarkdown(renderValue.text, { noSanitize: disableSanitizeHtml }).trim(),\n        }}\n      />\n    </MaybeWrapWithLink>\n  );\n}\n\nexport const getStyles: TableCellStyles = (theme, { maxHeight }) =>\n  css({\n    [`&, ${getActiveCellSelector(Boolean(maxHeight))}`]: {\n      whiteSpace: 'normal',\n    },\n\n    '.markdown-container': {\n      width: '100%',\n      // for elements like `p`, `h*`, etc. which have an inherent margin,\n      // we want to remove the bottom margin for the last one in the container.\n      '> *:last-child': {\n        marginBottom: 0,\n      },\n    },\n\n    'ol, ul': {\n      paddingLeft: theme.spacing(2.5),\n    },\n    p: {\n      whiteSpace: 'pre-line',\n    },\n  });\n","import { css } from '@emotion/css';\nimport * as React from 'react';\n\nimport {\n  FieldType,\n  FieldConfig,\n  getMinMaxAndDelta,\n  FieldSparkline,\n  isDataFrame,\n  Field,\n  isDataFrameWithValue,\n} from '@grafana/data';\nimport { t } from '@grafana/i18n';\nimport {\n  BarAlignment,\n  GraphDrawStyle,\n  GraphFieldConfig,\n  GraphGradientMode,\n  LineInterpolation,\n  TableSparklineCellOptions,\n  TableCellDisplayMode,\n  VisibilityMode,\n} from '@grafana/schema';\n\nimport { measureText } from '../../../../utils/measureText';\nimport { FormattedValueDisplay } from '../../../FormattedValueDisplay/FormattedValueDisplay';\nimport { Sparkline } from '../../../Sparkline/Sparkline';\nimport { SparklineCellProps, TableCellStyles } from '../types';\nimport { getAlignmentFactor, getCellOptions } from '../utils';\n\nexport const defaultSparklineCellConfig: TableSparklineCellOptions = {\n  type: TableCellDisplayMode.Sparkline,\n  drawStyle: GraphDrawStyle.Line,\n  lineInterpolation: LineInterpolation.Smooth,\n  lineWidth: 1,\n  fillOpacity: 17,\n  gradientMode: GraphGradientMode.Hue,\n  pointSize: 2,\n  barAlignment: BarAlignment.Center,\n  showPoints: VisibilityMode.Never,\n  hideValue: false,\n};\n\nexport const SparklineCell = (props: SparklineCellProps) => {\n  const { field, value, theme, timeRange, rowIdx, width } = props;\n  const sparkline = getSparkline(value, field);\n\n  if (!sparkline) {\n    return <>{field.config.noValue || t('grafana-ui.table.sparkline.no-data', 'no data')}</>;\n  }\n\n  // Get the step from the first two values to null-fill the x-axis based on timerange\n  if (sparkline.x && !sparkline.x.config.interval && sparkline.x.values.length > 1) {\n    sparkline.x.config.interval = sparkline.x.values[1] - sparkline.x.values[0];\n  }\n\n  // Remove non-finite values, e.g: NaN, +/-Infinity\n  sparkline.y.values = sparkline.y.values.map((v) => {\n    if (!Number.isFinite(v)) {\n      return null;\n    } else {\n      return v;\n    }\n  });\n\n  const range = getMinMaxAndDelta(sparkline.y);\n  sparkline.y.config.min = range.min;\n  sparkline.y.config.max = range.max;\n  sparkline.y.state = { range };\n  sparkline.timeRange = timeRange;\n\n  const cellOptions = getTableSparklineCellOptions(field);\n\n  const config: FieldConfig<GraphFieldConfig> = {\n    color: field.config.color,\n    custom: {\n      ...defaultSparklineCellConfig,\n      ...cellOptions,\n    },\n  };\n\n  const hideValue = cellOptions.hideValue;\n  let valueWidth = 0;\n  let valueElement: React.ReactNode = null;\n  if (!hideValue) {\n    const newValue = isDataFrameWithValue(value) ? value.value : null;\n    const displayValue = field.display!(newValue);\n    const alignmentFactor = getAlignmentFactor(field, displayValue, rowIdx!);\n\n    valueWidth =\n      measureText(`${alignmentFactor.prefix ?? ''}${alignmentFactor.text}${alignmentFactor.suffix ?? ''}`, 16).width +\n      theme.spacing.gridSize;\n\n    valueElement = <FormattedValueDisplay style={{ width: valueWidth }} value={displayValue} />;\n  }\n\n  return (\n    <>\n      {valueElement}\n      <Sparkline width={width - valueWidth} height={25} sparkline={sparkline} config={config} theme={theme} />\n    </>\n  );\n};\n\nfunction getSparkline(value: unknown, field: Field): FieldSparkline | undefined {\n  if (Array.isArray(value)) {\n    return {\n      y: {\n        name: `${field.name}-sparkline`,\n        type: FieldType.number,\n        values: value,\n        config: {},\n      },\n    };\n  }\n\n  if (isDataFrame(value)) {\n    const timeField = value.fields.find((x) => x.type === FieldType.time);\n    const numberField = value.fields.find((x) => x.type === FieldType.number);\n\n    if (timeField && numberField) {\n      return { x: timeField, y: numberField };\n    }\n  }\n\n  return;\n}\n\nfunction getTableSparklineCellOptions(field: Field): TableSparklineCellOptions {\n  let options = getCellOptions(field);\n  if (options.type === TableCellDisplayMode.Auto) {\n    options = { ...options, type: TableCellDisplayMode.Sparkline };\n  }\n  if (options.type === TableCellDisplayMode.Sparkline) {\n    return options;\n  }\n  throw new Error(`Expected options type ${TableCellDisplayMode.Sparkline} but got ${options.type}`);\n}\n\nexport const getStyles: TableCellStyles = (theme, { textAlign }) =>\n  css({\n    width: '100%',\n    gap: theme.spacing(1),\n    justifyContent: 'space-between',\n    ...(textAlign === 'right' && { flexDirection: 'row-reverse' }),\n  });\n","import { clsx } from 'clsx';\nimport { memo, MemoExoticComponent } from 'react';\n\nimport { Field, FieldType, GrafanaTheme2, isDataFrame, isTimeSeriesFrame } from '@grafana/data';\n\nimport { TableCellDisplayMode, TableCellOptions, TableCustomCellOptions } from '../../types';\nimport { TableCellRenderer, TableCellRendererProps, TableCellStyleOptions, TableCellStyles } from '../types';\nimport { getCellOptions } from '../utils';\n\nimport { ActionsCell, getStyles as getActionsCellStyles } from './ActionsCell';\nimport { AutoCell, getStyles as getAutoCellStyles, getJsonCellStyles } from './AutoCell';\nimport { BarGaugeCell } from './BarGaugeCell';\nimport { DataLinksCell, getStyles as getDataLinksStyles } from './DataLinksCell';\nimport { GeoCell, getStyles as getGeoCellStyles } from './GeoCell';\nimport { ImageCell, getStyles as getImageStyles } from './ImageCell';\nimport { MarkdownCell, getStyles as getMarkdownCellStyles } from './MarkdownCell';\nimport { PillCell, getStyles as getPillStyles } from './PillCell';\nimport { SparklineCell, getStyles as getSparklineCellStyles } from './SparklineCell';\n\nexport const AutoCellRenderer = memo((props: TableCellRendererProps) => (\n  <AutoCell value={props.value} field={props.field} rowIdx={props.rowIdx} />\n));\nAutoCellRenderer.displayName = 'AutoCellRenderer';\n\nfunction isCustomCellOptions(options: TableCellOptions): options is TableCustomCellOptions {\n  return options.type === TableCellDisplayMode.Custom;\n}\n\nfunction mixinAutoCellStyles(fn: TableCellStyles): TableCellStyles {\n  return (theme, options) => {\n    const styles = fn(theme, options);\n    return clsx(styles, getAutoCellStyles(theme, options));\n  };\n}\n\ninterface CellRegistryEntry {\n  renderer: MemoExoticComponent<TableCellRenderer>;\n  getStyles?: TableCellStyles;\n  testField?: (field: Field) => boolean;\n}\n\nconst CELL_REGISTRY: Record<TableCellOptions['type'], CellRegistryEntry> = {\n  [TableCellDisplayMode.Auto]: {\n    renderer: AutoCellRenderer,\n    getStyles: getAutoCellStyles,\n  },\n  [TableCellDisplayMode.ColorBackground]: {\n    renderer: AutoCellRenderer,\n    getStyles: getAutoCellStyles,\n  },\n  [TableCellDisplayMode.ColorText]: {\n    renderer: AutoCellRenderer,\n    getStyles: getAutoCellStyles,\n  },\n  [TableCellDisplayMode.JSONView]: {\n    renderer: AutoCellRenderer,\n    getStyles: mixinAutoCellStyles(getJsonCellStyles),\n  },\n  [TableCellDisplayMode.Actions]: {\n    // eslint-disable-next-line react/display-name\n    renderer: memo((props: TableCellRendererProps) => (\n      <ActionsCell field={props.field} rowIdx={props.rowIdx} getActions={props.getActions ?? (() => [])} />\n    )),\n    getStyles: getActionsCellStyles,\n  },\n  [TableCellDisplayMode.DataLinks]: {\n    // eslint-disable-next-line react/display-name\n    renderer: memo((props: TableCellRendererProps) => <DataLinksCell field={props.field} rowIdx={props.rowIdx} />),\n    getStyles: getDataLinksStyles,\n  },\n  [TableCellDisplayMode.Gauge]: {\n    // eslint-disable-next-line react/display-name\n    renderer: memo((props: TableCellRendererProps) => (\n      <BarGaugeCell\n        field={props.field}\n        value={props.value}\n        theme={props.theme}\n        height={props.height}\n        width={props.width}\n        rowIdx={props.rowIdx}\n      />\n    )),\n  },\n  [TableCellDisplayMode.Sparkline]: {\n    // eslint-disable-next-line react/display-name\n    renderer: memo((props: TableCellRendererProps) => (\n      <SparklineCell\n        value={props.value}\n        field={props.field}\n        timeRange={props.timeRange}\n        rowIdx={props.rowIdx}\n        theme={props.theme}\n        width={props.width}\n      />\n    )),\n    getStyles: getSparklineCellStyles,\n  },\n  [TableCellDisplayMode.Geo]: {\n    // eslint-disable-next-line react/display-name\n    renderer: memo((props: TableCellRendererProps) => <GeoCell value={props.value} height={props.height} />),\n    getStyles: getGeoCellStyles,\n  },\n  [TableCellDisplayMode.Image]: {\n    // eslint-disable-next-line react/display-name\n    renderer: memo((props: TableCellRendererProps) => (\n      <ImageCell cellOptions={props.cellOptions} field={props.field} value={props.value} rowIdx={props.rowIdx} />\n    )),\n    getStyles: getImageStyles,\n  },\n  [TableCellDisplayMode.Pill]: {\n    // eslint-disable-next-line react/display-name\n    renderer: memo((props: TableCellRendererProps) => (\n      <PillCell\n        rowIdx={props.rowIdx}\n        field={props.field}\n        theme={props.theme}\n        getTextColorForBackground={props.getTextColorForBackground}\n      />\n    )),\n    getStyles: getPillStyles,\n    testField: (field: Field) => field.type === FieldType.string,\n  },\n  [TableCellDisplayMode.Markdown]: {\n    // eslint-disable-next-line react/display-name\n    renderer: memo((props: TableCellRendererProps) => (\n      <MarkdownCell field={props.field} rowIdx={props.rowIdx} disableSanitizeHtml={props.disableSanitizeHtml} />\n    )),\n    getStyles: getMarkdownCellStyles,\n    testField: (field: Field) => field.type === FieldType.string,\n  },\n  [TableCellDisplayMode.Custom]: {\n    // eslint-disable-next-line react/display-name\n    renderer: memo((props: TableCellRendererProps) => {\n      if (!isCustomCellOptions(props.cellOptions) || !props.cellOptions.cellComponent) {\n        return null; // nonsensical case, but better to typeguard it than throw.\n      }\n      const CustomCellComponent = props.cellOptions.cellComponent;\n      return (\n        <CustomCellComponent field={props.field} rowIndex={props.rowIdx} frame={props.frame} value={props.value} />\n      );\n    }),\n  },\n};\n\n/** @internal */\nexport function getCellRenderer(\n  field: Field,\n  cellOptions: TableCellOptions = getCellOptions(field)\n): TableCellRenderer {\n  const cellType = cellOptions?.type ?? TableCellDisplayMode.Auto;\n  if (cellType === TableCellDisplayMode.Auto) {\n    return CELL_REGISTRY[getAutoRendererDisplayMode(field)].renderer;\n  }\n\n  // if the field fails the test for a specific renderer, fallback to Auto\n  if (CELL_REGISTRY[cellType]?.testField && CELL_REGISTRY[cellType].testField(field) !== true) {\n    return AutoCellRenderer;\n  }\n\n  // cautious fallback to Auto renderer in case some garbage cell type has been provided.\n  return CELL_REGISTRY[cellType]?.renderer ?? AutoCellRenderer;\n}\n\n/** @internal */\nexport function getCellSpecificStyles(\n  cellType: TableCellOptions['type'],\n  field: Field,\n  theme: GrafanaTheme2,\n  options: TableCellStyleOptions\n): string | undefined {\n  if (cellType === TableCellDisplayMode.Auto) {\n    return getAutoRendererStyles(theme, options, field);\n  }\n  return CELL_REGISTRY[cellType]?.getStyles?.(theme, options);\n}\n\n/** @internal */\nexport function getAutoRendererStyles(\n  theme: GrafanaTheme2,\n  options: TableCellStyleOptions,\n  field: Field\n): string | undefined {\n  const impliedDisplayMode = getAutoRendererDisplayMode(field);\n  if (impliedDisplayMode !== TableCellDisplayMode.Auto) {\n    return CELL_REGISTRY[impliedDisplayMode]?.getStyles?.(theme, options);\n  }\n  return getAutoCellStyles(theme, options);\n}\n\n/** @internal */\nexport function getAutoRendererDisplayMode(field: Field): TableCellOptions['type'] {\n  if (field.type === FieldType.geo) {\n    return TableCellDisplayMode.Geo;\n  }\n  if (field.type === FieldType.frame) {\n    const firstValue = field.values[0];\n    if (isDataFrame(firstValue) && isTimeSeriesFrame(firstValue)) {\n      return TableCellDisplayMode.Sparkline;\n    }\n  }\n  return TableCellDisplayMode.Auto;\n}\n","import { Field, formattedValueToString, SelectableValue } from '@grafana/data';\n\nimport { getDisplayName } from '../utils';\n\nexport function calculateUniqueFieldValues(rows: any[], field?: Field) {\n  if (!field || rows.length === 0) {\n    return {};\n  }\n\n  const set: Record<string, string> = {};\n\n  for (let index = 0; index < rows.length; index++) {\n    const row = rows[index];\n    const fieldValue = row[getDisplayName(field)];\n    const displayValue = field.display ? field.display(fieldValue) : fieldValue;\n    const value = field.display ? formattedValueToString(displayValue) : displayValue;\n\n    set[value || '(Blanks)'] = value;\n  }\n\n  return set;\n}\n\nexport function getFilteredOptions(options: SelectableValue[], filterValues?: SelectableValue[]): SelectableValue[] {\n  if (!filterValues) {\n    return [];\n  }\n\n  return options.filter((option) => filterValues.some((filtered) => filtered.value === option.value));\n}\n\nexport function valuesToOptions(unique: Record<string, unknown>): SelectableValue[] {\n  return Object.keys(unique)\n    .map((key) => ({ value: unique[key], label: key }))\n    .sort(sortOptions);\n}\n\nfunction sortOptions(a: SelectableValue, b: SelectableValue): number {\n  if (a.label === undefined && b.label === undefined) {\n    return 0;\n  }\n\n  if (a.label === undefined && b.label !== undefined) {\n    return -1;\n  }\n\n  if (a.label !== undefined && b.label === undefined) {\n    return 1;\n  }\n\n  if (a.label! < b.label!) {\n    return -1;\n  }\n\n  if (a.label! > b.label!) {\n    return 1;\n  }\n\n  return 0;\n}\n","import { css } from '@emotion/css';\nimport React, { useCallback, useMemo, useState } from 'react';\n\nimport { Field, GrafanaTheme2, SelectableValue } from '@grafana/data';\nimport { selectors } from '@grafana/e2e-selectors';\nimport { t, Trans } from '@grafana/i18n';\n\nimport { useStyles2, useTheme2 } from '../../../../themes/ThemeContext';\nimport { Button } from '../../../Button/Button';\nimport { ClickOutsideWrapper } from '../../../ClickOutsideWrapper/ClickOutsideWrapper';\nimport { ButtonSelect } from '../../../Dropdown/ButtonSelect';\nimport { FilterInput } from '../../../FilterInput/FilterInput';\nimport { Label } from '../../../Forms/Label';\nimport { Stack } from '../../../Layout/Stack/Stack';\nimport { FilterType } from '../types';\nimport { getDisplayName } from '../utils';\n\nimport { FilterList } from './FilterList';\nimport { calculateUniqueFieldValues, getFilteredOptions, valuesToOptions } from './utils';\n\nexport const operatorSelectableValues: { [key: string]: SelectableValue<string> } = {\n  Contains: { label: 'Contains', value: 'Contains', description: 'Contains' },\n  '=': { label: '=', value: '=', description: 'Equals' },\n  '!=': { label: '!=', value: '!=', description: 'Not equals' },\n  '>': { label: '>', value: '>', description: 'Greater' },\n  '>=': { label: '>=', value: '>=', description: 'Greater or Equal' },\n  '<': { label: '<', value: '<', description: 'Less' },\n  '<=': { label: '<=', value: '<=', description: 'Less or Equal' },\n  Expression: {\n    label: 'Expression',\n    value: 'Expression',\n    description: 'Bool Expression (Char $ represents the column value in the expression, e.g. \"$ >= 10 && $ <= 12\")',\n  },\n};\nconst OPERATORS = Object.values(operatorSelectableValues);\n\ninterface Props {\n  name: string;\n  rows: any[];\n  filterValue: any;\n  setFilter: (value: any) => void;\n  onClose: () => void;\n  field?: Field;\n  searchFilter: string;\n  setSearchFilter: (value: string) => void;\n  operator: SelectableValue<string>;\n  setOperator: (item: SelectableValue<string>) => void;\n}\n\nexport const FilterPopup = ({\n  name,\n  rows,\n  filterValue,\n  setFilter,\n  onClose,\n  field,\n  searchFilter,\n  setSearchFilter,\n  operator,\n  setOperator,\n}: Props) => {\n  const theme = useTheme2();\n  const uniqueValues = useMemo(() => calculateUniqueFieldValues(rows, field), [rows, field]);\n  const options = useMemo(() => valuesToOptions(uniqueValues), [uniqueValues]);\n  const filteredOptions = useMemo(() => getFilteredOptions(options, filterValue), [options, filterValue]);\n  const [values, setValues] = useState<SelectableValue[]>(filteredOptions);\n  const [matchCase, setMatchCase] = useState(false);\n\n  const onCancel = useCallback((event?: React.MouseEvent) => onClose(), [onClose]);\n\n  const onFilter = useCallback(\n    (event: React.MouseEvent) => {\n      if (values.length !== 0) {\n        // create a Set for faster filtering\n        const filteredSet = new Set(values.map((item) => item.value));\n\n        setFilter((filter: FilterType) => ({\n          ...filter,\n          [name]: { filtered: values, filteredSet, searchFilter, operator },\n        }));\n      } else {\n        setFilter((filter: FilterType) => {\n          const newFilter = { ...filter };\n          delete newFilter[name];\n          return newFilter;\n        });\n      }\n      onClose();\n    },\n    [setFilter, values, onClose] // eslint-disable-line react-hooks/exhaustive-deps\n  );\n\n  const onClearFilter = useCallback(\n    (event: React.MouseEvent) => {\n      setFilter((filter: FilterType) => {\n        const newFilter = { ...filter };\n        delete newFilter[name];\n        return newFilter;\n      });\n      onClose();\n    },\n    [setFilter, onClose] // eslint-disable-line react-hooks/exhaustive-deps\n  );\n\n  const filterInputPlaceholder = t('grafana-ui.table.filter-popup-input-placeholder', 'Filter values');\n  const clearFilterVisible = useMemo(() => filterValue !== undefined, [filterValue]);\n  const styles = useStyles2(getStyles);\n\n  return (\n    <ClickOutsideWrapper onClick={onCancel} useCapture={true}>\n      {/* This is just blocking click events from bubbeling and should not have a keyboard interaction. */}\n      {/* eslint-disable-next-line jsx-a11y/no-static-element-interactions, jsx-a11y/click-events-have-key-events */}\n      <div\n        className={styles.filterContainer}\n        onClick={stopPropagation}\n        data-testid={selectors.components.Panels.Visualization.TableNG.Filters.Container}\n      >\n        <Stack direction=\"column\">\n          <Stack alignItems=\"center\">\n            {field && <Label className={styles.label}>{getDisplayName(field)}</Label>}\n            <ButtonSelect\n              variant=\"canvas\"\n              options={OPERATORS}\n              onChange={setOperator}\n              value={operator}\n              tooltip={operator.description}\n            />\n          </Stack>\n\n          <div className={styles.listDivider} />\n\n          <Stack gap={1}>\n            <FilterInput\n              placeholder={filterInputPlaceholder}\n              title={filterInputPlaceholder}\n              onChange={setSearchFilter}\n              value={searchFilter}\n            />\n            <Button\n              tooltip={t('grafana-ui.table.filter-popup-aria-label-match-case', 'Match case')}\n              variant=\"secondary\"\n              style={{ color: matchCase ? theme.colors.text.link : theme.colors.text.disabled }}\n              onClick={() => {\n                setMatchCase((s) => !s);\n              }}\n              icon={'text-fields'}\n            />\n          </Stack>\n\n          <FilterList\n            onChange={setValues}\n            values={values}\n            options={options}\n            caseSensitive={matchCase}\n            searchFilter={searchFilter}\n            operator={operator}\n          />\n\n          <Stack gap={3}>\n            <Stack>\n              <Button size=\"sm\" onClick={onFilter}>\n                <Trans i18nKey=\"grafana-ui.table.filter-popup-apply\">Ok</Trans>\n              </Button>\n              <Button size=\"sm\" variant=\"secondary\" onClick={onCancel}>\n                <Trans i18nKey=\"grafana-ui.table.filter-popup-cancel\">Cancel</Trans>\n              </Button>\n            </Stack>\n            {clearFilterVisible && (\n              <Stack>\n                <Button fill=\"text\" size=\"sm\" onClick={onClearFilter}>\n                  <Trans i18nKey=\"grafana-ui.table.filter-popup-clear\">Clear filter</Trans>\n                </Button>\n              </Stack>\n            )}\n          </Stack>\n        </Stack>\n      </div>\n    </ClickOutsideWrapper>\n  );\n};\n\nconst getStyles = (theme: GrafanaTheme2) => ({\n  filterContainer: css({\n    label: 'filterContainer',\n    width: '100%',\n    minWidth: '250px',\n    height: '100%',\n    backgroundColor: theme.colors.background.primary,\n    border: `1px solid ${theme.colors.border.weak}`,\n    padding: theme.spacing(2),\n    boxShadow: theme.shadows.z3,\n    borderRadius: theme.shape.radius.default,\n  }),\n  listDivider: css({\n    label: 'listDivider',\n    width: '100%',\n    borderTop: `1px solid ${theme.colors.border.medium}`,\n  }),\n  label: css({\n    marginBottom: 0,\n  }),\n});\n\nconst stopPropagation = (event: React.MouseEvent) => {\n  event.stopPropagation();\n};\n","import { css } from '@emotion/css';\nimport { useCallback, useMemo } from 'react';\nimport * as React from 'react';\nimport { FixedSizeList as List, ListChildComponentProps } from 'react-window';\n\nimport { GrafanaTheme2, formattedValueToString, getValueFormat, SelectableValue } from '@grafana/data';\nimport { selectors } from '@grafana/e2e-selectors';\nimport { Trans } from '@grafana/i18n';\n\nimport { useStyles2, useTheme2 } from '../../../../themes/ThemeContext';\nimport { Checkbox } from '../../../Forms/Checkbox';\nimport { Label } from '../../../Forms/Label';\nimport { Stack } from '../../../Layout/Stack/Stack';\n\nimport { operatorSelectableValues } from './FilterPopup';\n\ninterface Props {\n  values: SelectableValue[];\n  options: SelectableValue[];\n  onChange: (options: SelectableValue[]) => void;\n  caseSensitive?: boolean;\n  searchFilter: string;\n  operator: SelectableValue<string>;\n}\n\nconst ITEM_HEIGHT = 28;\nconst MIN_HEIGHT = ITEM_HEIGHT * 5;\n\nexport const REGEX_OPERATOR = operatorSelectableValues['Contains'];\nconst XPR_OPERATOR = operatorSelectableValues['Expression'];\n\nconst comparableValue = (value: string): string | number | Date | boolean => {\n  value = value.trim().replace(/\\\\/g, '');\n\n  // Does it look like a Date (Starting with pattern YYYY-MM-DD* or YYYY/MM/DD*)?\n  if (/^(\\d{4}-\\d{2}-\\d{2}|\\d{4}\\/\\d{2}\\/\\d{2})/.test(value)) {\n    const date = new Date(value);\n    if (!isNaN(date.getTime())) {\n      const fmt = getValueFormat('dateTimeAsIso');\n      return formattedValueToString(fmt(date.getTime()));\n    }\n  }\n  // Does it look like a Number?\n  const num = parseFloat(value);\n  if (!isNaN(num)) {\n    return num;\n  }\n  // Does it look like a Bool?\n  const lvalue = value.toLowerCase();\n  if (lvalue === 'true' || lvalue === 'false') {\n    return lvalue === 'true';\n  }\n  // Anything else\n  return value;\n};\n\nexport const FilterList = ({ options, values, caseSensitive, onChange, searchFilter, operator }: Props) => {\n  const regex = useMemo(() => new RegExp(searchFilter, caseSensitive ? undefined : 'i'), [searchFilter, caseSensitive]);\n  const items = useMemo(\n    () =>\n      options.filter((option) => {\n        if (!searchFilter || operator.value === REGEX_OPERATOR.value) {\n          if (option.label === undefined) {\n            return false;\n          }\n          return regex.test(option.label);\n        } else if (operator.value === XPR_OPERATOR.value) {\n          if (option.value === undefined) {\n            return false;\n          }\n          try {\n            const xpr = searchFilter.replace(/\\\\/g, '');\n            const fnc = new Function('$', `'use strict'; return ${xpr};`);\n            const val = comparableValue(option.value);\n            return fnc(val);\n          } catch (_) {}\n          return false;\n        } else {\n          if (option.value === undefined) {\n            return false;\n          }\n\n          const value1 = comparableValue(option.value);\n          const value2 = comparableValue(searchFilter);\n\n          switch (operator.value) {\n            case '=':\n              return value1 === value2;\n            case '!=':\n              return value1 !== value2;\n            case '>':\n              return value1 > value2;\n            case '>=':\n              return value1 >= value2;\n            case '<':\n              return value1 < value2;\n            case '<=':\n              return value1 <= value2;\n          }\n          return false;\n        }\n      }),\n    [options, regex, operator, searchFilter]\n  );\n  const selectedItems = useMemo(() => items.filter((item) => values.includes(item)), [items, values]);\n\n  const selectCheckValue = useMemo(() => items.length === selectedItems.length, [items, selectedItems]);\n  const selectCheckIndeterminate = useMemo(\n    () => selectedItems.length > 0 && items.length > selectedItems.length,\n    [items, selectedItems]\n  );\n  const selectCheckLabel = useMemo(\n    () => (selectedItems.length ? `${selectedItems.length} selected` : `Select all`),\n    [selectedItems]\n  );\n  const selectCheckDescription = useMemo(\n    () =>\n      items.length !== selectedItems.length\n        ? 'Add all displayed values to the filter'\n        : 'Remove all displayed values from the filter',\n    [items, selectedItems]\n  );\n\n  const styles = useStyles2(getStyles);\n  const theme = useTheme2();\n  const gutter = theme.spacing.gridSize;\n  const height = useMemo(() => Math.min(items.length * ITEM_HEIGHT, MIN_HEIGHT) + gutter, [gutter, items.length]);\n\n  const onCheckedChanged = useCallback(\n    (option: SelectableValue) => (event: React.FormEvent<HTMLInputElement>) => {\n      const newValues = event.currentTarget.checked\n        ? values.concat(option)\n        : values.filter((c) => c.value !== option.value);\n\n      onChange(newValues);\n    },\n    [onChange, values]\n  );\n\n  const onSelectChanged = useCallback(() => {\n    if (items.length === selectedItems.length) {\n      const newValues = values.filter((item) => !items.includes(item));\n      onChange(newValues);\n    } else {\n      const newValues = [...new Set([...values, ...items])];\n      onChange(newValues);\n    }\n  }, [onChange, values, items, selectedItems]);\n\n  return (\n    <Stack direction=\"column\">\n      {items.length > 0 ? (\n        <>\n          <List\n            height={height}\n            itemCount={items.length}\n            itemSize={ITEM_HEIGHT}\n            itemData={{ items, values: selectedItems, onCheckedChanged, className: styles.filterListRow }}\n            width=\"100%\"\n            className={styles.filterList}\n          >\n            {ItemRenderer}\n          </List>\n          <div\n            className={styles.filterListRow}\n            data-testid={selectors.components.Panels.Visualization.TableNG.Filters.SelectAll}\n          >\n            <Checkbox\n              value={selectCheckValue}\n              indeterminate={selectCheckIndeterminate}\n              label={selectCheckLabel}\n              description={selectCheckDescription}\n              onChange={onSelectChanged}\n            />\n          </div>\n        </>\n      ) : (\n        <Label className={styles.noValuesLabel}>\n          <Trans i18nKey=\"grafana-ui.table.no-values-label\">No values</Trans>\n        </Label>\n      )}\n    </Stack>\n  );\n};\n\ninterface ItemRendererProps extends ListChildComponentProps {\n  data: {\n    onCheckedChanged: (option: SelectableValue) => (event: React.FormEvent<HTMLInputElement>) => void;\n    items: SelectableValue[];\n    values: SelectableValue[];\n    className: string;\n  };\n}\n\nfunction ItemRenderer({ index, style, data: { onCheckedChanged, items, values, className } }: ItemRendererProps) {\n  const option = items[index];\n  const { value, label } = option;\n  const isChecked = values.find((s) => s.value === value) !== undefined;\n\n  return (\n    <div className={className} style={style} title={label}>\n      <Checkbox value={isChecked} label={label} onChange={onCheckedChanged(option)} />\n    </div>\n  );\n}\n\nconst getStyles = (theme: GrafanaTheme2) => ({\n  filterList: css({\n    label: 'filterList',\n    backgroundColor: theme.components.input.background,\n    border: `1px solid ${theme.colors.border.medium}`,\n    borderRadius: theme.shape.radius.default,\n  }),\n  filterListRow: css({\n    label: 'filterListRow',\n    cursor: 'pointer',\n    whiteSpace: 'nowrap',\n    overflow: 'hidden',\n    textOverflow: 'ellipsis',\n    padding: theme.spacing(0.5),\n\n    ':hover': {\n      backgroundColor: theme.colors.action.hover,\n    },\n  }),\n  selectDivider: css({\n    label: 'selectDivider',\n    width: '100%',\n    borderTop: `1px solid ${theme.colors.border.medium}`,\n    padding: theme.spacing(0.5, 2),\n  }),\n  noValuesLabel: css({\n    paddingTop: theme.spacing(1),\n  }),\n});\n","import { css, cx } from '@emotion/css';\nimport { useRef, useState } from 'react';\n\nimport { Field, GrafanaTheme2, SelectableValue } from '@grafana/data';\nimport { selectors } from '@grafana/e2e-selectors';\n\nimport { useStyles2 } from '../../../../themes/ThemeContext';\nimport { Icon } from '../../../Icon/Icon';\nimport { Popover } from '../../../Tooltip/Popover';\nimport { FilterType, TableRow } from '../types';\n\nimport { REGEX_OPERATOR } from './FilterList';\nimport { FilterPopup } from './FilterPopup';\n\ninterface Props {\n  name: string;\n  rows: any[];\n  filter: FilterType;\n  setFilter: (value: FilterType) => void;\n  field?: Field;\n  crossFilterOrder: string[];\n  crossFilterRows: { [key: string]: TableRow[] };\n  iconClassName?: string;\n}\n\nexport const Filter = ({\n  name,\n  rows,\n  filter,\n  setFilter,\n  field,\n  crossFilterOrder,\n  crossFilterRows,\n  iconClassName,\n}: Props) => {\n  const filterValue = filter[name]?.filtered;\n\n  // get rows for cross filtering\n  const filterIndex = crossFilterOrder.indexOf(name);\n  let filteredRows: TableRow[];\n  if (filterIndex > 0) {\n    // current filter list should be based on the previous filter list\n    const previousFilterName = crossFilterOrder[filterIndex - 1];\n    filteredRows = crossFilterRows[previousFilterName];\n  } else if (filterIndex === -1 && crossFilterOrder.length > 0) {\n    // current filter list should be based on the last filter list\n    const previousFilterName = crossFilterOrder[crossFilterOrder.length - 1];\n    filteredRows = crossFilterRows[previousFilterName];\n  } else {\n    filteredRows = rows;\n  }\n\n  const ref = useRef<HTMLButtonElement>(null);\n  const [isPopoverVisible, setPopoverVisible] = useState<boolean>(false);\n  const styles = useStyles2(getStyles);\n  const filterEnabled = Boolean(filterValue);\n  const [searchFilter, setSearchFilter] = useState(filter[name]?.searchFilter || '');\n  const [operator, setOperator] = useState<SelectableValue<string>>(filter[name]?.operator || REGEX_OPERATOR);\n\n  return (\n    <button\n      className={styles.headerFilter}\n      ref={ref}\n      type=\"button\"\n      data-testid={selectors.components.Panels.Visualization.TableNG.Filters.HeaderButton}\n      onClick={(ev) => {\n        setPopoverVisible(true);\n        ev.stopPropagation();\n      }}\n    >\n      <Icon name=\"filter\" className={cx(iconClassName, { [styles.filterIconEnabled]: filterEnabled })} />\n      {isPopoverVisible && ref.current && (\n        <Popover\n          content={\n            <FilterPopup\n              name={name}\n              rows={filteredRows}\n              filterValue={filterValue}\n              setFilter={setFilter}\n              field={field}\n              onClose={() => setPopoverVisible(false)}\n              searchFilter={searchFilter}\n              setSearchFilter={setSearchFilter}\n              operator={operator}\n              setOperator={setOperator}\n            />\n          }\n          onKeyDown={(event) => {\n            if (event.key === ' ') {\n              event.stopPropagation();\n            }\n          }}\n          placement=\"bottom-start\"\n          referenceElement={ref.current}\n          show\n        />\n      )}\n    </button>\n  );\n};\n\nconst getStyles = (theme: GrafanaTheme2) => ({\n  headerFilter: css({\n    background: 'transparent',\n    border: 'none',\n    label: 'headerFilter',\n    padding: 0,\n    alignSelf: 'flex-end',\n  }),\n  filterIconEnabled: css({\n    label: 'filterIconEnabled',\n    color: theme.colors.primary.text,\n  }),\n});\n","import { css, cx } from '@emotion/css';\nimport React, { useEffect } from 'react';\nimport { Column, SortDirection } from 'react-data-grid';\n\nimport { Field, GrafanaTheme2 } from '@grafana/data';\n\nimport { useStyles2 } from '../../../../themes/ThemeContext';\nimport { getFieldTypeIcon } from '../../../../types/icon';\nimport { Icon } from '../../../Icon/Icon';\nimport { Filter } from '../Filter/Filter';\nimport { FilterType, TableRow, TableSummaryRow } from '../types';\nimport { getDisplayName } from '../utils';\n\ninterface HeaderCellProps {\n  column: Column<TableRow, TableSummaryRow>;\n  rows: TableRow[];\n  field: Field;\n  direction?: SortDirection;\n  filter: FilterType;\n  setFilter: React.Dispatch<React.SetStateAction<FilterType>>;\n  crossFilterOrder: string[];\n  crossFilterRows: { [key: string]: TableRow[] };\n  showTypeIcons?: boolean;\n}\n\nconst HeaderCell: React.FC<HeaderCellProps> = ({\n  column,\n  rows,\n  field,\n  direction,\n  filter,\n  setFilter,\n  crossFilterOrder,\n  crossFilterRows,\n  showTypeIcons,\n}) => {\n  const headerCellWrap = field.config.custom?.wrapHeaderText ?? false;\n  const styles = useStyles2(getStyles, headerCellWrap);\n  const displayName = getDisplayName(field);\n  const filterable = field.config.custom?.filterable ?? false;\n\n  // we have to remove/reset the filter if the column is not filterable\n  useEffect(() => {\n    if (!filterable && filter[displayName]) {\n      setFilter((filter: FilterType) => {\n        const newFilter = { ...filter };\n        delete newFilter[displayName];\n        return newFilter;\n      });\n    }\n  }, [filterable, displayName, filter, setFilter]);\n\n  return (\n    <>\n      {showTypeIcons && (\n        <Icon className={styles.headerCellIcon} name={getFieldTypeIcon(field)} title={field?.type} size=\"sm\" />\n      )}\n      <span className={styles.headerCellLabel}>{getDisplayName(field)}</span>\n      {direction && (\n        <Icon\n          className={cx(styles.headerCellIcon, styles.headerSortIcon)}\n          size=\"lg\"\n          name={direction === 'ASC' ? 'arrow-up' : 'arrow-down'}\n        />\n      )}\n      {filterable && (\n        <Filter\n          name={column.key}\n          rows={rows}\n          filter={filter}\n          setFilter={setFilter}\n          field={field}\n          crossFilterOrder={crossFilterOrder}\n          crossFilterRows={crossFilterRows}\n          iconClassName={styles.headerCellIcon}\n        />\n      )}\n    </>\n  );\n};\n\nconst getStyles = (theme: GrafanaTheme2, headerTextWrap?: boolean) => ({\n  headerCellLabel: css({\n    cursor: 'pointer',\n    fontWeight: theme.typography.fontWeightMedium,\n    color: theme.colors.text.secondary,\n    overflow: 'hidden',\n    textOverflow: 'ellipsis',\n    whiteSpace: headerTextWrap ? 'pre-line' : 'nowrap',\n    '&:hover': {\n      textDecoration: 'underline',\n    },\n    '&::selection': {\n      backgroundColor: 'var(--rdg-background-color)',\n      color: theme.colors.text.secondary,\n    },\n  }),\n  headerCellIcon: css({\n    marginBottom: theme.spacing(0.5),\n    alignSelf: 'flex-end',\n    color: theme.colors.text.secondary,\n  }),\n  headerSortIcon: css({\n    marginBottom: theme.spacing(0.25),\n  }),\n});\n\nexport { HeaderCell };\n","import { css } from '@emotion/css';\n\nimport { GrafanaTheme2 } from '@grafana/data';\nimport { t } from '@grafana/i18n';\n\nimport { useStyles2 } from '../../../../themes/ThemeContext';\nimport { Icon } from '../../../Icon/Icon';\nimport { RowExpanderNGProps } from '../types';\n\nexport function RowExpander({ onCellExpand, isExpanded }: RowExpanderNGProps) {\n  const styles = useStyles2(getStyles);\n  function handleKeyDown(e: React.KeyboardEvent<HTMLSpanElement>) {\n    if (e.key === ' ' || e.key === 'Enter') {\n      e.preventDefault();\n      onCellExpand(e);\n    }\n  }\n  return (\n    <div role=\"button\" tabIndex={0} className={styles.expanderCell} onClick={onCellExpand} onKeyDown={handleKeyDown}>\n      <Icon\n        aria-label={\n          isExpanded\n            ? t('grafana-ui.row-expander-ng.aria-label-collapse', 'Collapse row')\n            : t('grafana-ui.row-expander.aria-label-expand', 'Expand row')\n        }\n        name={isExpanded ? 'angle-down' : 'angle-right'}\n        size=\"lg\"\n      />\n    </div>\n  );\n}\n\nconst getStyles = (_theme: GrafanaTheme2) => ({\n  expanderCell: css({\n    display: 'flex',\n    flexDirection: 'column',\n    justifyContent: 'center',\n    cursor: 'pointer',\n  }),\n});\n","import { useState, useMemo, useCallback, useRef, useLayoutEffect, RefObject, CSSProperties, useEffect } from 'react';\nimport { Column, DataGridHandle, DataGridProps, SortColumn } from 'react-data-grid';\n\nimport { compareArrayValues, Field, FieldType, formattedValueToString, reduceField, ReducerID } from '@grafana/data';\n\nimport { TableColumnResizeActionCallback } from '../types';\n\nimport { TABLE } from './constants';\nimport { FilterType, FooterFieldState, TableRow, TableSortByFieldState, TableSummaryRow, TypographyCtx } from './types';\nimport {\n  getDisplayName,\n  processNestedTableRows,\n  applySort,\n  getColumnTypes,\n  getRowHeight,\n  computeColWidths,\n  buildHeaderHeightMeasurers,\n  buildCellHeightMeasurers,\n} from './utils';\n\n// Helper function to get displayed value\nconst getDisplayedValue = (row: TableRow, key: string, fields: Field[]) => {\n  const field = fields.find((field) => getDisplayName(field) === key);\n  if (!field || !field.display) {\n    return '';\n  }\n  const displayedValue = formattedValueToString(field.display(row[key]));\n  return displayedValue;\n};\n\nexport interface FilteredRowsResult {\n  rows: TableRow[];\n  filter: FilterType;\n  setFilter: React.Dispatch<React.SetStateAction<FilterType>>;\n  crossFilterOrder: string[];\n  crossFilterRows: Record<string, TableRow[]>;\n}\n\nexport interface FilteredRowsOptions {\n  hasNestedFrames: boolean;\n}\n\nexport function useFilteredRows(\n  rows: TableRow[],\n  fields: Field[],\n  { hasNestedFrames }: FilteredRowsOptions\n): FilteredRowsResult {\n  // TODO: allow persisted filter selection via url\n  const [filter, setFilter] = useState<FilterType>({});\n  const filterValues = useMemo(() => Object.entries(filter), [filter]);\n\n  const crossFilterOrder: FilteredRowsResult['crossFilterOrder'] = useMemo(\n    () => Array.from(new Set(filterValues.map(([key]) => key))),\n    [filterValues]\n  );\n\n  const [filteredRows, crossFilterRows] = useMemo(() => {\n    const crossFilterRows: FilteredRowsResult['crossFilterRows'] = {};\n\n    const filterRows = (row: TableRow): boolean => {\n      for (const [key, value] of filterValues) {\n        const displayedValue = getDisplayedValue(row, key, fields);\n        if (!value.filteredSet.has(displayedValue)) {\n          return false;\n        }\n        // collect rows for crossFilter\n        crossFilterRows[key] = crossFilterRows[key] ?? [];\n        crossFilterRows[key].push(row);\n      }\n      return true;\n    };\n\n    const filteredRows = hasNestedFrames\n      ? processNestedTableRows(rows, (parents) => parents.filter(filterRows))\n      : rows.filter(filterRows);\n\n    return [filteredRows, crossFilterRows];\n  }, [filterValues, rows, fields, hasNestedFrames]);\n\n  return {\n    rows: filteredRows,\n    filter,\n    setFilter,\n    crossFilterOrder,\n    crossFilterRows,\n  };\n}\n\nexport interface SortedRowsOptions {\n  hasNestedFrames: boolean;\n  initialSortBy?: TableSortByFieldState[];\n}\n\nexport interface SortedRowsResult {\n  rows: TableRow[];\n  sortColumns: SortColumn[];\n  setSortColumns: React.Dispatch<React.SetStateAction<SortColumn[]>>;\n}\n\nexport function useSortedRows(\n  rows: TableRow[],\n  fields: Field[],\n  { initialSortBy, hasNestedFrames }: SortedRowsOptions\n): SortedRowsResult {\n  const initialSortColumns = useMemo<SortColumn[]>(\n    () =>\n      initialSortBy?.flatMap(({ displayName, desc }) => {\n        if (!fields.some((f) => getDisplayName(f) === displayName)) {\n          return [];\n        }\n        return [\n          {\n            columnKey: displayName,\n            direction: desc ? ('DESC' as const) : ('ASC' as const),\n          },\n        ];\n      }) ?? [],\n    [] // eslint-disable-line react-hooks/exhaustive-deps\n  );\n  const [sortColumns, setSortColumns] = useState<SortColumn[]>(initialSortColumns);\n  const columnTypes = useMemo(() => getColumnTypes(fields), [fields]);\n\n  const sortedRows = useMemo(\n    () => applySort(rows, fields, sortColumns, columnTypes, hasNestedFrames),\n    [rows, fields, sortColumns, hasNestedFrames, columnTypes]\n  );\n\n  return {\n    rows: sortedRows,\n    sortColumns,\n    setSortColumns,\n  };\n}\n\nexport interface PaginatedRowsOptions {\n  height: number;\n  width: number;\n  rowHeight: NonNullable<CSSProperties['height']> | ((row: TableRow) => number);\n  headerHeight: number;\n  footerHeight: number;\n  paginationHeight?: number;\n  enabled: boolean;\n}\n\nexport interface PaginatedRowsResult {\n  rows: TableRow[];\n  page: number;\n  setPage: React.Dispatch<React.SetStateAction<number>>;\n  numPages: number;\n  rowsPerPage: number;\n  pageRangeStart: number;\n  pageRangeEnd: number;\n  smallPagination: boolean;\n}\n\n// hand-measured. pagination height is 30px, plus 8px top margin\nconst PAGINATION_HEIGHT = 38;\n\nexport function usePaginatedRows(\n  rows: TableRow[],\n  { height, width, headerHeight, footerHeight, rowHeight, enabled }: PaginatedRowsOptions\n): PaginatedRowsResult {\n  // TODO: allow persisted page selection via url\n  const [page, setPage] = useState(0);\n  const numRows = rows.length;\n\n  // calculate average row height if row height is variable.\n  const avgRowHeight = useMemo(() => {\n    if (!enabled) {\n      return 0;\n    }\n\n    if (typeof rowHeight === 'number') {\n      return rowHeight;\n    }\n\n    // when using auto-sized rows, we're just going to have to pick a number. the alternative\n    // is to measure each row, which we could do but would be expensive.\n    if (typeof rowHeight === 'string') {\n      return TABLE.MAX_CELL_HEIGHT;\n    }\n\n    // we'll just measure 100 rows to estimate\n    return rows.slice(0, 100).reduce((avg, row, _, { length }) => avg + rowHeight(row) / length, 0);\n  }, [rows, rowHeight, enabled]);\n\n  const smallPagination = useMemo(() => enabled && width < TABLE.PAGINATION_LIMIT, [enabled, width]);\n\n  // using dimensions of the panel, calculate pagination parameters\n  const { numPages, rowsPerPage, pageRangeStart, pageRangeEnd } = useMemo((): {\n    numPages: number;\n    rowsPerPage: number;\n    pageRangeStart: number;\n    pageRangeEnd: number;\n  } => {\n    if (!enabled) {\n      return { numPages: 0, rowsPerPage: 0, pageRangeStart: 1, pageRangeEnd: numRows };\n    }\n\n    // calculate number of rowsPerPage based on height stack\n    const rowAreaHeight = height - headerHeight - footerHeight - PAGINATION_HEIGHT;\n    const heightPerRow = Math.floor(rowAreaHeight / (avgRowHeight || 1));\n    // ensure at least one row per page is displayed\n    let rowsPerPage = heightPerRow > 1 ? heightPerRow : 1;\n\n    // calculate row range for pagination summary display\n    const pageRangeStart = page * rowsPerPage + 1;\n    let pageRangeEnd = pageRangeStart + rowsPerPage - 1;\n    if (pageRangeEnd > numRows) {\n      pageRangeEnd = numRows;\n    }\n\n    const numPages = Math.ceil(numRows / rowsPerPage);\n    return {\n      numPages,\n      rowsPerPage,\n      pageRangeStart,\n      pageRangeEnd,\n    };\n  }, [height, headerHeight, footerHeight, avgRowHeight, enabled, numRows, page]);\n\n  // safeguard against page overflow on panel resize or other factors\n  useLayoutEffect(() => {\n    if (!enabled) {\n      return;\n    }\n\n    if (page > numPages) {\n      // resets pagination to end\n      setPage(numPages - 1);\n    }\n  }, [numPages, enabled, page, setPage]);\n\n  // apply pagination to the sorted rows\n  const paginatedRows = useMemo(() => {\n    if (!enabled) {\n      return rows;\n    }\n    const pageOffset = page * rowsPerPage;\n    return rows.slice(pageOffset, pageOffset + rowsPerPage);\n  }, [page, rowsPerPage, rows, enabled]);\n\n  return {\n    rows: paginatedRows,\n    page: enabled ? page : -1,\n    setPage,\n    numPages,\n    rowsPerPage,\n    pageRangeStart,\n    pageRangeEnd,\n    smallPagination,\n  };\n}\n\nconst ICON_WIDTH = 16;\nconst ICON_GAP = 4;\n\ninterface UseHeaderHeightOptions {\n  enabled: boolean;\n  fields: Field[];\n  columnWidths: number[];\n  sortColumns: SortColumn[];\n  typographyCtx: TypographyCtx;\n  showTypeIcons?: boolean;\n}\n\nexport function useHeaderHeight({\n  fields,\n  enabled,\n  columnWidths,\n  sortColumns,\n  typographyCtx,\n  showTypeIcons = false,\n}: UseHeaderHeightOptions): number {\n  const perIconSpace = ICON_WIDTH + ICON_GAP;\n\n  const measurers = useMemo(() => buildHeaderHeightMeasurers(fields, typographyCtx), [fields, typographyCtx]);\n\n  const columnAvailableWidths = useMemo(\n    () =>\n      columnWidths.map((c, idx) => {\n        if (idx >= fields.length) {\n          return 0; // no width available for this column yet\n        }\n\n        let width = c - 2 * TABLE.CELL_PADDING - TABLE.BORDER_RIGHT;\n        const field = fields[idx];\n\n        // filtering icon\n        if (field.config?.custom?.filterable) {\n          width -= perIconSpace;\n        }\n        // sorting icon\n        if (sortColumns.some((col) => col.columnKey === getDisplayName(field))) {\n          width -= perIconSpace;\n        }\n        // type icon\n        if (showTypeIcons) {\n          width -= perIconSpace;\n        }\n        // sadly, the math for this is off by exactly 1 pixel. shrug.\n        return Math.floor(width) - 1;\n      }),\n    [fields, columnWidths, sortColumns, showTypeIcons, perIconSpace]\n  );\n\n  const headerHeight = useMemo(() => {\n    if (!enabled) {\n      return 0;\n    }\n    return getRowHeight(\n      fields,\n      -1,\n      columnAvailableWidths,\n      TABLE.HEADER_HEIGHT,\n      measurers,\n      TABLE.LINE_HEIGHT,\n      TABLE.CELL_PADDING\n    );\n  }, [fields, enabled, columnAvailableWidths, measurers]);\n\n  return headerHeight;\n}\n\ninterface UseRowHeightOptions {\n  columnWidths: number[];\n  fields: Field[];\n  hasNestedFrames: boolean;\n  defaultHeight: NonNullable<CSSProperties['height']>;\n  expandedRows: Set<number>;\n  typographyCtx: TypographyCtx;\n  maxHeight?: number;\n}\n\nexport function useRowHeight({\n  columnWidths,\n  fields,\n  hasNestedFrames,\n  defaultHeight,\n  expandedRows,\n  typographyCtx,\n  maxHeight,\n}: UseRowHeightOptions): NonNullable<CSSProperties['height']> | ((row: TableRow) => number) {\n  const measurers = useMemo(\n    () => buildCellHeightMeasurers(fields, typographyCtx, maxHeight),\n    [fields, typographyCtx, maxHeight]\n  );\n  const hasWrappedCols = useMemo(() => measurers?.length ?? 0 > 0, [measurers]);\n\n  const colWidths = useMemo(() => {\n    const columnWidthAffordance = 2 * TABLE.CELL_PADDING + TABLE.BORDER_RIGHT;\n    return columnWidths.map((c) => c - columnWidthAffordance);\n  }, [columnWidths]);\n\n  const rowHeight = useMemo(() => {\n    // row height is only complicated when there are nested frames or wrapped columns.\n    if ((!hasNestedFrames && !hasWrappedCols) || typeof defaultHeight === 'string') {\n      return defaultHeight;\n    }\n\n    // this cache should get blown away on resize, data refresh, updated fields, etc.\n    // caching by __index is ok because sorting does not modify the __index.\n    const cache: Array<number | undefined> = Array(fields[0].values.length);\n    return (row: TableRow) => {\n      // nested rows\n      if (row.__depth > 0) {\n        // if unexpanded, height === 0\n        if (!expandedRows.has(row.__index)) {\n          return 0;\n        }\n\n        const rowCount = row.data?.length ?? 0;\n        if (rowCount === 0) {\n          return TABLE.NESTED_NO_DATA_HEIGHT + TABLE.CELL_PADDING * 2;\n        }\n\n        const nestedHeaderHeight = row.data?.meta?.custom?.noHeader ? 0 : defaultHeight;\n        return defaultHeight * rowCount + nestedHeaderHeight + TABLE.CELL_PADDING * 2;\n      }\n\n      // regular rows\n      let result = cache[row.__index];\n      if (!result) {\n        result = cache[row.__index] = getRowHeight(fields, row.__index, colWidths, defaultHeight, measurers);\n      }\n      return result;\n    };\n  }, [hasNestedFrames, hasWrappedCols, defaultHeight, fields, colWidths, measurers, expandedRows]);\n\n  return rowHeight;\n}\n\n/**\n * react-data-grid is a little unwieldy when it comes to column resize events.\n * we want to detect a few different column resize signals:\n *   - dragging the handle (only want to dispatch when handle is released)\n *   - double-clicking the handle (sets the column to the minimum width to fit content)\n * `onColumnResize` dispatches events throughout a dragged resize, and `onColumnWidthsChanged` doesn't\n * emit an event when double-click resizing occurs, so we have to build something custom on top of these\n * behaviors in order to get everything working.\n */\ninterface UseColumnResizeState {\n  columnKey: string | undefined;\n  width: number;\n}\n\nconst INITIAL_COL_RESIZE_STATE = Object.freeze({ columnKey: undefined, width: 0 }) satisfies UseColumnResizeState;\n\nexport function useColumnResize(\n  onColumnResize: TableColumnResizeActionCallback = () => {}\n): DataGridProps<TableRow, TableSummaryRow>['onColumnResize'] {\n  // these must be refs. if we used setState, we would run into race conditions with these event listeners\n  const colResizeState = useRef<UseColumnResizeState>({ ...INITIAL_COL_RESIZE_STATE });\n  const pointerIsDown = useRef(false);\n\n  // to detect whether we got a double-click resize, we track whether the pointer is currently down\n  useLayoutEffect(() => {\n    function pointerDown(_event: PointerEvent) {\n      pointerIsDown.current = true;\n    }\n\n    function pointerUp(_event: PointerEvent) {\n      pointerIsDown.current = false;\n    }\n\n    window.addEventListener('pointerdown', pointerDown);\n    window.addEventListener('pointerup', pointerUp);\n\n    return () => {\n      window.removeEventListener('pointerdown', pointerDown);\n      window.removeEventListener('pointerup', pointerUp);\n    };\n  });\n\n  const dispatchEvent = useCallback(() => {\n    if (colResizeState.current.columnKey) {\n      onColumnResize(colResizeState.current.columnKey, Math.floor(colResizeState.current.width));\n      colResizeState.current = { ...INITIAL_COL_RESIZE_STATE };\n    }\n    window.removeEventListener('click', dispatchEvent, { capture: true });\n  }, [onColumnResize]);\n\n  // this is the callback that gets passed to react-data-grid\n  const dataGridResizeHandler = useCallback(\n    (column: Column<TableRow, TableSummaryRow>, width: number) => {\n      if (!colResizeState.current.columnKey) {\n        window.addEventListener('click', dispatchEvent, { capture: true });\n      }\n\n      colResizeState.current.columnKey = column.key;\n      colResizeState.current.width = width;\n\n      // when double clicking to resize, this handler will fire, but the pointer will not be down,\n      // meaning that we should immediately flush the new width\n      if (!pointerIsDown.current) {\n        dispatchEvent();\n      }\n    },\n    [dispatchEvent]\n  );\n\n  return dataGridResizeHandler;\n}\n\nexport function useScrollbarWidth(ref: RefObject<DataGridHandle>, height: number) {\n  const [scrollbarWidth, setScrollbarWidth] = useState(0);\n\n  useLayoutEffect(() => {\n    const el = ref.current?.element;\n\n    if (!el) {\n      return;\n    }\n\n    const updateScrollbarDimensions = () => {\n      setScrollbarWidth(el.offsetWidth - el.clientWidth);\n    };\n\n    updateScrollbarDimensions();\n\n    const resizeObserver = new ResizeObserver(updateScrollbarDimensions);\n    resizeObserver.observe(el);\n    return () => {\n      resizeObserver.disconnect();\n    };\n  }, [ref, height]);\n\n  return scrollbarWidth;\n}\n\nconst numIsEqual = (a: number, b: number) => a === b;\n\nexport function useColWidths(\n  visibleFields: Field[],\n  availableWidth: number,\n  frozenColumns?: number\n): [number[], number] {\n  const [widths, setWidths] = useState<number[]>(computeColWidths(visibleFields, availableWidth));\n\n  // only replace the widths array if something actually changed\n  useEffect(() => {\n    const newWidths = computeColWidths(visibleFields, availableWidth);\n    if (!compareArrayValues(widths, newWidths, numIsEqual)) {\n      setWidths(newWidths);\n    }\n  }, [availableWidth, widths, visibleFields]);\n\n  // this is to avoid buggy situations where all visible columns are frozen\n  const numFrozenColsFullyInView = useMemo(() => {\n    if (!frozenColumns || frozenColumns <= 0) {\n      return -1;\n    }\n\n    const fullyVisibleCols = widths.reduce(\n      ([count, remainingWidth], nextWidth) => {\n        if (remainingWidth - nextWidth >= 0) {\n          return [count + 1, remainingWidth - nextWidth];\n        }\n        return [count, 0];\n      },\n      [0, availableWidth]\n    )[0];\n\n    // de-noise memoized changes to the columns array, and only change this\n    // number when the number of frozen columns changes or once there are fewer\n    // visible columns than the number of frozen columns.\n    return Math.min(fullyVisibleCols, frozenColumns);\n  }, [widths, availableWidth, frozenColumns]);\n\n  return [widths, numFrozenColsFullyInView];\n}\n\nconst isReducer = (maybeReducer: string): maybeReducer is ReducerID => maybeReducer in ReducerID;\nconst nonMathReducers = new Set<ReducerID>([\n  ReducerID.allValues,\n  ReducerID.changeCount,\n  ReducerID.count,\n  ReducerID.countAll,\n  ReducerID.distinctCount,\n  ReducerID.first,\n  ReducerID.firstNotNull,\n  ReducerID.last,\n  ReducerID.lastNotNull,\n  ReducerID.uniqueValues,\n]);\nconst isNonMathReducer = (reducer: string) => isReducer(reducer) && nonMathReducers.has(reducer);\nconst noFormattingReducers = new Set<ReducerID>([ReducerID.count, ReducerID.countAll]);\nconst shouldReducerSkipFormatting = (reducer: string) => isReducer(reducer) && noFormattingReducers.has(reducer);\n\nexport const useReducerEntries = (\n  field: Field,\n  rows: TableRow[],\n  displayName: string,\n  colIdx: number\n): Array<[string, string | null]> => {\n  return useMemo(() => {\n    const reducers: string[] = field.config.custom?.footer?.reducers ?? [];\n\n    if (\n      reducers.length === 0 ||\n      (field.type !== FieldType.number && reducers.every((reducerId) => !isNonMathReducer(reducerId)))\n    ) {\n      return [];\n    }\n\n    // Create a new state object that matches the original behavior exactly\n    const newState: FooterFieldState = {\n      lastProcessedRowCount: 0,\n      ...(field.state || {}), // Preserve any existing state properties\n    };\n\n    // Assign back to field\n    field.state = newState;\n\n    const currentRowCount = rows.length;\n    const lastRowCount = newState.lastProcessedRowCount;\n\n    // Check if we need to invalidate the cache\n    if (lastRowCount !== currentRowCount) {\n      // Cache should be invalidated as row count has changed\n      if (newState.calcs) {\n        delete newState.calcs;\n      }\n      // Update the row count tracker\n      newState.lastProcessedRowCount = currentRowCount;\n    }\n\n    // Calculate all specified reducers\n    const results: Record<string, number | null> = reduceField({\n      field: {\n        ...field,\n        values: rows.map((row) => row[displayName]),\n      },\n      reducers,\n    });\n\n    return reducers.map((reducerId) => {\n      if (\n        results[reducerId] === undefined ||\n        // For non-number fields, only show special count reducers\n        (field.type !== FieldType.number && !isNonMathReducer(reducerId)) ||\n        // for countAll, only show the reducer in the first column\n        (reducerId === ReducerID.countAll && colIdx !== 0)\n      ) {\n        return [reducerId, null];\n      }\n\n      const value = results[reducerId];\n      let result = null;\n      if (!shouldReducerSkipFormatting(reducerId) && field.display) {\n        result = formattedValueToString(field.display(value));\n      } else if (value != null) {\n        result = String(value);\n      }\n\n      return [reducerId, result];\n    });\n  }, [field, rows, displayName, colIdx]);\n};\n","import { css } from '@emotion/css';\nimport clsx from 'clsx';\nimport { ReactNode, useMemo } from 'react';\n\nimport { GrafanaTheme2, Field, fieldReducers, ReducerID } from '@grafana/data';\nimport { selectors } from '@grafana/e2e-selectors';\nimport { t } from '@grafana/i18n';\nimport { TableFooterOptions } from '@grafana/schema';\n\nimport { useStyles2, useTheme2 } from '../../../../themes/ThemeContext';\nimport { useReducerEntries } from '../hooks';\nimport { getDefaultCellStyles } from '../styles';\nimport { TableRow } from '../types';\nimport { getDisplayName, getJustifyContent, TextAlign } from '../utils';\n\ninterface SummaryCellProps {\n  rows: TableRow[];\n  field: Field;\n  footers: Array<TableFooterOptions | undefined>;\n  textAlign: TextAlign;\n  colIdx: number;\n  rowLabel?: boolean;\n  hideLabel?: boolean;\n}\n\nconst getReducerName = (reducerId: string): string => {\n  if (reducerId === ReducerID.countAll) {\n    return t('grafana-ui.table.footer.reducer.count', 'Count');\n  }\n  return fieldReducers.get(reducerId)?.name || reducerId;\n};\n\nexport const SummaryCell = ({\n  rows,\n  footers,\n  field,\n  colIdx,\n  hideLabel = false,\n  rowLabel = false,\n  textAlign,\n}: SummaryCellProps) => {\n  const styles = useStyles2(getStyles, textAlign, hideLabel);\n  const theme = useTheme2();\n  const defaultFooterCellStyles = getDefaultCellStyles(theme, {\n    textAlign: 'left', // alignment is set in footerItem\n    shouldOverflow: true,\n    textWrap: false,\n  });\n  const displayName = getDisplayName(field);\n  const reducerResultsEntries = useReducerEntries(field, rows, displayName, colIdx);\n  const cellClass = clsx(styles.footerCell, defaultFooterCellStyles);\n  const firstFooterReducers = useMemo(() => {\n    for (const footer of footers) {\n      if (footer?.reducers?.length ?? 0 > 0) {\n        return footer!.reducers!;\n      }\n    }\n    return;\n  }, [footers]);\n  const renderRowLabel = rowLabel && reducerResultsEntries.length === 0 && Boolean(firstFooterReducers);\n\n  const SummaryCellItem = ({ children }: { children: ReactNode }) => (\n    <div className={styles.footerItem}>{children}</div>\n  );\n  const SummaryCellLabel = ({ children }: { children: ReactNode }) => (\n    <div\n      data-testid={selectors.components.Panels.Visualization.TableNG.Footer.ReducerLabel}\n      className={styles.footerItemLabel}\n    >\n      {children}\n    </div>\n  );\n  const SummaryCellValue = ({ children }: { children: ReactNode }) => (\n    <div\n      data-testid={selectors.components.Panels.Visualization.TableNG.Footer.Value}\n      className={styles.footerItemValue}\n    >\n      {children}\n    </div>\n  );\n\n  // Render each reducer in the footer\n  return (\n    <div\n      className={cellClass}\n      data-testid={reducerResultsEntries.length === 0 && !renderRowLabel ? 'summary-cell-empty' : undefined}\n    >\n      {reducerResultsEntries.map(([reducerId, reducerResult]) => {\n        // empty reducer entry, but there may be more after - render a spacer.\n        if (reducerResult === null) {\n          return (\n            <SummaryCellItem key={reducerId}>\n              {rowLabel ? <SummaryCellLabel>{getReducerName(reducerId)}</SummaryCellLabel> : <>&nbsp;</>}\n            </SummaryCellItem>\n          );\n        }\n\n        return (\n          <SummaryCellItem key={reducerId}>\n            {!hideLabel && <SummaryCellLabel>{getReducerName(reducerId)}</SummaryCellLabel>}\n            <SummaryCellValue>{reducerResult}</SummaryCellValue>\n          </SummaryCellItem>\n        );\n      })}\n\n      {renderRowLabel &&\n        firstFooterReducers!.map((reducerId) => (\n          <SummaryCellItem key={reducerId}>\n            <SummaryCellLabel>{getReducerName(reducerId)}</SummaryCellLabel>\n          </SummaryCellItem>\n        ))}\n    </div>\n  );\n};\n\nexport const getStyles = (theme: GrafanaTheme2, textAlign: TextAlign, hideLabel: boolean) => ({\n  footerCell: css({\n    flexDirection: 'column',\n    minHeight: '100%',\n    width: '100%',\n  }),\n  footerItem: css({\n    display: 'flex',\n    flexDirection: 'row',\n    justifyContent: hideLabel ? getJustifyContent(textAlign) : 'space-between',\n    alignItems: 'flex-start',\n    width: '100%',\n    gap: theme.spacing(0.5),\n  }),\n  footerItemLabel: css({\n    flexShrink: 0,\n    overflow: 'hidden',\n    textOverflow: 'ellipsis',\n    whiteSpace: 'nowrap',\n    color: theme.colors.text.secondary,\n    fontSize: theme.typography.bodySmall.fontSize,\n    fontWeight: theme.typography.fontWeightLight,\n    textTransform: 'uppercase',\n    lineHeight: '22px',\n  }),\n  footerItemValue: css({\n    overflow: 'hidden',\n    textOverflow: 'ellipsis',\n    fontWeight: theme.typography.fontWeightMedium,\n  }),\n});\n","import { FC, SyntheticEvent } from 'react';\nimport { CellRendererProps, Column } from 'react-data-grid';\n\nimport {\n  DataFrame,\n  Field,\n  GrafanaTheme2,\n  KeyValue,\n  TimeRange,\n  FieldConfigSource,\n  ActionModel,\n  FieldType,\n  DataFrameWithValue,\n  SelectableValue,\n  FieldState,\n} from '@grafana/data';\nimport { TableCellHeight, TableFieldOptions } from '@grafana/schema';\n\nimport { TableCellInspectorMode } from '../TableCellInspector';\nimport { TableCellOptions } from '../types';\n\nimport { TextAlign } from './utils';\n\nexport const FILTER_FOR_OPERATOR = '=';\nexport const FILTER_OUT_OPERATOR = '!=';\n\nexport type AdHocFilterOperator = typeof FILTER_FOR_OPERATOR | typeof FILTER_OUT_OPERATOR;\nexport type AdHocFilterItem = { key: string; value: string; operator: AdHocFilterOperator };\nexport type TableFilterActionCallback = (item: AdHocFilterItem) => void;\nexport type TableColumnResizeActionCallback = (fieldDisplayName: string, width: number) => void;\nexport type TableSortByActionCallback = (state: TableSortByFieldState[]) => void;\nexport type FooterItem = Array<KeyValue<string>> | string | undefined;\n\nexport type GetActionsFunction = (frame: DataFrame, field: Field, rowIndex: number) => ActionModel[];\n\nexport type GetActionsFunctionLocal = (field: Field, rowIndex: number) => ActionModel[];\n\nexport type TableFieldOptionsType = Omit<TableFieldOptions, 'cellOptions'> & {\n  cellOptions: TableCellOptions;\n  headerComponent?: React.ComponentType<CustomHeaderRendererProps>;\n};\n\nexport type FilterType = Record<\n  string,\n  {\n    filteredSet: Set<string>;\n    filtered?: Array<SelectableValue<unknown>>;\n    searchFilter?: string;\n    operator?: SelectableValue<string>;\n  }\n>;\n\n/* ----------------------------- Table specific types ----------------------------- */\nexport interface TableSummaryRow {\n  [columnName: string]: string | number | undefined;\n}\n\nexport interface TableColumn extends Column<TableRow, TableSummaryRow> {\n  field: Field; // Grafana field data/config\n  width?: number | string; // Column width\n  minWidth?: number; // Min width constraint\n}\n\n// Possible values for table cells based on field types\nexport type TableCellValue =\n  | string // FieldType.string, FieldType.enum\n  | number // FieldType.number\n  | boolean // FieldType.boolean\n  | Date // FieldType.time\n  | DataFrame // For nested data\n  | DataFrame[] // For nested frames\n  | DataFrameWithValue // For sparklines\n  | undefined; // For undefined values\n\nexport interface TableRow {\n  // Required metadata properties\n  __depth: number;\n  __index: number;\n\n  // Nested table properties\n  data?: DataFrame;\n  __nestedFrames?: DataFrame[];\n  __expanded?: boolean; // For row expansion state\n\n  // Generic typing for column values\n  [columnName: string]: TableCellValue;\n}\n\nexport interface CustomCellRendererProps {\n  field: Field;\n  rowIndex: number;\n  frame: DataFrame;\n  // Would be great to have generic type for this but that would need having a generic DataFrame type where the field\n  // types could be propagated here.\n  value: unknown;\n}\n\nexport interface CustomHeaderRendererProps {\n  field: Field;\n  defaultContent: React.ReactNode;\n}\n\nexport interface TableSortByFieldState {\n  displayName: string;\n  desc?: boolean;\n}\n\nexport interface BaseTableProps {\n  ariaLabel?: string;\n  data: DataFrame;\n  width: number;\n  height: number;\n  maxHeight?: number;\n  /** Minimal column width specified in pixels */\n  columnMinWidth?: number;\n  noHeader?: boolean;\n  showTypeIcons?: boolean;\n  resizable?: boolean;\n  initialSortBy?: TableSortByFieldState[];\n  onColumnResize?: TableColumnResizeActionCallback;\n  onSortByChange?: TableSortByActionCallback;\n  onCellFilterAdded?: TableFilterActionCallback;\n  footerValues?: FooterItem[];\n  frozenColumns?: number;\n  enablePagination?: boolean;\n  cellHeight?: TableCellHeight;\n  maxRowHeight?: number;\n  structureRev?: number;\n  transparent?: boolean;\n  /** @alpha Used by SparklineCell when provided */\n  timeRange?: TimeRange;\n  enableSharedCrosshair?: boolean;\n  // The index of the field value that the table will initialize scrolled to\n  initialRowIndex?: number;\n  fieldConfig?: FieldConfigSource;\n  getActions?: GetActionsFunction;\n  // Used solely for testing as RTL can't correctly render the table otherwise\n  enableVirtualization?: boolean;\n  // for MarkdownCell, this flag disables sanitization of HTML content. Configured via config.ini.\n  disableSanitizeHtml?: boolean;\n}\n\n/* ---------------------------- Table cell props ---------------------------- */\nexport interface TableNGProps extends BaseTableProps {}\n\nexport type TableCellRenderer = FC<TableCellRendererProps>;\n\nexport interface TableCellRendererProps {\n  rowIdx: number;\n  frame: DataFrame;\n  timeRange?: TimeRange;\n  value: TableCellValue;\n  height: number;\n  // flags that are static per column\n  field: Field;\n  cellOptions: TableCellOptions;\n  width: number;\n  theme: GrafanaTheme2;\n  cellInspect: boolean;\n  showFilters: boolean;\n  getActions?: GetActionsFunctionLocal;\n  disableSanitizeHtml?: boolean;\n  getTextColorForBackground: (color: string) => string;\n}\n\nexport type InspectCellProps = {\n  rowIdx?: number;\n  value: string;\n  mode?: TableCellInspectorMode.code | TableCellInspectorMode.text;\n};\n\nexport interface TableCellActionsProps {\n  field: Field;\n  value: TableCellValue;\n  cellOptions: TableCellOptions;\n  displayName: string;\n  cellInspect: boolean;\n  showFilters: boolean;\n  setInspectCell: React.Dispatch<React.SetStateAction<InspectCellProps | null>>;\n  className?: string;\n  onCellFilterAdded?: TableFilterActionCallback;\n}\n\n/* ------------------------- Specialized Cell Props ------------------------- */\nexport interface RowExpanderNGProps {\n  onCellExpand: (e: SyntheticEvent) => void;\n  isExpanded?: boolean;\n}\n\nexport interface SparklineCellProps {\n  field: Field;\n  rowIdx: number;\n  theme: GrafanaTheme2;\n  timeRange?: TimeRange;\n  value: TableCellValue;\n  width: number;\n}\n\nexport interface BarGaugeCellProps {\n  field: Field;\n  height: number;\n  rowIdx: number;\n  theme: GrafanaTheme2;\n  value: TableCellValue;\n  width: number;\n}\n\nexport interface ImageCellProps {\n  cellOptions: TableCellOptions;\n  field: Field;\n  value: TableCellValue;\n  rowIdx: number;\n}\n\nexport interface DataLinksCellProps {\n  field: Field;\n  rowIdx: number;\n}\n\nexport interface GeoCellProps {\n  value: TableCellValue;\n  height: number;\n}\n\nexport interface AutoCellProps {\n  field: Field;\n  value: TableCellValue;\n  rowIdx: number;\n}\n\nexport interface MarkdownCellProps {\n  field: Field;\n  rowIdx: number;\n  disableSanitizeHtml?: boolean;\n}\n\nexport interface ActionCellProps {\n  field: Field;\n  rowIdx: number;\n  getActions: GetActionsFunctionLocal;\n}\n\nexport interface PillCellProps {\n  theme: GrafanaTheme2;\n  field: Field;\n  rowIdx: number;\n  getTextColorForBackground: (color: string) => string;\n}\n\nexport interface TableCellStyleOptions {\n  textWrap: boolean;\n  textAlign: TextAlign;\n  shouldOverflow: boolean;\n  maxHeight?: number;\n}\n\nexport type TableCellStyles = (theme: GrafanaTheme2, options: TableCellStyleOptions) => string;\n\n// Comparator for sorting table values\nexport type Comparator = (a: TableCellValue, b: TableCellValue) => number;\n\n// Type for converting a DataFrame into an array of TableRows\nexport type FrameToRowsConverter = (frame: DataFrame) => TableRow[];\n\n// Type for mapping column names to their field types\nexport type ColumnTypes = Record<string, FieldType>;\n\nexport interface ScrollPosition {\n  x: number;\n  y: number;\n}\n\nexport interface TypographyCtx {\n  ctx: CanvasRenderingContext2D;\n  fontFamily: string;\n  letterSpacing: number;\n  avgCharWidth: number;\n  estimateHeight: MeasureCellHeight;\n  measureHeight: MeasureCellHeight;\n}\n\nexport type MeasureCellHeight = (\n  value: unknown,\n  width: number,\n  field: Field,\n  rowIdx: number,\n  lineHeight: number\n) => number;\nexport interface MeasureCellHeightEntry {\n  /**\n   * given a values and the available width, returns the line count for that value\n   */\n  measure: MeasureCellHeight;\n  /**\n   * if getting an accurate line count is expensive, you can provide an estimate method\n   * which will be used when looping over the row. the method will only be invoked\n   * for the cell which is the maximum line count for the row.\n   */\n  estimate?: MeasureCellHeight;\n  /**\n   * indicates which field indexes of the visible fields this measurer applies to.\n   */\n  fieldIdxs: number[];\n}\n\nexport type CellRootRenderer = (key: React.Key, props: CellRendererProps<TableRow, TableSummaryRow>) => React.ReactNode;\n\nexport interface FromFieldsResult {\n  columns: TableColumn[];\n  cellRootRenderers: Record<string, CellRootRenderer>;\n  colsWithTooltip: Record<string, boolean>;\n}\n\nexport interface FooterFieldState extends FieldState {\n  lastProcessedRowCount: number;\n}\n","import WKT from 'ol/format/WKT';\nimport Geometry from 'ol/geom/Geometry';\nimport { memo } from 'react';\n\nimport { FieldType } from '@grafana/data';\nimport { t } from '@grafana/i18n';\n\nimport { IconButton } from '../../../IconButton/IconButton';\nimport { TableCellInspectorMode } from '../../TableCellInspector';\nimport { TableCellDisplayMode } from '../../types';\nimport { FILTER_FOR_OPERATOR, FILTER_OUT_OPERATOR, TableCellActionsProps } from '../types';\n\nexport const TableCellActions = memo(\n  ({\n    field,\n    value,\n    cellOptions,\n    displayName,\n    setInspectCell,\n    onCellFilterAdded,\n    className,\n    cellInspect,\n    showFilters,\n  }: TableCellActionsProps) => (\n    // stopping propagation to prevent clicks within the actions menu from triggering the cell click events\n    // for things like the data links tooltip.\n    // eslint-disable-next-line jsx-a11y/click-events-have-key-events, jsx-a11y/no-static-element-interactions\n    <div className={className} onClick={(ev) => ev.stopPropagation()}>\n      {cellInspect && (\n        <IconButton\n          name=\"eye\"\n          aria-label={t('grafana-ui.table.cell-inspect-tooltip', 'Inspect value')}\n          onClick={() => {\n            let inspectValue = value;\n            let mode = TableCellInspectorMode.text;\n\n            if (field.type === FieldType.geo && value instanceof Geometry) {\n              inspectValue = new WKT().writeGeometry(value, {\n                featureProjection: 'EPSG:3857',\n                dataProjection: 'EPSG:4326',\n              });\n              mode = TableCellInspectorMode.code;\n            }\n            if (cellOptions.type === TableCellDisplayMode.JSONView) {\n              mode = TableCellInspectorMode.code;\n            }\n\n            setInspectCell({\n              value: String(inspectValue ?? ''),\n              mode,\n            });\n          }}\n        />\n      )}\n      {showFilters && (\n        <>\n          <IconButton\n            name={'filter-plus'}\n            aria-label={t('grafana-ui.table.cell-filter-on', 'Filter for value')}\n            onClick={() => {\n              onCellFilterAdded?.({\n                key: displayName,\n                operator: FILTER_FOR_OPERATOR,\n                value: String(value ?? ''),\n              });\n            }}\n          />\n          <IconButton\n            name={'filter-minus'}\n            aria-label={t('grafana-ui.table.cell-filter-out', 'Filter out value')}\n            onClick={() => {\n              onCellFilterAdded?.({\n                key: displayName,\n                operator: FILTER_OUT_OPERATOR,\n                value: String(value ?? ''),\n              });\n            }}\n          />\n        </>\n      )}\n    </div>\n  )\n);\nTableCellActions.displayName = 'TableCellActions';\n","import { CSSProperties, ReactElement, useMemo, useState, useRef, useEffect, memo, RefObject } from 'react';\nimport { DataGridHandle } from 'react-data-grid';\n\nimport { ActionModel, DataFrame, Field, GrafanaTheme2 } from '@grafana/data';\nimport { selectors } from '@grafana/e2e-selectors';\nimport { TableCellTooltipPlacement } from '@grafana/schema';\n\nimport { Popover } from '../../../Tooltip/Popover';\nimport { TableCellOptions } from '../../types';\nimport { getTooltipStyles } from '../styles';\nimport { TableCellRenderer, TableCellRendererProps } from '../types';\n\nexport interface TableCellTooltipProps {\n  cellOptions: TableCellOptions;\n  children: ReactElement;\n  classes: ReturnType<typeof getTooltipStyles>;\n  className?: string;\n  data: DataFrame;\n  disableSanitizeHtml?: boolean;\n  field: Field;\n  getActions: (field: Field, rowIdx: number) => ActionModel[];\n  getTextColorForBackground: (bgColor: string) => string;\n  gridRef: RefObject<DataGridHandle>;\n  height: number;\n  placement?: TableCellTooltipPlacement;\n  renderer: TableCellRenderer;\n  rowIdx: number;\n  style?: CSSProperties;\n  tooltipField: Field;\n  theme: GrafanaTheme2;\n  width?: number;\n}\n\nexport const TableCellTooltip = memo(\n  ({\n    cellOptions,\n    children,\n    classes,\n    className,\n    data,\n    disableSanitizeHtml,\n    field,\n    getActions,\n    getTextColorForBackground,\n    gridRef,\n    height,\n    placement,\n    renderer: CellRenderer,\n    rowIdx,\n    style,\n    theme,\n    tooltipField,\n    width = 300,\n  }: TableCellTooltipProps) => {\n    const rawValue = field.values[rowIdx];\n    const tooltipCaretRef = useRef<HTMLDivElement>(null);\n\n    const [hovered, setHovered] = useState(false);\n    const [pinned, setPinned] = useState(false);\n\n    const show = hovered || pinned;\n    const dynamicHeight = tooltipField.config.custom?.cellOptions?.dynamicHeight;\n\n    useEffect(() => {\n      if (pinned) {\n        const gridRoot = gridRef.current?.element;\n\n        const windowListener = (ev: Event) => {\n          if (ev.target === tooltipCaretRef.current) {\n            return;\n          }\n\n          setPinned(false);\n          window.removeEventListener('click', windowListener);\n        };\n\n        window.addEventListener('click', windowListener);\n\n        // right now, we kill the pinned tooltip on any form of scrolling to avoid awkward rendering\n        // where the tooltip bumps up against the edge of the scrollable container. we could try to\n        // kill the tooltip when it hits these boundaries rather than when scrolling starts.\n        const scrollListener = () => {\n          setPinned(false);\n        };\n        gridRoot?.addEventListener('scroll', scrollListener, { once: true });\n\n        return () => {\n          window.removeEventListener('click', windowListener);\n          gridRoot?.removeEventListener('scroll', scrollListener);\n        };\n      }\n\n      return;\n    }, [pinned, gridRef]);\n\n    const rendererProps = useMemo(\n      () =>\n        ({\n          cellInspect: false,\n          cellOptions,\n          disableSanitizeHtml,\n          field,\n          frame: data,\n          getActions,\n          getTextColorForBackground,\n          height,\n          rowIdx,\n          showFilters: false,\n          theme,\n          value: rawValue,\n          width,\n        }) satisfies TableCellRendererProps,\n      [\n        cellOptions,\n        data,\n        disableSanitizeHtml,\n        field,\n        getActions,\n        getTextColorForBackground,\n        height,\n        rawValue,\n        rowIdx,\n        theme,\n        width,\n      ]\n    );\n\n    const cellElement = tooltipCaretRef.current?.closest<HTMLElement>('.rdg-cell');\n\n    if (rawValue === null || rawValue === undefined) {\n      return children;\n    }\n\n    // TODO: perist the hover if you mouse out of the trigger and into the popover\n    const onMouseLeave = () => setHovered(false);\n    const onMouseEnter = () => setHovered(true);\n\n    return (\n      <>\n        {cellElement && (\n          <Popover\n            content={<CellRenderer {...rendererProps} />}\n            show={show}\n            placement={placement}\n            wrapperClassName={classes.tooltipWrapper}\n            className={className}\n            style={{ ...style, width, ...(!dynamicHeight && { height }) }}\n            referenceElement={cellElement}\n            onMouseLeave={onMouseLeave}\n            onMouseEnter={onMouseEnter}\n            onClick={(ev) => ev.stopPropagation()} // prevent click from bubbling to the global click listener for un-pinning\n            data-testid={selectors.components.Panels.Visualization.TableNG.Tooltip.Wrapper}\n          />\n        )}\n\n        {/* TODO: figure out an accessible way to trigger the tooltip. */}\n        {/* eslint-disable-next-line jsx-a11y/click-events-have-key-events, jsx-a11y/no-static-element-interactions */}\n        <div\n          className={classes.tooltipCaret}\n          ref={tooltipCaretRef}\n          data-testid={selectors.components.Panels.Visualization.TableNG.Tooltip.Caret}\n          aria-pressed={pinned}\n          onClick={() => setPinned((prev) => !prev)}\n          onMouseLeave={onMouseLeave}\n          onMouseEnter={onMouseEnter}\n          onBlur={onMouseLeave}\n          onFocus={onMouseEnter}\n        />\n\n        {children}\n      </>\n    );\n  }\n);\nTableCellTooltip.displayName = 'TableCellTooltip';\n","import 'react-data-grid/lib/styles.css';\n\nimport { clsx } from 'clsx';\nimport memoize from 'micro-memoize';\nimport { CSSProperties, Key, ReactNode, useCallback, useMemo, useRef, useState } from 'react';\nimport {\n  Cell,\n  CellRendererProps,\n  DataGrid,\n  DataGridHandle,\n  DataGridProps,\n  RenderCellProps,\n  Renderers,\n  RenderRowProps,\n  Row,\n  SortColumn,\n} from 'react-data-grid';\n\nimport {\n  DataHoverClearEvent,\n  DataHoverEvent,\n  FALLBACK_COLOR,\n  Field,\n  FieldType,\n  getDisplayProcessor,\n} from '@grafana/data';\nimport { Trans } from '@grafana/i18n';\nimport { FieldColorModeId, TableCellTooltipPlacement, TableFooterOptions } from '@grafana/schema';\n\nimport { useStyles2, useTheme2 } from '../../../themes/ThemeContext';\nimport { getTextColorForBackground as _getTextColorForBackground } from '../../../utils/colors';\nimport { Pagination } from '../../Pagination/Pagination';\nimport { PanelContext, usePanelContext } from '../../PanelChrome';\nimport { DataLinksActionsTooltip } from '../DataLinksActionsTooltip';\nimport { TableCellInspector, TableCellInspectorMode } from '../TableCellInspector';\nimport { TableCellDisplayMode } from '../types';\nimport { DataLinksActionsTooltipState } from '../utils';\n\nimport { getCellRenderer, getCellSpecificStyles } from './Cells/renderers';\nimport { HeaderCell } from './components/HeaderCell';\nimport { RowExpander } from './components/RowExpander';\nimport { SummaryCell } from './components/SummaryCell';\nimport { TableCellActions } from './components/TableCellActions';\nimport { TableCellTooltip } from './components/TableCellTooltip';\nimport { COLUMN, TABLE } from './constants';\nimport {\n  useColumnResize,\n  useColWidths,\n  useFilteredRows,\n  useHeaderHeight,\n  usePaginatedRows,\n  useRowHeight,\n  useScrollbarWidth,\n  useSortedRows,\n} from './hooks';\nimport {\n  getCellActionStyles,\n  getDefaultCellStyles,\n  getGridStyles,\n  getHeaderCellStyles,\n  getLinkStyles,\n  getMaxHeightCellStyles,\n  getTooltipStyles,\n} from './styles';\nimport {\n  TableNGProps,\n  TableRow,\n  TableSummaryRow,\n  TableColumn,\n  InspectCellProps,\n  TableCellStyleOptions,\n  FromFieldsResult,\n  CellRootRenderer,\n} from './types';\nimport {\n  applySort,\n  canFieldBeColorized,\n  calculateFooterHeight,\n  createTypographyContext,\n  displayJsonValue,\n  extractPixelValue,\n  frameToRecords,\n  getAlignment,\n  getApplyToRowBgFn,\n  getCellColorInlineStylesFactory,\n  getCellLinks,\n  getCellOptions,\n  getDefaultRowHeight,\n  getDisplayName,\n  getIsNestedTable,\n  getJustifyContent,\n  getVisibleFields,\n  isCellInspectEnabled,\n  predicateByName,\n  shouldTextOverflow,\n  shouldTextWrap,\n  withDataLinksActionsTooltip,\n  getSummaryCellTextAlign,\n} from './utils';\n\nconst EXPANDED_COLUMN_KEY = 'expanded';\n\nexport function TableNG(props: TableNGProps) {\n  const {\n    cellHeight,\n    data,\n    disableSanitizeHtml,\n    enablePagination = false,\n    enableSharedCrosshair = false,\n    enableVirtualization,\n    frozenColumns = 0,\n    getActions = () => [],\n    height,\n    initialSortBy,\n    maxRowHeight: _maxRowHeight,\n    noHeader,\n    onCellFilterAdded,\n    onColumnResize,\n    onSortByChange,\n    showTypeIcons,\n    structureRev,\n    timeRange,\n    transparent,\n    width,\n  } = props;\n\n  const theme = useTheme2();\n  const styles = useStyles2(getGridStyles, enablePagination, transparent);\n  const panelContext = usePanelContext();\n  const userCanExecuteActions = useMemo(() => panelContext.canExecuteActions?.() ?? false, [panelContext]);\n\n  const getCellActions = useCallback(\n    (field: Field, rowIdx: number) => {\n      if (!userCanExecuteActions) {\n        return [];\n      }\n      return getActions(data, field, rowIdx);\n    },\n    [getActions, data, userCanExecuteActions]\n  );\n\n  const visibleFields = useMemo(() => getVisibleFields(data.fields), [data.fields]);\n  const hasHeader = !noHeader;\n  const hasFooter = useMemo(\n    () => visibleFields.some((field) => Boolean(field.config.custom?.footer?.reducers?.length)),\n    [visibleFields]\n  );\n  const footerHeight = useMemo(\n    () => (hasFooter ? calculateFooterHeight(visibleFields) : 0),\n    [hasFooter, visibleFields]\n  );\n\n  const resizeHandler = useColumnResize(onColumnResize);\n\n  const rows = useMemo(() => frameToRecords(data), [data]);\n  const hasNestedFrames = useMemo(() => getIsNestedTable(data.fields), [data]);\n  const getTextColorForBackground = useMemo(() => memoize(_getTextColorForBackground, { maxSize: 1000 }), []);\n\n  const {\n    rows: filteredRows,\n    filter,\n    setFilter,\n    crossFilterOrder,\n    crossFilterRows,\n  } = useFilteredRows(rows, data.fields, { hasNestedFrames });\n\n  const {\n    rows: sortedRows,\n    sortColumns,\n    setSortColumns,\n  } = useSortedRows(filteredRows, data.fields, { hasNestedFrames, initialSortBy });\n\n  const [inspectCell, setInspectCell] = useState<InspectCellProps | null>(null);\n  const [tooltipState, setTooltipState] = useState<DataLinksActionsTooltipState>();\n  const [expandedRows, setExpandedRows] = useState(() => new Set<number>());\n\n  // vt scrollbar accounting for column auto-sizing\n\n  const defaultRowHeight = useMemo(\n    () => getDefaultRowHeight(theme, visibleFields, cellHeight),\n    [theme, visibleFields, cellHeight]\n  );\n  const gridRef = useRef<DataGridHandle>(null);\n  const scrollbarWidth = useScrollbarWidth(gridRef, height);\n  const availableWidth = useMemo(\n    () => (hasNestedFrames ? width - COLUMN.EXPANDER_WIDTH : width) - scrollbarWidth,\n    [width, hasNestedFrames, scrollbarWidth]\n  );\n  const getCellColorInlineStyles = useMemo(() => getCellColorInlineStylesFactory(theme), [theme]);\n  const applyToRowBgFn = useMemo(\n    () => getApplyToRowBgFn(data.fields, getCellColorInlineStyles) ?? undefined,\n    [data.fields, getCellColorInlineStyles]\n  );\n  const typographyCtx = useMemo(\n    () =>\n      createTypographyContext(\n        theme.typography.fontSize,\n        theme.typography.fontFamily,\n        extractPixelValue(theme.typography.body.letterSpacing!) * theme.typography.fontSize\n      ),\n    [theme]\n  );\n\n  const [widths, numFrozenColsFullyInView] = useColWidths(visibleFields, availableWidth, frozenColumns);\n\n  const headerHeight = useHeaderHeight({\n    columnWidths: widths,\n    fields: visibleFields,\n    enabled: hasHeader,\n    sortColumns,\n    showTypeIcons: showTypeIcons ?? false,\n    typographyCtx,\n  });\n  // the minimum max row height we should honor is a single line of text.\n  const maxRowHeight = _maxRowHeight != null ? Math.max(TABLE.LINE_HEIGHT, _maxRowHeight) : undefined;\n  const rowHeight = useRowHeight({\n    columnWidths: widths,\n    fields: visibleFields,\n    hasNestedFrames,\n    defaultHeight: defaultRowHeight,\n    expandedRows,\n    typographyCtx,\n    maxHeight: maxRowHeight,\n  });\n\n  const {\n    rows: paginatedRows,\n    page,\n    setPage,\n    numPages,\n    pageRangeStart,\n    pageRangeEnd,\n    smallPagination,\n  } = usePaginatedRows(sortedRows, {\n    enabled: enablePagination,\n    width: availableWidth,\n    height,\n    footerHeight,\n    headerHeight: hasHeader ? TABLE.HEADER_ROW_HEIGHT : 0,\n    rowHeight,\n  });\n\n  const [footers, isUniformFooter] = useMemo(() => {\n    const footers: Array<TableFooterOptions | undefined> = [];\n    let isUniformFooter = true;\n    let firstReducers: string[] | undefined;\n    for (const field of visibleFields) {\n      const footer = field.config?.custom?.footer;\n      footers.push(footer);\n\n      if (firstReducers === undefined && (footer?.reducers?.length ?? 0) > 0) {\n        firstReducers = footer?.reducers; // store the reducers for the first visible array with a footer.\n      } else if (firstReducers !== undefined) {\n        // once we have a list of reducers, compare each subsequent footer's reducers to the first.\n        const reducers: string[] | undefined = footer?.reducers;\n\n        // ignore fields with no footer reducers.\n        if (reducers?.length ?? 0 > 0) {\n          // isUniformFooter is false if there are different numbers of reducers or if the reducers are not identical.\n          if (reducers!.length !== firstReducers!.length || reducers!.some((r, idx) => firstReducers?.[idx] !== r)) {\n            isUniformFooter = false;\n            break;\n          }\n        }\n      }\n    }\n    return [footers, isUniformFooter];\n  }, [visibleFields]);\n\n  // normalize the row height into a function which returns a number, so we avoid a bunch of conditionals during rendering.\n  const rowHeightFn = useMemo((): ((row: TableRow) => number) => {\n    if (typeof rowHeight === 'function') {\n      return rowHeight;\n    }\n    if (typeof rowHeight === 'string') {\n      return () => TABLE.MAX_CELL_HEIGHT;\n    }\n    return () => rowHeight;\n  }, [rowHeight]);\n\n  const renderRow = useMemo(\n    () => renderRowFactory(data.fields, panelContext, expandedRows, enableSharedCrosshair),\n    [data, enableSharedCrosshair, expandedRows, panelContext]\n  );\n\n  const commonDataGridProps = useMemo(\n    () =>\n      ({\n        enableVirtualization: enableVirtualization !== false && rowHeight !== 'auto',\n        defaultColumnOptions: {\n          minWidth: 50,\n          resizable: true,\n          sortable: true,\n          // draggable: true,\n        },\n        onColumnResize: resizeHandler,\n        onSortColumnsChange: (newSortColumns: SortColumn[]) => {\n          setSortColumns(newSortColumns);\n          onSortByChange?.(\n            newSortColumns.map(({ columnKey, direction }) => ({\n              displayName: columnKey,\n              desc: direction === 'DESC',\n            }))\n          );\n        },\n        sortColumns,\n        rowHeight,\n        bottomSummaryRows: hasFooter ? [{}] : undefined,\n        summaryRowHeight: footerHeight,\n        headerRowClass: styles.headerRow,\n        headerRowHeight: noHeader ? 0 : TABLE.HEADER_ROW_HEIGHT,\n      }) satisfies Partial<DataGridProps<TableRow, TableSummaryRow>>,\n    [\n      enableVirtualization,\n      hasFooter,\n      resizeHandler,\n      sortColumns,\n      rowHeight,\n      styles.headerRow,\n      noHeader,\n      setSortColumns,\n      onSortByChange,\n      footerHeight,\n    ]\n  );\n\n  const buildNestedTableExpanderColumn = useCallback(\n    (\n      nestedColumns: TableColumn[],\n      hasNestedHeaders: boolean,\n      renderers: Renderers<TableRow, TableSummaryRow>\n    ): TableColumn => ({\n      key: EXPANDED_COLUMN_KEY,\n      name: '',\n      field: {\n        name: '',\n        type: FieldType.other,\n        config: {},\n        values: [],\n      },\n      cellClass(row) {\n        if (row.__depth !== 0) {\n          return styles.cellNested;\n        }\n        return;\n      },\n      colSpan(args) {\n        return args.type === 'ROW' && args.row.__depth === 1 ? data.fields.length : 1;\n      },\n      renderCell: ({ row }) => {\n        if (row.__depth === 0) {\n          const rowIdx = row.__index;\n\n          return (\n            <RowExpander\n              isExpanded={expandedRows.has(rowIdx)}\n              onCellExpand={() => {\n                if (expandedRows.has(rowIdx)) {\n                  expandedRows.delete(rowIdx);\n                } else {\n                  expandedRows.add(rowIdx);\n                }\n                setExpandedRows(new Set(expandedRows));\n              }}\n            />\n          );\n        }\n\n        // Type guard to check if data exists as it's optional\n        const nestedData = row.data;\n        if (!nestedData) {\n          return null;\n        }\n\n        const expandedRecords = applySort(frameToRecords(nestedData), nestedData.fields, sortColumns);\n        if (!expandedRecords.length) {\n          return (\n            <div className={styles.noDataNested}>\n              <Trans i18nKey=\"grafana-ui.table.nested-table.no-data\">No data</Trans>\n            </div>\n          );\n        }\n\n        return (\n          <DataGrid<TableRow, TableSummaryRow>\n            {...commonDataGridProps}\n            className={clsx(styles.grid, styles.gridNested)}\n            headerRowClass={clsx(styles.headerRow, { [styles.displayNone]: !hasNestedHeaders })}\n            headerRowHeight={hasNestedHeaders ? TABLE.HEADER_HEIGHT : 0}\n            columns={nestedColumns}\n            rows={expandedRecords}\n            renderers={renderers}\n          />\n        );\n      },\n      width: COLUMN.EXPANDER_WIDTH,\n      minWidth: COLUMN.EXPANDER_WIDTH,\n    }),\n    [commonDataGridProps, data.fields.length, expandedRows, sortColumns, styles]\n  );\n\n  const fromFields = useCallback(\n    (f: Field[], widths: number[]): FromFieldsResult => {\n      const result: FromFieldsResult = {\n        columns: [],\n        cellRootRenderers: {},\n        colsWithTooltip: {},\n      };\n\n      let lastRowIdx = -1;\n      // shared when whole row will be styled by a single cell's color\n      let rowCellStyle: Partial<CSSProperties> = {\n        color: undefined,\n        background: undefined,\n      };\n\n      f.forEach((field, i) => {\n        const cellOptions = getCellOptions(field);\n        const cellType = cellOptions.type;\n\n        // make sure we use mappings exclusively if they exist, ignore default thresholds mode\n        // we hack this by using the single color mode calculator\n        if (cellType === TableCellDisplayMode.Pill && (field.config.mappings?.length ?? 0 > 0)) {\n          field = {\n            ...field,\n            config: {\n              ...field.config,\n              color: {\n                ...field.config.color,\n                mode: FieldColorModeId.Fixed,\n                fixedColor: field.config.color?.fixedColor ?? FALLBACK_COLOR,\n              },\n            },\n          };\n          field.display = getDisplayProcessor({ field, theme });\n        }\n\n        // attach JSONCell custom display function to JSONView cell type\n        if (cellType === TableCellDisplayMode.JSONView || field.type === FieldType.other) {\n          field.display = displayJsonValue;\n        }\n\n        // For some cells, \"aligning\" the cell will mean aligning the inline contents of the cell with\n        // the text-align css property, and for others, we'll use justify-content to align the cell\n        // contents with flexbox. We always just get both and provide both when styling the cell.\n        const textAlign = getAlignment(field);\n        const justifyContent = getJustifyContent(textAlign);\n        const displayName = getDisplayName(field);\n        const headerCellClass = getHeaderCellStyles(theme, justifyContent);\n        const CellType = getCellRenderer(field, cellOptions);\n\n        const cellInspect = isCellInspectEnabled(field);\n        const showFilters = Boolean(field.config.filterable && onCellFilterAdded != null);\n        const showActions = cellInspect || showFilters;\n        const width = widths[i];\n\n        // helps us avoid string cx and emotion per-cell\n        const cellActionClassName = showActions\n          ? clsx('table-cell-actions', getCellActionStyles(theme, textAlign))\n          : undefined;\n\n        const shouldOverflow = rowHeight !== 'auto' && (shouldTextOverflow(field) || Boolean(maxRowHeight));\n        const textWrap = rowHeight === 'auto' || shouldTextWrap(field);\n        const withTooltip = withDataLinksActionsTooltip(field, cellType);\n        const canBeColorized = canFieldBeColorized(cellType, applyToRowBgFn);\n        const cellStyleOptions: TableCellStyleOptions = {\n          textAlign,\n          textWrap,\n          shouldOverflow,\n          maxHeight: maxRowHeight,\n        };\n\n        result.colsWithTooltip[displayName] = withTooltip;\n\n        const defaultCellStyles = getDefaultCellStyles(theme, cellStyleOptions);\n        const cellSpecificStyles = getCellSpecificStyles(cellType, field, theme, cellStyleOptions);\n        const linkStyles = getLinkStyles(theme, canBeColorized);\n        const cellParentStyles = clsx(defaultCellStyles, linkStyles);\n        const maxHeightClassName = maxRowHeight ? getMaxHeightCellStyles(theme, cellStyleOptions) : undefined;\n\n        // TODO: in future extend this to ensure a non-classic color scheme is set with AutoCell\n\n        // this fires first\n        const renderCellRoot = (key: Key, props: CellRendererProps<TableRow, TableSummaryRow>): ReactNode => {\n          const rowIdx = props.row.__index;\n\n          // meh, this should be cached by the renderRow() call?\n          if (rowIdx !== lastRowIdx) {\n            lastRowIdx = rowIdx;\n\n            rowCellStyle.color = undefined;\n            rowCellStyle.background = undefined;\n\n            // generate shared styles for whole row\n            if (applyToRowBgFn != null) {\n              rowCellStyle = { ...rowCellStyle, ...applyToRowBgFn(rowIdx) };\n            }\n          }\n\n          let style: CSSProperties = { ...rowCellStyle };\n          if (canBeColorized) {\n            const value = props.row[props.column.key];\n            const displayValue = field.display!(value); // this fires here to get colors, then again to get rendered value?\n            const cellColorStyles = getCellColorInlineStyles(cellOptions, displayValue, applyToRowBgFn != null);\n            Object.assign(style, cellColorStyles);\n          }\n\n          return (\n            <Cell\n              key={key}\n              {...props}\n              className={clsx(\n                props.className,\n                cellParentStyles,\n                cellSpecificStyles != null && { [cellSpecificStyles]: maxRowHeight == null }\n              )}\n              style={style}\n            />\n          );\n        };\n\n        result.cellRootRenderers[displayName] = renderCellRoot;\n\n        const renderBasicCellContent = (props: RenderCellProps<TableRow, TableSummaryRow>): JSX.Element => {\n          const rowIdx = props.row.__index;\n          const value = props.row[props.column.key];\n          // TODO: it would be nice to get rid of passing height down as a prop. but this value\n          // is cached so the cost of calling for every cell is low.\n          // NOTE: some cell types still require a height to be passed down, so that's why string-based\n          // cell types are going to just pass down the max cell height as a numeric height for those cells.\n          const height = rowHeightFn(props.row);\n          const frame = data;\n\n          let result = (\n            <>\n              <CellType\n                cellOptions={cellOptions}\n                frame={frame}\n                field={field}\n                height={height}\n                rowIdx={rowIdx}\n                theme={theme}\n                value={value}\n                width={width}\n                timeRange={timeRange}\n                cellInspect={cellInspect}\n                showFilters={showFilters}\n                getActions={getCellActions}\n                disableSanitizeHtml={disableSanitizeHtml}\n                getTextColorForBackground={getTextColorForBackground}\n              />\n              {showActions && (\n                <TableCellActions\n                  field={field}\n                  value={value}\n                  cellOptions={cellOptions}\n                  displayName={displayName}\n                  cellInspect={cellInspect}\n                  showFilters={showFilters}\n                  className={cellActionClassName}\n                  setInspectCell={setInspectCell}\n                  onCellFilterAdded={onCellFilterAdded}\n                />\n              )}\n            </>\n          );\n\n          if (maxRowHeight != null) {\n            result = <div className={clsx(maxHeightClassName, cellSpecificStyles)}>{result}</div>;\n          }\n\n          return result;\n        };\n\n        // renderCellContent fires second.\n        let renderCellContent = renderBasicCellContent;\n\n        const tooltipFieldName = field.config.custom?.tooltip?.field;\n        if (tooltipFieldName) {\n          const tooltipField = data.fields.find(predicateByName(tooltipFieldName));\n          if (tooltipField) {\n            const tooltipDisplayName = getDisplayName(tooltipField);\n            const tooltipCellOptions = getCellOptions(tooltipField);\n            const tooltipFieldRenderer = getCellRenderer(tooltipField, tooltipCellOptions);\n\n            const tooltipCellStyleOptions = {\n              textAlign: getAlignment(tooltipField),\n              textWrap: shouldTextWrap(tooltipField),\n              shouldOverflow: false,\n              maxHeight: maxRowHeight,\n            } satisfies TableCellStyleOptions;\n            const tooltipCanBeColorized = canFieldBeColorized(tooltipCellOptions.type, applyToRowBgFn);\n            const tooltipDefaultStyles = getDefaultCellStyles(theme, tooltipCellStyleOptions);\n            const tooltipSpecificStyles = getCellSpecificStyles(\n              tooltipCellOptions.type,\n              tooltipField,\n              theme,\n              tooltipCellStyleOptions\n            );\n            const tooltipLinkStyles = getLinkStyles(theme, tooltipCanBeColorized);\n            const tooltipClasses = getTooltipStyles(theme, textAlign);\n\n            const placement = field.config.custom?.tooltip?.placement ?? TableCellTooltipPlacement.Auto;\n            const tooltipWidth =\n              placement === TableCellTooltipPlacement.Left || placement === TableCellTooltipPlacement.Right\n                ? tooltipField.config.custom?.width\n                : width;\n\n            const tooltipProps = {\n              cellOptions: tooltipCellOptions,\n              classes: tooltipClasses,\n              className: clsx(\n                tooltipClasses.tooltipContent,\n                tooltipDefaultStyles,\n                tooltipSpecificStyles,\n                tooltipLinkStyles\n              ),\n              data,\n              disableSanitizeHtml,\n              field: tooltipField,\n              getActions: getCellActions,\n              getTextColorForBackground,\n              gridRef,\n              placement,\n              renderer: tooltipFieldRenderer,\n              tooltipField,\n              theme,\n              width: tooltipWidth,\n            } satisfies Partial<React.ComponentProps<typeof TableCellTooltip>>;\n\n            renderCellContent = (props: RenderCellProps<TableRow, TableSummaryRow>): JSX.Element => {\n              // cached so we don't care about multiple calls.\n              const tooltipHeight = rowHeightFn(props.row);\n              let tooltipStyle: CSSProperties = { ...rowCellStyle };\n              if (tooltipCanBeColorized) {\n                const tooltipDisplayValue = tooltipField.display!(props.row[tooltipDisplayName]);\n                const tooltipCellColorStyles = getCellColorInlineStyles(\n                  tooltipCellOptions,\n                  tooltipDisplayValue,\n                  applyToRowBgFn != null\n                );\n                Object.assign(tooltipStyle, tooltipCellColorStyles);\n              }\n\n              return (\n                <TableCellTooltip\n                  {...tooltipProps}\n                  height={tooltipHeight}\n                  rowIdx={props.row.__index}\n                  style={tooltipStyle}\n                >\n                  {renderBasicCellContent(props)}\n                </TableCellTooltip>\n              );\n            };\n          }\n        }\n\n        result.columns.push({\n          field,\n          key: displayName,\n          name: displayName,\n          width,\n          headerCellClass,\n          frozen: Math.min(frozenColumns, numFrozenColsFullyInView) > i,\n          renderCell: renderCellContent,\n          renderHeaderCell: ({ column, sortDirection }) => (\n            <HeaderCell\n              column={column}\n              rows={rows}\n              field={field}\n              filter={filter}\n              setFilter={setFilter}\n              crossFilterOrder={crossFilterOrder}\n              crossFilterRows={crossFilterRows}\n              direction={sortDirection}\n              showTypeIcons={showTypeIcons}\n            />\n          ),\n          renderSummaryCell: () => (\n            <SummaryCell\n              rows={sortedRows}\n              footers={footers}\n              field={field}\n              colIdx={i}\n              textAlign={getSummaryCellTextAlign(textAlign, cellType)}\n              rowLabel={isUniformFooter && i === 0}\n              hideLabel={isUniformFooter && i !== 0}\n            />\n          ),\n        });\n      });\n\n      return result;\n    },\n    [\n      applyToRowBgFn,\n      crossFilterOrder,\n      crossFilterRows,\n      data,\n      disableSanitizeHtml,\n      filter,\n      footers,\n      frozenColumns,\n      getCellActions,\n      getCellColorInlineStyles,\n      getTextColorForBackground,\n      isUniformFooter,\n      maxRowHeight,\n      numFrozenColsFullyInView,\n      onCellFilterAdded,\n      rows,\n      rowHeight,\n      rowHeightFn,\n      setFilter,\n      sortedRows,\n      showTypeIcons,\n      theme,\n      timeRange,\n    ]\n  );\n\n  // set up the first row's nested data and the nest field widths using useColWidths to avoid\n  // unnecessary re-renders on re-size.\n  const firstRowNestedData = useMemo(\n    () => (hasNestedFrames ? rows.find((r) => r.data)?.data : undefined),\n    [hasNestedFrames, rows]\n  );\n  const [nestedFieldWidths] = useColWidths(firstRowNestedData?.fields ?? [], availableWidth);\n\n  const { columns, cellRootRenderers, colsWithTooltip } = useMemo(() => {\n    const result = fromFields(visibleFields, widths);\n\n    // if nested frames are present, augment the columns to include the nested table expander column.\n    if (!firstRowNestedData) {\n      return result;\n    }\n\n    // pre-calculate renderRow and expandedColumns based on the first nested frame's fields.\n    const hasNestedHeaders = firstRowNestedData.meta?.custom?.noHeader !== true;\n    const renderRow = renderRowFactory(firstRowNestedData.fields, panelContext, expandedRows, enableSharedCrosshair);\n    const { columns: nestedColumns, cellRootRenderers: nestedCellRootRenderers } = fromFields(\n      firstRowNestedData.fields,\n      nestedFieldWidths\n    );\n\n    const expanderCellRenderer: CellRootRenderer = (key, props) => <Cell key={key} {...props} />;\n    result.cellRootRenderers[EXPANDED_COLUMN_KEY] = expanderCellRenderer;\n\n    // If we have nested frames, we need to add a column for the row expansion\n    result.columns.unshift(\n      buildNestedTableExpanderColumn(nestedColumns, hasNestedHeaders, {\n        renderRow,\n        renderCell: (key, props) => nestedCellRootRenderers[props.column.key](key, props),\n      })\n    );\n\n    return result;\n  }, [\n    buildNestedTableExpanderColumn,\n    enableSharedCrosshair,\n    expandedRows,\n    firstRowNestedData,\n    fromFields,\n    nestedFieldWidths,\n    panelContext,\n    visibleFields,\n    widths,\n  ]);\n\n  // invalidate columns on every structureRev change. this supports width editing in the fieldConfig.\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  const structureRevColumns = useMemo(() => columns, [columns, structureRev]);\n  const renderCellRoot: CellRootRenderer = useCallback(\n    (key, props) => cellRootRenderers[props.column.key](key, props),\n    [cellRootRenderers]\n  );\n\n  // we need to have variables with these exact names for the localization to work properly\n  const itemsRangeStart = pageRangeStart;\n  const displayedEnd = pageRangeEnd;\n  const numRows = sortedRows.length;\n\n  return (\n    <>\n      <DataGrid<TableRow, TableSummaryRow>\n        {...commonDataGridProps}\n        ref={gridRef}\n        className={styles.grid}\n        columns={structureRevColumns}\n        rows={paginatedRows}\n        headerRowClass={clsx(styles.headerRow, { [styles.displayNone]: noHeader })}\n        headerRowHeight={headerHeight}\n        onCellClick={({ column, row }, { clientX, clientY, preventGridDefault, target }) => {\n          // Note: could be column.field; JS says yes, but TS says no!\n          const field = columns[column.idx].field;\n\n          if (\n            colsWithTooltip[getDisplayName(field)] &&\n            target instanceof HTMLElement &&\n            // this walks up the tree to find either a faux link wrapper or the cell root\n            // it then only proceeds if we matched the faux link wrapper\n            target.closest('a[aria-haspopup], .rdg-cell')?.matches('a')\n          ) {\n            const rowIdx = row.__index;\n            setTooltipState({\n              coords: {\n                clientX,\n                clientY,\n              },\n              links: getCellLinks(field, rowIdx),\n              actions: getCellActions(field, rowIdx),\n            });\n\n            preventGridDefault();\n          }\n        }}\n        onCellKeyDown={\n          hasNestedFrames\n            ? (_, event) => {\n                if (event.isDefaultPrevented()) {\n                  // skip parent grid keyboard navigation if nested grid handled it\n                  event.preventGridDefault();\n                }\n              }\n            : null\n        }\n        renderers={{ renderRow, renderCell: renderCellRoot }}\n      />\n\n      {enablePagination && (\n        <div className={styles.paginationContainer}>\n          <Pagination\n            className=\"table-ng-pagination\"\n            currentPage={page + 1}\n            numberOfPages={numPages}\n            showSmallVersion={smallPagination}\n            onNavigate={(toPage) => {\n              setPage(toPage - 1);\n            }}\n          />\n          {!smallPagination && (\n            <div className={styles.paginationSummary}>\n              {/* TODO: once TableRT is deprecated, we can update the localiziation\n                    string with the more consistent variable names */}\n              <Trans i18nKey=\"grafana-ui.table.pagination-summary\">\n                {{ itemsRangeStart }} - {{ displayedEnd }} of {{ numRows }} rows\n              </Trans>\n            </div>\n          )}\n        </div>\n      )}\n\n      {tooltipState && (\n        <DataLinksActionsTooltip\n          links={tooltipState.links ?? []}\n          actions={tooltipState.actions}\n          coords={tooltipState.coords}\n          onTooltipClose={() => setTooltipState(undefined)}\n        />\n      )}\n\n      {inspectCell && (\n        <TableCellInspector\n          mode={inspectCell.mode ?? TableCellInspectorMode.text}\n          value={inspectCell.value}\n          onDismiss={() => setInspectCell(null)}\n        />\n      )}\n    </>\n  );\n}\n\n/**\n * this is passed to the top-level `renderRow` prop on DataGrid. applies aria attributes and custom event handlers.\n */\nconst renderRowFactory =\n  (fields: Field[], panelContext: PanelContext, expandedRows: Set<number>, enableSharedCrosshair: boolean) =>\n  // eslint-disable-next-line react/display-name\n  (key: React.Key, props: RenderRowProps<TableRow, TableSummaryRow>): React.ReactNode => {\n    const { row } = props;\n    const rowIdx = row.__index;\n    const isExpanded = expandedRows.has(rowIdx);\n\n    // Don't render non expanded child rows\n    if (row.__depth === 1 && !isExpanded) {\n      return null;\n    }\n\n    // Add aria-expanded to parent rows that have nested data\n    if (row.data) {\n      return <Row key={key} {...props} aria-expanded={isExpanded} />;\n    }\n\n    const handlers: Partial<typeof props> = {};\n    if (enableSharedCrosshair) {\n      const timeField = fields.find((f) => f.type === FieldType.time);\n      if (timeField) {\n        handlers.onMouseEnter = () => {\n          panelContext.eventBus.publish(\n            new DataHoverEvent({\n              point: {\n                time: timeField?.values[rowIdx],\n              },\n            })\n          );\n        };\n        handlers.onMouseLeave = () => {\n          panelContext.eventBus.publish(new DataHoverClearEvent());\n        };\n      }\n    }\n\n    return <Row key={key} {...props} {...handlers} />;\n  };\n"],"names":["getColSpan","column","lastFrozenColumnIndex","args","colSpan","stopPropagation","event","scrollIntoView","element","behavior","createCellEvent","defaultPrevented","cellEvent","nonInputKeys","isCtrlKeyHeldDown","vKey","isDefaultCellInput","isUserHandlingPaste","onEditorNavigation","key","target","getLeftRightKey","direction","isRtl","measuringCellClassname","renderMeasuringCells","viewportColumns","idx","minWidth","maxWidth","isSelectedCellEditable","selectedPosition","columns","rows","row$1","isCellEditableUtil","getSelectedCellColSpan","topSummaryRows","bottomSummaryRows","rowIdx","mainHeaderRowIdx","topSummaryRowsCount","getNextSelectedCellPosition","moveUp","moveNext","cellNavigationMode","colSpanColumns","minRowIdx","maxRowIdx","currentIdx","currentRowIdx","nextPosition","isCellWithinBounds","nextIdx","nextRowIdx","columnsCount","setColSpan","moveNext$1","colIdx","getParentRowIdx","parent","setHeaderGroupColAndRowSpan","parentRowIdx","found","nextParentRowIdx","canExitGrid","maxColIdx","shiftKey","cellClassname","cellFrozenClassname","cellDragHandle","cellDragHandleFrozenClassname","cellDragHandleClassname","getRowStyle","getHeaderCellStyle","rowSpan","gridRowEnd","paddingBlockStart","getCellStyle","index","getCellClassname","extraClasses","clsx","min","max","floor","sign","abs","assertIsValidKeyGetter","keyGetter","clampColumnWidth","width","getHeaderCellRowSpan","checkboxClassname","renderCheckbox","onChange","indeterminate","props","handleChange","e","el","groupCellContent","groupCellContentClassname","caret","caretClassname","renderToggleGroup","ToggleGroup","groupKey","isExpanded","tabIndex","toggleGroup","handleKeyDown","d","renderValue","DataGridDefaultRenderersContext","useDefaultRenderers","SelectCellFormatter","value","disabled","ariaLabel","ariaLabelledBy","renderCheckbox$1","RowSelectionContext","RowSelectionChangeContext","useRowSelection","rowSelectionContext","rowSelectionChangeContext","HeaderRowSelectionContext","HeaderRowSelectionChangeContext","useHeaderRowSelection","headerRowSelectionContext","headerRowSelectionChangeContext","SELECT_COLUMN_KEY","HeaderRenderer","isIndeterminate","isRowSelected","onRowSelectionChange","checked","SelectFormatter","isRowSelectionDisabled","isShiftClick","SelectGroupFormatter","SelectColumn","headerSortCellClassname","headerSortNameClassname","renderHeaderCell","sortDirection","priority","SortableHeaderCell","children","renderSortStatus$1","DEFAULT_COLUMN_WIDTH","DEFAULT_COLUMN_MIN_WIDTH","useCalculatedColumns","rawColumns","defaultColumnOptions","getColumnWidth","viewportWidth","scrollLeft","enableVirtualization","defaultWidth","defaultMinWidth","defaultMaxWidth","defaultRenderCell$1","defaultRenderHeaderCell","defaultSortable","defaultResizable","defaultDraggable","headerRowsCount","lastFrozenColumnIndex$1","headerRowsCount$1","columns$1","collectColumns","rawColumns$1","level","rawColumn","calculatedColumnParent","frozen","aKey","frozenA","bKey","frozenB","colSpanColumns$1","updateColumnParent","templateColumns","layoutCssVars","totalFrozenColumnWidth","columnMetrics","columnMetrics$1","left","totalFrozenColumnWidth$1","templateColumns$1","columnMetric","layoutCssVars$1","i","colOverscanStartIdx","colOverscanEndIdx","viewportLeft","viewportRight","lastColIdx","firstUnfrozenColumnIdx","colVisibleStartIdx","colVisibleEndIdx","colOverscanStartIdx$1","colOverscanEndIdx$1","useLayoutEffect$1","useColumnWidths","gridRef","gridWidth","columnWidths","onColumnWidthsChange","onColumnResize","setColumnResizing","columnToAutoResize","setColumnToAutoResize","columnsToMeasureOnResize","setColumnsToMeasureOnResize","prevGridWidth","setPreviousGridWidth","columnsCanFlex","ignorePreviouslyMeasuredColumnsOnGridWidthChange","newTemplateColumns","columnsToMeasure","columnWidth","gridTemplateColumns","updateMeasuredAndResizedWidths","newColumnWidths","hasChanges","measuredWidth","measureColumnWidth","resizingKey","oldWidth","newWidth","handleColumnResize","nextWidth","columnsToRemeasure","previousWidth","selector","useGridDimensions","inlineSize","setInlineSize","blockSize","setBlockSize","horizontalScrollbarHeight","setHorizontalScrollbarHeight","ResizeObserver","clientWidth","clientHeight","offsetWidth","offsetHeight","height","initialHorizontalScrollbarHeight","initialWidth","initialHeight","resizeObserver","entries","size","clientHeight$1","offsetHeight$1","useLatestFunc","fn","ref","callbackFn","useRovingTabIndex","isSelected","isChildFocused","setIsChildFocused","onFocus","elementToFocus","useViewportColumns","rowOverscanStartIdx","rowOverscanEndIdx","startIdx","startIdx$1","updateStartIdx","useViewportRows","rowHeight","scrollTop","gridHeight","totalRowHeight","gridTemplateRows","getRowTop","getRowHeight","findRowIdx","offset","getRowElementFirstCell","element$1","nth","getRowYTop","cell$1","start","end","middle","currentScrollTop","prevScrollTop","totalRowHeight$1","gridTemplateRows$1","rowPositions","currentRowHeight","position","validateRowIdx","currentOffset","rowVisibleStartIdx","rowVisibleEndIdx","cellDraggedOverClassname","Cell","isCellSelected","isDraggedOver","className","onMouseDown","onCellMouseDown","onClick","onCellClick","onDoubleClick","onCellDoubleClick","onContextMenu","onCellContextMenu","onRowChange","selectCell","style","childTabIndex","cellClass","isEditable","selectCellWrapper","enableEditor","handleMouseEvent","eventHandler","eventHandled","handleMouseDown","handleClick","handleDoubleClick","handleContextMenu","handleRowChange","newRow","CellComponent","Cell_default","defaultRenderCell","canUsePostTask","cellEditing","EditCell","closeEditor","onKeyDown","navigate","captureEventRef","abortControllerRef","frameRequestRef","commitOnOutsideClick","commitOnOutsideMouseDown","onClose","onWindowCaptureMouseDown","abortController","signal","onWindowMouseDown","cancelTask","commitChanges","shouldFocusCell","onEditorRowChange","row$2","commitChangesAndFocus","GroupedColumnHeaderCell","cellSortableClassname","cellResizableClassname","resizeHandleClassname","cellDraggableClassname","cellDraggingClassname","cellOverClassname","dragImageClassname","HeaderCell","onColumnResizeEnd","onColumnsReorder","sortColumns","onSortColumnsChange","shouldFocusGrid","draggedColumnKey","setDraggedColumnKey","isOver","setIsOver","dragImageRef","isDragging","sortIndex","sort","sortColumn","ariaSort","sortable","resizable","draggable","onSort","ctrlClick","sortDescendingFirst","nextSort","nextSortColumn","nextSortColumns","handleFocus","leftKey","onDragStart","onDragEnd","onDragOver","onDrop","onDragEnter","isEventPertinent","onDragLeave","dragTargetProps","dropTargetProps","content","ResizeHandle","resizingOffsetRef","onPointerDown","currentTarget","pointerId","headerCell","right","onPointerMove","onLostPointerCapture","relatedTarget","rowClassname","rowSelected","rowSelectedClassname","rowSelectedWithFrozenCell","topSummaryRowClassname","bottomSummaryRowClassname","headerRowClassname","HeaderRow","headerRowClass","selectedCellIdx","cells","HeaderRow_default","GroupedColumnHeaderRow","renderedParents","GroupedColumnHeaderRow_default","Row","gridRowStart","draggedOverCellIdx","selectedCellEditor","rowClass","renderCell","selectionValue","RowComponent","Row_default","defaultRenderRow","ScrollToCell","setScrollToCellPosition","removeScrollToCell","observer","arrowClassname","renderSortStatus","renderSortIcon","renderSortPriority","rootClassname","viewportDraggingClassname","focusSinkClassname","focusSinkHeaderAndSummaryClassname","summaryCellClassname","SummaryCell","summaryCellClass","SummaryCell_default","summaryRow","topSummaryRow","summaryRowClassname","SummaryRow","top","bottom","isTop","ariaRowIndex","SummaryRow_default","DataGridBase","rowKeyGetter","onRowsChange","rawRowHeight","rawHeaderRowHeight","rawSummaryRowHeight","columnWidthsRaw","onColumnWidthsChangeRaw","selectedRows","onSelectedRowsChange","onCellKeyDown","onSelectedCellChange","onScroll","onFill","onCellCopy","onCellPaste","rawEnableVirtualization","renderers","rawDirection","rawRole","ariaDescription","ariaDescribedBy","rawAriaRowCount","testId","dataCy","defaultRenderers","role","headerRowHeight","summaryRowHeight","renderRow","noRowsFallback","setScrollTop","setScrollLeft","columnWidthsInternal","setColumnWidthsInternal","isColumnResizing","setDragging","draggedOverRowIdx","setDraggedOverRowIdx","scrollToPosition","setScrollToPosition","setShouldFocusCell","previousRowIdx","setPreviousRowIdx","isColumnWidthsControlled","columnWidths$1","bottomSummaryRowsCount","summaryRowsCount","headerAndTopSummaryRowsCount","groupedColumnHeaderRowsCount","setSelectedPosition","focusSinkRef","isTreeGrid","headerRowsHeight","summaryRowsHeight","isSelectable","rightKey","ariaRowCount","defaultGridComponents","headerSelectionValue","hasSelectedRow","hasUnselectedRow","minColIdx","selectedCellIsWithinSelectionBounds","isCellWithinSelectionBounds","selectedCellIsWithinViewportBounds","isCellWithinViewportBounds","scrollHeight","handleColumnResizeLatest","handleColumnResizeEndLatest","handleColumnResizeEnd","onColumnsReorderLastest","onSortColumnsChangeLatest","onCellMouseDownLatest","onCellClickLatest","onCellDoubleClickLatest","onCellContextMenuLatest","selectHeaderRowLatest","selectHeaderRow","selectRowLatest","selectRow","handleFormatterRowChangeLatest","updateRow","selectCellLatest","selectHeaderCellLatest","selectHeaderCell","focusCell","shouldScroll","getCellToScroll","scrollToIdx","scrollToRowIdx","isRowIdxWithinViewportBounds","newSelectedRows","rowKey","step","mode","isCellEvent","isRowEvent","handleCellInput","handleScroll","scrollTop$1","scrollLeft$1","updatedRows","commitEditorChanges","handleCellCopy","handleCellPaste","isCellEditable","updatedRow","handleDragHandlePointerDown","handleDragHandlePointerMove","gridEl","headerAndTopSummaryRowsHeight","overRowIdx","handleDragHandleLostPointerCapture","startRowIndex","endRowIndex","updateRows","handleDragHandleClick","handleDragHandleDoubleClick","startRowIdx","endRowIdx","sourceRow","indexes","isColIdxWithinSelectionBounds","isCellWithinEditBounds","options","samePosition","isSamePosition","getNextPosition","ctrlKey","nextRowY","nextSelectedCellPosition","getDraggedOverCellIdx","getDragHandle","isLastRow","insetInlineStart","style$1","marginEnd","isLastColumn","dragHandleStyle","getCellEditor","closeOnExternalRowChange","shouldFocusCell$1","idx$1","rowIdx$1","getRowViewportColumns","selectedColumn","getViewportRows","rowElements","selectedIdx","selectedRowIdx","viewportRowIdx","isRowOutsideViewport","rowColumns","templateRows","isGroupRowFocused","_","summaryRowIdx","isSummaryRowSelected","DataGrid","p1","p2","GroupCell","id","childRows","groupColumnIndex","isGroupByColumn","toggleGroupWrapper","isLevelMatching","GroupCell_default","groupRowClassname","GroupedRow","groupBy","handleSelectGroup","GroupRow_default","TreeDataGrid","rawRows","rawRowKeyGetter","rawOnCellKeyDown","rawOnCellCopy","rawOnCellPaste","rawSelectedRows","rawOnSelectedRowsChange","rawGroupBy","rowGrouper","expandedGroupIds","onExpandedGroupIdsChange","rawGroupIdGetter","rawRenderRow","toggleGroupLatest","groupIdGetter","defaultGroupIdGetter","groupBy$1","groupedRows","rowsCount","groupRows","rows$1","groupByKey","remainingGroupByKeys","groupRowsCount","groups","childGroups","childRowsCount","isGroupRow","allGroupRows","isGroupRow$1","flattenedRows","expandGroup","parentId","isReadonlyArray","posInSet","keys","groupRow$1","getParentRowAndIndex","parentRow","parentRowAndIndex","groupIndex","selectedRows$1","cr","newRawSelectedRows","handleRowsChange","updatedRawRows","rawIndexes","rawIndex","groupId","newExpandedGroupIds","rowProps","arr","textEditorInternalClassname","textEditorClassname","autoFocusAndSelect","input","textEditor","D","S","N","SYMBS","NUMS","UPPER","CHARS","supportsLetterSpacing","ctx","_w","_letterSpacing","w","varPreLine","fauxLetterSpacing","WIDTHS","wordSpacing","PAIRS","uc","j","ch","wid","eachLine","each","text","cb","fr","to","headIdx","headEnd","headWid","tailIdx","tailWid","inWS","c","n","mayWrap","limit","out","idx0","idx1","count","COLUMN","TABLE","getGridStyles","theme","enablePagination","transparent","bgColor","borderColor","colorManipulator","getActiveCellSelector","getHeaderCellStyles","justifyContent","getDefaultCellStyles","textAlign","shouldOverflow","maxHeight","getJustifyContent","getMaxHeightCellStyles","_theme","getCellActionStyles","getLinkStyles","canBeColorized","caretTriangle","getTooltipStyles","isNested","PillCell","field","getTextColorForBackground","pills","pillValues","inferPills","pill","getPillColor","textColor","TRANSPARENT","SPLIT_RE","rawValue","cfg","colors","configuredColor","getStyles","textWrap","getDefaultRowHeight","fields","cellHeight","isCellInspectEnabled","shouldTextWrap","clampByMaxHeight","measurer","lineHeight","rawHeight","createTypographyContext","fontSize","fontFamily","letterSpacing","font","txt","avgCharWidth","getTextHeightEstimator","getTextHeightMeasurerFromUwrapCount","_field","_rowIdx","strValue","spaceRegex","charsPerLine","getDataLinksHeightMeasurer","linksCountCache","_value","_width","cacheKey","getDisplayName","l","PILLS_FONT_SIZE","PILLS_SPACING","PILLS_GAP","getPillCellHeightMeasurer","measureWidth","widthCache","lines","currentLineUse","pillValue","strPill","rawWidth","pillWidth","buildHeaderHeightMeasurers","typographyCtx","wrappedColIdxs","acc","buildCellHeightMeasurers","result","wrappedFields","measurerFactory","pillTypographyCtx","setupMeasurerForIdx","measurerFactoryKey","fieldIdx","measure","estimate","cellType","getCellOptions","getCellRenderer","AutoCellRenderer","SINGLE_LINE_ESTIMATE_THRESHOLD","defaultHeight","measurers","verticalPadding","maxValue","maxField","preciseMeasurer","fieldIdxs","isEstimating","cellValueRaw","colWidth","estimatedHeight","shouldTextOverflow","cellOptions","TEXT_CELL_TYPES","getAlignment","align","DEFAULT_CELL_OPTIONS","migrateTableDisplayModeToCellOptions","getAlignmentFactor","displayValue","rowIndex","alignmentFactor","maxIndex","nextDisplayValue","CELL_COLOR_DARKENING_MULTIPLIER","CELL_GRADIENT_HUE_ROTATION_DEGREES","getCellColorInlineStylesFactory","bgCellTextColor","color","darkeningFactor","gradientBg","tinycolor","isTransparent","hasApplyToRow","displayValueColor","extractPixelValue","spacing","getCellLinks","links","origOnClick","link","applySort","columnTypes","getColumnTypes","hasNestedFrames","getIsNestedTable","sortNanos","f","compareRows","a","b","columnKey","compare","getComparator","sortDir","nanos","processNestedTableRows","parents","frameToRecords","frame","fnBody","strCompare","numCompare","frameCompare","sortColumnType","TABLE_CELL_GAUGE_DISPLAY_MODES_TO_DISPLAY_MODES","TABLE_CELL_COLOR_BACKGROUND_DISPLAY_MODES_TO_DISPLAY_MODES","displayMode","type","processParents","parentRows","row","processedParents","childRow","calculateFooterHeight","maxReducerCount","predicateByName","name","getVisibleFields","computeColWidths","availWidth","autoCount","definedWidth","getApplyToRowBgFn","getCellColorInlineStyles","fieldDisplay","withDataLinksActionsTooltip","canFieldBeColorized","applyToRowBgFn","displayJsonValue","parsed","getSummaryCellTextAlign","ActionsCell","getActions","actions","action","ActionButton","MaybeWrapWithLink","linksCount","actionsCount","AutoCell","formattedValue","getJsonCellStyles","defaultScale","BarGaugeCell","heightOffset","config","barGaugeMode","valueDisplayMode","alignmentFactors","renderedHeight","BarGauge","DataLinksCell","GeoCell","disp","Geometry","WKT","ImageCell","alt","title","MarkdownCell","disableSanitizeHtml","defaultSparklineCellConfig","SparklineCell","timeRange","sparkline","getSparkline","v","range","getTableSparklineCellOptions","hideValue","valueWidth","valueElement","newValue","measureText","FormattedValueDisplay","Sparkline","timeField","x","numberField","isCustomCellOptions","mixinAutoCellStyles","styles","CELL_REGISTRY","CustomCellComponent","getAutoRendererDisplayMode","getCellSpecificStyles","getAutoRendererStyles","impliedDisplayMode","firstValue","calculateUniqueFieldValues","set","fieldValue","getFilteredOptions","filterValues","option","filtered","valuesToOptions","unique","sortOptions","operatorSelectableValues","OPERATORS","FilterPopup","filterValue","setFilter","searchFilter","setSearchFilter","operator","setOperator","uniqueValues","filteredOptions","values","setValues","matchCase","setMatchCase","onCancel","onFilter","filteredSet","item","filter","newFilter","onClearFilter","filterInputPlaceholder","clearFilterVisible","ClickOutsideWrapper","selectors","Stack","Label","ButtonSelect","FilterInput","Button","s","FilterList","ITEM_HEIGHT","MIN_HEIGHT","REGEX_OPERATOR","XPR_OPERATOR","comparableValue","date","fmt","num","lvalue","caseSensitive","regex","items","xpr","fnc","val","value1","value2","selectedItems","selectCheckValue","selectCheckIndeterminate","selectCheckLabel","selectCheckDescription","gutter","onCheckedChanged","newValues","onSelectChanged","ItemRenderer","Checkbox","label","isChecked","Filter","crossFilterOrder","crossFilterRows","iconClassName","filterIndex","filteredRows","previousFilterName","isPopoverVisible","setPopoverVisible","filterEnabled","ev","Icon","Popover","showTypeIcons","headerCellWrap","displayName","filterable","headerTextWrap","RowExpander","onCellExpand","getDisplayedValue","useFilteredRows","filterRows","displayedValue","useSortedRows","initialSortBy","initialSortColumns","desc","setSortColumns","PAGINATION_HEIGHT","usePaginatedRows","headerHeight","footerHeight","enabled","page","setPage","numRows","avgRowHeight","avg","length","smallPagination","numPages","rowsPerPage","pageRangeStart","pageRangeEnd","rowAreaHeight","heightPerRow","pageOffset","ICON_WIDTH","ICON_GAP","useHeaderHeight","perIconSpace","columnAvailableWidths","col","useRowHeight","expandedRows","hasWrappedCols","colWidths","columnWidthAffordance","cache","rowCount","nestedHeaderHeight","INITIAL_COL_RESIZE_STATE","useColumnResize","colResizeState","pointerIsDown","pointerDown","_event","pointerUp","dispatchEvent","useScrollbarWidth","scrollbarWidth","setScrollbarWidth","updateScrollbarDimensions","numIsEqual","useColWidths","visibleFields","availableWidth","frozenColumns","widths","setWidths","newWidths","numFrozenColsFullyInView","fullyVisibleCols","remainingWidth","isReducer","maybeReducer","nonMathReducers","isNonMathReducer","reducer","noFormattingReducers","shouldReducerSkipFormatting","useReducerEntries","reducers","reducerId","newState","currentRowCount","results","getReducerName","fieldReducer","footers","hideLabel","rowLabel","defaultFooterCellStyles","reducerResultsEntries","firstFooterReducers","footer","renderRowLabel","SummaryCellItem","SummaryCellLabel","SummaryCellValue","reducerResult","FILTER_FOR_OPERATOR","FILTER_OUT_OPERATOR","TableCellActions","setInspectCell","onCellFilterAdded","cellInspect","showFilters","IconButton","inspectValue","TableCellInspector","TableCellTooltip","classes","data","placement","CellRenderer","tooltipField","tooltipCaretRef","hovered","setHovered","pinned","setPinned","show","dynamicHeight","gridRoot","windowListener","scrollListener","rendererProps","cellElement","onMouseLeave","onMouseEnter","prev","EXPANDED_COLUMN_KEY","TableNG","enableSharedCrosshair","_maxRowHeight","noHeader","onSortByChange","structureRev","panelContext","userCanExecuteActions","getCellActions","hasHeader","hasFooter","resizeHandler","sortedRows","inspectCell","tooltipState","setTooltipState","setExpandedRows","defaultRowHeight","maxRowHeight","paginatedRows","isUniformFooter","firstReducers","r","rowHeightFn","renderRowFactory","commonDataGridProps","newSortColumns","buildNestedTableExpanderColumn","nestedColumns","hasNestedHeaders","nestedData","expandedRecords","fromFields","lastRowIdx","rowCellStyle","headerCellClass","CellType","showActions","cellActionClassName","withTooltip","cellStyleOptions","defaultCellStyles","cellSpecificStyles","linkStyles","cellParentStyles","maxHeightClassName","renderCellRoot","cellColorStyles","renderBasicCellContent","renderCellContent","tooltipFieldName","tooltipDisplayName","tooltipCellOptions","tooltipFieldRenderer","tooltipCellStyleOptions","tooltipCanBeColorized","tooltipDefaultStyles","tooltipSpecificStyles","tooltipLinkStyles","tooltipClasses","tooltipWidth","tooltipProps","tooltipHeight","tooltipStyle","tooltipDisplayValue","tooltipCellColorStyles","firstRowNestedData","nestedFieldWidths","cellRootRenderers","colsWithTooltip","nestedCellRootRenderers","expanderCellRenderer","structureRevColumns","itemsRangeStart","displayedEnd","clientX","clientY","preventGridDefault","Pagination","toPage","DataLinksActionsTooltip","handlers"],"sourceRoot":""}