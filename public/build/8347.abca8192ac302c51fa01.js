"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[8347],{10180:(O,u,s)=>{s.d(u,{s:()=>r});var n=s(74848),i=s(96540),e=s(51898),p=s(92745),d=s(76319),c=s(63527);const r=(0,i.forwardRef)((g,_)=>{const[m,x]=(0,i.useState)(!1);return(0,n.jsx)(c.p,{...g,type:m?"text":"password","data-testid":e.Tp.pages.Login.password,ref:_,suffix:(0,n.jsx)(d.K,{name:m?"eye-slash":"eye","aria-controls":g.id,role:"switch","aria-checked":m,onClick:()=>{x(!m)},tooltip:m?(0,p.t)("grafana-ui.password-field.tooltip-hide","Hide password"):(0,p.t)("grafana-ui.password-field.tooltip-show","Show password")})})});r.displayName="PasswordField"},42939:(O,u,s)=>{s.d(u,{pL:()=>i,z5:()=>p});var n=s(43173);const i=/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;function e(){const d=n.$.licenseInfo?.trialExpiry;return!!(d&&d>0)}const p=()=>e()&&n.$.featureToggles.featureHighlights},58102:(O,u,s)=>{s.d(u,{GU:()=>_,YO:()=>x,qm:()=>g});var n=s(74848),i=s(22803),e=s(96540),p=s(92745),d=s(63142),c=s(92948),r=s(10388);const g=({children:a,enterAnimation:o=!0})=>{const P=(0,d.of)(x);return(0,n.jsx)("div",{className:(0,i.cx)(P.loginInnerBox,o&&P.enterAnimation),children:a})},_=({children:a,branding:o,isChangingPassword:P})=>{const t=(0,d.of)(x),[M,D]=(0,e.useState)(!1),h=o?.loginSubtitle??c.M.GetLoginSubTitle(),E=o?.loginTitle??c.M.LoginTitle,f=o?.loginBoxBackground||c.M.LoginBoxBackground(),j=o?.loginLogo,L=o?.hideEdition??c.M.HideEdition;return(0,e.useEffect)(()=>D(!0),[]),(0,n.jsxs)(c.M.LoginBackground,{className:(0,i.cx)(t.container,M&&t.loginAnim,o?.loginBackground),children:[(0,n.jsx)("div",{className:t.loginMain,children:(0,n.jsxs)("div",{className:(0,i.cx)(t.loginContent,f,"login-content-box"),children:[(0,n.jsxs)("div",{className:t.loginLogoWrapper,children:[(0,n.jsx)(c.M.LoginLogo,{className:t.loginLogo,logo:j}),(0,n.jsx)("div",{className:t.titleWrapper,children:P?(0,n.jsx)("h1",{className:t.mainTitle,children:(0,n.jsx)(p.x6,{i18nKey:"login.layout.update-password",children:"Update your password"})}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("h1",{className:t.mainTitle,children:E}),h&&(0,n.jsx)("h3",{className:t.subTitle,children:h})]})})]}),(0,n.jsx)("div",{className:t.loginOuterBox,children:a})]})}),o?.hideFooter?(0,n.jsx)(n.Fragment,{}):(0,n.jsx)(r.wi,{hideEdition:L,customLinks:o?.footerLinks})]})},m=(0,i.keyframes)`
from{
  opacity: 0;
  transform: translate(-60px, 0px);
}

to{
  opacity: 1;
  transform: translate(0px, 0px);
}`,x=a=>({loginMain:(0,i.css)({flexGrow:1,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minWidth:"100%"}),container:(0,i.css)({minHeight:"100%",backgroundPosition:"center",backgroundRepeat:"no-repeat",flex:1,minWidth:"100%",marginLeft:0,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"}),loginAnim:(0,i.css)({"&:before":{opacity:1},".login-content-box":{opacity:1}}),submitButton:(0,i.css)({justifyContent:"center",width:"100%"}),loginLogo:(0,i.css)({width:"100%",maxWidth:60,marginBottom:a.spacing(2),[a.breakpoints.up("sm")]:{maxWidth:100}}),loginLogoWrapper:(0,i.css)({display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",padding:a.spacing(3)}),titleWrapper:(0,i.css)({textAlign:"center"}),mainTitle:(0,i.css)({fontSize:22,[a.breakpoints.up("sm")]:{fontSize:32}}),subTitle:(0,i.css)({fontSize:a.typography.size.md,color:a.colors.text.secondary}),loginContent:(0,i.css)({maxWidth:478,width:"calc(100% - 2rem)",display:"flex",alignItems:"stretch",flexDirection:"column",position:"relative",justifyContent:"flex-start",zIndex:1,minHeight:320,borderRadius:a.shape.radius.default,padding:a.spacing(2,0),opacity:0,[a.transitions.handleMotion("no-preference","reduce")]:{transition:"opacity 0.5s ease-in-out"},[a.breakpoints.up("sm")]:{minHeight:a.spacing(40),justifyContent:"center"}}),loginOuterBox:(0,i.css)({display:"flex",overflowY:"hidden",alignItems:"center",justifyContent:"center"}),loginInnerBox:(0,i.css)({padding:a.spacing(0,2,2,2),display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",flexGrow:1,maxWidth:415,width:"100%",transform:"translate(0px, 0px)",[a.transitions.handleMotion("no-preference")]:{transition:"0.25s ease"}}),enterAnimation:(0,i.css)({[a.transitions.handleMotion("no-preference")]:{animation:`${m} ease-out 0.2s`}})})},98347:(O,u,s)=>{s.r(u),s.d(u,{SignupPage:()=>P,default:()=>t});var n=s(74848),i=s(49785),e=s(92745),p=s(68143),d=s(45861),c=s(41654),r=s(37386),g=s(63527),_=s(65642),m=s(64762),x=s(42939),a=s(58102),o=s(10180);const P=({queryParams:M})=>{const D=(0,m._2)(),{handleSubmit:h,formState:{errors:E},register:f,getValues:j}=(0,i.mN)({defaultValues:{email:M.email,code:M.code}}),L=async l=>{l.name===""&&delete l.name,delete l.confirm,(await(0,p.AI)().post("/api/user/signup/step2",{email:l.email,code:l.code,username:l.email,orgName:l.orgName,password:l.password,name:l.name}).catch(y=>{const A=y.data?.message||y;D.warning(A)})).code==="redirect-to-select-org"&&window.location.assign((0,_.zj)().appSubUrl+"/profile/select-org?signup=1"),window.location.assign((0,_.zj)().appSubUrl+"/")};return(0,n.jsx)(a.GU,{children:(0,n.jsx)(a.qm,{children:(0,n.jsxs)("form",{onSubmit:h(L),style:{width:"100%"},children:[(0,n.jsx)(r.D,{label:(0,e.t)("sign-up.user-name-label","Your name"),children:(0,n.jsx)(g.p,{id:"user-name",...f("name"),placeholder:(0,e.t)("sign-up.user-name-placeholder","(optional)")})}),(0,n.jsx)(r.D,{label:(0,e.t)("sign-up.email-label","Email"),invalid:!!E.email,error:E.email?.message,children:(0,n.jsx)(g.p,{id:"email",...f("email",{required:"Email is required",pattern:{value:x.pL,message:"Email is invalid"}}),type:"email"})}),!(0,_.zj)().autoAssignOrg&&(0,n.jsx)(r.D,{label:(0,e.t)("sign-up.org-name-label","Org. name"),children:(0,n.jsx)(g.p,{id:"org-name",...f("orgName")})}),(0,_.zj)().verifyEmailEnabled&&(0,n.jsx)(r.D,{label:(0,e.t)("sign-up.verification-code-label","Email verification code (sent to your email)"),children:(0,n.jsx)(g.p,{id:"verification-code",...f("code")})}),(0,n.jsx)(r.D,{label:(0,e.t)("sign-up.password-label","Password"),invalid:!!E.password,error:E?.password?.message,children:(0,n.jsx)(o.s,{id:"new-password",autoFocus:!0,autoComplete:"new-password",...f("password",{required:"Password is required"})})}),(0,n.jsx)(r.D,{label:(0,e.t)("sign-up.confirm-password-label","Confirm password"),invalid:!!E.confirm,error:E?.confirm?.message,children:(0,n.jsx)(o.s,{id:"confirm-new-password",autoComplete:"new-password",...f("confirm",{required:"Confirmed password is required",validate:l=>l===j().password||"Passwords must match!"})})}),(0,n.jsxs)(c.B,{children:[(0,n.jsx)(d.$n,{type:"submit",children:(0,n.jsx)(e.x6,{i18nKey:"sign-up.submit-button",children:"Submit"})}),(0,n.jsx)(d.z9,{fill:"text",href:(0,_.zj)().appSubUrl+"/login",children:(0,n.jsx)(e.x6,{i18nKey:"sign-up.back-button",children:"Back to login"})})]})]})})})},t=P}}]);

//# sourceMappingURL=8347.abca8192ac302c51fa01.js.map