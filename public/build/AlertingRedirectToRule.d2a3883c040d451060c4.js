"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[5516],{15102:(D,f,r)=>{r.r(f),r.d(f,{RedirectToRuleViewer:()=>$,default:()=>W});var e=r(74848),l=r(22803),w=r(96540),p=r(54148),L=r(87586),i=r(92745),P=r(43173),T=r(68143),v=r(63142),N=r(34999),F=r(6975),g=r(8073),I=r(30703),M=r(7840),y=r(13791);const U={icon:"bell",id:"alert-rule-view"};function c(s){const{wrapInContent:a=!0,children:n,title:u,renderTitle:o}=s,m=(0,v.of)(Z);return(0,e.jsx)(y.Y,{pageNav:{...U,text:u},renderTitle:o,navId:"alert-list",children:(0,e.jsx)(y.Y.Contents,{children:(0,e.jsx)("div",{className:m.content,children:a?(0,e.jsx)(V,{...s}):n})})})}function V({children:s,padding:a=2}){const n=(0,v.of)(A(a));return(0,e.jsx)("div",{className:n.wrapper,children:s})}const Z=s=>({content:(0,l.css)({maxWidth:`${s.breakpoints.values.xxl}px`})}),A=s=>a=>({wrapper:(0,l.css)({background:a.colors.background.primary,border:`1px solid ${a.colors.border.weak}`,borderRadius:a.shape.radius.default,padding:a.spacing(s)})});var K=r(44109),Y=r(52161),C=r(77256),R=r(94646),B=r(88547);const d="Find rule",S=P.$.appSubUrl;function E(){const s=(0,L.A)();return(0,w.useMemo)(()=>{const a=s.pathname?.replace(S,"").split("/")??[],n=(0,R.c)(decodeURIComponent((0,R.c)(a[3]))),u=decodeURIComponent(a[2]),o=new URLSearchParams(s.search);return{name:n,sourceName:u,namespace:o.get("namespace")??void 0,group:o.get("group")??void 0}},[s])}function $(){const s=(0,v.of)(H),{name:a,sourceName:n,namespace:u,group:o}=E(),{error:m,loading:z,rules:x=[]}=(0,K.we)(a,n,{namespace:u,groupName:o});if(!a||!n)return(0,e.jsx)(p.C5,{replace:!0,to:"/notfound"});if(m)return(0,e.jsx)(c,{title:d,children:(0,e.jsx)(N.F,{title:(0,i.t)("alerting.redirect-to-rule-viewer.title-failed-to-load","Failed to load rules from {{sourceName}}",{sourceName:n}),children:(0,T.NF)(m)&&(0,e.jsxs)("details",{className:s.errorMessage,children:[m.message,(0,e.jsx)("br",{})]})})});if(z)return(0,e.jsx)(c,{title:d,children:(0,e.jsx)(F._,{text:(0,i.t)("alerting.redirect-to-rule-viewer.text-loading-rule","Loading rule...")})});const h=(0,Y.Zw)(n);if(!h)return(0,e.jsx)(c,{title:d,children:(0,e.jsx)(N.F,{title:(0,i.t)("alerting.redirect-to-rule-viewer.title-could-not-view-rule","Could not view rule"),children:(0,e.jsx)("details",{className:s.errorMessage,children:`Could not find data source with name: ${n}.`})})});if(x.length===1){const[t]=x,j=(0,C.w$)(h,t,"/alerting/list").replace(S,"");return(0,e.jsx)(p.C5,{replace:!0,to:j})}return x.length===0?(0,e.jsx)(c,{title:d,children:(0,e.jsx)("div",{"data-testid":"no-rules",children:(0,e.jsxs)(i.x6,{i18nKey:"alerting.redirect-to-rule-viewer.no-rules-found",values:{sourceName:n,name:a},children:["No rules in ",(0,e.jsx)("span",{className:s.param,children:"{{sourceName}}"})," matched the name"," ",(0,e.jsx)("span",{className:s.param,children:"{{name}}"})]})})}):(0,e.jsxs)(c,{title:d,children:[(0,e.jsx)("div",{children:(0,e.jsxs)(i.x6,{i18nKey:"alerting.redirect-to-rule-viewer.several-rules-found",values:{sourceName:n,name:a},children:["Several rules in ",(0,e.jsx)("span",{className:s.param,children:"{{sourceName}}"})," matched the name"," ",(0,e.jsx)("span",{className:s.param,children:"{{name}}"}),", please select the rule you want to view."]})}),(0,e.jsx)("div",{className:s.rules,children:x.map((t,j)=>(0,e.jsxs)(g.Z,{href:(0,C.w$)(h,t,"/alerting/list"),children:[(0,e.jsx)(g.Z.Heading,{children:t.name}),(0,e.jsxs)(g.Z.Meta,{separator:"",children:[(0,e.jsx)(I.I,{name:"folder"}),(0,e.jsx)("span",{className:s.namespace,children:`${t.namespace.name} / ${t.group.name}`})]}),(0,e.jsx)(g.Z.Tags,{children:(0,e.jsx)(M.m,{labels:t.labels})})]},`${t.name}-${j}`))})]})}function H(s){return{param:(0,l.css)({fontStyle:"italic",color:s.colors.text.secondary}),rules:(0,l.css)({marginTop:s.spacing(2)}),namespace:(0,l.css)({marginLeft:s.spacing(1)}),errorMessage:(0,l.css)({whiteSpace:"pre-wrap"})}}const W=(0,B.S)($)}}]);

//# sourceMappingURL=AlertingRedirectToRule.d2a3883c040d451060c4.js.map