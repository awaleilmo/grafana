{"version":3,"file":"4732.15896f674dac5a186f04.js","mappings":"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","sources":["webpack://grafana/./node_modules/ix/util/bindcallback.mjs","webpack://grafana/./node_modules/ix/util/identity.mjs","webpack://grafana/./node_modules/ix/util/isiterable.mjs","webpack://grafana/./node_modules/ix/util/tointeger.mjs","webpack://grafana/./node_modules/ix/util/tolength.mjs","webpack://grafana/./node_modules/ix/aborterror.mjs","webpack://grafana/./node_modules/ix/asynciterable/asynciterablex.mjs","webpack://grafana/./node_modules/ix/asynciterable/_sleep.mjs","webpack://grafana/./node_modules/ix/asynciterable/interval.mjs","webpack://grafana/./node_modules/ix/asynciterable/operators/withabort.mjs","webpack://grafana/./node_modules/ix/asynciterable/concat.mjs","webpack://grafana/./node_modules/ix/asynciterable/of.mjs","webpack://grafana/./node_modules/ix/asynciterable/operators/map.mjs","webpack://grafana/./node_modules/ix/util/safeRace.mjs","webpack://grafana/./node_modules/ix/asynciterable/merge.mjs","webpack://grafana/./node_modules/ix/asynciterable/operators/buffercountortime.mjs","webpack://grafana/./node_modules/ix/util/toobserver.mjs","webpack://grafana/./node_modules/ix/util/returniterator.mjs","webpack://grafana/./node_modules/ix/asynciterable/operators/tap.mjs","webpack://grafana/./public/app/features/alerting/unified/rule-list/DataSourceRuleLoader.tsx","webpack://grafana/./public/app/features/alerting/unified/rule-list/FilterViewStatus.tsx","webpack://grafana/./node_modules/react-use/esm/useIntersection.js","webpack://grafana/./public/app/features/alerting/unified/rule-list/LoadMoreHelper.tsx","webpack://grafana/./node_modules/ix/asynciterable/empty.mjs","webpack://grafana/./node_modules/ix/asynciterable/operators/concatmap.mjs","webpack://grafana/./node_modules/ix/asynciterable/operators/catcherror.mjs","webpack://grafana/./public/app/features/alerting/unified/rule-list/hooks/filters.ts","webpack://grafana/./public/app/features/alerting/unified/rule-list/hooks/prometheusGroupsGenerator.ts","webpack://grafana/./public/app/features/alerting/unified/rule-list/hooks/useFilteredRulesIterator.ts","webpack://grafana/./public/app/features/alerting/unified/rule-list/paginationLimits.ts","webpack://grafana/./public/app/features/alerting/unified/rule-list/FilterView.tsx","webpack://grafana/./public/app/features/alerting/unified/rule-list/components/EvaluationGroup.tsx","webpack://grafana/./public/app/features/alerting/unified/rule-list/components/RuleGroup.tsx","webpack://grafana/./public/app/features/alerting/unified/rule-list/components/DataSourceSection.tsx","webpack://grafana/./public/app/features/alerting/unified/rule-list/components/GroupIntervalMetadata.tsx","webpack://grafana/./public/app/features/alerting/unified/rule-list/components/ListGroup.tsx","webpack://grafana/./public/app/features/alerting/unified/rule-list/components/NoRulesFound.tsx","webpack://grafana/./public/app/features/alerting/unified/rule-list/hooks/useLazyLoadPrometheusGroups.tsx","webpack://grafana/./public/app/features/alerting/unified/rule-list/PaginatedDataSourceLoader.tsx","webpack://grafana/./public/app/features/alerting/unified/rule-list/PaginatedGrafanaLoader.tsx","webpack://grafana/./public/app/features/alerting/unified/rule-list/components/DataSourceErrorBoundary.tsx","webpack://grafana/./public/app/features/alerting/unified/rule-list/GroupedView.tsx","webpack://grafana/./public/app/features/alerting/unified/rule-list/filter/RulesFilter.tsx","webpack://grafana/./public/app/features/alerting/unified/rule-list/RuleList.v2.tsx"],"sourcesContent":["/**\n * @ignore\n */\nexport function bindCallback(func, thisArg, argCount) {\n    if (typeof thisArg === 'undefined') {\n        return func;\n    }\n    switch (argCount) {\n        case 0:\n            return function () {\n                return func.call(thisArg);\n            };\n        case 1:\n            return function (arg) {\n                return func.call(thisArg, arg);\n            };\n        case 2:\n            return function (value, index) {\n                return func.call(thisArg, value, index);\n            };\n        case 3:\n            return function (value, index, collection) {\n                return func.call(thisArg, value, index, collection);\n            };\n        default:\n            return function () {\n                return func.apply(thisArg, arguments);\n            };\n    }\n}\n\n//# sourceMappingURL=bindcallback.mjs.map\n","import { __awaiter } from \"tslib\";\n/**\n * @ignore\n */\nexport function identity(x) {\n    return x;\n}\n/**\n * @ignore\n */\nexport function identityAsync(x) {\n    return __awaiter(this, void 0, void 0, function* () {\n        return x;\n    });\n}\n\n//# sourceMappingURL=identity.mjs.map\n","/* eslint-disable @typescript-eslint/ban-types */\n/** @ignore */\nconst isNumber = (x) => typeof x === 'number';\n/** @ignore */\nconst isBoolean = (x) => typeof x === 'boolean';\n/** @ignore */\nexport const isFunction = (x) => typeof x === 'function';\n/** @ignore */\nexport const isObject = (x) => x != null && Object(x) === x;\n/** @ignore */\nexport const isPromise = (x) => {\n    return isObject(x) && isFunction(x.then);\n};\n/** @ignore */\nexport function isArrayLike(x) {\n    return isObject(x) && isNumber(x['length']);\n}\n/** @ignore */\nexport function isIterable(x) {\n    return x != null && isFunction(x[Symbol.iterator]);\n}\n/** @ignore */\nexport function isIterator(x) {\n    return isObject(x) && !isFunction(x[Symbol.iterator]) && isFunction(x['next']);\n}\n/** @ignore */\nexport function isAsyncIterable(x) {\n    return isObject(x) && isFunction(x[Symbol.asyncIterator]);\n}\n/** @ignore */\nexport function isObservable(x) {\n    return x != null && Object(x) === x && typeof x['subscribe'] === 'function';\n}\n/** @ignore */\nexport const isReadableNodeStream = (x) => {\n    return (isObject(x) &&\n        isFunction(x['pipe']) &&\n        isFunction(x['_read']) &&\n        isBoolean(x['readable']) &&\n        isObject(x['_readableState']));\n};\n/** @ignore */\nexport const isWritableNodeStream = (x) => {\n    return (isObject(x) &&\n        isFunction(x['end']) &&\n        isFunction(x['_write']) &&\n        isBoolean(x['writable']) &&\n        isObject(x['_writableState']));\n};\n/** @ignore */\nexport const isReadableDOMStream = (x) => {\n    return isObject(x) && isFunction(x['cancel']) && isFunction(x['getReader']);\n};\n/** @ignore */\nexport const isWritableDOMStream = (x) => {\n    return isObject(x) && isFunction(x['abort']) && isFunction(x['getWriter']);\n};\n/** @ignore */\nexport const isFetchResponse = (x) => {\n    return isObject(x) && isReadableDOMStream(x['body']);\n};\n\n//# sourceMappingURL=isiterable.mjs.map\n","/**\n * @ignore\n */\nexport function toInteger(value) {\n    const number = Number(value);\n    if (isNaN(number)) {\n        return 0;\n    }\n    if (number === 0 || !isFinite(number)) {\n        return number;\n    }\n    return (number > 0 ? 1 : -1) * Math.floor(Math.abs(number));\n}\n\n//# sourceMappingURL=tointeger.mjs.map\n","import { toInteger } from './tointeger.mjs';\nconst maxSafeInteger = Math.pow(2, 53) - 1;\n/**\n * @ignore\n */\nexport function toLength(value) {\n    const len = toInteger(value);\n    return Math.min(Math.max(len, 0), maxSafeInteger);\n}\n\n//# sourceMappingURL=tolength.mjs.map\n","import { isObject } from './util/isiterable.mjs';\n/** @ignore */\nexport class AbortError extends Error {\n    constructor(message = 'The operation has been aborted') {\n        super(message);\n        Object.setPrototypeOf(this, AbortError.prototype);\n        Error.captureStackTrace(this, this.constructor);\n        this.name = 'AbortError';\n    }\n    get [Symbol.toStringTag]() {\n        return 'AbortError';\n    }\n}\nexport function throwIfAborted(signal) {\n    if (signal && signal.aborted) {\n        throw new AbortError();\n    }\n}\nObject.defineProperty(AbortError, Symbol.hasInstance, {\n    writable: true,\n    configurable: true,\n    value(x) {\n        return (isObject(x) && (x.constructor.name === 'AbortError' || x[Symbol.toStringTag] === 'AbortError'));\n    },\n});\n\n//# sourceMappingURL=aborterror.mjs.map\n","import { __asyncGenerator, __asyncValues, __await, __awaiter } from \"tslib\";\nimport { bindCallback } from '../util/bindcallback.mjs';\nimport { identityAsync } from '../util/identity.mjs';\nimport { isReadableNodeStream, isWritableNodeStream, isIterable, isAsyncIterable, isArrayLike, isIterator, isPromise, isObservable, } from '../util/isiterable.mjs';\nimport { toLength } from '../util/tolength.mjs';\nimport { AbortError, throwIfAborted } from '../aborterror.mjs';\n/**\n * This class serves as the base for all operations which support [Symbol.asyncIterator].\n */\nexport class AsyncIterableX {\n    /** @nocollapse */\n    forEach(projection, thisArg, signal) {\n        var _a, e_1, _b, _c;\n        return __awaiter(this, void 0, void 0, function* () {\n            const source = signal ? new WithAbortAsyncIterable(this, signal) : this;\n            let i = 0;\n            try {\n                for (var _d = true, source_1 = __asyncValues(source), source_1_1; source_1_1 = yield source_1.next(), _a = source_1_1.done, !_a; _d = true) {\n                    _c = source_1_1.value;\n                    _d = false;\n                    const item = _c;\n                    yield projection.call(thisArg, item, i++, signal);\n                }\n            }\n            catch (e_1_1) { e_1 = { error: e_1_1 }; }\n            finally {\n                try {\n                    if (!_d && !_a && (_b = source_1.return)) yield _b.call(source_1);\n                }\n                finally { if (e_1) throw e_1.error; }\n            }\n        });\n    }\n    pipe(...args) {\n        let i = -1;\n        const n = args.length;\n        let acc = this;\n        while (++i < n) {\n            acc = args[i](AsyncIterableX.as(acc));\n        }\n        return acc;\n    }\n    /** @nocollapse */\n    static from(source, selector = identityAsync, thisArg) {\n        const fn = bindCallback(selector, thisArg, 2);\n        if (isIterable(source) || isAsyncIterable(source)) {\n            return new FromAsyncIterable(source, fn);\n        }\n        if (isPromise(source)) {\n            return new FromPromiseIterable(source, fn);\n        }\n        if (isObservable(source)) {\n            return new FromObservableAsyncIterable(source, fn);\n        }\n        if (isArrayLike(source)) {\n            return new FromArrayIterable(source, fn);\n        }\n        if (isIterator(source)) {\n            return new FromAsyncIterable({ [Symbol.asyncIterator]: () => source }, fn);\n        }\n        throw new TypeError('Input type not supported');\n    }\n    /**\n     * Converts the input into an async-iterable sequence.\n     *\n     * @param {*} source The source to convert to an async-iterable sequence.\n     * @returns {AsyncIterableX<*>} An async-iterable containing the input.\n     */\n    /** @nocollapse */\n    static as(source) {\n        if (source instanceof AsyncIterableX) {\n            return source;\n        }\n        if (typeof source === 'string') {\n            return new FromArrayIterable([source], identityAsync);\n        }\n        if (isIterable(source) || isAsyncIterable(source)) {\n            return new FromAsyncIterable(source, identityAsync);\n        }\n        if (isPromise(source)) {\n            return new FromPromiseIterable(source, identityAsync);\n        }\n        if (isObservable(source)) {\n            return new FromObservableAsyncIterable(source, identityAsync);\n        }\n        if (isArrayLike(source)) {\n            return new FromArrayIterable(source, identityAsync);\n        }\n        return new FromArrayIterable([source], identityAsync);\n    }\n}\nAsyncIterableX.prototype[Symbol.toStringTag] = 'AsyncIterableX';\nObject.defineProperty(AsyncIterableX, Symbol.hasInstance, {\n    writable: true,\n    configurable: true,\n    value(inst) {\n        return !!(inst && inst[Symbol.toStringTag] === 'AsyncIterableX');\n    },\n});\nconst ARRAY_VALUE = 'value';\nconst ARRAY_ERROR = 'error';\n/** @ignore */\n/** @ignore */\nexport class AsyncSink {\n    constructor() {\n        this._ended = false;\n        this._values = [];\n        this._resolvers = [];\n    }\n    [Symbol.asyncIterator]() {\n        return this;\n    }\n    write(value) {\n        this._push({ type: ARRAY_VALUE, value });\n    }\n    error(error) {\n        this._push({ type: ARRAY_ERROR, error });\n    }\n    _push(item) {\n        if (this._ended) {\n            throw new Error('AsyncSink already ended');\n        }\n        if (this._resolvers.length > 0) {\n            const { resolve, reject } = this._resolvers.shift();\n            if (item.type === ARRAY_ERROR) {\n                reject(item.error);\n            }\n            else {\n                resolve({ done: false, value: item.value });\n            }\n        }\n        else {\n            this._values.push(item);\n        }\n    }\n    next() {\n        if (this._values.length > 0) {\n            const { type, value, error } = this._values.shift();\n            if (type === ARRAY_ERROR) {\n                return Promise.reject(error);\n            }\n            else {\n                return Promise.resolve({ done: false, value });\n            }\n        }\n        if (this._ended) {\n            return Promise.resolve({ done: true });\n        }\n        return new Promise((resolve, reject) => {\n            this._resolvers.push({ resolve, reject });\n        });\n    }\n    end() {\n        while (this._resolvers.length > 0) {\n            this._resolvers.shift().resolve({ done: true });\n        }\n        this._ended = true;\n    }\n}\n/** @ignore */\nexport class FromArrayIterable extends AsyncIterableX {\n    constructor(source, selector) {\n        super();\n        this._source = source;\n        this._selector = selector;\n    }\n    [Symbol.asyncIterator]() {\n        return __asyncGenerator(this, arguments, function* _a() {\n            let i = 0;\n            const length = toLength(this._source.length);\n            while (i < length) {\n                yield yield __await(yield __await(this._selector(this._source[i], i++)));\n            }\n        });\n    }\n}\n/** @ignore */\nexport class FromAsyncIterable extends AsyncIterableX {\n    constructor(source, selector) {\n        super();\n        this._source = source;\n        this._selector = selector;\n    }\n    [Symbol.asyncIterator](signal) {\n        return __asyncGenerator(this, arguments, function* _a() {\n            var _b, e_2, _c, _d, _e, e_3, _f, _g;\n            let i = 0;\n            if (signal && this._source instanceof AsyncIterableX) {\n                try {\n                    for (var _h = true, _j = __asyncValues(new WithAbortAsyncIterable(this._source, signal)), _k; _k = yield __await(_j.next()), _b = _k.done, !_b; _h = true) {\n                        _d = _k.value;\n                        _h = false;\n                        const item = _d;\n                        yield yield __await(yield __await(this._selector(item, i++)));\n                    }\n                }\n                catch (e_2_1) { e_2 = { error: e_2_1 }; }\n                finally {\n                    try {\n                        if (!_h && !_b && (_c = _j.return)) yield __await(_c.call(_j));\n                    }\n                    finally { if (e_2) throw e_2.error; }\n                }\n            }\n            else {\n                throwIfAborted(signal);\n                try {\n                    for (var _l = true, _m = __asyncValues(this._source), _o; _o = yield __await(_m.next()), _e = _o.done, !_e; _l = true) {\n                        _g = _o.value;\n                        _l = false;\n                        const item = _g;\n                        throwIfAborted(signal);\n                        const value = yield __await(this._selector(item, i++));\n                        throwIfAborted(signal);\n                        yield yield __await(value);\n                    }\n                }\n                catch (e_3_1) { e_3 = { error: e_3_1 }; }\n                finally {\n                    try {\n                        if (!_l && !_e && (_f = _m.return)) yield __await(_f.call(_m));\n                    }\n                    finally { if (e_3) throw e_3.error; }\n                }\n            }\n        });\n    }\n}\n/** @ignore */\nexport class FromPromiseIterable extends AsyncIterableX {\n    constructor(source, selector) {\n        super();\n        this._source = source;\n        this._selector = selector;\n    }\n    [Symbol.asyncIterator]() {\n        return __asyncGenerator(this, arguments, function* _a() {\n            const item = yield __await(this._source);\n            yield yield __await(yield __await(this._selector(item, 0)));\n        });\n    }\n}\n/** @ignore */\nexport class FromObservableAsyncIterable extends AsyncIterableX {\n    constructor(observable, selector) {\n        super();\n        this._observable = observable;\n        this._selector = selector;\n    }\n    [Symbol.asyncIterator](signal) {\n        return __asyncGenerator(this, arguments, function* _a() {\n            throwIfAborted(signal);\n            const sink = new AsyncSink();\n            const subscription = this._observable.subscribe({\n                next(value) {\n                    sink.write(value);\n                },\n                error(err) {\n                    sink.error(err);\n                },\n                complete() {\n                    sink.end();\n                },\n            });\n            function onAbort() {\n                sink.error(new AbortError());\n            }\n            if (signal) {\n                signal.addEventListener('abort', onAbort);\n            }\n            let i = 0;\n            try {\n                for (let next; !(next = yield __await(sink.next())).done;) {\n                    throwIfAborted(signal);\n                    yield yield __await(yield __await(this._selector(next.value, i++)));\n                }\n            }\n            finally {\n                if (signal) {\n                    signal.removeEventListener('abort', onAbort);\n                }\n                subscription.unsubscribe();\n            }\n        });\n    }\n}\nclass WithAbortAsyncIterable {\n    constructor(source, signal) {\n        this._source = source;\n        this._signal = signal;\n    }\n    [Symbol.asyncIterator]() {\n        // @ts-ignore\n        return this._source[Symbol.asyncIterator](this._signal);\n    }\n}\ntry {\n    ((isBrowser) => {\n        if (isBrowser) {\n            return;\n        }\n        AsyncIterableX.prototype['pipe'] = nodePipe;\n        const readableOpts = (x, opts = x._writableState || { objectMode: true }) => opts;\n        function nodePipe(...args) {\n            let i = -1;\n            let end;\n            const n = args.length;\n            let prev = this;\n            let next;\n            while (++i < n) {\n                next = args[i];\n                if (typeof next === 'function') {\n                    prev = next(AsyncIterableX.as(prev));\n                }\n                else if (isWritableNodeStream(next)) {\n                    ({ end = true } = args[i + 1] || {});\n                    // prettier-ignore\n                    return isReadableNodeStream(prev) ? prev.pipe(next, { end }) :\n                        AsyncIterableX.as(prev).toNodeStream(readableOpts(next)).pipe(next, { end });\n                }\n            }\n            return prev;\n        }\n    })(typeof window === 'object' && typeof document === 'object' && document.nodeType === 9);\n}\ncatch (e) {\n    /* */\n}\nexport const as = AsyncIterableX.as;\nexport const from = AsyncIterableX.from;\n\n//# sourceMappingURL=asynciterablex.mjs.map\n","import { AbortError } from '../aborterror.mjs';\nexport function sleep(dueTime, signal) {\n    return new Promise((resolve, reject) => {\n        if (signal && signal.aborted) {\n            reject(new AbortError());\n        }\n        const id = setTimeout(() => {\n            if (signal) {\n                signal.removeEventListener('abort', onAbort);\n                if (signal.aborted) {\n                    onAbort();\n                    return;\n                }\n            }\n            resolve();\n        }, dueTime);\n        if (signal) {\n            signal.addEventListener('abort', onAbort, { once: true });\n        }\n        function onAbort() {\n            clearTimeout(id);\n            reject(new AbortError());\n        }\n    });\n}\n\n//# sourceMappingURL=_sleep.mjs.map\n","import { __asyncGenerator, __await } from \"tslib\";\nimport { AsyncIterableX } from './asynciterablex.mjs';\nimport { sleep } from './_sleep.mjs';\nimport { throwIfAborted } from '../aborterror.mjs';\nclass IntervalAsyncIterable extends AsyncIterableX {\n    constructor(dueTime) {\n        super();\n        this._dueTime = dueTime;\n    }\n    [Symbol.asyncIterator](signal) {\n        return __asyncGenerator(this, arguments, function* _a() {\n            throwIfAborted(signal);\n            let i = 0;\n            while (1) {\n                yield __await(sleep(this._dueTime, signal));\n                yield yield __await(i++);\n            }\n        });\n    }\n}\n/**\n * Produces a new item in an async-iterable at the given interval cycle time.\n *\n * @param {number} dueTime The due time in milliseconds to spawn a new item.\n * @returns {AsyncIterableX<number>} An async-iterable producing values at the specified interval.\n */\nexport function interval(dueTime) {\n    return new IntervalAsyncIterable(dueTime);\n}\n\n//# sourceMappingURL=interval.mjs.map\n","import { AsyncIterableX } from '../asynciterablex.mjs';\n/** @ignore */\nexport class WithAbortAsyncIterable extends AsyncIterableX {\n    constructor(source, signal) {\n        super();\n        this._source = source;\n        this._signal = signal;\n    }\n    withAbort(signal) {\n        return new WithAbortAsyncIterable(this._source, signal);\n    }\n    [Symbol.asyncIterator]() {\n        // @ts-ignore\n        return this._source[Symbol.asyncIterator](this._signal);\n    }\n}\n/**\n * Wraps the existing async-iterable sequence with an abort signal for cancellation.\n *\n * @template TSource The type of the elements in the source sequence.\n * @param {AbortSignal} signal The abort signal used for cancellation.\n * @returns {MonoTypeOperatorAsyncFunction<TSource>} An async-iterable that can be cancelled by the abort signal.\n */\nexport function withAbort(signal) {\n    return function withAbortOperatorFunction(source) {\n        return new WithAbortAsyncIterable(source, signal);\n    };\n}\n/**\n * Wraps an existing async-iterable with a new async-iterable which support cancellation.\n *\n * @template TSource The type of the elements in the source sequence.\n * @param {AsyncIterable<TSource>} source The source sequence to wrap with the abort signal.\n * @param {AbortSignal} [signal] The abort signal used for cancellation.\n * @returns {AsyncIterable<TSource>} The source sequence wrapped with an abort signal for cancellation.\n */\nexport function wrapWithAbort(source, signal) {\n    return signal ? new WithAbortAsyncIterable(source, signal) : source;\n}\n\n//# sourceMappingURL=withabort.mjs.map\n","import { __asyncGenerator, __asyncValues, __await } from \"tslib\";\nimport { AsyncIterableX } from './asynciterablex.mjs';\nimport { wrapWithAbort } from './operators/withabort.mjs';\nimport { throwIfAborted } from '../aborterror.mjs';\n/** @ignore */\nexport class ConcatAsyncIterable extends AsyncIterableX {\n    constructor(source) {\n        super();\n        this._source = source;\n    }\n    [Symbol.asyncIterator](signal) {\n        return __asyncGenerator(this, arguments, function* _a() {\n            var _b, e_1, _c, _d;\n            throwIfAborted(signal);\n            for (const outer of this._source) {\n                try {\n                    for (var _e = true, _f = (e_1 = void 0, __asyncValues(wrapWithAbort(outer, signal))), _g; _g = yield __await(_f.next()), _b = _g.done, !_b; _e = true) {\n                        _d = _g.value;\n                        _e = false;\n                        const item = _d;\n                        yield yield __await(item);\n                    }\n                }\n                catch (e_1_1) { e_1 = { error: e_1_1 }; }\n                finally {\n                    try {\n                        if (!_e && !_b && (_c = _f.return)) yield __await(_c.call(_f));\n                    }\n                    finally { if (e_1) throw e_1.error; }\n                }\n            }\n        });\n    }\n}\nexport function _concatAll(source) {\n    return new ConcatAsyncIterable(source);\n}\n/**\n * Concatenates all async-iterable sequences in the given sequences, as long as the previous async-iterable\n * sequence terminated successfully.\n *\n * @template T The type of the elements in the sequences.\n * @param {...AsyncIterable<T>[]} args The async-iterable sources.\n * @returns {AsyncIterableX<T>} An async-iterable sequence that contains the elements of each given sequence, in sequential order.\n */\nexport function concat(...args) {\n    return new ConcatAsyncIterable(args);\n}\n\n//# sourceMappingURL=concat.mjs.map\n","import { __asyncGenerator, __await } from \"tslib\";\nimport { AsyncIterableX } from './asynciterablex.mjs';\nimport { throwIfAborted } from '../aborterror.mjs';\n/** @ignore */\nexport class OfAsyncIterable extends AsyncIterableX {\n    constructor(args) {\n        super();\n        this._args = args;\n    }\n    [Symbol.asyncIterator](signal) {\n        return __asyncGenerator(this, arguments, function* _a() {\n            throwIfAborted(signal);\n            for (const item of this._args) {\n                yield yield __await(item);\n            }\n        });\n    }\n}\n/**\n * Creates an async-iterable from the specified elements.\n *\n * @template TSource The type of the elements to create an async-iterable sequence.\n * @param {...TSource[]} args The elements to turn into an async-iterable sequence.\n * @returns {AsyncIterableX<TSource>} The async-iterable sequence created from the elements.\n */\nexport function of(...args) {\n    return new OfAsyncIterable(args);\n}\n\n//# sourceMappingURL=of.mjs.map\n","import { __asyncGenerator, __asyncValues, __await } from \"tslib\";\nimport { AsyncIterableX } from '../asynciterablex.mjs';\nimport { wrapWithAbort } from './withabort.mjs';\nimport { throwIfAborted } from '../../aborterror.mjs';\n/** @ignore */\nexport class MapAsyncIterable extends AsyncIterableX {\n    constructor(source, selector, thisArg) {\n        super();\n        this._source = source;\n        this._selector = selector;\n        this._thisArg = thisArg;\n    }\n    [Symbol.asyncIterator](signal) {\n        return __asyncGenerator(this, arguments, function* _a() {\n            var _b, e_1, _c, _d;\n            throwIfAborted(signal);\n            let i = 0;\n            try {\n                for (var _e = true, _f = __asyncValues(wrapWithAbort(this._source, signal)), _g; _g = yield __await(_f.next()), _b = _g.done, !_b; _e = true) {\n                    _d = _g.value;\n                    _e = false;\n                    const item = _d;\n                    const result = yield __await(this._selector.call(this._thisArg, item, i++, signal));\n                    yield yield __await(result);\n                }\n            }\n            catch (e_1_1) { e_1 = { error: e_1_1 }; }\n            finally {\n                try {\n                    if (!_e && !_b && (_c = _f.return)) yield __await(_c.call(_f));\n                }\n                finally { if (e_1) throw e_1.error; }\n            }\n        });\n    }\n}\n/**\n * Projects each element of an async-enumerable sequence into a new form.\n *\n * @template TSource The type of the elements in the source sequence.\n * @template TResult The type of the elements in the result sequence, obtained by running the selector\n * function for each element in the source sequence.\n * @param {((value: TSource, index: number, signal?: AbortSignal) => Promise<TResult> | TResult)} selector A transform function\n * to apply to each source element.\n * @param {*} [thisArg] Optional this for binding to the selector.\n * @returns {OperatorAsyncFunction<TSource, TResult>} An async-iterable sequence whose elements are the result of invoking the transform\n * function on each element of source.\n */\nexport function map(selector, thisArg) {\n    return function mapOperatorFunction(source) {\n        return new MapAsyncIterable(source, selector, thisArg);\n    };\n}\n\n//# sourceMappingURL=map.mjs.map\n","/*\nThis is free and unencumbered software released into the public domain.\n\nAnyone is free to copy, modify, publish, use, compile, sell, or\ndistribute this software, either in source code form or as a compiled\nbinary, for any purpose, commercial or non-commercial, and by any\nmeans.\n\nIn jurisdictions that recognize copyright laws, the author or authors\nof this software dedicate any and all copyright interest in the\nsoftware to the public domain. We make this dedication for the benefit\nof the public at large and to the detriment of our heirs and\nsuccessors. We intend this dedication to be an overt act of\nrelinquishment in perpetuity of all present and future rights to this\nsoftware under copyright law.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\nEXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\nMERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.\nIN NO EVENT SHALL THE AUTHORS BE LIABLE FOR ANY CLAIM, DAMAGES OR\nOTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE,\nARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR\nOTHER DEALINGS IN THE SOFTWARE.\n\nFor more information, please refer to <http://unlicense.org/>\n*/\n// see: https://github.com/nodejs/node/issues/17469#issuecomment-685216777\n// see: https://github.com/ReactiveX/IxJS/pull/323\nfunction isPrimitive(value) {\n    return value === null || (typeof value !== 'object' && typeof value !== 'function');\n}\n// Keys are the values passed to race, values are a record of data containing a\n// set of deferreds and whether the value has settled.\nconst wm = new WeakMap();\nexport function safeRace(contenders) {\n    let deferred;\n    const result = new Promise((resolve, reject) => {\n        deferred = { resolve, reject };\n        for (const contender of contenders) {\n            if (isPrimitive(contender)) {\n                // If the contender is a primitive, attempting to use it as a key in the\n                // weakmap would throw an error. Luckily, it is safe to call\n                // `Promise.resolve(contender).then` on a primitive value multiple times\n                // because the promise fulfills immediately.\n                Promise.resolve(contender).then(resolve, reject);\n                continue;\n            }\n            let record = wm.get(contender);\n            if (record === undefined) {\n                record = { deferreds: new Set([deferred]), settled: false };\n                wm.set(contender, record);\n                // This call to `then` happens once for the lifetime of the value.\n                Promise.resolve(contender).then((value) => {\n                    // eslint-disable-next-line no-shadow\n                    for (const { resolve } of record.deferreds) {\n                        resolve(value);\n                    }\n                    record.deferreds.clear();\n                    record.settled = true;\n                }, (err) => {\n                    // eslint-disable-next-line no-shadow\n                    for (const { reject } of record.deferreds) {\n                        reject(err);\n                    }\n                    record.deferreds.clear();\n                    record.settled = true;\n                });\n            }\n            else if (record.settled) {\n                // If the value has settled, it is safe to call\n                // `Promise.resolve(contender).then` on it.\n                Promise.resolve(contender).then(resolve, reject);\n            }\n            else {\n                record.deferreds.add(deferred);\n            }\n        }\n    });\n    // The finally callback executes when any value settles, preventing any of\n    // the unresolved values from retaining a reference to the resolved value.\n    return result.finally(() => {\n        for (const contender of contenders) {\n            if (!isPrimitive(contender)) {\n                const record = wm.get(contender);\n                record.deferreds.delete(deferred);\n            }\n        }\n    });\n}\n\n//# sourceMappingURL=safeRace.mjs.map\n","import { __asyncGenerator, __await } from \"tslib\";\nimport { AsyncIterableX } from './asynciterablex.mjs';\nimport { wrapWithAbort } from './operators/withabort.mjs';\nimport { throwIfAborted } from '../aborterror.mjs';\nimport { safeRace } from '../util/safeRace.mjs';\n// eslint-disable-next-line @typescript-eslint/no-empty-function\nconst NEVER_PROMISE = new Promise(() => { });\nfunction wrapPromiseWithIndex(promise, index) {\n    return promise\n        .then(({ value, done }) => ({ value, done, index }))\n        .catch((error) => ({ error, index }));\n}\n/** @ignore */\nexport class MergeAsyncIterable extends AsyncIterableX {\n    constructor(source) {\n        super();\n        this._source = source;\n    }\n    [Symbol.asyncIterator](signal) {\n        return __asyncGenerator(this, arguments, function* _a() {\n            throwIfAborted(signal);\n            const length = this._source.length;\n            const iterators = new Array(length);\n            const nexts = new Array(length);\n            let active = length;\n            for (let i = 0; i < length; i++) {\n                const iterator = wrapWithAbort(this._source[i], signal)[Symbol.asyncIterator]();\n                iterators[i] = iterator;\n                nexts[i] = wrapPromiseWithIndex(iterator.next(), i);\n            }\n            while (active > 0) {\n                const next = yield __await(safeRace(nexts));\n                if (next.hasOwnProperty('error')) {\n                    throw next.error;\n                }\n                else if (next.done) {\n                    nexts[next.index] = NEVER_PROMISE;\n                    active--;\n                }\n                else {\n                    const iterator$ = iterators[next.index];\n                    nexts[next.index] = wrapPromiseWithIndex(iterator$.next(), next.index);\n                    yield yield __await(next.value);\n                }\n            }\n        });\n    }\n}\nexport function merge(source, ...args) {\n    return new MergeAsyncIterable([source, ...args]);\n}\n\n//# sourceMappingURL=merge.mjs.map\n","import { __asyncGenerator, __asyncValues, __await } from \"tslib\";\nimport { AsyncIterableX, interval, concat, of } from '../index.mjs';\nimport { map } from './map.mjs';\nimport { merge } from '../merge.mjs';\nimport { wrapWithAbort } from './withabort.mjs';\nconst timerEvent = {};\nconst ended = {};\nclass BufferCountOrTime extends AsyncIterableX {\n    constructor(source, bufferSize, maxWaitTime) {\n        super();\n        this.source = source;\n        this.bufferSize = bufferSize;\n        this.maxWaitTime = maxWaitTime;\n    }\n    [Symbol.asyncIterator](signal) {\n        return __asyncGenerator(this, arguments, function* _a() {\n            var _b, e_1, _c, _d;\n            const buffer = [];\n            const timer = interval(this.maxWaitTime).pipe(map(() => timerEvent));\n            const source = concat(this.source, of(ended));\n            const merged = merge(source, timer);\n            try {\n                for (var _e = true, _f = __asyncValues(wrapWithAbort(merged, signal)), _g; _g = yield __await(_f.next()), _b = _g.done, !_b; _e = true) {\n                    _d = _g.value;\n                    _e = false;\n                    const item = _d;\n                    if (item === ended) {\n                        break;\n                    }\n                    if (item !== timerEvent) {\n                        buffer.push(item);\n                    }\n                    if (buffer.length >= this.bufferSize || (buffer.length && item === timerEvent)) {\n                        yield yield __await(buffer.slice());\n                        buffer.length = 0;\n                    }\n                }\n            }\n            catch (e_1_1) { e_1 = { error: e_1_1 }; }\n            finally {\n                try {\n                    if (!_e && !_b && (_c = _f.return)) yield __await(_c.call(_f));\n                }\n                finally { if (e_1) throw e_1.error; }\n            }\n            if (buffer.length) {\n                yield yield __await(buffer);\n            }\n        });\n    }\n}\n/**\n * Projects each element of an async-iterable sequence into consecutive buffers\n * which are emitted when either the threshold count or time is met.\n *\n * @template TSource The type of elements in the source sequence.\n * @param {number} count The size of the buffer.\n * @param {number} time The threshold number of milliseconds to wait before flushing a non-full buffer\n * @returns {OperatorAsyncFunction<TSource, TSource[]>} An operator which returns an async-iterable sequence\n * of buffers\n */\nexport function bufferCountOrTime(count, time) {\n    return function bufferOperatorFunction(source) {\n        return new BufferCountOrTime(source, count, time);\n    };\n}\n\n//# sourceMappingURL=buffercountortime.mjs.map\n","import { isFunction } from './isiterable.mjs';\nconst noop = (_) => {\n    /**/\n};\n// eslint-disable-next-line complexity\nexport function toObserver(next, error, complete) {\n    const observer = next;\n    if (observer && typeof observer === 'object') {\n        return {\n            next: isFunction(observer.next) ? (x) => observer.next(x) : noop,\n            error: isFunction(observer.error) ? (e) => observer.error(e) : noop,\n            complete: isFunction(observer.complete) ? () => observer.complete() : noop,\n        };\n    }\n    return {\n        next: isFunction(next) ? next : noop,\n        error: isFunction(error) ? error : noop,\n        complete: isFunction(complete) ? complete : noop,\n    };\n}\n\n//# sourceMappingURL=toobserver.mjs.map\n","import { __awaiter } from \"tslib\";\n/**\n * @ignore\n */\nexport function returnIterator(it) {\n    if (typeof (it === null || it === void 0 ? void 0 : it.return) === 'function') {\n        it.return();\n    }\n}\n/**\n * @ignore\n */\nexport function returnAsyncIterator(it) {\n    return __awaiter(this, void 0, void 0, function* () {\n        if (typeof (it === null || it === void 0 ? void 0 : it.return) === 'function') {\n            yield it.return();\n        }\n    });\n}\n\n//# sourceMappingURL=returniterator.mjs.map\n","import { __asyncGenerator, __await } from \"tslib\";\nimport { AsyncIterableX } from '../asynciterablex.mjs';\nimport { toObserver } from '../../util/toobserver.mjs';\nimport { AbortError, throwIfAborted } from '../../aborterror.mjs';\nimport { returnAsyncIterator } from '../../util/returniterator.mjs';\n/** @ignore */\nexport class TapAsyncIterable extends AsyncIterableX {\n    constructor(source, observer) {\n        super();\n        this._source = source;\n        this._observer = observer;\n    }\n    [Symbol.asyncIterator](signal) {\n        return __asyncGenerator(this, arguments, function* _a() {\n            throwIfAborted(signal);\n            const obs = this._observer;\n            const it = this._source[Symbol.asyncIterator](signal);\n            try {\n                for (let res; !(res = yield __await(it.next())).done;) {\n                    if (obs.next) {\n                        yield __await(obs.next(res.value));\n                    }\n                    yield yield __await(res.value);\n                }\n                if (obs.complete) {\n                    yield __await(obs.complete());\n                }\n            }\n            catch (e) {\n                if (!(e instanceof AbortError) && obs.error) {\n                    yield __await(obs.error(e));\n                }\n                throw e;\n            }\n            finally {\n                yield __await(returnAsyncIterator(it));\n            }\n        });\n    }\n}\n/**\n * Invokes an action for each element in the async-iterable sequence, and propagates all observer\n * messages through the result sequence. This method can be used for debugging, logging, etc. by\n * intercepting the message stream to run arbitrary actions for messages on the pipeline.\n *\n * @template TSource The type of the elements in the source sequence.\n * @param {(PartialAsyncObserver<TSource> | ((value: TSource) => any) | null)} [observerOrNext] Observer whose methods to invoke as\n * part of the source sequence's observation or a function to invoke for each element in the async-iterable sequence.\n * @param {(((err: any) => any) | null)} [error] Function to invoke upon exceptional termination of the async-iterable sequence.\n * @param {((() => any) | null)} [complete] Function to invoke upon graceful termination of the async-iterable sequence.\n * @returns {MonoTypeOperatorAsyncFunction<TSource>} The source sequence with the side-effecting behavior applied.\n */\nexport function tap(observerOrNext, error, complete) {\n    return function tapOperatorFunction(source) {\n        return new TapAsyncIterable(source, toObserver(observerOrNext, error, complete));\n    };\n}\n\n//# sourceMappingURL=tap.mjs.map\n","import { skipToken } from '@reduxjs/toolkit/query';\nimport { memo, useMemo } from 'react';\n\nimport { DataSourceRuleGroupIdentifier, Rule } from 'app/types/unified-alerting';\n\nimport { alertRuleApi } from '../api/alertRuleApi';\nimport { featureDiscoveryApi } from '../api/featureDiscoveryApi';\nimport { isCloudRulerGroup } from '../utils/rules';\n\nimport { DataSourceRuleListItem } from './DataSourceRuleListItem';\nimport { RuleActionsButtons } from './components/RuleActionsButtons.V2';\nimport { RuleActionsSkeleton } from './components/RuleActionsSkeleton';\nimport { getMatchingRulerRule } from './ruleMatching';\n\nconst { useDiscoverDsFeaturesQuery } = featureDiscoveryApi;\nconst { useGetRuleGroupForNamespaceQuery } = alertRuleApi;\n\ninterface DataSourceRuleLoaderProps {\n  rule: Rule;\n  groupIdentifier: DataSourceRuleGroupIdentifier;\n}\n\nexport const DataSourceRuleLoader = memo(function DataSourceRuleLoader({\n  rule,\n  groupIdentifier,\n}: DataSourceRuleLoaderProps) {\n  const { rulesSource, namespace, groupName } = groupIdentifier;\n\n  const { data: dsFeatures } = useDiscoverDsFeaturesQuery({ uid: rulesSource.uid });\n\n  const { isLoading, data: rulerRuleGroup } = useGetRuleGroupForNamespaceQuery(\n    dsFeatures?.rulerConfig\n      ? { namespace: namespace.name, group: groupName, rulerConfig: dsFeatures?.rulerConfig }\n      : skipToken\n  );\n\n  const rulerRule = useMemo(() => {\n    if (!rulerRuleGroup) {\n      return;\n    }\n\n    if (!isCloudRulerGroup(rulerRuleGroup)) {\n      return;\n    }\n\n    return getMatchingRulerRule(rulerRuleGroup, rule);\n  }, [rulerRuleGroup, rule]);\n\n  // 1. get the rule from the ruler API with \"ruleWithLocation\"\n  // 1.1 skip this if this datasource does not have a ruler\n  //\n  // 2.1 render action buttons\n  // 2.2 render provisioning badge and contact point metadata, etc.\n  const actions = useMemo(() => {\n    if (isLoading) {\n      return <RuleActionsSkeleton />;\n    }\n\n    if (rulerRule) {\n      return <RuleActionsButtons rule={rulerRule} promRule={rule} groupIdentifier={groupIdentifier} compact />;\n    }\n\n    return null;\n  }, [groupIdentifier, isLoading, rule, rulerRule]);\n\n  return (\n    <DataSourceRuleListItem\n      rule={rule}\n      rulerRule={rulerRule}\n      groupIdentifier={groupIdentifier}\n      application={dsFeatures?.application}\n      actions={actions}\n    />\n  );\n});\n","import { Trans, t } from '@grafana/i18n';\nimport { Button, Card, Text } from '@grafana/ui';\n\nexport type FilterProgressState = 'searching' | 'done' | 'aborted';\ninterface FilterStatusProps {\n  numberOfRules: number;\n  state: FilterProgressState;\n  onCancel: () => void;\n}\n\nexport function FilterStatus({ state, numberOfRules, onCancel }: FilterStatusProps) {\n  return (\n    <Card>\n      <Text color=\"secondary\">\n        {/* done searching everything and found some results */}\n        {state === 'done' && (\n          <Trans i18nKey=\"alerting.rule-list.filter-view.no-more-results\">\n            No more results  found {{ numberOfRules }} rules\n          </Trans>\n        )}\n        {/* user has cancelled the search */}\n        {state === 'aborted' && (\n          <Trans i18nKey=\"alerting.rule-list.filter-view.results-with-cancellation\">\n            Search cancelled  found {{ numberOfRules }} rules\n          </Trans>\n        )}\n        {/* search is in progress */}\n        {state === 'searching' && (\n          <Trans i18nKey=\"alerting.rule-list.filter-view.results-loading\">\n            Searching  found {{ numberOfRules }} rules\n          </Trans>\n        )}\n      </Text>\n      {state === 'searching' && (\n        <Button variant=\"secondary\" size=\"sm\" onClick={() => onCancel()}>\n          {t('alerting.rule-list.filter-view.cancel-search', 'Cancel search')}\n        </Button>\n      )}\n    </Card>\n  );\n}\n","import { useEffect, useState } from 'react';\nvar useIntersection = function (ref, options) {\n    var _a = useState(null), intersectionObserverEntry = _a[0], setIntersectionObserverEntry = _a[1];\n    useEffect(function () {\n        if (ref.current && typeof IntersectionObserver === 'function') {\n            var handler = function (entries) {\n                setIntersectionObserverEntry(entries[0]);\n            };\n            var observer_1 = new IntersectionObserver(handler, options);\n            observer_1.observe(ref.current);\n            return function () {\n                setIntersectionObserverEntry(null);\n                observer_1.disconnect();\n            };\n        }\n        return function () { };\n    }, [ref.current, options.threshold, options.root, options.rootMargin]);\n    return intersectionObserverEntry;\n};\nexport default useIntersection;\n","import { useEffect, useRef } from 'react';\nimport { useIntersection } from 'react-use';\n\ntype Props = {\n  handleLoad: () => void;\n};\n\nfunction LoadMoreHelper({ handleLoad }: Props) {\n  const intersectionRef = useRef<HTMLDivElement>(null);\n  const intersection = useIntersection(intersectionRef, {\n    root: null,\n    threshold: 1,\n  });\n\n  useEffect(() => {\n    const completelyInView = intersection && intersection.intersectionRatio > 0;\n    if (completelyInView) {\n      handleLoad();\n    }\n  }, [intersection, handleLoad]);\n\n  return <div ref={intersectionRef} data-testid=\"load-more-helper\" />;\n}\n\nexport default LoadMoreHelper;\n","import { __asyncGenerator, __await } from \"tslib\";\nimport { AsyncIterableX } from './asynciterablex.mjs';\nimport { throwIfAborted } from '../aborterror.mjs';\nclass EmptyAsyncIterable extends AsyncIterableX {\n    [Symbol.asyncIterator](signal) {\n        return __asyncGenerator(this, arguments, function* _a() {\n            throwIfAborted(signal);\n        });\n    }\n}\n/**\n * Returns an empty async-iterable sequence.\n *\n * @template TSource The type used for the async-iterable type parameter of the resulting sequence.\n * @returns {AsyncIterableX<never>} An async-iterable sequence with no elements.\n */\nexport function empty() {\n    return new EmptyAsyncIterable();\n}\n\n//# sourceMappingURL=empty.mjs.map\n","import { __asyncGenerator, __asyncValues, __await } from \"tslib\";\nimport { AsyncIterableX } from '../asynciterablex.mjs';\nimport { wrapWithAbort } from './withabort.mjs';\nimport { throwIfAborted } from '../../aborterror.mjs';\nimport { isPromise } from '../../util/isiterable.mjs';\nclass ConcatMapAsyncIterable extends AsyncIterableX {\n    constructor(_source, _selector, _thisArg) {\n        super();\n        this._source = _source;\n        this._selector = _selector;\n        this._thisArg = _thisArg;\n    }\n    [Symbol.asyncIterator](signal) {\n        return __asyncGenerator(this, arguments, function* _a() {\n            var _b, e_1, _c, _d, _e, e_2, _f, _g;\n            throwIfAborted(signal);\n            let outerIndex = 0;\n            const { _thisArg: thisArg, _selector: selector } = this;\n            try {\n                for (var _h = true, _j = __asyncValues(wrapWithAbort(this._source, signal)), _k; _k = yield __await(_j.next()), _b = _k.done, !_b; _h = true) {\n                    _d = _k.value;\n                    _h = false;\n                    const outer = _d;\n                    const result = selector.call(thisArg, outer, outerIndex++, signal);\n                    const values = (isPromise(result) ? yield __await(result) : result);\n                    try {\n                        for (var _l = true, _m = (e_2 = void 0, __asyncValues(wrapWithAbort(AsyncIterableX.as(values), signal))), _o; _o = yield __await(_m.next()), _e = _o.done, !_e; _l = true) {\n                            _g = _o.value;\n                            _l = false;\n                            const inner = _g;\n                            yield yield __await(inner);\n                        }\n                    }\n                    catch (e_2_1) { e_2 = { error: e_2_1 }; }\n                    finally {\n                        try {\n                            if (!_l && !_e && (_f = _m.return)) yield __await(_f.call(_m));\n                        }\n                        finally { if (e_2) throw e_2.error; }\n                    }\n                }\n            }\n            catch (e_1_1) { e_1 = { error: e_1_1 }; }\n            finally {\n                try {\n                    if (!_h && !_b && (_c = _j.return)) yield __await(_c.call(_j));\n                }\n                finally { if (e_1) throw e_1.error; }\n            }\n        });\n    }\n}\n/**\n * Projects each element of an async-iterable sequence to an async-iterable sequence and merges\n * the resulting async-iterable sequences into one async-iterable sequence.\n *\n * @template TSource The type of the elements in the source sequence.\n * @template TResult The type of the elements in the projected inner sequences and the elements in the merged result sequence.\n * @param {((\n *     value: TSource,\n *     index: number,\n *     signal?: AbortSignal\n *   ) => AsyncIterable<TResult> | Promise<AsyncIterable<TResult>>)} selector A transform function to apply to each element.\n * @param {*} [thisArg] Option this for binding to the selector.\n * @returns {OperatorAsyncFunction<TSource, TResult>} An operator that creates an async-iterable sequence whose\n * elements are the result of invoking the one-to-many transform function on each element of the input sequence.\n */\nexport function concatMap(selector, thisArg) {\n    return function concatMapOperatorFunction(source) {\n        return new ConcatMapAsyncIterable(source, selector, thisArg);\n    };\n}\n\n//# sourceMappingURL=concatmap.mjs.map\n","import { __asyncGenerator, __asyncValues, __await } from \"tslib\";\nimport { AsyncIterableX } from '../asynciterablex.mjs';\nimport { returnAsyncIterator } from '../../util/returniterator.mjs';\nimport { wrapWithAbort } from './withabort.mjs';\nimport { throwIfAborted } from '../../aborterror.mjs';\n/** @ignore */\nexport class CatchWithAsyncIterable extends AsyncIterableX {\n    constructor(source, handler) {\n        super();\n        this._source = source;\n        this._handler = handler;\n    }\n    [Symbol.asyncIterator](signal) {\n        return __asyncGenerator(this, arguments, function* _a() {\n            var _b, e_1, _c, _d;\n            throwIfAborted(signal);\n            let err;\n            let hasError = false;\n            const source = wrapWithAbort(this._source, signal);\n            const it = source[Symbol.asyncIterator]();\n            while (1) {\n                let c = {};\n                try {\n                    c = yield __await(it.next());\n                    if (c.done) {\n                        yield __await(returnAsyncIterator(it));\n                        break;\n                    }\n                }\n                catch (e) {\n                    err = yield __await(this._handler(e, signal));\n                    hasError = true;\n                    yield __await(returnAsyncIterator(it));\n                    break;\n                }\n                yield yield __await(c.value);\n            }\n            if (hasError) {\n                try {\n                    for (var _e = true, _f = __asyncValues(wrapWithAbort(err, signal)), _g; _g = yield __await(_f.next()), _b = _g.done, !_b; _e = true) {\n                        _d = _g.value;\n                        _e = false;\n                        const item = _d;\n                        yield yield __await(item);\n                    }\n                }\n                catch (e_1_1) { e_1 = { error: e_1_1 }; }\n                finally {\n                    try {\n                        if (!_e && !_b && (_c = _f.return)) yield __await(_c.call(_f));\n                    }\n                    finally { if (e_1) throw e_1.error; }\n                }\n            }\n        });\n    }\n}\n/**\n * Continues an async-iterable sequence that is terminated by an exception with the\n * async-iterable sequence produced by the handler.\n *\n * @template TSource The type of the elements in the source sequence.\n * @template TResult The type of elements from the handler function.\n * @param {((\n *     error: any,\n *     signal?: AbortSignal\n *   ) => AsyncIterable<TResult> | Promise<AsyncIterable<TResult>>)} handler Error handler function, producing another async-iterable sequence.\n * @returns {(OperatorAsyncFunction<TSource, TSource | TResult>)} An operator which continues an async-iterable sequence that is terminated by\n * an exception with the specified handler.\n */\nexport function catchError(handler) {\n    return function catchWithOperatorFunction(source) {\n        return new CatchWithAsyncIterable(source, handler);\n    };\n}\n\n//# sourceMappingURL=catcherror.mjs.map\n","import { attempt, compact, isString } from 'lodash';\nimport memoize from 'micro-memoize';\n\nimport { Matcher } from 'app/plugins/datasource/alertmanager/types';\nimport { PromRuleDTO, PromRuleGroupDTO } from 'app/types/unified-alerting-dto';\n\nimport { RulesFilter } from '../../search/rulesSearchParser';\nimport { labelsMatchMatchers } from '../../utils/alertmanager';\nimport { Annotation } from '../../utils/constants';\nimport { getDatasourceAPIUid } from '../../utils/datasource';\nimport { fuzzyMatches } from '../../utils/fuzzySearch';\nimport { parseMatcher } from '../../utils/matchers';\nimport { isPluginProvidedRule, prometheusRuleType } from '../../utils/rules';\n\n/**\n * @returns True if the group matches the filter, false otherwise. Keeps rules intact\n */\nexport function groupFilter(\n  group: PromRuleGroupDTO,\n  filterState: Pick<RulesFilter, 'namespace' | 'groupName'>\n): boolean {\n  const { name, file } = group;\n  const { namespace, groupName } = filterState;\n\n  if (namespace && !fuzzyMatches(file, namespace)) {\n    return false;\n  }\n\n  if (groupName && !fuzzyMatches(name, groupName)) {\n    return false;\n  }\n\n  return true;\n}\n\n/**\n * @returns True if the rule matches the filter, false otherwise\n */\nexport function ruleFilter(rule: PromRuleDTO, filterState: RulesFilter) {\n  const { name, labels = {}, health, type } = rule;\n\n  if (filterState.freeFormWords.length > 0) {\n    const nameMatches = fuzzyMatches(name, filterState.freeFormWords.join(' '));\n    if (!nameMatches) {\n      return false;\n    }\n  }\n\n  if (filterState.ruleName && !fuzzyMatches(name, filterState.ruleName)) {\n    return false;\n  }\n\n  if (filterState.labels.length > 0) {\n    const matchers = compact(filterState.labels.map(looseParseMatcher));\n    const doRuleLabelsMatchQuery = matchers.length > 0 && labelsMatchMatchers(labels, matchers);\n\n    // Also check alerts if they exist\n    const doAlertsContainMatchingLabels =\n      matchers.length > 0 &&\n      prometheusRuleType.alertingRule(rule) &&\n      rule.alerts &&\n      rule.alerts.some((alert) => labelsMatchMatchers(alert.labels || {}, matchers));\n\n    if (!doRuleLabelsMatchQuery && !doAlertsContainMatchingLabels) {\n      return false;\n    }\n  }\n\n  if (filterState.ruleType && type !== filterState.ruleType) {\n    return false;\n  }\n\n  if (filterState.ruleState) {\n    if (!prometheusRuleType.alertingRule(rule)) {\n      return false;\n    }\n    if (rule.state !== filterState.ruleState) {\n      return false;\n    }\n  }\n\n  if (filterState.ruleHealth && health !== filterState.ruleHealth) {\n    return false;\n  }\n\n  if (filterState.contactPoint) {\n    if (!prometheusRuleType.grafana.alertingRule(rule)) {\n      return false;\n    }\n\n    if (!rule.notificationSettings) {\n      return false;\n    }\n\n    if (filterState.contactPoint !== rule.notificationSettings.receiver) {\n      return false;\n    }\n  }\n\n  if (filterState.dashboardUid) {\n    if (!prometheusRuleType.alertingRule(rule)) {\n      return false;\n    }\n\n    const dashboardAnnotation = rule.annotations?.[Annotation.dashboardUID];\n    if (dashboardAnnotation !== filterState.dashboardUid) {\n      return false;\n    }\n  }\n\n  // Plugins filter - hide plugin-provided rules when set to 'hide'\n  if (filterState.plugins === 'hide' && isPluginProvidedRule(rule)) {\n    return false;\n  }\n\n  // Note: We can't implement these filters from reduceGroups because they rely on rulerRule property\n  // which is not available in PromRuleDTO:\n  // - contactPoint filter\n  // - dataSourceNames filter\n  if (filterState.dataSourceNames.length > 0) {\n    const isGrafanaRule = prometheusRuleType.grafana.rule(rule);\n    if (isGrafanaRule) {\n      try {\n        const filterDatasourceUids = mapDataSourceNamesToUids(filterState.dataSourceNames);\n        const queriedDatasourceUids = rule.queriedDatasourceUIDs || [];\n\n        const queryIncludesDataSource = queriedDatasourceUids.some((uid) => filterDatasourceUids.includes(uid));\n        if (!queryIncludesDataSource) {\n          return false;\n        }\n      } catch (error) {\n        return false;\n      }\n    }\n  }\n\n  return true;\n}\n\nfunction looseParseMatcher(matcherQuery: string): Matcher | undefined {\n  try {\n    return parseMatcher(matcherQuery);\n  } catch {\n    // Try to createa a matcher than matches all values for a given key\n    return { name: matcherQuery, value: '', isRegex: true, isEqual: true };\n  }\n}\n\n// Memoize the function to avoid calling getDatasourceAPIUid for the filter values multiple times\nconst mapDataSourceNamesToUids = memoize(\n  (names: string[]): string[] => {\n    return names.map((name) => attempt(getDatasourceAPIUid, name)).filter(isString);\n  },\n  { maxSize: 1 }\n);\n","import { useCallback } from 'react';\n\nimport { DataSourceRulesSourceIdentifier, RuleHealth } from 'app/types/unified-alerting';\nimport { PromAlertingRuleState, PromRuleGroupDTO } from 'app/types/unified-alerting-dto';\n\nimport { PromRulesResponse, prometheusApi, usePopulateGrafanaPrometheusApiCache } from '../../api/prometheusApi';\n\nconst { useLazyGetGroupsQuery, useLazyGetGrafanaGroupsQuery } = prometheusApi;\n\ninterface UseGeneratorHookOptions {\n  /**\n   * Whether to populate the RTKQ cache with the groups.\n   * Populating cache might harm performance when fetching a lot of groups or fetching multiple pages\n   */\n  populateCache?: boolean;\n  limitAlerts?: number;\n}\n\ninterface FetchGroupsOptions {\n  groupLimit?: number;\n  groupNextToken?: string;\n}\n\nexport function usePrometheusGroupsGenerator() {\n  const [getGroups] = useLazyGetGroupsQuery();\n\n  return useCallback(\n    async function* (ruleSource: DataSourceRulesSourceIdentifier, groupLimit: number) {\n      const getRuleSourceGroupsWithCache = async (fetchOptions: FetchGroupsOptions) => {\n        const response = await getGroups({\n          ruleSource: { uid: ruleSource.uid },\n          notificationOptions: { showErrorAlert: false },\n          ...fetchOptions,\n        }).unwrap();\n\n        return response;\n      };\n\n      yield* genericGroupsGenerator(getRuleSourceGroupsWithCache, groupLimit);\n    },\n    [getGroups]\n  );\n}\n\ninterface GrafanaPromApiFilter {\n  state?: PromAlertingRuleState[];\n  health?: RuleHealth[];\n  contactPoint?: string;\n}\n\ninterface GrafanaFetchGroupsOptions extends FetchGroupsOptions {\n  filter?: GrafanaPromApiFilter;\n}\n\nexport function useGrafanaGroupsGenerator(hookOptions: UseGeneratorHookOptions = {}) {\n  const [getGrafanaGroups] = useLazyGetGrafanaGroupsQuery();\n  const { populateGroupsResponseCache } = usePopulateGrafanaPrometheusApiCache();\n\n  const getGroupsAndProvideCache = useCallback(\n    async (fetchOptions: GrafanaFetchGroupsOptions) => {\n      const response = await getGrafanaGroups({\n        ...fetchOptions,\n        limitAlerts: hookOptions.limitAlerts,\n        ...fetchOptions.filter,\n      }).unwrap();\n\n      if (hookOptions.populateCache) {\n        populateGroupsResponseCache(response.data.groups);\n      }\n\n      return response;\n    },\n    [getGrafanaGroups, hookOptions.limitAlerts, hookOptions.populateCache, populateGroupsResponseCache]\n  );\n\n  return useCallback(\n    async function* (groupLimit: number, filter?: GrafanaPromApiFilter) {\n      yield* genericGroupsGenerator(\n        (fetchOptions) => getGroupsAndProvideCache({ ...fetchOptions, filter }),\n        groupLimit\n      );\n    },\n    [getGroupsAndProvideCache]\n  );\n}\n\n/**\n * Converts a Prometheus groups generator yielding arrays of groups to a generator yielding groups one by one\n * @param generator - The paginated generator to convert\n * @returns A non-paginated generator that yields all groups from the original generator one by one\n */\nexport function toIndividualRuleGroups<TGroup extends PromRuleGroupDTO>(\n  generator: AsyncGenerator<TGroup[], void, unknown>\n): AsyncGenerator<TGroup, void, unknown> {\n  return (async function* () {\n    for await (const batch of generator) {\n      for (const item of batch) {\n        yield item;\n      }\n    }\n  })();\n}\n\n// Generator lazily provides groups one by one only when needed\n// This might look a bit complex but it allows us to have one API for paginated and non-paginated Prometheus data sources\n// For unpaginated data sources we fetch everything in one go\n// For paginated we fetch the next page when needed\nasync function* genericGroupsGenerator<TGroup>(\n  fetchGroups: (options: FetchGroupsOptions) => Promise<PromRulesResponse<TGroup>>,\n  groupLimit: number\n) {\n  let response = await fetchGroups({ groupLimit });\n  yield response.data.groups;\n\n  let lastToken: string | undefined = response.data?.groupNextToken;\n\n  while (lastToken) {\n    response = await fetchGroups({ groupNextToken: lastToken, groupLimit: groupLimit });\n    yield response.data.groups;\n    lastToken = response.data?.groupNextToken;\n  }\n}\n","import { AsyncIterableX, from } from 'ix/asynciterable';\nimport { empty } from 'ix/asynciterable/empty';\nimport { merge } from 'ix/asynciterable/merge';\nimport { catchError, concatMap, withAbort } from 'ix/asynciterable/operators';\n\nimport {\n  DataSourceRuleGroupIdentifier,\n  DataSourceRulesSourceIdentifier,\n  GrafanaRuleGroupIdentifier,\n} from 'app/types/unified-alerting';\nimport {\n  GrafanaPromRuleDTO,\n  GrafanaPromRuleGroupDTO,\n  PromRuleDTO,\n  PromRuleGroupDTO,\n} from 'app/types/unified-alerting-dto';\n\nimport { RuleSource, RulesFilter } from '../../search/rulesSearchParser';\nimport {\n  getDataSourceByUid,\n  getDatasourceAPIUid,\n  getExternalRulesSources,\n  isSupportedExternalRulesSourceType,\n} from '../../utils/datasource';\n\nimport { groupFilter, ruleFilter } from './filters';\nimport { useGrafanaGroupsGenerator, usePrometheusGroupsGenerator } from './prometheusGroupsGenerator';\n\nexport type RuleWithOrigin = PromRuleWithOrigin | GrafanaRuleWithOrigin;\n\nexport interface GrafanaRuleWithOrigin {\n  rule: GrafanaPromRuleDTO;\n  groupIdentifier: GrafanaRuleGroupIdentifier;\n  /**\n   * The name of the namespace that contains the rule group\n   * groupIdentifier contains the uid of the namespace, but not the user-friendly display name\n   */\n  namespaceName: string;\n  origin: 'grafana';\n}\n\nexport interface PromRuleWithOrigin {\n  rule: PromRuleDTO;\n  groupIdentifier: DataSourceRuleGroupIdentifier;\n  origin: 'datasource';\n}\n\ninterface GetIteratorResult {\n  iterable: AsyncIterableX<RuleWithOrigin>;\n  abortController: AbortController;\n}\n\nexport function useFilteredRulesIteratorProvider() {\n  const allExternalRulesSources = getExternalRulesSources();\n\n  const prometheusGroupsGenerator = usePrometheusGroupsGenerator();\n  const grafanaGroupsGenerator = useGrafanaGroupsGenerator({ limitAlerts: 0 });\n\n  const getFilteredRulesIterable = (filterState: RulesFilter, groupLimit: number): GetIteratorResult => {\n    /* this is the abort controller that allows us to stop an AsyncIterable */\n    const abortController = new AbortController();\n\n    const normalizedFilterState = normalizeFilterState(filterState);\n    const hasDataSourceFilterActive = Boolean(filterState.dataSourceNames.length);\n\n    const grafanaRulesGenerator: AsyncIterableX<RuleWithOrigin> = from(\n      grafanaGroupsGenerator(groupLimit, {\n        contactPoint: filterState.contactPoint ?? undefined,\n        health: filterState.ruleHealth ? [filterState.ruleHealth] : [],\n        state: filterState.ruleState ? [filterState.ruleState] : [],\n      })\n    ).pipe(\n      withAbort(abortController.signal),\n      concatMap((groups) =>\n        groups\n          .filter((group) => groupFilter(group, normalizedFilterState))\n          .flatMap((group) => group.rules.map((rule) => ({ group, rule })))\n          .filter(({ rule }) => ruleFilter(rule, normalizedFilterState))\n          .map(({ group, rule }) => mapGrafanaRuleToRuleWithOrigin(group, rule))\n      ),\n      catchError(() => empty())\n    );\n\n    // Determine which data sources to use\n    const externalRulesSourcesToFetchFrom = hasDataSourceFilterActive\n      ? getRulesSourcesFromFilter(filterState)\n      : allExternalRulesSources;\n\n    if (filterState.ruleSource === RuleSource.Grafana) {\n      return { iterable: grafanaRulesGenerator, abortController };\n    }\n\n    const dataSourceGenerators: Array<AsyncIterableX<RuleWithOrigin>> = externalRulesSourcesToFetchFrom.map(\n      (dataSourceIdentifier) => {\n        const promGroupsGenerator: AsyncIterableX<RuleWithOrigin> = from(\n          prometheusGroupsGenerator(dataSourceIdentifier, groupLimit)\n        ).pipe(\n          withAbort(abortController.signal),\n          concatMap((groups) =>\n            groups\n              .filter((group) => groupFilter(group, normalizedFilterState))\n              .flatMap((group) => group.rules.map((rule) => ({ group, rule })))\n              .filter(({ rule }) => ruleFilter(rule, normalizedFilterState))\n              .map(({ group, rule }) => mapRuleToRuleWithOrigin(dataSourceIdentifier, group, rule))\n          ),\n          catchError(() => empty())\n        );\n\n        return promGroupsGenerator;\n      }\n    );\n\n    const iterablesToMerge: Array<AsyncIterableX<RuleWithOrigin>> = [];\n    const includeGrafana = filterState.ruleSource !== 'datasource';\n    const includeExternal = true;\n\n    if (includeGrafana) {\n      iterablesToMerge.push(grafanaRulesGenerator);\n    }\n    if (includeExternal) {\n      iterablesToMerge.push(...dataSourceGenerators);\n    }\n\n    const iterable = mergeIterables(iterablesToMerge);\n\n    return { iterable, abortController };\n  };\n\n  return getFilteredRulesIterable;\n}\n\nfunction mergeIterables(iterables: Array<AsyncIterableX<RuleWithOrigin>>): AsyncIterableX<RuleWithOrigin> {\n  if (iterables.length === 0) {\n    return empty();\n  }\n  const [firstIterable, ...rest] = iterables;\n  return merge(firstIterable, ...rest);\n}\n\n/**\n * Finds all data sources that the user might want to filter by.\n * Only allows Prometheus and Loki data source types.\n */\nfunction getRulesSourcesFromFilter(filter: RulesFilter): DataSourceRulesSourceIdentifier[] {\n  return filter.dataSourceNames.reduce<DataSourceRulesSourceIdentifier[]>((acc, dataSourceName) => {\n    // since \"getDatasourceAPIUid\" can throw we'll omit any non-existing data sources\n    try {\n      const uid = getDatasourceAPIUid(dataSourceName);\n      const type = getDataSourceByUid(uid)?.type;\n\n      if (type === undefined || isSupportedExternalRulesSourceType(type) === false) {\n        return acc;\n      }\n\n      acc.push({\n        name: dataSourceName,\n        uid,\n        ruleSourceType: 'datasource',\n      });\n    } catch {}\n\n    return acc;\n  }, []);\n}\n\nfunction mapRuleToRuleWithOrigin(\n  rulesSource: DataSourceRulesSourceIdentifier,\n  group: PromRuleGroupDTO,\n  rule: PromRuleDTO\n): PromRuleWithOrigin {\n  return {\n    rule,\n    groupIdentifier: {\n      rulesSource,\n      namespace: { name: group.file },\n      groupName: group.name,\n      groupOrigin: 'datasource',\n    },\n    origin: 'datasource',\n  };\n}\n\nfunction mapGrafanaRuleToRuleWithOrigin(\n  group: GrafanaPromRuleGroupDTO,\n  rule: GrafanaPromRuleDTO\n): GrafanaRuleWithOrigin {\n  return {\n    rule,\n    groupIdentifier: {\n      namespace: { uid: group.folderUid },\n      groupName: group.name,\n      groupOrigin: 'grafana',\n    },\n    namespaceName: group.file,\n    origin: 'grafana',\n  };\n}\n\n/**\n * Lowercase free form words, rule name, group name and namespace\n */\nfunction normalizeFilterState(filterState: RulesFilter): RulesFilter {\n  return {\n    ...filterState,\n    freeFormWords: filterState.freeFormWords.map((word) => word.toLowerCase()),\n    ruleName: filterState.ruleName?.toLowerCase(),\n    groupName: filterState.groupName?.toLowerCase(),\n    namespace: filterState.namespace?.toLowerCase(),\n  };\n}\n","export const FRONTEND_LIST_PAGE_SIZE = 100;\n\nexport const FILTERED_GROUPS_API_PAGE_SIZE = 2000;\nexport const DEFAULT_GROUPS_API_PAGE_SIZE = 40;\nexport const FRONTED_GROUPED_PAGE_SIZE = DEFAULT_GROUPS_API_PAGE_SIZE;\n\nexport function getApiGroupPageSize(hasFilters: boolean) {\n  return hasFilters ? FILTERED_GROUPS_API_PAGE_SIZE : DEFAULT_GROUPS_API_PAGE_SIZE;\n}\n","import { bufferCountOrTime, tap } from 'ix/asynciterable/operators';\nimport { useCallback, useMemo, useRef, useState, useTransition } from 'react';\nimport { useUnmount } from 'react-use';\n\nimport { Trans, t } from '@grafana/i18n';\nimport { EmptyState, Stack } from '@grafana/ui';\n\nimport { withPerformanceLogging } from '../Analytics';\nimport { isLoading, useAsync } from '../hooks/useAsync';\nimport { RulesFilter } from '../search/rulesSearchParser';\nimport { hashRule } from '../utils/rule-id';\n\nimport { DataSourceRuleLoader } from './DataSourceRuleLoader';\nimport { FilterProgressState, FilterStatus } from './FilterViewStatus';\nimport { GrafanaRuleListItem } from './GrafanaRuleListItem';\nimport LoadMoreHelper from './LoadMoreHelper';\nimport { UnknownRuleListItem } from './components/AlertRuleListItem';\nimport { AlertRuleListItemSkeleton } from './components/AlertRuleListItemLoader';\nimport {\n  GrafanaRuleWithOrigin,\n  PromRuleWithOrigin,\n  RuleWithOrigin,\n  useFilteredRulesIteratorProvider,\n} from './hooks/useFilteredRulesIterator';\nimport { FRONTEND_LIST_PAGE_SIZE, getApiGroupPageSize } from './paginationLimits';\n\ninterface FilterViewProps {\n  filterState: RulesFilter;\n}\n\nexport function FilterView({ filterState }: FilterViewProps) {\n  //  We use a key to force the component to unmount and remount when the filter state changes\n  // filterState is a complex object including arrays and is constructed from URL params\n  // so even for the same params we get a new object or new properties in it\n  return <FilterViewResults filterState={filterState} key={JSON.stringify(filterState)} />;\n}\n\ntype KeyedRuleWithOrigin = RuleWithOrigin & {\n  /**\n   * Artificial frontend-only identifier for the rule.\n   * It's used as a key for the rule in the rule list to prevent key duplication\n   */\n  key: string;\n};\n\n/**\n * Renders the list of rules that match the filter.\n * It doesn't update results when the filter changes, use key property to force a remount with a new filter\n * Internally it needs to reset rules generator to get new results\n * While a bit counter-intuitive resetting using key simplifies a lot of logic in the component\n * The component implements infinite scrolling. It loads next page when the user scrolls to the bottom of the list\n */\nfunction FilterViewResults({ filterState }: FilterViewProps) {\n  const [transitionPending, startTransition] = useTransition();\n\n  /* this hook returns a function that creates an AsyncIterable<RuleWithOrigin> which we will use to populate the front-end */\n  const getFilteredRulesIterator = useFilteredRulesIteratorProvider();\n\n  const iteration = useRef<{\n    rulesBatchIterator: AsyncIterator<RuleWithOrigin[]>;\n    abortController: AbortController;\n  } | null>(null);\n\n  const [rules, setRules] = useState<KeyedRuleWithOrigin[]>([]);\n  const [doneSearching, setDoneSearching] = useState(false);\n\n  // Lazy initialization of useRef\n  // https://18.react.dev/reference/react/useRef#how-to-avoid-null-checks-when-initializing-use-ref-later\n  const getRulesBatchIterator = useCallback(() => {\n    if (!iteration.current) {\n      /**\n       * This an iterator that we can use to populate the search results.\n       * It also uses the signal from the AbortController above to cancel retrieving more results and sets up a\n       * callback function to detect when we've exhausted the source.\n       * This is the main AsyncIterable<RuleWithOrigin> we will use for the search results\n       *\n       *  Make sure we are returning / using a \"iterator\" and not an \"iterable\" since the iterable is only a blueprint\n       * and the iterator will allow us to exhaust the iterable in a stateful way\n       */\n      const { iterable, abortController } = getFilteredRulesIterator(filterState, getApiGroupPageSize(true));\n      const rulesBatchIterator = iterable\n        .pipe(\n          bufferCountOrTime(FRONTEND_LIST_PAGE_SIZE, 1000),\n          onFinished(() => setDoneSearching(true))\n        )\n        [Symbol.asyncIterator]();\n      iteration.current = { rulesBatchIterator: rulesBatchIterator, abortController };\n    }\n    return iteration.current.rulesBatchIterator;\n  }, [filterState, getFilteredRulesIterator]);\n\n  /* This function will fetch a page of results from the iterable */\n  const [{ execute: loadResultPage }, state] = useAsync(\n    withPerformanceLogging(async () => {\n      const rulesIterator = getRulesBatchIterator();\n\n      let loadedRulesCount = 0;\n\n      while (loadedRulesCount < FRONTEND_LIST_PAGE_SIZE) {\n        const nextRulesBatch = await rulesIterator.next();\n        if (nextRulesBatch.done) {\n          return;\n        }\n        if (nextRulesBatch.value) {\n          startTransition(() => {\n            setRules((rules) => rules.concat(nextRulesBatch.value.map((rule) => ({ key: getRuleKey(rule), ...rule }))));\n          });\n        }\n        loadedRulesCount += nextRulesBatch.value.length;\n      }\n    }, 'alerting.rule-list.filter-view.load-result-page')\n  );\n\n  const loading = isLoading(state) || transitionPending;\n  const numberOfRules = rules.length;\n  const noRulesFound = numberOfRules === 0 && !loading;\n  const loadingAborted = iteration.current?.abortController.signal.aborted;\n  const cancelSearch = useCallback(() => {\n    iteration.current?.abortController.abort();\n  }, []);\n\n  /* When we unmount the component we make sure to abort all iterables and stop making HTTP requests */\n  useUnmount(() => {\n    cancelSearch();\n  });\n\n  // track the state of the filter progress, which is either searching, done or aborted\n  const filterProgressState = useMemo<FilterProgressState>(() => {\n    if (loadingAborted) {\n      return 'aborted';\n    } else if (doneSearching) {\n      return 'done';\n    }\n    return 'searching';\n  }, [doneSearching, loadingAborted]);\n\n  /* If we don't have any rules and have exhausted all sources, show a EmptyState */\n  if (noRulesFound && doneSearching) {\n    return (\n      <EmptyState variant=\"not-found\" message=\"No matching rules found\">\n        <Trans i18nKey=\"alerting.rule-list.filter-view.no-rules-found\">\n          No alert or recording rules matched your current set of filters.\n        </Trans>\n      </EmptyState>\n    );\n  }\n\n  return (\n    <Stack direction=\"column\" gap={0}>\n      <ul aria-label={t('alerting.filter-view-results.aria-label-filteredrulelist', 'filtered-rule-list')}>\n        {rules.map((ruleWithOrigin) => {\n          const { key, rule, groupIdentifier, origin } = ruleWithOrigin;\n\n          switch (origin) {\n            case 'grafana':\n              return (\n                <GrafanaRuleListItem\n                  rule={rule}\n                  groupIdentifier={groupIdentifier}\n                  namespaceName={ruleWithOrigin.namespaceName}\n                  showLocation={true}\n                />\n              );\n            case 'datasource':\n              return <DataSourceRuleLoader key={key} rule={rule} groupIdentifier={groupIdentifier} />;\n            default:\n              return (\n                <UnknownRuleListItem\n                  key={key}\n                  ruleName={t('alerting.rule-list.unknown-rule-type', 'Unknown rule type')}\n                  groupIdentifier={groupIdentifier}\n                  ruleDefinition={rule}\n                />\n              );\n          }\n        })}\n        {loading && (\n          <>\n            <AlertRuleListItemSkeleton />\n            <AlertRuleListItemSkeleton />\n          </>\n        )}\n      </ul>\n      {!noRulesFound && (\n        <FilterStatus state={filterProgressState} numberOfRules={numberOfRules} onCancel={cancelSearch} />\n      )}\n      {!doneSearching && !loading && !loadingAborted && <LoadMoreHelper handleLoad={loadResultPage} />}\n    </Stack>\n  );\n}\n\n// simple helper function to detect the end of the source async iterable\nfunction onFinished<T>(fn: () => void) {\n  return tap<T>(undefined, undefined, fn);\n}\n\nfunction getRuleKey(ruleWithOrigin: RuleWithOrigin): string {\n  if (ruleWithOrigin.origin === 'grafana') {\n    return getGrafanaRuleKey(ruleWithOrigin);\n  }\n  return getDataSourceRuleKey(ruleWithOrigin);\n}\n\nfunction getGrafanaRuleKey(ruleWithOrigin: GrafanaRuleWithOrigin) {\n  const {\n    groupIdentifier: { namespace, groupName },\n    rule,\n  } = ruleWithOrigin;\n  return `grafana-${namespace.uid}-${groupName}-${rule.uid}}`;\n}\n\nfunction getDataSourceRuleKey(ruleWithOrigin: PromRuleWithOrigin) {\n  const {\n    rule,\n    groupIdentifier: { rulesSource, namespace, groupName },\n  } = ruleWithOrigin;\n  return `${rulesSource.name}-${namespace.name}-${groupName}-${rule.name}-${rule.type}-${hashRule(rule)}`;\n}\n","import { css, cx } from '@emotion/css';\nimport { PropsWithChildren } from 'react';\n\nimport { GrafanaTheme2 } from '@grafana/data';\nimport { Trans, t } from '@grafana/i18n';\nimport { Badge, Button, Dropdown, Icon, Menu, Stack, Text, useStyles2 } from '@grafana/ui';\n\nimport { MetaText } from '../../components/MetaText';\nimport MoreButton from '../../components/MoreButton';\nimport { Spacer } from '../../components/Spacer';\n\ninterface EvaluationGroupProps extends PropsWithChildren {\n  name: string;\n  interval?: string;\n  provenance?: string;\n  isOpen?: boolean;\n  onToggle: () => void;\n}\n\nexport const EvaluationGroup = ({\n  name,\n  provenance,\n  interval,\n  onToggle,\n  isOpen = false,\n  children,\n}: EvaluationGroupProps) => {\n  const styles = useStyles2(getStyles);\n\n  const isProvisioned = Boolean(provenance);\n\n  return (\n    <Stack direction=\"column\" role=\"treeitem\" aria-expanded={isOpen} aria-selected=\"false\" gap={0}>\n      <div className={styles.headerWrapper}>\n        <Stack direction=\"row\" alignItems=\"center\" gap={1}>\n          <button className={cx(styles.hiddenButton, styles.largerClickTarget)} type=\"button\" onClick={onToggle}>\n            <Stack alignItems=\"center\" gap={0.5}>\n              <Icon name={isOpen ? 'angle-down' : 'angle-right'} />\n              <Text truncate variant=\"body\">\n                {name}\n              </Text>\n            </Stack>\n          </button>\n          {isProvisioned && (\n            <Badge color=\"purple\" text={t('alerting.evaluation-group.text-provisioned', 'Provisioned')} />\n          )}\n          <Spacer />\n          {interval && <MetaText icon=\"history\">{interval}</MetaText>}\n          <Button size=\"sm\" icon=\"pen\" variant=\"secondary\" disabled={isProvisioned} data-testid=\"edit-group-action\">\n            <Trans i18nKey=\"common.edit\">Edit</Trans>\n          </Button>\n          <Dropdown\n            overlay={\n              <Menu>\n                <Menu.Item\n                  label={t('alerting.evaluation-group.label-reorder-rules', 'Re-order rules')}\n                  icon=\"flip\"\n                  disabled={isProvisioned}\n                />\n                <Menu.Divider />\n                <Menu.Item label={t('alerting.evaluation-group.label-export', 'Export')} icon=\"download-alt\" />\n                <Menu.Item\n                  label={t('alerting.evaluation-group.label-delete', 'Delete')}\n                  icon=\"trash-alt\"\n                  destructive\n                  disabled={isProvisioned}\n                />\n              </Menu>\n            }\n          >\n            <MoreButton size=\"sm\" />\n          </Dropdown>\n        </Stack>\n      </div>\n      {isOpen && <div role=\"group\">{children}</div>}\n    </Stack>\n  );\n};\n\nconst getStyles = (theme: GrafanaTheme2) => ({\n  headerWrapper: css({\n    padding: `${theme.spacing(1)} ${theme.spacing(1)}`,\n\n    background: theme.colors.background.secondary,\n\n    border: 'none',\n    borderBottom: `solid 1px ${theme.colors.border.weak}`,\n    borderTopLeftRadius: theme.shape.radius.default,\n    borderTopRightRadius: theme.shape.radius.default,\n  }),\n  hiddenButton: css({\n    border: 'none',\n    background: 'transparent',\n  }),\n  largerClickTarget: css({\n    padding: theme.spacing(0.5),\n    margin: `-${theme.spacing(0.5)}`,\n  }),\n});\n","import { useEffect } from 'react';\nimport { useMeasure, useToggle } from 'react-use';\n\nimport { t } from '@grafana/i18n';\nimport { Alert, LoadingBar, Pagination } from '@grafana/ui';\nimport { RulerDataSourceConfig } from 'app/types/unified-alerting';\nimport { PromAlertingRuleState } from 'app/types/unified-alerting-dto';\n\nimport { alertRuleApi } from '../../api/alertRuleApi';\nimport { usePagination } from '../../hooks/usePagination';\nimport { Annotation } from '../../utils/constants';\nimport { prometheusRuleType } from '../../utils/rules';\n\nimport { AlertRuleListItem } from './AlertRuleListItem';\nimport { EvaluationGroup } from './EvaluationGroup';\nimport { SkeletonListItem } from './ListItem';\n\ninterface EvaluationGroupLoaderProps {\n  name: string;\n  interval?: string;\n  provenance?: string;\n  namespace: string;\n  rulerConfig?: RulerDataSourceConfig;\n}\n\nconst ALERT_RULE_PAGE_SIZE = 15;\n\nexport const EvaluationGroupLoader = ({\n  name,\n  provenance,\n  interval,\n  namespace,\n  rulerConfig,\n}: EvaluationGroupLoaderProps) => {\n  const [isOpen, toggle] = useToggle(false);\n\n  // TODO use Prometheus endpoint here?\n  const [fetchRulerRuleGroup, { currentData: promNamespace, isLoading, error }] =\n    alertRuleApi.endpoints.prometheusRuleNamespaces.useLazyQuery();\n\n  const promRules = promNamespace?.flatMap((namespace) => namespace.groups).flatMap((groups) => groups.rules);\n  const { page, pageItems, onPageChange, numberOfPages } = usePagination(promRules ?? [], 1, ALERT_RULE_PAGE_SIZE);\n\n  useEffect(() => {\n    if (isOpen && rulerConfig) {\n      fetchRulerRuleGroup({\n        namespace,\n        groupName: name,\n        ruleSourceName: rulerConfig.dataSourceName,\n      });\n    }\n  }, [fetchRulerRuleGroup, isOpen, name, namespace, rulerConfig]);\n\n  return (\n    <EvaluationGroup name={name} interval={interval} provenance={provenance} isOpen={isOpen} onToggle={toggle}>\n      {/* @TODO nicer error handling */}\n      {error ? (\n        <Alert\n          title={t(\n            'alerting.evaluation-group-loader.title-something-wrong-trying-fetch-group-details',\n            'Something went wrong when trying to fetch group details'\n          )}\n        >\n          {String(error)}\n        </Alert>\n      ) : (\n        <>\n          {isLoading ? (\n            <GroupLoadingIndicator />\n          ) : (\n            pageItems.map((rule, index) => {\n              <AlertRuleListItem\n                key={index}\n                state={PromAlertingRuleState.Inactive}\n                name={rule.name}\n                href={'/'}\n                summary={prometheusRuleType.alertingRule(rule) ? rule.annotations?.[Annotation.summary] : undefined}\n              />;\n\n              return null;\n            })\n          )}\n          {numberOfPages > 1 && (\n            <Pagination currentPage={page} numberOfPages={numberOfPages} onNavigate={onPageChange} />\n          )}\n        </>\n      )}\n    </EvaluationGroup>\n  );\n};\n\nexport const LoadingIndicator = ({ datasourceUid }: { datasourceUid: string }) => {\n  const [ref, { width }] = useMeasure<HTMLDivElement>();\n\n  return (\n    <div ref={ref} data-testid={`ds-loading-indicator-${datasourceUid}`}>\n      <LoadingBar width={width} />\n    </div>\n  );\n};\n\nconst GroupLoadingIndicator = () => {\n  const [ref, { width }] = useMeasure<HTMLDivElement>();\n\n  return (\n    <div ref={ref}>\n      <LoadingBar width={width} />\n      <SkeletonListItem />\n    </div>\n  );\n};\n","import { css } from '@emotion/css';\nimport { PropsWithChildren, ReactNode } from 'react';\nimport { useToggle } from 'react-use';\n\nimport { GrafanaTheme2 } from '@grafana/data';\nimport { Trans, t } from '@grafana/i18n';\nimport { Button, IconButton, LinkButton, Stack, Text, Toggletip, useStyles2 } from '@grafana/ui';\nimport { GrafanaRulesSourceSymbol, RulesSourceIdentifier } from 'app/types/unified-alerting';\nimport { RulesSourceApplication } from 'app/types/unified-alerting-dto';\n\nimport { Spacer } from '../../components/Spacer';\nimport { WithReturnButton } from '../../components/WithReturnButton';\nimport { isAdmin, stringifyErrorLike } from '../../utils/misc';\n\nimport { DataSourceIcon } from './Namespace';\nimport { LoadingIndicator } from './RuleGroup';\n\nexport interface DataSourceSectionProps extends PropsWithChildren {\n  uid: RulesSourceIdentifier['uid'];\n  name: string;\n  loader?: ReactNode;\n  application?: RulesSourceApplication;\n  isLoading?: boolean;\n  description?: ReactNode;\n  error?: unknown;\n}\n\nexport const DataSourceSection = ({\n  uid,\n  name,\n  application,\n  children,\n  loader,\n  error,\n  isLoading = false,\n  description = null,\n}: DataSourceSectionProps) => {\n  const [isCollapsed, toggleCollapsed] = useToggle(false);\n  const styles = useStyles2((theme) => getStyles(theme, isCollapsed));\n\n  const configureLink = (() => {\n    if (uid === GrafanaRulesSourceSymbol) {\n      const userIsAdmin = isAdmin();\n      if (!userIsAdmin) {\n        return;\n      }\n      return '/alerting/admin';\n    }\n    return `/connections/datasources/edit/${String(uid)}`;\n  })();\n\n  return (\n    <section aria-labelledby={`datasource-${String(uid)}-heading`} role=\"listitem\">\n      <Stack direction=\"column\" gap={0}>\n        <Stack direction=\"column\" gap={0}>\n          {isLoading && <LoadingIndicator datasourceUid={String(uid)} />}\n          <div className={styles.dataSourceSectionTitle}>\n            {loader ?? (\n              <Stack alignItems=\"center\">\n                <IconButton\n                  name={isCollapsed ? 'angle-right' : 'angle-down'}\n                  onClick={toggleCollapsed}\n                  aria-label={t('common.collapse', 'Collapse')}\n                  disabled={Boolean(error)}\n                />\n                {application && <DataSourceIcon application={application} />}\n\n                <Text variant=\"body\" weight=\"bold\" element=\"h2\" id={`datasource-${String(uid)}-heading`}>\n                  {name}\n                </Text>\n                {description && (\n                  <Text color=\"secondary\">\n                    {''} {description}\n                  </Text>\n                )}\n\n                <Spacer />\n\n                {Boolean(error) && (\n                  <Toggletip\n                    title={t('alerting.rule-list.ds-error.title', 'Cannot load rules for this datasource')}\n                    content={<Text color=\"error\">{stringifyErrorLike(error)}</Text>}\n                  >\n                    <Button variant=\"destructive\" fill=\"text\" size=\"sm\" icon=\"exclamation-circle\">\n                      <Trans i18nKey=\"alerting.rule-list.error-button\">Error</Trans>\n                    </Button>\n                  </Toggletip>\n                )}\n\n                {configureLink && (\n                  <WithReturnButton\n                    title={t('alerting.rule-list.return-button.title', 'Alert rules')}\n                    component={\n                      <LinkButton variant=\"secondary\" fill=\"text\" size=\"sm\" href={configureLink}>\n                        <Trans i18nKey=\"alerting.rule-list.configure-datasource\">Configure</Trans>\n                      </LinkButton>\n                    }\n                  />\n                )}\n              </Stack>\n            )}\n          </div>\n        </Stack>\n        {!isCollapsed && <div className={styles.itemsWrapper}>{children}</div>}\n      </Stack>\n    </section>\n  );\n};\n\nconst getStyles = (theme: GrafanaTheme2, isCollapsed = false) => ({\n  itemsWrapper: css({\n    position: 'relative',\n  }),\n  dataSourceSectionTitle: css({\n    background: theme.colors.background.secondary,\n    padding: theme.spacing(1, 1.5),\n  }),\n});\n","import { Icon, Stack, Text } from '@grafana/ui';\n\nimport { formatPrometheusDuration } from '../../utils/time';\n\ninterface GroupIntervalIndicatorProps {\n  seconds: number;\n}\n\n/*\n * @TODO maybe make this more generic by accepting props to change size and color?\n */\nexport const GroupIntervalIndicator = ({ seconds }: GroupIntervalIndicatorProps) => {\n  const durationString = formatPrometheusDuration(seconds * 1000);\n\n  return (\n    <Text variant=\"bodySmall\" color=\"secondary\">\n      <Stack direction=\"row\" alignItems=\"center\" gap={0.5}>\n        <Icon name=\"clock-nine\" size=\"xs\" /> {durationString}\n      </Stack>\n    </Text>\n  );\n};\n","import { css } from '@emotion/css';\nimport { PropsWithChildren, ReactNode } from 'react';\nimport { useToggle } from 'react-use';\n\nimport { GrafanaTheme2 } from '@grafana/data';\nimport { t } from '@grafana/i18n';\nimport { IconButton, Stack, Text, TextLink, useStyles2 } from '@grafana/ui';\n\nimport { Spacer } from '../../components/Spacer';\n\ninterface GroupProps extends PropsWithChildren {\n  name: string;\n  description?: ReactNode;\n  metaRight?: ReactNode;\n  actions?: ReactNode;\n  isOpen?: boolean;\n  href?: string;\n}\n\nexport const ListGroup = ({\n  name,\n  description,\n  isOpen = true,\n  metaRight = null,\n  actions = null,\n  href,\n  children,\n}: GroupProps) => {\n  const styles = useStyles2(getStyles);\n  const [open, toggle] = useToggle(isOpen);\n\n  return (\n    <div className={styles.groupWrapper} role=\"treeitem\" aria-expanded={open} aria-selected=\"false\">\n      <GroupHeader\n        onToggle={() => toggle()}\n        isOpen={open}\n        description={description}\n        name={name}\n        metaRight={metaRight}\n        actions={actions}\n        href={href}\n      />\n      {open && (\n        <div role=\"group\" className={styles.childrenWrapper}>\n          {children}\n        </div>\n      )}\n    </div>\n  );\n};\n\ntype GroupHeaderProps = GroupProps & {\n  onToggle: () => void;\n};\n\nconst GroupHeader = (props: GroupHeaderProps) => {\n  const { name, description, metaRight = null, actions = null, isOpen = false, onToggle, href } = props;\n\n  const styles = useStyles2(getStyles);\n\n  return (\n    <div className={styles.headerWrapper}>\n      <Stack direction=\"row\" alignItems=\"center\" gap={1}>\n        <Stack alignItems=\"center\" gap={0.5}>\n          <IconButton\n            name={isOpen ? 'angle-down' : 'angle-right'}\n            onClick={onToggle}\n            aria-label={t('common.collapse', 'Collapse')}\n          />\n          {href ? (\n            <TextLink href={href} color=\"primary\" inline={false}>\n              {name}\n            </TextLink>\n          ) : (\n            <Text truncate variant=\"body\" element=\"h4\">\n              {name}\n            </Text>\n          )}\n        </Stack>\n\n        {description}\n        <Spacer />\n        {metaRight}\n        {actions}\n      </Stack>\n    </div>\n  );\n};\n\nconst getStyles = (theme: GrafanaTheme2) => ({\n  groupWrapper: css({\n    display: 'flex',\n    flexDirection: 'column',\n    position: 'relative',\n\n    '&:before': {\n      content: \"''\",\n      position: 'absolute',\n      height: '100%',\n\n      marginLeft: theme.spacing(2.5),\n      borderLeft: `solid 1px ${theme.colors.border.weak}`,\n    },\n  }),\n  headerWrapper: css({\n    padding: theme.spacing(1),\n    paddingLeft: theme.spacing(4),\n    position: 'relative',\n\n    '&:hover': {\n      background: theme.colors.action.hover,\n    },\n  }),\n  childrenWrapper: css({\n    position: 'relative',\n  }),\n});\n","import { css } from '@emotion/css';\n\nimport { GrafanaTheme2 } from '@grafana/data';\nimport { Trans } from '@grafana/i18n';\nimport { Text, useStyles2 } from '@grafana/ui';\n\n// @TODO I don't like applying the margins to this component here, ideally the parent component should be layouting this.\nexport const NoRulesFound = () => {\n  const styles = useStyles2(getStyles);\n\n  return (\n    <div className={styles.noRules}>\n      <Text color=\"secondary\">\n        <Trans i18nKey=\"alerting.rule-list.empty-data-source\">No rules found</Trans>\n      </Text>\n    </div>\n  );\n};\n\nconst getStyles = (theme: GrafanaTheme2) => ({\n  noRules: css({\n    margin: theme.spacing(1.5, 0, 0.5, 4),\n  }),\n});\n","import { useState } from 'react';\nimport { useEffectOnce } from 'react-use';\n\nimport { PromRuleGroupDTO } from 'app/types/unified-alerting-dto';\n\nimport { isLoading as isLoadingState, useAsync } from '../../hooks/useAsync';\n\n/**\n * Provides lazy loading for rule groups.\n * Instead of loading all groups at once, it uses a generator to fetch them in batches as needed,\n * which helps with performance when dealing with large numbers of rules.\n *\n * @param groupsGenerator - An async generator that yields rule groups in batches\n * @param pageSize - Number of groups to display per page\n * @returns Groups loaded so far and controls for navigating through rule groups\n */\nexport function useLazyLoadPrometheusGroups<TGroup extends PromRuleGroupDTO>(\n  groupsGenerator: AsyncIterator<TGroup>,\n  pageSize: number,\n  filter?: (group: TGroup) => boolean\n) {\n  const [groups, setGroups] = useState<TGroup[]>([]);\n  const [hasMoreGroups, setHasMoreGroups] = useState<boolean>(true);\n\n  const [{ execute: fetchMoreGroups }, groupsRequestState] = useAsync(async () => {\n    let done = false;\n    const currentGroups: TGroup[] = [];\n\n    while (currentGroups.length < pageSize) {\n      const generatorResult = await groupsGenerator.next();\n      if (generatorResult.done) {\n        done = true;\n        break;\n      }\n\n      const group = generatorResult.value;\n      if (filter && !filter(group)) {\n        continue;\n      }\n\n      currentGroups.push(group);\n    }\n\n    if (done) {\n      setHasMoreGroups(false);\n    }\n\n    setGroups((groups) => groups.concat(currentGroups));\n  });\n\n  // make sure we only load the initial group exactly once\n  useEffectOnce(() => {\n    fetchMoreGroups();\n  });\n\n  const isLoading = isLoadingState(groupsRequestState);\n\n  return {\n    isLoading,\n    error: groupsRequestState.error,\n    groups,\n    hasMoreGroups,\n    fetchMoreGroups,\n  };\n}\n","import { groupBy, isEmpty } from 'lodash';\nimport { useEffect, useMemo, useRef } from 'react';\n\nimport { Icon, Stack, Text } from '@grafana/ui';\nimport { DataSourceRuleGroupIdentifier, DataSourceRulesSourceIdentifier, RuleGroup } from 'app/types/unified-alerting';\nimport { PromRuleGroupDTO } from 'app/types/unified-alerting-dto';\n\nimport { groups } from '../utils/navigation';\n\nimport { DataSourceGroupLoader } from './DataSourceGroupLoader';\nimport { DataSourceSection, DataSourceSectionProps } from './components/DataSourceSection';\nimport { GroupIntervalIndicator } from './components/GroupIntervalMetadata';\nimport { ListGroup } from './components/ListGroup';\nimport { ListSection } from './components/ListSection';\nimport { LoadMoreButton } from './components/LoadMoreButton';\nimport { NoRulesFound } from './components/NoRulesFound';\nimport { groupFilter as groupFilterFn } from './hooks/filters';\nimport { toIndividualRuleGroups, usePrometheusGroupsGenerator } from './hooks/prometheusGroupsGenerator';\nimport { useLazyLoadPrometheusGroups } from './hooks/useLazyLoadPrometheusGroups';\nimport { FRONTED_GROUPED_PAGE_SIZE, getApiGroupPageSize } from './paginationLimits';\n\ninterface LoaderProps extends Required<Pick<DataSourceSectionProps, 'application'>> {\n  rulesSourceIdentifier: DataSourceRulesSourceIdentifier;\n  groupFilter?: string;\n  namespaceFilter?: string;\n}\n\nexport function PaginatedDataSourceLoader({\n  rulesSourceIdentifier,\n  application,\n  groupFilter,\n  namespaceFilter,\n}: LoaderProps) {\n  const key = `${rulesSourceIdentifier.uid}-${groupFilter}-${namespaceFilter}`;\n\n  // Key is crucial. It resets the generator when filters change.\n  return (\n    <PaginatedGroupsLoader\n      key={key}\n      rulesSourceIdentifier={rulesSourceIdentifier}\n      application={application}\n      groupFilter={groupFilter}\n      namespaceFilter={namespaceFilter}\n    />\n  );\n}\n\nfunction PaginatedGroupsLoader({ rulesSourceIdentifier, application, groupFilter, namespaceFilter }: LoaderProps) {\n  // If there are filters, we don't want to populate the cache to avoid performance issues\n  // Filtering may trigger multiple HTTP requests, which would populate the cache with a lot of groups hurting performance\n  const hasFilters = Boolean(groupFilter || namespaceFilter);\n\n  const { uid, name } = rulesSourceIdentifier;\n  const prometheusGroupsGenerator = usePrometheusGroupsGenerator();\n\n  // If there are no filters we can match one frontend page to one API page.\n  // However, if there are filters, we need to fetch more groups from the API to populate one frontend page\n  const apiGroupPageSize = getApiGroupPageSize(hasFilters);\n\n  const groupsGenerator = useRef(\n    toIndividualRuleGroups(prometheusGroupsGenerator(rulesSourceIdentifier, apiGroupPageSize))\n  );\n\n  useEffect(() => {\n    const currentGenerator = groupsGenerator.current;\n    return () => {\n      currentGenerator.return();\n    };\n  }, []);\n\n  const filterFn = useMemo(\n    () => (group: PromRuleGroupDTO) =>\n      groupFilterFn(group, {\n        namespace: namespaceFilter,\n        groupName: groupFilter,\n      }),\n    [namespaceFilter, groupFilter]\n  );\n\n  const { isLoading, groups, hasMoreGroups, fetchMoreGroups, error } = useLazyLoadPrometheusGroups(\n    groupsGenerator.current,\n    FRONTED_GROUPED_PAGE_SIZE,\n    filterFn\n  );\n\n  const hasNoRules = isEmpty(groups) && !isLoading;\n  const groupsByNamespace = useMemo(() => groupBy(groups, 'file'), [groups]);\n\n  return (\n    <DataSourceSection name={name} application={application} uid={uid} isLoading={isLoading} error={error}>\n      <Stack direction=\"column\" gap={0}>\n        {Object.entries(groupsByNamespace).map(([namespace, groups]) => (\n          <ListSection\n            key={namespace}\n            title={\n              <Stack direction=\"row\" gap={1} alignItems=\"center\">\n                <Icon name=\"folder\" />{' '}\n                <Text variant=\"body\" element=\"h3\">\n                  {namespace}\n                </Text>\n              </Stack>\n            }\n          >\n            {groups.map((group) => (\n              <RuleGroupListItem\n                key={`${rulesSourceIdentifier.uid}-${namespace}-${group.name}`}\n                group={group}\n                rulesSourceIdentifier={rulesSourceIdentifier}\n                namespaceName={namespace}\n              />\n            ))}\n          </ListSection>\n        ))}\n        {hasMoreGroups && !hasNoRules && (\n          // this div will make the button not stretch\n          <div>\n            <LoadMoreButton loading={isLoading} onClick={fetchMoreGroups} />\n          </div>\n        )}\n        {hasNoRules && <NoRulesFound />}\n      </Stack>\n    </DataSourceSection>\n  );\n}\n\ninterface RuleGroupListItemProps {\n  group: RuleGroup;\n  rulesSourceIdentifier: DataSourceRulesSourceIdentifier;\n  namespaceName: string;\n}\n\nfunction RuleGroupListItem({ rulesSourceIdentifier, group, namespaceName }: RuleGroupListItemProps) {\n  const groupIdentifier: DataSourceRuleGroupIdentifier = useMemo(\n    () => ({\n      rulesSource: rulesSourceIdentifier,\n      namespace: { name: namespaceName },\n      groupName: group.name,\n      groupOrigin: 'datasource',\n    }),\n    [rulesSourceIdentifier, namespaceName, group.name]\n  );\n\n  return (\n    <ListGroup\n      key={group.name}\n      name={group.name}\n      href={groups.detailsPageLink(rulesSourceIdentifier.uid, namespaceName, group.name)}\n      isOpen={false}\n      metaRight={<GroupIntervalIndicator seconds={group.interval} />}\n    >\n      <DataSourceGroupLoader groupIdentifier={groupIdentifier} expectedRulesCount={group.rules.length} />\n    </ListGroup>\n  );\n}\n","import { groupBy, isEmpty } from 'lodash';\nimport { useEffect, useMemo, useRef } from 'react';\n\nimport { Icon, Stack, Text } from '@grafana/ui';\nimport { GrafanaRuleGroupIdentifier, GrafanaRulesSourceSymbol } from 'app/types/unified-alerting';\nimport { GrafanaPromRuleGroupDTO, PromRuleGroupDTO } from 'app/types/unified-alerting-dto';\n\nimport { FolderActionsButton } from '../components/folder-actions/FolderActionsButton';\nimport { GrafanaNoRulesCTA } from '../components/rules/NoRulesCTA';\nimport { GRAFANA_RULES_SOURCE_NAME } from '../utils/datasource';\nimport { groups } from '../utils/navigation';\n\nimport { GrafanaGroupLoader } from './GrafanaGroupLoader';\nimport { DataSourceSection } from './components/DataSourceSection';\nimport { GroupIntervalIndicator } from './components/GroupIntervalMetadata';\nimport { ListGroup } from './components/ListGroup';\nimport { ListSection } from './components/ListSection';\nimport { LoadMoreButton } from './components/LoadMoreButton';\nimport { NoRulesFound } from './components/NoRulesFound';\nimport { groupFilter as groupFilterFn } from './hooks/filters';\nimport { toIndividualRuleGroups, useGrafanaGroupsGenerator } from './hooks/prometheusGroupsGenerator';\nimport { useLazyLoadPrometheusGroups } from './hooks/useLazyLoadPrometheusGroups';\nimport { FRONTED_GROUPED_PAGE_SIZE, getApiGroupPageSize } from './paginationLimits';\n\ninterface LoaderProps {\n  groupFilter?: string;\n  namespaceFilter?: string;\n}\n\nexport function PaginatedGrafanaLoader({ groupFilter, namespaceFilter }: LoaderProps) {\n  const key = `${groupFilter}-${namespaceFilter}`;\n\n  // Key is crucial. It resets the generator when filters change.\n  return <PaginatedGroupsLoader key={key} groupFilter={groupFilter} namespaceFilter={namespaceFilter} />;\n}\n\nfunction PaginatedGroupsLoader({ groupFilter, namespaceFilter }: LoaderProps) {\n  // If there are filters, we don't want to populate the cache to avoid performance issues\n  // Filtering may trigger multiple HTTP requests, which would populate the cache with a lot of groups hurting performance\n  const hasFilters = Boolean(groupFilter || namespaceFilter);\n\n  const grafanaGroupsGenerator = useGrafanaGroupsGenerator({\n    populateCache: hasFilters ? false : true,\n    limitAlerts: 0,\n  });\n\n  // If there are no filters we can match one frontend page to one API page.\n  // However, if there are filters, we need to fetch more groups from the API to populate one frontend page\n  const apiGroupPageSize = getApiGroupPageSize(hasFilters);\n\n  const groupsGenerator = useRef(toIndividualRuleGroups(grafanaGroupsGenerator(apiGroupPageSize)));\n\n  useEffect(() => {\n    const currentGenerator = groupsGenerator.current;\n    return () => {\n      currentGenerator.return();\n    };\n  }, []);\n\n  const filterFn = useMemo(\n    () => (group: PromRuleGroupDTO) =>\n      groupFilterFn(group, {\n        namespace: namespaceFilter,\n        groupName: groupFilter,\n      }),\n    [namespaceFilter, groupFilter]\n  );\n\n  const { isLoading, groups, hasMoreGroups, fetchMoreGroups, error } = useLazyLoadPrometheusGroups(\n    groupsGenerator.current,\n    FRONTED_GROUPED_PAGE_SIZE,\n    filterFn\n  );\n\n  const groupsByFolder = useMemo(() => groupBy(groups, 'folderUid'), [groups]);\n  const hasNoRules = isEmpty(groups) && !isLoading;\n\n  return (\n    <DataSourceSection\n      name=\"Grafana-managed\"\n      application=\"grafana\"\n      uid={GrafanaRulesSourceSymbol}\n      isLoading={isLoading}\n      error={error}\n    >\n      <Stack direction=\"column\" gap={0}>\n        {Object.entries(groupsByFolder).map(([folderUid, groups]) => {\n          // Groups are grouped by folder, so we can use the first group to get the folder name\n          const folderName = groups[0].file;\n\n          return (\n            <ListSection\n              key={folderUid}\n              title={\n                <Stack direction=\"row\" gap={1} alignItems=\"center\">\n                  <Icon name=\"folder\" />{' '}\n                  <Text variant=\"body\" element=\"h3\">\n                    {folderName}\n                  </Text>\n                </Stack>\n              }\n              actions={<FolderActionsButton folderUID={folderUid} />}\n            >\n              {groups.map((group) => (\n                <GrafanaRuleGroupListItem\n                  key={`grafana-ns-${folderUid}-${group.name}`}\n                  group={group}\n                  namespaceName={folderName}\n                />\n              ))}\n            </ListSection>\n          );\n        })}\n        {/* only show the CTA if the user has no rules and this isn't the result of a filter / search query */}\n        {hasNoRules && !hasFilters && <GrafanaNoRulesCTA />}\n        {hasNoRules && hasFilters && <NoRulesFound />}\n        {hasMoreGroups && (\n          // this div will make the button not stretch\n          <div>\n            <LoadMoreButton loading={isLoading} onClick={fetchMoreGroups} />\n          </div>\n        )}\n      </Stack>\n    </DataSourceSection>\n  );\n}\n\ninterface GrafanaRuleGroupListItemProps {\n  group: GrafanaPromRuleGroupDTO;\n  namespaceName: string;\n}\n\nexport function GrafanaRuleGroupListItem({ group, namespaceName }: GrafanaRuleGroupListItemProps) {\n  const groupIdentifier: GrafanaRuleGroupIdentifier = useMemo(\n    () => ({\n      groupName: group.name,\n      namespace: {\n        uid: group.folderUid,\n      },\n      groupOrigin: 'grafana',\n    }),\n    [group.name, group.folderUid]\n  );\n\n  const detailsLink = groups.detailsPageLink(GRAFANA_RULES_SOURCE_NAME, group.folderUid, group.name);\n\n  return (\n    <ListGroup\n      key={group.name}\n      name={group.name}\n      metaRight={<GroupIntervalIndicator seconds={group.interval} />}\n      href={detailsLink}\n      isOpen={false}\n    >\n      <GrafanaGroupLoader groupIdentifier={groupIdentifier} namespaceName={namespaceName} />\n    </ListGroup>\n  );\n}\n","import { Trans, t } from '@grafana/i18n';\nimport { Alert, ErrorBoundary, ErrorWithStack, Text } from '@grafana/ui';\nimport { RulesSourceIdentifier } from 'app/types/unified-alerting';\n\nimport { DataSourceSection } from './DataSourceSection';\n\n/**\n * Some more exotic Prometheus data sources might not be 100% compatible with Prometheus API\n * We don't want them to break the whole page, so we wrap them in an error boundary\n */\n\nexport function DataSourceErrorBoundary({\n  children,\n  rulesSourceIdentifier,\n}: {\n  children: React.ReactNode;\n  rulesSourceIdentifier: RulesSourceIdentifier;\n}) {\n  return (\n    <ErrorBoundary>\n      {({ error, errorInfo }) => {\n        if (error || errorInfo) {\n          const { uid, name } = rulesSourceIdentifier;\n          return (\n            <DataSourceSection uid={uid} name={name}>\n              <Alert\n                title={t('alerting.rule-list.ds-error-boundary.title', 'Unable to load rules from this data source')}\n              >\n                <Text>\n                  <Trans i18nKey=\"alerting.rule-list.ds-error-boundary.description\">\n                    Check the data source configuration. Does the data source support Prometheus API?\n                  </Trans>\n                </Text>\n                <ErrorWithStack\n                  error={error}\n                  errorInfo={errorInfo}\n                  title={t('alerting.rule-list.ds-error-boundary.title', 'Unable to load rules from this data source')}\n                />\n              </Alert>\n            </DataSourceSection>\n          );\n        }\n        return children;\n      }}\n    </ErrorBoundary>\n  );\n}\n","import { useMemo } from 'react';\nimport Skeleton from 'react-loading-skeleton';\n\nimport { Stack } from '@grafana/ui';\nimport { DataSourceRulesSourceIdentifier } from 'app/types/unified-alerting';\n\nimport { featureDiscoveryApi } from '../api/featureDiscoveryApi';\nimport { GrafanaRulesSource, getExternalRulesSources } from '../utils/datasource';\n\nimport { PaginatedDataSourceLoader } from './PaginatedDataSourceLoader';\nimport { PaginatedGrafanaLoader } from './PaginatedGrafanaLoader';\nimport { DataSourceErrorBoundary } from './components/DataSourceErrorBoundary';\nimport { DataSourceSection } from './components/DataSourceSection';\n\nconst { useDiscoverDsFeaturesQuery } = featureDiscoveryApi;\n\ninterface GroupedViewProps {\n  groupFilter?: string;\n  namespaceFilter?: string;\n}\n\nexport function GroupedView({ groupFilter, namespaceFilter }: GroupedViewProps) {\n  const externalRuleSources = useMemo(() => getExternalRulesSources(), []);\n\n  return (\n    <Stack direction=\"column\" gap={1} role=\"list\">\n      <DataSourceErrorBoundary rulesSourceIdentifier={GrafanaRulesSource}>\n        <PaginatedGrafanaLoader\n          groupFilter={groupFilter}\n          namespaceFilter={namespaceFilter}\n          key={`${groupFilter}-${namespaceFilter}`}\n        />\n      </DataSourceErrorBoundary>\n      {externalRuleSources.map((ruleSource) => {\n        return (\n          <DataSourceLoader\n            key={ruleSource.uid}\n            rulesSourceIdentifier={ruleSource}\n            groupFilter={groupFilter}\n            namespaceFilter={namespaceFilter}\n          />\n        );\n      })}\n    </Stack>\n  );\n}\n\ninterface DataSourceLoaderProps {\n  rulesSourceIdentifier: DataSourceRulesSourceIdentifier;\n  groupFilter?: string;\n  namespaceFilter?: string;\n}\n\nexport function GrafanaDataSourceLoader() {\n  return <DataSourceSection name=\"Grafana\" application=\"grafana\" uid=\"grafana\" isLoading={true} />;\n}\n\nfunction DataSourceLoader({ rulesSourceIdentifier, groupFilter, namespaceFilter }: DataSourceLoaderProps) {\n  const { data: dataSourceInfo, isLoading, error } = useDiscoverDsFeaturesQuery({ uid: rulesSourceIdentifier.uid });\n\n  const { uid, name } = rulesSourceIdentifier;\n\n  if (isLoading) {\n    return <DataSourceSection loader={<Skeleton width={250} height={16} />} uid={uid} name={name} />;\n  }\n\n  if (error) {\n    return <DataSourceSection error={error} uid={uid} name={name} />;\n  }\n\n  // 2. grab prometheus rule groups with max_groups if supported\n  if (dataSourceInfo) {\n    return (\n      <DataSourceErrorBoundary rulesSourceIdentifier={rulesSourceIdentifier}>\n        <PaginatedDataSourceLoader\n          rulesSourceIdentifier={rulesSourceIdentifier}\n          application={dataSourceInfo.application}\n          groupFilter={groupFilter}\n          namespaceFilter={namespaceFilter}\n        />\n      </DataSourceErrorBoundary>\n    );\n  }\n\n  return null;\n}\n","import { Suspense, lazy } from 'react';\n\nimport { config } from '@grafana/runtime';\n\nimport RulesFilterV1 from '../../components/rules/Filter/RulesFilter.v1';\nimport { SupportedView } from '../../components/rules/Filter/RulesViewModeSelector';\n\nconst RulesFilterV2 = lazy(() => import('./RulesFilter.v2'));\n\nexport interface RulesFilterProps {\n  onClear?: () => void;\n  viewMode?: SupportedView;\n  onViewModeChange?: (viewMode: SupportedView) => void;\n}\n\nconst RulesFilter = (props: RulesFilterProps) => {\n  const newView = config.featureToggles.alertingFilterV2;\n  return <Suspense>{newView ? <RulesFilterV2 {...props} /> : <RulesFilterV1 {...props} />}</Suspense>;\n};\n\nexport default RulesFilter;\n","import { useMemo } from 'react';\nimport { useToggle } from 'react-use';\n\nimport { Trans, t } from '@grafana/i18n';\nimport { config } from '@grafana/runtime';\nimport { Button, Dropdown, Icon, LinkButton, Menu, Stack } from '@grafana/ui';\nimport { contextSrv } from 'app/core/services/context_srv';\nimport { AccessControlAction } from 'app/types/accessControl';\n\nimport { AlertingPageWrapper } from '../components/AlertingPageWrapper';\nimport { GrafanaRulesExporter } from '../components/export/GrafanaRulesExporter';\nimport { useListViewMode } from '../components/rules/Filter/RulesViewModeSelector';\nimport { AIAlertRuleButtonComponent } from '../enterprise-components/AI/AIGenAlertRuleButton/addAIAlertRuleButton';\nimport { AlertingAction, useAlertingAbility } from '../hooks/useAbilities';\nimport { useRulesFilter } from '../hooks/useFilteredRules';\n\nimport { FilterView } from './FilterView';\nimport { GroupedView } from './GroupedView';\nimport { RuleListPageTitle } from './RuleListPageTitle';\nimport RulesFilter from './filter/RulesFilter';\n\nfunction RuleList() {\n  const { filterState } = useRulesFilter();\n  const { viewMode, handleViewChange } = useListViewMode();\n\n  return (\n    <Stack direction=\"column\">\n      <RulesFilter viewMode={viewMode} onViewModeChange={handleViewChange} />\n      {viewMode === 'list' ? (\n        <FilterView filterState={filterState} />\n      ) : (\n        <GroupedView groupFilter={filterState.groupName} namespaceFilter={filterState.namespace} />\n      )}\n    </Stack>\n  );\n}\n\nexport function RuleListActions() {\n  const [createGrafanaRuleSupported, createGrafanaRuleAllowed] = useAlertingAbility(AlertingAction.CreateAlertRule);\n  const [createCloudRuleSupported, createCloudRuleAllowed] = useAlertingAbility(AlertingAction.CreateExternalAlertRule);\n  const [exportRulesSupported, exportRulesAllowed] = useAlertingAbility(AlertingAction.ExportGrafanaManagedRules);\n\n  const canCreateGrafanaRules = createGrafanaRuleSupported && createGrafanaRuleAllowed;\n  const canCreateCloudRules = createCloudRuleSupported && createCloudRuleAllowed;\n  const canExportRules = exportRulesSupported && exportRulesAllowed;\n\n  const canCreateRules = canCreateGrafanaRules || canCreateCloudRules;\n  // Align import UI permission with convert endpoint requirements: rule create + provisioning set status\n  const canImportRulesToGMA =\n    config.featureToggles.alertingMigrationUI &&\n    contextSrv.hasPermission(AccessControlAction.AlertingRuleCreate) &&\n    contextSrv.hasPermission(AccessControlAction.AlertingProvisioningSetStatus);\n\n  const [showExportDrawer, toggleShowExportDrawer] = useToggle(false);\n\n  const moreActionsMenu = useMemo(\n    () => (\n      <Menu>\n        <Menu.Group>\n          <Menu.Item\n            label={t('alerting.rule-list.new-rule-for-export', 'New alert rule for export')}\n            icon=\"file-export\"\n            url=\"/alerting/export-new-rule\"\n          />\n          {canExportRules && (\n            <Menu.Item\n              label={t('alerting.rule-list.export-all-grafana-rules', 'Export all Grafana rules')}\n              icon=\"download-alt\"\n              onClick={toggleShowExportDrawer}\n            />\n          )}\n          {canImportRulesToGMA && (\n            <Menu.Item\n              label={t('alerting.rule-list-v2.import-to-gma', 'Import alert rules')}\n              icon=\"upload\"\n              url=\"/alerting/import-datasource-managed-rules\"\n            />\n          )}\n        </Menu.Group>\n        <Menu.Group label={t('alerting.rule-list.recording-rules', 'Recording rules')}>\n          {canCreateGrafanaRules && (\n            <Menu.Item\n              label={t('alerting.rule-list.new-grafana-recording-rule', 'New Grafana recording rule')}\n              icon=\"grafana\"\n              url=\"/alerting/new/grafana-recording\"\n            />\n          )}\n          {canCreateCloudRules && (\n            <Menu.Item\n              label={t('alerting.rule-list.new-datasource-recording-rule', 'New Data source recording rule')}\n              icon=\"gf-prometheus\"\n              url=\"/alerting/new/recording\"\n            />\n          )}\n        </Menu.Group>\n      </Menu>\n    ),\n    [canCreateGrafanaRules, canCreateCloudRules, canImportRulesToGMA, canExportRules, toggleShowExportDrawer]\n  );\n\n  return (\n    <Stack direction=\"row\" gap={1}>\n      {canCreateRules && (\n        <LinkButton variant=\"primary\" icon=\"plus\" href=\"/alerting/new/alerting\">\n          <Trans i18nKey=\"alerting.rule-list.new-alert-rule\">New alert rule</Trans>\n        </LinkButton>\n      )}\n      {canCreateGrafanaRules && <AIAlertRuleButtonComponent />}\n      <Dropdown overlay={moreActionsMenu}>\n        <Button variant=\"secondary\">\n          <Trans i18nKey=\"alerting.rule-list.more\">More</Trans> <Icon name=\"angle-down\" />\n        </Button>\n      </Dropdown>\n      {canExportRules && showExportDrawer && <GrafanaRulesExporter onClose={toggleShowExportDrawer} />}\n    </Stack>\n  );\n}\n\nexport default function RuleListPage() {\n  return (\n    <AlertingPageWrapper\n      navId=\"alert-list\"\n      renderTitle={(title) => <RuleListPageTitle title={title} />}\n      isLoading={false}\n      actions={<RuleListActions />}\n    >\n      <RuleList />\n    </AlertingPageWrapper>\n  );\n}\n"],"names":["bindCallback","func","thisArg","argCount","arg","value","index","collection","identity","x","identityAsync","isNumber","isBoolean","isFunction","isObject","isPromise","isArrayLike","isIterable","isIterator","isAsyncIterable","isObservable","isReadableNodeStream","isWritableNodeStream","isReadableDOMStream","isWritableDOMStream","isFetchResponse","toInteger","number","maxSafeInteger","toLength","len","AbortError","message","throwIfAborted","signal","AsyncIterableX","projection","_a","e_1","_b","_c","source","WithAbortAsyncIterable","i","_d","source_1","source_1_1","item","e_1_1","args","n","acc","selector","fn","FromAsyncIterable","FromPromiseIterable","FromObservableAsyncIterable","FromArrayIterable","inst","ARRAY_VALUE","ARRAY_ERROR","AsyncSink","error","resolve","reject","type","length","e_2","_e","e_3","_f","_g","_h","_j","_k","e_2_1","_l","_m","_o","e_3_1","observable","sink","subscription","err","onAbort","next","isBrowser","nodePipe","readableOpts","opts","end","prev","as","from","sleep","dueTime","id","IntervalAsyncIterable","interval","withAbort","wrapWithAbort","ConcatAsyncIterable","outer","_concatAll","concat","OfAsyncIterable","of","MapAsyncIterable","result","map","isPrimitive","wm","safeRace","contenders","deferred","contender","record","NEVER_PROMISE","wrapPromiseWithIndex","promise","done","MergeAsyncIterable","iterators","nexts","active","iterator","iterator$","merge","timerEvent","ended","BufferCountOrTime","bufferSize","maxWaitTime","buffer","timer","merged","bufferCountOrTime","count","time","noop","_","toObserver","complete","observer","e","returnIterator","it","returnAsyncIterator","TapAsyncIterable","obs","res","tap","observerOrNext","useDiscoverDsFeaturesQuery","featureDiscoveryApi","useGetRuleGroupForNamespaceQuery","DataSourceRuleLoader","rule","groupIdentifier","rulesSource","namespace","groupName","dsFeatures","isLoading","rulerRuleGroup","rulerRule","actions","RuleActionsSkeleton","DataSourceRuleListItem","FilterStatus","state","numberOfRules","onCancel","Card","useIntersection","ref","options","intersectionObserverEntry","setIntersectionObserverEntry","handler","entries","observer_1","LoadMoreHelper","handleLoad","intersectionRef","intersection","EmptyAsyncIterable","empty","ConcatMapAsyncIterable","_source","_selector","_thisArg","outerIndex","values","inner","concatMap","CatchWithAsyncIterable","hasError","c","catchError","group","filterState","name","file","ruleFilter","labels","health","matchers","looseParseMatcher","doRuleLabelsMatchQuery","doAlertsContainMatchingLabels","alert","filterDatasourceUids","mapDataSourceNamesToUids","uid","matcherQuery","names","useLazyGetGroupsQuery","useLazyGetGrafanaGroupsQuery","prometheusApi","usePrometheusGroupsGenerator","getGroups","ruleSource","groupLimit","genericGroupsGenerator","fetchOptions","useGrafanaGroupsGenerator","hookOptions","getGrafanaGroups","populateGroupsResponseCache","getGroupsAndProvideCache","response","filter","toIndividualRuleGroups","generator","batch","fetchGroups","lastToken","useFilteredRulesIteratorProvider","allExternalRulesSources","prometheusGroupsGenerator","grafanaGroupsGenerator","abortController","normalizedFilterState","normalizeFilterState","hasDataSourceFilterActive","grafanaRulesGenerator","groups","mapGrafanaRuleToRuleWithOrigin","externalRulesSourcesToFetchFrom","getRulesSourcesFromFilter","dataSourceGenerators","dataSourceIdentifier","mapRuleToRuleWithOrigin","iterablesToMerge","includeGrafana","includeExternal","mergeIterables","iterables","firstIterable","rest","dataSourceName","word","FRONTEND_LIST_PAGE_SIZE","FILTERED_GROUPS_API_PAGE_SIZE","DEFAULT_GROUPS_API_PAGE_SIZE","FRONTED_GROUPED_PAGE_SIZE","getApiGroupPageSize","hasFilters","FilterView","FilterViewResults","transitionPending","startTransition","getFilteredRulesIterator","iteration","rules","setRules","doneSearching","setDoneSearching","getRulesBatchIterator","iterable","rulesBatchIterator","onFinished","loadResultPage","useAsync","rulesIterator","loadedRulesCount","nextRulesBatch","getRuleKey","loading","noRulesFound","loadingAborted","cancelSearch","useUnmount","filterProgressState","EmptyState","ruleWithOrigin","key","origin","GrafanaRuleListItem","getGrafanaRuleKey","getDataSourceRuleKey","provenance","onToggle","isOpen","children","styles","getStyles","isProvisioned","theme","ALERT_RULE_PAGE_SIZE","EvaluationGroupLoader","rulerConfig","toggle","fetchRulerRuleGroup","promNamespace","promRules","page","pageItems","onPageChange","numberOfPages","GroupLoadingIndicator","LoadingIndicator","datasourceUid","width","application","loader","description","isCollapsed","toggleCollapsed","configureLink","IconButton","Toggletip","WithReturnButton","GroupIntervalIndicator","seconds","durationString","ListGroup","metaRight","href","open","GroupHeader","props","TextLink","NoRulesFound","useLazyLoadPrometheusGroups","groupsGenerator","pageSize","setGroups","hasMoreGroups","setHasMoreGroups","fetchMoreGroups","groupsRequestState","currentGroups","generatorResult","useEffectOnce","PaginatedDataSourceLoader","rulesSourceIdentifier","groupFilter","namespaceFilter","PaginatedGroupsLoader","apiGroupPageSize","currentGenerator","filterFn","hasNoRules","groupsByNamespace","ListSection","RuleGroupListItem","LoadMoreButton","namespaceName","DataSourceGroupLoader","PaginatedGrafanaLoader","groupsByFolder","folderUid","folderName","FolderActionsButton","GrafanaRuleGroupListItem","detailsLink","GrafanaGroupLoader","DataSourceErrorBoundary","ErrorBoundary","errorInfo","ErrorWithStack","GroupedView","externalRuleSources","DataSourceLoader","GrafanaDataSourceLoader","dataSourceInfo","RulesFilterV2","newView","config","RuleList","viewMode","handleViewChange","RuleListActions","createGrafanaRuleSupported","createGrafanaRuleAllowed","createCloudRuleSupported","createCloudRuleAllowed","exportRulesSupported","exportRulesAllowed","canCreateGrafanaRules","canCreateCloudRules","canExportRules","canCreateRules","canImportRulesToGMA","showExportDrawer","toggleShowExportDrawer","moreActionsMenu","GrafanaRulesExporter","RuleListPage","AlertingPageWrapper","title","RuleListPageTitle"],"sourceRoot":""}