"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[8393],{5518:(x,R,a)=>{a.d(R,{N:()=>oe});var t=a(96540),n=a(22803),i=a(63142),_=a(37386),b=a(18857),p=a(18027),u=a(63527),v=a(48767);const I=()=>({inlineFieldNoMarginRight:(0,n.css)({marginRight:0}),inlineFieldWithSecret:(0,n.css)({'[class$="layoutChildrenWrapper"]:first-child':{flexGrow:1}})}),B=({user:l,passwordConfigured:c,userLabel:h="User",userTooltip:m="The username of the data source account",userPlaceholder:s="User",passwordLabel:A="Password",passwordTooltip:g="The password of the data source account",passwordPlaceholder:E="Password",onUserChange:C,onPasswordChange:P,onPasswordReset:y,readOnly:o})=>{const f=I(),S={lastInlineField:(0,n.css)({marginBottom:0})};return t.createElement(t.Fragment,null,t.createElement(p.I,{className:f.inlineFieldNoMarginRight,label:h,labelWidth:24,tooltip:m,required:!0,htmlFor:"basic-auth-user-input",interactive:!0,grow:!0,disabled:o},t.createElement(u.p,{id:"basic-auth-user-input",placeholder:s,value:l,onChange:F=>C(F.currentTarget.value),required:!0})),t.createElement(p.I,{className:(0,n.cx)(f.inlineFieldNoMarginRight,f.inlineFieldWithSecret,S.lastInlineField),label:A,labelWidth:24,tooltip:g,required:!0,htmlFor:"basic-auth-password-input",interactive:!0,grow:!0,disabled:o},t.createElement(v.L4,{id:"basic-auth-password-input",isConfigured:c,onReset:o?()=>{}:y,placeholder:E,onChange:F=>P(F.currentTarget.value),required:!0})))};var w=a(85480),e=a(70985);const r={[e.q.BasicAuth]:{label:"Basic authentication",value:e.q.BasicAuth,description:"Authenticate with your data source username and password"},[e.q.CrossSiteCredentials]:{label:"Enable cross-site access control requests",value:e.q.CrossSiteCredentials,description:"Allow cross-site Access-Control requests with your existing credentials and cookies. This enables the server to authenticate the user and perform authorized requests on their behalf on other domains."},[e.q.OAuthForward]:{label:"Forward OAuth Identity",value:e.q.OAuthForward,description:"Forward the OAuth access token (and if available: the OIDC ID token) of the user querying to the data source"},[e.q.NoAuth]:{label:"No Authentication",value:e.q.NoAuth,description:"Data source is available without authentication"}},D=({selectedMethod:l,mostCommonMethod:c,visibleMethods:h,defaultOptionsOverrides:m,customMethods:s,onAuthMethodSelect:A,basicAuth:g,readOnly:E})=>{var C,P,y,o;const[f,S]=(0,t.useState)(!1),{colors:F,spacing:O}=(0,i.$j)(),T=(0,t.useMemo)(()=>{var j;return h??[e.q.BasicAuth,e.q.OAuthForward,e.q.NoAuth,...(j=s?.map(z=>z.id))!=null?j:[]]},[s,h]),L=T.length>1,G=(0,t.useMemo)(()=>{var j;const z=(j=s?.reduce((K,J)=>(K[J.id]={label:J.label,value:J.id,description:J.description},K),{}))!=null?j:{},q={};let V;for(V in r)q[V]={...r[V],...m?.[V]};const Q={...z,...q};return T.filter(K=>!!Q[K]).map(K=>{const J=Q[K];return K===c&&L?{...J,label:`${J.label} (most common)`}:J})},[T,s,m,c,L]);let U=l;L?l===e.q.NoAuth&&c&&!f&&(U=c):U=T[0];let k=null;U===e.q.BasicAuth&&g?k=t.createElement(B,{...g,readOnly:E}):U.startsWith("custom-")&&(k=(P=(C=s?.find(j=>j.id===U))==null?void 0:C.component)!=null?P:null);const ce=L?"Authentication methods":(y=G[0].label)!=null?y:"",ue=L?"Choose an authentication method to access the data source":(o=G[0].description)!=null?o:"",X={authMethods:(0,n.css)({marginTop:O(2.5),...L&&{padding:O(2),border:`1px solid ${F.border.weak}`}}),selectedMethodFields:(0,n.css)({marginTop:O(1.5)})};return t.createElement(w.I,{title:ce,description:ue},t.createElement("div",{className:X.authMethods},L&&t.createElement(_.D,{label:"Authentication method"},t.createElement(b.l6,{inputId:"auth-method-select",options:G,value:U,onChange:j=>{S(!0),A(j.value)},disabled:E})),k&&t.createElement("div",{className:X.selectedMethodFields},k)))};var N=a(40601),W=a(32635),d=a(45967),$=a(30703);const M=({children:l,enabled:c,label:h,tooltipText:m,onToggle:s,readOnly:A})=>{const{colors:g,spacing:E}=(0,i.$j)(),C={container:(0,n.css)({marginTop:3}),checkboxContainer:(0,n.css)({display:"flex",alignItems:"center"}),infoIcon:(0,n.css)({marginTop:-2,marginLeft:5,color:g.text.secondary}),content:(0,n.css)({margin:E(1,0,2,3)})};return t.createElement("div",{className:C.container},t.createElement("div",{className:C.checkboxContainer},t.createElement(W.S,{value:c,label:h,onChange:()=>s(!c),disabled:A}),t.createElement(d.m,{placement:"top",content:m,interactive:!0},t.createElement($.I,{name:"info-circle",className:C.infoIcon,size:"sm"}))),c&&l&&t.createElement("div",{className:C.content},l))},H=({enabled:l,certificateConfigured:c,onToggle:h,onCertificateChange:m,onCertificateReset:s,tooltips:A,readOnly:g})=>{var E;const C=I();return t.createElement(M,{enabled:l,label:"Add self-signed certificate",tooltipText:"Add your own Certificate Authority (CA) certificate on top of one generated by the certificate authorities for additional security measures",onToggle:P=>h(P),readOnly:g},t.createElement(p.I,{label:"CA Certificate",labelWidth:24,tooltip:(E=A?.certificateLabel)!=null?E:"Your self-signed certificate",required:!0,htmlFor:"self-signed-certificate-input",interactive:!0,grow:!0,className:(0,n.cx)(C.inlineFieldNoMarginRight,C.inlineFieldWithSecret),disabled:g},t.createElement(N.lp,{id:"self-signed-certificate-input",isConfigured:c,onChange:P=>m(P.currentTarget.value),onReset:g?()=>{}:s,placeholder:"Begins with --- BEGIN CERTIFICATE ---",rows:6,required:!0})))},Z=({enabled:l,serverName:c,clientCertificateConfigured:h,clientKeyConfigured:m,onToggle:s,onServerNameChange:A,onClientCertificateChange:g,onClientKeyChange:E,onClientCertificateReset:C,onClientKeyReset:P,tooltips:y,readOnly:o})=>{var f,S,F;const O=I();return t.createElement(M,{enabled:l,label:"TLS Client Authentication",tooltipText:"Validate using TLS client authentication, in which the server authenticates the client",onToggle:T=>s(T),readOnly:o},t.createElement(p.I,{label:"ServerName",labelWidth:24,tooltip:(f=y?.serverNameLabel)!=null?f:"A Servername is used to verify the hostname on the returned certificate",required:!0,htmlFor:"client-auth-servername-input",interactive:!0,grow:!0,className:O.inlineFieldNoMarginRight,disabled:o},t.createElement(u.p,{id:"client-auth-servername-input",placeholder:"domain.example.com",value:c,onChange:T=>A(T.currentTarget.value),required:!0})),t.createElement(p.I,{label:"Client Certificate",labelWidth:24,tooltip:(S=y?.certificateLabel)!=null?S:"The client certificate can be generated from a Certificate Authority or be self-signed",required:!0,htmlFor:"client-auth-client-certificate-input",interactive:!0,grow:!0,className:(0,n.cx)(O.inlineFieldNoMarginRight,O.inlineFieldWithSecret),disabled:o},t.createElement(N.lp,{id:"client-auth-client-certificate-input",isConfigured:h,onChange:T=>g(T.currentTarget.value),onReset:o?()=>{}:C,placeholder:"Begins with --- BEGIN CERTIFICATE ---",rows:6,required:!0})),t.createElement(p.I,{label:"Client Key",labelWidth:24,tooltip:(F=y?.keyLabel)!=null?F:"The client key can be generated from a Certificate Authority or be self-signed",required:!0,htmlFor:"client-auth-client-key-input",interactive:!0,grow:!0,className:(0,n.cx)(O.inlineFieldNoMarginRight,O.inlineFieldWithSecret),disabled:o},t.createElement(N.lp,{id:"client-auth-client-key-input",isConfigured:m,onChange:T=>E(T.currentTarget.value),onReset:o?()=>{}:P,placeholder:"Begins with --- RSA PRIVATE KEY CERTIFICATE ---",rows:6,required:!0})))},ee=({enabled:l,onToggle:c,readOnly:h})=>t.createElement(M,{enabled:l,label:"Skip TLS certificate validation",tooltipText:"Skipping TLS certificate validation is not recommended unless absolutely necessary or for testing",onToggle:m=>c(m),readOnly:h}),te=({selfSignedCertificate:l,TLSClientAuth:c,skipTLSVerification:h,readOnly:m})=>{const{spacing:s}=(0,i.$j)(),A={container:(0,n.css)({marginTop:s(3)})};return t.createElement(w.I,{className:A.container,title:"TLS settings",description:"Additional security measures that can be applied on top of authentication"},t.createElement(H,{...l,readOnly:m}),t.createElement(Z,{...c,readOnly:m}),t.createElement(ee,{...h,readOnly:m}))};var ae=a(45861),ne=a(97095),se=a(76319);const re=({header:l,onChange:c,onBlur:h,onDelete:m,readOnly:s})=>{const{spacing:A}=(0,i.$j)(),g=I(),E={container:(0,n.css)({alignItems:"center"}),input:(0,n.css)({minWidth:"100%"}),headerNameField:(0,n.css)({width:"40%",marginRight:0,paddingRight:A(1)}),headerValueField:(0,n.css)({width:"45%",marginRight:0}),removeHeaderBtn:(0,n.css)({margin:"0 0 3px 10px"})};return t.createElement(t.Fragment,null,t.createElement(ne.C,{className:E.container},t.createElement(p.I,{label:"Header",labelWidth:9,grow:!0,className:E.headerNameField,htmlFor:`custom-header-${l.id}-name-input`,disabled:s},t.createElement(u.p,{id:`custom-header-${l.id}-name-input`,placeholder:"X-Custom-Header",value:l.name,width:12,onChange:C=>c({...l,name:C.currentTarget.value}),onBlur:h,className:E.input})),t.createElement(p.I,{label:"Value",labelWidth:9,grow:!0,className:(0,n.cx)(g.inlineFieldWithSecret,E.headerValueField),htmlFor:`custom-header-${l.id}-value-input`,disabled:s},t.createElement(v.L4,{id:`custom-header-${l.id}-value-input`,isConfigured:l.configured,placeholder:"Header value",value:l.value,width:12,onChange:C=>c({...l,value:C.currentTarget.value}),onReset:s?()=>{}:()=>c({...l,configured:!1,value:""}),onBlur:h,className:E.input})),t.createElement(se.K,{name:"trash-alt",tooltip:"Remove header",tooltipPlacement:"top",className:E.removeHeaderBtn,onClick:m,type:"button",disabled:s})))},le=({headers:l,onChange:c,readOnly:h})=>{const{spacing:m}=(0,i.$j)(),[s,A]=(0,t.useState)(l.map(o=>({...o,id:Y(),value:""})));(0,t.useEffect)(()=>{A(o=>{let f=!1;const S=o.map(F=>{var O;const T=(O=l.find(L=>L.name===F.name))==null?void 0:O.configured;return typeof T<"u"&&F.configured!==T?(f=!0,{...F,configured:T}):F});return f?S:o})},[l]);const g=()=>{A([...s,{id:Y(),name:"",value:"",configured:!1}])},E=(o,f)=>{A(s.map(S=>S.id===o?{...f}:S))},C=o=>{const f=s.findIndex(F=>F.id===o);if(f===-1)return;const S=[...s];S.splice(f,1),A(S),c(S.map(({name:F,value:O,configured:T})=>({name:F,value:O,configured:T})))},P=()=>{c(s.map(({name:o,value:f,configured:S})=>({name:o,value:f,configured:S})))},y={container:(0,n.css)({marginTop:m(3)}),addHeaderButton:(0,n.css)({marginTop:m(1.5)})};return t.createElement("div",{className:y.container},t.createElement(w.I,{title:"HTTP headers",description:"Pass along additional context and metadata about the request/response",isCollapsible:!0,isInitiallyOpen:s.length>0},t.createElement("div",null,s.map(o=>t.createElement(re,{key:o.id,header:o,onChange:f=>E(f.id,f),onDelete:()=>C(o.id),onBlur:P,readOnly:h}))),t.createElement("div",{className:y.addHeaderButton},t.createElement(ae.$n,{icon:"plus",variant:"secondary",fill:"outline",onClick:g,disabled:h},s.length===0?"Add header":"Add another header"))))};function Y(){return Math.random().toString(16).slice(2)}var ie=a(6370);const oe=({selectedMethod:l,mostCommonMethod:c,visibleMethods:h,defaultOptionsOverrides:m,customMethods:s,onAuthMethodSelect:A,basicAuth:g,TLS:E,customHeaders:C,readOnly:P=!1})=>{const y={container:(0,n.css)({maxWidth:578})};return t.createElement("div",{className:y.container},t.createElement(ie.A,{title:"Authentication"},t.createElement(D,{selectedMethod:l,mostCommonMethod:c,customMethods:s,visibleMethods:h,defaultOptionsOverrides:m,onAuthMethodSelect:A,basicAuth:g,readOnly:P}),E&&t.createElement(te,{...E,readOnly:P}),C&&t.createElement(le,{...C,readOnly:P})))}},14141:(x,R,a)=>{a.d(R,{u:()=>p});var t=a(96540),n=a(22803),i=a(18027),_=a(63527),b=a(6370);const p=({config:u,onChange:v,description:I,urlPlaceholder:B,urlTooltip:w,urlLabel:e,className:r})=>{const D=u.url!==void 0&&/^(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?$/.test(u.url),N={container:(0,n.css)({maxWidth:578})};return t.createElement(t.Fragment,null,t.createElement(b.A,{title:"Connection",description:I,className:(0,n.cx)(N.container,r)},t.createElement(i.I,{htmlFor:"connection-url",label:e||"URL",labelWidth:24,tooltip:w||t.createElement(t.Fragment,null,"Specify a complete HTTP URL",t.createElement("br",null),"(for example https://example.com:8080)"),grow:!0,disabled:u.readOnly,required:!0,invalid:!D&&!u.readOnly,error:D?"":"Please enter a valid URL",interactive:!0},t.createElement(_.p,{id:"connection-url","aria-label":"Data source connection URL",onChange:W=>v({...u,url:W.currentTarget.value}),value:u.url||"",placeholder:B||"URL"}))))}},32300:(x,R,a)=>{a.d(R,{U:()=>b});var t=a(22803),n=a(96540),i=a(63142),_=a(46936);const b=({children:u})=>{const v=(0,i.of)(p);return n.createElement("div",{className:v.root},n.createElement(_.C,{gap:2},u))},p=u=>({root:(0,t.css)({padding:u.spacing(1),backgroundColor:u.colors.background.secondary,borderRadius:u.shape.radius.default})})},46936:(x,R,a)=>{a.d(R,{C:()=>i});var t=a(96540),n=a(41654);const i=({children:_,wrap:b=!0,...p})=>{var u,v;return t.createElement(n.B,{wrap:b?"wrap":void 0,direction:(u=p.direction)!=null?u:"row",gap:(v=p.gap)!=null?v:2,...p},_)}},50532:(x,R,a)=>{a.d(R,{I:()=>_});var t=a(96540),n=a(22803),i=a(63142);const _=({dataSourceName:b,docsLink:p,hasRequiredFields:u=!0,className:v})=>{const I=(0,i.$j)(),B={container:(0,n.css)({p:{margin:0},"p + p":{marginTop:I.spacing(2)}}),text:(0,n.css)({...I.typography.body,color:I.colors.text.secondary,a:(0,n.css)({color:I.colors.text.link,textDecoration:"underline","&:hover":{textDecoration:"none"}})})};return t.createElement("div",{className:(0,n.cx)(B.container,v)},t.createElement("p",{className:B.text},"Before you can use the ",b," data source, you must configure it below or in the config file. For detailed instructions,"," ",t.createElement("a",{href:p,target:"_blank",rel:"noreferrer"},"view the documentation"),"."),u&&t.createElement("p",{className:B.text},t.createElement("i",null,"Fields marked with * are required")))}},70985:(x,R,a)=>{a.d(R,{q:()=>n});var t=a(96540),n=(i=>(i.NoAuth="NoAuth",i.BasicAuth="BasicAuth",i.OAuthForward="OAuthForward",i.CrossSiteCredentials="CrossSiteCredentials",i))(n||{})},76229:(x,R,a)=>{a.d(R,{pe:()=>p});var t=a(96540),n=a(22803),i=a(70985);const _="httpHeaderName",b="httpHeaderValue";function p({config:e,onChange:r}){return{selectedMethod:u(e),onAuthMethodSelect:v(e,r),basicAuth:I(e,r),TLS:B(e,r),customHeaders:w(e,r),readOnly:e.readOnly}}function u(e){return e.basicAuth?i.q.BasicAuth:e.withCredentials?i.q.CrossSiteCredentials:e.jsonData.oauthPassThru?i.q.OAuthForward:i.q.NoAuth}function v(e,r){return D=>{r({...e,basicAuth:D===i.q.BasicAuth,withCredentials:D===i.q.CrossSiteCredentials,jsonData:{...e.jsonData,oauthPassThru:D===i.q.OAuthForward}})}}function I(e,r){return{user:e.basicAuthUser,passwordConfigured:e.secureJsonFields.basicAuthPassword,onUserChange:D=>r({...e,basicAuthUser:D}),onPasswordChange:D=>r({...e,secureJsonData:{...e.secureJsonData,basicAuthPassword:D}}),onPasswordReset:()=>r({...e,secureJsonData:{...e.secureJsonData,basicAuthPassword:""},secureJsonFields:{...e.secureJsonFields,basicAuthPassword:!1}})}}function B(e,r){var D,N,W;return{selfSignedCertificate:{enabled:!!e.jsonData.tlsAuthWithCACert,certificateConfigured:!!((D=e.secureJsonFields)!=null&&D.tlsCACert),onToggle:d=>r(d?{...e,jsonData:{...e.jsonData,tlsAuthWithCACert:d}}:{...e,jsonData:{...e.jsonData,tlsAuthWithCACert:d},secureJsonData:{...e.secureJsonData,tlsCACert:""},secureJsonFields:{...e.secureJsonFields,tlsCACert:!1}}),onCertificateChange:d=>r({...e,secureJsonData:{...e.secureJsonData,tlsCACert:d}}),onCertificateReset:()=>r({...e,secureJsonData:{...e.secureJsonData,tlsCACert:""},secureJsonFields:{...e.secureJsonFields,tlsCACert:!1}})},TLSClientAuth:{enabled:e.jsonData.tlsAuth,serverName:e.jsonData.serverName,clientCertificateConfigured:!!((N=e.secureJsonFields)!=null&&N.tlsClientCert),clientKeyConfigured:!!((W=e.secureJsonFields)!=null&&W.tlsClientKey),onToggle:d=>r(d?{...e,jsonData:{...e.jsonData,tlsAuth:d}}:{...e,jsonData:{...e.jsonData,tlsAuth:d,serverName:""},secureJsonData:{...e.secureJsonData,tlsClientCert:"",tlsClientKey:""},secureJsonFields:{...e.secureJsonFields,tlsClientCert:!1,tlsClientKey:!1}}),onServerNameChange:d=>r({...e,jsonData:{...e.jsonData,serverName:d}}),onClientCertificateChange:d=>r({...e,secureJsonData:{...e.secureJsonData,tlsClientCert:d}}),onClientCertificateReset:()=>r({...e,secureJsonData:{...e.secureJsonData,tlsClientCert:""},secureJsonFields:{...e.secureJsonFields,tlsClientCert:!1}}),onClientKeyChange:d=>r({...e,secureJsonData:{...e.secureJsonData,tlsClientKey:d}}),onClientKeyReset:()=>r({...e,secureJsonData:{...e.secureJsonData,tlsClientKey:""},secureJsonFields:{...e.secureJsonFields,tlsClientKey:!1}})},skipTLSVerification:{enabled:e.jsonData.tlsSkipVerify,onToggle:d=>r({...e,jsonData:{...e.jsonData,tlsSkipVerify:d}})}}}function w(e,r){return{headers:Object.keys(e.jsonData).filter(N=>N.startsWith(_)).sort().map(N=>{var W;const d=N.slice(_.length);return{name:e.jsonData[N],configured:(W=e.secureJsonFields[`${b}${d}`])!=null?W:!1}}),onChange:N=>{const W=Object.fromEntries(Object.entries(e.jsonData).filter(([M])=>!M.startsWith(_))),d=Object.fromEntries(Object.entries(e.secureJsonData||{}).filter(([M])=>!M.startsWith(b))),$=Object.fromEntries(Object.entries(e.secureJsonFields).filter(([M])=>!M.startsWith(b)));N.forEach((M,H)=>{W[`${_}${H+1}`]=M.name,M.configured?$[`${b}${H+1}`]=!0:d[`${b}${H+1}`]=M.value}),r({...e,jsonData:W,secureJsonData:d,secureJsonFields:$})}}}},80486:(x,R,a)=>{a.d(R,{g:()=>u});var t=a(96540),n=a(22803),i=a(10928),_=a(18027),b=a(63527),p=a(85480);const u=({config:v,onChange:I,className:B})=>{const w=D=>{I({...v,jsonData:{...v.jsonData,keepCookies:D}})},e=D=>{I({...v,jsonData:{...v.jsonData,timeout:parseInt(D.currentTarget.value,10)}})},r={container:(0,n.css)({maxWidth:578})};return t.createElement(p.I,{title:"Advanced HTTP settings",className:(0,n.cx)(r.container,B)},t.createElement(_.I,{htmlFor:"advanced-http-cookies",label:"Allowed cookies",labelWidth:24,tooltip:"Grafana proxy deletes forwarded cookies by default. Specify cookies by name that should be forwarded to the data source.",disabled:v.readOnly,grow:!0},t.createElement(i.u,{id:"advanced-http-cookies",placeholder:"New cookie (hit enter to add)",tags:v.jsonData.keepCookies,onChange:w})),t.createElement(_.I,{htmlFor:"advanced-http-timeout",label:"Timeout",labelWidth:24,tooltip:"HTTP request timeout in seconds",disabled:v.readOnly,grow:!0},t.createElement(b.p,{id:"advanced-http-timeout",type:"number",min:0,placeholder:"Timeout in seconds","aria-label":"Timeout in seconds",value:v.jsonData.timeout,onChange:e})))}}}]);

//# sourceMappingURL=8393.30e95ae45cbe5455dcda.js.map