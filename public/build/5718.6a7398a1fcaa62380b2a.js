(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[5718],{2240:(j,g,f)=>{"use strict";f.d(g,{UD:()=>I,ZI:()=>l,ZS:()=>M,lm:()=>d});var P=f(47397),h=f(67823),A=f(73096),y=f(4445),v=f(59406);const M="traceparent",I="tracestate",V="00",O="(?!ff)[\\da-f]{2}",R="(?![0]{32})[\\da-f]{32}",x="(?![0]{16})[\\da-f]{16}",c="[\\da-f]{2}",E=new RegExp(`^\\s?(${O})-(${R})-(${x})-(${c})(-.*)?\\s?$`);function l(T){const b=E.exec(T);return!b||b[1]==="00"&&b[5]?null:{traceId:b[2],spanId:b[3],traceFlags:parseInt(b[4],16)}}class d{inject(b,m,N){const L=A.u.getSpanContext(b);if(!L||(0,y.Zf)(b)||!(0,h.YA)(L))return;const H=`${V}-${L.traceId}-${L.spanId}-0${Number(L.traceFlags||P.X.NONE).toString(16)}`;N.set(m,M,H),L.traceState&&N.set(m,I,L.traceState.serialize())}extract(b,m,N){const L=N.get(m,M);if(!L)return b;const H=Array.isArray(L)?L[0]:L;if(typeof H!="string")return b;const Y=l(H);if(!Y)return b;Y.isRemote=!0;const At=N.get(m,I);if(At){const ft=Array.isArray(At)?At.join(","):At;Y.traceState=new v.n(typeof ft=="string"?ft:void 0)}return A.u.setSpanContext(b,Y)}fields(){return[M,I]}}},4445:(j,g,f)=>{"use strict";f.d(g,{FU:()=>y,M1:()=>A,Zf:()=>v});var P=f(38729);const h=(0,P.n)("OpenTelemetry SDK Context Key SUPPRESS_TRACING");function A(M){return M.setValue(h,!0)}function y(M){return M.deleteValue(h)}function v(M){return M.getValue(h)===!0}},5446:(j,g,f)=>{"use strict";f.d(g,{K:()=>P});function P(h){}},9603:(j,g)=>{"use strict";Object.defineProperty(g,"__esModule",{value:!0}),g.toAnyValue=g.toKeyValue=g.toAttributes=g.createInstrumentationScope=g.createResource=void 0;function f(v){return{attributes:h(v.attributes),droppedAttributesCount:0}}g.createResource=f;function P(v){return{name:v.name,version:v.version}}g.createInstrumentationScope=P;function h(v){return Object.keys(v).map(M=>A(M,v[M]))}g.toAttributes=h;function A(v,M){return{key:v,value:y(M)}}g.toKeyValue=A;function y(v){const M=typeof v;return M==="string"?{stringValue:v}:M==="number"?Number.isInteger(v)?{intValue:v}:{doubleValue:v}:M==="boolean"?{boolValue:v}:v instanceof Uint8Array?{bytesValue:v}:Array.isArray(v)?{arrayValue:{values:v.map(y)}}:M==="object"&&v!=null?{kvlistValue:{values:Object.entries(v).map(([I,V])=>A(I,V))}}:{}}g.toAnyValue=y},11590:(j,g,f)=>{"use strict";f.d(g,{o:()=>h});var P=f(78758);function h(){return v=>{P.s.error(A(v))}}function A(v){return typeof v=="string"?v:JSON.stringify(y(v))}function y(v){const M={};let I=v;for(;I!==null;)Object.getOwnPropertyNames(I).forEach(V=>{if(M[V])return;const O=I[V];O&&(M[V]=String(O))}),I=Object.getPrototypeOf(I);return M}},11616:(j,g,f)=>{"use strict";f.d(g,{B:()=>V,L:()=>I});var P=f(44892),h=function(O,R){var x=typeof Symbol=="function"&&O[Symbol.iterator];if(!x)return O;var c=x.call(O),E,l=[],d;try{for(;(R===void 0||R-- >0)&&!(E=c.next()).done;)l.push(E.value)}catch(T){d={error:T}}finally{try{E&&!E.done&&(x=c.return)&&x.call(c)}finally{if(d)throw d.error}}return l},A=function(O){var R=typeof Symbol=="function"&&Symbol.iterator,x=R&&O[R],c=0;if(x)return x.call(O);if(O&&typeof O.length=="number")return{next:function(){return O&&c>=O.length&&(O=void 0),{value:O&&O[c++],done:!O}}};throw new TypeError(R?"Object is not iterable.":"Symbol.iterator is not defined.")},y=function(){function O(R){this._entries=R?new Map(R):new Map}return O.prototype.getEntry=function(R){var x=this._entries.get(R);if(x)return Object.assign({},x)},O.prototype.getAllEntries=function(){return Array.from(this._entries.entries()).map(function(R){var x=h(R,2),c=x[0],E=x[1];return[c,E]})},O.prototype.setEntry=function(R,x){var c=new O(this._entries);return c._entries.set(R,x),c},O.prototype.removeEntry=function(R){var x=new O(this._entries);return x._entries.delete(R),x},O.prototype.removeEntries=function(){for(var R,x,c=[],E=0;E<arguments.length;E++)c[E]=arguments[E];var l=new O(this._entries);try{for(var d=A(c),T=d.next();!T.done;T=d.next()){var b=T.value;l._entries.delete(b)}}catch(m){R={error:m}}finally{try{T&&!T.done&&(x=d.return)&&x.call(d)}finally{if(R)throw R.error}}return l},O.prototype.clear=function(){return new O},O}(),v=Symbol("BaggageEntryMetadata"),M=P.K.instance();function I(O){return O===void 0&&(O={}),new y(new Map(Object.entries(O)))}function V(O){return typeof O!="string"&&(M.error("Cannot create baggage metadata from unknown type: "+typeof O),O=""),{__TYPE__:v,toString:function(){return O}}}},11908:(j,g,f)=>{"use strict";f.d(g,{s:()=>P});var P;(function(h){h[h.UNSET=0]="UNSET",h[h.OK=1]="OK",h[h.ERROR=2]="ERROR"})(P||(P={}))},15347:(j,g,f)=>{"use strict";f.d(g,{q:()=>y});const P="2.0.1";var h=f(27608);const A="process.runtime.name",y={[h.aO]:"opentelemetry",[A]:"browser",[h.E$]:h.qV,[h.aJ]:P}},22721:(j,g,f)=>{"use strict";f.d(g,{n:()=>h});var P=f(78758);class h{_propagators;_fields;constructor(y={}){this._propagators=y.propagators??[],this._fields=Array.from(new Set(this._propagators.map(v=>typeof v.fields=="function"?v.fields():[]).reduce((v,M)=>v.concat(M),[])))}inject(y,v,M){for(const I of this._propagators)try{I.inject(y,v,M)}catch(V){P.s.warn(`Failed to inject with ${I.constructor.name}. Err: ${V.message}`)}}extract(y,v,M){return this._propagators.reduce((I,V)=>{try{return V.extract(I,v,M)}catch(O){P.s.warn(`Failed to extract with ${V.constructor.name}. Err: ${O.message}`)}return I},y)}fields(){return this._fields.slice()}}},27608:(j,g,f)=>{"use strict";f.d(g,{A2:()=>tr,E$:()=>ar,HZ:()=>nr,Mb:()=>st,Mz:()=>ye,OR:()=>Z,UX:()=>er,WQ:()=>An,aJ:()=>mn,aO:()=>je,d6:()=>Oe,kS:()=>qn,n4:()=>Qt,nW:()=>Tt,oJ:()=>It,qV:()=>hn,wL:()=>Kt});const P="aspnetcore.diagnostics.exception.result",h="aborted",A="handled",y="skipped",v="unhandled",M="aspnetcore.diagnostics.handler.type",I="aspnetcore.rate_limiting.policy",V="aspnetcore.rate_limiting.result",O="acquired",R="endpoint_limiter",x="global_limiter",c="request_canceled",E="aspnetcore.request.is_unhandled",l="aspnetcore.routing.is_fallback",d="aspnetcore.routing.match_status",T="failure",b="success",m="client.address",N="client.port",L="code.column.number",H="code.file.path",Y="code.function.name",At="code.line.number",ft="code.stacktrace",F="db.collection.name",K="db.namespace",w="db.operation.batch.size",G="db.operation.name",W="db.query.summary",q="db.query.text",nt="db.response.status_code",ct="db.stored_procedure.name",_t="db.system.name",Lt="mariadb",lt="microsoft.sql_server",ot="mysql",pt="postgresql",vt="dotnet.gc.heap.generation",Ct="gen0",wt="gen1",ue="gen2",pe="loh",be="poh",It="error.type",fn="_OTHER",Ft="exception.escaped",Kt="exception.message",st="exception.stacktrace",Oe="exception.type",yt=$t=>`http.request.header.${$t}`,Qt="http.request.method",ee="_OTHER",Pe="CONNECT",Me="DELETE",Ne="GET",bt="HEAD",jt="OPTIONS",Dt="PATCH",X="POST",tt="PUT",$="TRACE",Tt="http.request.method_original",Q="http.request.resend_count",Te=$t=>`http.response.header.${$t}`,Z="http.response.status_code",Wt="http.route",Pt="jvm.gc.action",Le="jvm.gc.name",Yt="jvm.memory.pool.name",ne="jvm.memory.type",co="heap",lo="non_heap",_o="jvm.thread.daemon",ei="jvm.thread.state",Fe="blocked",pn="new",ni="runnable",ri="terminated",Eo="timed_waiting",Tn="waiting",Ke="network.local.address",zn="network.local.port",Sn="network.peer.address",$n="network.peer.port",Xn="network.protocol.name",ii="network.protocol.version",Vt="network.transport",zt="pipe",Jn="quic",Qn="tcp",si="udp",oi="unix",ai="network.type",ui="ipv4",ci="ipv6",li="otel.scope.name",di="otel.scope.version",Zn="otel.status_code",Zt="ERROR",_i="OK",Ei="otel.status_description",qn="server.address",tr="server.port",er="service.name",nr="service.version",fi="signalr.connection.status",rr="app_shutdown",ir="normal_closure",pi="timeout",sr="signalr.transport",Ti="long_polling",Si="server_sent_events",or="web_sockets",ar="telemetry.sdk.language",hi="cpp",mi="dotnet",ur="erlang",Ai="go",gi="java",vi="nodejs",Ri="php",cr="python",lr="ruby",bi="rust",dr="swift",hn="webjs",je="telemetry.sdk.name",mn="telemetry.sdk.version",_r="url.fragment",An="url.full",Oi="url.path",Pi="url.query",Er="url.scheme",ye="user_agent.original"},31194:(j,g,f)=>{"use strict";f.d(g,{h:()=>m});const P="[object Object]",h="[object Null]",A="[object Undefined]",v=Function.prototype.toString,M=v.call(Object),I=Object.getPrototypeOf,V=Object.prototype,O=V.hasOwnProperty,R=Symbol?Symbol.toStringTag:void 0,x=V.toString;function c(w){if(!E(w)||l(w)!==P)return!1;const G=I(w);if(G===null)return!0;const W=O.call(G,"constructor")&&G.constructor;return typeof W=="function"&&W instanceof W&&v.call(W)===M}function E(w){return w!=null&&typeof w=="object"}function l(w){return w==null?w===void 0?A:h:R&&R in Object(w)?d(w):T(w)}function d(w){const G=O.call(w,R),W=w[R];let q=!1;try{w[R]=void 0,q=!0}catch{}const nt=x.call(w);return q&&(G?w[R]=W:delete w[R]),nt}function T(w){return x.call(w)}const b=20;function m(...w){let G=w.shift();const W=new WeakMap;for(;w.length>0;)G=L(G,w.shift(),0,W);return G}function N(w){return Y(w)?w.slice():w}function L(w,G,W=0,q){let nt;if(!(W>b)){if(W++,F(w)||F(G)||At(G))nt=N(G);else if(Y(w)){if(nt=w.slice(),Y(G))for(let ct=0,_t=G.length;ct<_t;ct++)nt.push(N(G[ct]));else if(ft(G)){const ct=Object.keys(G);for(let _t=0,Lt=ct.length;_t<Lt;_t++){const lt=ct[_t];nt[lt]=N(G[lt])}}}else if(ft(w))if(ft(G)){if(!K(w,G))return G;nt=Object.assign({},w);const ct=Object.keys(G);for(let _t=0,Lt=ct.length;_t<Lt;_t++){const lt=ct[_t],ot=G[lt];if(F(ot))typeof ot>"u"?delete nt[lt]:nt[lt]=ot;else{const pt=nt[lt],vt=ot;if(H(w,lt,q)||H(G,lt,q))delete nt[lt];else{if(ft(pt)&&ft(vt)){const Ct=q.get(pt)||[],wt=q.get(vt)||[];Ct.push({obj:w,key:lt}),wt.push({obj:G,key:lt}),q.set(pt,Ct),q.set(vt,wt)}nt[lt]=L(nt[lt],ot,W,q)}}}}else nt=G;return nt}}function H(w,G,W){const q=W.get(w[G])||[];for(let nt=0,ct=q.length;nt<ct;nt++){const _t=q[nt];if(_t.key===G&&_t.obj===w)return!0}return!1}function Y(w){return Array.isArray(w)}function At(w){return typeof w=="function"}function ft(w){return!F(w)&&!Y(w)&&!At(w)&&typeof w=="object"}function F(w){return typeof w=="string"||typeof w=="number"||typeof w=="boolean"||typeof w>"u"||w instanceof Date||w instanceof RegExp||w===null}function K(w,G){return!(!c(w)||!c(G))}},31440:(j,g,f)=>{"use strict";f.d(g,{d:()=>h});var P=f(97872),h=function(){function A(y){y===void 0&&(y=P.dM),this._spanContext=y}return A.prototype.spanContext=function(){return this._spanContext},A.prototype.setAttribute=function(y,v){return this},A.prototype.setAttributes=function(y){return this},A.prototype.addEvent=function(y,v){return this},A.prototype.addLink=function(y){return this},A.prototype.addLinks=function(y){return this},A.prototype.setStatus=function(y){return this},A.prototype.updateName=function(y){return this},A.prototype.end=function(y){},A.prototype.isRecording=function(){return!1},A.prototype.recordException=function(y,v){},A}()},38729:(j,g,f)=>{"use strict";f.d(g,{l:()=>A,n:()=>P});function P(y){return Symbol.for(y)}var h=function(){function y(v){var M=this;M._currentContext=v?new Map(v):new Map,M.getValue=function(I){return M._currentContext.get(I)},M.setValue=function(I,V){var O=new y(M._currentContext);return O._currentContext.set(I,V),O},M.deleteValue=function(I){var V=new y(M._currentContext);return V._currentContext.delete(I),V}}return y}(),A=new h},41257:(j,g,f)=>{"use strict";f.d(g,{HF:()=>P,Ix:()=>h,Jk:()=>A,f7:()=>y});function P(v){}function h(v){}function A(v){}function y(v){}},41844:(j,g,f)=>{"use strict";f.d(g,{_:()=>h});var P=f(79100),h=P._.getInstance()},44892:(j,g,f)=>{"use strict";f.d(g,{K:()=>x});var P=f(75158),h=function(c,E){var l=typeof Symbol=="function"&&c[Symbol.iterator];if(!l)return c;var d=l.call(c),T,b=[],m;try{for(;(E===void 0||E-- >0)&&!(T=d.next()).done;)b.push(T.value)}catch(N){m={error:N}}finally{try{T&&!T.done&&(l=d.return)&&l.call(d)}finally{if(m)throw m.error}}return b},A=function(c,E,l){if(l||arguments.length===2)for(var d=0,T=E.length,b;d<T;d++)(b||!(d in E))&&(b||(b=Array.prototype.slice.call(E,0,d)),b[d]=E[d]);return c.concat(b||Array.prototype.slice.call(E))},y=function(){function c(E){this._namespace=E.namespace||"DiagComponentLogger"}return c.prototype.debug=function(){for(var E=[],l=0;l<arguments.length;l++)E[l]=arguments[l];return v("debug",this._namespace,E)},c.prototype.error=function(){for(var E=[],l=0;l<arguments.length;l++)E[l]=arguments[l];return v("error",this._namespace,E)},c.prototype.info=function(){for(var E=[],l=0;l<arguments.length;l++)E[l]=arguments[l];return v("info",this._namespace,E)},c.prototype.warn=function(){for(var E=[],l=0;l<arguments.length;l++)E[l]=arguments[l];return v("warn",this._namespace,E)},c.prototype.verbose=function(){for(var E=[],l=0;l<arguments.length;l++)E[l]=arguments[l];return v("verbose",this._namespace,E)},c}();function v(c,E,l){var d=(0,P.mS)("diag");if(d)return l.unshift(E),d[c].apply(d,A([],h(l),!1))}var M=f(76733);function I(c,E){c<M.u.NONE?c=M.u.NONE:c>M.u.ALL&&(c=M.u.ALL),E=E||{};function l(d,T){var b=E[d];return typeof b=="function"&&c>=T?b.bind(E):function(){}}return{error:l("error",M.u.ERROR),warn:l("warn",M.u.WARN),info:l("info",M.u.INFO),debug:l("debug",M.u.DEBUG),verbose:l("verbose",M.u.VERBOSE)}}var V=function(c,E){var l=typeof Symbol=="function"&&c[Symbol.iterator];if(!l)return c;var d=l.call(c),T,b=[],m;try{for(;(E===void 0||E-- >0)&&!(T=d.next()).done;)b.push(T.value)}catch(N){m={error:N}}finally{try{T&&!T.done&&(l=d.return)&&l.call(d)}finally{if(m)throw m.error}}return b},O=function(c,E,l){if(l||arguments.length===2)for(var d=0,T=E.length,b;d<T;d++)(b||!(d in E))&&(b||(b=Array.prototype.slice.call(E,0,d)),b[d]=E[d]);return c.concat(b||Array.prototype.slice.call(E))},R="diag",x=function(){function c(){function E(T){return function(){for(var b=[],m=0;m<arguments.length;m++)b[m]=arguments[m];var N=(0,P.mS)("diag");if(N)return N[T].apply(N,O([],V(b),!1))}}var l=this,d=function(T,b){var m,N,L;if(b===void 0&&(b={logLevel:M.u.INFO}),T===l){var H=new Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return l.error((m=H.stack)!==null&&m!==void 0?m:H.message),!1}typeof b=="number"&&(b={logLevel:b});var Y=(0,P.mS)("diag"),At=I((N=b.logLevel)!==null&&N!==void 0?N:M.u.INFO,T);if(Y&&!b.suppressOverrideMessage){var ft=(L=new Error().stack)!==null&&L!==void 0?L:"<failed to generate stacktrace>";Y.warn("Current logger will be overwritten from "+ft),At.warn("Current logger will overwrite one already registered from "+ft)}return(0,P.$G)("diag",At,l,!0)};l.setLogger=d,l.disable=function(){(0,P.kv)(R,l)},l.createComponentLogger=function(T){return new y(T)},l.verbose=E("verbose"),l.debug=E("debug"),l.info=E("info"),l.warn=E("warn"),l.error=E("error")}return c.instance=function(){return this._instance||(this._instance=new c),this._instance},c}()},47397:(j,g,f)=>{"use strict";f.d(g,{X:()=>P});var P;(function(h){h[h.NONE=0]="NONE",h[h.SAMPLED=1]="SAMPLED"})(P||(P={}))},48131:(j,g,f)=>{"use strict";f.d(g,{$:()=>b});var P=f(75158),h=function(){function m(){}return m.prototype.inject=function(N,L){},m.prototype.extract=function(N,L){return N},m.prototype.fields=function(){return[]},m}(),A={get:function(m,N){if(m!=null)return m[N]},keys:function(m){return m==null?[]:Object.keys(m)}},y={set:function(m,N,L){m!=null&&(m[N]=L)}},v=f(79100),M=f(38729),I=(0,M.n)("OpenTelemetry Baggage Key");function V(m){return m.getValue(I)||void 0}function O(){return V(v._.getInstance().active())}function R(m,N){return m.setValue(I,N)}function x(m){return m.deleteValue(I)}var c=f(11616),E=f(44892),l="propagation",d=new h,T=function(){function m(){this.createBaggage=c.L,this.getBaggage=V,this.getActiveBaggage=O,this.setBaggage=R,this.deleteBaggage=x}return m.getInstance=function(){return this._instance||(this._instance=new m),this._instance},m.prototype.setGlobalPropagator=function(N){return(0,P.$G)(l,N,E.K.instance())},m.prototype.inject=function(N,L,H){return H===void 0&&(H=y),this._getGlobalPropagator().inject(N,L,H)},m.prototype.extract=function(N,L,H){return H===void 0&&(H=A),this._getGlobalPropagator().extract(N,L,H)},m.prototype.fields=function(){return this._getGlobalPropagator().fields()},m.prototype.disable=function(){(0,P.kv)(l,E.K.instance())},m.prototype._getGlobalPropagator=function(){return(0,P.mS)(l)||d},m}(),b=T.getInstance()},56861:(j,g,f)=>{"use strict";Object.defineProperty(g,"__esModule",{value:!0}),g.getOtlpEncoder=g.encodeAsString=g.encodeAsLongBits=g.toLongBits=g.hrTimeToNanos=void 0;const P=f(83303),h=f(70373);function A(c){const E=BigInt(1e9);return BigInt(c[0])*E+BigInt(c[1])}g.hrTimeToNanos=A;function y(c){const E=Number(BigInt.asUintN(32,c)),l=Number(BigInt.asUintN(32,c>>BigInt(32)));return{low:E,high:l}}g.toLongBits=y;function v(c){const E=A(c);return y(E)}g.encodeAsLongBits=v;function M(c){return A(c).toString()}g.encodeAsString=M;const I=typeof BigInt<"u"?M:P.hrTimeToNanoseconds;function V(c){return c}function O(c){if(c!==void 0)return(0,h.hexToBinary)(c)}const R={encodeHrTime:v,encodeSpanContext:h.hexToBinary,encodeOptionalSpanContext:O};function x(c){if(c===void 0)return R;const E=c.useLongBits??!0,l=c.useHex??!1;return{encodeHrTime:E?v:I,encodeSpanContext:l?V:h.hexToBinary,encodeOptionalSpanContext:l?V:O}}g.getOtlpEncoder=x},59406:(j,g,f)=>{"use strict";f.d(g,{n:()=>E});const P="[_0-9a-z-*/]",h=`[a-z]${P}{0,255}`,A=`[a-z0-9]${P}{0,240}@[a-z]${P}{0,13}`,y=new RegExp(`^(?:${h}|${A})$`),v=/^[ -~]{0,255}[!-~]$/,M=/,|=/;function I(l){return y.test(l)}function V(l){return v.test(l)&&!M.test(l)}const O=32,R=512,x=",",c="=";class E{_internalState=new Map;constructor(d){d&&this._parse(d)}set(d,T){const b=this._clone();return b._internalState.has(d)&&b._internalState.delete(d),b._internalState.set(d,T),b}unset(d){const T=this._clone();return T._internalState.delete(d),T}get(d){return this._internalState.get(d)}serialize(){return this._keys().reduce((d,T)=>(d.push(T+c+this.get(T)),d),[]).join(x)}_parse(d){d.length>R||(this._internalState=d.split(x).reverse().reduce((T,b)=>{const m=b.trim(),N=m.indexOf(c);if(N!==-1){const L=m.slice(0,N),H=m.slice(N+1,b.length);I(L)&&V(H)&&T.set(L,H)}return T},new Map),this._internalState.size>O&&(this._internalState=new Map(Array.from(this._internalState.entries()).reverse().slice(0,O))))}_keys(){return Array.from(this._internalState.keys()).reverse()}_clone(){const d=new E;return d._internalState=new Map(this._internalState),d}}},65864:(j,g,f)=>{"use strict";f.d(g,{Ir:()=>T,JU:()=>E,KJ:()=>O,VL:()=>d,W5:()=>R,_5:()=>V,lg:()=>M,mw:()=>b,tq:()=>x,u5:()=>c,uc:()=>I,w_:()=>l});var P=f(75026);const h=9,y=Math.pow(10,6),v=Math.pow(10,h);function M(m){const N=m/1e3,L=Math.trunc(N),H=Math.round(m%1e3*y);return[L,H]}function I(){let m=P.u.timeOrigin;if(typeof m!="number"){const N=P.u;m=N.timing&&N.timing.fetchStart}return m}function V(m){const N=M(I()),L=M(typeof m=="number"?m:P.u.now());return b(N,L)}function O(m){if(d(m))return m;if(typeof m=="number")return m<I()?V(m):M(m);if(m instanceof Date)return M(m.getTime());throw TypeError("Invalid input type")}function R(m,N){let L=N[0]-m[0],H=N[1]-m[1];return H<0&&(L-=1,H+=v),[L,H]}function x(m){const N=h,L=`${"0".repeat(N)}${m[1]}Z`,H=L.substring(L.length-N-1);return new Date(m[0]*1e3).toISOString().replace("000Z",H)}function c(m){return m[0]*v+m[1]}function E(m){return m[0]*1e3+m[1]/1e6}function l(m){return m[0]*1e6+m[1]/1e3}function d(m){return Array.isArray(m)&&m.length===2&&typeof m[0]=="number"&&typeof m[1]=="number"}function T(m){return d(m)||typeof m=="number"||m instanceof Date}function b(m,N){const L=[m[0]+N[0],m[1]+N[1]];return L[1]>=v&&(L[1]-=v,L[0]+=1),L}},67823:(j,g,f)=>{"use strict";f.d(g,{IP:()=>V,YA:()=>I,hX:()=>v});var P=f(97872),h=f(31440),A=/^([0-9a-f]{32})$/i,y=/^[0-9a-f]{16}$/i;function v(O){return A.test(O)&&O!==P.RH}function M(O){return y.test(O)&&O!==P.w9}function I(O){return v(O.traceId)&&M(O.spanId)}function V(O){return new h.d(O)}},70373:(j,g)=>{"use strict";Object.defineProperty(g,"__esModule",{value:!0}),g.hexToBinary=void 0;function f(h){return h>=48&&h<=57?h-48:h>=97&&h<=102?h-87:h-55}function P(h){const A=new Uint8Array(h.length/2);let y=0;for(let v=0;v<h.length;v+=2){const M=f(h.charCodeAt(v)),I=f(h.charCodeAt(v+1));A[y++]=M<<4|I}return A}g.hexToBinary=P},73096:(j,g,f)=>{"use strict";f.d(g,{u:()=>ft});var P=f(75158),h=f(79100),A=f(38729),y=f(31440),v=(0,A.n)("OpenTelemetry Context Key SPAN");function M(F){return F.getValue(v)||void 0}function I(){return M(h._.getInstance().active())}function V(F,K){return F.setValue(v,K)}function O(F){return F.deleteValue(v)}function R(F,K){return V(F,new y.d(K))}function x(F){var K;return(K=M(F))===null||K===void 0?void 0:K.spanContext()}var c=f(67823),E=h._.getInstance(),l=function(){function F(){}return F.prototype.startSpan=function(K,w,G){G===void 0&&(G=E.active());var W=!!w?.root;if(W)return new y.d;var q=G&&x(G);return d(q)&&(0,c.YA)(q)?new y.d(q):new y.d},F.prototype.startActiveSpan=function(K,w,G,W){var q,nt,ct;if(!(arguments.length<2)){arguments.length===2?ct=w:arguments.length===3?(q=w,ct=G):(q=w,nt=G,ct=W);var _t=nt??E.active(),Lt=this.startSpan(K,q,_t),lt=V(_t,Lt);return E.with(lt,ct,void 0,Lt)}},F}();function d(F){return typeof F=="object"&&typeof F.spanId=="string"&&typeof F.traceId=="string"&&typeof F.traceFlags=="number"}var T=new l,b=function(){function F(K,w,G,W){this._provider=K,this.name=w,this.version=G,this.options=W}return F.prototype.startSpan=function(K,w,G){return this._getTracer().startSpan(K,w,G)},F.prototype.startActiveSpan=function(K,w,G,W){var q=this._getTracer();return Reflect.apply(q.startActiveSpan,q,arguments)},F.prototype._getTracer=function(){if(this._delegate)return this._delegate;var K=this._provider.getDelegateTracer(this.name,this.version,this.options);return K?(this._delegate=K,this._delegate):T},F}(),m=function(){function F(){}return F.prototype.getTracer=function(K,w,G){return new l},F}(),N=new m,L=function(){function F(){}return F.prototype.getTracer=function(K,w,G){var W;return(W=this.getDelegateTracer(K,w,G))!==null&&W!==void 0?W:new b(this,K,w,G)},F.prototype.getDelegate=function(){var K;return(K=this._delegate)!==null&&K!==void 0?K:N},F.prototype.setDelegate=function(K){this._delegate=K},F.prototype.getDelegateTracer=function(K,w,G){var W;return(W=this._delegate)===null||W===void 0?void 0:W.getTracer(K,w,G)},F}(),H=f(44892),Y="trace",At=function(){function F(){this._proxyTracerProvider=new L,this.wrapSpanContext=c.IP,this.isSpanContextValid=c.YA,this.deleteSpan=O,this.getSpan=M,this.getActiveSpan=I,this.getSpanContext=x,this.setSpan=V,this.setSpanContext=R}return F.getInstance=function(){return this._instance||(this._instance=new F),this._instance},F.prototype.setGlobalTracerProvider=function(K){var w=(0,P.$G)(Y,this._proxyTracerProvider,H.K.instance());return w&&this._proxyTracerProvider.setDelegate(K),w},F.prototype.getTracerProvider=function(){return(0,P.mS)(Y)||this._proxyTracerProvider},F.prototype.getTracer=function(K,w){return this.getTracerProvider().getTracer(K,w)},F.prototype.disable=function(){(0,P.kv)(Y,H.K.instance()),this._proxyTracerProvider=new L},F}(),ft=At.getInstance()},75026:(j,g,f)=>{"use strict";f.d(g,{u:()=>P});const P=performance},75158:(j,g,f)=>{"use strict";f.d(g,{mS:()=>R,$G:()=>O,kv:()=>x});var P=typeof globalThis=="object"?globalThis:typeof self=="object"?self:typeof window=="object"?window:typeof f.g=="object"?f.g:{},h="1.9.0",A=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/;function y(c){var E=new Set([c]),l=new Set,d=c.match(A);if(!d)return function(){return!1};var T={major:+d[1],minor:+d[2],patch:+d[3],prerelease:d[4]};if(T.prerelease!=null)return function(L){return L===c};function b(N){return l.add(N),!1}function m(N){return E.add(N),!0}return function(L){if(E.has(L))return!0;if(l.has(L))return!1;var H=L.match(A);if(!H)return b(L);var Y={major:+H[1],minor:+H[2],patch:+H[3],prerelease:H[4]};return Y.prerelease!=null||T.major!==Y.major?b(L):T.major===0?T.minor===Y.minor&&T.patch<=Y.patch?m(L):b(L):T.minor<=Y.minor?m(L):b(L)}}var v=y(h),M=h.split(".")[0],I=Symbol.for("opentelemetry.js.api."+M),V=P;function O(c,E,l,d){var T;d===void 0&&(d=!1);var b=V[I]=(T=V[I])!==null&&T!==void 0?T:{version:h};if(!d&&b[c]){var m=new Error("@opentelemetry/api: Attempted duplicate registration of API: "+c);return l.error(m.stack||m.message),!1}if(b.version!==h){var m=new Error("@opentelemetry/api: Registration of version v"+b.version+" for "+c+" does not match previously registered API v"+h);return l.error(m.stack||m.message),!1}return b[c]=E,l.debug("@opentelemetry/api: Registered a global for "+c+" v"+h+"."),!0}function R(c){var E,l,d=(E=V[I])===null||E===void 0?void 0:E.version;if(!(!d||!v(d)))return(l=V[I])===null||l===void 0?void 0:l[c]}function x(c,E){E.debug("@opentelemetry/api: Unregistering a global for "+c+" v"+h+".");var l=V[I];l&&delete l[c]}},75477:(j,g,f)=>{"use strict";f.d(g,{t:()=>v});var P=f(48131),h=f(4445),A=f(82711),y=f(98151);class v{inject(I,V,O){const R=P.$.getBaggage(I);if(!R||(0,h.Zf)(I))return;const x=(0,y.pX)(R).filter(E=>E.length<=A.KV).slice(0,A.QC),c=(0,y.L7)(x);c.length>0&&O.set(V,A.r_,c)}extract(I,V,O){const R=O.get(V,A.r_),x=Array.isArray(R)?R.join(A.EC):R;if(!x)return I;const c={};return x.length===0||(x.split(A.EC).forEach(l=>{const d=(0,y.Qd)(l);if(d){const T={value:d.value};d.metadata&&(T.metadata=d.metadata),c[d.key]=T}}),Object.entries(c).length===0)?I:P.$.setBaggage(I,P.$.createBaggage(c))}fields(){return[A.r_]}}},76733:(j,g,f)=>{"use strict";f.d(g,{u:()=>P});var P;(function(h){h[h.NONE=0]="NONE",h[h.ERROR=30]="ERROR",h[h.WARN=50]="WARN",h[h.INFO=60]="INFO",h[h.DEBUG=70]="DEBUG",h[h.VERBOSE=80]="VERBOSE",h[h.ALL=9999]="ALL"})(P||(P={}))},77232:function(j,g,f){var P;(function(h,A){"use strict";var y="1.0.33",v="",M="?",I="function",V="undefined",O="object",R="string",x="major",c="model",E="name",l="type",d="vendor",T="version",b="architecture",m="console",N="mobile",L="tablet",H="smarttv",Y="wearable",At="embedded",ft=350,F="Amazon",K="Apple",w="ASUS",G="BlackBerry",W="Browser",q="Chrome",nt="Edge",ct="Firefox",_t="Google",Lt="Huawei",lt="LG",ot="Microsoft",pt="Motorola",vt="Opera",Ct="Samsung",wt="Sharp",ue="Sony",pe="Xiaomi",be="Zebra",It="Facebook",fn=function(X,tt){var $={};for(var Tt in X)tt[Tt]&&tt[Tt].length%2===0?$[Tt]=tt[Tt].concat(X[Tt]):$[Tt]=X[Tt];return $},Ft=function(X){for(var tt={},$=0;$<X.length;$++)tt[X[$].toUpperCase()]=X[$];return tt},Kt=function(X,tt){return typeof X===R?st(tt).indexOf(st(X))!==-1:!1},st=function(X){return X.toLowerCase()},Oe=function(X){return typeof X===R?X.replace(/[^\d\.]/g,v).split(".")[0]:A},yt=function(X,tt){if(typeof X===R)return X=X.replace(/^\s\s*/,v),typeof tt===V?X:X.substring(0,ft)},Qt=function(X,tt){for(var $=0,Tt,Q,Te,Z,Wt,Pt;$<tt.length&&!Wt;){var Le=tt[$],Yt=tt[$+1];for(Tt=Q=0;Tt<Le.length&&!Wt;)if(Wt=Le[Tt++].exec(X),Wt)for(Te=0;Te<Yt.length;Te++)Pt=Wt[++Q],Z=Yt[Te],typeof Z===O&&Z.length>0?Z.length===2?typeof Z[1]==I?this[Z[0]]=Z[1].call(this,Pt):this[Z[0]]=Z[1]:Z.length===3?typeof Z[1]===I&&!(Z[1].exec&&Z[1].test)?this[Z[0]]=Pt?Z[1].call(this,Pt,Z[2]):A:this[Z[0]]=Pt?Pt.replace(Z[1],Z[2]):A:Z.length===4&&(this[Z[0]]=Pt?Z[3].call(this,Pt.replace(Z[1],Z[2])):A):this[Z]=Pt||A;$+=2}},ee=function(X,tt){for(var $ in tt)if(typeof tt[$]===O&&tt[$].length>0){for(var Tt=0;Tt<tt[$].length;Tt++)if(Kt(tt[$][Tt],X))return $===M?A:$}else if(Kt(tt[$],X))return $===M?A:$;return X},Pe={"1.0":"/8","1.2":"/1","1.3":"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"},Me={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2","8.1":"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},Ne={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[T,[E,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[T,[E,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[E,T],[/opios[\/ ]+([\w\.]+)/i],[T,[E,vt+" Mini"]],[/\bopr\/([\w\.]+)/i],[T,[E,vt]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i,/(ba?idubrowser)[\/ ]?([\w\.]+)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(weibo)__([\d\.]+)/i],[E,T],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[T,[E,"UC"+W]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i],[T,[E,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[T,[E,"WeChat"]],[/konqueror\/([\w\.]+)/i],[T,[E,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[T,[E,"IE"]],[/yabrowser\/([\w\.]+)/i],[T,[E,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[E,/(.+)/,"$1 Secure "+W],T],[/\bfocus\/([\w\.]+)/i],[T,[E,ct+" Focus"]],[/\bopt\/([\w\.]+)/i],[T,[E,vt+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[T,[E,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[T,[E,"Dolphin"]],[/coast\/([\w\.]+)/i],[T,[E,vt+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[T,[E,"MIUI "+W]],[/fxios\/([-\w\.]+)/i],[T,[E,ct]],[/\bqihu|(qi?ho?o?|360)browser/i],[[E,"360 "+W]],[/(oculus|samsung|sailfish|huawei)browser\/([\w\.]+)/i],[[E,/(.+)/,"$1 "+W],T],[/(comodo_dragon)\/([\w\.]+)/i],[[E,/_/g," "],T],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i],[E,T],[/(metasr)[\/ ]?([\w\.]+)/i,/(lbbrowser)/i,/\[(linkedin)app\]/i],[E],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[E,It],T],[/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/ ]([-\w\.]+)/i],[E,T],[/\bgsa\/([\w\.]+) .*safari\//i],[T,[E,"GSA"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[T,[E,q+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[E,q+" WebView"],T],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[T,[E,"Android "+W]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[E,T],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[T,[E,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[T,E],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[E,[T,ee,Pe]],[/(webkit|khtml)\/([\w\.]+)/i],[E,T],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[E,"Netscape"],T],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[T,[E,ct+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i],[E,T],[/(cobalt)\/([\w\.]+)/i],[E,[T,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[b,"amd64"]],[/(ia32(?=;))/i],[[b,st]],[/((?:i[346]|x)86)[;\)]/i],[[b,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[b,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[b,"armhf"]],[/windows (ce|mobile); ppc;/i],[[b,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[b,/ower/,v,st]],[/(sun4\w)[;\)]/i],[[b,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[b,st]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[c,[d,Ct],[l,L]],[/\b((?:s[cgp]h|gt|sm)-\w+|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[c,[d,Ct],[l,N]],[/\((ip(?:hone|od)[\w ]*);/i],[c,[d,K],[l,N]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[c,[d,K],[l,L]],[/(macintosh);/i],[c,[d,K]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[c,[d,Lt],[l,L]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[c,[d,Lt],[l,N]],[/\b(poco[\w ]+)(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[c,/_/g," "],[d,pe],[l,N]],[/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[c,/_/g," "],[d,pe],[l,L]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[c,[d,"OPPO"],[l,N]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[c,[d,"Vivo"],[l,N]],[/\b(rmx[12]\d{3})(?: bui|;|\))/i],[c,[d,"Realme"],[l,N]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[c,[d,pt],[l,N]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[c,[d,pt],[l,L]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[c,[d,lt],[l,L]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[c,[d,lt],[l,N]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[c,[d,"Lenovo"],[l,L]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[c,/_/g," "],[d,"Nokia"],[l,N]],[/(pixel c)\b/i],[c,[d,_t],[l,L]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[c,[d,_t],[l,N]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[c,[d,ue],[l,N]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[c,"Xperia Tablet"],[d,ue],[l,L]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[c,[d,"OnePlus"],[l,N]],[/(alexa)webm/i,/(kf[a-z]{2}wi)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[c,[d,F],[l,L]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[c,/(.+)/g,"Fire Phone $1"],[d,F],[l,N]],[/(playbook);[-\w\),; ]+(rim)/i],[c,d,[l,L]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[c,[d,G],[l,N]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[c,[d,w],[l,L]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[c,[d,w],[l,N]],[/(nexus 9)/i],[c,[d,"HTC"],[l,L]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic|sony(?!-bra))[-_ ]?([-\w]*)/i],[d,[c,/_/g," "],[l,N]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[c,[d,"Acer"],[l,L]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[c,[d,"Meizu"],[l,N]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[c,[d,wt],[l,N]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[d,c,[l,N]],[/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[d,c,[l,L]],[/(surface duo)/i],[c,[d,ot],[l,L]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[c,[d,"Fairphone"],[l,N]],[/(u304aa)/i],[c,[d,"AT&T"],[l,N]],[/\bsie-(\w*)/i],[c,[d,"Siemens"],[l,N]],[/\b(rct\w+) b/i],[c,[d,"RCA"],[l,L]],[/\b(venue[\d ]{2,7}) b/i],[c,[d,"Dell"],[l,L]],[/\b(q(?:mv|ta)\w+) b/i],[c,[d,"Verizon"],[l,L]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[c,[d,"Barnes & Noble"],[l,L]],[/\b(tm\d{3}\w+) b/i],[c,[d,"NuVision"],[l,L]],[/\b(k88) b/i],[c,[d,"ZTE"],[l,L]],[/\b(nx\d{3}j) b/i],[c,[d,"ZTE"],[l,N]],[/\b(gen\d{3}) b.+49h/i],[c,[d,"Swiss"],[l,N]],[/\b(zur\d{3}) b/i],[c,[d,"Swiss"],[l,L]],[/\b((zeki)?tb.*\b) b/i],[c,[d,"Zeki"],[l,L]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[d,"Dragon Touch"],c,[l,L]],[/\b(ns-?\w{0,9}) b/i],[c,[d,"Insignia"],[l,L]],[/\b((nxa|next)-?\w{0,9}) b/i],[c,[d,"NextBook"],[l,L]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[d,"Voice"],c,[l,N]],[/\b(lvtel\-)?(v1[12]) b/i],[[d,"LvTel"],c,[l,N]],[/\b(ph-1) /i],[c,[d,"Essential"],[l,N]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[c,[d,"Envizen"],[l,L]],[/\b(trio[-\w\. ]+) b/i],[c,[d,"MachSpeed"],[l,L]],[/\btu_(1491) b/i],[c,[d,"Rotor"],[l,L]],[/(shield[\w ]+) b/i],[c,[d,"Nvidia"],[l,L]],[/(sprint) (\w+)/i],[d,c,[l,N]],[/(kin\.[onetw]{3})/i],[[c,/\./g," "],[d,ot],[l,N]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[c,[d,be],[l,L]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[c,[d,be],[l,N]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[d,c,[l,m]],[/droid.+; (shield) bui/i],[c,[d,"Nvidia"],[l,m]],[/(playstation [345portablevi]+)/i],[c,[d,ue],[l,m]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[c,[d,ot],[l,m]],[/smart-tv.+(samsung)/i],[d,[l,H]],[/hbbtv.+maple;(\d+)/i],[[c,/^/,"SmartTV"],[d,Ct],[l,H]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[d,lt],[l,H]],[/(apple) ?tv/i],[d,[c,K+" TV"],[l,H]],[/crkey/i],[[c,q+"cast"],[d,_t],[l,H]],[/droid.+aft(\w)( bui|\))/i],[c,[d,F],[l,H]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[c,[d,wt],[l,H]],[/(bravia[\w ]+)( bui|\))/i],[c,[d,ue],[l,H]],[/(mitv-\w{5}) bui/i],[c,[d,pe],[l,H]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w ]*; *(\w[^;]*);([^;]*)/i],[[d,yt],[c,yt],[l,H]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[l,H]],[/((pebble))app/i],[d,c,[l,Y]],[/droid.+; (glass) \d/i],[c,[d,_t],[l,Y]],[/droid.+; (wt63?0{2,3})\)/i],[c,[d,be],[l,Y]],[/(quest( 2)?)/i],[c,[d,It],[l,Y]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[d,[l,At]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i],[c,[l,N]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[c,[l,L]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[l,L]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[l,N]],[/(android[-\w\. ]{0,9});.+buil/i],[c,[d,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[T,[E,nt+"HTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[T,[E,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i],[E,T],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[T,E]],os:[[/microsoft (windows) (vista|xp)/i],[E,T],[/(windows) nt 6\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i,/(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i],[E,[T,ee,Me]],[/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[E,"Windows"],[T,ee,Me]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/cfnetwork\/.+darwin/i],[[T,/_/g,"."],[E,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[E,"Mac OS"],[T,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[T,E],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[E,T],[/\(bb(10);/i],[T,[E,G]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[T,[E,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[T,[E,ct+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[T,[E,"webOS"]],[/crkey\/([\d\.]+)/i],[T,[E,q+"cast"]],[/(cros) [\w]+ ([\w\.]+\w)/i],[[E,"Chromium OS"],T],[/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[E,T],[/(sunos) ?([\w\.\d]*)/i],[[E,"Solaris"],T],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux)/i,/(unix) ?([\w\.]*)/i],[E,T]]},bt=function(X,tt){if(typeof X===O&&(tt=X,X=A),!(this instanceof bt))return new bt(X,tt).getResult();var $=X||(typeof h!==V&&h.navigator&&h.navigator.userAgent?h.navigator.userAgent:v),Tt=tt?fn(Ne,tt):Ne;return this.getBrowser=function(){var Q={};return Q[E]=A,Q[T]=A,Qt.call(Q,$,Tt.browser),Q.major=Oe(Q.version),Q},this.getCPU=function(){var Q={};return Q[b]=A,Qt.call(Q,$,Tt.cpu),Q},this.getDevice=function(){var Q={};return Q[d]=A,Q[c]=A,Q[l]=A,Qt.call(Q,$,Tt.device),Q},this.getEngine=function(){var Q={};return Q[E]=A,Q[T]=A,Qt.call(Q,$,Tt.engine),Q},this.getOS=function(){var Q={};return Q[E]=A,Q[T]=A,Qt.call(Q,$,Tt.os),Q},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return $},this.setUA=function(Q){return $=typeof Q===R&&Q.length>ft?yt(Q,ft):Q,this},this.setUA($),this};bt.VERSION=y,bt.BROWSER=Ft([E,T,x]),bt.CPU=Ft([b]),bt.DEVICE=Ft([c,d,l,m,N,H,L,Y,At]),bt.ENGINE=bt.OS=Ft([E,T]),typeof g!==V?(V!=="object"&&j.exports&&(g=j.exports=bt),g.UAParser=bt):I==="function"&&f.amdO?(P=function(){return bt}.call(g,f,g,j),P!==A&&(j.exports=P)):typeof h!==V&&(h.UAParser=bt);var jt=typeof h!==V&&(h.jQuery||h.Zepto);if(jt&&!jt.ua){var Dt=new bt;jt.ua=Dt.getResult(),jt.ua.get=function(){return Dt.getUA()},jt.ua.set=function(X){Dt.setUA(X);var tt=Dt.getResult();for(var $ in tt)jt.ua[$]=tt[$]}}})(typeof window=="object"?window:this)},77805:(j,g)=>{"use strict";var f;f={value:!0},g.ds=g.XV=g.a3=g.v8=f=g.z4=g.Me=g.rp=g.Mm=void 0,g.Mm="http.host",g.rp="http.method",g.Me="http.request.body.size",g.z4="http.request_content_length_uncompressed",f="http.response_content_length",g.v8="http.scheme",g.a3="http.status_code",g.XV="http.url",g.ds="http.user_agent"},78044:(j,g,f)=>{"use strict";f.d(g,{s:()=>y,u:()=>A});var P=f(11590);let h=(0,P.o)();function A(v){h=v}function y(v){try{h(v)}catch{}}},78047:(j,g,f)=>{"use strict";f.d(g,{K:()=>h,f:()=>P});function P(A,y){return typeof y=="string"?A===y:!!A.match(y)}function h(A,y){if(!y)return!1;for(const v of y)if(P(A,v))return!0;return!1}},78758:(j,g,f)=>{"use strict";f.d(g,{s:()=>h});var P=f(44892),h=P.K.instance()},79100:(j,g,f)=>{"use strict";f.d(g,{_:()=>x});var P=f(38729),h=function(c,E){var l=typeof Symbol=="function"&&c[Symbol.iterator];if(!l)return c;var d=l.call(c),T,b=[],m;try{for(;(E===void 0||E-- >0)&&!(T=d.next()).done;)b.push(T.value)}catch(N){m={error:N}}finally{try{T&&!T.done&&(l=d.return)&&l.call(d)}finally{if(m)throw m.error}}return b},A=function(c,E,l){if(l||arguments.length===2)for(var d=0,T=E.length,b;d<T;d++)(b||!(d in E))&&(b||(b=Array.prototype.slice.call(E,0,d)),b[d]=E[d]);return c.concat(b||Array.prototype.slice.call(E))},y=function(){function c(){}return c.prototype.active=function(){return P.l},c.prototype.with=function(E,l,d){for(var T=[],b=3;b<arguments.length;b++)T[b-3]=arguments[b];return l.call.apply(l,A([d],h(T),!1))},c.prototype.bind=function(E,l){return l},c.prototype.enable=function(){return this},c.prototype.disable=function(){return this},c}(),v=f(75158),M=f(44892),I=function(c,E){var l=typeof Symbol=="function"&&c[Symbol.iterator];if(!l)return c;var d=l.call(c),T,b=[],m;try{for(;(E===void 0||E-- >0)&&!(T=d.next()).done;)b.push(T.value)}catch(N){m={error:N}}finally{try{T&&!T.done&&(l=d.return)&&l.call(d)}finally{if(m)throw m.error}}return b},V=function(c,E,l){if(l||arguments.length===2)for(var d=0,T=E.length,b;d<T;d++)(b||!(d in E))&&(b||(b=Array.prototype.slice.call(E,0,d)),b[d]=E[d]);return c.concat(b||Array.prototype.slice.call(E))},O="context",R=new y,x=function(){function c(){}return c.getInstance=function(){return this._instance||(this._instance=new c),this._instance},c.prototype.setGlobalContextManager=function(E){return(0,v.$G)(O,E,M.K.instance())},c.prototype.active=function(){return this._getContextManager().active()},c.prototype.with=function(E,l,d){for(var T,b=[],m=3;m<arguments.length;m++)b[m-3]=arguments[m];return(T=this._getContextManager()).with.apply(T,V([E,l,d],I(b),!1))},c.prototype.bind=function(E,l){return this._getContextManager().bind(E,l)},c.prototype._getContextManager=function(){return(0,v.mS)(O)||R},c.prototype.disable=function(){this._getContextManager().disable(),(0,v.kv)(O,M.K.instance())},c}()},80788:(j,g,f)=>{"use strict";f.d(g,{L:()=>h,m:()=>y});var P=f(78758);function h(I){const V={};if(typeof I!="object"||I==null)return V;for(const[O,R]of Object.entries(I)){if(!A(O)){P.s.warn(`Invalid attribute key: ${O}`);continue}if(!y(R)){P.s.warn(`Invalid attribute value set for key: ${O}`);continue}Array.isArray(R)?V[O]=R.slice():V[O]=R}return V}function A(I){return typeof I=="string"&&I.length>0}function y(I){return I==null?!0:Array.isArray(I)?v(I):M(I)}function v(I){let V;for(const O of I)if(O!=null){if(!V){if(M(O)){V=typeof O;continue}return!1}if(typeof O!==V)return!1}return!0}function M(I){switch(typeof I){case"number":case"boolean":case"string":return!0}return!1}},82711:(j,g,f)=>{"use strict";f.d(g,{EC:()=>A,KV:()=>M,QC:()=>v,hN:()=>h,kI:()=>I,r_:()=>y,un:()=>P});const P="=",h=";",A=",",y="baggage",v=180,M=4096,I=8192},83303:(j,g,f)=>{"use strict";f.r(g),f.d(g,{AnchoredClock:()=>h,BindOnceFuture:()=>G.I,CompositePropagator:()=>l.n,ExportResultCode:()=>I.V,RPCType:()=>m,SDK_INFO:()=>c.q,TRACE_PARENT_HEADER:()=>d.ZS,TRACE_STATE_HEADER:()=>d.UD,TimeoutError:()=>F,TraceState:()=>At.n,W3CBaggagePropagator:()=>P.t,W3CTraceContextPropagator:()=>d.lm,_globalThis:()=>R.X,addHrTimes:()=>M.mw,callWithTimeout:()=>K,deleteRPCMetadata:()=>L,diagLogLevelFromString:()=>ct,getBooleanFromEnv:()=>O.Ix,getNumberFromEnv:()=>O.Jk,getRPCMetadata:()=>H,getStringFromEnv:()=>O.HF,getStringListFromEnv:()=>O.f7,getTimeOrigin:()=>M.uc,globalErrorHandler:()=>y.s,hrTime:()=>M._5,hrTimeDuration:()=>M.W5,hrTimeToMicroseconds:()=>M.w_,hrTimeToMilliseconds:()=>M.JU,hrTimeToNanoseconds:()=>M.u5,hrTimeToTimeStamp:()=>M.tq,internal:()=>lt,isAttributeValue:()=>A.m,isTimeInput:()=>M.Ir,isTimeInputHrTime:()=>M.VL,isTracingSuppressed:()=>Y.Zf,isUrlIgnored:()=>w.K,loggingErrorHandler:()=>v.o,merge:()=>ft.h,millisToHrTime:()=>M.lg,otperformance:()=>x.u,parseKeyPairsIntoRecord:()=>V.hD,parseTraceParent:()=>d.ZI,sanitizeAttributes:()=>A.L,setGlobalErrorHandler:()=>y.u,setRPCMetadata:()=>N,suppressTracing:()=>Y.M1,timeInputToHrTime:()=>M.KJ,unrefTimer:()=>E.K,unsuppressTracing:()=>Y.FU,urlMatches:()=>w.f});var P=f(75477);class h{_monotonicClock;_epochMillis;_performanceMillis;constructor(pt,vt){this._monotonicClock=vt,this._epochMillis=pt.now(),this._performanceMillis=vt.now()}now(){const pt=this._monotonicClock.now()-this._performanceMillis;return this._epochMillis+pt}}var A=f(80788),y=f(78044),v=f(11590),M=f(65864),I=f(92068),V=f(98151),O=f(41257),R=f(89869),x=f(75026),c=f(15347),E=f(5446),l=f(22721),d=f(2240),T=f(38729);const b=(0,T.n)("OpenTelemetry SDK Context Key RPC_METADATA");var m;(function(ot){ot.HTTP="http"})(m||(m={}));function N(ot,pt){return ot.setValue(b,pt)}function L(ot){return ot.deleteValue(b)}function H(ot){return ot.getValue(b)}var Y=f(4445),At=f(59406),ft=f(31194);class F extends Error{constructor(pt){super(pt),Object.setPrototypeOf(this,F.prototype)}}function K(ot,pt){let vt;const Ct=new Promise(function(ue,pe){vt=setTimeout(function(){pe(new F("Operation timed out."))},pt)});return Promise.race([ot,Ct]).then(wt=>(clearTimeout(vt),wt),wt=>{throw clearTimeout(vt),wt})}var w=f(78047),G=f(99756),W=f(76733),q=f(78758);const nt={ALL:W.u.ALL,VERBOSE:W.u.VERBOSE,DEBUG:W.u.DEBUG,INFO:W.u.INFO,WARN:W.u.WARN,ERROR:W.u.ERROR,NONE:W.u.NONE};function ct(ot){if(ot==null)return;const pt=nt[ot.toUpperCase()];return pt??(q.s.warn(`Unknown log level "${ot}", expected one of ${Object.keys(nt)}, using default`),W.u.INFO)}var _t=f(41844);function Lt(ot,pt){return new Promise(vt=>{_t._.with((0,Y.M1)(_t._.active()),()=>{ot.export(pt,Ct=>{vt(Ct)})})})}const lt={_export:Lt}},89869:(j,g,f)=>{"use strict";f.d(g,{X:()=>P});const P=typeof globalThis=="object"?globalThis:typeof self=="object"?self:typeof window=="object"?window:typeof f.g=="object"?f.g:{}},92068:(j,g,f)=>{"use strict";f.d(g,{V:()=>P});var P;(function(h){h[h.SUCCESS=0]="SUCCESS",h[h.FAILED=1]="FAILED"})(P||(P={}))},94989:(j,g,f)=>{"use strict";var P;P={value:!0},g.sJ=P=P=P=void 0;const h=f(9603),A=f(56861);function y(R,x){const c=R.spanContext(),E=R.status,l=R.parentSpanContext?.spanId?x.encodeSpanContext(R.parentSpanContext?.spanId):void 0;return{traceId:x.encodeSpanContext(c.traceId),spanId:x.encodeSpanContext(c.spanId),parentSpanId:l,traceState:c.traceState?.serialize(),name:R.name,kind:R.kind==null?0:R.kind+1,startTimeUnixNano:x.encodeHrTime(R.startTime),endTimeUnixNano:x.encodeHrTime(R.endTime),attributes:(0,h.toAttributes)(R.attributes),droppedAttributesCount:R.droppedAttributesCount,events:R.events.map(d=>M(d,x)),droppedEventsCount:R.droppedEventsCount,status:{code:E.code,message:E.message},links:R.links.map(d=>v(d,x)),droppedLinksCount:R.droppedLinksCount}}P=y;function v(R,x){return{attributes:R.attributes?(0,h.toAttributes)(R.attributes):[],spanId:x.encodeSpanContext(R.context.spanId),traceId:x.encodeSpanContext(R.context.traceId),traceState:R.context.traceState?.serialize(),droppedAttributesCount:R.droppedAttributesCount||0}}P=v;function M(R,x){return{attributes:R.attributes?(0,h.toAttributes)(R.attributes):[],name:R.name,timeUnixNano:x.encodeHrTime(R.time),droppedAttributesCount:R.droppedAttributesCount||0}}P=M;function I(R,x){const c=(0,A.getOtlpEncoder)(x);return{resourceSpans:O(R,c)}}g.sJ=I;function V(R){const x=new Map;for(const c of R){let E=x.get(c.resource);E||(E=new Map,x.set(c.resource,E));const l=`${c.instrumentationScope.name}@${c.instrumentationScope.version||""}:${c.instrumentationScope.schemaUrl||""}`;let d=E.get(l);d||(d=[],E.set(l,d)),d.push(c)}return x}function O(R,x){const c=V(R),E=[],l=c.entries();let d=l.next();for(;!d.done;){const[T,b]=d.value,m=[],N=b.values();let L=N.next();for(;!L.done;){const Y=L.value;if(Y.length>0){const At=Y.map(ft=>y(ft,x));m.push({scope:(0,h.createInstrumentationScope)(Y[0].instrumentationScope),spans:At,schemaUrl:Y[0].instrumentationScope.schemaUrl})}L=N.next()}const H={resource:(0,h.createResource)(T),scopeSpans:m,schemaUrl:void 0};E.push(H),d=l.next()}return E}},95718:(j,g,f)=>{"use strict";f.d(g,{GrafanaJavascriptAgentBackend:()=>oE});var P=f(8934);function h(){}var A;(function(e){e[e.OFF=0]="OFF",e[e.ERROR=1]="ERROR",e[e.WARN=2]="WARN",e[e.INFO=3]="INFO",e[e.VERBOSE=4]="VERBOSE"})(A||(A={}));const v={debug:h,error:h,info:h,prefix:"Faro",warn:h},M=A.ERROR,I=Object.assign({},console);class V{constructor(){this.unpatchedConsole=I,this.internalLogger=v,this.config={},this.metas={}}logDebug(...t){this.internalLogger.debug(`${this.name}
`,...t)}logInfo(...t){this.internalLogger.info(`${this.name}
`,...t)}logWarn(...t){this.internalLogger.warn(`${this.name}
`,...t)}logError(...t){this.internalLogger.error(`${this.name}
`,...t)}}class O extends V{isBatched(){return!1}getIgnoreUrls(){return[]}}const R="1.19.0";function x(e){const{size:t,concurrency:n}=e,r=[];let i=0;const s=()=>{if(i<n&&r.length){const{producer:a,resolve:u,reject:_}=r.shift();i++,a().then(p=>{i--,s(),u(p)},p=>{i--,s(),_(p)})}};return{add:a=>{if(r.length+i>=t)throw new Error("Task buffer full");return new Promise((u,_)=>{r.push({producer:a,resolve:u,reject:_}),s()})}}}var c;(function(e){e.EXCEPTION="exception",e.LOG="log",e.MEASUREMENT="measurement",e.TRACE="trace",e.EVENT="event"})(c||(c={}));const E={[c.EXCEPTION]:"exceptions",[c.LOG]:"logs",[c.MEASUREMENT]:"measurements",[c.TRACE]:"traces",[c.EVENT]:"events"};function l(e,t){var n,r;if(t===void 0)return e;if(e===void 0)return{resourceSpans:t};const i=(n=e.resourceSpans)===null||n===void 0?void 0:n[0];if(i===void 0)return e;const s=i?.scopeSpans||[],o=((r=t?.[0])===null||r===void 0?void 0:r.scopeSpans)||[];return Object.assign(Object.assign({},e),{resourceSpans:[Object.assign(Object.assign({},i),{scopeSpans:[...s,...o]})]})}function d(e){let t={meta:{}};return e[0]!==void 0&&(t.meta=e[0].meta),e.forEach(n=>{switch(n.type){case c.LOG:case c.EVENT:case c.EXCEPTION:case c.MEASUREMENT:const r=E[n.type],i=t[r];t=Object.assign(Object.assign({},t),{[r]:i===void 0?[n.payload]:[...i,n.payload]});break;case c.TRACE:t=Object.assign(Object.assign({},t),{traces:l(t.traces,n.payload.resourceSpans)});break}}),t}function T(e,t){return typeof e===t}function b(e,t){return Object.prototype.toString.call(e)===`[object ${t}]`}function m(e,t){try{return e instanceof t}catch{return!1}}const N=e=>T(e,"undefined"),L=e=>T(e,"null"),H=e=>T(e,"string"),Y=e=>T(e,"number")&&!isNaN(e)||T(e,"bigint"),At=e=>Y(e)&&Number.isInteger(e),ft=e=>T(e,"boolean"),F=e=>T(e,"symbol"),K=e=>!L(e)&&T(e,"object"),w=e=>T(e,"function"),G=e=>b(e,"Array"),W=e=>b(e,"RegExp"),q=e=>w(e?.then),nt=e=>!K(e)&&!w(e),ct=typeof Event<"u",_t=e=>ct&&m(e,Event),Lt=typeof Error<"u",lt=e=>Lt&&m(e,Error),ot=e=>b(e,"ErrorEvent"),pt=e=>b(e,"DOMError"),vt=e=>b(e,"DOMException"),Ct=typeof Element<"u",wt=e=>Ct&&m(e,Element),ue=typeof Map<"u",pe=e=>ue&&m(e,Map),be=e=>K(e)&&"nativeEvent"in e&&"preventDefault"in e&&"stopPropagation"in e;function It(e){return e==null?!0:G(e)||H(e)?e.length===0:K(e)?Object.keys(e).length===0:!1}function fn(){const e=new WeakSet;return function(t,n){if(K(n)&&n!==null){if(e.has(n))return null;e.add(n)}return n}}function Ft(e={}){return JSON.stringify(e??{},fn())}function Kt(e={}){const t={};for(const[n,r]of Object.entries(e))t[n]=K(r)&&r!==null?Ft(r):String(r);return t}var st=f(32631);function Oe(e,t){let n=!1,r;const i=()=>{if(r==null){n=!1;return}e(...r),r=null,setTimeout(i,t)};return(...s)=>{if(n){r=s;return}e(...s),n=!0,setTimeout(i,t)}}const yt={session:"sessionStorage",local:"localStorage"};function Qt(e){var t;try{let n;n=window[e];const r="__faro_storage_test__";return n.setItem(r,r),n.removeItem(r),!0}catch(n){return(t=st.P.internalLogger)===null||t===void 0||t.info(`Web storage of type ${e} is not available. Reason: ${n}`),!1}}function ee(e,t){return jt(t)?window[t].getItem(e):null}function Pe(e,t,n){if(jt(n))try{window[n].setItem(e,t)}catch{}}function Me(e,t){jt(t)&&window[t].removeItem(e)}const Ne=Qt(yt.local),bt=Qt(yt.session);function jt(e){return e===yt.local?Ne:e===yt.session?bt:!1}const Dt="com.grafana.faro.session",X=14400*1e3,tt=900*1e3,$=1*1e3,Tt=null,Te={enabled:!0,persistent:!1,maxSessionPersistenceTime:tt};function Z(){return Date.now()}function Wt(){return new Date().toISOString()}function Pt(e){return new Date(e).toISOString()}const Le="abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ0123456789";function Yt(e=10){return Array.from(Array(e)).map(()=>Le[Math.floor(Math.random()*Le.length)]).join("")}function ne(e,t){if(e===t)return!0;if(T(e,"number")&&isNaN(e))return T(t,"number")&&isNaN(t);const n=G(e),r=G(t);if(n!==r)return!1;if(n&&r){const o=e.length;if(o!==t.length)return!1;for(let a=o;a--!==0;)if(!ne(e[a],t[a]))return!1;return!0}const i=K(e),s=K(t);if(i!==s)return!1;if(e&&t&&i&&s){const o=Object.keys(e),a=Object.keys(t),u=o.length,_=a.length;if(u!==_)return!1;for(let p of o)if(!a.includes(p))return!1;for(let p of o)if(!ne(e[p],t[p]))return!1;return!0}return!1}const co={EventNames:{CLICK:"click",NAVIGATION:"navigation",SESSION_START:"session_start",VIEW_CHANGED:"view_changed"}},lo="click",_o="navigation",ei="view_changed",Fe="session_start",pn="session_resume",ni="session_extend",ri="service_name_override",Eo="route_change";function Tn(){var e,t,n;const i=st.P.config.sessionTracking;let s=(n=(t=(e=i?.sampler)===null||e===void 0?void 0:e.call(i,{metas:st.P.metas.value}))!==null&&t!==void 0?t:i?.samplingRate)!==null&&n!==void 0?n:1;return typeof s!="number"&&(s=0),Math.random()<s}function Ke({sessionId:e,started:t,lastActivity:n,isSampled:r=!0}={}){var i,s;const o=Z(),a=(s=(i=st.P.config)===null||i===void 0?void 0:i.sessionTracking)===null||s===void 0?void 0:s.generateSessionId;return e==null&&(e=typeof a=="function"?a():Yt()),{sessionId:e,lastActivity:n??o,started:t??o,isSampled:r}}function zn(e){if(e==null)return!1;const t=Z();return t-e.started<X?t-e.lastActivity<tt:!1}function Sn({fetchUserSession:e,storeUserSession:t}){return function({forceSessionExtend:r}={forceSessionExtend:!1}){var i,s,o;if(!e||!t)return;const a=st.P.config.sessionTracking,u=a?.persistent;if(u&&!Ne||!u&&!bt)return;const _=e();if(r===!1&&zn(_))t(Object.assign(Object.assign({},_),{lastActivity:Z()}));else{let p=$n(Ke({isSampled:Tn()}),_);t(p),(i=st.P.api)===null||i===void 0||i.setSession(p.sessionMeta),(s=a?.onSessionChange)===null||s===void 0||s.call(a,(o=_?.sessionMeta)!==null&&o!==void 0?o:null,p.sessionMeta)}}}function $n(e,t){var n,r,i,s,o,a,u;const _=Object.assign(Object.assign({},e),{sessionMeta:{id:e.sessionId,attributes:Object.assign(Object.assign(Object.assign({},(r=(n=st.P.config.sessionTracking)===null||n===void 0?void 0:n.session)===null||r===void 0?void 0:r.attributes),(s=(i=st.P.metas.value.session)===null||i===void 0?void 0:i.attributes)!==null&&s!==void 0?s:{}),{isSampled:e.isSampled.toString()})}}),p=(a=(o=st.P.metas.value.session)===null||o===void 0?void 0:o.overrides)!==null&&a!==void 0?a:(u=t?.sessionMeta)===null||u===void 0?void 0:u.overrides;It(p)||(_.sessionMeta.overrides=p);const S=t?.sessionId;return S!=null&&(_.sessionMeta.attributes.previousSession=S),_}function Xn({fetchUserSession:e,storeUserSession:t}){return function(r){const i=r.session,s=e();let o=i?.id;const a=i?.attributes,u=i?.overrides,_=s?.sessionMeta,p=_?.overrides,S=!!u&&!ne(u,p),C=!!a&&!ne(a,_?.attributes);if(!!i&&o!==s?.sessionId||C||S){const D=$n(Ke({sessionId:o,isSampled:Tn()}),s);t(D),ii(S,u,p),st.P.api.setSession(D.sessionMeta)}}}function ii(e,t={},n={}){var r,i,s;if(!e)return;const o=t.serviceName,a=(s=(r=n.serviceName)!==null&&r!==void 0?r:(i=st.P.metas.value.app)===null||i===void 0?void 0:i.name)!==null&&s!==void 0?s:"";o&&o!==a&&st.P.api.pushEvent(ri,{serviceName:o,previousServiceName:a})}class Vt{constructor(){this.updateSession=Oe(()=>this.updateUserSession(),$),this.updateUserSession=Sn({fetchUserSession:Vt.fetchUserSession,storeUserSession:Vt.storeUserSession}),this.init()}static removeUserSession(){Me(Dt,Vt.storageTypeLocal)}static storeUserSession(t){Pe(Dt,Ft(t),Vt.storageTypeLocal)}static fetchUserSession(){const t=ee(Dt,Vt.storageTypeLocal);return t?JSON.parse(t):null}init(){document.addEventListener("visibilitychange",()=>{document.visibilityState==="visible"&&this.updateSession()}),st.P.metas.addListener(Xn({fetchUserSession:Vt.fetchUserSession,storeUserSession:Vt.storeUserSession}))}}Vt.storageTypeLocal=yt.local;class zt{constructor(){this.updateSession=Oe(()=>this.updateUserSession(),$),this.updateUserSession=Sn({fetchUserSession:zt.fetchUserSession,storeUserSession:zt.storeUserSession}),this.init()}static removeUserSession(){Me(Dt,zt.storageTypeSession)}static storeUserSession(t){Pe(Dt,Ft(t),zt.storageTypeSession)}static fetchUserSession(){const t=ee(Dt,zt.storageTypeSession);return t?JSON.parse(t):null}init(){document.addEventListener("visibilitychange",()=>{document.visibilityState==="visible"&&this.updateSession()}),st.P.metas.addListener(Xn({fetchUserSession:zt.fetchUserSession,storeUserSession:zt.storeUserSession}))}}zt.storageTypeSession=yt.session;function Jn(e){return e?.persistent?Vt:zt}var Qn=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(p){try{_(r.next(p))}catch(S){o(S)}}function u(p){try{_(r.throw(p))}catch(S){o(S)}}function _(p){p.done?s(p.value):i(p.value).then(a,u)}_((r=r.apply(e,t||[])).next())})},si=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const oi=30,ai=5,ui=5e3,ci=6e4,li=429,di=202;class Zn extends O{constructor(t){var n,r,i,s;super(),this.options=t,this.name="@grafana/faro-web-sdk:transport-fetch",this.version=R,this.disabledUntil=new Date,this.rateLimitBackoffMs=(n=t.defaultRateLimitBackoffMs)!==null&&n!==void 0?n:ui,this.getNow=(r=t.getNow)!==null&&r!==void 0?r:()=>Date.now(),this.promiseBuffer=x({size:(i=t.bufferSize)!==null&&i!==void 0?i:oi,concurrency:(s=t.concurrency)!==null&&s!==void 0?s:ai})}send(t){return Qn(this,void 0,void 0,function*(){try{if(this.disabledUntil>new Date(this.getNow()))return this.logWarn(`Dropping transport item due to too many requests. Backoff until ${this.disabledUntil}`),Promise.resolve();yield this.promiseBuffer.add(()=>{const n=JSON.stringify(d(t)),{url:r,requestOptions:i,apiKey:s}=this.options,o=i??{},{headers:a}=o,u=si(o,["headers"]);let _;const p=this.metas.value.session;return p!=null&&(_=p.id),fetch(r,Object.assign({method:"POST",headers:Object.assign(Object.assign(Object.assign({"Content-Type":"application/json"},a??{}),s?{"x-api-key":s}:{}),_?{"x-faro-session-id":_}:{}),body:n,keepalive:n.length<=ci},u??{})).then(S=>Qn(this,void 0,void 0,function*(){return S.status===di&&S.headers.get("X-Faro-Session-Status")==="invalid"&&this.extendFaroSession(this.config,this.logDebug),S.status===li&&(this.disabledUntil=this.getRetryAfterDate(S),this.logWarn(`Too many requests, backing off until ${this.disabledUntil}`)),S.text().catch(h),S})).catch(S=>{this.logError(`Failed sending payload to the receiver
`,JSON.parse(n),S)})})}catch(n){this.logError(n)}})}getIgnoreUrls(){var t;return[this.options.url].concat((t=this.config.ignoreUrls)!==null&&t!==void 0?t:[])}isBatched(){return!0}getRetryAfterDate(t){const n=this.getNow(),r=t.headers.get("Retry-After");if(r){const i=Number(r);if(!isNaN(i))return new Date(i*1e3+n);const s=Date.parse(r);if(!isNaN(s))return new Date(s)}return new Date(n+this.rateLimitBackoffMs)}extendFaroSession(t,n){const r="Session expired",i=t.sessionTracking;if(i?.enabled){const{fetchUserSession:s,storeUserSession:o}=Jn(i);Sn({fetchUserSession:s,storeUserSession:o})({forceSessionExtend:!0}),n(`${r} created new session.`)}else n(`${r}.`)}}class Zt extends V{constructor(){super(...arguments),this.api={},this.transports={}}}const _i="Non-Error promise rejection captured with value:",Ei="UnhandledRejection",qn="DOMError",tr="DOMException",er="Non-Error exception captured with keys:",nr="?",fi=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/i,rr="Error",ir=e=>e.map(t=>K(t)?Ft(t):String(t)).join(" ");function pi(e){var t,n;const r=e.match(fi),i=(t=r?.[1])!==null&&t!==void 0?t:rr;return[(n=r?.[2])!==null&&n!==void 0?n:e,i]}const sr=`
`,Ti="eval",Si="?",or="@",ar=/^\s*at (?:(.*?) ?\((?:address at )?)?((?:file|https?|blob|chrome-extension|address|native|eval|webpack|<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,hi=/\((\S*)(?::(\d+))(?::(\d+))\)/,mi="eval",ur="address at ",Ai=ur.length,gi=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:file|https?|blob|chrome|webpack|resource|moz-extension|safari-extension|safari-web-extension|capacitor)?:\/.*?|\[native code]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,vi=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,Ri=" > eval",cr="safari-extension",lr="safari-web-extension",bi=/Minified React error #\d+;/i;function dr(e,t,n,r){const i={filename:e||document.location.href,function:t||Si};return n!==void 0&&(i.lineno=n),r!==void 0&&(i.colno=r),i}function hn(e,t){const n=e?.includes(cr),r=!n&&e?.includes(lr);return!n&&!r?[e,t]:[e?.includes(or)?e.split(or)[0]:e,n?`${cr}:${t}`:`${lr}:${t}`]}function je(e){let t=[];e.stacktrace?t=e.stacktrace.split(sr).filter((r,i)=>i%2===0):e.stack&&(t=e.stack.split(sr));const n=t.reduce((r,i,s)=>{let o,a,u,_,p;if(o=ar.exec(i)){if(a=o[1],u=o[2],_=o[3],p=o[4],u?.startsWith(mi)){const S=hi.exec(u);S&&(u=S[1],_=S[2],p=S[3])}u=u?.startsWith(ur)?u.substring(Ai):u,[a,u]=hn(a,u)}else if(o=gi.exec(i)){if(a=o[1],u=o[3],_=o[4],p=o[5],u&&u.includes(Ri)){const S=vi.exec(u);S&&(a=a||Ti,u=S[1],_=S[2])}else s===0&&!p&&Y(e.columnNumber)&&(p=String(e.columnNumber+1));[a,u]=hn(a,u)}return(u||a)&&r.push(dr(u,a,_?Number(_):void 0,p?Number(p):void 0)),r},[]);return bi.test(e.message)?n.slice(1):n}function mn(e){let t,n,r=[],i,s;if(ot(e)&&e.error)t=e.error.message,n=e.error.name,r=je(e.error);else if((i=pt(e))||vt(e)){const{name:o,message:a}=e;n=o??(i?qn:tr),t=a?`${n}: ${a}`:n}else lt(e)?(t=e.message,r=je(e)):(K(e)||(s=_t(e)))&&(n=s?e.constructor.name:void 0,t=`${er} ${Object.keys(e)}`);return[t,n,r]}function _r(e){const[t,n,r,i,s]=e;let o,a,u=[];const _=H(t),p=dr(n,nr,r,i);return s||!_?([o,a,u]=mn(s??t),u.length===0&&(u=[p])):_&&([o,a]=pi(t),u=[p]),{value:o,type:a,stackFrames:u}}function An(e,t){return lt(e[0])?_r(e):{value:t(e)}}function Oi(e){const t=window.onerror;window.onerror=(...n)=>{try{const{value:r,type:i,stackFrames:s}=_r(n),o=n[4];if(r){const a={type:i,stackFrames:s};o!=null&&(a.originalError=o),e.pushError(new Error(r),a)}}finally{t?.apply(window,n)}}}function Pi(e){window.addEventListener("unhandledrejection",t=>{var n,r;let i=t;i.reason?i=t.reason:!((n=t.detail)===null||n===void 0)&&n.reason&&(i=(r=t.detail)===null||r===void 0?void 0:r.reason);let s,o,a=[];nt(i)?(s=`${_i} ${String(i)}`,o=Ei):[s,o,a]=mn(i),s&&e.pushError(new Error(s),{type:o,stackFrames:a})})}class Er extends Zt{constructor(){super(...arguments),this.name="@grafana/faro-web-sdk:instrumentation-errors",this.version=R}initialize(){this.logDebug("Initializing"),Oi(this.api),Pi(this.api)}}const ye=e=>e.map(t=>{try{return String(t)}catch{return""}}).join(" ");var $t=f(37930);class re extends Zt{constructor(t={}){super(),this.options=t,this.name="@grafana/faro-web-sdk:instrumentation-console",this.version=R,this.errorSerializer=ye}initialize(){var t,n,r,i;this.options=Object.assign(Object.assign({},this.options),this.config.consoleInstrumentation);const s=((t=this.options)===null||t===void 0?void 0:t.serializeErrors)||!!(!((n=this.options)===null||n===void 0)&&n.errorSerializer);this.errorSerializer=s?(i=(r=this.options)===null||r===void 0?void 0:r.errorSerializer)!==null&&i!==void 0?i:ir:ye,$t.HT.filter(o=>{var a,u;return!((u=(a=this.options)===null||a===void 0?void 0:a.disabledLevels)!==null&&u!==void 0?u:re.defaultDisabledLevels).includes(o)}).forEach(o=>{console[o]=(...a)=>{var u,_;try{if(o===$t.$b.ERROR&&!(!((u=this.options)===null||u===void 0)&&u.consoleErrorAsLog)){const{value:p,type:S,stackFrames:C}=An(a,this.errorSerializer);if(p&&!S&&!C){this.api.pushError(new Error(re.consoleErrorPrefix+p));return}this.api.pushError(new Error(re.consoleErrorPrefix+p),{type:S,stackFrames:C})}else if(o===$t.$b.ERROR&&(!((_=this.options)===null||_===void 0)&&_.consoleErrorAsLog)){const{value:p,type:S,stackFrames:C}=An(a,this.errorSerializer);this.api.pushLog(p?[re.consoleErrorPrefix+p]:a,{level:o,context:{value:p??"",type:S??"",stackFrames:C?.length?ir(C):""}})}else this.api.pushLog(a,{level:o})}catch(p){this.logError(p)}finally{this.unpatchedConsole[o](...a)}}})}}re.defaultDisabledLevels=[$t.$b.DEBUG,$t.$b.TRACE,$t.$b.LOG],re.consoleErrorPrefix="console.error: ";var fr,ce,We,Mi,gn,Ni=-1,Se=function(e){addEventListener("pageshow",function(t){t.persisted&&(Ni=t.timeStamp,e(t))},!0)},pr=function(){var e=self.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0];if(e&&e.responseStart>0&&e.responseStart<performance.now())return e},vn=function(){var e=pr();return e&&e.activationStart||0},xt=function(e,t){var n=pr(),r="navigate";return Ni>=0?r="back-forward-cache":n&&(document.prerendering||vn()>0?r="prerender":document.wasDiscarded?r="restore":n.type&&(r=n.type.replace(/_/g,"-"))),{name:e,value:t===void 0?-1:t,rating:"good",delta:0,entries:[],id:"v4-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12),navigationType:r}},Ce=function(e,t,n){try{if(PerformanceObserver.supportedEntryTypes.includes(e)){var r=new PerformanceObserver(function(i){Promise.resolve().then(function(){t(i.getEntries())})});return r.observe(Object.assign({type:e,buffered:!0},n||{})),r}}catch{}},Bt=function(e,t,n,r){var i,s;return function(o){t.value>=0&&(o||r)&&((s=t.value-(i||0))||i===void 0)&&(i=t.value,t.delta=s,t.rating=function(a,u){return a>u[1]?"poor":a>u[0]?"needs-improvement":"good"}(t.value,n),e(t))}},Tr=function(e){requestAnimationFrame(function(){return requestAnimationFrame(function(){return e()})})},Ye=function(e){document.addEventListener("visibilitychange",function(){document.visibilityState==="hidden"&&e()})},Rn=function(e){var t=!1;return function(){t||(e(),t=!0)}},Ie=-1,Li=function(){return document.visibilityState!=="hidden"||document.prerendering?1/0:0},bn=function(e){document.visibilityState==="hidden"&&Ie>-1&&(Ie=e.type==="visibilitychange"?e.timeStamp:0,fo())},yi=function(){addEventListener("visibilitychange",bn,!0),addEventListener("prerenderingchange",bn,!0)},fo=function(){removeEventListener("visibilitychange",bn,!0),removeEventListener("prerenderingchange",bn,!0)},Sr=function(){return Ie<0&&(Ie=Li(),yi(),Se(function(){setTimeout(function(){Ie=Li(),yi()},0)})),{get firstHiddenTime(){return Ie}}},ze=function(e){document.prerendering?addEventListener("prerenderingchange",function(){return e()},!0):e()},Ci=[1800,3e3],Ii=function(e,t){t=t||{},ze(function(){var n,r=Sr(),i=xt("FCP"),s=Ce("paint",function(o){o.forEach(function(a){a.name==="first-contentful-paint"&&(s.disconnect(),a.startTime<r.firstHiddenTime&&(i.value=Math.max(a.startTime-vn(),0),i.entries.push(a),n(!0)))})});s&&(n=Bt(e,i,Ci,t.reportAllChanges),Se(function(o){i=xt("FCP"),n=Bt(e,i,Ci,t.reportAllChanges),Tr(function(){i.value=performance.now()-o.timeStamp,n(!0)})}))})},Ui=[.1,.25],po=function(e,t){t=t||{},Ii(Rn(function(){var n,r=xt("CLS",0),i=0,s=[],o=function(u){u.forEach(function(_){if(!_.hadRecentInput){var p=s[0],S=s[s.length-1];i&&_.startTime-S.startTime<1e3&&_.startTime-p.startTime<5e3?(i+=_.value,s.push(_)):(i=_.value,s=[_])}}),i>r.value&&(r.value=i,r.entries=s,n())},a=Ce("layout-shift",o);a&&(n=Bt(e,r,Ui,t.reportAllChanges),Ye(function(){o(a.takeRecords()),n(!0)}),Se(function(){i=0,r=xt("CLS",0),n=Bt(e,r,Ui,t.reportAllChanges),Tr(function(){return n()})}),setTimeout(n,0))}))},wi=0,hr=1/0,On=0,To=function(e){e.forEach(function(t){t.interactionId&&(hr=Math.min(hr,t.interactionId),On=Math.max(On,t.interactionId),wi=On?(On-hr)/7+1:0)})},Di=function(){return fr?wi:performance.interactionCount||0},So=function(){"interactionCount"in performance||fr||(fr=Ce("event",To,{type:"event",buffered:!0,durationThreshold:0}))},qt=[],Pn=new Map,Vi=0,ho=function(){var e=Math.min(qt.length-1,Math.floor((Di()-Vi)/50));return qt[e]},mo=[],Ao=function(e){if(mo.forEach(function(i){return i(e)}),e.interactionId||e.entryType==="first-input"){var t=qt[qt.length-1],n=Pn.get(e.interactionId);if(n||qt.length<10||e.duration>t.latency){if(n)e.duration>n.latency?(n.entries=[e],n.latency=e.duration):e.duration===n.latency&&e.startTime===n.entries[0].startTime&&n.entries.push(e);else{var r={id:e.interactionId,latency:e.duration,entries:[e]};Pn.set(r.id,r),qt.push(r)}qt.sort(function(i,s){return s.latency-i.latency}),qt.length>10&&qt.splice(10).forEach(function(i){return Pn.delete(i.id)})}}},xi=function(e){var t=self.requestIdleCallback||self.setTimeout,n=-1;return e=Rn(e),document.visibilityState==="hidden"?e():(n=t(e),Ye(e)),n},Bi=[200,500],go=function(e,t){"PerformanceEventTiming"in self&&"interactionId"in PerformanceEventTiming.prototype&&(t=t||{},ze(function(){var n;So();var r,i=xt("INP"),s=function(a){xi(function(){a.forEach(Ao);var u=ho();u&&u.latency!==i.value&&(i.value=u.latency,i.entries=u.entries,r())})},o=Ce("event",s,{durationThreshold:(n=t.durationThreshold)!==null&&n!==void 0?n:40});r=Bt(e,i,Bi,t.reportAllChanges),o&&(o.observe({type:"first-input",buffered:!0}),Ye(function(){s(o.takeRecords()),r(!0)}),Se(function(){Vi=Di(),qt.length=0,Pn.clear(),i=xt("INP"),r=Bt(e,i,Bi,t.reportAllChanges)}))}))},ki=[2500,4e3],mr={},vo=function(e,t){t=t||{},ze(function(){var n,r=Sr(),i=xt("LCP"),s=function(u){t.reportAllChanges||(u=u.slice(-1)),u.forEach(function(_){_.startTime<r.firstHiddenTime&&(i.value=Math.max(_.startTime-vn(),0),i.entries=[_],n())})},o=Ce("largest-contentful-paint",s);if(o){n=Bt(e,i,ki,t.reportAllChanges);var a=Rn(function(){mr[i.id]||(s(o.takeRecords()),o.disconnect(),mr[i.id]=!0,n(!0))});["keydown","click"].forEach(function(u){addEventListener(u,function(){return xi(a)},!0)}),Ye(a),Se(function(u){i=xt("LCP"),n=Bt(e,i,ki,t.reportAllChanges),Tr(function(){i.value=performance.now()-u.timeStamp,mr[i.id]=!0,n(!0)})})}})},Gi=[800,1800],Ro=function e(t){document.prerendering?ze(function(){return e(t)}):document.readyState!=="complete"?addEventListener("load",function(){return e(t)},!0):setTimeout(t,0)},bo=function(e,t){t=t||{};var n=xt("TTFB"),r=Bt(e,n,Gi,t.reportAllChanges);Ro(function(){var i=pr();i&&(n.value=Math.max(i.responseStart-vn(),0),n.entries=[i],r(!0),Se(function(){n=xt("TTFB",0),(r=Bt(e,n,Gi,t.reportAllChanges))(!0)}))})},$e={passive:!0,capture:!0},Oo=new Date,Hi=function(e,t){ce||(ce=t,We=e,Mi=new Date,Ki(removeEventListener),Fi())},Fi=function(){if(We>=0&&We<Mi-Oo){var e={entryType:"first-input",name:ce.type,target:ce.target,cancelable:ce.cancelable,startTime:ce.timeStamp,processingStart:ce.timeStamp+We};gn.forEach(function(t){t(e)}),gn=[]}},Po=function(e){if(e.cancelable){var t=(e.timeStamp>1e12?new Date:performance.now())-e.timeStamp;e.type=="pointerdown"?function(n,r){var i=function(){Hi(n,r),o()},s=function(){o()},o=function(){removeEventListener("pointerup",i,$e),removeEventListener("pointercancel",s,$e)};addEventListener("pointerup",i,$e),addEventListener("pointercancel",s,$e)}(t,e):Hi(t,e)}},Ki=function(e){["mousedown","keydown","touchstart","pointerdown"].forEach(function(t){return e(t,Po,$e)})},ji=[100,300],Mo=function(e,t){t=t||{},ze(function(){var n,r=Sr(),i=xt("FID"),s=function(u){u.startTime<r.firstHiddenTime&&(i.value=u.processingStart-u.startTime,i.entries.push(u),n(!0))},o=function(u){u.forEach(s)},a=Ce("first-input",o);n=Bt(e,i,ji,t.reportAllChanges),a&&(Ye(Rn(function(){o(a.takeRecords()),a.disconnect()})),Se(function(){var u;i=xt("FID"),n=Bt(e,i,ji,t.reportAllChanges),gn=[],We=-1,ce=null,Ki(addEventListener),u=s,gn.push(u),Fi()}))})};class Mn{constructor(t,n){this.pushMeasurement=t,this.webVitalConfig=n}initialize(){Object.entries(Mn.mapping).forEach(([t,n])=>{var r;n(i=>{this.pushMeasurement({type:"web-vitals",values:{[t]:i.value}})},{reportAllChanges:(r=this.webVitalConfig)===null||r===void 0?void 0:r.reportAllChanges})})}}Mn.mapping={cls:po,fcp:Ii,fid:Mo,inp:go,lcp:vo,ttfb:bo};var Ar,Wi,gr,Ue=function(){var e=self.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0];if(e&&e.responseStart>0&&e.responseStart<performance.now())return e},Xe=function(e){if(document.readyState==="loading")return"loading";var t=Ue();if(t){if(e<t.domInteractive)return"loading";if(t.domContentLoadedEventStart===0||e<t.domContentLoadedEventStart)return"dom-interactive";if(t.domComplete===0||e<t.domComplete)return"dom-content-loaded"}return"complete"},No=function(e){var t=e.nodeName;return e.nodeType===1?t.toLowerCase():t.toUpperCase().replace(/^#/,"")},Nn=function(e,t){var n="";try{for(;e&&e.nodeType!==9;){var r=e,i=r.id?"#"+r.id:No(r)+(r.classList&&r.classList.value&&r.classList.value.trim()&&r.classList.value.trim().length?"."+r.classList.value.trim().replace(/\s+/g,"."):"");if(n.length+i.length>(t||100)-1)return n||i;if(n=n?i+">"+n:i,r.id)break;e=r.parentNode}}catch{}return n},Yi=-1,zi=function(){return Yi},he=function(e){addEventListener("pageshow",function(t){t.persisted&&(Yi=t.timeStamp,e(t))},!0)},Ln=function(){var e=Ue();return e&&e.activationStart||0},kt=function(e,t){var n=Ue(),r="navigate";return zi()>=0?r="back-forward-cache":n&&(document.prerendering||Ln()>0?r="prerender":document.wasDiscarded?r="restore":n.type&&(r=n.type.replace(/_/g,"-"))),{name:e,value:t===void 0?-1:t,rating:"good",delta:0,entries:[],id:"v4-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12),navigationType:r}},me=function(e,t,n){try{if(PerformanceObserver.supportedEntryTypes.includes(e)){var r=new PerformanceObserver(function(i){Promise.resolve().then(function(){t(i.getEntries())})});return r.observe(Object.assign({type:e,buffered:!0},n||{})),r}}catch{}},Gt=function(e,t,n,r){var i,s;return function(o){t.value>=0&&(o||r)&&((s=t.value-(i||0))||i===void 0)&&(i=t.value,t.delta=s,t.rating=function(a,u){return a>u[1]?"poor":a>u[0]?"needs-improvement":"good"}(t.value,n),e(t))}},vr=function(e){requestAnimationFrame(function(){return requestAnimationFrame(function(){return e()})})},Je=function(e){document.addEventListener("visibilitychange",function(){document.visibilityState==="hidden"&&e()})},yn=function(e){var t=!1;return function(){t||(e(),t=!0)}},we=-1,$i=function(){return document.visibilityState!=="hidden"||document.prerendering?1/0:0},Cn=function(e){document.visibilityState==="hidden"&&we>-1&&(we=e.type==="visibilitychange"?e.timeStamp:0,Lo())},Xi=function(){addEventListener("visibilitychange",Cn,!0),addEventListener("prerenderingchange",Cn,!0)},Lo=function(){removeEventListener("visibilitychange",Cn,!0),removeEventListener("prerenderingchange",Cn,!0)},Rr=function(){return we<0&&(we=$i(),Xi(),he(function(){setTimeout(function(){we=$i(),Xi()},0)})),{get firstHiddenTime(){return we}}},Qe=function(e){document.prerendering?addEventListener("prerenderingchange",function(){return e()},!0):e()},Ji=[1800,3e3],Qi=function(e,t){t=t||{},Qe(function(){var n,r=Rr(),i=kt("FCP"),s=me("paint",function(o){o.forEach(function(a){a.name==="first-contentful-paint"&&(s.disconnect(),a.startTime<r.firstHiddenTime&&(i.value=Math.max(a.startTime-Ln(),0),i.entries.push(a),n(!0)))})});s&&(n=Gt(e,i,Ji,t.reportAllChanges),he(function(o){i=kt("FCP"),n=Gt(e,i,Ji,t.reportAllChanges),vr(function(){i.value=performance.now()-o.timeStamp,n(!0)})}))})},Zi=[.1,.25],yo=function(e,t){(function(n,r){r=r||{},Qi(yn(function(){var i,s=kt("CLS",0),o=0,a=[],u=function(p){p.forEach(function(S){if(!S.hadRecentInput){var C=a[0],U=a[a.length-1];o&&S.startTime-U.startTime<1e3&&S.startTime-C.startTime<5e3?(o+=S.value,a.push(S)):(o=S.value,a=[S])}}),o>s.value&&(s.value=o,s.entries=a,i())},_=me("layout-shift",u);_&&(i=Gt(n,s,Zi,r.reportAllChanges),Je(function(){u(_.takeRecords()),i(!0)}),he(function(){o=0,s=kt("CLS",0),i=Gt(n,s,Zi,r.reportAllChanges),vr(function(){return i()})}),setTimeout(i,0))}))})(function(n){var r=function(i){var s,o={};if(i.entries.length){var a=i.entries.reduce(function(_,p){return _&&_.value>p.value?_:p});if(a&&a.sources&&a.sources.length){var u=(s=a.sources).find(function(_){return _.node&&_.node.nodeType===1})||s[0];u&&(o={largestShiftTarget:Nn(u.node),largestShiftTime:a.startTime,largestShiftValue:a.value,largestShiftSource:u,largestShiftEntry:a,loadState:Xe(a.startTime)})}}return Object.assign(i,{attribution:o})}(n);e(r)},t)},Co=function(e,t){Qi(function(n){var r=function(i){var s={timeToFirstByte:0,firstByteToFCP:i.value,loadState:Xe(zi())};if(i.entries.length){var o=Ue(),a=i.entries[i.entries.length-1];if(o){var u=o.activationStart||0,_=Math.max(0,o.responseStart-u);s={timeToFirstByte:_,firstByteToFCP:i.value-_,loadState:Xe(i.entries[0].startTime),navigationEntry:o,fcpEntry:a}}}return Object.assign(i,{attribution:s})}(n);e(r)},t)},qi=0,br=1/0,In=0,Io=function(e){e.forEach(function(t){t.interactionId&&(br=Math.min(br,t.interactionId),In=Math.max(In,t.interactionId),qi=In?(In-br)/7+1:0)})},ts=function(){return Ar?qi:performance.interactionCount||0},Uo=function(){"interactionCount"in performance||Ar||(Ar=me("event",Io,{type:"event",buffered:!0,durationThreshold:0}))},Xt=[],Ze=new Map,es=0,wo=function(){var e=Math.min(Xt.length-1,Math.floor((ts()-es)/50));return Xt[e]},ns=[],Do=function(e){if(ns.forEach(function(i){return i(e)}),e.interactionId||e.entryType==="first-input"){var t=Xt[Xt.length-1],n=Ze.get(e.interactionId);if(n||Xt.length<10||e.duration>t.latency){if(n)e.duration>n.latency?(n.entries=[e],n.latency=e.duration):e.duration===n.latency&&e.startTime===n.entries[0].startTime&&n.entries.push(e);else{var r={id:e.interactionId,latency:e.duration,entries:[e]};Ze.set(r.id,r),Xt.push(r)}Xt.sort(function(i,s){return s.latency-i.latency}),Xt.length>10&&Xt.splice(10).forEach(function(i){return Ze.delete(i.id)})}}},Or=function(e){var t=self.requestIdleCallback||self.setTimeout,n=-1;return e=yn(e),document.visibilityState==="hidden"?e():(n=t(e),Je(e)),n},rs=[200,500],Vo=function(e,t){"PerformanceEventTiming"in self&&"interactionId"in PerformanceEventTiming.prototype&&(t=t||{},Qe(function(){var n;Uo();var r,i=kt("INP"),s=function(a){Or(function(){a.forEach(Do);var u=wo();u&&u.latency!==i.value&&(i.value=u.latency,i.entries=u.entries,r())})},o=me("event",s,{durationThreshold:(n=t.durationThreshold)!==null&&n!==void 0?n:40});r=Gt(e,i,rs,t.reportAllChanges),o&&(o.observe({type:"first-input",buffered:!0}),Je(function(){s(o.takeRecords()),r(!0)}),he(function(){es=ts(),Xt.length=0,Ze.clear(),i=kt("INP"),r=Gt(e,i,rs,t.reportAllChanges)}))}))},De=[],le=[],Pr=new WeakMap,Ve=new Map,Mr=-1,xo=function(e){De=De.concat(e),is()},is=function(){Mr<0&&(Mr=Or(Bo))},Bo=function(){Ve.size>10&&Ve.forEach(function(a,u){Ze.has(u)||Ve.delete(u)});var e=Xt.map(function(a){return Pr.get(a.entries[0])}),t=le.length-50;le=le.filter(function(a,u){return u>=t||e.includes(a)});for(var n=new Set,r=0;r<le.length;r++){var i=le[r];os(i.startTime,i.processingEnd).forEach(function(a){n.add(a)})}for(var s=0;s<50;s++){var o=De[De.length-1-s];if(!o||o.startTime<gr)break;n.add(o)}De=Array.from(n),Mr=-1};ns.push(function(e){e.interactionId&&e.target&&!Ve.has(e.interactionId)&&Ve.set(e.interactionId,e.target)},function(e){var t,n=e.startTime+e.duration;gr=Math.max(gr,e.processingEnd);for(var r=le.length-1;r>=0;r--){var i=le[r];if(Math.abs(n-i.renderTime)<=8){(t=i).startTime=Math.min(e.startTime,t.startTime),t.processingStart=Math.min(e.processingStart,t.processingStart),t.processingEnd=Math.max(e.processingEnd,t.processingEnd),t.entries.push(e);break}}t||(t={startTime:e.startTime,processingStart:e.processingStart,processingEnd:e.processingEnd,renderTime:n,entries:[e]},le.push(t)),(e.interactionId||e.entryType==="first-input")&&Pr.set(e,t),is()});var de,qe,ss,Un,os=function(e,t){for(var n,r=[],i=0;n=De[i];i++)if(!(n.startTime+n.duration<e)){if(n.startTime>t)break;r.push(n)}return r},ko=function(e,t){Wi||(Wi=me("long-animation-frame",xo)),Vo(function(n){var r=function(i){var s=i.entries[0],o=Pr.get(s),a=s.processingStart,u=o.processingEnd,_=o.entries.sort(function(k,J){return k.processingStart-J.processingStart}),p=os(s.startTime,u),S=i.entries.find(function(k){return k.target}),C=S&&S.target||Ve.get(s.interactionId),U=[s.startTime+s.duration,u].concat(p.map(function(k){return k.startTime+k.duration})),D=Math.max.apply(Math,U),B={interactionTarget:Nn(C),interactionTargetElement:C,interactionType:s.name.startsWith("key")?"keyboard":"pointer",interactionTime:s.startTime,nextPaintTime:D,processedEventEntries:_,longAnimationFrameEntries:p,inputDelay:a-s.startTime,processingDuration:u-a,presentationDelay:Math.max(D-u,0),loadState:Xe(s.startTime)};return Object.assign(i,{attribution:B})}(n);e(r)},t)},as=[2500,4e3],Nr={},Go=function(e,t){(function(n,r){r=r||{},Qe(function(){var i,s=Rr(),o=kt("LCP"),a=function(p){r.reportAllChanges||(p=p.slice(-1)),p.forEach(function(S){S.startTime<s.firstHiddenTime&&(o.value=Math.max(S.startTime-Ln(),0),o.entries=[S],i())})},u=me("largest-contentful-paint",a);if(u){i=Gt(n,o,as,r.reportAllChanges);var _=yn(function(){Nr[o.id]||(a(u.takeRecords()),u.disconnect(),Nr[o.id]=!0,i(!0))});["keydown","click"].forEach(function(p){addEventListener(p,function(){return Or(_)},!0)}),Je(_),he(function(p){o=kt("LCP"),i=Gt(n,o,as,r.reportAllChanges),vr(function(){o.value=performance.now()-p.timeStamp,Nr[o.id]=!0,i(!0)})})}})})(function(n){var r=function(i){var s={timeToFirstByte:0,resourceLoadDelay:0,resourceLoadDuration:0,elementRenderDelay:i.value};if(i.entries.length){var o=Ue();if(o){var a=o.activationStart||0,u=i.entries[i.entries.length-1],_=u.url&&performance.getEntriesByType("resource").filter(function(D){return D.name===u.url})[0],p=Math.max(0,o.responseStart-a),S=Math.max(p,_?(_.requestStart||_.startTime)-a:0),C=Math.max(S,_?_.responseEnd-a:0),U=Math.max(C,u.startTime-a);s={element:Nn(u.element),timeToFirstByte:p,resourceLoadDelay:S-p,resourceLoadDuration:C-S,elementRenderDelay:U-C,navigationEntry:o,lcpEntry:u},u.url&&(s.url=u.url),_&&(s.lcpResourceEntry=_)}}return Object.assign(i,{attribution:s})}(n);e(r)},t)},us=[800,1800],Ho=function e(t){document.prerendering?Qe(function(){return e(t)}):document.readyState!=="complete"?addEventListener("load",function(){return e(t)},!0):setTimeout(t,0)},Fo=function(e,t){t=t||{};var n=kt("TTFB"),r=Gt(e,n,us,t.reportAllChanges);Ho(function(){var i=Ue();i&&(n.value=Math.max(i.responseStart-Ln(),0),n.entries=[i],r(!0),he(function(){n=kt("TTFB",0),(r=Gt(e,n,us,t.reportAllChanges))(!0)}))})},Ko=function(e,t){Fo(function(n){var r=function(i){var s={waitingDuration:0,cacheDuration:0,dnsDuration:0,connectionDuration:0,requestDuration:0};if(i.entries.length){var o=i.entries[0],a=o.activationStart||0,u=Math.max((o.workerStart||o.fetchStart)-a,0),_=Math.max(o.domainLookupStart-a,0),p=Math.max(o.connectStart-a,0),S=Math.max(o.connectEnd-a,0);s={waitingDuration:u,cacheDuration:_-u,dnsDuration:p-_,connectionDuration:S-p,requestDuration:i.value-S,navigationEntry:o}}return Object.assign(i,{attribution:s})}(n);e(r)},t)},tn={passive:!0,capture:!0},jo=new Date,cs=function(e,t){de||(de=t,qe=e,ss=new Date,ds(removeEventListener),ls())},ls=function(){if(qe>=0&&qe<ss-jo){var e={entryType:"first-input",name:de.type,target:de.target,cancelable:de.cancelable,startTime:de.timeStamp,processingStart:de.timeStamp+qe};Un.forEach(function(t){t(e)}),Un=[]}},Wo=function(e){if(e.cancelable){var t=(e.timeStamp>1e12?new Date:performance.now())-e.timeStamp;e.type=="pointerdown"?function(n,r){var i=function(){cs(n,r),o()},s=function(){o()},o=function(){removeEventListener("pointerup",i,tn),removeEventListener("pointercancel",s,tn)};addEventListener("pointerup",i,tn),addEventListener("pointercancel",s,tn)}(t,e):cs(t,e)}},ds=function(e){["mousedown","keydown","touchstart","pointerdown"].forEach(function(t){return e(t,Wo,tn)})},_s=[100,300],Yo=function(e,t){t=t||{},Qe(function(){var n,r=Rr(),i=kt("FID"),s=function(u){u.startTime<r.firstHiddenTime&&(i.value=u.processingStart-u.startTime,i.entries.push(u),n(!0))},o=function(u){u.forEach(s)},a=me("first-input",o);n=Gt(e,i,_s,t.reportAllChanges),a&&(Je(yn(function(){o(a.takeRecords()),a.disconnect()})),he(function(){var u;i=kt("FID"),n=Gt(e,i,_s,t.reportAllChanges),Un=[],qe=-1,de=null,ds(addEventListener),u=s,Un.push(u),ls()}))})},zo=function(e,t){Yo(function(n){var r=function(i){var s=i.entries[0],o={eventTarget:Nn(s.target),eventType:s.name,eventTime:s.startTime,eventEntry:s,loadState:Xe(s.startTime)};return Object.assign(i,{attribution:o})}(n);e(r)},t)};const Ut="unknown",Lr="com.grafana.faro.lastNavigationId",wn="load_state",Es="time_to_first_byte";class $o{constructor(t,n){this.corePushMeasurement=t,this.webVitalConfig=n}initialize(){this.measureCLS(),this.measureFCP(),this.measureFID(),this.measureINP(),this.measureLCP(),this.measureTTFB()}measureCLS(){var t;yo(n=>{const{loadState:r,largestShiftValue:i,largestShiftTime:s,largestShiftTarget:o}=n.attribution,a=this.buildInitialValues(n);this.addIfPresent(a,"largest_shift_value",i),this.addIfPresent(a,"largest_shift_time",s);const u=this.buildInitialContext(n);this.addIfPresent(u,wn,r),this.addIfPresent(u,"largest_shift_target",o),this.pushMeasurement(a,u)},{reportAllChanges:(t=this.webVitalConfig)===null||t===void 0?void 0:t.reportAllChanges})}measureFCP(){var t;Co(n=>{const{firstByteToFCP:r,timeToFirstByte:i,loadState:s}=n.attribution,o=this.buildInitialValues(n);this.addIfPresent(o,"first_byte_to_fcp",r),this.addIfPresent(o,Es,i);const a=this.buildInitialContext(n);this.addIfPresent(a,wn,s),this.pushMeasurement(o,a)},{reportAllChanges:(t=this.webVitalConfig)===null||t===void 0?void 0:t.reportAllChanges})}measureFID(){var t;zo(n=>{const{eventTime:r,eventTarget:i,eventType:s,loadState:o}=n.attribution,a=this.buildInitialValues(n);this.addIfPresent(a,"event_time",r);const u=this.buildInitialContext(n);this.addIfPresent(u,"event_target",i),this.addIfPresent(u,"event_type",s),this.addIfPresent(u,wn,o),this.pushMeasurement(a,u)},{reportAllChanges:(t=this.webVitalConfig)===null||t===void 0?void 0:t.reportAllChanges})}measureINP(){var t;ko(n=>{const{interactionTime:r,presentationDelay:i,inputDelay:s,processingDuration:o,nextPaintTime:a,loadState:u,interactionTarget:_,interactionType:p}=n.attribution,S=this.buildInitialValues(n);this.addIfPresent(S,"interaction_time",r),this.addIfPresent(S,"presentation_delay",i),this.addIfPresent(S,"input_delay",s),this.addIfPresent(S,"processing_duration",o),this.addIfPresent(S,"next_paint_time",a);const C=this.buildInitialContext(n);this.addIfPresent(C,wn,u),this.addIfPresent(C,"interaction_target",_),this.addIfPresent(C,"interaction_type",p),this.pushMeasurement(S,C)},{reportAllChanges:(t=this.webVitalConfig)===null||t===void 0?void 0:t.reportAllChanges})}measureLCP(){var t;Go(n=>{const{elementRenderDelay:r,resourceLoadDelay:i,resourceLoadDuration:s,timeToFirstByte:o,element:a}=n.attribution,u=this.buildInitialValues(n);this.addIfPresent(u,"element_render_delay",r),this.addIfPresent(u,"resource_load_delay",i),this.addIfPresent(u,"resource_load_duration",s),this.addIfPresent(u,Es,o);const _=this.buildInitialContext(n);this.addIfPresent(_,"element",a),this.pushMeasurement(u,_)},{reportAllChanges:(t=this.webVitalConfig)===null||t===void 0?void 0:t.reportAllChanges})}measureTTFB(){var t;Ko(n=>{const{dnsDuration:r,connectionDuration:i,requestDuration:s,waitingDuration:o,cacheDuration:a}=n.attribution,u=this.buildInitialValues(n);this.addIfPresent(u,"dns_duration",r),this.addIfPresent(u,"connection_duration",i),this.addIfPresent(u,"request_duration",s),this.addIfPresent(u,"waiting_duration",o),this.addIfPresent(u,"cache_duration",a);const _=this.buildInitialContext(n);this.pushMeasurement(u,_)},{reportAllChanges:(t=this.webVitalConfig)===null||t===void 0?void 0:t.reportAllChanges})}buildInitialValues(t){return{[t.name.toLowerCase()]:t.value,delta:t.delta}}buildInitialContext(t){var n;const r=(n=ee(Lr,yt.session))!==null&&n!==void 0?n:Ut;return{id:t.id,rating:t.rating,navigation_type:t.navigationType,navigation_entry_id:r}}pushMeasurement(t,n){this.corePushMeasurement({type:"web-vitals",values:t},{context:n})}addIfPresent(t,n,r){r&&(t[n]=r)}}class fs extends Zt{constructor(){super(...arguments),this.name="@grafana/faro-web-sdk:instrumentation-web-vitals",this.version=R}initialize(){this.logDebug("Initializing"),this.intializeWebVitalsInstrumentation().initialize()}intializeWebVitalsInstrumentation(){var t,n,r;return((t=this.config)===null||t===void 0?void 0:t.trackWebVitalsAttribution)===!1||((r=(n=this.config)===null||n===void 0?void 0:n.webVitalsInstrumentation)===null||r===void 0?void 0:r.trackAttribution)===!1?new Mn(this.api.pushMeasurement,this.config.webVitalsInstrumentation):new $o(this.api.pushMeasurement,this.config.webVitalsInstrumentation)}}function Xo(e){var t,n,r,i;return{id:(i=(r=(n=(t=st.P.config)===null||t===void 0?void 0:t.sessionTracking)===null||n===void 0?void 0:n.generateSessionId)===null||r===void 0?void 0:r.call(n))!==null&&i!==void 0?i:Yt(),attributes:e}}class ps extends Zt{constructor(){super(...arguments),this.name="@grafana/faro-web-sdk:instrumentation-session",this.version=R}sendSessionStartEvent(t){var n,r;const i=t.session;if(i&&i.id!==((n=this.notifiedSession)===null||n===void 0?void 0:n.id)){if(this.notifiedSession&&this.notifiedSession.id===((r=i.attributes)===null||r===void 0?void 0:r.previousSession)){this.api.pushEvent(ni,{},void 0,{skipDedupe:!0}),this.notifiedSession=i;return}this.notifiedSession=i,this.api.pushEvent(Fe,{},void 0,{skipDedupe:!0})}}createInitialSession(t,n){var r,i,s,o,a,u;let _=t.fetchUserSession();if(n.persistent&&n.maxSessionPersistenceTime&&_){const C=Z();_.lastActivity<C-n.maxSessionPersistenceTime&&(Vt.removeUserSession(),_=null)}let p,S;if(zn(_)){const C=_?.sessionId;S=Ke({sessionId:C,isSampled:_.isSampled||!1,started:_?.started});const U=_?.sessionMeta,D=Object.assign(Object.assign({},(r=n.session)===null||r===void 0?void 0:r.overrides),U?.overrides);S.sessionMeta=Object.assign(Object.assign({},n.session),{id:C,attributes:Object.assign(Object.assign(Object.assign({},(i=n.session)===null||i===void 0?void 0:i.attributes),U?.attributes),{isSampled:S.isSampled.toString()}),overrides:D}),p=pn}else{const C=(o=(s=n.session)===null||s===void 0?void 0:s.id)!==null&&o!==void 0?o:Xo().id;S=Ke({sessionId:C,isSampled:Tn()});const U=(a=n.session)===null||a===void 0?void 0:a.overrides;S.sessionMeta=Object.assign({id:C,attributes:Object.assign({isSampled:S.isSampled.toString()},(u=n.session)===null||u===void 0?void 0:u.attributes)},U?{overrides:U}:{}),p=Fe}return{initialSession:S,lifecycleType:p}}registerBeforeSendHook(t){var n;const{updateSession:r}=new t;(n=this.transports)===null||n===void 0||n.addBeforeSendHooks(i=>{var s,o,a;r();const u=(s=i.meta.session)===null||s===void 0?void 0:s.attributes;if(u&&u?.isSampled==="true"){let _=JSON.parse(JSON.stringify(i));const p=(o=_.meta.session)===null||o===void 0?void 0:o.attributes;return p==null||delete p.isSampled,Object.keys(p??{}).length===0&&((a=_.meta.session)===null||a===void 0||delete a.attributes),_}return null})}initialize(){this.logDebug("init session instrumentation");const t=this.config.sessionTracking;if(t?.enabled){const n=Jn(t);this.registerBeforeSendHook(n);const{initialSession:r,lifecycleType:i}=this.createInitialSession(n,t);n.storeUserSession(r);const s=r.sessionMeta;this.notifiedSession=s,this.api.setSession(s),i===Fe&&this.api.pushEvent(Fe,{},void 0,{skipDedupe:!0}),i===pn&&this.api.pushEvent(pn,{},void 0,{skipDedupe:!0})}this.metas.addListener(this.sendSessionStartEvent.bind(this))}}class Jt{constructor(){this.subscribers=[]}subscribe(t){return this.subscribers.push(t),{unsubscribe:()=>this.unsubscribe(t)}}unsubscribe(t){this.subscribers=this.subscribers.filter(n=>n!==t)}notify(t){this.subscribers.forEach(n=>n(t))}first(){const t=new Jt,n=s=>{t.notify(s),r.unsubscribe()},r=this.subscribe(n),i=t.unsubscribe.bind(t);return this.withUnsubscribeOverride(t,i,n)}takeWhile(t){const n=new Jt,r=s=>{t(s)?n.notify(s):n.unsubscribe(r)};this.subscribe(r);const i=n.unsubscribe.bind(n);return this.withUnsubscribeOverride(n,i,r)}filter(t){const n=new Jt,r=s=>{t(s)&&n.notify(s)};this.subscribe(r);const i=n.unsubscribe.bind(n);return this.withUnsubscribeOverride(n,i,r)}merge(...t){const n=new Jt,r=[];t.forEach(s=>{const o=s.subscribe(a=>{n.notify(a)});r.push(o)});const i=n.unsubscribeAll.bind(n);return n.unsubscribe=()=>{r.forEach(s=>s.unsubscribe()),i()},n}withUnsubscribeOverride(t,n,r){return t.unsubscribe=i=>{n(i),this.unsubscribe(r)},t}unsubscribeAll(){this.subscribers=[]}}const Ae="user-action-start",yr="user-action-end",Cr="user-action-cancel",Ir="user-action-halt";function Jo({internalLogger:e,config:t,metas:n,transports:r,tracesApi:i,actionBuffer:s,getMessage:o}){let a=null;return{pushEvent:(_,p,S,{skipDedupe:C,spanContext:U,timestampOverwriteMs:D,customPayloadTransformer:B=k=>k}={})=>{try{const k=Kt(p),J={meta:n.value,payload:B({name:_,domain:S??t.eventDomain,attributes:It(k)?void 0:k,timestamp:D?Pt(D):Wt(),trace:U?{trace_id:U.traceId,span_id:U.spanId}:i.getTraceContext()}),type:c.EVENT},it={name:J.payload.name,attributes:J.payload.attributes,domain:J.payload.domain};if(!C&&t.dedupe&&!L(a)&&ne(it,a)){e.debug(`Skipping event push because it is the same as the last one
`,J.payload);return}a=it,e.debug(`Pushing event
`,J);const Ot=o();Ot&&Ot.type===Ae?s.addItem(J):r.execute(J)}catch(k){e.error("Error pushing event",k)}}}}function Qo(e,t){return e.some(n=>H(n)?t.includes(n):!!t.match(n))}let _e;function Zo({internalLogger:e,config:t,metas:n,transports:r,tracesApi:i,actionBuffer:s,getMessage:o}){var a;e.debug("Initializing exceptions API");let u=null;_e=(a=t.parseStacktrace)!==null&&a!==void 0?a:_e;const _=D=>{e.debug("Changing stacktrace parser"),_e=D??_e},p=()=>_e,{ignoreErrors:S=[],preserveOriginalError:C}=t,U=(D,{skipDedupe:B,stackFrames:k,type:J,context:it,spanContext:Ot,timestampOverwriteMs:mt,originalError:et}={})=>{if(!ta(S,et??D))try{const z=Kt(Object.assign(Object.assign({},qo(et??D)),it??{})),ut={meta:n.value,payload:Object.assign(Object.assign({type:J||D.name||rr,value:D.message,timestamp:mt?Pt(mt):Wt(),trace:Ot?{trace_id:Ot.traceId,span_id:Ot.spanId}:i.getTraceContext()},It(z)?{}:{context:z}),C?{originalError:et}:{}),type:c.EXCEPTION};k=k??(D.stack?_e?.(D).frames:void 0),k?.length&&(ut.payload.stacktrace={frames:k});const Ht={type:ut.payload.type,value:ut.payload.value,stackTrace:ut.payload.stacktrace,context:ut.payload.context};if(!B&&t.dedupe&&!L(u)&&ne(Ht,u)){e.debug(`Skipping error push because it is the same as the last one
`,ut.payload);return}u=Ht,e.debug(`Pushing exception
`,ut);const ae=o();ae&&ae.type===Ae?s.addItem(ut):r.execute(ut)}catch(z){e.error("Error pushing event",z)}};return _(t.parseStacktrace),{changeStacktraceParser:_,getStacktraceParser:p,pushError:U}}function qo(e){let t=e.cause;return lt(t)?t=e.cause.toString():t!==null&&(K(e.cause)||G(e.cause))?t=Ft(e.cause):t!=null&&(t=e.cause.toString()),t==null?{}:{cause:t}}function ta(e,t){const{message:n,name:r,stack:i}=t;return Qo(e,n+" "+r+" "+i)}function ea({internalLogger:e,config:t,metas:n,transports:r,tracesApi:i,actionBuffer:s,getMessage:o}){var a;e.debug("Initializing logs API");let u=null;const _=(a=t.logArgsSerializer)!==null&&a!==void 0?a:ye;return{pushLog:(S,{context:C,level:U,skipDedupe:D,spanContext:B,timestampOverwriteMs:k}={})=>{try{const J=Kt(C),it={type:c.LOG,payload:{message:_(S),level:U??$t.Ic,context:It(J)?void 0:J,timestamp:k?Pt(k):Wt(),trace:B?{trace_id:B.traceId,span_id:B.spanId}:i.getTraceContext()},meta:n.value},Ot={message:it.payload.message,level:it.payload.level,context:it.payload.context};if(!D&&t.dedupe&&!L(u)&&ne(Ot,u)){e.debug(`Skipping log push because it is the same as the last one
`,it.payload);return}u=Ot,e.debug(`Pushing log
`,it);const mt=o();mt&&mt.type===Ae?s.addItem(it):r.execute(it)}catch(J){e.error(`Error pushing log
`,J)}}}}function na({internalLogger:e,config:t,metas:n,transports:r,tracesApi:i,actionBuffer:s,getMessage:o}){e.debug("Initializing measurements API");let a=null;return{pushMeasurement:(_,{skipDedupe:p,context:S,spanContext:C,timestampOverwriteMs:U}={})=>{try{const D=Kt(S),B={type:c.MEASUREMENT,payload:Object.assign(Object.assign({},_),{trace:C?{trace_id:C.traceId,span_id:C.spanId}:i.getTraceContext(),timestamp:U?Pt(U):Wt(),context:It(D)?void 0:D}),meta:n.value},k={type:B.payload.type,values:B.payload.values,context:B.payload.context};if(!p&&t.dedupe&&!L(a)&&ne(k,a)){e.debug(`Skipping measurement push because it is the same as the last one
`,B.payload);return}a=k,e.debug(`Pushing measurement
`,B);const J=o();J&&J.type===Ae?s.addItem(B):r.execute(B)}catch(D){e.error(`Error pushing measurement
`,D)}}}}function ra({internalLogger:e,metas:t}){e.debug("Initializing meta API");let n,r,i,s;const o=U=>{r&&t.remove(r),r={user:U},t.add(r)},a=(U,D)=>{var B;const k=D?.overrides,J=k?{overrides:Object.assign(Object.assign({},(B=n?.session)===null||B===void 0?void 0:B.overrides),k)}:{};n&&t.remove(n),n={session:Object.assign(Object.assign({},It(U)?void 0:U),J)},t.add(n)},u=()=>t.value.session,_=(U,D)=>{var B;if(D?.overrides&&a(u(),{overrides:D.overrides}),((B=i?.view)===null||B===void 0?void 0:B.name)===U?.name)return;const k=i;i={view:U},t.add(i),k&&t.remove(k)},p=()=>t.value.view,S=U=>{var D;const B=H(U)?Object.assign(Object.assign({},(D=s?.page)!==null&&D!==void 0?D:C()),{id:U}):U;s&&t.remove(s),s={page:B},t.add(s)},C=()=>t.value.page;return{setUser:o,resetUser:o,setSession:a,resetSession:a,getSession:u,setView:_,getView:p,setPage:S,getPage:C}}function ia(e,t,n,r,i){t.debug("Initializing traces API");let s;return{getOTEL:()=>s,getTraceContext:()=>{const S=s?.trace.getSpanContext(s.context.active());return S?{trace_id:S.traceId,span_id:S.spanId}:void 0},initOTEL:(S,C)=>{t.debug("Initializing OpenTelemetry"),s={trace:S,context:C}},isOTELInitialized:()=>!!s,pushTraces:S=>{try{const C={type:c.TRACE,payload:S,meta:r.value};t.debug(`Pushing trace
`,C),i.execute(C)}catch(C){t.error(`Error pushing trace
`,C)}}}}class sa{constructor(){this.buffer=[]}addItem(t){this.buffer.push(t)}flushBuffer(t){if(w(t))for(const n of this.buffer)t(n);this.buffer.length=0}size(){return this.buffer.length}}function oa({apiMessageBus:e,transports:t,config:n}){const r=new sa,i=n.trackUserActionsExcludeItem;let s;return e.subscribe(a=>{if(Ae===a.type||Ir===a.type){s=a;return}if(a.type===yr){const{id:u,name:_}=a;r.flushBuffer(p=>{if(aa(p,i)){t.execute(p);return}const S=Object.assign(Object.assign({},p),{payload:Object.assign(Object.assign({},p.payload),{action:{parentId:u,name:_}})});t.execute(S)}),s=void 0;return}a.type===Cr&&(s=void 0,r.flushBuffer(u=>{t.execute(u)}))}),{actionBuffer:r,getMessage:()=>s}}function aa(e,t){return t?.(e)||e.type===c.MEASUREMENT&&e.payload.type==="web-vitals"}const xe=new Jt;function ua(e,t,n,r,i){t.debug("Initializing API");const{actionBuffer:s,getMessage:o}=oa({apiMessageBus:xe,transports:i,config:n}),a=ia(e,t,n,r,i),u={unpatchedConsole:e,internalLogger:t,config:n,metas:r,transports:i,tracesApi:a,actionBuffer:s,getMessage:o};return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},a),Zo(u)),ra(u)),ea(u)),na(u)),Jo(u))}const ca="resource-entry",Ts="http-request-start",Ss="http-request-end",la="dom-mutation",da="faroUserActionName",_a="data-faro-user-action-name",Ea="faroApiCall";function fa(){const e=new Jt;return new MutationObserver((n,r)=>{e.notify({type:la})}).observe(document,{attributes:!0,childList:!0,subtree:!0,characterData:!0}),e}function pa(){return st.P.transports.transports.flatMap(e=>e.getIgnoreUrls())}function Dn(e=""){return pa().some(t=>e&&e.match(t)!=null)}function hs(e){if(H(e))return e;if(e instanceof URL)return e.href;if(!It(e)&&w(e?.toString))return e.toString()}const Ur="fetch",Vn="xhr";function Ta(){const e=new Jt;function t(r){e.notify({type:Ts,request:r})}function n(r){e.notify({type:Ss,request:r})}return ha({onRequestStart:t,onRequestEnd:n}),Sa({onRequestStart:t,onRequestEnd:n}),e}function Sa({onRequestStart:e,onRequestEnd:t}){const n=XMLHttpRequest.prototype.open;XMLHttpRequest.prototype.open=function(){const r=arguments[1],i=Dn(r),s=arguments[0],o=Yt();this.addEventListener("loadstart",function(){i||e({url:r,method:s,requestId:o,apiType:Vn})}),this.addEventListener("load",function(){i||t({url:r,method:s,requestId:o,apiType:Vn})}),this.addEventListener("error",function(){i||t({url:r,method:s,requestId:o,apiType:Vn})}),this.addEventListener("abort",function(){i||t({url:r,method:s,requestId:o,apiType:Vn})}),n.apply(this,arguments)}}function ha({onRequestEnd:e,onRequestStart:t}){const n=window.fetch;window.fetch=function(){var r,i;const s=(r=hs(arguments[0]))!==null&&r!==void 0?r:"",o=Dn(s),a=((i=arguments[1])!==null&&i!==void 0?i:{}).method,u=Yt();return o||t({url:s,method:a,requestId:u,apiType:Ur}),n.apply(this,arguments).then(_=>(o||e({url:s,method:a,requestId:u,apiType:Ur}),_)).catch(_=>{throw o||e({url:s,method:a,requestId:u,apiType:Ur}),_})}}const ma="navigation",wr="resource",Aa=/^00-[a-f0-9]{32}-[a-f0-9]{16}-[0-9]{1,2}$/;function ms(e=[]){for(const t of e)if(t.name==="traceparent"){if(!Aa.test(t.description))continue;const[,n,r]=t.description.split("-");if(n!=null&&r!=null)return{traceId:n,spanId:r};break}}function ga(){return"PerformanceObserver"in window}function va(e){if(document.readyState==="complete")e();else{const t=()=>{document.readyState==="complete"&&(e(),document.removeEventListener("readystatechange",t))};document.addEventListener("readystatechange",t)}}function Ra(e,t={}){for(const[n,r]of Object.entries(t)){const i=e[n];return i==null?!1:G(r)?r.includes(i):i===r}return!0}function As(e){const{connectEnd:t,connectStart:n,decodedBodySize:r,domainLookupEnd:i,domainLookupStart:s,duration:o,encodedBodySize:a,fetchStart:u,initiatorType:_,name:p,nextHopProtocol:S,redirectEnd:C,redirectStart:U,renderBlockingStatus:D,requestStart:B,responseEnd:k,responseStart:J,responseStatus:it,secureConnectionStart:Ot,transferSize:mt,workerStart:et}=e;return{name:p,duration:gt(o),tcpHandshakeTime:gt(t-n),dnsLookupTime:gt(i-s),tlsNegotiationTime:gt(t-Ot),responseStatus:gt(it),redirectTime:gt(C-U),requestTime:gt(J-B),responseTime:gt(k-J),fetchTime:gt(k-u),serviceWorkerTime:gt(u-et),decodedBodySize:gt(r),encodedBodySize:gt(a),cacheHitStatus:z(),renderBlockingStatus:gt(D),protocol:S,initiatorType:_,visibilityState:document.visibilityState,ttfb:gt(J-B),transferSize:gt(mt)};function z(){let ut="fullLoad";return mt===0?r>0&&(ut="cache"):it!=null?it===304&&(ut="conditionalFetch"):a>0&&mt<a&&(ut="conditionalFetch"),ut}}function ba(e){const{activationStart:t,domComplete:n,domContentLoadedEventEnd:r,domContentLoadedEventStart:i,domInteractive:s,fetchStart:o,loadEventEnd:a,loadEventStart:u,responseStart:_,type:p}=e,S=Oa();return Object.assign(Object.assign({},As(e)),{pageLoadTime:gt(n-o),documentParsingTime:gt(S?s-S:null),domProcessingTime:gt(n-s),domContentLoadHandlerTime:gt(r-i),onLoadTime:gt(a-u),ttfb:gt(Math.max(_-(t??0),0)),type:p})}function Oa(){var e;return((e=performance.timing)===null||e===void 0?void 0:e.domLoading)!=null?performance.timing.domLoading-performance.timeOrigin:null}function gt(e){return e==null?Ut:typeof e=="number"?Math.round(e>0?e:0).toString():e.toString()}function Pa(e){let t;const n=new Promise(i=>{t=i});return new PerformanceObserver(i=>{var s;const[o]=i.getEntries();if(o==null||Dn(o.name))return;const a=o.toJSON();let u=ms(a?.serverTiming);const _=(s=ee(Lr,yt.session))!==null&&s!==void 0?s:Ut,p=Object.assign(Object.assign({},ba(a)),{faroNavigationId:Yt(),faroPreviousNavigationId:_});Pe(Lr,p.faroNavigationId,yt.session),e("faro.performance.navigation",p,void 0,{spanContext:u,timestampOverwriteMs:performance.timeOrigin+a.startTime}),t(p)}).observe({type:ma,buffered:!0}),n}const Ma={initiatorType:["xmlhttprequest","fetch"]};function Na(e,t,n){const r=st.P.config.trackResources;new PerformanceObserver(s=>{const o=s.getEntries();for(const a of o){if(Dn(a.name))return;const u=a.toJSON();let _=ms(u?.serverTiming);if(r==null&&Ra(u,Ma)||r){const p=Object.assign(Object.assign({},As(u)),{faroNavigationId:e,faroResourceId:Yt()});st.P.config.trackUserActionsPreview&&n?.notify({type:wr}),t("faro.performance.resource",p,void 0,{spanContext:_,timestampOverwriteMs:performance.timeOrigin+u.startTime})}}}).observe({type:wr,buffered:!0})}var La=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(p){try{_(r.next(p))}catch(S){o(S)}}function u(p){try{_(r.throw(p))}catch(S){o(S)}}function _(p){p.done?s(p.value):i(p.value).then(a,u)}_((r=r.apply(e,t||[])).next())})};const gs=new Jt;class ya extends Zt{constructor(){super(...arguments),this.name="@grafana/faro-web-sdk:instrumentation-performance",this.version=R}initialize(){if(!ga()){this.logDebug("performance observer not supported. Disable performance instrumentation.");return}va(()=>La(this,void 0,void 0,function*(){const t=this.api.pushEvent,{faroNavigationId:n}=yield Pa(t);n!=null&&Na(n,t,gs)}))}}function Ca(){const e=new Jt;return gs.subscribe(t=>{t.type===wr&&e.notify({type:ca})}),e}function Ia(e){const t=e.split("data-")[1],n=t?.replace(/-(.)/g,(r,i)=>i.toUpperCase());return n?.replace(/-/g,"")}const vs=100;function Ua(e){const{api:t,config:n}=e,r=Ta(),i=fa(),s=Ca();let o,a=!1;function u(_){var p;let S;const C=xa(_);if(C?S=_.name:S=wa(_.target,(p=n.trackUserActionsDataAttributeName)!==null&&p!==void 0?p:da),a||S==null)return;a=!0;const U=Z();let D;const B=Yt();xe.notify({type:Ae,name:S,startTime:U,parentId:B}),o=Dr(o,()=>{D=Z(),a=!1,Da(S,B)},vs);const k=new Map;let J=!1,it;const Ot=new Jt().merge(r,i,s).takeWhile(()=>a).filter(mt=>!(J&&!(Os(mt)&&k.has(mt.request.requestId)))).subscribe(mt=>{Va(mt)&&k.set(mt.request.requestId,mt.request),Os(mt)&&k.delete(mt.request.requestId),o=Dr(o,()=>{D=Z();const et=Object.assign({api:t,userActionName:S,startTime:U,endTime:D,actionId:B,event:_},C?{attributes:_.attributes}:{}),z=k.size>0;J&&!z&&(clearTimeout(it),J=!1),z?(J=!0,xe.notify({type:Ir,name:S,parentId:B,reason:"pending-requests",haltTime:Z()}),it=Dr(void 0,()=>{bs(Ot),Rs(et),a=!1,J=!1},1e3*10)):(bs(Ot),Rs(et),a=!1,J=!1)},vs)})}return u}function Rs(e){const{api:t,userActionName:n,startTime:r,endTime:i,actionId:s,event:o,attributes:a}=e,u=i-r,_=o.type;xe.notify({type:yr,name:n,id:s,startTime:r,endTime:i,duration:u,eventType:_}),t.pushEvent(n,Object.assign({userActionStartTime:r.toString(),userActionEndTime:i.toString(),userActionDuration:u.toString(),userActionTrigger:_},Kt(a)),void 0,{timestampOverwriteMs:r,customPayloadTransformer:p=>(p.action={id:s,name:n},p)})}function wa(e,t){const n=Ia(t),r=e.dataset;for(const i in r)if(i===n)return r[i]}function Dr(e,t,n){return e&&clearTimeout(e),e=setTimeout(()=>{t()},n),e}function Da(e,t){xe.notify({type:Cr,name:e,parentId:t})}function bs(e){e?.unsubscribe(),e=void 0}function Va(e){return e.type===Ts}function Os(e){return e.type===Ss}function xa(e){return e.type===Ea&&typeof e.name=="string"}let Be;class Ba extends Zt{constructor(){super(...arguments),this.name="@grafana/faro-web-sdk:instrumentation-user-action",this.version=R}initialize(){Be=Ua(st.P),window.addEventListener("pointerdown",Be),window.addEventListener("keydown",Be)}}function aE(e,t){Be?.(ka(e,t))}function ka(e,t){return{name:e,attributes:t,type:userActionStartByApiCallEventName}}class Ga extends Zt{constructor(){super(...arguments),this.name="@grafana/faro-web-sdk:instrumentation-view",this.version=R}sendViewChangedEvent(t){var n,r,i,s;const o=t.view;o&&o.name!==((n=this.notifiedView)===null||n===void 0?void 0:n.name)&&(this.api.pushEvent(ei,{fromView:(i=(r=this.notifiedView)===null||r===void 0?void 0:r.name)!==null&&i!==void 0?i:Ut,toView:(s=o.name)!==null&&s!==void 0?s:Ut},void 0,{skipDedupe:!0}),this.notifiedView=o)}initialize(){this.metas.addListener(this.sendViewChangedEvent.bind(this))}}class Ha extends Zt{constructor(){super(),this.name="@grafana/faro-web-sdk:instrumentation-csp",this.version=R}initialize(){document.addEventListener("securitypolicyviolation",this.securitypolicyviolationHandler.bind(this))}destroy(){document.removeEventListener("securitypolicyviolation",this.securitypolicyviolationHandler)}securitypolicyviolationHandler(t){this.api.pushEvent("securitypolicyviolation",Kt(t))}}function Ps(e={}){const t=[new Ba,new Er,new fs,new ps,new Ga];return e.enablePerformanceInstrumentation!==!1&&t.unshift(new ya),e.enableContentSecurityPolicyInstrumentation!==!1&&t.push(new Ha),e.captureConsole!==!1&&t.push(new re({disabledLevels:e.captureConsoleDisabledLevels})),t}function Fa(e,t,n,r,i,s){t.debug("Initializing instrumentations");const o=[];return{add:(..._)=>{t.debug("Adding instrumentations"),_.forEach(p=>{if(t.debug(`Adding "${p.name}" instrumentation`),o.some(C=>C.name===p.name)){t.warn(`Instrumentation ${p.name} is already added`);return}p.unpatchedConsole=e,p.internalLogger=t,p.config=n,p.metas=r,p.transports=i,p.api=s,o.push(p),p.initialize()})},get instrumentations(){return[...o]},remove:(..._)=>{t.debug("Removing instrumentations"),_.forEach(p=>{var S,C;t.debug(`Removing "${p.name}" instrumentation`);const U=o.reduce((D,B,k)=>D===null&&B.name===p.name?k:null,null);if(U===null){t.warn(`Instrumentation "${p.name}" is not added`);return}(C=(S=o[U]).destroy)===null||C===void 0||C.call(S),o.splice(U,1)})}}}function Ka(e){e.instrumentations.add(...e.config.instrumentations)}function Ms(e=I,t=M){const n=v;return t>A.OFF&&(n.error=t>=A.ERROR?function(...r){e.error(`${n.prefix}
`,...r)}:h,n.warn=t>=A.WARN?function(...r){e.warn(`${n.prefix}
`,...r)}:h,n.info=t>=A.INFO?function(...r){e.info(`${n.prefix}
`,...r)}:h,n.debug=t>=A.VERBOSE?function(...r){e.debug(`${n.prefix}
`,...r)}:h),n}let Ns=v;function ja(e,t){return Ns=Ms(e,t.internalLoggerLevel),Ns}function Wa(e,t,n){let r=[],i=[];const s=()=>r.reduce((S,C)=>Object.assign(S,w(C)?C():C),{}),o=()=>{if(i.length){const S=s();i.forEach(C=>C(S))}};return{add:(...S)=>{t.debug(`Adding metas
`,S),r.push(...S),o()},remove:(...S)=>{t.debug(`Removing metas
`,S),r=r.filter(C=>!S.includes(C)),o()},addListener:S=>{t.debug(`Adding metas listener
`,S),i.push(S)},removeListener:S=>{t.debug(`Removing metas listener
`,S),i=i.filter(C=>C!==S)},get value(){return s()}}}var Vr=f(30736);function Ya(e){return Vr.J===null||Vr.J===void 0?void 0:Vr.J[`__faroBundleId_${e}`]}function za(e){var t,n;const r={sdk:{version:R},app:{bundleId:e.config.app.name&&Ya(e.config.app.name)}},i=(t=e.config.sessionTracking)===null||t===void 0?void 0:t.session;i&&e.api.setSession(i),e.config.app&&(r.app=Object.assign(Object.assign({},e.config.app),r.app)),e.config.user&&(r.user=e.config.user),e.config.view&&(r.view=e.config.view),e.metas.add(r,...(n=e.config.metas)!==null&&n!==void 0?n:[])}var $a=f(4756);const Xa=250,Ja=50;class Qa{constructor(t,n){var r,i;this.signalBuffer=[],this.itemLimit=(r=n?.itemLimit)!==null&&r!==void 0?r:Ja,this.sendTimeout=(i=n?.sendTimeout)!==null&&i!==void 0?i:Xa,this.paused=n?.paused||!1,this.sendFn=t,this.flushInterval=-1,this.paused||this.start(),document.addEventListener("visibilitychange",()=>{document.visibilityState==="hidden"&&this.flush()})}addItem(t){this.paused||(this.signalBuffer.push(t),this.signalBuffer.length>=this.itemLimit&&this.flush())}start(){this.paused=!1,this.sendTimeout>0&&(this.flushInterval=window.setInterval(()=>this.flush(),this.sendTimeout))}pause(){this.paused=!0,clearInterval(this.flushInterval)}groupItems(t){const n=new Map;return t.forEach(r=>{const i=JSON.stringify(r.meta);let s=n.get(i);s===void 0?s=[r]:s=[...s,r],n.set(i,s)}),Array.from(n.values())}flush(){if(this.paused||this.signalBuffer.length===0)return;this.groupItems(this.signalBuffer).forEach(this.sendFn),this.signalBuffer=[]}}function Za(e,t,n,r){var i;t.debug("Initializing transports");const s=[];let o=n.paused,a=[];const u=(...et)=>{t.debug("Adding transports"),et.forEach(z=>{if(t.debug(`Adding "${z.name}" transport`),s.some(Ht=>Ht===z)){t.warn(`Transport ${z.name} is already added`);return}z.unpatchedConsole=e,z.internalLogger=t,z.config=n,z.metas=r,s.push(z)})},_=(...et)=>{t.debug(`Adding beforeSendHooks
`,a),et.forEach(z=>{z&&a.push(z)})},p=et=>{let z=et;for(const ut of a){const Ht=z.map(ut).filter(Boolean);if(Ht.length===0)return[];z=qa(Ht,n)}return z},S=et=>{const z=p(et);if(z.length!==0)for(const ut of s)t.debug(`Transporting item using ${ut.name}
`,z),ut.isBatched()&&ut.send(z)},C=et=>{var z,ut;if(!((z=n.batching)===null||z===void 0)&&z.enabled&&s.every(ae=>ae.isBatched()))return;const[Ht]=p([et]);if(Ht!==void 0)for(const ae of s)t.debug(`Transporting item using ${ae.name}
`,Ht),ae.isBatched()?!((ut=n.batching)===null||ut===void 0)&&ut.enabled||ae.send([Ht]):ae.send(Ht)};let U;return!((i=n.batching)===null||i===void 0)&&i.enabled&&(U=new Qa(S,{sendTimeout:n.batching.sendTimeout,itemLimit:n.batching.itemLimit,paused:o})),{add:u,addBeforeSendHooks:_,getBeforeSendHooks:()=>[...a],execute:et=>{var z;o||(!((z=n.batching)===null||z===void 0)&&z.enabled&&U?.addItem(et),C(et))},isPaused:()=>o,pause:()=>{t.debug("Pausing transports"),U?.pause(),o=!0},remove:(...et)=>{t.debug("Removing transports"),et.forEach(z=>{t.debug(`Removing "${z.name}" transport`);const ut=s.indexOf(z);if(ut===-1){t.warn(`Transport "${z.name}" is not added`);return}s.splice(ut,1)})},removeBeforeSendHooks:(...et)=>{a.filter(z=>!et.includes(z))},get transports(){return[...s]},unpause:()=>{t.debug("Unpausing transports"),U?.start(),o=!1}}}function qa(e,t){if(t.preserveOriginalError)for(const n of e)n.type===c.EXCEPTION&&delete n.payload.originalError;return e}function tu(e){e.transports.add(...e.config.transports),e.transports.addBeforeSendHooks(e.config.beforeSend)}let xr=I;function eu(e){var t;return xr=(t=e.unpatchedConsole)!==null&&t!==void 0?t:xr,xr}function nu(e){const t=eu(e),n=ja(t,e);if((0,$a.rI)()&&!e.isolate){n.error('Faro is already registered. Either add instrumentations, transports etc. to the global faro instance or use the "isolate" property');return}n.debug("Initializing");const r=Wa(t,n,e),i=Za(t,n,e,r),s=ua(t,n,e,r,i),o=Fa(t,n,e,r,i,s),a=(0,st.A)(t,n,e,r,i,s,o);return za(a),tu(a),Ka(a),a}const ru="faro",iu={enabled:!0,sendTimeout:250,itemLimit:50},su="browser";function ou(e){return{frames:je(e)}}var au=f(77232);const uu=()=>{const e=new au.UAParser,{name:t,version:n}=e.getBrowser(),{name:r,version:i}=e.getOS(),s=e.getUA(),o=navigator.language,a=navigator.userAgent.includes("Mobi"),u=_();return{browser:{name:t??Ut,version:n??Ut,os:`${r??Ut} ${i??Ut}`,userAgent:s??Ut,language:o??Ut,mobile:a,brands:u??Ut,viewportWidth:`${window.innerWidth}`,viewportHeight:`${window.innerHeight}`}};function _(){if(!(!t||!n)&&"userAgentData"in navigator&&navigator.userAgentData)return navigator.userAgentData.brands}},cu=()=>{const e=window.k6;return{k6:Object.assign({isK6Browser:!0},e?.testRunId&&{testRunId:e?.testRunId})}};let Ls,Br;function lu({generatePageId:e,initialPageMeta:t}={}){return()=>{const r=location.href;return w(e)&&Ls!==r&&(Ls=r,Br=e(location)),{page:Object.assign(Object.assign({url:r},Br?{id:Br}:{}),t)}}}var du=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function _u(e){var t;const n=[],r=Ms(e.unpatchedConsole,e.internalLoggerLevel);e.transports?((e.url||e.apiKey)&&r.error('if "transports" is defined, "url" and "apiKey" should not be defined'),n.push(...e.transports)):e.url?n.push(new Zn({url:e.url,apiKey:e.apiKey})):r.error('either "url" or "transports" must be defined');const{dedupe:i=!0,eventDomain:s=su,globalObjectKey:o=ru,instrumentations:a=Ps(),internalLoggerLevel:u=M,isolate:_=!1,logArgsSerializer:p=ye,metas:S=fu(e),paused:C=!1,preventGlobalExposure:U=!1,unpatchedConsole:D=I,trackUserActionsPreview:B=!1,trackUserActionsDataAttributeName:k=_a,url:J}=e,it=du(e,["dedupe","eventDomain","globalObjectKey","instrumentations","internalLoggerLevel","isolate","logArgsSerializer","metas","paused","preventGlobalExposure","unpatchedConsole","trackUserActionsPreview","trackUserActionsDataAttributeName","url"]);return Object.assign(Object.assign({},it),{batching:Object.assign(Object.assign({},iu),e.batching),dedupe:i,globalObjectKey:o,instrumentations:Eu(a,e),internalLoggerLevel:u,isolate:_,logArgsSerializer:p,metas:S,parseStacktrace:ou,paused:C,preventGlobalExposure:U,transports:n,unpatchedConsole:D,eventDomain:s,ignoreUrls:[...(t=e.ignoreUrls)!==null&&t!==void 0?t:[],...J?[J]:[],/\/collect(?:\/[\w]*)?$/],sessionTracking:Object.assign(Object.assign(Object.assign({},Te),e.sessionTracking),pu({trackGeolocation:e.trackGeolocation,sessionTracking:e.sessionTracking})),trackUserActionsPreview:B,trackUserActionsDataAttributeName:k})}function Eu(e,{trackUserActionsPreview:t}){return e.filter(n=>!(n.name==="@grafana/faro-web-sdk:instrumentation-user-action"&&!t))}function fu(e){var t,n;const{page:r,generatePageId:i}=(t=e?.pageTracking)!==null&&t!==void 0?t:{},s=[uu,lu({generatePageId:i,initialPageMeta:r}),...(n=e.metas)!==null&&n!==void 0?n:[]];return K(window.k6)?[...s,cu]:s}function pu({trackGeolocation:e,sessionTracking:t}){var n;const r={};return ft(e)&&(r.geoLocationTrackingEnabled=e),It(r)?{}:{session:Object.assign(Object.assign({},(n=t?.session)!==null&&n!==void 0?n:{}),{overrides:r})}}function Tu(e){const t=_u(e);if(t)return nu(t)}var Mt=f(73096),ht=f(41844),ys=f(2240),ge=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Su=function(){function e(){}return e.prototype.createGauge=function(t,n){return Pu},e.prototype.createHistogram=function(t,n){return Mu},e.prototype.createCounter=function(t,n){return Ou},e.prototype.createUpDownCounter=function(t,n){return Nu},e.prototype.createObservableGauge=function(t,n){return yu},e.prototype.createObservableCounter=function(t,n){return Lu},e.prototype.createObservableUpDownCounter=function(t,n){return Cu},e.prototype.addBatchObservableCallback=function(t,n){},e.prototype.removeBatchObservableCallback=function(t){},e}(),xn=function(){function e(){}return e}(),hu=function(e){ge(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.add=function(n,r){},t}(xn),mu=function(e){ge(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.add=function(n,r){},t}(xn),Au=function(e){ge(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.record=function(n,r){},t}(xn),gu=function(e){ge(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.record=function(n,r){},t}(xn),kr=function(){function e(){}return e.prototype.addCallback=function(t){},e.prototype.removeCallback=function(t){},e}(),vu=function(e){ge(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(kr),Ru=function(e){ge(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(kr),bu=function(e){ge(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(kr),Cs=new Su,Ou=new hu,Pu=new Au,Mu=new gu,Nu=new mu,Lu=new vu,yu=new Ru,Cu=new bu;function uE(){return Cs}var Iu=function(){function e(){}return e.prototype.getMeter=function(t,n,r){return Cs},e}(),Uu=new Iu,Gr=f(75158),Is=f(44892),Hr="metrics",wu=function(){function e(){}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalMeterProvider=function(t){return(0,Gr.$G)(Hr,t,Is.K.instance())},e.prototype.getMeterProvider=function(){return(0,Gr.mS)(Hr)||Uu},e.prototype.getMeter=function(t,n,r){return this.getMeterProvider().getMeter(t,n,r)},e.prototype.disable=function(){(0,Gr.kv)(Hr,Is.K.instance())},e}(),Us=wu.getInstance();const Du=typeof globalThis=="object"?globalThis:typeof self=="object"?self:typeof window=="object"?window:typeof f.g=="object"?f.g:{},Bn=Symbol.for("io.opentelemetry.js.api.logs"),en=Du;function Vu(e,t,n){return r=>r===e?t:n}const ws=1;class Ds{emit(t){}}const xu=new Ds;class Bu{getLogger(t,n,r){return new Ds}}const Vs=new Bu;class ku{constructor(t,n,r,i){this._provider=t,this.name=n,this.version=r,this.options=i}emit(t){this._getLogger().emit(t)}_getLogger(){if(this._delegate)return this._delegate;const t=this._provider.getDelegateLogger(this.name,this.version,this.options);return t?(this._delegate=t,this._delegate):xu}}class xs{getLogger(t,n,r){var i;return(i=this.getDelegateLogger(t,n,r))!==null&&i!==void 0?i:new ku(this,t,n,r)}getDelegate(){var t;return(t=this._delegate)!==null&&t!==void 0?t:Vs}setDelegate(t){this._delegate=t}getDelegateLogger(t,n,r){var i;return(i=this._delegate)===null||i===void 0?void 0:i.getLogger(t,n,r)}}class Fr{constructor(){this._proxyLoggerProvider=new xs}static getInstance(){return this._instance||(this._instance=new Fr),this._instance}setGlobalLoggerProvider(t){return en[Bn]?this.getLoggerProvider():(en[Bn]=Vu(ws,t,Vs),this._proxyLoggerProvider.setDelegate(t),t)}getLoggerProvider(){var t,n;return(n=(t=en[Bn])===null||t===void 0?void 0:t.call(en,ws))!==null&&n!==void 0?n:this._proxyLoggerProvider}getLogger(t,n,r){return this.getLoggerProvider().getLogger(t,n,r)}disable(){delete en[Bn],this._proxyLoggerProvider=new xs}}const Bs=Fr.getInstance();function Gu(e,t,n,r){for(let i=0,s=e.length;i<s;i++){const o=e[i];t&&o.setTracerProvider(t),n&&o.setMeterProvider(n),r&&o.setLoggerProvider&&o.setLoggerProvider(r),o.getConfig().enabled||o.enable()}}function Hu(e){e.forEach(t=>t.disable())}function Fu(e){const t=e.tracerProvider||Mt.u.getTracerProvider(),n=e.meterProvider||Us.getMeterProvider(),r=e.loggerProvider||Bs.getLoggerProvider(),i=e.instrumentations?.flat()??[];return Gu(i,t,n,r),()=>{Hu(i)}}var Et=f(78758),Kr=f(15347),rt=f(27608);function Ku(){return"unknown_service"}const nn=e=>e!==null&&typeof e=="object"&&typeof e.then=="function";function cE(e){return e}class rn{_rawAttributes;_asyncAttributesPending=!1;_memoizedAttributes;static FromAttributeList(t){const n=new rn({});return n._rawAttributes=Gs(t),n._asyncAttributesPending=t.filter(([r,i])=>nn(i)).length>0,n}constructor(t){const n=t.attributes??{};this._rawAttributes=Object.entries(n).map(([r,i])=>(nn(i)&&(this._asyncAttributesPending=!0),[r,i])),this._rawAttributes=Gs(this._rawAttributes)}get asyncAttributesPending(){return this._asyncAttributesPending}async waitForAsyncAttributes(){if(this.asyncAttributesPending){for(let t=0;t<this._rawAttributes.length;t++){const[n,r]=this._rawAttributes[t];this._rawAttributes[t]=[n,nn(r)?await r:r]}this._asyncAttributesPending=!1}}get attributes(){if(this.asyncAttributesPending&&Et.s.error("Accessing resource attributes before async attributes settled"),this._memoizedAttributes)return this._memoizedAttributes;const t={};for(const[n,r]of this._rawAttributes){if(nn(r)){Et.s.debug(`Unsettled resource attribute ${n} skipped`);continue}r!=null&&(t[n]??=r)}return this._asyncAttributesPending||(this._memoizedAttributes=t),t}getRawAttributes(){return this._rawAttributes}merge(t){return t==null?this:rn.FromAttributeList([...t.getRawAttributes(),...this.getRawAttributes()])}}function jr(e){return rn.FromAttributeList(Object.entries(e))}function lE(e){return new rn(e)}function dE(){return jr({})}function ks(){return jr({[rt.UX]:Ku(),[rt.E$]:Kr.q[rt.E$],[rt.aO]:Kr.q[rt.aO],[rt.aJ]:Kr.q[rt.aJ]})}function Gs(e){return e.map(([t,n])=>nn(n)?[t,n.catch(r=>{Et.s.debug("promise rejection for resource attribute: %s - %s",t,r)})]:[t,n])}var ju=f(31194),Wu=f(97872),ke;(function(e){e[e.INTERNAL=0]="INTERNAL",e[e.SERVER=1]="SERVER",e[e.CLIENT=2]="CLIENT",e[e.PRODUCER=3]="PRODUCER",e[e.CONSUMER=4]="CONSUMER"})(ke||(ke={}));var kn;(function(e){e[e.NOT_RECORD=0]="NOT_RECORD",e[e.RECORD=1]="RECORD",e[e.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"})(kn||(kn={}));var sn=f(47397),Hs=f(4445),on=f(80788),an=f(11908),un=f(75026),at=f(65864);const Yu="exception";class zu{_spanContext;kind;parentSpanContext;attributes={};links=[];events=[];startTime;resource;instrumentationScope;_droppedAttributesCount=0;_droppedEventsCount=0;_droppedLinksCount=0;name;status={code:an.s.UNSET};endTime=[0,0];_ended=!1;_duration=[-1,-1];_spanProcessor;_spanLimits;_attributeValueLengthLimit;_performanceStartTime;_performanceOffset;_startTimeProvided;constructor(t){const n=Date.now();this._spanContext=t.spanContext,this._performanceStartTime=un.u.now(),this._performanceOffset=n-(this._performanceStartTime+(0,at.uc)()),this._startTimeProvided=t.startTime!=null,this._spanLimits=t.spanLimits,this._attributeValueLengthLimit=this._spanLimits.attributeValueLengthLimit||0,this._spanProcessor=t.spanProcessor,this.name=t.name,this.parentSpanContext=t.parentSpanContext,this.kind=t.kind,this.links=t.links||[],this.startTime=this._getTime(t.startTime??n),this.resource=t.resource,this.instrumentationScope=t.scope,t.attributes!=null&&this.setAttributes(t.attributes),this._spanProcessor.onStart(this,t.context)}spanContext(){return this._spanContext}setAttribute(t,n){if(n==null||this._isSpanEnded())return this;if(t.length===0)return Et.s.warn(`Invalid attribute key: ${t}`),this;if(!(0,on.m)(n))return Et.s.warn(`Invalid attribute value set for key: ${t}`),this;const{attributeCountLimit:r}=this._spanLimits;return r!==void 0&&Object.keys(this.attributes).length>=r&&!Object.prototype.hasOwnProperty.call(this.attributes,t)?(this._droppedAttributesCount++,this):(this.attributes[t]=this._truncateToSize(n),this)}setAttributes(t){for(const[n,r]of Object.entries(t))this.setAttribute(n,r);return this}addEvent(t,n,r){if(this._isSpanEnded())return this;const{eventCountLimit:i}=this._spanLimits;if(i===0)return Et.s.warn("No events allowed."),this._droppedEventsCount++,this;i!==void 0&&this.events.length>=i&&(this._droppedEventsCount===0&&Et.s.debug("Dropping extra events."),this.events.shift(),this._droppedEventsCount++),(0,at.Ir)(n)&&((0,at.Ir)(r)||(r=n),n=void 0);const s=(0,on.L)(n);return this.events.push({name:t,attributes:s,time:this._getTime(r),droppedAttributesCount:0}),this}addLink(t){return this.links.push(t),this}addLinks(t){return this.links.push(...t),this}setStatus(t){return this._isSpanEnded()?this:(this.status={...t},this.status.message!=null&&typeof t.message!="string"&&(Et.s.warn(`Dropping invalid status.message of type '${typeof t.message}', expected 'string'`),delete this.status.message),this)}updateName(t){return this._isSpanEnded()?this:(this.name=t,this)}end(t){if(this._isSpanEnded()){Et.s.error(`${this.name} ${this._spanContext.traceId}-${this._spanContext.spanId} - You can only call end() on a span once.`);return}this._ended=!0,this.endTime=this._getTime(t),this._duration=(0,at.W5)(this.startTime,this.endTime),this._duration[0]<0&&(Et.s.warn("Inconsistent start and end time, startTime > endTime. Setting span duration to 0ms.",this.startTime,this.endTime),this.endTime=this.startTime.slice(),this._duration=[0,0]),this._droppedEventsCount>0&&Et.s.warn(`Dropped ${this._droppedEventsCount} events because eventCountLimit reached`),this._spanProcessor.onEnd(this)}_getTime(t){if(typeof t=="number"&&t<=un.u.now())return(0,at._5)(t+this._performanceOffset);if(typeof t=="number")return(0,at.lg)(t);if(t instanceof Date)return(0,at.lg)(t.getTime());if((0,at.VL)(t))return t;if(this._startTimeProvided)return(0,at.lg)(Date.now());const n=un.u.now()-this._performanceStartTime;return(0,at.mw)(this.startTime,(0,at.lg)(n))}isRecording(){return this._ended===!1}recordException(t,n){const r={};typeof t=="string"?r[rt.wL]=t:t&&(t.code?r[rt.d6]=t.code.toString():t.name&&(r[rt.d6]=t.name),t.message&&(r[rt.wL]=t.message),t.stack&&(r[rt.Mb]=t.stack)),r[rt.d6]||r[rt.wL]?this.addEvent(Yu,r,n):Et.s.warn(`Failed to record an exception ${t}`)}get duration(){return this._duration}get ended(){return this._ended}get droppedAttributesCount(){return this._droppedAttributesCount}get droppedEventsCount(){return this._droppedEventsCount}get droppedLinksCount(){return this._droppedLinksCount}_isSpanEnded(){if(this._ended){const t=new Error(`Operation attempted on ended Span {traceId: ${this._spanContext.traceId}, spanId: ${this._spanContext.spanId}}`);Et.s.warn(`Cannot execute the operation on ended Span {traceId: ${this._spanContext.traceId}, spanId: ${this._spanContext.spanId}}`,t)}return this._ended}_truncateToLimitUtil(t,n){return t.length<=n?t:t.substring(0,n)}_truncateToSize(t){const n=this._attributeValueLengthLimit;return n<=0?(Et.s.warn(`Attribute value limit must be positive, got ${n}`),t):typeof t=="string"?this._truncateToLimitUtil(t,n):Array.isArray(t)?t.map(r=>typeof r=="string"?this._truncateToLimitUtil(r,n):r):t}}var Rt=f(41257),Ee;(function(e){e[e.NOT_RECORD=0]="NOT_RECORD",e[e.RECORD=1]="RECORD",e[e.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"})(Ee||(Ee={}));class Gn{shouldSample(){return{decision:Ee.NOT_RECORD}}toString(){return"AlwaysOffSampler"}}class Ge{shouldSample(){return{decision:Ee.RECORD_AND_SAMPLED}}toString(){return"AlwaysOnSampler"}}var Fs=f(67823),He=f(78044);class Hn{_root;_remoteParentSampled;_remoteParentNotSampled;_localParentSampled;_localParentNotSampled;constructor(t){this._root=t.root,this._root||((0,He.s)(new Error("ParentBasedSampler must have a root sampler configured")),this._root=new Ge),this._remoteParentSampled=t.remoteParentSampled??new Ge,this._remoteParentNotSampled=t.remoteParentNotSampled??new Gn,this._localParentSampled=t.localParentSampled??new Ge,this._localParentNotSampled=t.localParentNotSampled??new Gn}shouldSample(t,n,r,i,s,o){const a=Mt.u.getSpanContext(t);return!a||!(0,Fs.YA)(a)?this._root.shouldSample(t,n,r,i,s,o):a.isRemote?a.traceFlags&sn.X.SAMPLED?this._remoteParentSampled.shouldSample(t,n,r,i,s,o):this._remoteParentNotSampled.shouldSample(t,n,r,i,s,o):a.traceFlags&sn.X.SAMPLED?this._localParentSampled.shouldSample(t,n,r,i,s,o):this._localParentNotSampled.shouldSample(t,n,r,i,s,o)}toString(){return`ParentBased{root=${this._root.toString()}, remoteParentSampled=${this._remoteParentSampled.toString()}, remoteParentNotSampled=${this._remoteParentNotSampled.toString()}, localParentSampled=${this._localParentSampled.toString()}, localParentNotSampled=${this._localParentNotSampled.toString()}}`}}class Ks{_ratio;_upperBound;constructor(t=0){this._ratio=t,this._ratio=this._normalize(t),this._upperBound=Math.floor(this._ratio*4294967295)}shouldSample(t,n){return{decision:(0,Fs.hX)(n)&&this._accumulate(n)<this._upperBound?Ee.RECORD_AND_SAMPLED:Ee.NOT_RECORD}}toString(){return`TraceIdRatioBased{${this._ratio}}`}_normalize(t){return typeof t!="number"||isNaN(t)?0:t>=1?1:t<=0?0:t}_accumulate(t){let n=0;for(let r=0;r<t.length/8;r++){const i=r*8,s=parseInt(t.slice(i,i+8),16);n=(n^s)>>>0}return n}}const Fn=1;function js(){return{sampler:Ws(),forceFlushTimeoutMillis:3e4,generalLimits:{attributeValueLengthLimit:(0,Rt.Jk)("OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT")??1/0,attributeCountLimit:(0,Rt.Jk)("OTEL_ATTRIBUTE_COUNT_LIMIT")??128},spanLimits:{attributeValueLengthLimit:(0,Rt.Jk)("OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT")??1/0,attributeCountLimit:(0,Rt.Jk)("OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT")??128,linkCountLimit:(0,Rt.Jk)("OTEL_SPAN_LINK_COUNT_LIMIT")??128,eventCountLimit:(0,Rt.Jk)("OTEL_SPAN_EVENT_COUNT_LIMIT")??128,attributePerEventCountLimit:(0,Rt.Jk)("OTEL_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT")??128,attributePerLinkCountLimit:(0,Rt.Jk)("OTEL_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT")??128}}}function Ws(){const e=(0,Rt.HF)("OTEL_TRACES_SAMPLER")??"parentbased_always_on";switch(e){case"always_on":return new Ge;case"always_off":return new Gn;case"parentbased_always_on":return new Hn({root:new Ge});case"parentbased_always_off":return new Hn({root:new Gn});case"traceidratio":return new Ks(Ys());case"parentbased_traceidratio":return new Hn({root:new Ks(Ys())});default:return Et.s.error(`OTEL_TRACES_SAMPLER value "${e}" invalid, defaulting to "parentbased_always_on".`),new Hn({root:new Ge})}}function Ys(){const e=(0,Rt.Jk)("OTEL_TRACES_SAMPLER_ARG");return e==null?(Et.s.error(`OTEL_TRACES_SAMPLER_ARG is blank, defaulting to ${Fn}.`),Fn):e<0||e>1?(Et.s.error(`OTEL_TRACES_SAMPLER_ARG=${e} was given, but it is out of range ([0..1]), defaulting to ${Fn}.`),Fn):e}const $u=128,Xu=1/0;function Ju(e){const t={sampler:Ws()},n=js(),r=Object.assign({},n,t,e);return r.generalLimits=Object.assign({},n.generalLimits,e.generalLimits||{}),r.spanLimits=Object.assign({},n.spanLimits,e.spanLimits||{}),r}function Qu(e){const t=Object.assign({},e.spanLimits);return t.attributeCountLimit=e.spanLimits?.attributeCountLimit??e.generalLimits?.attributeCountLimit??(0,Rt.Jk)("OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT")??(0,Rt.Jk)("OTEL_ATTRIBUTE_COUNT_LIMIT")??$u,t.attributeValueLengthLimit=e.spanLimits?.attributeValueLengthLimit??e.generalLimits?.attributeValueLengthLimit??(0,Rt.Jk)("OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT")??(0,Rt.Jk)("OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT")??Xu,Object.assign({},e,{spanLimits:t})}const Zu=8,qu=16;class tc{generateTraceId=zs(qu);generateSpanId=zs(Zu)}const Kn=Array(32);function zs(e){return function(){for(let n=0;n<e*2;n++)Kn[n]=Math.floor(Math.random()*16)+48,Kn[n]>=58&&(Kn[n]+=39);return String.fromCharCode.apply(null,Kn.slice(0,e*2))}}class ec{_sampler;_generalLimits;_spanLimits;_idGenerator;instrumentationScope;_resource;_spanProcessor;constructor(t,n,r,i){const s=Ju(n);this._sampler=s.sampler,this._generalLimits=s.generalLimits,this._spanLimits=s.spanLimits,this._idGenerator=n.idGenerator||new tc,this._resource=r,this._spanProcessor=i,this.instrumentationScope=t}startSpan(t,n={},r=ht._.active()){n.root&&(r=Mt.u.deleteSpan(r));const i=Mt.u.getSpan(r);if((0,Hs.Zf)(r))return Et.s.debug("Instrumentation suppressed, returning Noop Span"),Mt.u.wrapSpanContext(Wu.dM);const s=i?.spanContext(),o=this._idGenerator.generateSpanId();let a,u,_;!s||!Mt.u.isSpanContextValid(s)?u=this._idGenerator.generateTraceId():(u=s.traceId,_=s.traceState,a=s);const p=n.kind??ke.INTERNAL,S=(n.links??[]).map(it=>({context:it.context,attributes:(0,on.L)(it.attributes)})),C=(0,on.L)(n.attributes),U=this._sampler.shouldSample(r,u,t,p,C,S);_=U.traceState??_;const D=U.decision===kn.RECORD_AND_SAMPLED?sn.X.SAMPLED:sn.X.NONE,B={traceId:u,spanId:o,traceFlags:D,traceState:_};if(U.decision===kn.NOT_RECORD)return Et.s.debug("Recording is off, propagating context in a non-recording span"),Mt.u.wrapSpanContext(B);const k=(0,on.L)(Object.assign(C,U.attributes));return new zu({resource:this._resource,scope:this.instrumentationScope,context:r,spanContext:B,name:t,kind:p,links:S,parentSpanContext:a,attributes:k,startTime:n.startTime,spanProcessor:this._spanProcessor,spanLimits:this._spanLimits})}startActiveSpan(t,n,r,i){let s,o,a;if(arguments.length<2)return;arguments.length===2?a=n:arguments.length===3?(s=n,a=r):(s=n,o=r,a=i);const u=o??ht._.active(),_=this.startSpan(t,s,u),p=Mt.u.setSpan(u,_);return ht._.with(p,a,void 0,_)}getGeneralLimits(){return this._generalLimits}getSpanLimits(){return this._spanLimits}}class nc{_spanProcessors;constructor(t){this._spanProcessors=t}forceFlush(){const t=[];for(const n of this._spanProcessors)t.push(n.forceFlush());return new Promise(n=>{Promise.all(t).then(()=>{n()}).catch(r=>{(0,He.s)(r||new Error("MultiSpanProcessor: forceFlush failed")),n()})})}onStart(t,n){for(const r of this._spanProcessors)r.onStart(t,n)}onEnd(t){for(const n of this._spanProcessors)n.onEnd(t)}shutdown(){const t=[];for(const n of this._spanProcessors)t.push(n.shutdown());return new Promise((n,r)=>{Promise.all(t).then(()=>{n()},r)})}}var ve;(function(e){e[e.resolved=0]="resolved",e[e.timeout=1]="timeout",e[e.error=2]="error",e[e.unresolved=3]="unresolved"})(ve||(ve={}));class rc{_config;_tracers=new Map;_resource;_activeSpanProcessor;constructor(t={}){const n=(0,ju.h)({},js(),Qu(t));this._resource=n.resource??ks(),this._config=Object.assign({},n,{resource:this._resource});const r=[];t.spanProcessors?.length&&r.push(...t.spanProcessors),this._activeSpanProcessor=new nc(r)}getTracer(t,n,r){const i=`${t}@${n||""}:${r?.schemaUrl||""}`;return this._tracers.has(i)||this._tracers.set(i,new ec({name:t,version:n,schemaUrl:r?.schemaUrl},this._config,this._resource,this._activeSpanProcessor)),this._tracers.get(i)}forceFlush(){const t=this._config.forceFlushTimeoutMillis,n=this._activeSpanProcessor._spanProcessors.map(r=>new Promise(i=>{let s;const o=setTimeout(()=>{i(new Error(`Span processor did not completed within timeout period of ${t} ms`)),s=ve.timeout},t);r.forceFlush().then(()=>{clearTimeout(o),s!==ve.timeout&&(s=ve.resolved,i(s))}).catch(a=>{clearTimeout(o),s=ve.error,i(a)})}));return new Promise((r,i)=>{Promise.all(n).then(s=>{const o=s.filter(a=>a!==ve.resolved);o.length>0?i(o):r()}).catch(s=>i([s]))})}shutdown(){return this._activeSpanProcessor.shutdown()}}var cn=f(38729);class ic{_enabled=!1;_currentContext=cn.l;_bindFunction(t=cn.l,n){const r=this,i=function(...s){return r.with(t,()=>n.apply(this,s))};return Object.defineProperty(i,"length",{enumerable:!1,configurable:!0,writable:!1,value:n.length}),i}active(){return this._currentContext}bind(t,n){return t===void 0&&(t=this.active()),typeof n=="function"?this._bindFunction(t,n):n}disable(){return this._currentContext=cn.l,this._enabled=!1,this}enable(){return this._enabled?this:(this._enabled=!0,this._currentContext=cn.l,this)}with(t,n,r,...i){const s=this._currentContext;this._currentContext=t||cn.l;try{return n.call(r,...i)}finally{this._currentContext=s}}}var ie=f(48131),sc=f(22721),oc=f(75477);function ac(e){if(e!==null){if(e===void 0){const t=new ic;t.enable(),ht._.setGlobalContextManager(t);return}e.enable(),ht._.setGlobalContextManager(e)}}function uc(e){if(e!==null){if(e===void 0){ie.$.setGlobalPropagator(new sc.n({propagators:[new ys.lm,new oc.t]}));return}ie.$.setGlobalPropagator(e)}}class cc extends rc{constructor(t={}){super(t)}register(t={}){Mt.u.setGlobalTracerProvider(this),uc(t.propagator),ac(t.contextManager)}}var lc=f(99756),$s=f(92068),dc=f(5446);class _c{_exporter;_maxExportBatchSize;_maxQueueSize;_scheduledDelayMillis;_exportTimeoutMillis;_isExporting=!1;_finishedSpans=[];_timer;_shutdownOnce;_droppedSpansCount=0;constructor(t,n){this._exporter=t,this._maxExportBatchSize=typeof n?.maxExportBatchSize=="number"?n.maxExportBatchSize:(0,Rt.Jk)("OTEL_BSP_MAX_EXPORT_BATCH_SIZE")??512,this._maxQueueSize=typeof n?.maxQueueSize=="number"?n.maxQueueSize:(0,Rt.Jk)("OTEL_BSP_MAX_QUEUE_SIZE")??2048,this._scheduledDelayMillis=typeof n?.scheduledDelayMillis=="number"?n.scheduledDelayMillis:(0,Rt.Jk)("OTEL_BSP_SCHEDULE_DELAY")??5e3,this._exportTimeoutMillis=typeof n?.exportTimeoutMillis=="number"?n.exportTimeoutMillis:(0,Rt.Jk)("OTEL_BSP_EXPORT_TIMEOUT")??3e4,this._shutdownOnce=new lc.I(this._shutdown,this),this._maxExportBatchSize>this._maxQueueSize&&(Et.s.warn("BatchSpanProcessor: maxExportBatchSize must be smaller or equal to maxQueueSize, setting maxExportBatchSize to match maxQueueSize"),this._maxExportBatchSize=this._maxQueueSize)}forceFlush(){return this._shutdownOnce.isCalled?this._shutdownOnce.promise:this._flushAll()}onStart(t,n){}onEnd(t){this._shutdownOnce.isCalled||(t.spanContext().traceFlags&sn.X.SAMPLED)!==0&&this._addToBuffer(t)}shutdown(){return this._shutdownOnce.call()}_shutdown(){return Promise.resolve().then(()=>this.onShutdown()).then(()=>this._flushAll()).then(()=>this._exporter.shutdown())}_addToBuffer(t){if(this._finishedSpans.length>=this._maxQueueSize){this._droppedSpansCount===0&&Et.s.debug("maxQueueSize reached, dropping spans"),this._droppedSpansCount++;return}this._droppedSpansCount>0&&(Et.s.warn(`Dropped ${this._droppedSpansCount} spans because maxQueueSize reached`),this._droppedSpansCount=0),this._finishedSpans.push(t),this._maybeStartTimer()}_flushAll(){return new Promise((t,n)=>{const r=[],i=Math.ceil(this._finishedSpans.length/this._maxExportBatchSize);for(let s=0,o=i;s<o;s++)r.push(this._flushOneBatch());Promise.all(r).then(()=>{t()}).catch(n)})}_flushOneBatch(){return this._clearTimer(),this._finishedSpans.length===0?Promise.resolve():new Promise((t,n)=>{const r=setTimeout(()=>{n(new Error("Timeout"))},this._exportTimeoutMillis);ht._.with((0,Hs.M1)(ht._.active()),()=>{let i;this._finishedSpans.length<=this._maxExportBatchSize?(i=this._finishedSpans,this._finishedSpans=[]):i=this._finishedSpans.splice(0,this._maxExportBatchSize);const s=()=>this._exporter.export(i,a=>{clearTimeout(r),a.code===$s.V.SUCCESS?t():n(a.error??new Error("BatchSpanProcessor: span export failed"))});let o=null;for(let a=0,u=i.length;a<u;a++){const _=i[a];_.resource.asyncAttributesPending&&_.resource.waitForAsyncAttributes&&(o??=[],o.push(_.resource.waitForAsyncAttributes()))}o===null?s():Promise.all(o).then(s,a=>{(0,He.s)(a),n(a)})})})}_maybeStartTimer(){if(this._isExporting)return;const t=()=>{this._isExporting=!0,this._flushOneBatch().finally(()=>{this._isExporting=!1,this._finishedSpans.length>0&&(this._clearTimer(),this._maybeStartTimer())}).catch(n=>{this._isExporting=!1,(0,He.s)(n)})};if(this._finishedSpans.length>=this._maxExportBatchSize)return t();this._timer===void 0&&(this._timer=setTimeout(()=>t(),this._scheduledDelayMillis),(0,dc.K)(this._timer))}_clearTimer(){this._timer!==void 0&&(clearTimeout(this._timer),this._timer=void 0)}}class Ec extends _c{_visibilityChangeListener;_pageHideListener;constructor(t,n){super(t,n),this.onInit(n)}onInit(t){t?.disableAutoFlushOnDocumentHide!==!0&&typeof document<"u"&&(this._visibilityChangeListener=()=>{document.visibilityState==="hidden"&&this.forceFlush().catch(n=>{(0,He.s)(n)})},this._pageHideListener=()=>{this.forceFlush().catch(n=>{(0,He.s)(n)})},document.addEventListener("visibilitychange",this._visibilityChangeListener),document.addEventListener("pagehide",this._pageHideListener))}onShutdown(){typeof document<"u"&&(this._visibilityChangeListener&&document.removeEventListener("visibilitychange",this._visibilityChangeListener),this._pageHideListener&&document.removeEventListener("pagehide",this._pageHideListener))}}function Re(e){let t={};const n=e.length;for(let r=0;r<n;r++){const i=e[r];i&&(t[String(i).toUpperCase().replace(/[-.]/g,"_")]=i)}return t}const fc="cloud.provider",pc="cloud.account.id",Tc="cloud.region",Sc="cloud.availability_zone",hc="cloud.platform",mc="aws.ecs.container.arn",Ac="aws.ecs.cluster.arn",gc="aws.ecs.launchtype",vc="aws.ecs.task.arn",Rc="aws.ecs.task.family",bc="aws.ecs.task.revision",Oc="aws.eks.cluster.arn",Pc="aws.log.group.names",Mc="aws.log.group.arns",Nc="aws.log.stream.names",Lc="aws.log.stream.arns",yc="container.name",Cc="container.id",Ic="container.runtime",Uc="container.image.name",wc="container.image.tag",Xs="deployment.environment",Dc="device.id",Vc="device.model.identifier",xc="device.model.name",Bc="faas.name",kc="faas.id",Gc="faas.version",Hc="faas.instance",Fc="faas.max_memory",Kc="host.id",jc="host.name",Wc="host.type",Yc="host.arch",zc="host.image.name",$c="host.image.id",Xc="host.image.version",Jc="k8s.cluster.name",Qc="k8s.node.name",Zc="k8s.node.uid",qc="k8s.namespace.name",tl="k8s.pod.uid",el="k8s.pod.name",nl="k8s.container.name",rl="k8s.replicaset.uid",il="k8s.replicaset.name",sl="k8s.deployment.uid",ol="k8s.deployment.name",al="k8s.statefulset.uid",ul="k8s.statefulset.name",cl="k8s.daemonset.uid",ll="k8s.daemonset.name",dl="k8s.job.uid",_l="k8s.job.name",El="k8s.cronjob.uid",fl="k8s.cronjob.name",pl="os.type",Tl="os.description",Sl="os.name",hl="os.version",ml="process.pid",Al="process.executable.name",gl="process.executable.path",vl="process.command",Rl="process.command_line",bl="process.command_args",Ol="process.owner",Pl="process.runtime.name",Ml="process.runtime.version",Nl="process.runtime.description",Ll="service.name",yl="service.namespace",Cl="service.instance.id",Il="service.version",Ul="telemetry.sdk.name",wl="telemetry.sdk.language",Dl="telemetry.sdk.version",Vl="telemetry.auto.version",xl="webengine.name",Bl="webengine.version",kl="webengine.description",_E=null,EE=null,fE=null,pE=null,TE=null,SE=null,hE=null,mE=null,AE=null,gE=null,vE=null,RE=null,bE=null,OE=null,PE=null,ME=null,NE=null,LE=null,yE=null,CE=null,IE=null,Gl=Xs,UE=null,wE=null,DE=null,VE=null,xE=null,BE=null,kE=null,GE=null,HE=null,FE=null,KE=null,jE=null,WE=null,YE=null,zE=null,$E=null,XE=null,JE=null,QE=null,ZE=null,qE=null,tf=null,ef=null,nf=null,rf=null,sf=null,of=null,af=null,uf=null,cf=null,lf=null,df=null,_f=null,Ef=null,ff=null,pf=null,Tf=null,Sf=null,hf=null,mf=null,Af=null,gf=null,vf=null,Rf=null,bf=null,Of=null,Pf=null,Mf=null,Nf=null,Lf=null,yf=null,Cf=null,If=null,Uf=null,wf=null,Df=null,Vf=null,xf=null,Bf=null,kf=Re([fc,pc,Tc,Sc,hc,mc,Ac,gc,vc,Rc,bc,Oc,Pc,Mc,Nc,Lc,yc,Cc,Ic,Uc,wc,Xs,Dc,Vc,xc,Bc,kc,Gc,Hc,Fc,Kc,jc,Wc,Yc,zc,$c,Xc,Jc,Qc,Zc,qc,tl,el,nl,rl,il,sl,ol,al,ul,cl,ll,dl,_l,El,fl,pl,Tl,Sl,hl,ml,Al,gl,vl,Rl,bl,Ol,Pl,Ml,Nl,Ll,yl,Cl,Il,Ul,wl,Dl,Vl,xl,Bl,kl]),Hl="alibaba_cloud",Fl="aws",Kl="azure",jl="gcp",Gf=null,Hf=null,Ff=null,Kf=null,jf=Re([Hl,Fl,Kl,jl]),Wl="alibaba_cloud_ecs",Yl="alibaba_cloud_fc",zl="aws_ec2",$l="aws_ecs",Xl="aws_eks",Jl="aws_lambda",Ql="aws_elastic_beanstalk",Zl="azure_vm",ql="azure_container_instances",td="azure_aks",ed="azure_functions",nd="azure_app_service",rd="gcp_compute_engine",id="gcp_cloud_run",sd="gcp_kubernetes_engine",od="gcp_cloud_functions",ad="gcp_app_engine",Wf=null,Yf=null,zf=null,$f=null,Xf=null,Jf=null,Qf=null,Zf=null,qf=null,tp=null,ep=null,np=null,rp=null,ip=null,sp=null,op=null,ap=null,up=Re([Wl,Yl,zl,$l,Xl,Jl,Ql,Zl,ql,td,ed,nd,rd,id,sd,od,ad]),ud="ec2",cd="fargate",cp=null,lp=null,dp=Re([ud,cd]),ld="amd64",dd="arm32",_d="arm64",Ed="ia64",fd="ppc32",pd="ppc64",Td="x86",_p=null,Ep=null,fp=null,pp=null,Tp=null,Sp=null,hp=null,mp=Re([ld,dd,_d,Ed,fd,pd,Td]),Sd="windows",hd="linux",md="darwin",Ad="freebsd",gd="netbsd",vd="openbsd",Rd="dragonflybsd",bd="hpux",Od="aix",Pd="solaris",Md="z_os",Ap=null,gp=null,vp=null,Rp=null,bp=null,Op=null,Pp=null,Mp=null,Np=null,Lp=null,yp=null,Cp=Re([Sd,hd,md,Ad,gd,vd,Rd,bd,Od,Pd,Md]),Nd="cpp",Ld="dotnet",yd="erlang",Cd="go",Id="java",Ud="nodejs",wd="php",Dd="python",Vd="ruby",xd="webjs",Ip=null,Up=null,wp=null,Dp=null,Vp=null,xp=null,Bp=null,kp=null,Gp=null,Hp=null,Fp=Re([Nd,Ld,yd,Cd,Id,Ud,wd,Dd,Vd,xd]),Bd="session.id",kd="deployment.environment.name",Gd="service.namespace",Hd="process.runtime.name",Fd="process.runtime.version",Kd="telemetry.distro.name",jd="telemetry.distro.version",Wd="browser.brands",Yd="browser.language",zd="browser.mobile",$d="browser.platform";class Xd{constructor(t,n){this.processor=t,this.metas=n}forceFlush(){return this.processor.forceFlush()}onStart(t,n){var r;const i=this.metas.value.session;i?.id&&(t.attributes[Bd]=i.id,t.attributes.session_id=i.id);const s=(r=this.metas.value.user)!==null&&r!==void 0?r:{};s.email&&(t.attributes["user.email"]=s.email),s.id&&(t.attributes["user.id"]=s.id),s.username&&(t.attributes["user.name"]=s.username),s.fullName&&(t.attributes["user.full_name"]=s.fullName),s.roles&&(t.attributes["user.roles"]=s.roles.split(",").map(o=>o.trim())),s.hash&&(t.attributes["user.hash"]=s.hash),this.processor.onStart(t,n)}onEnd(t){this.processor.onEnd(t)}shutdown(){return this.processor.shutdown()}}var Jd=f(94989),Qd=f(99525);const Zd="duration_ns";function qd(e=[]){var t,n;for(const r of e){const{scopeSpans:i}=r;for(const s of i){const{scope:o,spans:a=[]}=s;for(const u of a){if(u.kind!==Qd.i1.SPAN_KIND_CLIENT)continue;const _={traceId:u.traceId.toString(),spanId:u.spanId.toString()},p={};for(const U of u.attributes)p[U.key]=String(Object.values(U.value)[0]);!Number.isNaN(u.endTimeUnixNano)&&!Number.isNaN(u.startTimeUnixNano)&&(p[Zd]=String(Number(u.endTimeUnixNano)-Number(u.startTimeUnixNano)));const S=((t=o?.name)!==null&&t!==void 0?t:"").indexOf("-");let C=Ut;o?.name&&(S===-1&&(C=(n=o.name.split("/")[1])!==null&&n!==void 0?n:o.name),S>-1&&(C=o?.name.substring(S+1))),st.P.api.pushEvent(`faro.tracing.${C}`,p,void 0,{spanContext:_,timestampOverwriteMs:Number(u.endTimeUnixNano)/1e6,customPayloadTransformer:U=>{var D,B;return p["faro.action.user.name"]!=null&&p["faro.action.user.parentId"]!=null&&(U.action={name:p["faro.action.user.name"],parentId:p["faro.action.user.parentId"]},(D=U.attributes)===null||D===void 0||delete D["faro.action.user.name"],(B=U.attributes)===null||B===void 0||delete B["faro.action.user.parentId"]),U}})}}}}class t_{constructor(t){this.config=t}export(t,n){const r=(0,Jd.sJ)(t,{useHex:!0,useLongBits:!1});this.config.api.pushTraces(r),qd(r.resourceSpans),n({code:$s.V.SUCCESS})}shutdown(){return Promise.resolve(void 0)}}class e_{constructor(t){this.processor=t,xe.subscribe(n=>{if(n.type===Ae){this.message=n;return}[yr,Ir,Cr].includes(n.type)&&(this.message=void 0)})}forceFlush(){return this.processor.forceFlush()}onStart(t,n){var r,i;t.kind===ke.CLIENT&&this.message&&(t.attributes["faro.action.user.name"]=(r=this.message)===null||r===void 0?void 0:r.name,t.attributes["faro.action.user.parentId"]=(i=this.message)===null||i===void 0?void 0:i.parentId),this.processor.onStart(t,n)}onEnd(t){this.processor.onEnd(t)}shutdown(){return this.processor.shutdown()}}let Nt=console.error.bind(console);function ln(e,t,n){const r=!!e[t]&&Object.prototype.propertyIsEnumerable.call(e,t);Object.defineProperty(e,t,{configurable:!0,enumerable:r,writable:!0,value:n})}const Wr=(e,t,n)=>{if(!e||!e[t]){Nt("no original function "+String(t)+" to wrap");return}if(!n){Nt("no wrapper function"),Nt(new Error().stack);return}const r=e[t];if(typeof r!="function"||typeof n!="function"){Nt("original object and wrapper must be functions");return}const i=n(r,t);return ln(i,"__original",r),ln(i,"__unwrap",()=>{e[t]===i&&ln(e,t,r)}),ln(i,"__wrapped",!0),ln(e,t,i),i},Js=(e,t,n)=>{if(e)Array.isArray(e)||(e=[e]);else{Nt("must provide one or more modules to patch"),Nt(new Error().stack);return}if(!(t&&Array.isArray(t))){Nt("must provide one or more functions to wrap on modules");return}e.forEach(r=>{t.forEach(i=>{Wr(r,i,n)})})},Yr=(e,t)=>{if(!e||!e[t]){Nt("no function to unwrap."),Nt(new Error().stack);return}const n=e[t];if(!n.__unwrap)Nt("no original to unwrap to -- has "+String(t)+" already been unwrapped?");else{n.__unwrap();return}},Qs=(e,t)=>{if(e)Array.isArray(e)||(e=[e]);else{Nt("must provide one or more modules to patch"),Nt(new Error().stack);return}if(!(t&&Array.isArray(t))){Nt("must provide one or more functions to unwrap on modules");return}e.forEach(n=>{t.forEach(r=>{Yr(n,r)})})};function jn(e){e&&e.logger&&(typeof e.logger!="function"?Nt("new logger isn't a function, not replacing"):Nt=e.logger)}jn.wrap=Wr,jn.massWrap=Js,jn.unwrap=Yr,jn.massUnwrap=Qs;class n_{instrumentationName;instrumentationVersion;_config={};_tracer;_meter;_logger;_diag;constructor(t,n,r){this.instrumentationName=t,this.instrumentationVersion=n,this.setConfig(r),this._diag=Et.s.createComponentLogger({namespace:t}),this._tracer=Mt.u.getTracer(t,n),this._meter=Us.getMeter(t,n),this._logger=Bs.getLogger(t,n),this._updateMetricInstruments()}_wrap=Wr;_unwrap=Yr;_massWrap=Js;_massUnwrap=Qs;get meter(){return this._meter}setMeterProvider(t){this._meter=t.getMeter(this.instrumentationName,this.instrumentationVersion),this._updateMetricInstruments()}get logger(){return this._logger}setLoggerProvider(t){this._logger=t.getLogger(this.instrumentationName,this.instrumentationVersion)}getModuleDefinitions(){const t=this.init()??[];return Array.isArray(t)?t:[t]}_updateMetricInstruments(){}getConfig(){return this._config}setConfig(t){this._config={enabled:!0,...t}}setTracerProvider(t){this._tracer=t.getTracer(this.instrumentationName,this.instrumentationVersion)}get tracer(){return this._tracer}_runSpanCustomizationHook(t,n,r,i){if(t)try{t(r,i)}catch(s){this._diag.error("Error running span customization hook due to exception in handler",{triggerName:n},s)}}}class Zs extends n_{constructor(t,n,r){super(t,n,r),this._config.enabled&&this.enable()}}var St;(function(e){e[e.STABLE=1]="STABLE",e[e.OLD=2]="OLD",e[e.DUPLICATE=3]="DUPLICATE"})(St||(St={}));function qs(e,t){let n=St.OLD;const r=t?.split(",").map(i=>i.trim()).filter(i=>i!=="");for(const i of r??[])if(i.toLowerCase()===e+"/dup"){n=St.DUPLICATE;break}else i.toLowerCase()===e&&(n=St.STABLE);return n}function zr(e,t,n){let r,i;try{i=e()}catch(s){r=s}finally{if(t(r,i),r&&!n)throw r;return i}}async function Kp(e,t,n){let r,i;try{i=await e()}catch(s){r=s}finally{if(t(r,i),r&&!n)throw r;return i}}function $r(e){return typeof e=="function"&&typeof e.__original=="function"&&typeof e.__unwrap=="function"&&e.__wrapped===!0}var Xr=f(78047),dt;(function(e){e.CONNECT_END="connectEnd",e.CONNECT_START="connectStart",e.DECODED_BODY_SIZE="decodedBodySize",e.DOM_COMPLETE="domComplete",e.DOM_CONTENT_LOADED_EVENT_END="domContentLoadedEventEnd",e.DOM_CONTENT_LOADED_EVENT_START="domContentLoadedEventStart",e.DOM_INTERACTIVE="domInteractive",e.DOMAIN_LOOKUP_END="domainLookupEnd",e.DOMAIN_LOOKUP_START="domainLookupStart",e.ENCODED_BODY_SIZE="encodedBodySize",e.FETCH_START="fetchStart",e.LOAD_EVENT_END="loadEventEnd",e.LOAD_EVENT_START="loadEventStart",e.NAVIGATION_START="navigationStart",e.REDIRECT_END="redirectEnd",e.REDIRECT_START="redirectStart",e.REQUEST_START="requestStart",e.RESPONSE_END="responseEnd",e.RESPONSE_START="responseStart",e.SECURE_CONNECTION_START="secureConnectionStart",e.START_TIME="startTime",e.UNLOAD_EVENT_END="unloadEventEnd",e.UNLOAD_EVENT_START="unloadEventStart"})(dt||(dt={}));const r_="http.response_content_length",i_="http.response_content_length_uncompressed";let Jr;function s_(){return Jr||(Jr=document.createElement("a")),Jr}function o_(e,t){return t in e}function se(e,t,n,r=!0){if(o_(n,t)&&typeof n[t]=="number"&&!(r&&n[t]===0))return e.addEvent(t,n[t])}function Wn(e,t,n=!1,r,i){if(r===void 0&&(r=t[dt.START_TIME]!==0),n||(se(e,dt.FETCH_START,t,r),se(e,dt.DOMAIN_LOOKUP_START,t,r),se(e,dt.DOMAIN_LOOKUP_END,t,r),se(e,dt.CONNECT_START,t,r),se(e,dt.SECURE_CONNECTION_START,t,r),se(e,dt.CONNECT_END,t,r),se(e,dt.REQUEST_START,t,r),se(e,dt.RESPONSE_START,t,r),se(e,dt.RESPONSE_END,t,r)),!i){const s=t[dt.ENCODED_BODY_SIZE];s!==void 0&&e.setAttribute(r_,s);const o=t[dt.DECODED_BODY_SIZE];o!==void 0&&s!==o&&e.setAttribute(i_,o)}}function a_(e){return e.slice().sort((t,n)=>{const r=t[dt.FETCH_START],i=n[dt.FETCH_START];return r>i?1:r<i?-1:0})}function to(){return typeof location<"u"?location.origin:void 0}function eo(e,t,n,r,i=new WeakSet,s){const o=te(e);e=o.toString();const a=c_(e,t,n,r,i,s);if(a.length===0)return{mainRequest:void 0};if(a.length===1)return{mainRequest:a[0]};const u=a_(a);if(o.origin!==to()&&u.length>1){let _=u[0],p=u_(u,_[dt.RESPONSE_END],n);const S=_[dt.RESPONSE_END];return p[dt.FETCH_START]<S&&(p=_,_=void 0),{corsPreFlightRequest:_,mainRequest:p}}else return{mainRequest:a[0]}}function u_(e,t,n){const r=(0,at.u5)(n),i=(0,at.u5)((0,at.KJ)(t));let s=e[1],o;const a=e.length;for(let u=1;u<a;u++){const _=e[u],p=(0,at.u5)((0,at.KJ)(_[dt.FETCH_START])),S=(0,at.u5)((0,at.KJ)(_[dt.RESPONSE_END])),C=r-S;p>=i&&(!o||C<o)&&(o=C,s=_)}return s}function c_(e,t,n,r,i,s){const o=(0,at.u5)(t),a=(0,at.u5)(n);let u=r.filter(_=>{const p=(0,at.u5)((0,at.KJ)(_[dt.FETCH_START])),S=(0,at.u5)((0,at.KJ)(_[dt.RESPONSE_END]));return _.initiatorType.toLowerCase()===(s||"xmlhttprequest")&&_.name===e&&p>=o&&S<=a});return u.length>0&&(u=u.filter(_=>!i.has(_))),u}function te(e){if(typeof URL=="function")return new URL(e,typeof document<"u"?document.baseURI:typeof location<"u"?location.href:void 0);const t=s_();return t.href=e,t}function jp(e){return te(e).href}function l_(e,t){if(e.nodeType===Node.DOCUMENT_NODE)return"/";const n=__(e,t);if(t&&n.indexOf("@id")>0)return n;let r="";return e.parentNode&&(r+=l_(e.parentNode,!1)),r+=n,r}function d_(e){if(!e.parentNode)return 0;const t=[e.nodeType];e.nodeType===Node.CDATA_SECTION_NODE&&t.push(Node.TEXT_NODE);let n=Array.from(e.parentNode.childNodes);return n=n.filter(r=>{const i=r.localName;return t.indexOf(r.nodeType)>=0&&i===e.localName}),n.length>=1?n.indexOf(e)+1:0}function __(e,t){const n=e.nodeType,r=d_(e);let i="";if(n===Node.ELEMENT_NODE){const s=e.getAttribute("id");if(t&&s)return`//*[@id="${s}"]`;i=e.localName}else if(n===Node.TEXT_NODE||n===Node.CDATA_SECTION_NODE)i="text()";else if(n===Node.COMMENT_NODE)i="comment()";else return"";return i&&r>1?`/${i}[${r}]`:`/${i}`}function no(e,t){let n=t||[];return(typeof n=="string"||n instanceof RegExp)&&(n=[n]),te(e).origin===to()?!0:n.some(i=>(0,Xr.f)(e,i))}var Yn;(function(e){e.COMPONENT="component",e.HTTP_STATUS_TEXT="http.status_text"})(Yn||(Yn={}));var fe=f(77805);const ro=Et.s.createComponentLogger({namespace:"@opentelemetry/opentelemetry-instrumentation-fetch/utils"});function E_(...e){if(e[0]instanceof URL||typeof e[0]=="string"){const t=e[1];if(!t?.body)return Promise.resolve();if(t.body instanceof ReadableStream){const{body:n,length:r}=f_(t.body);return t.body=n,r}else return Promise.resolve(T_(t.body))}else{const t=e[0];return t?.body?t.clone().text().then(n=>Qr(n)):Promise.resolve()}}function f_(e){if(!e.pipeThrough)return ro.warn("Platform has ReadableStream but not pipeThrough!"),{body:e,length:Promise.resolve(void 0)};let t=0,n;const r=new Promise(s=>{n=s}),i=new TransformStream({start(){},async transform(s,o){const a=await s;t+=a.byteLength,o.enqueue(s)},flush(){n(t)}});return{body:e.pipeThrough(i),length:r}}function p_(e){return typeof Document<"u"&&e instanceof Document}function T_(e){if(p_(e))return new XMLSerializer().serializeToString(document).length;if(typeof e=="string")return Qr(e);if(e instanceof Blob)return e.size;if(e instanceof FormData)return h_(e);if(e instanceof URLSearchParams)return Qr(e.toString());if(e.byteLength!==void 0)return e.byteLength;ro.warn("unknown body type")}const S_=new TextEncoder;function Qr(e){return S_.encode(e).byteLength}function h_(e){let t=0;for(const[n,r]of e.entries())t+=n.length,r instanceof Blob?t+=r.size:t+=r.length;return t}function m_(e){const t=g_(),n=e.toUpperCase();return n in t?n:"_OTHER"}const A_={CONNECT:!0,DELETE:!0,GET:!0,HEAD:!0,OPTIONS:!0,PATCH:!0,POST:!0,PUT:!0,TRACE:!0};let dn;function g_(){if(dn===void 0){const e=(0,Rt.f7)("OTEL_INSTRUMENTATION_HTTP_KNOWN_METHODS");e&&e.length>0?(dn={},e.forEach(t=>{dn[t]=!0})):dn=A_}return dn}const v_={"https:":"443","http:":"80"};function R_(e){const t=Number(e.port||v_[e.protocol]);if(t&&!isNaN(t))return t}const io="0.202.0";var Zr=f(89869);const b_=300,so=typeof process=="object"&&process.release?.name==="node";class O_ extends Zs{component="fetch";version=io;moduleName=this.component;_usedResources=new WeakSet;_tasksCount=0;_semconvStability;constructor(t={}){super("@opentelemetry/instrumentation-fetch",io,t),this._semconvStability=qs("http",t?.semconvStabilityOptIn)}init(){}_addChildSpan(t,n){const r=this.tracer.startSpan("CORS Preflight",{startTime:n[dt.FETCH_START]},Mt.u.setSpan(ht._.active(),t)),i=!(this._semconvStability&St.OLD);Wn(r,n,this.getConfig().ignoreNetworkEvents,void 0,i),r.end(n[dt.RESPONSE_END])}_addFinalSpanAttributes(t,n){const r=te(n.url);if(this._semconvStability&St.OLD&&(t.setAttribute(fe.a3,n.status),n.statusText!=null&&t.setAttribute(Yn.HTTP_STATUS_TEXT,n.statusText),t.setAttribute(fe.Mm,r.host),t.setAttribute(fe.v8,r.protocol.replace(":","")),typeof navigator<"u"&&t.setAttribute(fe.ds,navigator.userAgent)),this._semconvStability&St.STABLE){t.setAttribute(rt.OR,n.status),t.setAttribute(rt.kS,r.hostname);const i=R_(r);i&&t.setAttribute(rt.A2,i)}}_addHeaders(t,n){if(!no(n,this.getConfig().propagateTraceHeaderCorsUrls)){const r={};ie.$.inject(ht._.active(),r),Object.keys(r).length>0&&this._diag.debug("headers inject skipped due to CORS policy");return}if(t instanceof Request)ie.$.inject(ht._.active(),t.headers,{set:(r,i,s)=>r.set(i,typeof s=="string"?s:String(s))});else if(t.headers instanceof Headers)ie.$.inject(ht._.active(),t.headers,{set:(r,i,s)=>r.set(i,typeof s=="string"?s:String(s))});else if(t.headers instanceof Map)ie.$.inject(ht._.active(),t.headers,{set:(r,i,s)=>r.set(i,typeof s=="string"?s:String(s))});else{const r={};ie.$.inject(ht._.active(),r),t.headers=Object.assign({},r,t.headers||{})}}_clearResources(){this._tasksCount===0&&this.getConfig().clearTimingResources&&(performance.clearResourceTimings(),this._usedResources=new WeakSet)}_createSpan(t,n={}){if(Xr.K(t,this.getConfig().ignoreUrls)){this._diag.debug("ignoring span as url matches ignored url");return}let r="";const i={};if(this._semconvStability&St.OLD){const s=(n.method||"GET").toUpperCase();r=`HTTP ${s}`,i[Yn.COMPONENT]=this.moduleName,i[fe.rp]=s,i[fe.XV]=t}if(this._semconvStability&St.STABLE){const s=n.method,o=m_(n.method||"GET");r||(r=o),i[rt.n4]=o,o!==s&&(i[rt.nW]=s),i[rt.WQ]=t}return this.tracer.startSpan(r,{kind:ke.CLIENT,attributes:i})}_findResourceAndAddNetworkEvents(t,n,r){let i=n.entries;if(!i.length){if(!performance.getEntriesByType)return;i=performance.getEntriesByType("resource")}const s=eo(n.spanUrl,n.startTime,r,i,this._usedResources,"fetch");if(s.mainRequest){const o=s.mainRequest;this._markResourceAsUsed(o);const a=s.corsPreFlightRequest;a&&(this._addChildSpan(t,a),this._markResourceAsUsed(a));const u=!(this._semconvStability&St.OLD);Wn(t,o,this.getConfig().ignoreNetworkEvents,void 0,u)}}_markResourceAsUsed(t){this._usedResources.add(t)}_endSpan(t,n,r){const i=at.lg(Date.now()),s=at._5();this._addFinalSpanAttributes(t,r),this._semconvStability&St.STABLE&&r.status>=400&&(t.setStatus({code:an.s.ERROR}),t.setAttribute(rt.oJ,String(r.status))),setTimeout(()=>{n.observer?.disconnect(),this._findResourceAndAddNetworkEvents(t,n,s),this._tasksCount--,this._clearResources(),t.end(i)},b_)}_patchConstructor(){return t=>{const n=this;return function(...i){const s=this,o=te(i[0]instanceof Request?i[0].url:String(i[0])).href,a=i[0]instanceof Request?i[0]:i[1]||{},u=n._createSpan(o,a);if(!u)return t.apply(this,i);const _=n._prepareSpanData(o);n.getConfig().measureRequestSize&&E_(...i).then(D=>{D&&(n._semconvStability&St.OLD&&u.setAttribute(fe.z4,D),n._semconvStability&St.STABLE&&u.setAttribute(fe.Me,D))}).catch(D=>{n._diag.warn("getFetchBodyLength",D)});function p(D,B){n._applyAttributesAfterFetch(D,a,B),n._endSpan(D,_,{status:B.status||0,statusText:B.message,url:o})}function S(D,B){n._applyAttributesAfterFetch(D,a,B),B.status>=200&&B.status<400?n._endSpan(D,_,B):n._endSpan(D,_,{status:B.status,statusText:B.statusText,url:o})}function C(D,B,k){try{const it=k.clone().body;if(it){const Ot=it.getReader(),mt=()=>{Ot.read().then(({done:et})=>{et?S(D,k):mt()},et=>{p(D,et)})};mt()}else S(D,k)}finally{B(k)}}function U(D,B,k){try{p(D,k)}finally{B(k)}}return new Promise((D,B)=>ht._.with(Mt.u.setSpan(ht._.active(),u),()=>(n._addHeaders(a,o),n._callRequestHook(u,a),n._tasksCount++,t.apply(s,a instanceof Request?[a]:[o,a]).then(C.bind(s,u,D),U.bind(s,u,B)))))}}}_applyAttributesAfterFetch(t,n,r){const i=this.getConfig().applyCustomAttributesOnSpan;i&&zr(()=>i(t,n,r),s=>{s&&this._diag.error("applyCustomAttributesOnSpan",s)},!0)}_callRequestHook(t,n){const r=this.getConfig().requestHook;r&&zr(()=>r(t,n),i=>{i&&this._diag.error("requestHook",i)},!0)}_prepareSpanData(t){const n=at._5(),r=[];if(typeof PerformanceObserver!="function")return{entries:r,startTime:n,spanUrl:t};const i=new PerformanceObserver(s=>{s.getEntries().forEach(a=>{a.initiatorType==="fetch"&&a.name===t&&r.push(a)})});return i.observe({entryTypes:["resource"]}),{entries:r,observer:i,startTime:n,spanUrl:t}}enable(){if(so){this._diag.warn("this instrumentation is intended for web usage only, it does not instrument Node.js's fetch()");return}$r(fetch)&&(this._unwrap(Zr.X,"fetch"),this._diag.debug("removing previous patch for constructor")),this._wrap(Zr.X,"fetch",this._patchConstructor())}disable(){so||(this._unwrap(Zr.X,"fetch"),this._usedResources=new WeakSet)}}const P_="http.host",M_="http.method",N_="http.request.body.size",L_="http.request_content_length_uncompressed",Wp="http.response_content_length",y_="http.scheme",C_="http.status_code",I_="http.url",U_="http.user_agent";var oe;(function(e){e.METHOD_OPEN="open",e.METHOD_SEND="send",e.EVENT_ABORT="abort",e.EVENT_ERROR="error",e.EVENT_LOAD="loaded",e.EVENT_TIMEOUT="timeout"})(oe||(oe={}));const w_=Et.s.createComponentLogger({namespace:"@opentelemetry/opentelemetry-instrumentation-xml-http-request/utils"});function D_(e){return typeof Document<"u"&&e instanceof Document}function V_(e){if(D_(e))return new XMLSerializer().serializeToString(document).length;if(typeof e=="string")return oo(e);if(e instanceof Blob)return e.size;if(e instanceof FormData)return B_(e);if(e instanceof URLSearchParams)return oo(e.toString());if(e.byteLength!==void 0)return e.byteLength;w_.warn("unknown body type")}const x_=new TextEncoder;function oo(e){return x_.encode(e).byteLength}function B_(e){let t=0;for(const[n,r]of e.entries())t+=n.length,r instanceof Blob?t+=r.size:t+=r.length;return t}function k_(e){const t=H_(),n=e.toUpperCase();return n in t?n:"_OTHER"}const G_={CONNECT:!0,DELETE:!0,GET:!0,HEAD:!0,OPTIONS:!0,PATCH:!0,POST:!0,PUT:!0,TRACE:!0};let _n;function H_(){if(_n===void 0){const e=(0,Rt.f7)("OTEL_INSTRUMENTATION_HTTP_KNOWN_METHODS");e&&e.length>0?(_n={},e.forEach(t=>{_n[t]=!0})):_n=G_}return _n}const F_={"https:":"443","http:":"80"};function K_(e){const t=Number(e.port||F_[e.protocol]);if(t&&!isNaN(t))return t}const ao="0.202.0";var qr;(function(e){e.HTTP_STATUS_TEXT="http.status_text"})(qr||(qr={}));const j_=300;class W_ extends Zs{component="xml-http-request";version=ao;moduleName=this.component;_tasksCount=0;_xhrMem=new WeakMap;_usedResources=new WeakSet;_semconvStability;constructor(t={}){super("@opentelemetry/instrumentation-xml-http-request",ao,t),this._semconvStability=qs("http",t?.semconvStabilityOptIn)}init(){}_addHeaders(t,n){const r=te(n).href;if(!no(r,this.getConfig().propagateTraceHeaderCorsUrls)){const s={};ie.$.inject(ht._.active(),s),Object.keys(s).length>0&&this._diag.debug("headers inject skipped due to CORS policy");return}const i={};ie.$.inject(ht._.active(),i),Object.keys(i).forEach(s=>{t.setRequestHeader(s,String(i[s]))})}_addChildSpan(t,n){ht._.with(Mt.u.setSpan(ht._.active(),t),()=>{const r=this.tracer.startSpan("CORS Preflight",{startTime:n[dt.FETCH_START]}),i=!(this._semconvStability&St.OLD);Wn(r,n,this.getConfig().ignoreNetworkEvents,void 0,i),r.end(n[dt.RESPONSE_END])})}_addFinalSpanAttributes(t,n,r){if(this._semconvStability&St.OLD){if(n.status!==void 0&&t.setAttribute(C_,n.status),n.statusText!==void 0&&t.setAttribute(qr.HTTP_STATUS_TEXT,n.statusText),typeof r=="string"){const i=te(r);t.setAttribute(P_,i.host),t.setAttribute(y_,i.protocol.replace(":",""))}t.setAttribute(U_,navigator.userAgent)}this._semconvStability&St.STABLE&&n.status&&t.setAttribute(rt.OR,n.status)}_applyAttributesAfterXHR(t,n){const r=this.getConfig().applyCustomAttributesOnSpan;typeof r=="function"&&zr(()=>r(t,n),i=>{i&&this._diag.error("applyCustomAttributesOnSpan",i)},!0)}_addResourceObserver(t,n){const r=this._xhrMem.get(t);!r||typeof PerformanceObserver!="function"||typeof PerformanceResourceTiming!="function"||(r.createdResources={observer:new PerformanceObserver(i=>{const s=i.getEntries(),o=te(n);s.forEach(a=>{a.initiatorType==="xmlhttprequest"&&a.name===o.href&&r.createdResources&&r.createdResources.entries.push(a)})}),entries:[]},r.createdResources.observer.observe({entryTypes:["resource"]}))}_clearResources(){this._tasksCount===0&&this.getConfig().clearTimingResources&&(un.u.clearResourceTimings(),this._xhrMem=new WeakMap,this._usedResources=new WeakSet)}_findResourceAndAddNetworkEvents(t,n,r,i,s){if(!r||!i||!s||!t.createdResources)return;let o=t.createdResources.entries;(!o||!o.length)&&(o=un.u.getEntriesByType("resource"));const a=eo(te(r).href,i,s,o,this._usedResources);if(a.mainRequest){const u=a.mainRequest;this._markResourceAsUsed(u);const _=a.corsPreFlightRequest;_&&(this._addChildSpan(n,_),this._markResourceAsUsed(_));const p=!(this._semconvStability&St.OLD);Wn(n,u,this.getConfig().ignoreNetworkEvents,void 0,p)}}_cleanPreviousSpanInformation(t){const n=this._xhrMem.get(t);if(n){const r=n.callbackToRemoveEvents;r&&r(),this._xhrMem.delete(t)}}_createSpan(t,n,r){if((0,Xr.K)(n,this.getConfig().ignoreUrls)){this._diag.debug("ignoring span as url matches ignored url");return}let i="";const s=te(n),o={};if(this._semconvStability&St.OLD&&(i=r.toUpperCase(),o[M_]=r,o[I_]=s.toString()),this._semconvStability&St.STABLE){const u=r,_=k_(r);i||(i=_),o[rt.n4]=_,_!==u&&(o[rt.nW]=u),o[rt.WQ]=s.toString(),o[rt.kS]=s.hostname;const p=K_(s);p&&(o[rt.A2]=p)}const a=this.tracer.startSpan(i,{kind:ke.CLIENT,attributes:o});return a.addEvent(oe.METHOD_OPEN),this._cleanPreviousSpanInformation(t),this._xhrMem.set(t,{span:a,spanUrl:n}),a}_markResourceAsUsed(t){this._usedResources.add(t)}_patchOpen(){return t=>{const n=this;return function(...i){const s=i[0],o=i[1];return n._createSpan(this,o,s),t.apply(this,i)}}}_patchSend(){const t=this;function n(_,p,S,C){const U=p.callbackToRemoveEvents;typeof U=="function"&&U();const{span:D,spanUrl:B,sendStartTime:k}=p;D&&(t._findResourceAndAddNetworkEvents(p,D,B,k,S),D.addEvent(_,C),t._addFinalSpanAttributes(D,p,B),D.end(C),t._tasksCount--),t._clearResources()}function r(_,p,S,C){const U=t._xhrMem.get(p);if(!U)return;if(U.status=p.status,U.statusText=p.statusText,t._xhrMem.delete(p),U.span){const k=U.span;t._applyAttributesAfterXHR(k,p),t._semconvStability&St.STABLE&&(S?C&&(k.setStatus({code:an.s.ERROR,message:C}),k.setAttribute(rt.oJ,C)):U.status&&U.status>=400&&(k.setStatus({code:an.s.ERROR}),k.setAttribute(rt.oJ,String(U.status))))}const D=(0,at._5)(),B=Date.now();setTimeout(()=>{n(_,U,D,B)},j_)}function i(){r(oe.EVENT_ERROR,this,!0,"error")}function s(){r(oe.EVENT_ABORT,this,!1)}function o(){r(oe.EVENT_TIMEOUT,this,!0,"timeout")}function a(){this.status<299?r(oe.EVENT_LOAD,this,!1):r(oe.EVENT_ERROR,this,!1)}function u(_){_.removeEventListener("abort",s),_.removeEventListener("error",i),_.removeEventListener("load",a),_.removeEventListener("timeout",o);const p=t._xhrMem.get(_);p&&(p.callbackToRemoveEvents=void 0)}return _=>function(...S){const C=t._xhrMem.get(this);if(!C)return _.apply(this,S);const U=C.span,D=C.spanUrl;if(U&&D){if(t.getConfig().measureRequestSize&&S?.[0]){const B=S[0],k=V_(B);k!==void 0&&(t._semconvStability&St.OLD&&U.setAttribute(L_,k),t._semconvStability&St.STABLE&&U.setAttribute(N_,k))}ht._.with(Mt.u.setSpan(ht._.active(),U),()=>{t._tasksCount++,C.sendStartTime=(0,at._5)(),U.addEvent(oe.METHOD_SEND),this.addEventListener("abort",s),this.addEventListener("error",i),this.addEventListener("load",a),this.addEventListener("timeout",o),C.callbackToRemoveEvents=()=>{u(this),C.createdResources&&C.createdResources.observer.disconnect()},t._addHeaders(this,D),t._addResourceObserver(this,D)})}return _.apply(this,S)}}enable(){this._diag.debug("applying patch to",this.moduleName,this.version),$r(XMLHttpRequest.prototype.open)&&(this._unwrap(XMLHttpRequest.prototype,"open"),this._diag.debug("removing previous patch from method open")),$r(XMLHttpRequest.prototype.send)&&(this._unwrap(XMLHttpRequest.prototype,"send"),this._diag.debug("removing previous patch from method send")),this._wrap(XMLHttpRequest.prototype,"open",this._patchOpen()),this._wrap(XMLHttpRequest.prototype,"send",this._patchSend())}disable(){this._diag.debug("removing patch from",this.moduleName,this.version),this._unwrap(XMLHttpRequest.prototype,"open"),this._unwrap(XMLHttpRequest.prototype,"send"),this._tasksCount=0,this._xhrMem=new WeakMap,this._usedResources=new WeakSet}}class Y_ extends W_{constructor(t={}){super(t);const n=this;this.parentCreateSpan=n._createSpan.bind(this)}_patchOpen(){return t=>{const n=this;return function(...i){try{const s=i[0];let o=hs(i[1]);n.parentCreateSpan(this,o,s)}catch(s){st.P.internalLogger.error(s)}return t.apply(this,i)}}}}function z_(e,t,n){const r=n instanceof Error?0:n.status;uo(e,r)}function $_(e,t){uo(e,t.status)}function uo(e,t){if(t==null)return;const n=t===0,r=t>=400&&t<600;(n||r)&&e.setStatus({code:an.s.ERROR})}function X_(e){return(t,n,r)=>{z_(t,n,r),e?.(t,n,r)}}function J_(e){return(t,n)=>{$_(t,n),e?.(t,n)}}var Q_=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function Z_(e={}){const{fetchInstrumentationOptions:t,xhrInstrumentationOptions:n}=e,r=Q_(e,["fetchInstrumentationOptions","xhrInstrumentationOptions"]),i=q_(t,r),s=tE(n,r);return[new O_(i),new Y_(s)]}function q_(e,t){return Object.assign(Object.assign(Object.assign(Object.assign({},t),{ignoreNetworkEvents:!0}),e),{applyCustomAttributesOnSpan:X_(e?.applyCustomAttributesOnSpan)})}function tE(e,t){return Object.assign(Object.assign(Object.assign(Object.assign({},t),{ignoreNetworkEvents:!0}),e),{applyCustomAttributesOnSpan:J_(e?.applyCustomAttributesOnSpan)})}function eE(e={}){var t;return((t=e.attributes)===null||t===void 0?void 0:t.isSampled)==="true"?Ee.RECORD_AND_SAMPLED:Ee.NOT_RECORD}class En extends Zt{constructor(t={}){super(),this.options=t,this.name="@grafana/faro-web-tracing",this.version=R}initialize(){var t,n,r,i,s;const o=this.options,a={};this.config.app.name&&(a[rt.UX]=this.config.app.name),this.config.app.namespace&&(a[Gd]=this.config.app.namespace),this.config.app.version&&(a[rt.HZ]=this.config.app.version),this.config.app.environment&&(a[kd]=this.config.app.environment,a[Gl]=this.config.app.environment);const u=this.metas.value.browser;G(u?.brands)&&(a[Wd]=u.brands.map(D=>D.brand)),u?.language&&(a[Yd]=u.language),typeof u?.mobile=="boolean"&&(a[zd]=!!u.mobile),u?.os&&(a[$d]=u.os),u?.userAgent&&(a[rt.Mz]=u.userAgent),a[Hd]="browser",a[Fd]=(t=this.metas.value.browser)===null||t===void 0?void 0:t.userAgent,a[Kd]="faro-web-sdk",a[jd]=R,Object.assign(a,o.resourceAttributes);const _=ks().merge(jr(a));new cc({resource:_,sampler:{shouldSample:()=>({decision:eE(this.api.getSession())})},spanProcessors:[(n=o.spanProcessor)!==null&&n!==void 0?n:new e_(new Xd(new Ec(new t_({api:this.api}),{scheduledDelayMillis:En.SCHEDULED_BATCH_DELAY_MS,maxExportBatchSize:30}),this.metas))]}).register({propagator:(r=o.propagator)!==null&&r!==void 0?r:new ys.lm,contextManager:o.contextManager});const{propagateTraceHeaderCorsUrls:S,fetchInstrumentationOptions:C,xhrInstrumentationOptions:U}=(i=this.options.instrumentationOptions)!==null&&i!==void 0?i:{};Fu({instrumentations:(s=o.instrumentations)!==null&&s!==void 0?s:Z_({ignoreUrls:this.getIgnoreUrls(),propagateTraceHeaderCorsUrls:S,fetchInstrumentationOptions:C,xhrInstrumentationOptions:U})}),this.api.initOTEL(Mt.u,ht._)}getIgnoreUrls(){return this.transports.transports.flatMap(t=>t.getIgnoreUrls())}}En.SCHEDULED_BATCH_DELAY_MS=1e3;var ti=f(78646),nE=f(43173);class rE extends O{constructor(t){super(),this.name="EchoSrvTransport",this.version=nE.$.buildInfo.version,this.ignoreUrls=[],this.ignoreUrls=t?.ignoreUrls??[]}send(t){(0,ti.x$)().addEvent({type:ti.on.GrafanaJavascriptAgent,payload:t})}isBatched(){return!0}getIgnoreUrls(){return this.ignoreUrls}}function iE(){try{return document.location.hostname!==window.parent.location.hostname}catch{return!0}}const sE=[/\.(google-analytics|googletagmanager)\.com/,/frontend-metrics/,/\/collect(?:\/[\w]*)?$/];class oE{constructor(t){this.options=t,this.supportedEvents=[ti.on.GrafanaJavascriptAgent],this.addEvent=a=>{},this.flush=()=>{};const n=[],r=[new RegExp(`.*${(0,P.$f)(t.customEndpoint)}.*`),...sE,...t.ignoreUrls],i=[new rE({ignoreUrls:r})],s=t.allInstrumentationsEnabled||t.consoleInstrumentalizationEnabled?{serializeErrors:!0}:{};t.customEndpoint&&!iE()&&i.push(new Zn({url:t.customEndpoint,apiKey:t.apiKey})),t.errorInstrumentalizationEnabled&&n.push(new Er),t.consoleInstrumentalizationEnabled&&n.push(new re),t.webVitalsInstrumentalizationEnabled&&n.push(new fs),t.tracingInstrumentalizationEnabled&&n.push(new En),n.push(new ps);const o={globalObjectKey:t.globalObjectKey||"faro",preventGlobalExposure:t.preventGlobalExposure||!1,app:{name:"grafana-frontend",version:t.buildInfo.version,environment:t.buildInfo.env},instrumentations:t.allInstrumentationsEnabled?[...Ps(),new En]:n,consoleInstrumentation:s,trackWebVitalsAttribution:t.webVitalsInstrumentalizationEnabled||t.allInstrumentationsEnabled,transports:i,ignoreErrors:["ResizeObserver loop limit exceeded","ResizeObserver loop completed","Non-Error exception captured with keys","Failed sending payload to the receiver"],ignoreUrls:r,sessionTracking:{persistent:!0},batching:{sendTimeout:1e3},internalLoggerLevel:t.internalLoggerLevel||M};this.faroInstance=Tu(o),t.user&&this.faroInstance.api.setUser({id:t.user.id,attributes:{orgId:String(t.user.orgId)||""}})}}},97872:(j,g,f)=>{"use strict";f.d(g,{RH:()=>A,dM:()=>y,w9:()=>h});var P=f(47397),h="0000000000000000",A="00000000000000000000000000000000",y={traceId:A,spanId:h,traceFlags:P.X.NONE}},98151:(j,g,f)=>{"use strict";f.d(g,{L7:()=>A,Qd:()=>v,hD:()=>M,pX:()=>y});var P=f(11616),h=f(82711);function A(I){return I.reduce((V,O)=>{const R=`${V}${V!==""?h.EC:""}${O}`;return R.length>h.kI?V:R},"")}function y(I){return I.getAllEntries().map(([V,O])=>{let R=`${encodeURIComponent(V)}=${encodeURIComponent(O.value)}`;return O.metadata!==void 0&&(R+=h.hN+O.metadata.toString()),R})}function v(I){const V=I.split(h.hN);if(V.length<=0)return;const O=V.shift();if(!O)return;const R=O.indexOf(h.un);if(R<=0)return;const x=decodeURIComponent(O.substring(0,R).trim()),c=decodeURIComponent(O.substring(R+1).trim());let E;return V.length>0&&(E=(0,P.B)(V.join(h.hN))),{key:x,value:c,metadata:E}}function M(I){const V={};return typeof I=="string"&&I.length>0&&I.split(h.EC).forEach(O=>{const R=v(O);R!==void 0&&R.value.length>0&&(V[R.key]=R.value)}),V}},99525:(j,g)=>{"use strict";var f;f={value:!0},g.BR=g.i1=void 0;var P;(function(A){A[A.SPAN_KIND_UNSPECIFIED=0]="SPAN_KIND_UNSPECIFIED",A[A.SPAN_KIND_INTERNAL=1]="SPAN_KIND_INTERNAL",A[A.SPAN_KIND_SERVER=2]="SPAN_KIND_SERVER",A[A.SPAN_KIND_CLIENT=3]="SPAN_KIND_CLIENT",A[A.SPAN_KIND_PRODUCER=4]="SPAN_KIND_PRODUCER",A[A.SPAN_KIND_CONSUMER=5]="SPAN_KIND_CONSUMER"})(P=g.i1||(g.i1={}));var h;(function(A){A[A.STATUS_CODE_UNSET=0]="STATUS_CODE_UNSET",A[A.STATUS_CODE_OK=1]="STATUS_CODE_OK",A[A.STATUS_CODE_ERROR=2]="STATUS_CODE_ERROR"})(h=g.BR||(g.BR={}))},99756:(j,g,f)=>{"use strict";f.d(g,{I:()=>h});class P{_promise;_resolve;_reject;constructor(){this._promise=new Promise((y,v)=>{this._resolve=y,this._reject=v})}get promise(){return this._promise}resolve(y){this._resolve(y)}reject(y){this._reject(y)}}class h{_callback;_that;_isCalled=!1;_deferred=new P;constructor(y,v){this._callback=y,this._that=v}get isCalled(){return this._isCalled}get promise(){return this._deferred.promise}call(...y){if(!this._isCalled){this._isCalled=!0;try{Promise.resolve(this._callback.call(this._that,...y)).then(v=>this._deferred.resolve(v),v=>this._deferred.reject(v))}catch(v){this._deferred.reject(v)}}return this._deferred.promise}}}}]);

//# sourceMappingURL=5718.6a7398a1fcaa62380b2a.js.map