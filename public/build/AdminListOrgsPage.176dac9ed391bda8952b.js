"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[9736],{55026:(B,h,t)=>{t.r(h),t.d(h,{default:()=>K});var e=t(74848),m=t(96540),u=t(5805),n=t(92745),r=t(68143),x=t(45861),g=t(13791),y=t(15130),j=t(11257),O=t(22803),o=t(70255),A=t(71599),b=t(63142),C=t(21348),N=t(73427);const v=()=>(0,e.jsx)("thead",{children:(0,e.jsxs)("tr",{children:[(0,e.jsx)("th",{children:(0,e.jsx)(n.x6,{i18nKey:"admin.orgs.id-header",children:"ID"})}),(0,e.jsx)("th",{children:(0,e.jsx)(n.x6,{i18nKey:"admin.orgs.name-header",children:"Name"})}),(0,e.jsx)("th",{style:{width:"1%"}})]})});function D({orgs:s,onDelete:a}){const i=N.TP.hasPermission(j.w.OrgsDelete),[l,c]=(0,m.useState)(),z=l?.name;return(0,e.jsxs)("table",{className:"filter-table form-inline filter-table--hover",children:[v(),(0,e.jsx)("tbody",{children:s.map(d=>(0,e.jsxs)("tr",{children:[(0,e.jsx)("td",{className:"link-td",children:(0,e.jsx)("a",{href:`admin/orgs/edit/${d.id}`,children:d.id})}),(0,e.jsx)("td",{className:"link-td",children:(0,e.jsx)("a",{href:`admin/orgs/edit/${d.id}`,children:d.name})}),(0,e.jsx)("td",{className:"text-right",children:(0,e.jsx)(x.$n,{variant:"destructive",size:"sm",icon:"times",onClick:()=>c(d),"aria-label":(0,n.t)("admin.admin-orgs-table.aria-label-delete-org","Delete org"),disabled:!i})})]},`${d.id}-${d.name}`))}),l&&(0,e.jsx)(A.u,{isOpen:!0,icon:"trash-alt",title:(0,n.t)("admin.admin-orgs-table.title-delete","Delete"),body:(0,e.jsx)("div",{children:(0,e.jsxs)(n.x6,{i18nKey:"admin.orgs.delete-body",children:["Are you sure you want to delete '",{deleteOrgName:z},"'?",(0,e.jsx)("br",{})," ",(0,e.jsx)("small",{children:"All dashboards for this organization will be removed!"})]})}),confirmText:(0,n.t)("admin.admin-orgs-table.confirmText-delete","Delete"),onDismiss:()=>c(void 0),onConfirm:()=>{a(l.id),c(void 0)}})]})}const T=({rootProps:s})=>{const a=(0,b.of)(P);return(0,e.jsxs)("table",{className:"filter-table",...s,children:[v(),(0,e.jsx)("tbody",{children:new Array(3).fill(null).map((i,l)=>(0,e.jsxs)("tr",{children:[(0,e.jsx)("td",{children:(0,e.jsx)(o.A,{width:16})}),(0,e.jsx)("td",{children:(0,e.jsx)(o.A,{width:240})}),(0,e.jsx)("td",{children:(0,e.jsx)(o.A,{containerClassName:a.deleteButton,width:22,height:24})})]},l))})]})},f=(0,C.j)(D,T),P=s=>({deleteButton:(0,O.css)({alignItems:"center",display:"flex",height:30,lineHeight:1})}),S=async s=>await(0,r.AI)().delete("/api/orgs/"+s),I=async()=>await(0,r.AI)().get("/api/orgs"),$=s=>(0,r.NF)(s)?s?.data?.message:"An unexpected error happened.";function K(){const[s,a]=(0,u.default)(async()=>await I(),[]),i=y.TP.hasPermission(j.w.OrgsCreate);return(0,m.useEffect)(()=>{a()},[a]),(0,e.jsx)(g.Y,{navId:"global-orgs",actions:(0,e.jsx)(x.z9,{icon:"plus",href:"org/new",disabled:!i,children:(0,e.jsx)(n.x6,{i18nKey:"admin.orgs.new-org-button",children:"New org"})}),children:(0,e.jsxs)(g.Y.Contents,{children:[s.error&&$(s.error),s.loading&&(0,e.jsx)(f.Skeleton,{}),s.value&&(0,e.jsx)(f,{orgs:s.value,onDelete:l=>{S(l).then(()=>a())}})]})})}}}]);

//# sourceMappingURL=AdminListOrgsPage.176dac9ed391bda8952b.js.map