"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[3196,3511],{12003:(d,c,e)=>{e.r(c),e.d(c,{default:()=>le});var a=e(74848),G=e(29189),R=e(96540),P=e(54148),s=e(92745),A=e(89640),S=e(34999),m=e(45861),B=e(88559),L=e(87063),$=e(30703),W=e(36303),Y=e(1506),K=e(86791),I=e(70327),Q=e(55143),J=e(36826),O=e(6975),U=e(77880),z=e(25149),H=e(78102);function M({folderUid:o,groupName:r,onClose:t}){const[n,i]=(0,R.useState)("yaml");return(0,a.jsx)(z.m,{title:(0,s.t)("alerting.grafana-rule-group-exporter.title-drawer","Export {{groupName}} rules",{groupName:r}),activeTab:n,onTabChange:i,onClose:t,formatProviders:Object.values(H.sl),children:(0,a.jsx)(V,{folderUid:o,groupName:r,exportFormat:n,onClose:t})})}function V({folderUid:o,groupName:r,exportFormat:t,onClose:n}){const{currentData:i="",isFetching:g}=I.hK.endpoints.exportRules.useQuery({folderUid:o,group:r,format:t});return g?(0,a.jsx)(O._,{text:(0,s.t)("alerting.grafana-rule-group-export-preview.text-loading","Loading....")}):(0,a.jsx)(U.J,{format:t,textDefinition:i,downloadFileName:r,onClose:n})}var Z=e(18404),X=e(84523),b=e(93167),w=e(48760),k=e(88721),p=e(52161),T=e(77256),f=e(29442),N=e(29609),q=e(15629),_=e(41654),ee=e(66404),ae=e(39187);const te=({name:o})=>{const{returnTo:r}=(0,ae.h)("/alerting/list");return(0,a.jsxs)(_.B,{direction:"row",gap:1,minWidth:0,alignItems:"center",children:[(0,a.jsx)(m.z9,{"aria-label":(0,s.t)("alerting.group-details.title.back","Back to alerting"),variant:"secondary",icon:"angle-left",href:r}),(0,a.jsx)(ee.E,{element:"h1",truncate:!0,children:o})]})},{useDiscoverDsFeaturesQuery:re}=Q.L,{usePrometheusRuleNamespacesQuery:ne,useGetRuleGroupForNamespaceQuery:oe}=I.hK;function se(){const{dataSourceUid:o="",namespaceId:r="",groupName:t=""}=(0,P.g)(),n=o===p.hY,{folder:i,loading:g}=(0,Z.a)(n?r:""),{data:l,isLoading:h,error:u}=re({uid:n?K.l$:o}),{data:v,isLoading:F,error:j}=ne(l&&!l.rulerConfig?{ruleSourceName:l?.name??"",namespace:r,groupName:t}:G.hT,{selectFromResult:E=>({...E,data:E.data?.[0]?.groups.find(me=>me.name===t)})}),{data:x,isLoading:de,error:D}=oe(l?.rulerConfig?{rulerConfig:l?.rulerConfig,namespace:r,group:t}:G.hT),C=n?p.hY:(0,p.$e)(o)?.name,ue=g||h||F||de,ce=v?.interval?(0,q.an)(v.interval*1e3):x?.interval??X.T6,y=i?.title??r,ge=(0,f.tx)([["namespace",y]]),ve=n?(0,s.t)("alerting.group-details.folder","Folder"):(0,s.t)("alerting.group-details.namespace","Namespace"),xe=i?(0,a.jsx)(A.Y,{href:(0,T.NH)(i.uid),inline:!1,children:i.title}):r;return(0,a.jsx)(J.d,{pageNav:{text:t,parentItem:{text:y,url:ge}},renderTitle:E=>(0,a.jsx)(te,{name:E}),subTitle:(0,s.t)("alerting.titles.group-view.subtitle","Manage alert rules, recording rules and evaluation interval"),info:[{label:ve,value:xe},{label:(0,s.t)("alerting.group-details.interval","Interval"),value:ce}],navId:"alert-list",isLoading:ue,actions:(0,a.jsx)(a.Fragment,{children:l&&(0,a.jsx)(ie,{dsFeatures:l,namespaceId:r,groupName:t,folder:i,rulerGroup:x})}),children:(0,a.jsxs)(a.Fragment,{children:[!!u&&(0,a.jsx)(S.F,{title:(0,s.t)("alerting.group-details.ds-features-error","Error loading data source details"),bottomSpacing:0,topSpacing:2,children:(0,a.jsx)("div",{children:(0,T.JZ)(u)})}),!!(j||D)&&(0,a.jsx)(S.F,{title:(0,s.t)("alerting.group-details.group-loading-error","Error loading the group"),bottomSpacing:0,topSpacing:2,children:(0,a.jsx)("div",{children:(0,T.JZ)(j||D)})}),!v&&!x&&(0,a.jsx)(Y.L,{entity:`${r}/${t}`}),C&&(0,a.jsx)("ul",{role:"tree",children:n?(0,a.jsx)(w.$,{groupIdentifier:{groupName:t,groupOrigin:"grafana",namespace:{uid:r}},namespaceName:y}):(0,a.jsx)(b.e,{groupIdentifier:{groupName:t,groupOrigin:"datasource",namespace:{name:y},rulesSource:{name:C,uid:o,ruleSourceType:"datasource"}}})})]})})}function ie({dsFeatures:o,namespaceId:r,groupName:t,folder:n,rulerGroup:i}){const{canEditRules:g}=(0,k.V)(),[l,h]=(0,R.useState)(!1),u=o.uid===p.hY,v=u?!!n?.canSave:!0,F=i?(0,N.YN)(i):!1,j=i?(0,N.oI)(i):!1,x=!!o.rulerConfig&&g(o.name)&&v&&!F&&!j;return(0,a.jsxs)(a.Fragment,{children:[u&&(0,a.jsx)(m.$n,{onClick:()=>h(!0),icon:"file-download",variant:"secondary",children:(0,a.jsx)(s.x6,{i18nKey:"alerting.group-details.export",children:"Export"})}),x&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(m.z9,{icon:"pen",href:f.TN.editPageLink(o.uid,r,t,{includeReturnTo:!0}),variant:"secondary",children:(0,a.jsx)(s.x6,{i18nKey:"alerting.group-details.edit",children:"Edit"})}),u&&(0,a.jsx)(B.m,{overlay:(0,a.jsxs)(L.W,{children:[(0,a.jsx)(L.W.Item,{icon:"bell",url:f.TN.newAlertRuleLink(n?.title,n?.uid,t),label:(0,s.t)("alerting.alert-rule.term","Alert rule")}),(0,a.jsx)(L.W.Item,{icon:"record-audio",url:f.TN.newRecordingRuleLink(n?.title,n?.uid,t),label:(0,s.t)("alerting.recording-rule.term","Recording rule")})]}),children:(0,a.jsxs)(m.$n,{variant:"primary",children:[(0,s.t)("alerting.group-details.new","New"),(0,a.jsx)($.I,{name:"angle-down"})]})})]}),n&&l&&(0,a.jsx)(M,{folderUid:n.uid,groupName:t,onClose:()=>h(!1)})]})}const le=(0,W.Xc)(se,{style:"page"})},27323:(d,c,e)=>{d.exports=e.p+"static/img/mimir_logo.ac01ecbc.svg"},33611:(d,c,e)=>{d.exports=e.p+"static/img/prometheus_logo.3e9d4662.svg"},86559:(d,c,e)=>{d.exports=e.p+"static/img/loki_icon.abc01135.svg"}}]);

//# sourceMappingURL=AlertingGroupDetails.4dec13f640a291375df2.js.map