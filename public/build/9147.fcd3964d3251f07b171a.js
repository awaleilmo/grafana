"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[9147],{18209:(K,y,f)=>{f.d(y,{S:()=>p,d:()=>r});var r=(x=>(x.Cooperative="cooperative",x.Greedy="greedy",x))(r||{}),p=(x=>(x.Force="force",x.Grid="grid",x.Layered="layered",x))(p||{})},18367:(K,y,f)=>{Object.defineProperty(y,"__esModule",{value:!0});var r=f(96540),p=f(66691),x=p.isBrowser?r.useLayoutEffect:r.useEffect;y.default=x},29147:(K,y,f)=>{f.d(y,{F:()=>dt,E:()=>be});var r=f(74848),p=f(22803),x=f(46942),N=f.n(x),l=f(96540),X=f(71473),S=f(92745),$=f(63142),V=f(68079),oe=f(77824),Y=f(30703);function J({id:e="triangle",fill:n=z,headHeight:t=10}){return(0,r.jsx)("defs",{children:(0,r.jsx)("marker",{id:e,viewBox:"0 0 10 10",refX:"1",refY:"5",markerUnits:"userSpaceOnUse",markerWidth:t,markerHeight:t,orient:"auto",children:(0,r.jsx)("path",{d:"M 0 0 L 10 5 L 0 10 z",fill:n})})})}var O=f(85195),G=f(34072);const Q="#a00",z="#999",se=(0,l.memo)(function(n){const{edge:t,onClick:s,onMouseEnter:o,onMouseLeave:a,hovering:c,svgIdNamespace:i}=n,{source:d,target:m,sourceNodeRadius:g,targetNodeRadius:h}=t,u=10+t.thickness*2,v=(0,G.a0)({x1:d.x,y1:d.y,x2:m.x,y2:m.y},g+(0,O.Hj)(g)/2||O.h,h+(0,O.Hj)(h)/2||O.h,u),j=t.color||z,L=t.color||Q,b=`triangle-${i}-${t.id}`,w=`triangle-colored-${i}-${t.id}`;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(J,{id:b,fill:j,headHeight:u}),(0,r.jsx)(J,{id:w,fill:L,headHeight:u}),(0,r.jsxs)("g",{onClick:M=>s(M,t),style:{cursor:"pointer"},"aria-label":(0,S.t)("nodeGraph.edge.aria-label-from-to","Edge from: {{from}} to: {{to}}",{from:d.id,to:m.id}),children:[(0,r.jsx)("line",{strokeWidth:(c?1:0)+(t.highlighted?1:0)+t.thickness,stroke:t.highlighted?L:j,x1:v.x1,y1:v.y1,x2:v.x2,y2:v.y2,strokeDasharray:t.strokeDasharray,markerEnd:`url(#${t.highlighted?w:b})`}),(0,r.jsx)("line",{stroke:"transparent",x1:v.x1,y1:v.y1,x2:v.x2,y2:v.y2,strokeWidth:20,onMouseEnter:()=>{o(t.id)},onMouseLeave:()=>{a(t.id)}})]})]})}),re=e=>({mainGroup:(0,p.css)({pointerEvents:"none",fontSize:"8px"}),background:(0,p.css)({fill:e.components.tooltip.background}),text:(0,p.css)({fill:e.components.tooltip.text})}),ie=(0,l.memo)(function(n){const{edge:t}=n,{source:s,target:o,sourceNodeRadius:a,targetNodeRadius:c}=t,i=(0,G.a0)({x1:s.x,y1:s.y,x2:o.x,y2:o.y},a||O.h,c||O.h),d={x:i.x1+(i.x2-i.x1)/2,y:i.y1+(i.y2-i.y1)/2},m=(0,$.of)(re),g=[t.mainStat,t.secondaryStat].filter(L=>L),h=g.length>1?"30":"15",u=g.length>1?15:7.5;let v=g.length>1?-5:2.5;const j=[];return g.forEach((L,b)=>{j.push((0,r.jsx)("text",{className:m.text,x:d.x,y:d.y+v,textAnchor:"middle",children:L},b)),v+=15}),(0,r.jsxs)("g",{className:m.mainGroup,children:[(0,r.jsx)("rect",{className:m.background,x:d.x-40,y:d.y-u,width:"80",height:h,rx:"5"}),j]})});var q=f(64394),ae=f(739),le=f(4268),de=f(89123);function ce(){return{item:(0,p.css)({label:"LegendItem",flexGrow:0}),legend:(0,p.css)({label:"Legend",pointerEvents:"all"})}}const Ne=function(n){const{nodes:t,onSort:s,sort:o,sortable:a}=n,c=(0,$.$j)(),i=(0,$.of)(ce),d=ke(t,c),m=(0,l.useCallback)(g=>{s({field:g.data.field,ascending:g.data.field===o?.field?!o?.ascending:!1})},[o,s]);return(0,r.jsx)(le.t,{className:i.legend,displayMode:ae.lm.List,placement:"bottom",items:d,itemRenderer:g=>(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(de.M,{item:g,className:i.item,onLabelClick:a?m:void 0}),a&&(o?.field===g.data.field?(0,r.jsx)(Y.I,{name:o.ascending?"arrow-up":"arrow-down"}):"")]})})};function ke(e,n){if(!e.length)return[];const t=[e[0].mainStat,e[0].secondaryStat].filter(o=>!!o),s=e.find(o=>o.arcSections.length>0);return s&&s.arcSections[0].config?.color?.mode===q.Y.Fixed&&t.push(...new Set(e.map(o=>o.arcSections).flat())),e[0].color&&t.push(e[0].color),t.map(o=>{const a={label:o.config.displayName||o.name,yAxis:0,data:{field:o}};return o.config.color?.mode===q.Y.Fixed&&o.config.color?.fixedColor?a.color=n.visualization.getColorByName(o.config.color?.fixedColor||""):o.config.color?.mode&&(a.gradient=o.config.color?.mode),a.color||a.gradient||(a.color=n.visualization.getColorByName("")),a})}const Ge=40,Re=e=>({mainGroup:(0,p.css)({cursor:"pointer",fontSize:"10px"}),mainCircle:(0,p.css)({fill:e.components.panel.background,stroke:e.colors.border.strong}),text:(0,p.css)({width:"50px",height:"50px",textAlign:"center",display:"flex",alignItems:"center",justifyContent:"center"})}),He=(0,l.memo)(function(n){const{marker:t,onClick:s}=n,{node:o}=t,a=(0,$.of)(Re);return o.x!==void 0&&o.y!==void 0?(0,r.jsxs)("g",{"data-node-id":o.id,className:a.mainGroup,onClick:c=>{s?.(c,t)},"aria-label":(0,S.t)("nodeGraph.marker.aria-label-hidden-marker","Hidden nodes marker: {{marker}}",{marker:o.id}),children:[(0,r.jsx)("circle",{className:a.mainCircle,r:Ge,cx:o.x,cy:o.y}),(0,r.jsx)("g",{children:(0,r.jsx)("foreignObject",{x:o.x-25,y:o.y-25,width:"50",height:"50",children:(0,r.jsx)("div",{className:a.text,children:(0,r.jsx)("span",{children:t.count>100?(0,S.t)("nodeGraph.marker.100-node-count",">100 nodes"):(0,S.t)("nodeGraph.marker.node-count","{{count}} nodes",{count:t.count})})})})})]}):null});var he=f(41654),ue=f(45861);function ze(){return{wrapper:(0,p.css)({label:"wrapper",pointerEvents:"all"})}}function Pe(e){const{config:n,onConfigChange:t,onPlus:s,onMinus:o,disableZoomOut:a,disableZoomIn:c}=e,[i,d]=(0,l.useState)(!1),m=!1,g=(0,$.of)(ze);return(0,r.jsxs)("div",{className:g.wrapper,children:[(0,r.jsx)(he.B,{direction:"column",gap:1,children:(0,r.jsxs)(he.B,{gap:.5,children:[(0,r.jsx)(ue.$n,{icon:"plus-circle",onClick:s,size:"md","aria-label":(0,S.t)("nodeGraph.view-controls.title-zoom-in","Zoom in"),variant:"secondary",disabled:c}),(0,r.jsx)(ue.$n,{icon:"minus-circle",onClick:o,size:"md","aria-label":(0,S.t)("nodeGraph.view-controls.title-zoom-out","Zoom out"),variant:"secondary",disabled:a})]})}),m&&(0,r.jsx)(ue.$n,{size:"xs",fill:"text",onClick:()=>d(h=>!h),children:i?(0,S.t)("nodeGraph.view-controls.hide-config","Hide config"):(0,S.t)("nodeGraph.view-controls.show-config","Show config")}),m&&i&&Object.keys(n).filter(h=>h!=="show").map(h=>(0,r.jsxs)("div",{children:[h,(0,r.jsx)("input",{style:{width:50},type:"number",value:n[h],onChange:u=>{t({...n,[h]:parseFloat(u.target.value)})}})]},h))]})}var _=f(2543),Fe=f(64305),ge=f(13876),me=f(81041);const $e=()=>new me.c(new URL(f.p+f.u(2446),f.b)),De=()=>new me.c(new URL(f.p+f.u(1183),f.b));var I=f(18209);function Oe(e,n,t,s,o){const[a,c]=(0,l.useMemo)(()=>{if(!(e.length&&n.length))return[{},{}];const i=n.reduce((m,g)=>(m[g.source.id]=[...m[g.source.id]??[],g],m[g.target.id]=[...m[g.target.id]??[],g],m),{}),d=e.reduce((m,g)=>(m[g.id]=g,m),{});return[i,d]},[n,e]);return(0,l.useMemo)(()=>e.length<=t?{nodes:e,edges:n}:s.gridLayout?Te(e,t,o):Ae(e,n,c,a,t,o),[n,a,t,e,c,o,s.gridLayout])}function Ae(e,n,t,s,o,a){let c;a?c=[t[a]]:(c=e.filter(u=>u.incoming===0),c.length||(c=[e[0]]));const{visibleNodes:i,markers:d}=We(o,c,t,s),m=Be(d,i,t,s),g=(0,_.fromPairs)(m.map(u=>[u.node.id,u]));for(const u of m)u.count===1&&(delete g[u.node.id],i[u.node.id]=u.node);const h=n.filter(u=>(i[u.source.id]||g[u.source.id])&&(i[u.target.id]||g[u.target.id]));return{nodes:Object.values(i),edges:h,markers:Object.values(g)}}function Te(e,n,t){let s=0,o=n,a=[];if(t){const c=e.findIndex(m=>m.id===t),i=Math.floor(n/2);let d=i;s=c-i,s<0&&(d+=Math.abs(s),s=0),o=c+d+1,o>e.length&&(s>0&&(s=Math.max(0,s-(o-e.length))),o=e.length),s>1&&a.push({node:e[s-1],count:s}),e.length-o>1&&a.push({node:e[o],count:e.length-o})}else e.length-n>1&&(a=[{node:e[n],count:e.length-n}]);return{nodes:e.slice(s,o),edges:[],markers:a}}function We(e,n,t,s){const o={};let a=[...n];for(;Object.keys(o).length<e&&a.length>0;){let i=a.shift();if(o[i.id])continue;o[i.id]=i;const m=(s[i.id]||[]).map(g=>{const h=g.source.id===i.id?g.target.id:g.source.id;return t[h]});a=a.concat(m)}const c=(0,_.uniq)(a.filter(i=>!o[i.id]));return{visibleNodes:o,markers:c}}function Be(e,n,t,s){return e.map(o=>{const a={};let c=0,i=[o];for(;i.length>0&&c<=101;){let d=i.shift();if(n[d.id]||a[d.id])continue;a[d.id]||c++,a[d.id]=d;const g=(s[d.id]||[]).map(h=>{const u=h.source.id===d.id?h.target.id:h.source.id;return t[u]});i=i.concat(g)}return{node:o,count:c}})}const fe={layoutAlgorithm:I.S.Layered,linkDistance:150,linkStrength:.5,forceX:2e3,forceXStrength:.02,forceCollide:100,tick:300,gridLayout:!1};function Ue(e,n,t=fe,s,o,a,c,i){const[d,m]=(0,l.useState)([]),[g,h]=(0,l.useState)([]),[u,v]=(0,l.useState)(!1),j=(0,l.useRef)(""),L=Ze(e,n),b=(0,ge.default)(),w=(0,l.useRef)();(0,Fe.A)(()=>{w.current&&w.current()}),(0,l.useEffect)(()=>{if(e.length===0){m([]),h([]),v(!1);return}if(c){m(e);const D=(0,_.fromPairs)(e.map(F=>[F.id,F]));h(n.map(F=>({...F,source:D[F.source],target:D[F.target]}))),v(!1);return}let k="force",P=I.S.Force;if(t.layoutAlgorithm===I.S.Layered&&(k="layered",P=I.S.Layered),j.current!==L&&(j.current=L,i&&(delete i[I.S.Force],delete i[I.S.Layered])),i&&i[P]){m(i[P]?.nodes??[]),h(i[P]?.edges??[]),v(!1);return}v(!0);const U=Ke(e,n,k,({nodes:D,edges:F})=>{b()&&(m(D),h(F),v(!1),i&&(i[P]={nodes:D,edges:F}))});return w.current=U,U},[c,e,n,b,t.layoutAlgorithm,i,L]);const[M,A]=(0,l.useMemo)(()=>{if(e.length===0)return[[],[]];const k=e.map(B=>({...B})),P=n.map(B=>({...B}));return Ye(k,o,t.sort),[k,P]},[t.sort,e,n,o]),{nodes:W,edges:T,markers:E}=Oe(t.gridLayout?M:d,t.gridLayout?A:g,s,t,a),R=(0,l.useMemo)(()=>(0,G._d)([...W,...(E||[]).map(k=>k.node)]),[W,E]);return{nodes:W,edges:T,markers:E,bounds:R,hiddenNodesCount:e.length-W.length,loading:u}}function Ke(e,n,t,s){const o=t==="force"?$e():De();return o.onmessage=a=>{const c=(0,_.fromPairs)(e.map(i=>[i.id,i]));a.data.nodes=a.data.nodes.map(i=>({...c[i.id],...i})),s(a.data)},o.postMessage({nodes:e.map(a=>({id:a.id,incoming:a.incoming})),edges:n,config:fe}),()=>{o.terminate()}}function Ye(e,n,t){const c=Math.min(Math.floor((n-120)/140),e.length),i=Math.floor((c-1)*120/2);t&&e.sort((d,m)=>{const g=t.field.values[d.dataFrameRowIndex],h=t.field.values[m.dataFrameRowIndex];return t.ascending?g-h:h-g});for(const[d,m]of e.entries()){const g=Math.floor(d/c),h=d%c;m.x=h*120-i,m.y=-60+g*140}}function Ze(e,n){const t=[`n:${e.length}`,`e:${n.length}`];if(e.length>0){const s=e[0].id??"";if(t.push(`f:${s}`),e.length>=3){const i=Math.floor(e.length/2),d=e[i].id??"";t.push(`m:${d}`)}const o=e[e.length-1].id??"";t.push(`l:${o}`);let a=0,c=0;for(const i of e){const d=i.incoming||0;d>0&&a++,c=Math.max(c,d)}t.push(`cn:${a}`),t.push(`mc:${c}`)}return t.join("_")}var Ve=f(81753),Xe=f(97375),Je=f(30930),Qe=f(94535);function qe(e,n,t,s,o,a){const[c,i]=(0,l.useState)(void 0),d=(0,l.useCallback)((g,h)=>{const[u,v]=s.gridLayout?["Show in Graph layout",!1]:["Show in Grid layout",!0],j=[{label:u,onClick:w=>{a(w.id),o({...s,gridLayout:v}),i(void 0)}}],L=n?e(n,h.dataFrameRowIndex):[],b=ve(L,h,j);i(pe((0,r.jsx)(et,{node:h,nodes:n}),g,i,b))},[s,n,e,i,o,a]);return{onEdgeOpen:(0,l.useCallback)((g,h)=>{if(!t)return;const u=e(t,h.dataFrameRowIndex),v=ve(u,h);i(pe((0,r.jsx)(tt,{edge:h,edges:t}),g,i,v))},[t,e,i]),onNodeOpen:d,MenuComponent:c}}function pe(e,n,t,s){return(0,r.jsx)(Xe.t,{renderHeader:()=>e,renderMenuItems:s,onClose:()=>t(void 0),x:n.pageX,y:n.pageY})}function ve(e,n,t){if(!(e.length||t?.length))return;const s=_e(e);return()=>{let o=s?.map((a,c)=>(0,r.jsx)(Je.r,{label:a.label,children:(a.items||[]).map(xe(n))},`${a.label}${c}`));return t&&(o=[...t.map(xe(n)),...o]),o}}function xe(e){return function(t){return(0,r.jsx)(Qe.D,{url:t.url,label:t.label,ariaLabel:t.ariaLabel,onClick:t.onClick?s=>{s?.ctrlKey||s?.metaKey||s?.shiftKey||(s?.preventDefault(),s?.stopPropagation(),t.onClick?.(e))}:void 0,target:t.target||"_self"},t.label)}}function _e(e){const n="Open in Explore",t=e.reduce((s,o)=>{let a,c;return o.title.indexOf("/")!==-1?(a=o.title.split("/")[0],c=o.title.split("/")[1],s[a]=s[a]||[],s[a].push({l:o,newTitle:c})):(s[n]=s[n]||[],s[n].push({l:o})),s},{});return Object.keys(t).map(s=>({label:s,ariaLabel:s,items:t[s].map(o=>({label:o.newTitle||o.l.title,ariaLabel:o.newTitle||o.l.title,url:o.l.href,onClick:o.l.onClick,target:o.l.target}))}))}function ye({field:e,index:n}){return(0,r.jsx)(ee,{label:e.config?.displayName||e.name,value:(0,G.Xq)(e.config,e.values[n]||"")})}function ee({label:e,value:n}){const t=(0,$.of)(nt);return(0,r.jsxs)("tr",{children:[(0,r.jsxs)("td",{className:t.label,children:[e,": "]}),(0,r.jsx)("td",{className:t.value,children:n})]})}function et({node:e,nodes:n}){const t=[];if(n){const s=(0,G.AG)(n);for(const o of[s.title,s.subTitle,s.mainStat,s.secondaryStat,...s.details])o&&o.values[e.dataFrameRowIndex]&&t.push((0,r.jsx)(ye,{field:o,index:e.dataFrameRowIndex},o.name))}else e.title&&t.push((0,r.jsx)(ee,{label:(0,S.t)("nodeGraph.node-header.label-title","Title"),value:e.title},"title")),e.subTitle&&t.push((0,r.jsx)(ee,{label:(0,S.t)("nodeGraph.node-header.label-subtitle","Subtitle"),value:e.subTitle},"subtitle"));return(0,r.jsx)("table",{style:{width:"100%"},children:(0,r.jsx)("tbody",{children:t})})}function tt(e){const n=e.edge.dataFrameRowIndex,t=(0,G.tF)(e.edges),s=t.source?.values[n]||"",o=t.target?.values[n]||"",a=[];s&&o&&a.push((0,r.jsx)(ee,{label:(0,S.t)("nodeGraph.edge-header.label-source-target","Source \u2192 Target"),value:`${s} \u2192 ${o}`},"header-row"));for(const c of[t.mainStat,t.secondaryStat,...t.details])c&&c.values[n]&&a.push((0,r.jsx)(ye,{field:c,index:n},`field-row-${n}`));return(0,r.jsx)("table",{style:{width:"100%"},children:(0,r.jsx)("tbody",{children:a})})}const nt=e=>({label:(0,p.css)({label:"Label",lineHeight:1.25,color:e.colors.text.disabled,fontSize:e.typography.size.sm,fontWeight:e.typography.fontWeightMedium,paddingRight:e.spacing(1)}),value:(0,p.css)({label:"Value",fontSize:e.typography.size.sm,fontWeight:e.typography.fontWeightMedium,color:e.colors.text.primary})});var Me=f(80292);function ot(e,n,t){const s=(0,Me.A)(e.gridLayout);let o;if(s===!0&&!e.gridLayout&&t){const a=n.find(c=>c.id===t);a&&(o={x:-a.x,y:-a.y})}return o}function st(e){const[n,t]=(0,l.useState)(),s=(0,ge.default)();return(0,l.useEffect)(()=>{e&&(t(e),setTimeout(()=>{s()&&t(void 0)},500))},[e,s]),n}function rt({scale:e=1,bounds:n,focus:t}={}){const s=(0,ge.default)(),o=(0,l.useRef)(!1),a=(0,l.useRef)(0),c=(0,l.useRef)(null),i={x:0,y:0},d=(0,l.useMemo)(()=>({right:n?-n.left:1/0,left:n?-n.right:-1/0,bottom:n?-n.top:-1/0,top:n?-n.bottom:1/0}),[n]),m=(0,l.useRef)(i),g=(0,l.useRef)(i),h=(0,l.useRef)(i),[u,v]=(0,l.useState)({isPanning:!1,position:i});(0,l.useEffect)(()=>{const b=R=>{!o.current&&s()&&(o.current=!0,m.current=Le(R),g.current={...h.current},v(k=>({...k,isPanning:!0})),A())},w=()=>{o.current&&s()&&(o.current=!1,v(R=>({...R,isPanning:!1})),W())},M=R=>{b(R),T(R)},A=()=>{document.addEventListener("mousemove",T),document.addEventListener("mouseup",w),document.addEventListener("touchmove",T),document.addEventListener("touchend",w)},W=()=>{document.removeEventListener("mousemove",T),document.removeEventListener("mouseup",w),document.removeEventListener("touchmove",T),document.removeEventListener("touchend",w)},T=R=>{cancelAnimationFrame(a.current);const k=Le(R);a.current=requestAnimationFrame(()=>{if(s()&&c.current){let P=k.x-m.current.x,B=k.y-m.current.y;h.current={x:Z(g.current.x+P/e,d.left,d.right),y:Z(g.current.y+B/e,d.top,d.bottom)},v(U=>({...U,position:{...h.current}}))}})},E=c.current;return E&&(E.addEventListener("mousedown",M),E.addEventListener("touchstart",M)),()=>{E&&(E.removeEventListener("mousedown",M),E.removeEventListener("touchstart",M))}},[e,d,s]);const j=(0,Me.A)(t);(0,l.useEffect)(()=>{if(t&&j?.x!==t.x&&j?.y!==t.y){const b={x:Z(t.x,d.left,d.right),y:Z(t.y,d.top,d.bottom)};v({position:b,isPanning:!1}),h.current=b,g.current=b}},[t,j,d,h,g]);let L=u.position;return t&&j?.x!==t.x&&j?.y!==t.y&&(L=t),{state:{...u,position:{x:Z(L.x,d.left,d.right),y:Z(L.y,d.top,d.bottom)}},ref:c}}function Z(e,n,t){return Math.min(Math.max(e,n??-1/0),t??1/0)}function Le(e){return"changedTouches"in e&&e instanceof TouchEvent?{x:e.changedTouches[0].clientX,y:e.changedTouches[0].clientY}:e instanceof MouseEvent?{x:e.clientX,y:e.clientY}:{x:0,y:0}}const te={stepUp:e=>e*1.5,stepDown:e=>e/1.5,min:.13,max:2.25,zoomMode:I.d.Cooperative};function it(e=te){const{min:n,max:t,zoomMode:s}={...te,...e},o=e.stepUp??te.stepUp,a=e.stepDown??te.stepDown,c=(0,l.useRef)(null),[i,d]=(0,l.useState)(1),m=(0,l.useCallback)(()=>{i<(t??1/0)&&d(o(i))},[i,o,t]),g=(0,l.useCallback)(()=>{i>(n??-1/0)&&d(a(i))},[i,a,n]),h=(0,l.useCallback)(function(u){if(u.ctrlKey||u.metaKey||s===I.d.Greedy){if(u.preventDefault(),d(Math.min(Math.max(n??-1/0,i+Math.min(u.deltaY,2)*-.01),t??1/0)),u.deltaY<0){const v=i+Math.max(u.deltaY,-4)*-.015;d(Math.max(n??-1/0,v))}else if(u.deltaY>0){const v=i+Math.min(u.deltaY,4)*-.015;d(Math.min(t??1/0,v))}}},[n,t,i,s]);return(0,l.useEffect)(()=>{if(!c.current)return;const u=c.current;return u.addEventListener("wheel",h,{passive:!1}),()=>{u&&u.removeEventListener("wheel",h)}},[h]),{onStepUp:m,onStepDown:g,scale:Math.max(Math.min(i,t??1/0),n??-1/0),isMax:i>=(t??1/0),isMin:i<=(n??-1/0),ref:c}}const at=e=>({wrapper:(0,p.css)({label:"wrapper",height:"100%",width:"100%",overflow:"hidden",position:"relative"}),svg:(0,p.css)({label:"svg",height:"100%",width:"100%",overflow:"visible",fontSize:"10px",cursor:"move"}),svgPanning:(0,p.css)({label:"svgPanning",userSelect:"none"}),noDataMsg:(0,p.css)({height:"100%",width:"100%",display:"grid",placeItems:"center",fontSize:e.typography.h4.fontSize,color:e.colors.text.secondary}),mainGroup:(0,p.css)({label:"mainGroup",willChange:"transform"}),viewControls:(0,p.css)({label:"viewControls",position:"absolute",left:"2px",bottom:"3px",right:0,display:"flex",alignItems:"flex-end",justifyContent:"space-between",pointerEvents:"none"}),layoutAlgorithm:(0,p.css)({label:"layoutAlgorithm",pointerEvents:"all",position:"absolute",top:"8px",right:"8px",zIndex:1}),legend:(0,p.css)({label:"legend",background:e.colors.background.secondary,boxShadow:e.shadows.z1,paddingBottom:"5px",marginRight:"10px"}),viewControlsWrapper:(0,p.css)({marginLeft:"auto"}),alert:(0,p.css)({label:"alert",padding:"5px 8px",fontSize:"10px",textShadow:"0 1px 0 rgba(0, 0, 0, 0.2)",borderRadius:e.shape.radius.default,alignItems:"center",position:"absolute",right:0,background:e.colors.warning.main,color:e.colors.warning.contrastText}),loadingWrapper:(0,p.css)({label:"loadingWrapper",height:"100%",display:"flex",alignItems:"center",justifyContent:"center"})}),lt=200,be=500;function dt({getLinks:e,dataFrames:n,nodeLimit:t,panelId:s,zoomMode:o,layoutAlgorithm:a}){const c=t||lt,{edges:i,nodes:d}=(0,Ve.d)(n),[m,{width:g,height:h}]=(0,X.A)(),[u,v]=(0,l.useState)(fe),j=(0,l.useRef)({});(0,l.useEffect)(()=>{a&&v(C=>({...C,gridLayout:a===I.S.Grid,layoutAlgorithm:a}))},[a]);const L=d[0],b=i[0],w=s||"nodegraphpanel",M=(0,l.useMemo)(()=>(0,G.BJ)(L,b),[b,L]),{nodeHover:A,setNodeHover:W,clearNodeHover:T,edgeHover:E,setEdgeHover:R,clearEdgeHover:k}=mt(),[P,B]=(0,l.useState)([]);(0,l.useEffect)(()=>{let C=[];A?C=(0,G.Tl)(M.nodes,M.edges,A):E&&(C=(0,G.K0)(M.nodes,M.edges,E)),B(C)},[A,E,M]);const[U,D]=(0,l.useState)(),F=(0,l.useCallback)((C,Gt)=>D(Gt.node.id),[D]),{nodes:ne,edges:Se,markers:pt,bounds:vt,hiddenNodesCount:je,loading:xt}=Ue(M.nodes,M.edges,u,c,g,U,M.hasFixedPositions,j.current),yt=ot(u,ne,U),{panRef:Mt,zoomRef:Ce,onStepUp:Lt,onStepDown:bt,isPanning:St,position:Ee,scale:Ie,isMaxZoom:jt,isMinZoom:Ct}=ht(vt,yt,o),{onEdgeOpen:Et,onNodeOpen:It,MenuComponent:wt}=qe(e,L,b,u,v,D),H=(0,$.of)(at),Nt=(0,l.useCallback)(C=>{m(C),Ce.current=C},[m,Ce]),kt=st(U),we=C=>{C.layoutAlgorithm!==u.layoutAlgorithm&&D(void 0),v(C)};return(0,l.useEffect)(()=>{j.current={}},[L,b]),(0,r.jsxs)("div",{ref:Nt,className:H.wrapper,children:[xt?(0,r.jsxs)("div",{className:H.loadingWrapper,children:[(0,r.jsx)(S.x6,{i18nKey:"nodeGraph.node-graph.computing-layout",children:"Computing layout"}),"\xA0",(0,r.jsx)(V.y,{})]}):null,!s&&(0,r.jsx)("div",{className:H.layoutAlgorithm,children:(0,r.jsx)(oe.z,{size:"sm",options:[{label:"Layered",value:I.S.Layered},{label:"Force",value:I.S.Force},{label:"Grid",value:I.S.Grid}],value:u.gridLayout?I.S.Grid:u.layoutAlgorithm,onChange:C=>{we({...u,gridLayout:C===I.S.Grid,layoutAlgorithm:C})}})}),n.length&&M.nodes.length?(0,r.jsx)("svg",{ref:Mt,viewBox:`${-(g/2)} ${-(h/2)} ${g} ${h}`,className:N()(H.svg,St&&H.svgPanning),children:(0,r.jsxs)("g",{className:H.mainGroup,style:{transform:`scale(${Ie}) translate(${Math.floor(Ee.x)}px, ${Math.floor(Ee.y)}px)`},children:[!u.gridLayout&&(0,r.jsx)(gt,{edges:Se,nodeHoveringId:A,edgeHoveringId:E,onClick:Et,onMouseEnter:R,onMouseLeave:k,svgIdNamespace:w,processedNodesLength:M.nodes.length,processedEdgesLength:M.edges.length}),(0,r.jsx)(ct,{nodes:ne,onMouseEnter:W,onMouseLeave:T,onClick:It,hoveringIds:P||[kt]}),(0,r.jsx)(ut,{markers:pt||[],onClick:F}),!u.gridLayout&&(0,r.jsx)(ft,{edges:Se,nodeHoveringId:A,edgeHoveringId:E})]})}):(0,r.jsx)("div",{className:H.noDataMsg,children:(0,r.jsx)(S.x6,{i18nKey:"nodeGraph.node-graph.no-data",children:"No data"})}),(0,r.jsxs)("div",{className:H.viewControls,children:[ne.length?(0,r.jsx)("div",{className:H.legend,children:(0,r.jsx)(Ne,{sortable:u.gridLayout,nodes:ne,sort:u.sort,onSort:C=>{v({...u,sort:C})}})}):null,(0,r.jsx)("div",{className:H.viewControlsWrapper,children:(0,r.jsx)(Pe,{config:u,onConfigChange:we,onMinus:bt,onPlus:Lt,scale:Ie,disableZoomIn:jt,disableZoomOut:Ct})})]}),je>0&&(0,r.jsx)("div",{className:H.alert,style:{top:s?"0px":"40px"},"aria-label":(0,S.t)("nodeGraph.node-graph.aria-label-nodes-hidden-warning","Nodes hidden warning"),children:(0,r.jsxs)(S.x6,{i18nKey:"nodeGraph.node-graph.hidden-nodes",count:je,children:[(0,r.jsx)(Y.I,{size:"sm",name:"info-circle"})," ","{{count}}"," nodes are hidden for performance reasons."]})}),u.layoutAlgorithm===I.S.Layered&&M.nodes.length>be&&(0,r.jsx)("div",{className:H.alert,style:{top:s?"30px":"70px"},"aria-label":(0,S.t)("nodeGraph.node-graph.aria-label-layered-layout-performance-warning","Layered layout performance warning"),children:(0,r.jsxs)(S.x6,{i18nKey:"nodeGraph.node-graph.processed-nodes",count:M.nodes.length,children:[(0,r.jsx)(Y.I,{size:"sm",name:"exclamation-triangle"})," Layered layout may be slow with ","{{count}}"," nodes."]})}),wt]})}const ct=(0,l.memo)(function(n){return(0,r.jsx)(r.Fragment,{children:n.nodes.map(t=>(0,r.jsx)(O.bP,{node:t,onMouseEnter:n.onMouseEnter,onMouseLeave:n.onMouseLeave,onClick:n.onClick,hovering:!n.hoveringIds||n.hoveringIds.length===0?"default":n.hoveringIds?.includes(t.id)?"active":"inactive"},t.id))})}),ut=(0,l.memo)(function(n){return(0,r.jsx)(r.Fragment,{children:n.markers.map(t=>(0,r.jsx)(He,{marker:t,onClick:n.onClick},"marker-"+t.node.id))})}),gt=(0,l.memo)(function(n){return(0,r.jsx)(r.Fragment,{children:n.edges.map((t,s)=>(0,r.jsx)(se,{edge:t,hovering:t.source.id===n.nodeHoveringId||t.target.id===n.nodeHoveringId||n.edgeHoveringId===t.id,onClick:n.onClick,onMouseEnter:n.onMouseEnter,onMouseLeave:n.onMouseLeave,svgIdNamespace:n.svgIdNamespace},`${t.id}-${t.source.y??""}-${n.processedNodesLength}-${n.processedEdgesLength}-${s}`))})}),ft=(0,l.memo)(function(n){return(0,r.jsx)(r.Fragment,{children:n.edges.map(t=>{const s=t.source.id===n.nodeHoveringId||t.target.id===n.nodeHoveringId||n.edgeHoveringId===t.id,o=t.mainStat||t.secondaryStat;return s&&o&&(0,r.jsx)(ie,{edge:t},t.id)})})});function ht(e,n,t){const{scale:s,onStepDown:o,onStepUp:a,ref:c,isMax:i,isMin:d}=it({zoomMode:t}),{state:m,ref:g}=rt({scale:s,bounds:e,focus:n}),{position:h,isPanning:u}=m;return{zoomRef:c,panRef:g,position:h,isPanning:u,scale:s,onStepDown:o,onStepUp:a,isMaxZoom:i,isMinZoom:d}}function mt(){const[e,n]=(0,l.useState)(void 0),t=(0,l.useCallback)(()=>n(void 0),[n]),[s,o]=(0,l.useState)(void 0),a=(0,l.useCallback)(()=>o(void 0),[o]);return{nodeHover:e,setNodeHover:n,clearNodeHover:t,edgeHover:s,setEdgeHover:o,clearEdgeHover:a}}},66691:(K,y)=>{Object.defineProperty(y,"__esModule",{value:!0}),y.isNavigator=y.isBrowser=y.off=y.on=y.noop=void 0;var f=function(){};y.noop=f;function r(x){for(var N=[],l=1;l<arguments.length;l++)N[l-1]=arguments[l];x&&x.addEventListener&&x.addEventListener.apply(x,N)}y.on=r;function p(x){for(var N=[],l=1;l<arguments.length;l++)N[l-1]=arguments[l];x&&x.removeEventListener&&x.removeEventListener.apply(x,N)}y.off=p,y.isBrowser=typeof window<"u",y.isNavigator=typeof navigator<"u"},71473:(K,y,f)=>{var r;r={value:!0};var p=f(31635),x=f(96540),N=p.__importDefault(f(18367)),l=f(66691),X={x:0,y:0,width:0,height:0,top:0,left:0,bottom:0,right:0};function S(){var $=x.useState(null),V=$[0],oe=$[1],Y=x.useState(X),J=Y[0],O=Y[1],G=x.useMemo(function(){return new window.ResizeObserver(function(Q){if(Q[0]){var z=Q[0].contentRect,se=z.x,re=z.y,ie=z.width,q=z.height,ae=z.top,le=z.left,de=z.bottom,ce=z.right;O({x:se,y:re,width:ie,height:q,top:ae,left:le,bottom:de,right:ce})}})},[]);return N.default(function(){if(V)return G.observe(V),function(){G.disconnect()}},[V]),[oe,J]}y.A=l.isBrowser&&typeof window.ResizeObserver<"u"?S:function(){return[l.noop,X]}},80292:(K,y,f)=>{var r;r={value:!0};var p=f(96540);function x(N){var l=p.useRef();return p.useEffect(function(){l.current=N}),l.current}y.A=x},81753:(K,y,f)=>{f.d(y,{d:()=>x});var r=f(96540),p=f(34072);function x(N){return(0,r.useMemo)(()=>(0,p.CP)(N),[N])}}}]);

//# sourceMappingURL=9147.fcd3964d3251f07b171a.js.map