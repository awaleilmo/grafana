{"version":3,"file":"PlaylistPage.a4bd337cef385596ca3a.js","mappings":"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","sources":["webpack://grafana/./public/app/features/playlist/ShareModal.tsx","webpack://grafana/./public/app/features/playlist/PlaylistCard.tsx","webpack://grafana/./public/app/features/playlist/PlaylistPageList.tsx","webpack://grafana/./public/app/features/playlist/StartModal.tsx","webpack://grafana/./public/app/features/playlist/PlaylistPage.tsx","webpack://grafana/./public/app/core/components/PageActionBar/PageActionBar.tsx"],"sourcesContent":["import { useState } from 'react';\n\nimport { SelectableValue, UrlQueryMap, urlUtil } from '@grafana/data';\nimport { Trans, t } from '@grafana/i18n';\nimport { reportInteraction } from '@grafana/runtime';\nimport { Checkbox, ClipboardButton, Field, FieldSet, Input, Modal, RadioButtonGroup } from '@grafana/ui';\nimport { buildBaseUrl } from 'app/features/dashboard/components/ShareModal/utils';\n\nimport { PlaylistMode } from './types';\n\ninterface Props {\n  playlistUid: string;\n  onDismiss: () => void;\n}\n\nexport const ShareModal = ({ playlistUid, onDismiss }: Props) => {\n  const [mode, setMode] = useState<PlaylistMode>(false);\n  const [autoFit, setAutofit] = useState(false);\n\n  const modes: Array<SelectableValue<PlaylistMode>> = [\n    { label: t('share-playlist.mode-normal', 'Normal'), value: false },\n    { label: t('share-playlist.mode-kiosk', 'Kiosk'), value: true },\n  ];\n\n  const params: UrlQueryMap = {};\n  if (mode) {\n    params.kiosk = mode;\n  }\n  if (autoFit) {\n    params.autofitpanels = true;\n  }\n\n  const shareUrl = urlUtil.renderUrl(`${buildBaseUrl()}/play/${playlistUid}`, params);\n\n  return (\n    <Modal isOpen={true} title={t('share-playlist.title', 'Share playlist')} onDismiss={onDismiss}>\n      <FieldSet>\n        <Field label={t('share-playlist.mode', 'Mode')}>\n          <RadioButtonGroup value={mode} options={modes} onChange={setMode} />\n        </Field>\n        <Field>\n          <Checkbox\n            label={t('share-playlist.checkbox-label', 'Autofit')}\n            description={t('share-playlist.checkbox-description', 'Panel heights will be adjusted to fit screen size')}\n            name=\"autofix\"\n            value={autoFit}\n            onChange={(e) => setAutofit(e.currentTarget.checked)}\n          />\n        </Field>\n\n        <Field label={t('share-playlist.link-url-label', 'Link URL')}>\n          <Input\n            id=\"link-url-input\"\n            value={shareUrl}\n            readOnly\n            addonAfter={\n              <ClipboardButton\n                icon=\"copy\"\n                variant=\"primary\"\n                getText={() => shareUrl}\n                onClipboardCopy={() => {\n                  reportInteraction('grafana_kiosk_mode', {\n                    action: 'share_playlist',\n                    mode: mode,\n                  });\n                }}\n              >\n                <Trans i18nKey=\"share-playlist.copy-link-button\">Copy</Trans>\n              </ClipboardButton>\n            }\n          />\n        </Field>\n      </FieldSet>\n    </Modal>\n  );\n};\n","import { css } from '@emotion/css';\nimport Skeleton from 'react-loading-skeleton';\n\nimport { GrafanaTheme2 } from '@grafana/data';\nimport { Trans, t } from '@grafana/i18n';\nimport { Button, Card, LinkButton, ModalsController, Stack, useStyles2 } from '@grafana/ui';\nimport { attachSkeleton, SkeletonComponent } from '@grafana/ui/unstable';\nimport { contextSrv } from 'app/core/services/context_srv';\nimport { DashNavButton } from 'app/features/dashboard/components/DashNav/DashNavButton';\n\nimport { Playlist } from '../../api/clients/playlist/v0alpha1';\n\nimport { ShareModal } from './ShareModal';\n\ninterface Props {\n  setStartPlaylist: (playlistItem: Playlist) => void;\n  setPlaylistToDelete: (playlistItem: Playlist) => void;\n  playlist: Playlist;\n}\n\nconst PlaylistCardComponent = ({ playlist, setStartPlaylist, setPlaylistToDelete }: Props) => {\n  return (\n    <Card>\n      <Card.Heading>\n        {playlist.spec?.title}\n        <ModalsController key=\"button-share\">\n          {({ showModal, hideModal }) => (\n            <DashNavButton\n              tooltip={t('playlist-page.card.tooltip', 'Share playlist')}\n              icon=\"share-alt\"\n              iconSize=\"lg\"\n              onClick={() => {\n                showModal(ShareModal, {\n                  playlistUid: playlist.metadata?.name ?? '',\n                  onDismiss: hideModal,\n                });\n              }}\n            />\n          )}\n        </ModalsController>\n      </Card.Heading>\n      <Card.Actions>\n        <Button variant=\"secondary\" icon=\"play\" onClick={() => setStartPlaylist(playlist)}>\n          <Trans i18nKey=\"playlist-page.card.start\">Start playlist</Trans>\n        </Button>\n        {contextSrv.isEditor && (\n          <>\n            <LinkButton key=\"edit\" variant=\"secondary\" href={`/playlists/edit/${playlist.metadata?.name}`} icon=\"cog\">\n              <Trans i18nKey=\"playlist-page.card.edit\">Edit playlist</Trans>\n            </LinkButton>\n            <Button\n              disabled={false}\n              onClick={() => setPlaylistToDelete(playlist)}\n              icon=\"trash-alt\"\n              variant=\"destructive\"\n            >\n              <Trans i18nKey=\"playlist-page.card.delete\">Delete playlist</Trans>\n            </Button>\n          </>\n        )}\n      </Card.Actions>\n    </Card>\n  );\n};\n\nconst PlaylistCardSkeleton: SkeletonComponent = ({ rootProps }) => {\n  const skeletonStyles = useStyles2(getSkeletonStyles);\n  return (\n    <Card {...rootProps}>\n      <Card.Heading>\n        <Skeleton width={140} />\n      </Card.Heading>\n      <Card.Actions>\n        <Stack direction=\"row\" wrap=\"wrap\">\n          <Skeleton containerClassName={skeletonStyles.button} width={142} height={32} />\n          {contextSrv.isEditor && (\n            <>\n              <Skeleton containerClassName={skeletonStyles.button} width={135} height={32} />\n              <Skeleton containerClassName={skeletonStyles.button} width={153} height={32} />\n            </>\n          )}\n        </Stack>\n      </Card.Actions>\n    </Card>\n  );\n};\n\nexport const PlaylistCard = attachSkeleton(PlaylistCardComponent, PlaylistCardSkeleton);\n\nfunction getSkeletonStyles(theme: GrafanaTheme2) {\n  return {\n    button: css({\n      lineHeight: 1,\n    }),\n  };\n}\n","import { css } from '@emotion/css';\n\nimport { GrafanaTheme2 } from '@grafana/data';\nimport { useStyles2 } from '@grafana/ui';\nimport { SkeletonComponent, attachSkeleton } from '@grafana/ui/unstable';\n\nimport { Playlist } from '../../api/clients/playlist/v0alpha1';\n\nimport { PlaylistCard } from './PlaylistCard';\n\ninterface Props {\n  setStartPlaylist: (playlistItem: Playlist) => void;\n  setPlaylistToDelete: (playlistItem: Playlist) => void;\n  playlists: Playlist[];\n}\n\nconst PlaylistPageListComponent = ({ playlists, setStartPlaylist, setPlaylistToDelete }: Props) => {\n  const styles = useStyles2(getStyles);\n  return (\n    <ul className={styles.list}>\n      {playlists.map((playlist) => (\n        <li className={styles.listItem} key={playlist.metadata?.name}>\n          <PlaylistCard\n            playlist={playlist}\n            setStartPlaylist={setStartPlaylist}\n            setPlaylistToDelete={setPlaylistToDelete}\n          />\n        </li>\n      ))}\n    </ul>\n  );\n};\n\nconst PlaylistPageListSkeleton: SkeletonComponent = ({ rootProps }) => {\n  const styles = useStyles2(getStyles);\n  return (\n    <div data-testid=\"playlist-page-list-skeleton\" className={styles.list} {...rootProps}>\n      <PlaylistCard.Skeleton />\n      <PlaylistCard.Skeleton />\n      <PlaylistCard.Skeleton />\n    </div>\n  );\n};\n\nexport const PlaylistPageList = attachSkeleton(PlaylistPageListComponent, PlaylistPageListSkeleton);\n\nfunction getStyles(theme: GrafanaTheme2) {\n  return {\n    list: css({\n      display: 'grid',\n    }),\n    listItem: css({\n      listStyle: 'none',\n    }),\n  };\n}\n","import { useState } from 'react';\n\nimport { SelectableValue, UrlQueryMap, urlUtil } from '@grafana/data';\nimport { Trans, t } from '@grafana/i18n';\nimport { config, locationService, reportInteraction } from '@grafana/runtime';\nimport { Box, Button, Checkbox, Field, FieldSet, Modal, RadioButtonGroup, Stack } from '@grafana/ui';\n\nimport { Playlist } from '../../api/clients/playlist/v0alpha1';\n\nimport { PlaylistMode } from './types';\n\nexport interface Props {\n  playlist: Playlist;\n  onDismiss: () => void;\n}\n\nexport const StartModal = ({ playlist, onDismiss }: Props) => {\n  const [mode, setMode] = useState<PlaylistMode>(false);\n  const [autoFit, setAutofit] = useState(false);\n  const [displayTimePicker, setDisplayTimePicker] = useState(true);\n  const [displayVariables, setDisplayVariables] = useState(true);\n  const [displayLinks, setDisplayLinks] = useState(true);\n\n  const modes: Array<SelectableValue<PlaylistMode>> = [\n    { label: t('playlist.start-modal.modes.label.normal', 'Normal'), value: false },\n    { label: t('playlist.start-modal.modes.label.kiosk', 'Kiosk'), value: true },\n  ];\n\n  const onStart = () => {\n    const params: UrlQueryMap = {};\n    if (mode) {\n      params.kiosk = mode;\n    }\n    if (autoFit) {\n      params.autofitpanels = true;\n    }\n\n    if (!displayTimePicker) {\n      params['_dash.hideTimePicker'] = true;\n    }\n    if (!displayVariables) {\n      params['_dash.hideVariables'] = true;\n    }\n    if (!displayLinks) {\n      params['_dash.hideLinks'] = true;\n    }\n\n    locationService.push(urlUtil.renderUrl(`/playlists/play/${playlist.metadata?.name}`, params));\n    reportInteraction('grafana_kiosk_mode', {\n      action: 'start_playlist',\n      mode: mode,\n    });\n  };\n\n  return (\n    <Modal\n      isOpen={true}\n      icon=\"play\"\n      title={t('playlist.start-modal.title-start-playlist', 'Start playlist')}\n      onDismiss={onDismiss}\n    >\n      <FieldSet>\n        <Field label={t('playlist.start-modal.label-mode', 'Mode')}>\n          <RadioButtonGroup value={mode} options={modes} onChange={setMode} />\n        </Field>\n        <Field>\n          <Checkbox\n            label={t('playlist.start-modal.label-autofit', 'Autofit')}\n            description={t(\n              'playlist.start-modal.description-panel-heights-adjusted-screen',\n              'Panel heights will be adjusted to fit screen size'\n            )}\n            name=\"autofix\"\n            value={autoFit}\n            onChange={(e) => setAutofit(e.currentTarget.checked)}\n          />\n        </Field>\n        {config.featureToggles.dashboardScene && (\n          <Field\n            label={t('playlist.start-modal.label-display-dashboard-controls', 'Display dashboard controls')}\n            description={t(\n              'playlist.start-modal.description-customize-dashboard-elements-visibility',\n              'Customize dashboard elements visibility'\n            )}\n          >\n            <Box marginTop={2} marginBottom={2}>\n              <Stack direction=\"column\" alignItems=\"start\" justifyContent=\"left\" gap={2}>\n                <Checkbox\n                  label={t('playlist.start-modal.label-time-and-refresh', 'Time and refresh')}\n                  name=\"displayTimePicker\"\n                  value={displayTimePicker}\n                  onChange={(e) => setDisplayTimePicker(e.currentTarget.checked)}\n                />\n                <Checkbox\n                  label={t('playlist.start-modal.label-variables', 'Variables')}\n                  name=\"displayVariableControls\"\n                  value={displayVariables}\n                  onChange={(e) => setDisplayVariables(e.currentTarget.checked)}\n                />\n                <Checkbox\n                  label={t('playlist.start-modal.label-dashboard-links', 'Dashboard links')}\n                  name=\"displayLinks\"\n                  value={displayLinks}\n                  onChange={(e) => setDisplayLinks(e.currentTarget.checked)}\n                />\n              </Stack>\n            </Box>\n          </Field>\n        )}\n      </FieldSet>\n      <Modal.ButtonRow>\n        <Button variant=\"primary\" onClick={onStart}>\n          <Trans i18nKey=\"playlist.start-modal.button-start\" values={{ title: playlist.spec?.title }}>\n            Start {'{{title}}'}\n          </Trans>\n        </Button>\n      </Modal.ButtonRow>\n    </Modal>\n  );\n};\n","import { useMemo, useState } from 'react';\n\nimport { Trans, t } from '@grafana/i18n';\nimport { ConfirmModal, EmptyState, LinkButton, TextLink } from '@grafana/ui';\nimport { Page } from 'app/core/components/Page/Page';\nimport PageActionBar from 'app/core/components/PageActionBar/PageActionBar';\nimport { contextSrv } from 'app/core/services/context_srv';\n\nimport { Playlist, useDeletePlaylistMutation, useListPlaylistQuery } from '../../api/clients/playlist/v0alpha1';\n\nimport { PlaylistPageList } from './PlaylistPageList';\nimport { StartModal } from './StartModal';\nimport { searchPlaylists } from './utils';\n\nexport const PlaylistPage = () => {\n  const { data, isLoading } = useListPlaylistQuery({});\n  const [deletePlaylist] = useDeletePlaylistMutation();\n  const [searchQuery, setSearchQuery] = useState('');\n  const allPlaylists = useMemo(() => data?.items ?? [], [data?.items]);\n  const playlists = useMemo(() => searchPlaylists(allPlaylists, searchQuery), [searchQuery, allPlaylists]);\n\n  const [startPlaylist, setStartPlaylist] = useState<Playlist | undefined>();\n  const [playlistToDelete, setPlaylistToDelete] = useState<Playlist | undefined>();\n\n  const hasPlaylists = playlists && playlists.length > 0;\n  const onDismissDelete = () => setPlaylistToDelete(undefined);\n  const onDeletePlaylist = () => {\n    if (!playlistToDelete) {\n      return;\n    }\n    deletePlaylist({\n      name: playlistToDelete.metadata?.name ?? '',\n    }).finally(() => {\n      setPlaylistToDelete(undefined);\n    });\n  };\n\n  const showSearch = isLoading || playlists.length > 0 || searchQuery.length > 0;\n\n  return (\n    <Page\n      actions={\n        contextSrv.isEditor && showSearch ? (\n          <LinkButton href=\"/playlists/new\">\n            <Trans i18nKey=\"playlist-page.create-button.title\">New playlist</Trans>\n          </LinkButton>\n        ) : undefined\n      }\n      navId=\"dashboards/playlists\"\n    >\n      <Page.Contents>\n        {showSearch && <PageActionBar searchQuery={searchQuery} setSearchQuery={setSearchQuery} />}\n\n        {isLoading ? (\n          <PlaylistPageList.Skeleton />\n        ) : (\n          <>\n            {!hasPlaylists && searchQuery ? (\n              <EmptyState variant=\"not-found\" message={t('playlists.empty-state.message', 'No playlists found')} />\n            ) : (\n              <PlaylistPageList\n                playlists={playlists}\n                setStartPlaylist={setStartPlaylist}\n                setPlaylistToDelete={setPlaylistToDelete}\n              />\n            )}\n            {!showSearch && (\n              <EmptyState\n                variant=\"call-to-action\"\n                button={\n                  <LinkButton disabled={!contextSrv.isEditor} href=\"playlists/new\" icon=\"plus\" size=\"lg\">\n                    <Trans i18nKey=\"playlist-page.empty.button\">Create playlist</Trans>\n                  </LinkButton>\n                }\n                message={t('playlist-page.empty.title', 'There are no playlists created yet')}\n              >\n                <Trans i18nKey=\"playlist-page.empty.pro-tip\">\n                  You can use playlists to cycle dashboards on TVs without user control.{' '}\n                  <TextLink external href=\"https://docs.grafana.org/reference/playlist/\">\n                    Learn more\n                  </TextLink>\n                </Trans>\n              </EmptyState>\n            )}\n            {playlistToDelete && (\n              <ConfirmModal\n                title={playlistToDelete.spec?.title ?? ''}\n                confirmText={t('playlist-page.delete-modal.confirm-text', 'Delete')}\n                body={t('playlist-page.delete-modal.body', 'Are you sure you want to delete {{name}} playlist?', {\n                  name: playlistToDelete.spec?.title,\n                })}\n                onConfirm={onDeletePlaylist}\n                isOpen={Boolean(playlistToDelete)}\n                onDismiss={onDismissDelete}\n              />\n            )}\n            {startPlaylist && <StartModal playlist={startPlaylist} onDismiss={() => setStartPlaylist(undefined)} />}\n          </>\n        )}\n      </Page.Contents>\n    </Page>\n  );\n};\n\nexport default PlaylistPage;\n","import { css } from '@emotion/css';\n\nimport { SelectableValue, GrafanaTheme2 } from '@grafana/data';\nimport { LinkButton, FilterInput, InlineField, Checkbox, useStyles2 } from '@grafana/ui';\n\nimport { SortPicker } from '../Select/SortPicker';\n\nexport type FilterCheckbox = {\n  onChange: (value: boolean) => void;\n  value: boolean;\n  label?: string;\n};\n\nexport interface Props {\n  searchQuery: string;\n  setSearchQuery: (value: string) => void;\n  linkButton?: { href: string; title: string; disabled?: boolean };\n  target?: string;\n  placeholder?: string;\n  sortPicker?: {\n    onChange: (sortValue: SelectableValue) => void;\n    value?: string;\n    getSortOptions?: () => Promise<SelectableValue[]>;\n  };\n  filterCheckbox?: FilterCheckbox;\n}\n\nexport default function PageActionBar({\n  searchQuery,\n  linkButton,\n  setSearchQuery,\n  target,\n  placeholder = 'Search by name or type',\n  sortPicker,\n  filterCheckbox,\n}: Props) {\n  const styles = useStyles2(getStyles);\n  const linkProps: Omit<Parameters<typeof LinkButton>[0], 'children'> = {\n    href: linkButton?.href,\n    disabled: linkButton?.disabled,\n  };\n\n  if (target) {\n    linkProps.target = target;\n  }\n\n  return (\n    <div className={styles.container}>\n      <InlineField grow>\n        <FilterInput value={searchQuery} onChange={setSearchQuery} placeholder={placeholder} />\n      </InlineField>\n      {filterCheckbox && (\n        <Checkbox\n          label={filterCheckbox.label}\n          value={filterCheckbox.value}\n          onChange={(event) => filterCheckbox.onChange(event.currentTarget.checked)}\n        />\n      )}\n      {sortPicker && (\n        <SortPicker\n          onChange={sortPicker.onChange}\n          value={sortPicker.value}\n          getSortOptions={sortPicker.getSortOptions}\n        />\n      )}\n      {linkButton && <LinkButton {...linkProps}>{linkButton.title}</LinkButton>}\n    </div>\n  );\n}\n\nconst getStyles = (theme: GrafanaTheme2) => {\n  return {\n    container: css({\n      display: 'flex',\n      alignItems: 'center',\n      gap: theme.spacing(2),\n      marginBottom: theme.spacing(2),\n    }),\n  };\n};\n"],"names":["ShareModal","playlistUid","onDismiss","mode","setMode","autoFit","setAutofit","modes","params","shareUrl","url","Modal","FieldSet","Field","RadioButtonGroup","Checkbox","e","Input","ClipboardButton","PlaylistCardComponent","playlist","setStartPlaylist","setPlaylistToDelete","Card","showModal","hideModal","DashNavButton","Button","PlaylistCardSkeleton","rootProps","skeletonStyles","getSkeletonStyles","Stack","PlaylistCard","theme","PlaylistPageListComponent","playlists","styles","getStyles","PlaylistPageListSkeleton","PlaylistPageList","StartModal","displayTimePicker","setDisplayTimePicker","displayVariables","setDisplayVariables","displayLinks","setDisplayLinks","onStart","config","Box","PlaylistPage","data","isLoading","deletePlaylist","searchQuery","setSearchQuery","allPlaylists","startPlaylist","playlistToDelete","hasPlaylists","onDismissDelete","onDeletePlaylist","showSearch","Page","PageActionBar","EmptyState","TextLink","ConfirmModal","linkButton","target","placeholder","sortPicker","filterCheckbox","linkProps","event"],"sourceRoot":""}