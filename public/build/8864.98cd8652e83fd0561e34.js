"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[8864],{1148:(G,O,e)=>{e.d(O,{H:()=>I});var n=e(74848),c=e(22803),M=e(30703),B=e(86559),g=e(27323),v=e(33611),d=e(24619),r=e(2401);const E=({children:l,name:x,href:h,application:A})=>{const j=useStyles2(f);return jsxs("li",{className:j.namespaceWrapper,role:"treeitem","aria-selected":"false",children:[jsx("div",{className:j.namespaceTitle,children:jsxs(Stack,{alignItems:"center",gap:1,children:[jsx(I,{application:A}),h?jsx(WithReturnButton,{title:t("alerting.namespace.title-alert-rules","Alert rules"),component:jsx(TextLink,{href:h,inline:!1,children:x})}):x]})}),l&&jsx("ul",{role:"group",className:j.groupItemsWrapper,children:l})]})},I=({application:l,size:x=16})=>{switch(l){case d.N1.Prometheus:return(0,n.jsx)("img",{width:x,height:x,src:v,alt:"Prometheus"});case d.N1.Mimir:return(0,n.jsx)("img",{width:x,height:x,src:g,alt:"Mimir"});case"Loki":return(0,n.jsx)("img",{width:x,height:x,src:B,alt:"Loki"});case"grafana":default:return(0,n.jsx)(M.I,{name:"grafana"})}},f=l=>({groupItemsWrapper:css({position:"relative",borderRadius:l.shape.radius.default,border:`solid 1px ${l.colors.border.weak}`,borderBottom:"none",marginLeft:l.spacing(3),"&:before":{content:"''",position:"absolute",height:"100%",borderLeft:`solid 1px ${l.colors.border.weak}`,marginTop:0,marginLeft:`-${l.spacing(2.5)}`}}),namespaceWrapper:css({display:"flex",flexDirection:"column",gap:l.spacing(1)}),namespaceTitle:css({padding:`${l.spacing(1)} ${l.spacing(1.5)}`})});var L=null},51592:(G,O,e)=>{e.d(O,{c:()=>d});var n=e(74848),c=e(22803),M=e(96540),B=e(66404),g=e(41654),v=e(63142);const d=f=>{const L=(0,v.of)(I),{icon:l=null,title:x,description:h,meta:A,metaRight:j,actions:N,"data-testid":y,...P}=f;return(0,n.jsx)("li",{className:L.alertListItemContainer,role:"treeitem","aria-selected":"false","data-testid":y,...P,children:(0,n.jsxs)(g.B,{direction:"row",alignItems:"start",gap:1,wrap:!1,children:[(0,n.jsx)("span",{className:L.statusIcon,children:l}),(0,n.jsxs)(g.B,{direction:"column",gap:.5,flex:"1",minWidth:0,children:[(0,n.jsxs)(g.B,{direction:"column",gap:0,children:[(0,n.jsx)("div",{className:L.textOverflow,children:x}),(0,n.jsx)("div",{className:L.textOverflow,children:h})]}),(0,n.jsx)(g.B,{direction:"row",gap:1,alignItems:"center",children:A?.map((w,T)=>(0,n.jsxs)(M.Fragment,{children:[T>0&&(0,n.jsx)(E,{}),w]},T))})]}),(0,n.jsxs)(g.B,{direction:"row",alignItems:"center",gap:1,wrap:!1,children:[j,N]})]})})},r=()=>jsx(d,{icon:jsx(Skeleton,{width:16,height:16,circle:!0}),title:jsx(Skeleton,{height:16,width:350}),actions:jsx(Skeleton,{height:10,width:200})}),E=()=>(0,n.jsx)(B.E,{color:"secondary",variant:"bodySmall",children:"|"}),I=f=>({alertListItemContainer:(0,c.css)({position:"relative",listStyle:"none",padding:f.spacing(1),"&:hover":{background:f.colors.action.hover}}),textOverflow:(0,c.css)({overflow:"hidden",textOverflow:"ellipsis",color:"inherit"}),statusIcon:(0,c.css)({marginTop:f.spacing(.5)})})},87154:(G,O,e)=>{e.d(O,{WG:()=>an,nh:()=>on,B3:()=>ln,Om:()=>mn});var n=e(74848),c=e(22803),M=e(55127),B=e.n(M),g=e(96540),v=e(92745),d=e(66404),r=e(89640),E=e(41654),I=e(45967),f=e(63142),L=e(34999),l=e(24619),x=e(74268),h=e(7840),A=e(10427),j=e(1625),N=e(1972),y=e(17305),P=e(52161),w=e(67598),T=e(39659),Q=e(77256),C=e(51592),_=e(87672),V=e(30703),S=e(1148);function D({namespace:s,group:i,groupUrl:a,rulesSource:o,application:m}){const p=m==="grafana",u=!!o&&!!m&&!p;return(0,n.jsxs)(E.B,{direction:"row",alignItems:"center",gap:.5,children:[p&&(0,n.jsx)(V.I,{size:"xs",name:"folder"}),u&&(0,n.jsx)(I.m,{content:o.name,children:(0,n.jsx)("span",{children:(0,n.jsx)(S.H,{application:m,size:14})})}),(0,n.jsxs)(E.B,{direction:"row",alignItems:"center",gap:0,children:[s,(0,n.jsx)(V.I,{size:"sm",name:"angle-right"}),a?(0,n.jsx)(r.Y,{href:a,color:"secondary",variant:"bodySmall",inline:!1,children:i}):i]})]})}var R=e(76267);const an=s=>{const{name:i,summary:a,state:o,health:m,error:p,href:u,isProvisioned:W,lastEvaluation:U,evaluationInterval:K,isPaused:Y=!1,instancesCount:$=0,namespace:H,group:J,groupUrl:X,rulesSource:z,application:gn,contactPoint:Z,labels:b,origin:k,actions:xn=null,operation:hn,showLocation:vn=!0,querySourceUIDs:sn=[]}=s,rn=(0,g.useId)(),F=[];return H&&J&&vn&&F.push((0,n.jsx)(d.E,{color:"secondary",variant:"bodySmall",children:(0,n.jsx)(D,{namespace:H,group:J,groupUrl:X,rulesSource:z,application:gn})})),sn.length>0&&F.push((0,n.jsx)(nn,{queriedDatasourceUIDs:sn})),Y||(U&&K&&F.push((0,n.jsx)(dn,{lastEvaluation:U,evaluationInterval:K,state:o})),$&&F.push((0,n.jsx)(j.P,{icon:"layers-alt",children:(0,n.jsx)(r.Y,{href:u+"?tab=instances",variant:"bodySmall",color:"primary",inline:!1,children:B()("instance",$,!0)})}))),b&&(0,T.rm)(b)>0&&F.push((0,n.jsx)(j.P,{icon:"tag-alt",children:(0,n.jsx)(cn,{labels:b})})),!Y&&Z&&F.push((0,n.jsxs)(j.P,{icon:"at",children:[(0,n.jsx)(v.x6,{i18nKey:"alerting.contact-points.delivered-to",children:"Delivered to"})," ",(0,n.jsx)(r.Y,{href:(0,Q.bI)(Z,P.hY),variant:"bodySmall",color:"primary",inline:!1,children:Z})]})),(0,n.jsx)(C.c,{"aria-labelledby":rn,title:(0,n.jsxs)(E.B,{direction:"row",alignItems:"center",children:[(0,n.jsx)(r.Y,{href:u,color:"primary",inline:!1,id:rn,children:i}),k&&(0,n.jsx)(y.T,{pluginId:k.pluginId,size:"sm"}),W&&!k&&(0,n.jsx)(N.rS,{})]}),description:(0,n.jsx)(q,{content:a,error:p}),icon:(0,n.jsx)(_.c,{state:o,health:m,isPaused:Y,operation:hn}),actions:xn,meta:F})};function on({name:s,namespace:i,group:a,groupUrl:o,rulesSource:m,application:p,href:u,health:W,isProvisioned:U,error:K,isPaused:Y,origin:$,actions:H,showLocation:J=!0,querySourceUIDs:X=[]}){const z=[];return i&&a&&J&&z.push((0,n.jsx)(d.E,{color:"secondary",variant:"bodySmall",children:(0,n.jsx)(D,{namespace:i,group:a,groupUrl:o,rulesSource:m,application:p})})),X.length>0&&z.push((0,n.jsx)(nn,{queriedDatasourceUIDs:X})),(0,n.jsx)(C.c,{title:(0,n.jsxs)(E.B,{direction:"row",alignItems:"center",children:[(0,n.jsx)(r.Y,{color:"primary",href:u,inline:!1,children:s}),$&&(0,n.jsx)(y.T,{pluginId:$.pluginId,size:"sm"}),U&&!$&&(0,n.jsx)(N.rS,{})]}),description:(0,n.jsx)(q,{error:K}),icon:(0,n.jsx)(_.c,{recording:!0,health:W,isPaused:Y}),actions:H,meta:z})}function ln({name:s,namespace:i,group:a,groupUrl:o,rulesSource:m,application:p,operation:u,showLocation:W=!0}){const U=(0,g.useId)(),K=[];return i&&a&&W&&K.push((0,n.jsx)(d.E,{color:"secondary",variant:"bodySmall",children:(0,n.jsx)(D,{namespace:i,group:a,groupUrl:o,rulesSource:m,application:p})})),(0,n.jsx)(C.c,{"aria-labelledby":U,title:(0,n.jsx)(E.B,{direction:"row",alignItems:"center",children:(0,n.jsx)(d.E,{id:U,children:s})}),icon:(0,n.jsx)(_.c,{operation:u}),meta:K})}function q({content:s,error:i}){return i?(0,n.jsx)(d.E,{variant:"bodySmall",color:"error",weight:"light",truncate:!0,element:"p",children:i}):s?(0,n.jsx)(d.E,{variant:"bodySmall",color:"secondary",truncate:!0,children:s}):null}const nn=(0,g.memo)(function({queriedDatasourceUIDs:i}){const a=Array.from(new Set(i)).map(P.$e).filter(u=>u!==void 0),o=a[0],m=a.length===1,p=m?o.name:(0,v.t)("alerting.alert-rules.multiple-sources","{{numSources}} data sources",{numSources:a.length});return(0,n.jsxs)(E.B,{direction:"row",alignItems:"center",gap:.5,children:[a.map(u=>(0,n.jsx)(A.A,{shouldWrap:!m,wrap:W=>(0,n.jsx)(I.m,{content:u.name,children:W}),children:(0,n.jsx)(en,{dataSource:u})},u.uid)),m?(0,n.jsx)(r.Y,{variant:"bodySmall",inline:!1,color:"primary",href:(0,Q.GD)(o.uid),children:p}):(0,n.jsx)(d.E,{variant:"bodySmall",color:"primary",children:p})]})});function cn({labels:s}){const i=(0,f.of)(tn);return(0,n.jsx)(I.m,{content:(0,n.jsx)("div",{className:i.ruleLabels.tooltip,children:(0,n.jsx)(h.m,{labels:s,size:"sm"})}),placement:"right",interactive:!0,children:(0,n.jsx)("div",{children:(0,n.jsx)(d.E,{variant:"bodySmall",color:"primary",children:B()("label",(0,T.rm)(s),!0)})})})}function dn({lastEvaluation:s,evaluationInterval:i,state:a}){const o=(0,R.C)(s,i);return a===l.cF.Firing&&o?(0,n.jsxs)(j.P,{icon:"clock-nine",children:[(0,n.jsx)(v.x6,{i18nKey:"alerting.alert-rules.firing-for",children:"Firing for"})," ",(0,n.jsx)(d.E,{color:"primary",children:"2m 34s"}),o&&(0,n.jsxs)(n.Fragment,{children:["\xB7 ",(0,n.jsx)(v.x6,{i18nKey:"alerting.alert-rules.next-evaluation-in",children:"next evaluation in"})," ",o.humanized]})]}):o?(0,n.jsxs)(j.P,{icon:"clock-nine",children:[(0,n.jsx)(v.x6,{i18nKey:"alerting.alert-rules.next-evaluation",children:"Next evaluation"})," ",o.humanized]}):null}const mn=({ruleName:s,groupIdentifier:i,ruleDefinition:a})=>{const o=(0,f.of)(tn);return(0,g.useEffect)(()=>{const{namespace:m,groupName:p}=i,u={name:s,groupName:p,namespace:JSON.stringify(m),rulesSource:(0,w.rO)(i)};(0,x.vV)(new Error("unknown rule type"),u)},[s,i]),(0,n.jsx)(L.F,{title:(0,v.t)("alerting.unknown-rule-list-item.title-unknown-rule-type","Unknown rule type"),className:o.resetMargin,children:(0,n.jsxs)("details",{children:[(0,n.jsx)("summary",{children:(0,n.jsx)(v.x6,{i18nKey:"alerting.alert-rules.rule-definition",children:"Rule definition"})}),(0,n.jsx)("pre",{children:(0,n.jsx)("code",{children:JSON.stringify(a,null,2)})})]})})},tn=s=>({alertListItemContainer:(0,c.css)({position:"relative",listStyle:"none",background:s.colors.background.primary,borderBottom:`solid 1px ${s.colors.border.weak}`,padding:s.spacing(1,1,1,1.5)}),resetMargin:(0,c.css)({margin:0}),ruleLabels:{tooltip:(0,c.css)({padding:s.spacing(1)}),text:(0,c.css)({cursor:"pointer"})}}),en=(0,g.forwardRef)(({dataSource:s},i)=>{const a=(0,f.of)(un);return(0,n.jsx)("img",{ref:i,className:(0,c.cx)(a.logo,{[a.filter]:s.meta.builtIn}),alt:`${s.meta.name} logo`,src:s.meta.info.logos.small})});en.displayName="DataSourceLogo";const un=s=>({logo:(0,c.css)({height:"12px",width:"12px",borderRadius:s.shape.radius.default}),filter:(0,c.css)({filter:`invert(${s.isLight?1:0})`})})},87672:(G,O,e)=>{e.d(O,{c:()=>A,s:()=>I});var n=e(74848),c=e(22803),M=e(96540),B=e(30703),g=e(45967),v=e(66404),d=e(63142),r=e(24619),E=e(22973),I=(y=>(y.Creating="Creating",y.Deleting="Deleting",y))(I||{});const f={[r.cF.Inactive]:"check-circle",[r.cF.Pending]:"circle",[r.cF.Recovering]:"exclamation-circle",[r.cF.Firing]:"exclamation-circle",[r.cF.Unknown]:"question-circle"},L={[r.cF.Inactive]:"success",[r.cF.Pending]:"warning",[r.cF.Recovering]:"warning",[r.cF.Firing]:"error",[r.cF.Unknown]:"info"},l={[r.cF.Inactive]:"Normal",[r.cF.Pending]:"Pending",[r.cF.Firing]:"Firing",[r.cF.Recovering]:"Recovering",[r.cF.Unknown]:"Unknown"},x={Creating:"plus-circle",Deleting:"minus-circle"},h=15,A=(0,M.memo)(function({state:P,health:w,recording:T=!1,isPaused:Q=!1,operation:C}){const _=(0,d.of)(N),V=(0,d.$j)();let S=P?f[P]:"circle",D=P?L[P]:"secondary",R=P?l[P]:"unknown";return T&&(S="record-audio",D="success",R="Recording"),w==="nodata"&&(S="exclamation-triangle",D="warning",R="Insufficient data"),(0,E.lf)(w)&&(S="times-circle",D="error",R="Failed to evaluate rule"),Q&&(S="pause-circle",D="warning",R="Paused"),C&&(S=x[C],D="secondary",R=C),(0,n.jsx)(g.m,{content:R,placement:"right",children:(0,n.jsx)("div",{children:(0,n.jsx)(v.E,{color:D,children:(0,n.jsxs)("div",{className:_.iconsContainer,children:[(0,n.jsx)(B.I,{name:S,width:h,height:h,title:R}),C&&(0,n.jsx)("svg",{width:h,height:h,viewBox:"0 0 20 20",version:"1.1",xmlns:"http://www.w3.org/2000/svg",className:_.spinning,children:(0,n.jsx)("circle",{r:h/2,cx:"10",cy:"10",stroke:V.colors.background.primary,strokeWidth:"2",strokeLinecap:"round",fill:"transparent",strokeOpacity:.85,strokeDasharray:"20px"})})]})})})})}),j=(0,c.keyframes)({"0%":{transform:"rotate(0deg)"},"50%":{transform:"rotate(180deg)"},"100%":{transform:"rotate(360deg)"}}),N=y=>({iconsContainer:(0,c.css)({position:"relative",width:h,height:h,"> *":{position:"absolute"}}),spinning:(0,c.css)({[y.transitions.handleMotion("no-preference")]:{animationName:j,animationIterationCount:"infinite",animationDuration:"1s",animationTimingFunction:"linear"}})})},88721:(G,O,e)=>{e.d(O,{V:()=>M});var n=e(96540),c=e(54);function M(){return(0,n.useMemo)(()=>(0,c.Q9)(),[])}}}]);

//# sourceMappingURL=8864.98cd8652e83fd0561e34.js.map