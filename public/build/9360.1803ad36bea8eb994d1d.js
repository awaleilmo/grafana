"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[9360],{21563:(A,f,n)=>{n.d(f,{V:()=>c});var t=n(74848),y=n(96540),g=n(63527),j=n(30703),C=n(38055),h=n(22803),I=n(92745),M=n(63142),m=n(72649);function s(){const r=(0,M.of)(i);return(0,t.jsxs)("div",{children:[(0,t.jsx)(I.x6,{i18nKey:"alerting.prom-duration-docs.explanation",children:"Prometheus duration format consist of a number followed by a time unit."}),(0,t.jsx)("br",{}),(0,t.jsx)(I.x6,{i18nKey:"alerting.prom-duration-docs.different-units",children:"Different units can be combined for more granularity."}),(0,t.jsx)("hr",{}),(0,t.jsxs)("div",{className:r.list,children:[(0,t.jsxs)("div",{className:r.header,children:[(0,t.jsx)("div",{children:(0,t.jsx)(I.x6,{i18nKey:"alerting.prom-duration-docs.symbol",children:"Symbol"})}),(0,t.jsx)("div",{children:(0,t.jsx)(I.x6,{i18nKey:"alerting.prom-duration-docs.time-unit",children:"Time unit"})}),(0,t.jsx)("div",{children:(0,t.jsx)(I.x6,{i18nKey:"alerting.prom-duration-docs.example",children:"Example"})})]}),(0,t.jsx)(o,{unit:m.y.seconds,name:"seconds",example:"20s"}),(0,t.jsx)(o,{unit:m.y.minutes,name:"minutes",example:"10m"}),(0,t.jsx)(o,{unit:m.y.hours,name:"hours",example:"4h"}),(0,t.jsx)(o,{unit:m.y.days,name:"days",example:"3d"}),(0,t.jsx)(o,{unit:m.y.weeks,name:"weeks",example:"2w"}),(0,t.jsxs)("div",{className:r.examples,children:[(0,t.jsx)("div",{children:(0,t.jsx)(I.x6,{i18nKey:"alerting.prom-duration-docs.multiple-units-combined",children:"Multiple units combined"})}),(0,t.jsx)("code",{children:"1m30s, 2h30m20s, 1w2d"})]})]})]})}function o({unit:r,name:T,example:u}){const D=(0,M.of)(i);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:D.unit,children:r}),(0,t.jsx)("div",{children:T}),(0,t.jsx)("code",{children:u})]})}const i=r=>({unit:(0,h.css)({fontWeight:r.typography.fontWeightBold}),list:(0,h.css)({display:"grid",gridTemplateColumns:"max-content 1fr 2fr",gap:r.spacing(1,3)}),header:(0,h.css)({display:"contents",fontWeight:r.typography.fontWeightBold}),examples:(0,h.css)({display:"contents","& > div":{gridColumn:"1 / span 2"}})}),c=(0,y.forwardRef)((r,T)=>(0,t.jsx)(g.p,{suffix:(0,t.jsx)(C.B,{content:(0,t.jsx)(s,{}),disabled:!1,children:(0,t.jsx)(j.I,{name:"info-circle",size:"lg"})}),...r,ref:T}));c.displayName="PromDurationInput"},47987:(A,f,n)=>{n.d(f,{u:()=>m});var t=n(74848),y=n(2543),g=n(43243),j=n(1749);function C(s={},o={}){return j.P.useListReceiverQuery(s,o)}function h(s){const[o,i]=alertingAPI.endpoints.createReceiver.useMutation(s);return[r=>o(r),i]}function I(s){if((0,y.isEmpty)(s.spec.integrations))return"<empty contact point>";const o=(0,y.countBy)(s.spec.integrations,c=>c.type);return Object.entries(o).map(([c,r])=>r>1?`${c} (${r})`:c).join(", ")}const M=new Intl.Collator("en",{sensitivity:"accent"});function m(s){const{currentData:o,isLoading:i}=C({},{refetchOnFocus:!0,refetchOnMountOrArgChange:!0}),c=(0,y.chain)(o?.items).toArray().map(u=>({option:{label:u.spec.title,value:u.metadata.uid??u.spec.title,description:I(u)},contactPoint:u})).value().sort((u,D)=>M.compare(u.option.label,D.option.label)),r=c.map(u=>u.option),T=u=>{if(u==null&&s.isClearable){s.onChange(null);return}if(u){const D=c.find(({option:O})=>O.value===u.value);if(!D)return;s.onChange(D.contactPoint)}};return(0,t.jsx)(g.G,{...s,loading:i,options:r,onChange:T})}},51686:(A,f,n)=>{n.d(f,{XW:()=>b,gB:()=>U,zm:()=>B,Ad:()=>L,SD:()=>N,br:()=>$});var t=n(96540),y=n(91984),g=n(5709);const j=["TimeInterval"],h=g.H.enhanceEndpoints({addTagTypes:j}).injectEndpoints({endpoints:a=>({listNamespacedTimeInterval:a.query({query:e=>({url:`/apis/notifications.alerting.grafana.app/v0alpha1/namespaces/${e.namespace}/timeintervals`,params:{pretty:e.pretty,allowWatchBookmarks:e.allowWatchBookmarks,continue:e.continue,fieldSelector:e.fieldSelector,labelSelector:e.labelSelector,limit:e.limit,resourceVersion:e.resourceVersion,resourceVersionMatch:e.resourceVersionMatch,sendInitialEvents:e.sendInitialEvents,timeoutSeconds:e.timeoutSeconds,watch:e.watch}}),providesTags:["TimeInterval"]}),createNamespacedTimeInterval:a.mutation({query:e=>({url:`/apis/notifications.alerting.grafana.app/v0alpha1/namespaces/${e.namespace}/timeintervals`,method:"POST",body:e.comGithubGrafanaGrafanaPkgApisAlertingNotificationsV0Alpha1TimeInterval,params:{pretty:e.pretty,dryRun:e.dryRun,fieldManager:e.fieldManager,fieldValidation:e.fieldValidation}}),invalidatesTags:["TimeInterval"]}),replaceNamespacedTimeInterval:a.mutation({query:e=>({url:`/apis/notifications.alerting.grafana.app/v0alpha1/namespaces/${e.namespace}/timeintervals/${e.name}`,method:"PUT",body:e.comGithubGrafanaGrafanaPkgApisAlertingNotificationsV0Alpha1TimeInterval,params:{pretty:e.pretty,dryRun:e.dryRun,fieldManager:e.fieldManager,fieldValidation:e.fieldValidation}}),invalidatesTags:["TimeInterval"]}),deleteNamespacedTimeInterval:a.mutation({query:e=>({url:`/apis/notifications.alerting.grafana.app/v0alpha1/namespaces/${e.namespace}/timeintervals/${e.name}`,method:"DELETE",body:e.ioK8SApimachineryPkgApisMetaV1DeleteOptions,params:{pretty:e.pretty,dryRun:e.dryRun,gracePeriodSeconds:e.gracePeriodSeconds,orphanDependents:e.orphanDependents,propagationPolicy:e.propagationPolicy}}),invalidatesTags:["TimeInterval"]})}),overrideExisting:!1});var I=n(78747),M=n(22628),m=n(56476),s=n(85618),o=n(80218),i=n(43100),c=n(72748);const{useLazyGetAlertmanagerConfigurationQuery:r}=y.m,{useLazyListNamespacedTimeIntervalQuery:T,useCreateNamespacedTimeIntervalMutation:u,useReplaceNamespacedTimeIntervalMutation:D,useDeleteNamespacedTimeIntervalMutation:O}=h,R=a=>{const{metadata:e,spec:d}=a;return{...d,id:d.name,metadata:e,provisioned:(0,m.Uo)(a)}},G=(a,e)=>({...a,id:a.name,provisioned:!!(e&&e!==M.rh)}),K=()=>r({selectFromResult:({data:a,...e})=>{if(!a)return{data:a,...e};const{alertmanager_config:d}=a,x=d.muteTimeProvenances??{};return{data:(0,I.IT)(d).map(v=>G(v,x[v.name])),...e}}}),S=()=>T({selectFromResult:({data:a,...e})=>({data:a?.items.map(d=>R(d)),...e})}),L=({alertmanager:a,skip:e})=>{const d=(0,m.dM)(a),[x,P]=S(),[E,v]=K();return(0,t.useEffect)(()=>{if(!e)if(d){const l=(0,s.Ge)();x({namespace:l})}else E(a)},[a,E,x,e,d]),d?P:v},b=({alertmanager:a})=>{const e=(0,m.dM)(a),[d]=u(),[x]=(0,i.d)(),P=(0,o.Yb)(({interval:v})=>{const l=(0,s.Ge)();return d({namespace:l,comGithubGrafanaGrafanaPkgApisAlertingNotificationsV0Alpha1TimeInterval:{metadata:{},spec:v}}).unwrap()}),E=(0,o.Yb)(({interval:v})=>{const l=(0,c.X9)({interval:v});return x(l)});return e?P:E},B=({alertmanager:a,name:e})=>{const d=(0,m.dM)(a),[x,P]=T({selectFromResult:({data:l,...p})=>l?l.items.length===0?{...p,data:void 0,isError:!0}:{data:R(l.items[0]),...p}:{data:l,...p}}),[E,v]=r({selectFromResult:({data:l,...p})=>{if(!l)return{data:l,...p};const V=l?.alertmanager_config??{},W=(0,I.IT)(V).find(({name:F})=>F===e);if(W){const F=V?.muteTimeProvenances??{};return{data:G(W,F[W.name]),...p}}return{...p,data:void 0,isError:!0}}});return(0,t.useEffect)(()=>{if(d){const l=(0,s.Ge)(),p=(0,m.O)(e);x({namespace:l,fieldSelector:`spec.name=${p}`},!0)}else E(a,!0)},[a,E,x,e,d]),d?P:v},N=({alertmanager:a})=>{const e=(0,m.dM)(a),[d]=D(),[x]=(0,i.d)(),P=(0,o.Yb)(async({interval:v,originalName:l})=>{const p=(0,s.Ge)();return d({name:l,namespace:p,comGithubGrafanaGrafanaPkgApisAlertingNotificationsV0Alpha1TimeInterval:{spec:v,metadata:{name:l}}}).unwrap()}),E=(0,o.Yb)(async({interval:v,originalName:l})=>{const p=(0,c.ov)({interval:v,originalName:l});return x(p)});return e?P:E},U=({alertmanager:a})=>{const e=(0,m.dM)(a),[d,x]=(0,i.d)(),[P]=O(),E=(0,o.Yb)(async({name:l})=>{const p=(0,c.$8)({name:l});return d(p)}),v=(0,o.Yb)(async({name:l})=>{const p=(0,s.Ge)();await P({name:l,namespace:p,ioK8SApimachineryPkgApisMetaV1DeleteOptions:{}}).unwrap()});return e?v:E},$=({alertmanager:a})=>{const e=(0,m.dM)(a),[d]=K();return e?()=>{}:async(x,P)=>{if(!P)return d(a).unwrap().then(E=>!!(0,I.IT)(E.alertmanager_config)?.find(p=>p.name===x)?`Mute timing already exists with name "${x}"`:void 0)}}},55684:(A,f,n)=>{n.d(f,{A:()=>M});var t=n(74848),y=n(92745),g=n(18857),j=n(51686),C=n(86017);const h=({name:m,time_intervals:s})=>({value:m,label:m,description:s.map(o=>(0,C.LF)(o)).join(", AND ")}),M=({alertmanager:m,selectProps:s})=>{const{data:o}=(0,j.Ad)({alertmanager:m,skip:s.disabled}),i=o?.map(c=>h(c))||[];return(0,t.jsx)(g.KF,{"aria-label":(0,y.t)("alerting.time-intervals-selector.aria-label-time-intervals","Time intervals"),options:i,placeholder:(0,y.t)("alerting.time-intervals-selector.placeholder-select-time-intervals","Select time intervals..."),...s})}},61474:(A,f,n)=>{n.d(f,{H:()=>t});const t={group_wait:"30s",group_interval:"5m",repeat_interval:"4h"}},65120:(A,f,n)=>{n.d(f,{t:()=>y});var t=n(22803);const y=g=>({container:(0,t.css)({alignItems:"center",display:"flex",flexFlow:"row nowrap","& > * + *":{marginLeft:g.spacing(1)}}),input:(0,t.css)({flex:1}),promDurationInput:(0,t.css)({maxWidth:g.spacing(32)}),timingFormContainer:(0,t.css)({padding:g.spacing(1)}),linkText:(0,t.css)({textDecoration:"underline"}),collapse:(0,t.css)({border:"none",background:"none",color:g.colors.text.primary})})},78747:(A,f,n)=>{n.d(f,{Hy:()=>M,IT:()=>m,av:()=>o,oB:()=>s});var t=n(74848),y=n(95093),g=n.n(y),j=n(96540),C=n(41654),h=n(86017);const I=/^((([01][0-9])|(2[0-3])):[0-5][0-9])$|(^24:00$)/,M=i=>i?I.test(i):!0,m=i=>[...i.mute_time_intervals??[],...i.time_intervals??[]],s=(i,c)=>{if(!i&&!c)return!0;if(!i&&c||i&&!c)return!1;const r="HH:mm",T=g()().startOf("day").add(i,r),u=g()().startOf("day").add(c,r);return!!(i&&c&&T.isBefore(u)||i&&c&&u.isAfter(T))};function o(i){const r=i.time_intervals.map((T,u)=>{const{times:D,weekdays:O,days_of_month:R,months:G,years:K,location:S}=T,L=(0,h.Dm)(D,S),b=(0,h.uH)(O),B=(0,h.UL)(R),N=(0,h.$P)(G),U=(0,h.mP)(K);return(0,t.jsx)(j.Fragment,{children:(0,t.jsxs)("div",{children:[`${L} ${b}`,(0,t.jsx)("br",{}),[B,N,U].join(" | "),(0,t.jsx)("br",{})]})},JSON.stringify(T)+u)});return(0,t.jsx)(C.B,{direction:"column",gap:1,children:r})}},92649:(A,f,n)=>{n.d(f,{G:()=>t});const t={groupWait:{label:"Group wait",description:"The wait time before sending the first notification for a new group of alerts. If empty, it is inherited from the parent policy.",ariaLabel:"Group wait value"},groupInterval:{label:"Group interval",description:"The wait time before sending a notification about changes in the alert group after the first notification has been sent. If empty, it is inherited from the parent policy.",ariaLabel:"Group interval value"},repeatInterval:{label:"Repeat interval",description:"The wait time before resending a notification that has already been sent successfully.",ariaLabel:"Repeat interval value"}}}}]);

//# sourceMappingURL=9360.1803ad36bea8eb994d1d.js.map