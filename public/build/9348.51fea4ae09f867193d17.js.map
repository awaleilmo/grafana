{"version":3,"file":"9348.51fea4ae09f867193d17.js","mappings":"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","sources":["webpack://grafana/./public/app/plugins/panel/timeseries/plugins/OutsideRangePlugin.tsx","webpack://grafana/./public/app/plugins/panel/timeseries/plugins/annotations2/AnnotationEditor2.tsx","webpack://grafana/./public/app/plugins/panel/timeseries/plugins/annotations2/AnnotationTooltip2.tsx","webpack://grafana/./public/app/plugins/panel/timeseries/plugins/annotations2/AnnotationMarker2.tsx","webpack://grafana/./public/app/plugins/panel/timeseries/plugins/AnnotationsPlugin2.tsx","webpack://grafana/./packages/grafana-ui/src/components/VizTooltip/VizTooltipHeader.tsx","webpack://grafana/./packages/grafana-ui/src/components/VizTooltip/VizTooltipContent.tsx","webpack://grafana/./public/app/core/components/Form/Form.tsx","webpack://grafana/./public/app/plugins/panel/timeseries/utils.ts","webpack://grafana/./packages/grafana-ui/src/components/VizTooltip/VizTooltipColorIndicator.tsx","webpack://grafana/./packages/grafana-ui/src/components/VizTooltip/VizTooltipRow.tsx"],"sourcesContent":["import { useLayoutEffect, useRef, useState } from 'react';\nimport uPlot, { TypedArray, Scale } from 'uplot';\n\nimport { AbsoluteTimeRange } from '@grafana/data';\nimport { Trans } from '@grafana/i18n';\nimport { UPlotConfigBuilder, Button } from '@grafana/ui';\n\ninterface ThresholdControlsPluginProps {\n  config: UPlotConfigBuilder;\n  onChangeTimeRange: (timeRange: AbsoluteTimeRange) => void;\n}\n\nexport const OutsideRangePlugin = ({ config, onChangeTimeRange }: ThresholdControlsPluginProps) => {\n  const plotInstance = useRef<uPlot>();\n  const [timevalues, setTimeValues] = useState<number[] | TypedArray>([]);\n  const [timeRange, setTimeRange] = useState<Scale | undefined>();\n\n  useLayoutEffect(() => {\n    config.addHook('init', (u) => {\n      plotInstance.current = u;\n    });\n\n    config.addHook('setScale', (u) => {\n      setTimeValues(u.data?.[0] ?? []);\n      setTimeRange(u.scales['x'] ?? undefined);\n    });\n  }, [config]);\n\n  if (timevalues.length < 2 || !onChangeTimeRange) {\n    return null;\n  }\n\n  if (!timeRange || !timeRange.time || !timeRange.min || !timeRange.max!) {\n    return null;\n  }\n\n  // Time values are always sorted for uPlot to work\n  let i = 0,\n    j = timevalues.length - 1;\n\n  while (i <= j && timevalues[i] == null) {\n    i++;\n  }\n\n  while (j >= 0 && timevalues[j] == null) {\n    j--;\n  }\n\n  const first = timevalues[i];\n  const last = timevalues[j];\n  const fromX = timeRange.min;\n  const toX = timeRange.max;\n\n  if (first == null || last == null) {\n    return null;\n  }\n\n  // (StartA <= EndB) and (EndA >= StartB)\n  if (first <= toX && last >= fromX) {\n    return null;\n  }\n\n  return (\n    <div\n      style={{\n        position: 'absolute',\n        top: '50%',\n        transform: 'translateY(-50%)',\n        width: '100%',\n        textAlign: 'center',\n      }}\n    >\n      <div>\n        <div>\n          <Trans i18nKey=\"timeseries.outside-range-plugin.data-outside-time-range\">Data outside time range</Trans>\n        </div>\n        <Button\n          onClick={(v) => onChangeTimeRange({ from: first, to: last })}\n          variant=\"secondary\"\n          data-testid=\"time-series-zoom-to-data\"\n        >\n          <Trans i18nKey=\"timeseries.outside-range-plugin.zoom-to-data\">Zoom to data</Trans>\n        </Button>\n      </div>\n    </div>\n  );\n};\n\nOutsideRangePlugin.displayName = 'OutsideRangePlugin';\n","import { css } from '@emotion/css';\nimport { useRef } from 'react';\nimport { Controller } from 'react-hook-form';\nimport { useAsyncFn, useClickAway } from 'react-use';\n\nimport { AnnotationEventUIModel, GrafanaTheme2, dateTimeFormat, systemDateFormats } from '@grafana/data';\nimport { Trans, t } from '@grafana/i18n';\nimport { Button, Field, Stack, TextArea, usePanelContext, useStyles2 } from '@grafana/ui';\nimport { Form } from 'app/core/components/Form/Form';\nimport { TagFilter } from 'app/core/components/TagFilter/TagFilter';\nimport { getAnnotationTags } from 'app/features/annotations/api';\n\ninterface Props {\n  annoVals: Record<string, any[]>;\n  annoIdx: number;\n  timeZone: string;\n  dismiss: () => void;\n}\n\ninterface AnnotationEditFormDTO {\n  description: string;\n  tags: string[];\n}\n\nexport const AnnotationEditor2 = ({ annoVals, annoIdx, dismiss, timeZone, ...otherProps }: Props) => {\n  const styles = useStyles2(getStyles);\n  const { onAnnotationCreate, onAnnotationUpdate } = usePanelContext();\n\n  const clickAwayRef = useRef(null);\n\n  useClickAway(clickAwayRef, dismiss);\n\n  const [createAnnotationState, createAnnotation] = useAsyncFn(async (event: AnnotationEventUIModel) => {\n    const result = await onAnnotationCreate!(event);\n    dismiss();\n    return result;\n  });\n\n  const [updateAnnotationState, updateAnnotation] = useAsyncFn(async (event: AnnotationEventUIModel) => {\n    const result = await onAnnotationUpdate!(event);\n    dismiss();\n    return result;\n  });\n\n  const timeFormatter = (value: number) =>\n    dateTimeFormat(value, {\n      format: systemDateFormats.fullDate,\n      timeZone,\n    });\n\n  const isUpdatingAnnotation = annoVals.id?.[annoIdx] != null;\n  const isRegionAnnotation = annoVals.isRegion?.[annoIdx];\n  const operation = isUpdatingAnnotation ? updateAnnotation : createAnnotation;\n  const stateIndicator = isUpdatingAnnotation ? updateAnnotationState : createAnnotationState;\n  const time = isRegionAnnotation\n    ? `${timeFormatter(annoVals.time[annoIdx])} - ${timeFormatter(annoVals.timeEnd[annoIdx])}`\n    : timeFormatter(annoVals.time[annoIdx]);\n\n  const onSubmit = ({ tags, description }: AnnotationEditFormDTO) => {\n    operation({\n      id: annoVals.id?.[annoIdx] ?? undefined,\n      tags,\n      description,\n      from: Math.round(annoVals.time[annoIdx]!),\n      to: Math.round(annoVals.timeEnd?.[annoIdx] ?? annoVals.time[annoIdx]!),\n    });\n  };\n\n  // Annotation editor\n  return (\n    <div ref={clickAwayRef} className={styles.editor} {...otherProps}>\n      <div className={styles.header}>\n        <Stack justifyContent={'space-between'} alignItems={'center'}>\n          <div>\n            {isUpdatingAnnotation\n              ? t('timeseries.annotation-editor2.edit-annotation', 'Edit annotation')\n              : t('timeseries.annotation-editor2.add-annotation', 'Add annotation')}\n          </div>\n          <div>{time}</div>\n        </Stack>\n      </div>\n      <Form<AnnotationEditFormDTO>\n        onSubmit={onSubmit}\n        defaultValues={{ description: annoVals.text?.[annoIdx], tags: annoVals.tags?.[annoIdx] || [] }}\n      >\n        {({ register, errors, control }) => {\n          return (\n            <>\n              <div className={styles.content}>\n                <Field\n                  label={t('timeseries.annotation-editor2.label-description', 'Description')}\n                  invalid={!!errors.description}\n                  error={errors?.description?.message}\n                >\n                  <TextArea\n                    className={styles.textarea}\n                    {...register('description', {\n                      required: 'Annotation description is required',\n                    })}\n                  />\n                </Field>\n                <Field label={t('timeseries.annotation-editor2.label-tags', 'Tags')}>\n                  <Controller\n                    control={control}\n                    name=\"tags\"\n                    render={({ field: { ref, onChange, ...field } }) => {\n                      return (\n                        <TagFilter\n                          allowCustomValue\n                          placeholder={t('timeseries.annotation-editor2.placeholder-add-tags', 'Add tags')}\n                          onChange={onChange}\n                          tagOptions={getAnnotationTags}\n                          tags={field.value}\n                        />\n                      );\n                    }}\n                  />\n                </Field>\n              </div>\n              <div className={styles.footer}>\n                <Stack justifyContent={'flex-end'}>\n                  <Button size={'sm'} variant=\"secondary\" onClick={dismiss} fill=\"outline\">\n                    <Trans i18nKey=\"timeseries.annotation-editor2.cancel\">Cancel</Trans>\n                  </Button>\n                  <Button size={'sm'} type={'submit'} disabled={stateIndicator?.loading}>\n                    {stateIndicator?.loading\n                      ? t('timeseries.annotation-editor2.saving', 'Saving')\n                      : t('timeseries.annotation-editor2.save', 'Save')}\n                  </Button>\n                </Stack>\n              </div>\n            </>\n          );\n        }}\n      </Form>\n    </div>\n  );\n};\n\nconst getStyles = (theme: GrafanaTheme2) => {\n  return {\n    editor: css({\n      background: theme.colors.background.elevated,\n      border: `1px solid ${theme.colors.border.weak}`,\n      borderRadius: theme.shape.radius.default,\n      boxShadow: theme.shadows.z3,\n      userSelect: 'text',\n      width: '460px',\n    }),\n    content: css({\n      padding: theme.spacing(1),\n    }),\n    header: css({\n      borderBottom: `1px solid ${theme.colors.border.weak}`,\n      padding: theme.spacing(0.5, 1),\n      fontWeight: theme.typography.fontWeightBold,\n      fontSize: theme.typography.fontSize,\n      color: theme.colors.text.primary,\n    }),\n    footer: css({\n      borderTop: `1px solid ${theme.colors.border.weak}`,\n      padding: theme.spacing(1, 1),\n    }),\n    textarea: css({\n      color: theme.colors.text.secondary,\n      fontSize: theme.typography.bodySmall.fontSize,\n    }),\n  };\n};\n","import { css } from '@emotion/css';\nimport * as React from 'react';\n\nimport { GrafanaTheme2, dateTimeFormat, systemDateFormats, textUtil } from '@grafana/data';\nimport { t } from '@grafana/i18n';\nimport { Stack, IconButton, Tag, usePanelContext, useStyles2 } from '@grafana/ui';\nimport alertDef from 'app/features/alerting/state/alertDef';\n\ninterface Props {\n  annoVals: Record<string, any[]>;\n  annoIdx: number;\n  timeZone: string;\n  onEdit: () => void;\n}\n\nconst retFalse = () => false;\n\nexport const AnnotationTooltip2 = ({ annoVals, annoIdx, timeZone, onEdit }: Props) => {\n  const annoId = annoVals.id?.[annoIdx];\n\n  const styles = useStyles2(getStyles);\n\n  const { canEditAnnotations = retFalse, canDeleteAnnotations = retFalse, onAnnotationDelete } = usePanelContext();\n\n  const dashboardUID = annoVals.dashboardUID?.[annoIdx];\n\n  // grafana can be configured to load alert rules from loki. Those annotations cannot be edited or deleted. The id being 0 is the best indicator the annotation came from loki\n  const canEdit = annoId !== 0 && canEditAnnotations(dashboardUID);\n  const canDelete = annoId !== 0 && canDeleteAnnotations(dashboardUID) && onAnnotationDelete != null;\n\n  const timeFormatter = (value: number) =>\n    dateTimeFormat(value, {\n      format: systemDateFormats.fullDate,\n      timeZone,\n    });\n\n  let time = timeFormatter(annoVals.time[annoIdx]);\n  let text = annoVals.text?.[annoIdx] ?? '';\n\n  if (annoVals.isRegion?.[annoIdx]) {\n    time += ' - ' + timeFormatter(annoVals.timeEnd[annoIdx]);\n  }\n\n  let avatar;\n  if (annoVals.login?.[annoIdx] && annoVals.avatarUrl?.[annoIdx]) {\n    avatar = <img className={styles.avatar} alt=\"Annotation avatar\" src={annoVals.avatarUrl[annoIdx]} />;\n  }\n\n  let state: React.ReactNode | null = null;\n  let alertText = '';\n\n  if (annoVals.alertId?.[annoIdx] !== undefined && annoVals.newState?.[annoIdx]) {\n    const stateModel = alertDef.getStateDisplayModel(annoVals.newState[annoIdx]);\n    state = (\n      <div className={styles.alertState}>\n        <i className={stateModel.stateClass}>{stateModel.text}</i>\n      </div>\n    );\n\n    alertText = annoVals.data?.[annoIdx] ? alertDef.getAlertAnnotationText(annoVals.data[annoIdx]) : '';\n  } else if (annoVals.title?.[annoIdx]) {\n    text = annoVals.title[annoIdx] + (text ? `<br />${text}` : '');\n  }\n\n  return (\n    <div className={styles.wrapper}>\n      <div className={styles.header}>\n        <Stack gap={2} basis=\"100%\" justifyContent=\"space-between\" alignItems=\"center\">\n          <div className={styles.meta}>\n            <span>\n              {avatar}\n              {state}\n            </span>\n            {time}\n          </div>\n          {(canEdit || canDelete) && (\n            <div className={styles.editControls}>\n              {canEdit && (\n                <IconButton\n                  name={'pen'}\n                  size={'sm'}\n                  onClick={onEdit}\n                  tooltip={t('timeseries.annotation-tooltip2.tooltip-edit', 'Edit')}\n                />\n              )}\n              {canDelete && (\n                <IconButton\n                  name={'trash-alt'}\n                  size={'sm'}\n                  onClick={() => onAnnotationDelete(annoId)}\n                  tooltip={t('timeseries.annotation-tooltip2.tooltip-delete', 'Delete')}\n                />\n              )}\n            </div>\n          )}\n        </Stack>\n      </div>\n\n      <div className={styles.body}>\n        {text && <div className={styles.text} dangerouslySetInnerHTML={{ __html: textUtil.sanitize(text) }} />}\n        {alertText}\n        <div>\n          <Stack gap={0.5} wrap={true}>\n            {annoVals.tags?.[annoIdx]?.map((t: string, i: number) => (\n              <Tag name={t} key={`${t}-${i}`} />\n            ))}\n          </Stack>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nconst getStyles = (theme: GrafanaTheme2) => ({\n  wrapper: css({\n    zIndex: theme.zIndex.tooltip,\n    whiteSpace: 'initial',\n    borderRadius: theme.shape.radius.default,\n    background: theme.colors.background.elevated,\n    border: `1px solid ${theme.colors.border.weak}`,\n    boxShadow: theme.shadows.z3,\n    userSelect: 'text',\n  }),\n  header: css({\n    padding: theme.spacing(0.5, 1),\n    borderBottom: `1px solid ${theme.colors.border.weak}`,\n    fontWeight: theme.typography.fontWeightBold,\n    fontSize: theme.typography.fontSize,\n    color: theme.colors.text.primary,\n    display: 'flex',\n  }),\n  meta: css({\n    display: 'flex',\n    color: theme.colors.text.primary,\n    fontWeight: 400,\n  }),\n  editControls: css({\n    display: 'flex',\n    '> :last-child': {\n      marginLeft: 0,\n    },\n  }),\n  body: css({\n    padding: theme.spacing(1),\n    fontSize: theme.typography.bodySmall.fontSize,\n    color: theme.colors.text.secondary,\n    fontWeight: 400,\n    a: {\n      color: theme.colors.text.link,\n      '&:hover': {\n        textDecoration: 'underline',\n      },\n    },\n  }),\n  text: css({\n    paddingBottom: theme.spacing(1),\n  }),\n  avatar: css({\n    borderRadius: theme.shape.radius.circle,\n    width: 16,\n    height: 16,\n    marginRight: theme.spacing(1),\n  }),\n  alertState: css({\n    paddingRight: theme.spacing(1),\n    fontWeight: theme.typography.fontWeightMedium,\n  }),\n});\n","import { css } from '@emotion/css';\nimport { flip, shift, autoUpdate } from '@floating-ui/dom';\nimport { useFloating } from '@floating-ui/react';\nimport { useState } from 'react';\nimport * as React from 'react';\nimport { createPortal } from 'react-dom';\n\nimport { GrafanaTheme2 } from '@grafana/data';\nimport { selectors } from '@grafana/e2e-selectors';\nimport { TimeZone } from '@grafana/schema';\nimport { useStyles2 } from '@grafana/ui';\n\nimport { AnnotationEditor2 } from './AnnotationEditor2';\nimport { AnnotationTooltip2 } from './AnnotationTooltip2';\n\ninterface AnnoBoxProps {\n  annoVals: Record<string, any[]>;\n  annoIdx: number;\n  style: React.CSSProperties | null;\n  className: string;\n  timeZone: TimeZone;\n  exitWipEdit?: null | (() => void);\n  portalRoot: HTMLElement;\n}\n\nconst STATE_DEFAULT = 0;\nconst STATE_EDITING = 1;\nconst STATE_HOVERED = 2;\n\nexport const AnnotationMarker2 = ({\n  annoVals,\n  annoIdx,\n  className,\n  style,\n  exitWipEdit,\n  timeZone,\n  portalRoot,\n}: AnnoBoxProps) => {\n  const styles = useStyles2(getStyles);\n\n  const [state, setState] = useState(exitWipEdit != null ? STATE_EDITING : STATE_DEFAULT);\n  const { refs, floatingStyles } = useFloating({\n    open: true,\n    placement: 'bottom',\n    middleware: [\n      flip({\n        fallbackAxisSideDirection: 'end',\n        // see https://floating-ui.com/docs/flip#combining-with-shift\n        crossAxis: false,\n        boundary: document.body,\n      }),\n      shift(),\n    ],\n    whileElementsMounted: autoUpdate,\n    strategy: 'fixed',\n  });\n\n  const contents =\n    state === STATE_HOVERED ? (\n      <AnnotationTooltip2\n        annoIdx={annoIdx}\n        annoVals={annoVals}\n        timeZone={timeZone}\n        onEdit={() => setState(STATE_EDITING)}\n      />\n    ) : state === STATE_EDITING ? (\n      <AnnotationEditor2\n        annoIdx={annoIdx}\n        annoVals={annoVals}\n        timeZone={timeZone}\n        dismiss={() => {\n          exitWipEdit?.();\n          setState(STATE_DEFAULT);\n        }}\n      />\n    ) : null;\n\n  return (\n    <div\n      ref={refs.setReference}\n      className={className}\n      style={style!}\n      onMouseEnter={() => state !== STATE_EDITING && setState(STATE_HOVERED)}\n      onMouseLeave={() => state !== STATE_EDITING && setState(STATE_DEFAULT)}\n      data-testid={selectors.pages.Dashboard.Annotations.marker}\n    >\n      {contents &&\n        createPortal(\n          <div ref={refs.setFloating} className={styles.annoBox} style={floatingStyles} data-testid=\"annotation-marker\">\n            {contents}\n          </div>,\n          portalRoot\n        )}\n    </div>\n  );\n};\n\nconst getStyles = (theme: GrafanaTheme2) => ({\n  // NOTE: shares much with TooltipPlugin2\n  annoBox: css({\n    top: 0,\n    left: 0,\n    zIndex: theme.zIndex.tooltip,\n    borderRadius: theme.shape.radius.default,\n    position: 'absolute',\n    background: theme.colors.background.primary,\n    border: `1px solid ${theme.colors.border.weak}`,\n    boxShadow: theme.shadows.z2,\n    userSelect: 'text',\n    minWidth: '300px',\n  }),\n});\n","import { css } from '@emotion/css';\nimport { useCallback, useEffect, useLayoutEffect, useMemo, useRef, useState, useReducer } from 'react';\nimport * as React from 'react';\nimport { createPortal } from 'react-dom';\nimport tinycolor from 'tinycolor2';\nimport uPlot from 'uplot';\n\nimport { arrayToDataFrame, colorManipulator, DataFrame, DataTopic } from '@grafana/data';\nimport { TimeZone } from '@grafana/schema';\nimport { DEFAULT_ANNOTATION_COLOR, getPortalContainer, UPlotConfigBuilder, useStyles2, useTheme2 } from '@grafana/ui';\n\nimport { AnnotationMarker2 } from './annotations2/AnnotationMarker2';\n\n// (copied from TooltipPlugin2)\ninterface TimeRange2 {\n  from: number;\n  to: number;\n}\n\ninterface AnnotationsPluginProps {\n  config: UPlotConfigBuilder;\n  annotations: DataFrame[];\n  timeZone: TimeZone;\n  newRange: TimeRange2 | null;\n  setNewRange: (newRage: TimeRange2 | null) => void;\n  canvasRegionRendering?: boolean;\n}\n\n// TODO: batch by color, use Path2D objects\nconst renderLine = (ctx: CanvasRenderingContext2D, y0: number, y1: number, x: number, color: string) => {\n  ctx.beginPath();\n  ctx.moveTo(x, y0);\n  ctx.lineTo(x, y1);\n  ctx.strokeStyle = color;\n  ctx.stroke();\n};\n\n// const renderUpTriangle = (ctx: CanvasRenderingContext2D, x: number, y: number, w: number, h: number, color: string) => {\n//   ctx.beginPath();\n//   ctx.moveTo(x - w/2, y + h/2);\n//   ctx.lineTo(x + w/2, y + h/2);\n//   ctx.lineTo(x, y);\n//   ctx.closePath();\n//   ctx.fillStyle = color;\n//   ctx.fill();\n// }\n\nconst DEFAULT_ANNOTATION_COLOR_HEX8 = tinycolor(DEFAULT_ANNOTATION_COLOR).toHex8String();\n\nfunction getVals(frame: DataFrame) {\n  let vals: Record<string, any[]> = {};\n  frame.fields.forEach((f) => {\n    vals[f.name] = f.values;\n  });\n\n  return vals;\n}\n\nexport const AnnotationsPlugin2 = ({\n  annotations,\n  timeZone,\n  config,\n  newRange,\n  setNewRange,\n  canvasRegionRendering = true,\n}: AnnotationsPluginProps) => {\n  const [plot, setPlot] = useState<uPlot>();\n\n  const [portalRoot] = useState(() => getPortalContainer());\n\n  const styles = useStyles2(getStyles);\n  const getColorByName = useTheme2().visualization.getColorByName;\n\n  const [_, forceUpdate] = useReducer((x) => x + 1, 0);\n\n  const annos = useMemo(() => {\n    let annos = annotations.filter(\n      (frame) => frame.name !== 'exemplar' && frame.length > 0 && frame.fields.some((f) => f.name === 'time')\n    );\n\n    if (newRange) {\n      let isRegion = newRange.to > newRange.from;\n\n      const wipAnnoFrame = arrayToDataFrame([\n        {\n          time: newRange.from,\n          timeEnd: isRegion ? newRange.to : null,\n          isRegion: isRegion,\n          color: DEFAULT_ANNOTATION_COLOR_HEX8,\n        },\n      ]);\n\n      wipAnnoFrame.meta = {\n        dataTopic: DataTopic.Annotations,\n        custom: {\n          isWip: true,\n        },\n      };\n\n      annos.push(wipAnnoFrame);\n    }\n\n    return annos;\n  }, [annotations, newRange]);\n\n  const exitWipEdit = useCallback(() => {\n    setNewRange(null);\n  }, [setNewRange]);\n\n  const annoRef = useRef(annos);\n  annoRef.current = annos;\n  const newRangeRef = useRef(newRange);\n  newRangeRef.current = newRange;\n\n  const xAxisRef = useRef<HTMLDivElement>();\n\n  useLayoutEffect(() => {\n    config.addHook('ready', (u) => {\n      let xAxisEl = u.root.querySelector<HTMLDivElement>('.u-axis')!;\n      xAxisRef.current = xAxisEl;\n      setPlot(u);\n    });\n\n    config.addHook('draw', (u) => {\n      let annos = annoRef.current;\n\n      const ctx = u.ctx;\n\n      ctx.save();\n\n      ctx.beginPath();\n      ctx.rect(u.bbox.left, u.bbox.top, u.bbox.width, u.bbox.height);\n      ctx.clip();\n\n      annos.forEach((frame) => {\n        let vals = getVals(frame);\n\n        if (frame.name === 'xymark') {\n          // xMin, xMax, yMin, yMax, color, lineWidth, lineStyle, fillOpacity, text\n\n          let xKey = config.scales[0].props.scaleKey;\n          let yKey = config.scales[1].props.scaleKey;\n\n          for (let i = 0; i < frame.length; i++) {\n            let color = getColorByName(vals.color?.[i] || DEFAULT_ANNOTATION_COLOR_HEX8);\n\n            let x0 = u.valToPos(vals.xMin[i], xKey, true);\n            let x1 = u.valToPos(vals.xMax[i], xKey, true);\n            let y0 = u.valToPos(vals.yMax[i], yKey, true);\n            let y1 = u.valToPos(vals.yMin[i], yKey, true);\n\n            ctx.fillStyle = colorManipulator.alpha(color, vals.fillOpacity[i]);\n            ctx.fillRect(x0, y0, x1 - x0, y1 - y0);\n\n            ctx.lineWidth = Math.round(vals.lineWidth[i] * uPlot.pxRatio);\n\n            if (vals.lineStyle[i] === 'dash') {\n              // maybe extract this to vals.lineDash[i] in future?\n              ctx.setLineDash([5, 5]);\n            } else {\n              // solid\n              ctx.setLineDash([]);\n            }\n\n            ctx.strokeStyle = color;\n            ctx.strokeRect(x0, y0, x1 - x0, y1 - y0);\n          }\n        } else {\n          let y0 = u.bbox.top;\n          let y1 = y0 + u.bbox.height;\n\n          ctx.lineWidth = 2;\n          ctx.setLineDash([5, 5]);\n\n          for (let i = 0; i < vals.time.length; i++) {\n            let color = getColorByName(vals.color?.[i] || DEFAULT_ANNOTATION_COLOR_HEX8);\n\n            let x0 = u.valToPos(vals.time[i], 'x', true);\n            renderLine(ctx, y0, y1, x0, color);\n\n            if (vals.isRegion?.[i]) {\n              let x1 = u.valToPos(vals.timeEnd[i], 'x', true);\n              renderLine(ctx, y0, y1, x1, color);\n\n              if (canvasRegionRendering) {\n                ctx.fillStyle = colorManipulator.alpha(color, 0.1);\n                ctx.fillRect(x0, y0, x1 - x0, u.bbox.height);\n              }\n            }\n          }\n        }\n      });\n\n      ctx.restore();\n    });\n  }, [config, canvasRegionRendering, getColorByName]);\n\n  // ensure annos are re-drawn whenever they change\n  useEffect(() => {\n    if (plot) {\n      plot.redraw();\n\n      // this forces a second redraw after uPlot is updated (in the Plot.tsx didUpdate) with new data/scales\n      // and ensures the anno marker positions in the dom are re-rendered in correct places\n      // (this is temp fix until uPlot integrtion is refactored)\n      setTimeout(() => {\n        forceUpdate();\n      }, 0);\n    }\n  }, [annos, plot]);\n\n  if (plot) {\n    let markers = annos.flatMap((frame, frameIdx) => {\n      let vals = getVals(frame);\n\n      let markers: React.ReactNode[] = [];\n\n      for (let i = 0; i < vals.time.length; i++) {\n        let color = getColorByName(vals.color?.[i] || DEFAULT_ANNOTATION_COLOR);\n        let left = Math.round(plot.valToPos(vals.time[i], 'x')) || 0; // handles -0\n        let style: React.CSSProperties | null = null;\n        let className = '';\n        let isVisible = true;\n\n        if (vals.isRegion?.[i]) {\n          let right = Math.round(plot.valToPos(vals.timeEnd?.[i], 'x')) || 0; // handles -0\n\n          isVisible = left < plot.rect.width && right > 0;\n\n          if (isVisible) {\n            let clampedLeft = Math.max(0, left);\n            let clampedRight = Math.min(plot.rect.width, right);\n\n            style = { left: clampedLeft, background: color, width: clampedRight - clampedLeft };\n            className = styles.annoRegion;\n          }\n        } else {\n          isVisible = left >= 0 && left <= plot.rect.width;\n\n          if (isVisible) {\n            style = { left, borderBottomColor: color };\n            className = styles.annoMarker;\n          }\n        }\n\n        // @TODO: Reset newRange after annotation is saved\n        if (isVisible) {\n          let isWip = frame.meta?.custom?.isWip;\n\n          markers.push(\n            <AnnotationMarker2\n              annoIdx={i}\n              annoVals={vals}\n              className={className}\n              style={style}\n              timeZone={timeZone}\n              key={`${frameIdx}:${i}`}\n              exitWipEdit={isWip ? exitWipEdit : null}\n              portalRoot={portalRoot}\n            />\n          );\n        }\n      }\n\n      return markers;\n    });\n\n    return createPortal(markers, xAxisRef.current!);\n  }\n\n  return null;\n};\n\nconst getStyles = () => ({\n  annoMarker: css({\n    position: 'absolute',\n    width: 0,\n    height: 0,\n    borderLeft: '5px solid transparent',\n    borderRight: '5px solid transparent',\n    borderBottomWidth: '5px',\n    borderBottomStyle: 'solid',\n    transform: 'translateX(-50%)',\n    cursor: 'pointer',\n    zIndex: 1,\n  }),\n  annoRegion: css({\n    position: 'absolute',\n    height: '5px',\n    cursor: 'pointer',\n    zIndex: 1,\n  }),\n});\n","import { css } from '@emotion/css';\n\nimport { GrafanaTheme2 } from '@grafana/data';\n\nimport { useStyles2 } from '../../themes/ThemeContext';\n\nimport { VizTooltipRow } from './VizTooltipRow';\nimport { VizTooltipItem } from './types';\n\ninterface Props {\n  item: VizTooltipItem;\n  isPinned: boolean;\n}\nexport const VizTooltipHeader = ({ item, isPinned }: Props) => {\n  const styles = useStyles2(getStyles);\n\n  const { label, value, color, colorIndicator } = item;\n\n  return (\n    <div className={styles.wrapper}>\n      <VizTooltipRow\n        label={label}\n        value={value}\n        color={color}\n        colorIndicator={colorIndicator}\n        marginRight={'22px'}\n        isPinned={isPinned}\n      />\n    </div>\n  );\n};\n\nconst getStyles = (theme: GrafanaTheme2) => ({\n  wrapper: css({\n    display: 'flex',\n    flexDirection: 'column',\n    flex: 1,\n    padding: theme.spacing(1),\n    lineHeight: 1,\n  }),\n});\n","import { css } from '@emotion/css';\nimport { CSSProperties, ReactNode } from 'react';\n\nimport { GrafanaTheme2 } from '@grafana/data';\n\nimport { useStyles2 } from '../../themes/ThemeContext';\n\nimport { VizTooltipRow } from './VizTooltipRow';\nimport { VizTooltipItem } from './types';\n\ninterface VizTooltipContentProps {\n  items: VizTooltipItem[];\n  children?: ReactNode;\n  scrollable?: boolean;\n  isPinned: boolean;\n  maxHeight?: number;\n}\n\nexport const VizTooltipContent = ({\n  items,\n  children,\n  isPinned,\n  scrollable = false,\n  maxHeight,\n}: VizTooltipContentProps) => {\n  const styles = useStyles2(getStyles);\n\n  const scrollableStyle: CSSProperties = scrollable\n    ? {\n        maxHeight: maxHeight,\n        overflowY: 'auto',\n      }\n    : {};\n\n  return (\n    <div className={styles.wrapper} style={scrollableStyle}>\n      {items.map(({ label, value, color, colorIndicator, colorPlacement, isActive, lineStyle, isHiddenFromViz }, i) => (\n        <VizTooltipRow\n          key={i}\n          label={label}\n          value={value}\n          color={color}\n          colorIndicator={colorIndicator}\n          colorPlacement={colorPlacement}\n          isActive={isActive}\n          justify={'space-between'}\n          isPinned={isPinned}\n          lineStyle={lineStyle}\n          showValueScroll={!scrollable}\n          isHiddenFromViz={isHiddenFromViz}\n        />\n      ))}\n      {children}\n    </div>\n  );\n};\n\nconst getStyles = (theme: GrafanaTheme2) => ({\n  wrapper: css({\n    display: 'flex',\n    flexDirection: 'column',\n    flex: 1,\n    gap: 2,\n    borderTop: `1px solid ${theme.colors.border.weak}`,\n    padding: theme.spacing(1),\n  }),\n});\n","import { css } from '@emotion/css';\nimport { HTMLProps, useEffect } from 'react';\nimport * as React from 'react';\nimport {\n  useForm,\n  Mode,\n  DefaultValues,\n  SubmitHandler,\n  FieldValues,\n  UseFormReturn,\n  FieldErrors,\n  FieldPath,\n} from 'react-hook-form';\n\nexport type FormAPI<T extends FieldValues> = Omit<UseFormReturn<T>, 'handleSubmit'> & {\n  errors: FieldErrors<T>;\n};\n\ninterface FormProps<T extends FieldValues> extends Omit<HTMLProps<HTMLFormElement>, 'onSubmit' | 'children'> {\n  validateOn?: Mode;\n  validateOnMount?: boolean;\n  validateFieldsOnMount?: FieldPath<T> | Array<FieldPath<T>>;\n  defaultValues?: DefaultValues<T>;\n  onSubmit: SubmitHandler<T>;\n  children: (api: FormAPI<T>) => React.ReactNode;\n  /** Sets max-width for container. Use it instead of setting individual widths on inputs.*/\n  maxWidth?: number | 'none';\n}\n\nexport function Form<T extends FieldValues>({\n  defaultValues,\n  onSubmit,\n  validateOnMount = false,\n  validateFieldsOnMount,\n  children,\n  validateOn = 'onSubmit',\n  maxWidth = 600,\n  ...htmlProps\n}: FormProps<T>) {\n  const { handleSubmit, trigger, formState, ...rest } = useForm<T>({\n    mode: validateOn,\n    defaultValues,\n  });\n\n  useEffect(() => {\n    if (validateOnMount) {\n      trigger(validateFieldsOnMount);\n    }\n  }, [trigger, validateFieldsOnMount, validateOnMount]);\n\n  return (\n    <form\n      className={css({\n        maxWidth: maxWidth !== 'none' ? maxWidth + 'px' : maxWidth,\n        width: '100%',\n      })}\n      onSubmit={handleSubmit(onSubmit)}\n      {...htmlProps}\n    >\n      {children({ errors: formState.errors, formState, trigger, ...rest })}\n    </form>\n  );\n}\n","import {\n  DataFrame,\n  Field,\n  FieldType,\n  getDisplayProcessor,\n  GrafanaTheme2,\n  isBooleanUnit,\n  TimeRange,\n  cacheFieldDisplayNames,\n  applyNullInsertThreshold,\n  nullToValue,\n} from '@grafana/data';\nimport { convertFieldType } from '@grafana/data/internal';\nimport { GraphFieldConfig, LineInterpolation, TooltipDisplayMode, VizTooltipOptions } from '@grafana/schema';\nimport { buildScaleKey } from '@grafana/ui/internal';\n\nimport { HeatmapTooltip } from '../heatmap/panelcfg.gen';\n\ntype ScaleKey = string;\n\n// this will re-enumerate all enum fields on the same scale to create one ordinal progression\n// e.g. ['a','b'][0,1,0] + ['c','d'][1,0,1] -> ['a','b'][0,1,0] + ['c','d'][3,2,3]\nfunction reEnumFields(frames: DataFrame[]): DataFrame[] {\n  let allTextsByKey: Map<ScaleKey, string[]> = new Map();\n\n  let frames2: DataFrame[] = frames.map((frame) => {\n    return {\n      ...frame,\n      fields: frame.fields.map((field) => {\n        if (field.type === FieldType.enum) {\n          let scaleKey = buildScaleKey(field.config, field.type);\n          let allTexts = allTextsByKey.get(scaleKey);\n\n          if (!allTexts) {\n            allTexts = [];\n            allTextsByKey.set(scaleKey, allTexts);\n          }\n\n          let idxs: number[] = field.values.toArray().slice();\n          let txts = field.config.type!.enum!.text!;\n\n          // by-reference incrementing\n          if (allTexts.length > 0) {\n            for (let i = 0; i < idxs.length; i++) {\n              idxs[i] += allTexts.length;\n            }\n          }\n\n          allTexts.push(...txts);\n\n          // shared among all enum fields on same scale\n          field.config.type!.enum!.text! = allTexts;\n\n          return {\n            ...field,\n            values: idxs,\n          };\n\n          // TODO: update displayProcessor?\n        }\n\n        return field;\n      }),\n    };\n  });\n\n  return frames2;\n}\n\n/**\n * Returns null if there are no graphable fields\n */\nexport function prepareGraphableFields(\n  series: DataFrame[],\n  theme: GrafanaTheme2,\n  timeRange?: TimeRange,\n  // numeric X requires a single frame where the first field is numeric\n  xNumFieldIdx?: number\n): DataFrame[] | null {\n  if (!series?.length) {\n    return null;\n  }\n\n  cacheFieldDisplayNames(series);\n\n  let useNumericX = xNumFieldIdx != null;\n\n  // Make sure the numeric x field is first in the frame\n  if (xNumFieldIdx != null && xNumFieldIdx > 0) {\n    series = [\n      {\n        ...series[0],\n        fields: [series[0].fields[xNumFieldIdx], ...series[0].fields.filter((f, i) => i !== xNumFieldIdx)],\n      },\n    ];\n  }\n\n  // some datasources simply tag the field as time, but don't convert to milli epochs\n  // so we're stuck with doing the parsing here to avoid Moment slowness everywhere later\n  // this mutates (once)\n  for (let frame of series) {\n    for (let field of frame.fields) {\n      if (field.type === FieldType.time && typeof field.values[0] !== 'number') {\n        field.values = convertFieldType(field, { destinationType: FieldType.time }).values;\n      }\n    }\n  }\n\n  let enumFieldsCount = 0;\n\n  loopy: for (let frame of series) {\n    for (let field of frame.fields) {\n      if (field.type === FieldType.enum && ++enumFieldsCount > 1) {\n        series = reEnumFields(series);\n        break loopy;\n      }\n    }\n  }\n\n  let copy: Field;\n\n  const frames: DataFrame[] = [];\n\n  for (let frame of series) {\n    const fields: Field[] = [];\n\n    let hasTimeField = false;\n    let hasValueField = false;\n\n    let nulledFrame = useNumericX\n      ? frame\n      : applyNullInsertThreshold({\n          frame,\n          refFieldPseudoMin: timeRange?.from.valueOf(),\n          refFieldPseudoMax: timeRange?.to.valueOf(),\n        });\n\n    const frameFields = nullToValue(nulledFrame).fields;\n\n    for (let fieldIdx = 0; fieldIdx < (frameFields?.length || 0); fieldIdx++) {\n      const field = frameFields[fieldIdx];\n\n      switch (field.type) {\n        case FieldType.time:\n          hasTimeField = true;\n          fields.push(field);\n          break;\n        case FieldType.number:\n          hasValueField = useNumericX ? fieldIdx > 0 : true;\n          copy = {\n            ...field,\n            values: field.values.map((v) => {\n              if (!(Number.isFinite(v) || v == null)) {\n                return null;\n              }\n              return v;\n            }),\n          };\n\n          fields.push(copy);\n          break; // ok\n        case FieldType.enum:\n          hasValueField = true;\n        case FieldType.string:\n          copy = {\n            ...field,\n            values: field.values,\n          };\n\n          fields.push(copy);\n          break; // ok\n        case FieldType.boolean:\n          hasValueField = true;\n          const custom: GraphFieldConfig = field.config?.custom ?? {};\n          const config = {\n            ...field.config,\n            max: 1,\n            min: 0,\n            custom,\n          };\n\n          // smooth and linear do not make sense\n          if (custom.lineInterpolation !== LineInterpolation.StepBefore) {\n            custom.lineInterpolation = LineInterpolation.StepAfter;\n          }\n\n          copy = {\n            ...field,\n            config,\n            type: FieldType.number,\n            values: field.values.map((v) => {\n              if (v == null) {\n                return v;\n              }\n              return Boolean(v) ? 1 : 0;\n            }),\n          };\n\n          if (!isBooleanUnit(config.unit)) {\n            config.unit = 'bool';\n            copy.display = getDisplayProcessor({ field: copy, theme });\n          }\n\n          fields.push(copy);\n          break;\n      }\n    }\n\n    if ((useNumericX || hasTimeField) && hasValueField) {\n      frames.push({\n        ...frame,\n        length: nulledFrame.length,\n        fields,\n      });\n    }\n  }\n\n  if (frames.length) {\n    setClassicPaletteIdxs(frames, theme, 0);\n    matchEnumColorToSeriesColor(frames, theme);\n    return frames;\n  }\n\n  return null;\n}\n\nconst matchEnumColorToSeriesColor = (frames: DataFrame[], theme: GrafanaTheme2) => {\n  const { palette } = theme.visualization;\n  for (const frame of frames) {\n    for (const field of frame.fields) {\n      if (field.type === FieldType.enum) {\n        const namedColor = palette[field.state?.seriesIndex! % palette.length];\n        const hexColor = theme.visualization.getColorByName(namedColor);\n        const enumConfig = field.config.type!.enum!;\n\n        enumConfig.color = Array(enumConfig.text!.length).fill(hexColor);\n        field.display = getDisplayProcessor({ field, theme });\n      }\n    }\n  }\n};\n\nexport const setClassicPaletteIdxs = (frames: DataFrame[], theme: GrafanaTheme2, skipFieldIdx?: number) => {\n  let seriesIndex = 0;\n  frames.forEach((frame) => {\n    frame.fields.forEach((field, fieldIdx) => {\n      if (\n        fieldIdx !== skipFieldIdx &&\n        (field.type === FieldType.number || field.type === FieldType.boolean || field.type === FieldType.enum)\n      ) {\n        field.state = {\n          ...field.state,\n          seriesIndex: seriesIndex++, // TODO: skip this for fields with custom renderers (e.g. Candlestick)?\n        };\n        field.display = getDisplayProcessor({ field, theme });\n      }\n    });\n  });\n};\n\nexport function getTimezones(timezones: string[] | undefined, defaultTimezone: string): string[] {\n  if (!timezones || !timezones.length) {\n    return [defaultTimezone];\n  }\n  return timezones.map((v) => (v?.length ? v : defaultTimezone));\n}\n\nexport const isTooltipScrollable = (tooltipOptions: VizTooltipOptions | HeatmapTooltip) => {\n  return tooltipOptions.mode === TooltipDisplayMode.Multi && tooltipOptions.maxHeight != null;\n};\n","import { css, cx } from '@emotion/css';\n\nimport { FALLBACK_COLOR, GrafanaTheme2 } from '@grafana/data';\nimport { LineStyle } from '@grafana/schema';\n\nimport { useStyles2 } from '../../themes/ThemeContext';\nimport { SeriesIcon } from '../VizLegend/SeriesIcon';\n\nimport { ColorIndicator, DEFAULT_COLOR_INDICATOR } from './types';\nimport { getColorIndicatorClass } from './utils';\n\nexport enum ColorIndicatorPosition {\n  Leading,\n  Trailing,\n}\n\ninterface Props {\n  color?: string;\n  colorIndicator?: ColorIndicator;\n  position?: ColorIndicatorPosition;\n  lineStyle?: LineStyle;\n  isHollow?: boolean;\n}\n\nexport type ColorIndicatorStyles = ReturnType<typeof getStyles>;\n\nexport const VizTooltipColorIndicator = ({\n  color = FALLBACK_COLOR,\n  colorIndicator = DEFAULT_COLOR_INDICATOR,\n  position = ColorIndicatorPosition.Leading,\n  lineStyle,\n  isHollow,\n}: Props) => {\n  const styles = useStyles2(getStyles);\n\n  if (isHollow) {\n    return (\n      <div\n        style={{ border: `1px solid ${color}` }}\n        className={cx(\n          position === ColorIndicatorPosition.Leading ? styles.leading : styles.trailing,\n          getColorIndicatorClass(colorIndicator, styles)\n        )}\n      />\n    );\n  }\n\n  if (colorIndicator === ColorIndicator.series) {\n    return (\n      <SeriesIcon\n        color={color}\n        lineStyle={lineStyle}\n        className={position === ColorIndicatorPosition.Leading ? styles.leading : styles.trailing}\n      />\n    );\n  }\n\n  return (\n    <span\n      style={{ backgroundColor: color }}\n      className={cx(\n        position === ColorIndicatorPosition.Leading ? styles.leading : styles.trailing,\n        getColorIndicatorClass(colorIndicator, styles)\n      )}\n    />\n  );\n};\n\n// @TODO Update classes/add svgs\nconst getStyles = (theme: GrafanaTheme2) => ({\n  leading: css({\n    marginRight: theme.spacing(0.5),\n  }),\n  trailing: css({\n    marginLeft: theme.spacing(0.5),\n  }),\n  series: css({\n    width: '14px',\n    height: '4px',\n    borderRadius: theme.shape.radius.pill,\n    minWidth: '14px',\n  }),\n  value: css({\n    width: '12px',\n    height: '12px',\n    borderRadius: theme.shape.radius.default,\n    fontWeight: 500,\n    minWidth: '12px',\n  }),\n  hexagon: css({}),\n  pie_1_4: css({}),\n  pie_2_4: css({}),\n  pie_3_4: css({}),\n  marker_sm: css({\n    width: '4px',\n    height: '4px',\n    borderRadius: theme.shape.radius.circle,\n    minWidth: '4px',\n  }),\n  marker_md: css({\n    width: '8px',\n    height: '8px',\n    borderRadius: theme.shape.radius.circle,\n    minWidth: '8px',\n  }),\n  marker_lg: css({\n    width: '12px',\n    height: '12px',\n    borderRadius: theme.shape.radius.circle,\n    minWidth: '12px',\n  }),\n});\n","import { css, cx } from '@emotion/css';\nimport { CSSProperties, ReactNode, useEffect, useRef, useState } from 'react';\nimport * as React from 'react';\n\nimport { GrafanaTheme2 } from '@grafana/data';\n\nimport { useStyles2 } from '../../themes/ThemeContext';\nimport { InlineToast } from '../InlineToast/InlineToast';\nimport { Tooltip } from '../Tooltip/Tooltip';\n\nimport { ColorIndicatorPosition, VizTooltipColorIndicator } from './VizTooltipColorIndicator';\nimport { ColorPlacement, VizTooltipItem } from './types';\n\ninterface VizTooltipRowProps extends Omit<VizTooltipItem, 'value'> {\n  value: string | number | null | ReactNode;\n  justify?: string;\n  isActive?: boolean; // for series list\n  marginRight?: string;\n  isPinned: boolean;\n  showValueScroll?: boolean;\n  isHiddenFromViz?: boolean;\n}\n\nenum LabelValueTypes {\n  label = 'label',\n  value = 'value',\n}\n\nconst SUCCESSFULLY_COPIED_TEXT = 'Copied to clipboard';\nconst SHOW_SUCCESS_DURATION = 2 * 1000;\nconst HORIZONTAL_PX_PER_CHAR = 7;\n\nexport const VizTooltipRow = ({\n  label,\n  value,\n  color,\n  colorIndicator,\n  colorPlacement = ColorPlacement.first,\n  justify = 'flex-start',\n  isActive = false,\n  marginRight = '0px',\n  isPinned,\n  lineStyle,\n  showValueScroll,\n  isHiddenFromViz,\n}: VizTooltipRowProps) => {\n  const styles = useStyles2(getStyles, justify, marginRight);\n\n  const innerValueScrollStyle: CSSProperties = showValueScroll\n    ? {\n        maxHeight: 55,\n        whiteSpace: 'wrap',\n        wordBreak: 'break-word',\n        overflowY: 'auto',\n      }\n    : {\n        whiteSpace: 'pre-line',\n        wordBreak: 'break-word',\n        lineHeight: 1.2,\n      };\n\n  const [showLabelTooltip, setShowLabelTooltip] = useState(false);\n\n  const [copiedText, setCopiedText] = useState<Record<string, string> | null>(null);\n  const [showCopySuccess, setShowCopySuccess] = useState(false);\n\n  const labelRef = useRef<null | HTMLDivElement>(null);\n  const valueRef = useRef<null | HTMLDivElement>(null);\n\n  useEffect(() => {\n    let timeoutId: ReturnType<typeof setTimeout>;\n\n    if (showCopySuccess) {\n      timeoutId = setTimeout(() => {\n        setShowCopySuccess(false);\n      }, SHOW_SUCCESS_DURATION);\n    }\n\n    return () => {\n      window.clearTimeout(timeoutId);\n    };\n  }, [showCopySuccess]);\n\n  const copyToClipboard = async (text: string, type: LabelValueTypes) => {\n    if (!(navigator?.clipboard && window.isSecureContext)) {\n      fallbackCopyToClipboard(text, type);\n      return;\n    }\n\n    try {\n      await navigator.clipboard.writeText(text);\n      setCopiedText({ [`${type}`]: text });\n      setShowCopySuccess(true);\n    } catch (error) {\n      setCopiedText(null);\n    }\n  };\n\n  const fallbackCopyToClipboard = (text: string, type: LabelValueTypes) => {\n    // Use a fallback method for browsers/contexts that don't support the Clipboard API.\n    const textarea = document.createElement('textarea');\n    labelRef.current?.appendChild(textarea);\n    textarea.value = text;\n    textarea.focus();\n    textarea.select();\n    try {\n      const successful = document.execCommand('copy');\n      if (successful) {\n        setCopiedText({ [`${type}`]: text });\n        setShowCopySuccess(true);\n      }\n    } catch (err) {\n      console.error('Unable to copy to clipboard', err);\n    }\n\n    textarea.remove();\n  };\n\n  const onMouseEnterLabel = (event: React.MouseEvent<HTMLDivElement>) => {\n    if (event.currentTarget.offsetWidth < event.currentTarget.scrollWidth) {\n      setShowLabelTooltip(true);\n    }\n  };\n\n  const onMouseLeaveLabel = () => setShowLabelTooltip(false);\n\n  // if label is > 50% window width, try to put label/value pairs on new lines\n  if (label.length * HORIZONTAL_PX_PER_CHAR > window.innerWidth / 2) {\n    label = label.replaceAll('{', '{\\n  ').replaceAll('}', '\\n}').replaceAll(', ', ',\\n  ');\n  }\n\n  return (\n    <div className={styles.contentWrapper}>\n      {(color || label) && (\n        <div className={styles.valueWrapper}>\n          {color && colorPlacement === ColorPlacement.first && (\n            <VizTooltipColorIndicator\n              color={color}\n              colorIndicator={colorIndicator}\n              lineStyle={lineStyle}\n              isHollow={isHiddenFromViz}\n            />\n          )}\n          {!isPinned ? (\n            <div className={cx(styles.label, isActive && styles.activeSeries)}>{label}</div>\n          ) : (\n            <>\n              <Tooltip content={label} interactive={false} show={showLabelTooltip}>\n                <>\n                  {showCopySuccess && copiedText?.label && (\n                    <InlineToast placement=\"top\" referenceElement={labelRef.current}>\n                      {SUCCESSFULLY_COPIED_TEXT}\n                    </InlineToast>\n                  )}\n                  {/* eslint-disable-next-line jsx-a11y/click-events-have-key-events,jsx-a11y/no-static-element-interactions */}\n                  <div\n                    className={cx(styles.label, isActive && styles.activeSeries, navigator?.clipboard && styles.copy)}\n                    onMouseEnter={onMouseEnterLabel}\n                    onMouseLeave={onMouseLeaveLabel}\n                    onClick={() => copyToClipboard(label, LabelValueTypes.label)}\n                    ref={labelRef}\n                  >\n                    {label}\n                  </div>\n                </>\n              </Tooltip>\n            </>\n          )}\n        </div>\n      )}\n\n      <div className={styles.valueWrapper}>\n        {color && colorPlacement === ColorPlacement.leading && (\n          <VizTooltipColorIndicator\n            color={color}\n            colorIndicator={colorIndicator}\n            position={ColorIndicatorPosition.Leading}\n            lineStyle={lineStyle}\n          />\n        )}\n\n        {!isPinned ? (\n          <div className={cx(styles.value, isActive)} style={innerValueScrollStyle}>\n            {value}\n          </div>\n        ) : (\n          <>\n            {showCopySuccess && copiedText?.value && (\n              <InlineToast placement=\"top\" referenceElement={valueRef.current}>\n                {SUCCESSFULLY_COPIED_TEXT}\n              </InlineToast>\n            )}\n            {/* eslint-disable-next-line jsx-a11y/click-events-have-key-events,jsx-a11y/no-static-element-interactions */}\n            <div\n              className={cx(styles.value, isActive, navigator?.clipboard && styles.copy)}\n              style={innerValueScrollStyle}\n              onClick={() => copyToClipboard(value ? value.toString() : '', LabelValueTypes.value)}\n              ref={valueRef}\n            >\n              {value}\n            </div>\n          </>\n        )}\n\n        {color && colorPlacement === ColorPlacement.trailing && (\n          <VizTooltipColorIndicator\n            color={color}\n            colorIndicator={colorIndicator}\n            position={ColorIndicatorPosition.Trailing}\n            lineStyle={lineStyle}\n          />\n        )}\n      </div>\n    </div>\n  );\n};\n\nconst getStyles = (theme: GrafanaTheme2, justify: string, marginRight: string) => ({\n  contentWrapper: css({\n    display: 'flex',\n    alignItems: 'start',\n    justifyContent: justify,\n    marginRight: marginRight,\n  }),\n  label: css({\n    color: theme.colors.text.secondary,\n    fontWeight: 400,\n    textOverflow: 'ellipsis',\n    overflow: 'hidden',\n    marginRight: theme.spacing(2),\n  }),\n  value: css({\n    fontWeight: 500,\n    textOverflow: 'ellipsis',\n    overflow: 'hidden',\n  }),\n  valueWrapper: css({\n    display: 'flex',\n    alignItems: 'center',\n  }),\n  activeSeries: css({\n    fontWeight: theme.typography.fontWeightBold,\n    color: theme.colors.text.maxContrast,\n  }),\n  copy: css({\n    cursor: 'pointer',\n  }),\n});\n"],"names":["OutsideRangePlugin","config","onChangeTimeRange","plotInstance","timevalues","setTimeValues","timeRange","setTimeRange","u","i","j","first","last","fromX","toX","v","AnnotationEditor2","annoVals","annoIdx","dismiss","timeZone","otherProps","styles","getStyles","onAnnotationCreate","onAnnotationUpdate","clickAwayRef","useClickAway","createAnnotationState","createAnnotation","useAsyncFn","event","result","updateAnnotationState","updateAnnotation","timeFormatter","value","isUpdatingAnnotation","isRegionAnnotation","operation","stateIndicator","time","onSubmit","tags","description","Stack","Form","register","errors","control","Field","TextArea","ref","onChange","field","TagFilter","Button","theme","retFalse","AnnotationTooltip2","onEdit","annoId","canEditAnnotations","canDeleteAnnotations","onAnnotationDelete","dashboardUID","canEdit","canDelete","text","avatar","state","alertText","stateModel","alertDef","IconButton","t","Tag","STATE_DEFAULT","STATE_EDITING","STATE_HOVERED","AnnotationMarker2","className","style","exitWipEdit","portalRoot","setState","refs","floatingStyles","contents","selectors","renderLine","ctx","y0","y1","x","color","DEFAULT_ANNOTATION_COLOR_HEX8","tinycolor","getVals","frame","vals","f","AnnotationsPlugin2","annotations","newRange","setNewRange","canvasRegionRendering","plot","setPlot","getColorByName","_","forceUpdate","annos","isRegion","wipAnnoFrame","annoRef","newRangeRef","xAxisRef","xAxisEl","xKey","yKey","x0","x1","colorManipulator","markers","frameIdx","left","isVisible","right","clampedLeft","clampedRight","isWip","VizTooltipHeader","item","isPinned","label","colorIndicator","VizTooltipContent","items","children","scrollable","maxHeight","scrollableStyle","colorPlacement","isActive","lineStyle","isHiddenFromViz","defaultValues","validateOnMount","validateFieldsOnMount","validateOn","maxWidth","htmlProps","handleSubmit","trigger","formState","rest","reEnumFields","frames","allTextsByKey","scaleKey","allTexts","idxs","txts","prepareGraphableFields","series","xNumFieldIdx","useNumericX","enumFieldsCount","loopy","copy","fields","hasTimeField","hasValueField","nulledFrame","frameFields","fieldIdx","custom","setClassicPaletteIdxs","matchEnumColorToSeriesColor","palette","namedColor","hexColor","enumConfig","skipFieldIdx","seriesIndex","getTimezones","timezones","defaultTimezone","isTooltipScrollable","tooltipOptions","ColorIndicatorPosition","VizTooltipColorIndicator","position","isHollow","SeriesIcon","LabelValueTypes","SUCCESSFULLY_COPIED_TEXT","SHOW_SUCCESS_DURATION","HORIZONTAL_PX_PER_CHAR","VizTooltipRow","justify","marginRight","showValueScroll","innerValueScrollStyle","showLabelTooltip","setShowLabelTooltip","copiedText","setCopiedText","showCopySuccess","setShowCopySuccess","labelRef","valueRef","timeoutId","copyToClipboard","type","fallbackCopyToClipboard","textarea","err","onMouseEnterLabel","onMouseLeaveLabel","Tooltip","InlineToast"],"sourceRoot":""}