{"version":3,"file":"DashboardListPage.8cd0b30e85d9e3d70971.js","mappings":"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","sources":["webpack://grafana/./public/app/features/provisioning/Repository/PullRequestButtons.tsx","webpack://grafana/./public/app/features/provisioning/Repository/RepositoryLink.tsx","webpack://grafana/./public/app/features/provisioning/Shared/ProgressBar.tsx","webpack://grafana/./public/app/features/provisioning/Job/JobContent.tsx","webpack://grafana/./public/app/features/provisioning/Job/FinishedJobStatus.tsx","webpack://grafana/./public/app/features/provisioning/Job/JobStatus.tsx","webpack://grafana/./public/app/features/provisioning/Job/JobSummary.tsx","webpack://grafana/./public/app/features/search/page/components/ActionRow.tsx","webpack://grafana/./public/app/features/provisioning/components/Dashboards/DashboardPreviewBanner.tsx","webpack://grafana/./public/app/features/search/state/SearchStateManager.ts","webpack://grafana/./public/app/features/provisioning/components/Folders/ProvisionedFolderPreviewBanner.tsx","webpack://grafana/./public/app/features/search/tempI18nPhrases.ts","webpack://grafana/./public/app/features/provisioning/hooks/useSelectionRepoValidation.ts","webpack://grafana/./public/app/features/provisioning/components/BulkActions/useBulkActionJob.ts","webpack://grafana/./public/app/features/provisioning/components/BulkActions/BulkDeleteProvisionedResource.tsx","webpack://grafana/./public/app/features/provisioning/components/BulkActions/BulkMoveProvisionedResource.tsx","webpack://grafana/./public/app/features/provisioning/hooks/useSelectionProvisioningStatus.ts","webpack://grafana/./public/app/features/browse-dashboards/components/BrowseActions/SelectedMixResourcesMsgModal.tsx","webpack://grafana/./public/app/features/browse-dashboards/components/BrowseActions/BrowseActions.tsx","webpack://grafana/./public/app/features/browse-dashboards/components/BrowseFilters.tsx","webpack://grafana/./public/app/features/browse-dashboards/types.ts","webpack://grafana/./public/app/features/browse-dashboards/components/CheckboxCell.tsx","webpack://grafana/./public/app/features/browse-dashboards/components/CheckboxHeaderCell.tsx","webpack://grafana/./public/app/features/browse-dashboards/components/NameCell.tsx","webpack://grafana/./public/app/features/browse-dashboards/components/TagsCell.tsx","webpack://grafana/./public/app/features/browse-dashboards/components/DashboardsTree.tsx","webpack://grafana/./public/app/features/browse-dashboards/components/BrowseView.tsx","webpack://grafana/./public/app/features/provisioning/components/Folders/NewProvisionedFolderForm.tsx","webpack://grafana/./public/app/features/browse-dashboards/components/NewFolderForm.tsx","webpack://grafana/./public/app/features/browse-dashboards/components/CreateNewButton.tsx","webpack://grafana/./public/app/features/browse-dashboards/BrowseDashboardsPage.tsx","webpack://grafana/./public/app/features/provisioning/Wizard/types.ts","webpack://grafana/./public/app/features/provisioning/components/Shared/PreviewBannerViewPR.tsx","webpack://grafana/./public/app/features/browse-dashboards/components/SearchView.tsx","webpack://grafana/./public/app/features/provisioning/hooks/usePullRequestParam.ts"],"sourcesContent":["import { Trans } from '@grafana/i18n';\nimport { LinkButton } from '@grafana/ui';\nimport { RepositoryUrLs } from 'app/api/clients/provisioning/v0alpha1';\n\ninterface Props {\n  jobType?: 'sync' | 'delete' | 'move';\n  urls?: RepositoryUrLs;\n}\nexport function PullRequestButtons({ urls, jobType }: Props) {\n  const pullRequestURL = urls?.newPullRequestURL;\n  const compareURL = urls?.compareURL;\n  const branchURL = urls?.sourceURL;\n\n  if (jobType === 'sync') {\n    return null;\n  }\n\n  return (\n    <>\n      <LinkButton href={branchURL} icon=\"external-link-alt\" variant=\"secondary\" target=\"_blank\">\n        <Trans i18nKey=\"provisioning.repository-link.delete-or-move-job.view-branch\">View branch</Trans>\n      </LinkButton>\n      <LinkButton href={compareURL} icon=\"external-link-alt\" variant=\"secondary\" target=\"_blank\">\n        <Trans i18nKey=\"provisioning.repository-link.delete-or-move-job.compare-branch\">Compare branch</Trans>\n      </LinkButton>\n      <LinkButton href={pullRequestURL} icon=\"external-link-alt\" variant=\"secondary\" target=\"_blank\">\n        <Trans i18nKey=\"provisioning.repository-link.delete-or-move-job.open-pull-request\">Open pull request</Trans>\n      </LinkButton>\n    </>\n  );\n}\n","import { skipToken } from '@reduxjs/toolkit/query';\n\nimport { Trans } from '@grafana/i18n';\nimport { LinkButton, Stack, Text, TextLink } from '@grafana/ui';\nimport { useGetRepositoryQuery } from 'app/api/clients/provisioning/v0alpha1';\n\nimport { getRepoHref } from '../utils/git';\n\ntype RepositoryLinkProps = {\n  name?: string;\n  jobType: 'sync' | 'delete' | 'move';\n};\n\nexport function RepositoryLink({ name, jobType }: RepositoryLinkProps) {\n  const repoQuery = useGetRepositoryQuery(name ? { name } : skipToken);\n  const repo = repoQuery.data;\n\n  if (!repo || repoQuery.isLoading) {\n    return null;\n  }\n\n  const repoHref = getRepoHref(repo.spec?.github);\n\n  if (jobType === 'sync') {\n    return (\n      <>\n        <Text>\n          <Trans i18nKey=\"provisioning.repository-link.grafana-repository-synced\">\n            Your resources are now in your external storage and provisioned into your instance. From now on, your\n            instance and the external storage will be synchronized.\n          </Trans>\n        </Text>\n\n        {repoHref && (\n          <Stack direction=\"row\" gap={2}>\n            <TextLink href={repoHref} external>\n              <Trans i18nKey=\"provisioning.repository-link.sync-job.view-repository\">View repository</Trans>\n            </TextLink>\n          </Stack>\n        )}\n      </>\n    );\n  }\n\n  return (\n    <>\n      {repoHref && (\n        <Stack direction=\"row\" gap={2}>\n          <LinkButton href={repoHref} icon=\"external-link-alt\" variant=\"secondary\" target=\"_blank\">\n            <Trans i18nKey=\"provisioning.repository-link.delete-or-move-job.view-repository\">View repository</Trans>\n          </LinkButton>\n        </Stack>\n      )}\n    </>\n  );\n}\n","import { css } from '@emotion/css';\n\nimport { GrafanaTheme2 } from '@grafana/data';\nimport { useStyles2 } from '@grafana/ui';\n\ninterface ProgressBarProps {\n  progress?: number;\n  topBottomSpacing?: number;\n}\nconst ProgressBar = ({ progress, topBottomSpacing }: ProgressBarProps) => {\n  const styles = useStyles2(getStyles, topBottomSpacing);\n\n  if (progress === undefined) {\n    return null;\n  }\n\n  return (\n    <div className={styles.container}>\n      <div className={styles.filler} style={{ width: `${progress}%` }}></div>\n    </div>\n  );\n};\n\nconst getStyles = (theme: GrafanaTheme2, topBottomSpacing = 2) => ({\n  container: css({\n    height: '10px',\n    width: '400px',\n    backgroundColor: theme.colors.background.secondary,\n    borderRadius: theme.shape.radius.pill,\n    overflow: 'hidden',\n    margin: theme.spacing(topBottomSpacing, 0),\n  }),\n  filler: css({\n    height: '100%',\n    background: theme.colors.success.text,\n    [theme.transitions.handleMotion('no-preference', 'reduce')]: {\n      transition: 'width 0.5s ease-in-out',\n    },\n  }),\n});\n\nexport default ProgressBar;\n","import { useEffect, useRef } from 'react';\n\nimport { Trans, t } from '@grafana/i18n';\nimport { ControlledCollapse, Spinner, Stack, Text } from '@grafana/ui';\nimport { Job } from 'app/api/clients/provisioning/v0alpha1';\n\nimport { PullRequestButtons } from '../Repository/PullRequestButtons';\nimport { RepositoryLink } from '../Repository/RepositoryLink';\nimport ProgressBar from '../Shared/ProgressBar';\nimport { StepStatusInfo } from '../Wizard/types';\n\nimport { JobSummary } from './JobSummary';\n\nexport interface JobContentProps {\n  jobType: 'sync' | 'delete' | 'move';\n  job?: Job;\n  isFinishedJob?: boolean;\n  onStatusChange?: (statusInfo: StepStatusInfo) => void;\n}\n\nexport function JobContent({ jobType, job, isFinishedJob = false, onStatusChange }: JobContentProps) {\n  const errorSetRef = useRef(false);\n\n  const { state, message, progress, summary, errors } = job?.status || {};\n  const repoName = job?.metadata?.labels?.['provisioning.grafana.app/repository'];\n  const pullRequestURL = job?.status?.url?.newPullRequestURL;\n\n  // Update step status based on job state\n  useEffect(() => {\n    if (!state) {\n      return;\n    }\n\n    switch (state) {\n      case 'success':\n        onStatusChange?.({ status: 'success' });\n        break;\n      case 'warning':\n        if (!errorSetRef.current) {\n          onStatusChange?.({\n            status: 'warning',\n            warning: {\n              title: t('provisioning.job-status.status.title-warning-running-job', 'Job completed with warnings'),\n              message: errors?.length ? errors : message,\n            },\n          });\n          errorSetRef.current = true;\n        }\n        break;\n      case 'error':\n        if (!errorSetRef.current) {\n          onStatusChange?.({\n            status: 'error',\n            error: {\n              title: t('provisioning.job-status.status.title-error-running-job', 'Error running job'),\n              message: errors?.length ? errors : message,\n            },\n          });\n          errorSetRef.current = true;\n        }\n        break;\n      case 'working':\n      case 'pending':\n        onStatusChange?.({ status: 'running' });\n        break;\n      default:\n        break;\n    }\n  }, [state, message, errors, onStatusChange]);\n\n  if (!job?.status) {\n    return null;\n  }\n\n  return (\n    <Stack direction=\"column\" gap={2}>\n      <Stack direction=\"column\" gap={2}>\n        {['working', 'pending'].includes(state ?? '') && (\n          <Stack direction=\"column\" alignItems=\"center\">\n            <Stack direction=\"row\" alignItems=\"center\" justifyContent=\"center\" gap={2}>\n              <Spinner size={24} />\n              <Text element=\"h5\" color=\"secondary\">\n                {message ?? state ?? t('provisioning.job-status.starting', 'Starting...')}\n              </Text>\n            </Stack>\n            <ProgressBar progress={progress ?? 0} />\n          </Stack>\n        )}\n        {isFinishedJob && summary && (\n          <Stack direction=\"column\" gap={2}>\n            <Text variant=\"h3\">\n              <Trans i18nKey=\"provisioning.job-status.summary\">Summary</Trans>\n            </Text>\n            <JobSummary summary={summary} />\n          </Stack>\n        )}\n        {state === 'success' ? (\n          <Stack direction=\"row\" gap={1}>\n            {pullRequestURL ? (\n              <PullRequestButtons urls={job.status?.url} jobType={jobType} />\n            ) : (\n              <RepositoryLink name={repoName} jobType={jobType} />\n            )}\n          </Stack>\n        ) : (\n          <ControlledCollapse label={t('provisioning.job-status.label-view-details', 'View details')} isOpen={false}>\n            <pre>{JSON.stringify(job, null, 2)}</pre>\n          </ControlledCollapse>\n        )}\n      </Stack>\n    </Stack>\n  );\n}\n","import { useEffect, useRef } from 'react';\n\nimport { Trans, t } from '@grafana/i18n';\nimport { Spinner, Stack, Text } from '@grafana/ui';\nimport { useGetRepositoryJobsWithPathQuery } from 'app/api/clients/provisioning/v0alpha1';\n\nimport { StepStatusInfo } from '../Wizard/types';\n\nimport { JobContent } from './JobContent';\n\nexport interface FinishedJobProps {\n  jobUid: string;\n  repositoryName: string;\n  jobType: 'sync' | 'delete' | 'move';\n  onStatusChange?: (statusInfo: StepStatusInfo) => void;\n}\n\nexport function FinishedJobStatus({ jobUid, repositoryName, jobType, onStatusChange }: FinishedJobProps) {\n  const hasRetried = useRef(false);\n  const finishedQuery = useGetRepositoryJobsWithPathQuery({\n    name: repositoryName,\n    uid: jobUid,\n  });\n  const retryFailed = hasRetried.current && finishedQuery.isError;\n\n  const job = finishedQuery.data;\n\n  useEffect(() => {\n    const shouldRetry = !job && !hasRetried.current && !finishedQuery.isFetching;\n    let timeoutId: ReturnType<typeof setTimeout>;\n\n    if (shouldRetry) {\n      hasRetried.current = true;\n      timeoutId = setTimeout(() => {\n        finishedQuery.refetch();\n      }, 1000);\n    }\n\n    if (retryFailed) {\n      onStatusChange?.({\n        status: 'error',\n        error: {\n          title: t('provisioning.job-status.no-job-found', 'No job found'),\n          message: t(\n            'provisioning.job-status.no-job-found-message',\n            'The job may have been deleted or could not be retrieved. Cancel the current process and start again.'\n          ),\n        },\n      });\n      return;\n    }\n\n    if (finishedQuery.isSuccess && job?.status) {\n      const { state, message, errors } = job.status;\n\n      if (state === 'error') {\n        onStatusChange?.({\n          status: 'error',\n          error: {\n            title: t('provisioning.job-status.status.title-error-running-job', 'Error running job'),\n            message: errors?.length ? errors : message,\n          },\n        });\n      } else if (state === 'success') {\n        onStatusChange?.({\n          status: 'success',\n          success: {\n            title: t('provisioning.job-status.status.title-success-running-job', 'Job completed successfully'),\n          },\n        });\n      } else if (state === 'warning') {\n        onStatusChange?.({\n          status: 'warning',\n          warning: {\n            title: t('provisioning.job-status.status.title-warning-running-job', 'Job completed with warnings'),\n            message: errors?.length ? errors : message,\n          },\n        });\n      }\n    }\n\n    return () => {\n      if (timeoutId) {\n        clearTimeout(timeoutId);\n      }\n    };\n  }, [finishedQuery, job, onStatusChange, retryFailed]);\n\n  if (!job || finishedQuery.isLoading || finishedQuery.isFetching) {\n    return (\n      <Stack direction=\"row\" alignItems=\"center\" justifyContent=\"center\" gap={2}>\n        <Spinner size={24} />\n        <Text element=\"h4\" color=\"secondary\">\n          <Trans i18nKey=\"provisioning.job-status.loading-finished-job\">Loading finished job...</Trans>\n        </Text>\n      </Stack>\n    );\n  }\n\n  return <JobContent job={job} isFinishedJob={true} onStatusChange={onStatusChange} jobType={jobType} />;\n}\n","import { Trans, t } from '@grafana/i18n';\nimport { Spinner, Stack, Text } from '@grafana/ui';\nimport { Job, useListJobQuery } from 'app/api/clients/provisioning/v0alpha1';\n\nimport { StepStatusInfo } from '../Wizard/types';\n\nimport { FinishedJobStatus } from './FinishedJobStatus';\nimport { JobContent } from './JobContent';\n\nexport interface JobStatusProps {\n  watch: Job;\n  jobType: 'sync' | 'delete' | 'move';\n  onStatusChange?: (statusInfo: StepStatusInfo) => void;\n}\n\nexport function JobStatus({ jobType, watch, onStatusChange }: JobStatusProps) {\n  const activeQuery = useListJobQuery({\n    fieldSelector: `metadata.name=${watch.metadata?.name}`,\n    watch: true,\n  });\n  const activeJob = activeQuery?.data?.items?.[0];\n  const repoLabel = watch.metadata?.labels?.['provisioning.grafana.app/repository'];\n\n  // Only initialize finished query if we've checked active jobs and found none\n  const activeQueryCompleted = !activeQuery.isUninitialized && !activeQuery.isLoading;\n  const shouldCheckFinishedJobs = activeQueryCompleted && !activeJob && !!repoLabel;\n\n  if (activeQuery.isLoading) {\n    return (\n      <Stack direction=\"row\" alignItems=\"center\" justifyContent=\"center\" gap={2}>\n        <Spinner size={24} />\n        <Text element=\"h4\" color=\"secondary\">\n          <Trans i18nKey=\"provisioning.job-status.starting\">Starting...</Trans>\n        </Text>\n      </Stack>\n    );\n  }\n\n  if (activeQuery.isError) {\n    onStatusChange?.({\n      status: 'error',\n      error: {\n        title: t('provisioning.job-status.title.error-fetching-active-job', 'Error fetching active job'),\n      },\n    });\n    return null;\n  }\n\n  if (activeJob) {\n    return <JobContent job={activeJob} isFinishedJob={false} onStatusChange={onStatusChange} jobType={jobType} />;\n  }\n\n  if (shouldCheckFinishedJobs) {\n    return (\n      <FinishedJobStatus\n        jobUid={watch.metadata?.uid!}\n        repositoryName={repoLabel}\n        onStatusChange={onStatusChange}\n        jobType={jobType}\n      />\n    );\n  }\n\n  return (\n    <Stack direction=\"row\" alignItems=\"center\" justifyContent=\"center\" gap={2}>\n      <Spinner size={24} />\n      <Text element=\"h4\" weight=\"bold\">\n        <Trans i18nKey=\"provisioning.job-status.starting\">Starting...</Trans>\n      </Text>\n    </Stack>\n  );\n}\n","import { InteractiveTable, Stack } from '@grafana/ui';\nimport { JobResourceSummary } from 'app/api/clients/provisioning/v0alpha1';\n\ntype SummaryCell<T extends keyof JobResourceSummary = keyof JobResourceSummary> = {\n  row: {\n    original: JobResourceSummary;\n  };\n};\n\nconst getSummaryColumns = () => [\n  {\n    id: 'resource',\n    header: 'Resource',\n    cell: ({ row: { original: item } }: SummaryCell) => item.resource,\n  },\n  {\n    id: 'created',\n    header: 'Created',\n    cell: ({ row: { original: item } }: SummaryCell) => item.create?.toString() || '-',\n  },\n  {\n    id: 'deleted',\n    header: 'Deleted',\n    cell: ({ row: { original: item } }: SummaryCell) => item.delete?.toString() || '-',\n  },\n  {\n    id: 'updated',\n    header: 'Updated',\n    cell: ({ row: { original: item } }: SummaryCell) => item.update?.toString() || '-',\n  },\n  {\n    id: 'unchanged',\n    header: 'Unchanged',\n    cell: ({ row: { original: item } }: SummaryCell) => item.noop?.toString() || '-',\n  },\n  {\n    id: 'errors',\n    header: 'Errors',\n    cell: ({ row: { original: item } }: SummaryCell) => item.error?.toString() || '-',\n  },\n  {\n    id: 'total',\n    header: 'Total',\n    cell: ({ row: { original: item } }: SummaryCell) => {\n      const total = (item.create || 0) + (item.delete || 0) + (item.update || 0) + (item.noop || 0) + (item.error || 0);\n      return total.toString();\n    },\n  },\n];\n\ninterface Props {\n  summary: JobResourceSummary[];\n}\n\nexport function JobSummary({ summary }: Props) {\n  return (\n    <Stack direction=\"column\" gap={2}>\n      <InteractiveTable\n        data={summary}\n        columns={getSummaryColumns()}\n        getRowId={(item) => item.resource || ''}\n        pageSize={10}\n      />\n    </Stack>\n  );\n}\n","import { css } from '@emotion/css';\nimport { FormEvent } from 'react';\n\nimport { GrafanaTheme2, SelectableValue } from '@grafana/data';\nimport { Trans, t } from '@grafana/i18n';\nimport { config } from '@grafana/runtime';\nimport { Button, Checkbox, Stack, RadioButtonGroup, useStyles2 } from '@grafana/ui';\nimport { SortPicker } from 'app/core/components/Select/SortPicker';\nimport { TagFilter, TermCount } from 'app/core/components/TagFilter/TagFilter';\n\nimport { SearchLayout, SearchState } from '../../types';\n\nfunction getLayoutOptions() {\n  return [\n    {\n      value: SearchLayout.Folders,\n      icon: 'folder',\n      description: t('search.actions.view-as-folders', 'View by folders'),\n    },\n    { value: SearchLayout.List, icon: 'list-ul', description: t('search.actions.view-as-list', 'View as list') },\n  ];\n}\n\ninterface ActionRowProps {\n  state: SearchState;\n  showStarredFilter?: boolean;\n  showLayout?: boolean;\n  sortPlaceholder?: string;\n\n  onLayoutChange: (layout: SearchLayout) => void;\n  onSortChange: (value?: string) => void;\n  onStarredFilterChange?: (event: FormEvent<HTMLInputElement>) => void;\n  onTagFilterChange: (tags: string[]) => void;\n  getTagOptions: () => Promise<TermCount[]>;\n  getSortOptions: () => Promise<SelectableValue[]>;\n  onDatasourceChange: (ds?: string) => void;\n  onPanelTypeChange: (pt?: string) => void;\n  onSetIncludePanels: (v: boolean) => void;\n}\n\nexport function getValidQueryLayout(q: SearchState): SearchLayout {\n  const layout = q.layout ?? SearchLayout.Folders;\n\n  // Folders is not valid when a query exists\n  if (layout === SearchLayout.Folders) {\n    if (q.query || q.sort || q.starred || q.tag.length > 0) {\n      return SearchLayout.List;\n    }\n  }\n\n  return layout;\n}\n\nexport const ActionRow = ({\n  state,\n  showStarredFilter,\n  showLayout,\n  sortPlaceholder,\n  onLayoutChange,\n  onSortChange,\n  onStarredFilterChange = () => {},\n  onTagFilterChange,\n  getTagOptions,\n  getSortOptions,\n  onDatasourceChange,\n  onPanelTypeChange,\n  onSetIncludePanels,\n}: ActionRowProps) => {\n  const styles = useStyles2(getStyles);\n\n  const layout = getValidQueryLayout(state);\n\n  // Disabled folder layout option when query is present\n  const disabledOptions =\n    state.tag.length || state.starred || state.query || state.datasource || state.panel_type\n      ? [SearchLayout.Folders]\n      : [];\n\n  return (\n    <Stack justifyContent=\"space-between\" alignItems=\"center\">\n      <Stack gap={2} alignItems=\"center\">\n        <TagFilter isClearable={false} tags={state.tag} tagOptions={getTagOptions} onChange={onTagFilterChange} />\n        {config.featureToggles.panelTitleSearch && (\n          <Checkbox\n            data-testid=\"include-panels\"\n            disabled={layout === SearchLayout.Folders}\n            value={state.includePanels}\n            onChange={() => onSetIncludePanels(!state.includePanels)}\n            label={t('search.actions.include-panels', 'Include panels')}\n          />\n        )}\n\n        {showStarredFilter && (\n          <div className={styles.checkboxWrapper}>\n            <Checkbox\n              label={t('search.actions.starred', 'Starred')}\n              onChange={onStarredFilterChange}\n              value={state.starred}\n            />\n          </div>\n        )}\n        {state.datasource && (\n          <Button icon=\"times\" variant=\"secondary\" onClick={() => onDatasourceChange(undefined)}>\n            <Trans i18nKey=\"search.actions.remove-datasource-filter\">\n              Datasource: {{ datasource: state.datasource }}\n            </Trans>\n          </Button>\n        )}\n        {state.panel_type && (\n          <Button icon=\"times\" variant=\"secondary\" onClick={() => onPanelTypeChange(undefined)}>\n            <Trans i18nKey=\"search.action-row.panel-type\" values={{ panel: state.panel_type }}>\n              Panel: {'{{panel}}'}\n            </Trans>\n          </Button>\n        )}\n      </Stack>\n\n      <Stack gap={2}>\n        {showLayout && (\n          <RadioButtonGroup\n            options={getLayoutOptions()}\n            disabledOptions={disabledOptions}\n            onChange={onLayoutChange}\n            value={layout}\n          />\n        )}\n        <SortPicker\n          onChange={(change) => onSortChange(change?.value)}\n          value={state.sort}\n          getSortOptions={getSortOptions}\n          placeholder={sortPlaceholder || t('search.actions.sort-placeholder', 'Sort')}\n          isClearable\n        />\n      </Stack>\n    </Stack>\n  );\n};\n\nActionRow.displayName = 'ActionRow';\n\nexport const getStyles = (theme: GrafanaTheme2) => {\n  return {\n    checkboxWrapper: css({\n      label: {\n        lineHeight: '1.2',\n      },\n    }),\n  };\n};\n","import { Trans, t } from '@grafana/i18n';\nimport { config } from '@grafana/runtime';\nimport { Alert } from '@grafana/ui';\nimport { useGetRepositoryFilesWithPathQuery } from 'app/api/clients/provisioning/v0alpha1';\nimport { DashboardPageRouteSearchParams } from 'app/features/dashboard/containers/types';\nimport { usePullRequestParam } from 'app/features/provisioning/hooks/usePullRequestParam';\nimport { DashboardRoutes } from 'app/types/dashboard';\n\nimport { PreviewBannerViewPR } from '../Shared/PreviewBannerViewPR';\n\nexport interface CommonBannerProps {\n  queryParams: DashboardPageRouteSearchParams;\n  path?: string;\n  slug?: string;\n}\n\ninterface DashboardPreviewBannerProps extends CommonBannerProps {\n  route?: string;\n}\n\ninterface DashboardPreviewBannerContentProps extends Required<Omit<CommonBannerProps, 'route'>> {}\n\nexport const commonAlertProps = {\n  severity: 'info' as const,\n  style: { flex: 0 } as const,\n};\n\nfunction DashboardPreviewBannerContent({ queryParams, slug, path }: DashboardPreviewBannerContentProps) {\n  const { prURL } = usePullRequestParam();\n  const file = useGetRepositoryFilesWithPathQuery({ name: slug, path, ref: queryParams.ref });\n\n  if (file.data?.errors) {\n    return (\n      <Alert\n        title={t('dashboard-scene.dashboard-preview-banner.title-error-loading-dashboard', 'Error loading dashboard')}\n        severity=\"error\"\n        style={{ flex: 0 }}\n      >\n        {file.data.errors.map((error, index) => (\n          <div key={index}>{error}</div>\n        ))}\n      </Alert>\n    );\n  }\n\n  // This page was loaded with a `pull_request_url` in the URL\n  if (prURL?.length) {\n    return <PreviewBannerViewPR prParam={prURL} isNewPr />;\n  }\n\n  // Check if this is a repo link\n  const repoUrl = file.data?.urls?.newPullRequestURL ?? file.data?.urls?.compareURL;\n  if (repoUrl) {\n    return <PreviewBannerViewPR prParam={repoUrl} />;\n  }\n\n  return (\n    <Alert\n      {...commonAlertProps}\n      title={t(\n        'dashboard-scene.dashboard-preview-banner.title-dashboard-loaded-external-repository',\n        'This dashboard is loaded from an external repository'\n      )}\n    >\n      <Trans i18nKey=\"dashboard-scene.dashboard-preview-banner.not-yet-saved\">\n        The value is not saved in the Grafana database\n      </Trans>\n    </Alert>\n  );\n}\n\nexport function DashboardPreviewBanner({ queryParams, route, slug, path }: DashboardPreviewBannerProps) {\n  const provisioningEnabled = config.featureToggles.provisioning;\n  if (!provisioningEnabled || 'kiosk' in queryParams || !path || route !== DashboardRoutes.Provisioning || !slug) {\n    return null;\n  }\n\n  return <DashboardPreviewBannerContent queryParams={queryParams} slug={slug} path={path} />;\n}\n","import { debounce } from 'lodash';\nimport { FormEvent } from 'react';\n\nimport { locationService } from '@grafana/runtime';\nimport { TermCount } from 'app/core/components/TagFilter/TagFilter';\nimport { StateManagerBase } from 'app/core/services/StateManagerBase';\nimport store from 'app/core/store';\n\nimport { SEARCH_PANELS_LOCAL_STORAGE_KEY, SEARCH_SELECTED_LAYOUT, SEARCH_SELECTED_SORT } from '../constants';\nimport {\n  reportDashboardListViewed,\n  reportSearchFailedQueryInteraction,\n  reportSearchQueryInteraction,\n  reportSearchResultInteraction,\n} from '../page/reporting';\nimport { getGrafanaSearcher } from '../service/searcher';\nimport { SearchQuery } from '../service/types';\nimport { SearchLayout, SearchQueryParams, SearchState } from '../types';\nimport { parseRouteParams } from '../utils';\n\nexport const initialState: SearchState = {\n  query: '',\n  tag: [],\n  starred: false,\n  layout: SearchLayout.Folders,\n  sort: undefined,\n  prevSort: undefined,\n  eventTrackingNamespace: 'dashboard_search',\n  deleted: false,\n};\n\nexport const defaultQueryParams: SearchQueryParams = {\n  sort: null,\n  starred: null,\n  query: null,\n  tag: null,\n  layout: null,\n};\n\nconst getLocalStorageLayout = () => {\n  const selectedLayout = localStorage.getItem(SEARCH_SELECTED_LAYOUT);\n  if (selectedLayout === SearchLayout.List) {\n    return SearchLayout.List;\n  } else {\n    return SearchLayout.Folders;\n  }\n};\nexport class SearchStateManager extends StateManagerBase<SearchState> {\n  updateLocation = debounce((query) => locationService.partial(query, true), 300);\n  doSearchWithDebounce = debounce(() => this.doSearch(), 300);\n  lastQuery?: SearchQuery;\n\n  lastSearchTimestamp = 0;\n\n  initStateFromUrl(folderUid?: string, doInitialSearch = true) {\n    const stateFromUrl = parseRouteParams(locationService.getSearchObject());\n\n    // Force list view when conditions are specified from the URL\n    if (stateFromUrl.query || stateFromUrl.datasource || stateFromUrl.panel_type) {\n      stateFromUrl.layout = SearchLayout.List;\n    }\n\n    const layout = getLocalStorageLayout();\n    const prevSort = localStorage.getItem(SEARCH_SELECTED_SORT) ?? undefined;\n    const sort = layout === SearchLayout.List ? stateFromUrl.sort || prevSort : null;\n\n    this.setState({\n      ...initialState,\n      ...stateFromUrl,\n      layout,\n      sort: sort ?? initialState.sort,\n      prevSort,\n      folderUid: folderUid,\n      eventTrackingNamespace: folderUid ? 'manage_dashboards' : 'dashboard_search',\n      deleted: this.state.deleted,\n    });\n\n    if (doInitialSearch && this.hasSearchFilters()) {\n      this.doSearch();\n    }\n  }\n\n  /**\n   * Updates internal and url state, then triggers a new search\n   */\n  setStateAndDoSearch(state: Partial<SearchState>) {\n    const sort = state.sort || this.state.sort || localStorage.getItem(SEARCH_SELECTED_SORT) || undefined;\n\n    // Set internal state\n    this.setState({ sort, ...state });\n\n    // Update url state\n    this.updateLocation({\n      query: this.state.query.length === 0 ? null : this.state.query,\n      tag: this.state.tag,\n      datasource: this.state.datasource,\n      panel_type: this.state.panel_type,\n      starred: this.state.starred ? this.state.starred : null,\n      sort: this.state.sort,\n    });\n\n    // Prevent searching when user is only clearing the input.\n    // We don't show these results anyway\n    if (this.hasSearchFilters()) {\n      this.doSearchWithDebounce();\n    }\n  }\n\n  onCloseSearch = () => {\n    this.updateLocation({\n      search: null,\n      folder: null,\n      ...defaultQueryParams,\n    });\n  };\n\n  onClearSearchAndFilters = () => {\n    this.setStateAndDoSearch({\n      query: '',\n      datasource: undefined,\n      tag: [],\n      panel_type: undefined,\n      starred: undefined,\n      sort: undefined,\n    });\n  };\n\n  onQueryChange = (query: string) => {\n    this.setStateAndDoSearch({ query });\n  };\n\n  onRemoveTag = (tagToRemove: string) => {\n    this.setStateAndDoSearch({ tag: this.state.tag.filter((tag) => tag !== tagToRemove) });\n  };\n\n  onTagFilterChange = (tags: string[]) => {\n    this.setStateAndDoSearch({ tag: tags });\n  };\n\n  onAddTag = (newTag: string) => {\n    if (this.state.tag && this.state.tag.includes(newTag)) {\n      return;\n    }\n\n    this.setStateAndDoSearch({ tag: [...this.state.tag, newTag] });\n  };\n\n  onDatasourceChange = (datasource: string | undefined) => {\n    this.setStateAndDoSearch({ datasource });\n  };\n\n  onPanelTypeChange = (panel_type?: string) => {\n    this.setStateAndDoSearch({ panel_type });\n  };\n\n  onStarredFilterChange = (e: FormEvent<HTMLInputElement>) => {\n    const starred = e.currentTarget.checked;\n    this.setStateAndDoSearch({ starred });\n  };\n\n  onClearStarred = () => {\n    this.setStateAndDoSearch({ starred: false });\n  };\n\n  onSetStarred = (starred: boolean) => {\n    if (starred !== this.state.starred) {\n      this.setStateAndDoSearch({ starred });\n    }\n  };\n\n  onSortChange = (sort: string | undefined) => {\n    if (sort) {\n      localStorage.setItem(SEARCH_SELECTED_SORT, sort);\n      // Switch to list view if sort is set to preserve sort order when navigating back\n      localStorage.setItem(SEARCH_SELECTED_LAYOUT, SearchLayout.List);\n    } else {\n      localStorage.removeItem(SEARCH_SELECTED_SORT);\n    }\n\n    if (this.state.layout === SearchLayout.Folders) {\n      this.setStateAndDoSearch({ sort, layout: SearchLayout.List });\n    } else {\n      this.setStateAndDoSearch({ sort });\n    }\n  };\n\n  onLayoutChange = (layout: SearchLayout) => {\n    localStorage.setItem(SEARCH_SELECTED_LAYOUT, layout);\n\n    if (this.state.sort && layout === SearchLayout.Folders) {\n      this.setStateAndDoSearch({ layout, prevSort: this.state.sort, sort: undefined });\n    } else {\n      this.setStateAndDoSearch({ layout, sort: this.state.prevSort });\n    }\n  };\n\n  onSetIncludePanels = (includePanels: boolean) => {\n    this.setStateAndDoSearch({ includePanels });\n    store.set(SEARCH_PANELS_LOCAL_STORAGE_KEY, includePanels);\n  };\n\n  hasSearchFilters() {\n    return Boolean(\n      this.state.query ||\n        this.state.tag.length ||\n        this.state.starred ||\n        this.state.panel_type ||\n        this.state.sort ||\n        this.state.deleted ||\n        this.state.layout === SearchLayout.List\n    );\n  }\n\n  getSearchQuery() {\n    const q: SearchQuery = {\n      query: this.state.query,\n      tags: this.state.tag,\n      ds_uid: this.state.datasource,\n      panel_type: this.state.panel_type,\n      location: this.state.folderUid, // This will scope all results to the prefix\n      sort: this.state.sort,\n      explain: this.state.explain,\n      withAllowedActions: this.state.explain, // allowedActions are currently not used for anything on the UI and added only in `explain` mode\n      starred: this.state.starred,\n      deleted: this.state.deleted,\n    };\n\n    // Only dashboards have additional properties\n    if (q.sort?.length && !q.sort.includes('name')) {\n      q.kind = ['dashboard', 'folder']; // skip panels\n    }\n\n    if (!q.query?.length) {\n      q.query = '*';\n      if (!q.location) {\n        q.kind = ['dashboard', 'folder']; // skip panels\n      }\n    }\n\n    if (!this.state.includePanels && !q.kind) {\n      q.kind = ['dashboard', 'folder']; // skip panels\n    }\n\n    if (q.panel_type?.length) {\n      q.kind = ['panel'];\n    }\n\n    return q;\n  }\n\n  private doSearch() {\n    const trackingInfo = {\n      layout: this.state.layout,\n      starred: this.state.starred,\n      sortValue: this.state.sort,\n      query: this.state.query,\n      tagCount: this.state.tag?.length,\n      includePanels: this.state.includePanels,\n      deleted: this.state.deleted,\n    };\n\n    reportSearchQueryInteraction(this.state.eventTrackingNamespace, trackingInfo);\n\n    this.lastQuery = this.getSearchQuery();\n\n    this.setState({ loading: true });\n\n    const searcher = getGrafanaSearcher();\n\n    const searchTimestamp = Date.now();\n    const searchPromise = this.state.starred ? searcher.starred(this.lastQuery) : searcher.search(this.lastQuery);\n\n    searchPromise\n      .then((result) => {\n        // Only keep the results if it's was issued after the most recently resolved search.\n        // This prevents results showing out of order if first request is slower than later ones\n        if (searchTimestamp > this.lastSearchTimestamp) {\n          this.setState({ result, loading: false });\n          this.lastSearchTimestamp = searchTimestamp;\n        }\n      })\n      .catch((error) => {\n        reportSearchFailedQueryInteraction(this.state.eventTrackingNamespace, {\n          ...trackingInfo,\n          error: error?.message,\n        });\n        this.setState({ loading: false });\n      });\n  }\n\n  // This gets the possible tags from within the query results\n  getTagOptions = (): Promise<TermCount[]> => {\n    const query = this.lastQuery ?? {\n      kind: ['dashboard', 'folder'],\n      query: '*',\n    };\n    return getGrafanaSearcher().tags(query);\n  };\n\n  /**\n   * When item is selected clear some filters and report interaction\n   */\n  onSearchItemClicked = (e: React.MouseEvent<HTMLElement>) => {\n    reportSearchResultInteraction(this.state.eventTrackingNamespace, {\n      layout: this.state.layout,\n      starred: this.state.starred,\n      sortValue: this.state.sort,\n      query: this.state.query,\n      tagCount: this.state.tag?.length,\n      includePanels: this.state.includePanels,\n      deleted: this.state.deleted,\n    });\n  };\n\n  /**\n   * Caller should handle debounce\n   */\n  onReportSearchUsage = () => {\n    reportDashboardListViewed(this.state.eventTrackingNamespace, {\n      layout: this.state.layout,\n      starred: this.state.starred,\n      sortValue: this.state.sort,\n      query: this.state.query,\n      tagCount: this.state.tag?.length,\n      includePanels: this.state.includePanels,\n      deleted: this.state.deleted,\n    });\n  };\n}\n\nlet stateManager: SearchStateManager;\n\nexport function getSearchStateManager() {\n  if (!stateManager) {\n    const selectedLayout = localStorage.getItem(SEARCH_SELECTED_LAYOUT) as SearchLayout;\n    const layout = selectedLayout ?? initialState.layout;\n\n    let includePanels = store.getBool(SEARCH_PANELS_LOCAL_STORAGE_KEY, true);\n    if (includePanels) {\n      includePanels = false;\n    }\n\n    stateManager = new SearchStateManager({ ...initialState, layout, includePanels });\n  }\n\n  return stateManager;\n}\n\nexport function useSearchStateManager() {\n  const stateManager = getSearchStateManager();\n  const state = stateManager.useState();\n\n  return [state, stateManager] as const;\n}\n","import { config } from '@grafana/runtime';\nimport { CommonBannerProps } from 'app/features/provisioning/components/Dashboards/DashboardPreviewBanner';\nimport { PreviewBannerViewPR } from 'app/features/provisioning/components/Shared/PreviewBannerViewPR';\nimport { usePullRequestParam } from 'app/features/provisioning/hooks/usePullRequestParam';\n\nexport function ProvisionedFolderPreviewBanner({ queryParams }: CommonBannerProps) {\n  const provisioningEnabled = config.featureToggles.provisioning;\n  const { prURL, newPrURL, repoURL } = usePullRequestParam();\n\n  if (!provisioningEnabled || 'kiosk' in queryParams) {\n    return null;\n  }\n\n  if (prURL) {\n    return <PreviewBannerViewPR prParam={prURL} />;\n  }\n\n  if (newPrURL) {\n    return <PreviewBannerViewPR prParam={newPrURL} isNewPr />;\n  }\n\n  if (repoURL) {\n    return <PreviewBannerViewPR repoUrl={repoURL} behindBranch />;\n  }\n\n  return null;\n}\n","// Temporary place to collect phrases we reuse between new and old browse/search\n// TODO: remove this when new Browse Dashboards UI is no longer feature flagged\n\nimport { t } from '@grafana/i18n';\n\nexport function getSearchPlaceholder(includePanels = false) {\n  return includePanels\n    ? t('search.search-input.include-panels-placeholder', 'Search for dashboards, folders, and panels')\n    : t('search.search-input.placeholder', 'Search for dashboards and folders');\n}\n\nexport function getNewDashboardPhrase() {\n  return t('search.dashboard-actions.new-dashboard', 'New dashboard');\n}\n\nexport function getNewFolderPhrase() {\n  return t('search.dashboard-actions.new-folder', 'New folder');\n}\n\nexport function getImportPhrase() {\n  return t('search.dashboard-actions.import', 'Import');\n}\n\nexport function getNewPhrase() {\n  return t('search.dashboard-actions.new', 'New');\n}\n","import { skipToken } from '@reduxjs/toolkit/query';\n\nimport { config } from '@grafana/runtime';\nimport { useGetFrontendSettingsQuery } from 'app/api/clients/provisioning/v0alpha1';\nimport { findItem } from 'app/features/browse-dashboards/state/utils';\nimport { DashboardTreeSelection } from 'app/features/browse-dashboards/types';\nimport { useIsProvisionedInstance } from 'app/features/provisioning/hooks/useIsProvisionedInstance';\nimport { getIsReadOnlyRepo, getItemRepositoryUid } from 'app/features/provisioning/utils/repository';\nimport { useSelector } from 'app/types/store';\n\nimport { useChildrenByParentUIDState, rootItemsSelector } from '../../browse-dashboards/state/hooks';\n\n// This hook is responsible for validating if all selected resources (dashboard folders and dashboards) are in the same repository\nexport function useSelectionRepoValidation(selectedItems: Omit<DashboardTreeSelection, 'panel' | '$all'>) {\n  const provisioningEnabled = config.featureToggles.provisioning;\n  const childrenByParentUID = useChildrenByParentUIDState();\n  const rootItems = useSelector(rootItemsSelector)?.items ?? [];\n  const isProvisionedInstance = useIsProvisionedInstance();\n\n  const { data: settingsData } = useGetFrontendSettingsQuery(!provisioningEnabled ? skipToken : undefined);\n  // Function to grab repository configuration by UID\n  const getRepositoryByUid = (repoUid: string) => {\n    if (!settingsData?.items || repoUid === 'non_provisioned') {\n      return undefined;\n    }\n    return settingsData.items.find((repo) => repo.name === repoUid);\n  };\n\n  const getRepoUid = (uid: string) => {\n    const item = findItem(rootItems, childrenByParentUID, uid);\n    return item ? getItemRepositoryUid(item, rootItems, childrenByParentUID) : 'non_provisioned';\n  };\n\n  const selectedUIDs = [\n    ...Object.keys(selectedItems.folder || {}).filter((id) => selectedItems.folder[id]),\n    ...Object.keys(selectedItems.dashboard || {}).filter((id) => selectedItems.dashboard[id]),\n  ];\n\n  const repoUIDs = selectedUIDs.map(getRepoUid).filter((repoId): repoId is string => !!repoId);\n\n  const selectedItemsRepoUID = repoUIDs.length > 0 ? repoUIDs[0] : undefined;\n  const isCrossRepo = new Set(repoUIDs).size > 1;\n\n  const isInLockedRepo = (uid: string) => {\n    // if whole instance is provisioned, all items are considered in the locked (same) repo\n    if (isProvisionedInstance) {\n      return true;\n    }\n    return !selectedItemsRepoUID || getRepoUid(uid) === selectedItemsRepoUID;\n  };\n  const isUidInReadOnlyRepo = (uid: string) => {\n    const repo = getRepositoryByUid(getRepoUid(uid));\n    return repo ? getIsReadOnlyRepo(repo) : false;\n  };\n\n  return {\n    selectedItemsRepoUID,\n    isInLockedRepo,\n    isCrossRepo, // true if items are from different repositories\n    isUidInReadOnlyRepo,\n  };\n}\n","import { useCreateRepositoryJobsMutation, RepositoryView, Job } from 'app/api/clients/provisioning/v0alpha1';\nimport { extractErrorMessage } from 'app/api/utils';\n\nexport interface ResourceRef {\n  name: string;\n  group: 'dashboard.grafana.app' | 'folder.grafana.app';\n  kind: 'Dashboard' | 'Folder';\n}\n\nexport interface DeleteJobSpec {\n  action: 'delete';\n  delete: {\n    ref?: string;\n    resources: ResourceRef[];\n  };\n}\n\nexport interface MoveJobSpec {\n  action: 'move';\n  move: {\n    ref?: string;\n    targetPath: string; // Must end with '/' slash\n    resources: ResourceRef[];\n  };\n}\n\nexport type BulkJobSpec = DeleteJobSpec | MoveJobSpec;\n\ninterface UseBulkActionJobResult {\n  createBulkJob: (\n    repository: RepositoryView,\n    jobSpec: BulkJobSpec\n  ) => Promise<{\n    success: boolean;\n    jobId?: string;\n    job?: Job; // Return the full job object\n    error?: string;\n  }>;\n  isLoading: boolean;\n}\n\nexport type ResponseType = { success: boolean; jobId?: string; job?: Job; error?: string };\n\n// This hook is used to create bulk action (delete, move) jobs for provisioning resources\nexport function useBulkActionJob(): UseBulkActionJobResult {\n  const [createJob, { isLoading }] = useCreateRepositoryJobsMutation();\n\n  const createBulkJob = async (repository: RepositoryView, jobSpec: BulkJobSpec): Promise<ResponseType> => {\n    try {\n      const response = await createJob({\n        name: repository.name,\n        jobSpec,\n      }).unwrap();\n\n      const jobId = response.metadata?.name;\n      return {\n        success: true,\n        jobId,\n        job: response, // Return the full job object\n      };\n    } catch (error) {\n      return { success: false, error: extractErrorMessage(error) };\n    }\n  };\n\n  return {\n    createBulkJob,\n    isLoading,\n  };\n}\n","import { useState } from 'react';\nimport { FormProvider, useForm } from 'react-hook-form';\n\nimport { AppEvents } from '@grafana/data';\nimport { Trans, t } from '@grafana/i18n';\nimport { getAppEvents } from '@grafana/runtime';\nimport { Box, Button, Stack } from '@grafana/ui';\nimport { Job, RepositoryView } from 'app/api/clients/provisioning/v0alpha1';\nimport { DescendantCount } from 'app/features/browse-dashboards/components/BrowseActions/DescendantCount';\nimport { collectSelectedItems } from 'app/features/browse-dashboards/components/utils';\nimport { JobStatus } from 'app/features/provisioning/Job/JobStatus';\nimport { useGetResourceRepositoryView } from 'app/features/provisioning/hooks/useGetResourceRepositoryView';\nimport { GENERAL_FOLDER_UID } from 'app/features/search/constants';\n\nimport { useSelectionRepoValidation } from '../../hooks/useSelectionRepoValidation';\nimport { RepoInvalidStateBanner } from '../Shared/RepoInvalidStateBanner';\nimport { ResourceEditFormSharedFields } from '../Shared/ResourceEditFormSharedFields';\nimport { getDefaultWorkflow, getWorkflowOptions } from '../defaults';\nimport { generateTimestamp } from '../utils/timestamp';\n\nimport { DeleteJobSpec, useBulkActionJob } from './useBulkActionJob';\nimport { BulkActionFormData, BulkActionProvisionResourceProps } from './utils';\n\ninterface FormProps extends BulkActionProvisionResourceProps {\n  initialValues: BulkActionFormData;\n  repository: RepositoryView;\n  workflowOptions: Array<{ label: string; value: string }>;\n}\n\nfunction FormContent({ initialValues, selectedItems, repository, workflowOptions, onDismiss }: FormProps) {\n  // States\n  const [job, setJob] = useState<Job>();\n  const [hasSubmitted, setHasSubmitted] = useState(false);\n\n  // Hooks\n  const { createBulkJob, isLoading: isCreatingJob } = useBulkActionJob();\n  const methods = useForm<BulkActionFormData>({ defaultValues: initialValues });\n  const { handleSubmit, watch } = methods;\n  const workflow = watch('workflow');\n\n  const handleSubmitForm = async (data: BulkActionFormData) => {\n    setHasSubmitted(true);\n\n    const resources = collectSelectedItems(selectedItems);\n\n    // Create the delete job spec\n    const jobSpec: DeleteJobSpec = {\n      action: 'delete',\n      delete: {\n        ref: data.workflow === 'write' ? undefined : data.ref,\n        resources,\n      },\n    };\n\n    const result = await createBulkJob(repository, jobSpec);\n\n    if (result.success && result.job) {\n      setJob(result.job); // Store the job for tracking\n    } else if (!result.success && result.error) {\n      // Handle error case - show error alert\n      getAppEvents().publish({\n        type: AppEvents.alertError.name,\n        payload: [\n          t('browse-dashboards.bulk-delete-resources-form.error-deleting-resources', 'Error deleting resources'),\n          result.error,\n        ],\n      });\n      setHasSubmitted(false); // Reset submit state so user can try again\n    }\n  };\n\n  const disableBtn =\n    isCreatingJob || job?.status?.state === 'working' || job?.status?.state === 'pending' || hasSubmitted;\n\n  return (\n    <FormProvider {...methods}>\n      <form onSubmit={handleSubmit(handleSubmitForm)}>\n        <Stack direction=\"column\" gap={2}>\n          <Box paddingBottom={2}>\n            <Trans i18nKey=\"browse-dashboards.bulk-delete-resources-form.delete-warning\">\n              This will delete selected folders and their descendants. In total, this will affect:\n            </Trans>\n            <DescendantCount selectedItems={{ ...selectedItems, panel: {}, $all: false }} />\n          </Box>\n\n          {hasSubmitted && job ? (\n            <JobStatus watch={job} jobType=\"delete\" />\n          ) : (\n            <>\n              <ResourceEditFormSharedFields\n                resourceType=\"folder\"\n                isNew={false}\n                workflow={workflow}\n                workflowOptions={workflowOptions}\n                repository={repository}\n                hidePath\n              />\n              <Stack gap={2}>\n                <Button variant=\"secondary\" fill=\"outline\" onClick={onDismiss} disabled={isCreatingJob}>\n                  <Trans i18nKey=\"browse-dashboards.bulk-delete-resources-form.button-cancel\">Cancel</Trans>\n                </Button>\n                <Button type=\"submit\" disabled={disableBtn} variant=\"destructive\">\n                  {job?.status?.state === 'working' || job?.status?.state === 'pending'\n                    ? t('browse-dashboards.bulk-delete-resources-form.button-deleting', 'Deleting...')\n                    : t('browse-dashboards.bulk-delete-resources-form.button-delete', 'Delete')}\n                </Button>\n              </Stack>\n            </>\n          )}\n        </Stack>\n      </form>\n    </FormProvider>\n  );\n}\n\nexport function BulkDeleteProvisionedResource({\n  folderUid,\n  selectedItems,\n  onDismiss,\n}: BulkActionProvisionResourceProps) {\n  // Check if we're on the root browser dashboards page\n  const isRootPage = !folderUid || folderUid === GENERAL_FOLDER_UID;\n  const { selectedItemsRepoUID } = useSelectionRepoValidation(selectedItems);\n\n  // For root provisioned folders, the folder UID is the repository name\n  const { repository, isReadOnlyRepo } = useGetResourceRepositoryView({\n    folderName: isRootPage ? selectedItemsRepoUID : folderUid,\n  });\n  const workflowOptions = getWorkflowOptions(repository);\n  const timestamp = generateTimestamp();\n\n  const initialValues = {\n    comment: '',\n    ref: `bulk-delete/${timestamp}`,\n    workflow: getDefaultWorkflow(repository),\n  };\n\n  if (!repository || isReadOnlyRepo) {\n    return <RepoInvalidStateBanner noRepository={!repository} isReadOnlyRepo={isReadOnlyRepo} />;\n  }\n\n  return (\n    <FormContent\n      selectedItems={selectedItems}\n      onDismiss={onDismiss}\n      initialValues={initialValues}\n      repository={repository}\n      workflowOptions={workflowOptions}\n    />\n  );\n}\n","import { skipToken } from '@reduxjs/toolkit/query';\nimport { useState } from 'react';\nimport { FormProvider, useForm } from 'react-hook-form';\n\nimport { AppEvents } from '@grafana/data';\nimport { Trans, t } from '@grafana/i18n';\nimport { getAppEvents } from '@grafana/runtime';\nimport { Box, Button, Field, Stack } from '@grafana/ui';\nimport { useGetFolderQuery } from 'app/api/clients/folder/v1beta1';\nimport { RepositoryView, Job } from 'app/api/clients/provisioning/v0alpha1';\nimport { AnnoKeySourcePath } from 'app/features/apiserver/types';\nimport { DescendantCount } from 'app/features/browse-dashboards/components/BrowseActions/DescendantCount';\nimport { collectSelectedItems } from 'app/features/browse-dashboards/components/utils';\nimport { JobStatus } from 'app/features/provisioning/Job/JobStatus';\nimport { getDefaultWorkflow, getWorkflowOptions } from 'app/features/provisioning/components/defaults';\nimport { useGetResourceRepositoryView } from 'app/features/provisioning/hooks/useGetResourceRepositoryView';\nimport { GENERAL_FOLDER_UID } from 'app/features/search/constants';\n\nimport { useSelectionRepoValidation } from '../../hooks/useSelectionRepoValidation';\nimport { MoveActionAvailableTargetWarning } from '../Shared/MoveActionAvailableTargetWarning';\nimport { ProvisioningAwareFolderPicker } from '../Shared/ProvisioningAwareFolderPicker';\nimport { RepoInvalidStateBanner } from '../Shared/RepoInvalidStateBanner';\nimport { ResourceEditFormSharedFields } from '../Shared/ResourceEditFormSharedFields';\nimport { generateTimestamp } from '../utils/timestamp';\n\nimport { MoveJobSpec, useBulkActionJob } from './useBulkActionJob';\nimport { BulkActionFormData, BulkActionProvisionResourceProps, getTargetFolderPathInRepo } from './utils';\n\ninterface FormProps extends BulkActionProvisionResourceProps {\n  initialValues: BulkActionFormData;\n  repository: RepositoryView;\n  workflowOptions: Array<{ label: string; value: string }>;\n  folderPath?: string;\n}\n\nfunction FormContent({ initialValues, selectedItems, repository, workflowOptions, onDismiss }: FormProps) {\n  // States\n  const [job, setJob] = useState<Job>();\n  const [targetFolderUID, setTargetFolderUID] = useState<string | undefined>(undefined);\n  const [hasSubmitted, setHasSubmitted] = useState(false);\n\n  // Hooks\n  const { createBulkJob, isLoading: isCreatingJob } = useBulkActionJob();\n  const methods = useForm<BulkActionFormData>({ defaultValues: initialValues });\n  const {\n    handleSubmit,\n    watch,\n    setError,\n    clearErrors,\n    formState: { errors },\n  } = methods;\n  const workflow = watch('workflow');\n\n  // Get target folder data\n  const { data: targetFolder } = useGetFolderQuery(targetFolderUID ? { name: targetFolderUID } : skipToken);\n\n  const setupMoveOperation = () => {\n    const targetFolderPathInRepo = getTargetFolderPathInRepo({\n      targetFolderUID,\n      targetFolder,\n      repoName: repository.name,\n    });\n    const resources = collectSelectedItems(selectedItems);\n\n    return { targetFolderPathInRepo, resources };\n  };\n\n  const handleSubmitForm = async (data: BulkActionFormData) => {\n    setHasSubmitted(true);\n\n    // 1. Setup\n    const { targetFolderPathInRepo, resources } = setupMoveOperation();\n\n    if (!targetFolderPathInRepo) {\n      setError('targetFolderUID', {\n        type: 'manual',\n        message: t(\n          'browse-dashboards.bulk-move-resources-form.error-no-target-folder-path',\n          'Target folder path is invalid or empty, please select again.'\n        ),\n      });\n      setHasSubmitted(false);\n      return;\n    }\n\n    // Create the move job spec\n    const jobSpec: MoveJobSpec = {\n      action: 'move',\n      move: {\n        ref: data.workflow === 'write' ? undefined : data.ref,\n        targetPath: targetFolderPathInRepo,\n        resources,\n      },\n    };\n\n    const result = await createBulkJob(repository, jobSpec);\n\n    if (result.success && result.job) {\n      setJob(result.job); // Store the job for tracking\n    } else if (!result.success && result.error) {\n      getAppEvents().publish({\n        type: AppEvents.alertError.name,\n        payload: [\n          t('browse-dashboards.bulk-move-resources-form.error-moving-resources', 'Error moving resources'),\n          result.error,\n        ],\n      });\n      setHasSubmitted(false);\n    }\n  };\n\n  return (\n    <FormProvider {...methods}>\n      <form onSubmit={handleSubmit(handleSubmitForm)}>\n        <Stack direction=\"column\" gap={2}>\n          <MoveActionAvailableTargetWarning />\n          <Box paddingBottom={2}>\n            <Trans i18nKey=\"browse-dashboards.bulk-move-resources-form.move-total\">In total, this will affect:</Trans>\n            <DescendantCount selectedItems={{ ...selectedItems, panel: {}, $all: false }} />\n          </Box>\n\n          {hasSubmitted && job ? (\n            <JobStatus watch={job} jobType=\"move\" />\n          ) : (\n            <>\n              {/* Target folder selection */}\n              <Field\n                noMargin\n                label={t('browse-dashboards.bulk-move-resources-form.target-folder', 'Target Folder')}\n                error={errors.targetFolderUID?.message}\n                invalid={!!errors.targetFolderUID}\n              >\n                <ProvisioningAwareFolderPicker\n                  value={targetFolderUID}\n                  onChange={(uid) => {\n                    setTargetFolderUID(uid || '');\n                    clearErrors('targetFolderUID');\n                  }}\n                  repositoryName={repository.name}\n                />\n              </Field>\n              <ResourceEditFormSharedFields\n                resourceType=\"folder\"\n                isNew={false}\n                workflow={workflow}\n                workflowOptions={workflowOptions}\n                repository={repository}\n                hidePath\n              />\n\n              <Stack gap={2}>\n                <Button variant=\"secondary\" fill=\"outline\" onClick={onDismiss} disabled={isCreatingJob}>\n                  <Trans i18nKey=\"browse-dashboards.bulk-move-resources-form.button-cancel\">Cancel</Trans>\n                </Button>\n                <Button\n                  type=\"submit\"\n                  disabled={!!job || isCreatingJob || hasSubmitted || targetFolderUID === undefined}\n                >\n                  {isCreatingJob\n                    ? t('browse-dashboards.bulk-move-resources-form.button-moving', 'Moving...')\n                    : t('browse-dashboards.bulk-move-resources-form.button-move', 'Move')}\n                </Button>\n              </Stack>\n            </>\n          )}\n        </Stack>\n      </form>\n    </FormProvider>\n  );\n}\n\nexport function BulkMoveProvisionedResource({ folderUid, selectedItems, onDismiss }: BulkActionProvisionResourceProps) {\n  // Check if we're on the root browser dashboards page\n  const isRootPage = !folderUid || folderUid === GENERAL_FOLDER_UID;\n  const { selectedItemsRepoUID } = useSelectionRepoValidation(selectedItems);\n  const { repository, folder, isReadOnlyRepo } = useGetResourceRepositoryView({\n    folderName: isRootPage ? selectedItemsRepoUID : folderUid,\n  });\n\n  const workflowOptions = getWorkflowOptions(repository);\n  const folderPath = folder?.metadata?.annotations?.[AnnoKeySourcePath] || '';\n  const timestamp = generateTimestamp();\n\n  const initialValues = {\n    comment: '',\n    ref: `bulk-move/${timestamp}`,\n    workflow: getDefaultWorkflow(repository),\n  };\n\n  if (!repository || isReadOnlyRepo) {\n    return <RepoInvalidStateBanner noRepository={!repository} isReadOnlyRepo={isReadOnlyRepo} />;\n  }\n\n  return (\n    <FormContent\n      selectedItems={selectedItems}\n      onDismiss={onDismiss}\n      initialValues={initialValues}\n      repository={repository}\n      workflowOptions={workflowOptions}\n      folderPath={isRootPage ? '/' : folderPath}\n    />\n  );\n}\n","import { useCallback, useEffect, useMemo, useState } from 'react';\n\nimport { config } from '@grafana/runtime';\nimport { ScopedResourceClient } from 'app/features/apiserver/client';\nimport { AnnoKeyManagerKind, ManagerKind } from 'app/features/apiserver/types';\nimport { isProvisionedDashboard as isProvisionedDashboardFromMeta } from 'app/features/browse-dashboards/api/isProvisioned';\nimport { getDashboardAPI } from 'app/features/dashboard/api/dashboard_api';\nimport { useIsProvisionedInstance } from 'app/features/provisioning/hooks/useIsProvisionedInstance';\nimport { useSearchStateManager } from 'app/features/search/state/SearchStateManager';\nimport { useSelector } from 'app/types/store';\n\nimport { findItem } from '../../browse-dashboards/state/utils';\nimport { DashboardTreeSelection } from '../../browse-dashboards/types';\n\n// TODO: This will soon be remove after bulk action is merged in\n\n// This hook can be remove once searching endpoint returns provisioning status\n// It is used to determine if the selected items are provisioned or not, which is currently missing from the search API\nexport function useSelectionProvisioningStatus(\n  selectedItems: Omit<DashboardTreeSelection, 'panel' | '$all'>,\n  isParentProvisioned: boolean\n) {\n  const browseState = useSelector((state) => state.browseDashboards);\n  const isProvisionedInstance = useIsProvisionedInstance();\n  const [, stateManager] = useSearchStateManager();\n  const isSearching = stateManager.hasSearchFilters();\n  const provisioningEnabled = config.featureToggles.provisioning;\n\n  const [status, setStatus] = useState({ hasProvisioned: false, hasNonProvisioned: false });\n  const [folderCache, setFolderCache] = useState<Record<string, boolean>>({});\n  const [dashboardCache, setDashboardCache] = useState<Record<string, boolean>>({});\n\n  // Create folder resource client for k8s API\n  const folderClient = useMemo(\n    () =>\n      new ScopedResourceClient({\n        group: 'folder.grafana.app',\n        version: 'v1beta1',\n        resource: 'folders',\n      }),\n    []\n  );\n\n  // Simplified: removed complex root folder tracking logic\n\n  const findItemInState = useCallback(\n    (uid: string) => {\n      const item = findItem(browseState.rootItems?.items || [], browseState.childrenByParentUID, uid);\n      return item ? { parentUID: item.parentUID, managedBy: item.managedBy } : undefined;\n    },\n    [browseState]\n  );\n\n  const getFolderMeta = useCallback(\n    async (uid: string) => {\n      if (folderCache[uid] !== undefined) {\n        return folderCache[uid];\n      }\n      try {\n        const folder = await folderClient.get(uid);\n        const managedBy = folder.metadata?.annotations?.[AnnoKeyManagerKind];\n        const result = managedBy === ManagerKind.Repo;\n        setFolderCache((prev) => ({ ...prev, [uid]: result }));\n        return result;\n      } catch {\n        return false;\n      }\n    },\n    [folderCache, folderClient]\n  );\n\n  const getDashboardMeta = useCallback(\n    async (uid: string) => {\n      if (dashboardCache[uid] !== undefined) {\n        return dashboardCache[uid];\n      }\n      try {\n        const dto = await getDashboardAPI().getDashboardDTO(uid);\n        const result = isProvisionedDashboardFromMeta(dto);\n        setDashboardCache((prev) => ({ ...prev, [uid]: result }));\n        return result;\n      } catch {\n        return false;\n      }\n    },\n    [dashboardCache]\n  );\n\n  const checkItemProvisioning = useCallback(\n    async (uid: string, isFolder: boolean): Promise<boolean> => {\n      if (isSearching) {\n        return isFolder ? await getFolderMeta(uid) : await getDashboardMeta(uid);\n      }\n\n      const item = findItemInState(uid);\n      if (isFolder) {\n        return item?.managedBy === ManagerKind.Repo;\n      }\n\n      // Check parent folder first for dashboards\n      const parent = item?.parentUID ? findItemInState(item.parentUID) : undefined;\n      if (parent?.managedBy === ManagerKind.Repo) {\n        return true;\n      }\n\n      return item?.managedBy === ManagerKind.Repo;\n    },\n    [isSearching, getFolderMeta, getDashboardMeta, findItemInState]\n  );\n\n  useEffect(() => {\n    const checkProvisioningStatus = async () => {\n      // Early returns for simple cases\n      if (isProvisionedInstance || isParentProvisioned) {\n        setStatus({ hasProvisioned: true, hasNonProvisioned: false });\n        return;\n      }\n\n      if (!provisioningEnabled) {\n        setStatus({ hasProvisioned: false, hasNonProvisioned: true });\n        return;\n      }\n\n      const folders = Object.keys(selectedItems.folder).filter((uid) => selectedItems.folder[uid]);\n      const dashboards = Object.keys(selectedItems.dashboard).filter((uid) => selectedItems.dashboard[uid]);\n\n      // If no items selected\n      if (folders.length === 0 && dashboards.length === 0) {\n        setStatus({ hasProvisioned: false, hasNonProvisioned: false });\n        return;\n      }\n\n      let hasProvisioned = false;\n      let hasNonProvisioned = false;\n\n      const allItems = [\n        ...folders.map((uid) => ({ uid, isFolder: true })),\n        ...dashboards.map((uid) => ({ uid, isFolder: false })),\n      ];\n\n      for (const { uid, isFolder } of allItems) {\n        const isProvisioned = await checkItemProvisioning(uid, isFolder);\n\n        if (isProvisioned) {\n          hasProvisioned = true;\n        } else {\n          hasNonProvisioned = true;\n        }\n\n        if (hasProvisioned && hasNonProvisioned) {\n          // If we have both, we can stop checking\n          break;\n        }\n      }\n\n      setStatus({ hasProvisioned, hasNonProvisioned });\n    };\n\n    checkProvisioningStatus();\n  }, [selectedItems, isProvisionedInstance, isParentProvisioned, checkItemProvisioning, provisioningEnabled]);\n\n  return {\n    hasProvisioned: status.hasProvisioned,\n    hasNonProvisioned: status.hasNonProvisioned,\n  };\n}\n","import { css } from '@emotion/css';\n\nimport { Trans, t } from '@grafana/i18n';\nimport { Modal, useStyles2 } from '@grafana/ui';\n\nexport interface Props {}\n\nexport const SelectedMixResourcesMsgModal = ({ onDismiss }: { onDismiss: () => void }) => {\n  const styles = useStyles2(getStyles);\n  return (\n    <Modal\n      title={t('browse-dashboards.action.selected-mix-resources-modal-title', 'Mixed resource types selected')}\n      isOpen={true}\n      onDismiss={onDismiss}\n      className={styles.modal}\n    >\n      <Trans i18nKey=\"browse-dashboards.action.selected-mix-resources-modal-text\">\n        You have selected both provisioned and non-provisioned resources. These cannot be processed together. Please\n        select only provisioned resources or only non-provisioned resources and try again.\n      </Trans>\n    </Modal>\n  );\n};\n\nconst getStyles = () => ({\n  modal: css({\n    label: 'RowOptionsModal',\n    width: '500px',\n  }),\n});\n","import { useState } from 'react';\n\nimport { Trans, t } from '@grafana/i18n';\nimport { config, reportInteraction } from '@grafana/runtime';\nimport { Button, Drawer, Stack } from '@grafana/ui';\nimport appEvents from 'app/core/app_events';\nimport { ManagerKind } from 'app/features/apiserver/types';\nimport { BulkDeleteProvisionedResource } from 'app/features/provisioning/components/BulkActions/BulkDeleteProvisionedResource';\nimport { BulkMoveProvisionedResource } from 'app/features/provisioning/components/BulkActions/BulkMoveProvisionedResource';\nimport { useSelectionProvisioningStatus } from 'app/features/provisioning/hooks/useSelectionProvisioningStatus';\nimport { useSearchStateManager } from 'app/features/search/state/SearchStateManager';\nimport { ShowModalReactEvent } from 'app/types/events';\nimport { FolderDTO } from 'app/types/folders';\nimport { useDispatch } from 'app/types/store';\n\nimport {\n  useDeleteMultipleFoldersMutationFacade,\n  useMoveMultipleFoldersMutationFacade,\n} from '../../../../api/clients/folder/v1beta1/hooks';\nimport { useDeleteDashboardsMutation, useMoveDashboardsMutation } from '../../api/browseDashboardsAPI';\nimport { useActionSelectionState } from '../../state/hooks';\nimport { setAllSelection } from '../../state/slice';\nimport { DashboardTreeSelection } from '../../types';\n\nimport { DeleteModal } from './DeleteModal';\nimport { MoveModal } from './MoveModal';\nimport { SelectedMixResourcesMsgModal } from './SelectedMixResourcesMsgModal';\n\nexport interface Props {\n  folderDTO?: FolderDTO;\n}\n\nexport function BrowseActions({ folderDTO }: Props) {\n  const [showBulkDeleteProvisionedResource, setShowBulkDeleteProvisionedResource] = useState(false);\n  const [showBulkMoveProvisionedResource, setShowBulkMoveProvisionedResource] = useState(false);\n\n  const dispatch = useDispatch();\n  const selectedItems = useActionSelectionState();\n  const [deleteDashboards] = useDeleteDashboardsMutation();\n  const deleteFolders = useDeleteMultipleFoldersMutationFacade();\n  const [moveFolders] = useMoveMultipleFoldersMutationFacade();\n  const [moveDashboards] = useMoveDashboardsMutation();\n  const [, stateManager] = useSearchStateManager();\n  const provisioningEnabled = config.featureToggles.provisioning;\n\n  const { hasProvisioned, hasNonProvisioned } = useSelectionProvisioningStatus(\n    selectedItems,\n    folderDTO?.managedBy === ManagerKind.Repo\n  );\n\n  const isSearching = stateManager.hasSearchFilters();\n\n  const onActionComplete = () => {\n    dispatch(setAllSelection({ isSelected: false, folderUID: undefined }));\n\n    if (isSearching) {\n      // Redo search query\n      stateManager.doSearchWithDebounce();\n    }\n  };\n\n  const onDelete = async () => {\n    const selectedDashboards = Object.keys(selectedItems.dashboard).filter((uid) => selectedItems.dashboard[uid]);\n    const selectedFolders = Object.keys(selectedItems.folder).filter((uid) => selectedItems.folder[uid]);\n    await deleteDashboards({ dashboardUIDs: selectedDashboards });\n    await deleteFolders({ folderUIDs: selectedFolders });\n    trackAction('delete', selectedItems);\n    onActionComplete();\n  };\n\n  const onMove = async (destinationUID: string) => {\n    const selectedDashboards = Object.keys(selectedItems.dashboard).filter((uid) => selectedItems.dashboard[uid]);\n    const selectedFolders = Object.keys(selectedItems.folder).filter((uid) => selectedItems.folder[uid]);\n\n    await moveFolders({ folderUIDs: selectedFolders, destinationUID });\n    await moveDashboards({ dashboardUIDs: selectedDashboards, destinationUID });\n    trackAction('move', selectedItems);\n    onActionComplete();\n  };\n\n  const showMoveModal = () => {\n    if (provisioningEnabled && hasProvisioned && hasNonProvisioned) {\n      // Mixed selection\n      appEvents.publish(\n        new ShowModalReactEvent({\n          component: SelectedMixResourcesMsgModal,\n          props: {},\n        })\n      );\n      return;\n    }\n\n    if (provisioningEnabled && hasProvisioned) {\n      // Only provisioned items\n      setShowBulkMoveProvisionedResource(true);\n      return;\n    }\n\n    // only non-provisioned items\n    appEvents.publish(\n      new ShowModalReactEvent({\n        component: MoveModal,\n        props: {\n          selectedItems,\n          onConfirm: onMove,\n        },\n      })\n    );\n  };\n\n  const showDeleteModal = () => {\n    if (hasProvisioned && hasNonProvisioned && provisioningEnabled) {\n      // Mixed selection\n      appEvents.publish(\n        new ShowModalReactEvent({\n          component: SelectedMixResourcesMsgModal,\n          props: {},\n        })\n      );\n    } else if (hasProvisioned && provisioningEnabled) {\n      // Only provisioned items\n      setShowBulkDeleteProvisionedResource(true);\n    } else {\n      // Only non-provisioned items\n      appEvents.publish(\n        new ShowModalReactEvent({\n          component: DeleteModal,\n          props: {\n            selectedItems,\n            onConfirm: onDelete,\n          },\n        })\n      );\n    }\n  };\n\n  const moveButton = (\n    <Button onClick={showMoveModal} variant=\"secondary\">\n      <Trans i18nKey=\"browse-dashboards.action.move-button\">Move</Trans>\n    </Button>\n  );\n\n  return (\n    <>\n      <Stack gap={1} data-testid=\"manage-actions\">\n        {moveButton}\n\n        <Button onClick={showDeleteModal} variant=\"destructive\">\n          <Trans i18nKey=\"browse-dashboards.action.delete-button\">Delete</Trans>\n        </Button>\n      </Stack>\n      {/* bulk delete */}\n      {showBulkDeleteProvisionedResource && (\n        <Drawer\n          title={t('browse-dashboards.action.bulk-delete-provisioned-resources', 'Bulk Delete Provisioned Resources')}\n          onClose={() => setShowBulkDeleteProvisionedResource(false)}\n          size=\"md\"\n        >\n          <BulkDeleteProvisionedResource\n            selectedItems={selectedItems}\n            folderUid={folderDTO?.uid || ''}\n            onDismiss={() => {\n              setShowBulkDeleteProvisionedResource(false);\n            }}\n          />\n        </Drawer>\n      )}\n\n      {/* bulk move */}\n      {showBulkMoveProvisionedResource && (\n        <Drawer\n          title={t('browse-dashboards.action.bulk-move-provisioned-resources', 'Bulk Move Provisioned Resources')}\n          onClose={() => setShowBulkMoveProvisionedResource(false)}\n          size=\"md\"\n        >\n          <BulkMoveProvisionedResource\n            selectedItems={selectedItems}\n            folderUid={folderDTO?.uid}\n            onDismiss={() => {\n              setShowBulkMoveProvisionedResource(false);\n            }}\n          />\n        </Drawer>\n      )}\n    </>\n  );\n}\n\nconst actionMap = {\n  move: 'grafana_manage_dashboards_item_moved',\n  delete: 'grafana_manage_dashboards_item_deleted',\n} as const;\n\nfunction trackAction(action: keyof typeof actionMap, selectedItems: Omit<DashboardTreeSelection, 'panel' | '$all'>) {\n  const selectedDashboards = Object.keys(selectedItems.dashboard).filter((uid) => selectedItems.dashboard[uid]);\n  const selectedFolders = Object.keys(selectedItems.folder).filter((uid) => selectedItems.folder[uid]);\n\n  reportInteraction(actionMap[action], {\n    item_counts: {\n      folder: selectedFolders.length,\n      dashboard: selectedDashboards.length,\n    },\n    source: 'tree_actions',\n    restore_enabled: Boolean(config.featureToggles.restoreDashboards),\n  });\n}\n","import { ActionRow } from 'app/features/search/page/components/ActionRow';\nimport { getGrafanaSearcher } from 'app/features/search/service/searcher';\nimport { useSearchStateManager } from 'app/features/search/state/SearchStateManager';\n\nexport function BrowseFilters() {\n  const [searchState, stateManager] = useSearchStateManager();\n\n  return (\n    <ActionRow\n      showStarredFilter\n      showLayout\n      state={searchState}\n      getTagOptions={stateManager.getTagOptions}\n      getSortOptions={getGrafanaSearcher().getSortOptions}\n      sortPlaceholder={getGrafanaSearcher().sortPlaceholder}\n      onLayoutChange={stateManager.onLayoutChange}\n      onStarredFilterChange={stateManager.onStarredFilterChange}\n      onSortChange={stateManager.onSortChange}\n      onTagFilterChange={stateManager.onTagFilterChange}\n      onDatasourceChange={stateManager.onDatasourceChange}\n      onPanelTypeChange={stateManager.onPanelTypeChange}\n      onSetIncludePanels={stateManager.onSetIncludePanels}\n    />\n  );\n}\n","import { CellProps, Column, HeaderProps } from 'react-table';\n\nimport { DashboardViewItem, DashboardViewItemKind } from 'app/features/search/types';\n\n/**\n * Object of what is selected in the tree. It is record where keys are categories from DashboardViewItemKind and\n * each category is a record where the key is the UID of the object and value is whether it is selected or not.\n */\nexport type DashboardTreeSelection = Record<DashboardViewItemKind, Record<string, boolean | undefined>> & {\n  $all: boolean;\n};\n\n/**\n * Stores children at a particular location in the tree, and information\n * required for pagination.\n */\nexport type DashboardViewItemCollection = {\n  items: DashboardViewItem[];\n  lastFetchedKind: 'folder' | 'dashboard';\n  lastFetchedPage: number;\n  lastKindHasMoreItems: boolean;\n  isFullyLoaded: boolean;\n};\n\nexport interface BrowseDashboardsState {\n  rootItems: DashboardViewItemCollection | undefined;\n  childrenByParentUID: Record<string, DashboardViewItemCollection | undefined>;\n  selectedItems: DashboardTreeSelection;\n\n  // Only folders can ever be open or closed, so no need to seperate this by kind\n  openFolders: Record<string, boolean>;\n}\n\nexport interface UIDashboardViewItem {\n  kind: 'ui';\n  uiKind: 'empty-folder' | 'pagination-placeholder' | 'divider';\n  uid: string;\n}\n\nexport type DashboardViewItemWithUIItems = DashboardViewItem | UIDashboardViewItem;\n\nexport interface DashboardsTreeItem<T extends DashboardViewItemWithUIItems = DashboardViewItemWithUIItems> {\n  item: T;\n  level: number;\n  isOpen: boolean;\n  parentUID?: string;\n}\n\ninterface RendererUserProps {\n  // Note: userProps for cell renderers (e.g. second argument in `cell.render('Cell', foo)` )\n  // aren't typed, so we must be careful when accessing this\n  isSelected?: (kind: DashboardViewItem | '$all') => SelectionState;\n  onAllSelectionChange?: (newState: boolean) => void;\n  onItemSelectionChange?: (item: DashboardViewItem, newState: boolean) => void;\n  treeID?: string;\n  permissions?: BrowseDashboardsPermissions;\n}\n\nexport type DashboardsTreeColumn = Column<DashboardsTreeItem>;\nexport type DashboardsTreeCellProps = CellProps<DashboardsTreeItem, unknown> & RendererUserProps;\nexport type DashboardTreeHeaderProps = HeaderProps<DashboardsTreeItem> & RendererUserProps;\n\nexport enum SelectionState {\n  Unselected,\n  Selected,\n  Mixed,\n}\n\nexport interface BrowseDashboardsPermissions {\n  canEditFolders: boolean;\n  canEditDashboards: boolean;\n  canDeleteFolders?: boolean;\n  canDeleteDashboards?: boolean;\n  isReadOnlyRepo?: boolean;\n}\n","import { css } from '@emotion/css';\n\nimport { GrafanaTheme2 } from '@grafana/data';\nimport { selectors } from '@grafana/e2e-selectors';\nimport { t } from '@grafana/i18n';\nimport { Checkbox, Tooltip, useStyles2 } from '@grafana/ui';\nimport { ManagerKind } from 'app/features/apiserver/types';\nimport { useIsProvisionedInstance } from 'app/features/provisioning/hooks/useIsProvisionedInstance';\nimport { useSelectionRepoValidation } from 'app/features/provisioning/hooks/useSelectionRepoValidation';\nimport { getReadOnlyTooltipText } from 'app/features/provisioning/utils/repository';\nimport { useSelector } from 'app/types/store';\n\nimport { DashboardsTreeCellProps, SelectionState } from '../types';\n\nimport { isSharedWithMe, canEditItemType } from './utils';\n\nexport default function CheckboxCell({\n  row: { original: row },\n  isSelected,\n  onItemSelectionChange,\n  permissions,\n}: DashboardsTreeCellProps) {\n  const item = row.item;\n\n  // Get current selection state for repository validation\n  const selectedItems = useSelector((state) => state.browseDashboards.selectedItems);\n  const { selectedItemsRepoUID, isInLockedRepo, isUidInReadOnlyRepo } = useSelectionRepoValidation(selectedItems);\n  const isProvisionedInstance = useIsProvisionedInstance();\n\n  // Early returns for cases where we should show a spacer instead of checkbox\n  if (!isSelected) {\n    return <CheckboxSpacer />;\n  }\n\n  if (item.kind === 'ui') {\n    if (item.uiKind === 'pagination-placeholder') {\n      return <Checkbox disabled value={false} />;\n    } else {\n      return <CheckboxSpacer />;\n    }\n  }\n\n  if (isSharedWithMe(item.uid)) {\n    return <CheckboxSpacer />;\n  }\n\n  // Disable the checkbox for the root provisioned folder (if the entire instance is not provisioned)\n  if (!isProvisionedInstance && item.managedBy === ManagerKind.Repo && !item.parentUID) {\n    return <CheckboxSpacer />;\n  }\n\n  if ((permissions && permissions.isReadOnlyRepo) || isUidInReadOnlyRepo(item.uid)) {\n    // When the folder is read-only (inherited from repository), disable checkbox with tooltip\n    return (\n      <Tooltip content={getReadOnlyTooltipText({})}>\n        <span>\n          <Checkbox disabled value={false} />\n        </span>\n      </Tooltip>\n    );\n  }\n\n  // Check if user can edit this specific item type\n  if (permissions && !canEditItemType(item.kind, permissions)) {\n    return <CheckboxSpacer />;\n  }\n\n  // check if current item uid has different repo uid than selected items\n  if (selectedItemsRepoUID && !isInLockedRepo(item.uid)) {\n    return (\n      <Tooltip\n        content={t(\n          'browse-dashboards.dashboards-tree.checkbox.disabled-not-in-same-repo',\n          'This item is not in the same repository as the selected items.'\n        )}\n      >\n        <span>\n          <Checkbox disabled value={false} />\n        </span>\n      </Tooltip>\n    );\n  }\n\n  const state = isSelected(item);\n\n  return (\n    <Checkbox\n      data-testid={selectors.pages.BrowseDashboards.table.checkbox(item.uid)}\n      aria-label={t('browse-dashboards.dashboards-tree.select-checkbox', 'Select')}\n      value={state === SelectionState.Selected}\n      indeterminate={state === SelectionState.Mixed}\n      onChange={(ev) => onItemSelectionChange?.(item, ev.currentTarget.checked)}\n    />\n  );\n}\n\nfunction CheckboxSpacer() {\n  const styles = useStyles2(getStyles);\n  return <span className={styles.checkboxSpacer} />;\n}\n\nconst getStyles = (theme: GrafanaTheme2) => ({\n  // Should be the same size as the <IconButton /> so Dashboard name is aligned to Folder name siblings\n  checkboxSpacer: css({\n    paddingLeft: theme.spacing(2),\n  }),\n});\n","import { t } from '@grafana/i18n';\nimport { Checkbox } from '@grafana/ui';\n\nimport { DashboardTreeHeaderProps, SelectionState } from '../types';\n\nexport default function CheckboxHeaderCell({\n  isSelected,\n  onAllSelectionChange,\n  permissions,\n}: DashboardTreeHeaderProps) {\n  const state = isSelected?.('$all') ?? SelectionState.Unselected;\n  const isReadOnlyRepo = permissions?.isReadOnlyRepo;\n\n  return (\n    <Checkbox\n      disabled={isReadOnlyRepo}\n      value={state === SelectionState.Selected}\n      indeterminate={state === SelectionState.Mixed}\n      aria-label={t('browse-dashboards.dashboards-tree.select-all-header-checkbox', 'Select all')}\n      onChange={(ev) => {\n        if (state === SelectionState.Mixed) {\n          // Ensure clicking an indeterminate checkbox always clears the selection\n          onAllSelectionChange?.(false);\n        } else {\n          onAllSelectionChange?.(ev.currentTarget.checked);\n        }\n      }}\n    />\n  );\n}\n","import { css } from '@emotion/css';\nimport Skeleton from 'react-loading-skeleton';\n\nimport { GrafanaTheme2 } from '@grafana/data';\nimport { Trans, t } from '@grafana/i18n';\nimport { reportInteraction } from '@grafana/runtime';\nimport { Icon, IconButton, Link, Spinner, useStyles2, Text } from '@grafana/ui';\nimport { getSvgSize } from '@grafana/ui/internal';\nimport { getIconForItem } from 'app/features/search/service/utils';\n\nimport { Indent } from '../../../core/components/Indent/Indent';\nimport { FolderRepo } from '../../../core/components/NestedFolderPicker/FolderRepo';\nimport { useChildrenByParentUIDState } from '../state/hooks';\nimport { DashboardsTreeCellProps } from '../types';\n\nimport { makeRowID } from './utils';\n\nconst CHEVRON_SIZE = 'md';\nconst ICON_SIZE = 'sm';\n\ntype NameCellProps = DashboardsTreeCellProps & {\n  onFolderClick: (uid: string, newOpenState: boolean) => void;\n};\n\nexport function NameCell({ row: { original: data }, onFolderClick, treeID }: NameCellProps) {\n  const styles = useStyles2(getStyles);\n  const { item, level, isOpen } = data;\n  const childrenByParentUID = useChildrenByParentUIDState();\n\n  const isLoading = isOpen && !childrenByParentUID[item.uid];\n  const iconName = getIconForItem(data.item, isOpen);\n\n  if (item.kind === 'ui') {\n    return (\n      <>\n        <Indent\n          level={level}\n          spacing={{\n            xs: 1,\n            md: 3,\n          }}\n        />\n        <span className={styles.folderButtonSpacer} />\n        {item.uiKind === 'empty-folder' ? (\n          <em className={styles.emptyText}>\n            <Text variant=\"body\" color=\"secondary\" truncate>\n              <Trans i18nKey=\"browse-dashboards.name-cell.no-items\">No items</Trans>\n            </Text>\n          </em>\n        ) : (\n          <Skeleton width={200} />\n        )}\n      </>\n    );\n  }\n\n  return (\n    <>\n      <Indent\n        level={level}\n        spacing={{\n          xs: 1,\n          md: 3,\n        }}\n      />\n\n      {item.kind === 'folder' ? (\n        <IconButton\n          size={CHEVRON_SIZE}\n          className={styles.chevron}\n          onClick={() => {\n            onFolderClick(item.uid, !isOpen);\n          }}\n          name={isOpen ? 'angle-down' : 'angle-right'}\n          aria-label={\n            isOpen\n              ? t('browse-dashboards.dashboards-tree.collapse-folder-button', 'Collapse folder {{title}}', {\n                  title: item.title,\n                })\n              : t('browse-dashboards.dashboards-tree.expand-folder-button', 'Expand folder {{title}}', {\n                  title: item.title,\n                })\n          }\n        />\n      ) : (\n        <span className={styles.folderButtonSpacer} />\n      )}\n\n      <div className={styles.iconNameContainer}>\n        {isLoading ? <Spinner size={ICON_SIZE} /> : <Icon size={ICON_SIZE} name={iconName} />}\n\n        <Text variant=\"body\" truncate id={treeID && makeRowID(treeID, item)}>\n          {item.url ? (\n            <Link\n              onClick={() => {\n                reportInteraction('manage_dashboards_result_clicked');\n              }}\n              href={item.url}\n              className={styles.link}\n            >\n              {item.title}\n            </Link>\n          ) : (\n            item.title\n          )}\n        </Text>\n\n        <FolderRepo folder={item} />\n      </div>\n    </>\n  );\n}\n\nconst getStyles = (theme: GrafanaTheme2) => {\n  return {\n    chevron: css({\n      marginRight: theme.spacing(1),\n      width: getSvgSize(CHEVRON_SIZE),\n    }),\n    emptyText: css({\n      // needed for text to truncate correctly\n      overflow: 'hidden',\n    }),\n    // Should be the same size as the <IconButton /> so Dashboard name is aligned to Folder name siblings\n    folderButtonSpacer: css({\n      paddingLeft: `calc(${getSvgSize(CHEVRON_SIZE)}px + ${theme.spacing(1)})`,\n    }),\n    iconNameContainer: css({\n      alignItems: 'center',\n      display: 'flex',\n      gap: theme.spacing(1),\n      overflow: 'hidden',\n    }),\n    link: css({\n      '&:hover': {\n        textDecoration: 'underline',\n      },\n    }),\n  };\n};\n","import { css } from '@emotion/css';\nimport { CellProps } from 'react-table';\n\nimport { GrafanaTheme2 } from '@grafana/data';\nimport { TagList, useStyles2 } from '@grafana/ui';\n\nimport { DashboardsTreeItem } from '../types';\n\nexport function TagsCell({ row: { original: data } }: CellProps<DashboardsTreeItem, unknown>) {\n  const styles = useStyles2(getStyles);\n  const item = data.item;\n\n  if (item.kind === 'ui') {\n    if (item.uiKind === 'pagination-placeholder') {\n      return <TagList.Skeleton />;\n    } else {\n      return null;\n    }\n  }\n\n  if (!item.tags) {\n    return null;\n  }\n\n  return <TagList className={styles.tagList} tags={item.tags} />;\n}\n\nfunction getStyles(theme: GrafanaTheme2) {\n  return {\n    // TagList is annoying and has weird default alignment\n    tagList: css({\n      justifyContent: 'flex-start',\n      flexWrap: 'nowrap',\n    }),\n  };\n}\n","import { css, cx } from '@emotion/css';\nimport { useCallback, useEffect, useId, useMemo, useRef } from 'react';\nimport * as React from 'react';\nimport { TableInstance, useTable } from 'react-table';\nimport { VariableSizeList as List } from 'react-window';\nimport InfiniteLoader from 'react-window-infinite-loader';\n\nimport { GrafanaTheme2, isTruthy } from '@grafana/data';\nimport { selectors } from '@grafana/e2e-selectors';\nimport { Trans, t } from '@grafana/i18n';\nimport { useStyles2 } from '@grafana/ui';\nimport { DashboardViewItem } from 'app/features/search/types';\n\nimport {\n  DashboardsTreeCellProps,\n  DashboardsTreeColumn,\n  DashboardsTreeItem,\n  SelectionState,\n  BrowseDashboardsPermissions,\n} from '../types';\n\nimport CheckboxCell from './CheckboxCell';\nimport CheckboxHeaderCell from './CheckboxHeaderCell';\nimport { NameCell } from './NameCell';\nimport { TagsCell } from './TagsCell';\nimport { useCustomFlexLayout } from './customFlexTableLayout';\nimport { makeRowID, canSelectItems } from './utils';\n\ninterface DashboardsTreeProps {\n  items: DashboardsTreeItem[];\n  width: number;\n  height: number;\n  permissions: BrowseDashboardsPermissions;\n  isSelected: (kind: DashboardViewItem | '$all') => SelectionState;\n  onFolderClick: (uid: string, newOpenState: boolean) => void;\n  onAllSelectionChange: (newState: boolean) => void;\n  onItemSelectionChange: (item: DashboardViewItem, newState: boolean) => void;\n\n  isItemLoaded: (itemIndex: number) => boolean;\n  requestLoadMore: (folderUid: string | undefined) => void;\n}\n\nconst HEADER_HEIGHT = 36;\nconst ROW_HEIGHT = 36;\nconst DIVIDER_HEIGHT = 0; // Yes - make it appear as a border on the row rather than a row itself\n\nexport function DashboardsTree({\n  items,\n  width,\n  height,\n  isSelected,\n  onFolderClick,\n  onAllSelectionChange,\n  onItemSelectionChange,\n  isItemLoaded,\n  requestLoadMore,\n  permissions,\n}: DashboardsTreeProps) {\n  const treeID = useId();\n\n  const infiniteLoaderRef = useRef<InfiniteLoader>(null);\n  const listRef = useRef<List | null>(null);\n  const styles = useStyles2(getStyles);\n\n  useEffect(() => {\n    // If the tree changed identity, then some indexes that were previously loaded may now be unloaded,\n    // especially after a refetch after a move/delete.\n    // Clear that cache, and check if we need to trigger another load\n    if (infiniteLoaderRef.current) {\n      infiniteLoaderRef.current.resetloadMoreItemsCache(true);\n    }\n\n    if (listRef.current) {\n      listRef.current.resetAfterIndex(0);\n    }\n  }, [items]);\n\n  const tableColumns = useMemo(() => {\n    const checkboxColumn: DashboardsTreeColumn = {\n      id: 'checkbox',\n      width: 0,\n      Header: CheckboxHeaderCell,\n      Cell: CheckboxCell,\n    };\n\n    const nameColumn: DashboardsTreeColumn = {\n      id: 'name',\n      width: 3,\n      Header: (\n        <span style={{ paddingLeft: 24 }}>\n          <Trans i18nKey=\"browse-dashboards.dashboards-tree.name-column\">Name</Trans>\n        </span>\n      ),\n      Cell: (props: DashboardsTreeCellProps) => <NameCell {...props} onFolderClick={onFolderClick} />,\n    };\n\n    const tagsColumns: DashboardsTreeColumn = {\n      id: 'tags',\n      width: 2,\n      Header: t('browse-dashboards.dashboards-tree.tags-column', 'Tags'),\n      Cell: TagsCell,\n    };\n    const canSelect = canSelectItems(permissions);\n    const columns = [canSelect && checkboxColumn, nameColumn, tagsColumns].filter(isTruthy);\n\n    return columns;\n  }, [onFolderClick, permissions]);\n\n  const table = useTable({ columns: tableColumns, data: items }, useCustomFlexLayout);\n  const { getTableProps, getTableBodyProps, headerGroups } = table;\n\n  const virtualData = useMemo(\n    () => ({\n      table,\n      isSelected,\n      onAllSelectionChange,\n      onItemSelectionChange,\n      treeID,\n      permissions,\n    }),\n    // we need this to rerender if items changes\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [table, isSelected, onAllSelectionChange, onItemSelectionChange, items, treeID, permissions]\n  );\n\n  const handleIsItemLoaded = useCallback(\n    (itemIndex: number) => {\n      return isItemLoaded(itemIndex);\n    },\n    [isItemLoaded]\n  );\n\n  const handleLoadMore = useCallback(\n    (startIndex: number, endIndex: number) => {\n      const { parentUID } = items[startIndex];\n      requestLoadMore(parentUID);\n    },\n    [requestLoadMore, items]\n  );\n\n  const getRowHeight = useCallback(\n    (rowIndex: number) => {\n      const row = items[rowIndex];\n      if (row.item.kind === 'ui' && row.item.uiKind === 'divider') {\n        return DIVIDER_HEIGHT;\n      }\n\n      return ROW_HEIGHT;\n    },\n    [items]\n  );\n\n  return (\n    <div {...getTableProps()} role=\"table\">\n      {headerGroups.map((headerGroup) => {\n        const { key, ...headerGroupProps } = headerGroup.getHeaderGroupProps({\n          style: { width },\n        });\n\n        return (\n          <div key={key} {...headerGroupProps} className={cx(styles.row, styles.headerRow)}>\n            {headerGroup.headers.map((column) => {\n              const { key, ...headerProps } = column.getHeaderProps();\n\n              return (\n                <div key={key} {...headerProps} role=\"columnheader\" className={styles.cell}>\n                  {column.render('Header', { isSelected, onAllSelectionChange, permissions })}\n                </div>\n              );\n            })}\n          </div>\n        );\n      })}\n\n      <div {...getTableBodyProps()} data-testid={selectors.pages.BrowseDashboards.table.body}>\n        <InfiniteLoader\n          ref={infiniteLoaderRef}\n          itemCount={items.length}\n          isItemLoaded={handleIsItemLoaded}\n          loadMoreItems={handleLoadMore}\n        >\n          {({ onItemsRendered, ref }) => (\n            <List\n              ref={(elem) => {\n                ref(elem);\n                listRef.current = elem;\n              }}\n              height={height - HEADER_HEIGHT}\n              width={width}\n              itemCount={items.length}\n              itemData={virtualData}\n              estimatedItemSize={ROW_HEIGHT}\n              itemSize={getRowHeight}\n              onItemsRendered={onItemsRendered}\n            >\n              {VirtualListRow}\n            </List>\n          )}\n        </InfiniteLoader>\n      </div>\n    </div>\n  );\n}\n\ninterface VirtualListRowProps {\n  index: number;\n  style: React.CSSProperties;\n  data: {\n    table: TableInstance<DashboardsTreeItem>;\n    isSelected: DashboardsTreeCellProps['isSelected'];\n    onAllSelectionChange: DashboardsTreeCellProps['onAllSelectionChange'];\n    onItemSelectionChange: DashboardsTreeCellProps['onItemSelectionChange'];\n    treeID: string;\n    permissions: BrowseDashboardsPermissions;\n  };\n}\n\nfunction VirtualListRow({ index, style, data }: VirtualListRowProps) {\n  const styles = useStyles2(getStyles);\n  const { table, isSelected, onItemSelectionChange, treeID, permissions } = data;\n  const { rows, prepareRow } = table;\n\n  const row = rows[index];\n  prepareRow(row);\n\n  const dashboardItem = row.original.item;\n  const { key, ...rowProps } = row.getRowProps({ style });\n\n  if (dashboardItem.kind === 'ui' && dashboardItem.uiKind === 'divider') {\n    return (\n      <div key={key} {...rowProps}>\n        <hr className={styles.divider} />\n      </div>\n    );\n  }\n\n  return (\n    <div\n      key={key}\n      {...rowProps}\n      className={cx(styles.row, styles.bodyRow)}\n      aria-labelledby={makeRowID(treeID, dashboardItem)}\n      data-testid={selectors.pages.BrowseDashboards.table.row(\n        'title' in dashboardItem ? dashboardItem.title : dashboardItem.uid\n      )}\n    >\n      {row.cells.map((cell) => {\n        const { key, ...cellProps } = cell.getCellProps();\n\n        return (\n          <div key={key} {...cellProps} className={styles.cell}>\n            {cell.render('Cell', { isSelected, onItemSelectionChange, treeID, permissions })}\n          </div>\n        );\n      })}\n    </div>\n  );\n}\n\nconst getStyles = (theme: GrafanaTheme2) => {\n  return {\n    // Column flex properties (cell sizing) are set by customFlexTableLayout.ts\n\n    row: css({\n      gap: theme.spacing(1),\n    }),\n\n    divider: css({\n      borderTop: `1px solid ${theme.colors.border.weak}`,\n      width: '100%',\n      margin: 0,\n    }),\n\n    headerRow: css({\n      backgroundColor: theme.colors.background.secondary,\n      height: HEADER_HEIGHT,\n    }),\n\n    bodyRow: css({\n      height: ROW_HEIGHT,\n\n      '&:hover': {\n        backgroundColor: theme.colors.action.hover,\n      },\n    }),\n\n    cell: css({\n      padding: theme.spacing(1),\n      overflow: 'hidden', // Required so flex children can do text-overflow: ellipsis\n      display: 'flex',\n      alignItems: 'center',\n    }),\n\n    link: css({\n      '&:hover': {\n        textDecoration: 'underline',\n      },\n    }),\n  };\n};\n","import { skipToken } from '@reduxjs/toolkit/query';\nimport { useCallback, useMemo } from 'react';\n\nimport { OrgRole } from '@grafana/data';\nimport { Trans, t } from '@grafana/i18n';\nimport { config } from '@grafana/runtime';\nimport { CallToActionCard, EmptyState, LinkButton, TextLink } from '@grafana/ui';\nimport { useGetFrontendSettingsQuery } from 'app/api/clients/provisioning/v0alpha1';\nimport { contextSrv } from 'app/core/core';\nimport { useIsProvisionedInstance } from 'app/features/provisioning/hooks/useIsProvisionedInstance';\nimport { DashboardViewItem } from 'app/features/search/types';\nimport { useDispatch, useSelector } from 'app/types/store';\n\nimport { PAGE_SIZE } from '../api/services';\nimport { fetchNextChildrenPage } from '../state/actions';\nimport {\n  useFlatTreeState,\n  useCheckboxSelectionState,\n  useChildrenByParentUIDState,\n  useBrowseLoadingStatus,\n  useLoadNextChildrenPage,\n  rootItemsSelector,\n} from '../state/hooks';\nimport { setFolderOpenState, setItemSelectionState, setAllSelection } from '../state/slice';\nimport { BrowseDashboardsState, DashboardTreeSelection, SelectionState, BrowseDashboardsPermissions } from '../types';\n\nimport { DashboardsTree } from './DashboardsTree';\nimport { canSelectItems } from './utils';\n\ninterface BrowseViewProps {\n  height: number;\n  width: number;\n  folderUID: string | undefined;\n  permissions: BrowseDashboardsPermissions;\n}\n\nexport function BrowseView({ folderUID, width, height, permissions }: BrowseViewProps) {\n  const status = useBrowseLoadingStatus(folderUID);\n  const dispatch = useDispatch();\n  const flatTree = useFlatTreeState(folderUID);\n  const selectedItems = useCheckboxSelectionState();\n  const childrenByParentUID = useChildrenByParentUIDState();\n  const canSelect = canSelectItems(permissions);\n  const isProvisionedInstance = useIsProvisionedInstance();\n  const provisioningEnabled = config.featureToggles.provisioning;\n  const hasNoRole = contextSrv.user.orgRole === OrgRole.None;\n  const { data: settingsData } = useGetFrontendSettingsQuery(!provisioningEnabled || hasNoRole ? skipToken : undefined);\n  const rootItems = useSelector(rootItemsSelector);\n\n  const excludeUIDs = useMemo(() => {\n    if (isProvisionedInstance || !provisioningEnabled) {\n      return [];\n    }\n    if (provisioningEnabled) {\n      // if only one repo folder and no local folders, then don't exclude it from selection\n      if (rootItems?.items.length === 1 && settingsData?.items.length === 1) {\n        return [];\n      }\n      // loop through settingsData to find all available repo name, and exclude them from select all action\n      // repo root folder is not actionable on browse dashboards page\n      return settingsData?.items.map((repo) => repo.name);\n    }\n\n    return [];\n  }, [isProvisionedInstance, settingsData, provisioningEnabled, rootItems]);\n\n  const handleFolderClick = useCallback(\n    (clickedFolderUID: string, isOpen: boolean) => {\n      dispatch(setFolderOpenState({ folderUID: clickedFolderUID, isOpen }));\n\n      if (isOpen) {\n        dispatch(fetchNextChildrenPage({ parentUID: clickedFolderUID, pageSize: PAGE_SIZE }));\n      }\n    },\n    [dispatch]\n  );\n\n  const handleItemSelectionChange = useCallback(\n    (item: DashboardViewItem, isSelected: boolean) => {\n      dispatch(setItemSelectionState({ item, isSelected }));\n    },\n    [dispatch]\n  );\n\n  const isSelected = useCallback(\n    (item: DashboardViewItem | '$all'): SelectionState => {\n      if (item === '$all') {\n        // We keep the boolean $all state up to date in redux, so we can short-circut\n        // the logic if we know this has been selected\n        if (selectedItems.$all) {\n          return SelectionState.Selected;\n        }\n\n        // Otherwise, if we have any selected items, then it should be in 'mixed' state\n        for (const selection of Object.values(selectedItems)) {\n          if (typeof selection === 'boolean') {\n            continue;\n          }\n\n          for (const uid in selection) {\n            const isSelected = selection[uid];\n            if (isSelected) {\n              return SelectionState.Mixed;\n            }\n          }\n        }\n\n        // Otherwise otherwise, nothing is selected and header should be unselected\n        return SelectionState.Unselected;\n      }\n\n      const isSelected = selectedItems[item.kind][item.uid];\n      if (isSelected) {\n        return SelectionState.Selected;\n      }\n\n      // Because if _all_ children, then the parent is selected (and bailed in the previous check),\n      // this .some check will only return true if the children are partially selected\n      const isMixed = hasSelectedDescendants(item, childrenByParentUID, selectedItems);\n      if (isMixed) {\n        return SelectionState.Mixed;\n      }\n\n      return SelectionState.Unselected;\n    },\n    [selectedItems, childrenByParentUID]\n  );\n\n  const isItemLoaded = useCallback(\n    (itemIndex: number) => {\n      const treeItem = flatTree[itemIndex];\n      if (!treeItem) {\n        return false;\n      }\n      const item = treeItem.item;\n      const result = !(item.kind === 'ui' && item.uiKind === 'pagination-placeholder');\n\n      return result;\n    },\n    [flatTree]\n  );\n\n  const handleLoadMore = useLoadNextChildrenPage();\n\n  if (status === 'fulfilled' && flatTree.length === 0) {\n    return (\n      <div style={{ width }}>\n        {canSelect ? (\n          <EmptyState\n            variant=\"call-to-action\"\n            button={\n              <LinkButton\n                href={folderUID ? `dashboard/new?folderUid=${folderUID}` : 'dashboard/new'}\n                icon=\"plus\"\n                size=\"lg\"\n              >\n                <Trans i18nKey=\"browse-dashboards.empty-state.button-title\">Create dashboard</Trans>\n              </LinkButton>\n            }\n            message={\n              folderUID\n                ? t('browse-dashboards.empty-state.title-folder', \"This folder doesn't have any dashboards yet\")\n                : t('browse-dashboards.empty-state.title', \"You haven't created any dashboards yet\")\n            }\n          >\n            {folderUID && (\n              <Trans i18nKey=\"browse-dashboards.empty-state.pro-tip\">\n                Add/move dashboards to your folder at{' '}\n                <TextLink external={false} href=\"/dashboards\">\n                  Browse dashboards\n                </TextLink>\n              </Trans>\n            )}\n          </EmptyState>\n        ) : (\n          <CallToActionCard\n            callToActionElement={\n              <span>\n                <Trans i18nKey=\"browse-dashboards.browse-view.this-folder-is-empty\">This folder is empty</Trans>\n              </span>\n            }\n          />\n        )}\n      </div>\n    );\n  }\n\n  return (\n    <DashboardsTree\n      permissions={permissions}\n      items={flatTree}\n      width={width}\n      height={height}\n      isSelected={isSelected}\n      onFolderClick={handleFolderClick}\n      onAllSelectionChange={(newState) => dispatch(setAllSelection({ isSelected: newState, folderUID, excludeUIDs }))}\n      onItemSelectionChange={handleItemSelectionChange}\n      isItemLoaded={isItemLoaded}\n      requestLoadMore={handleLoadMore}\n    />\n  );\n}\n\nfunction hasSelectedDescendants(\n  item: DashboardViewItem,\n  childrenByParentUID: BrowseDashboardsState['childrenByParentUID'],\n  selectedItems: DashboardTreeSelection\n): boolean {\n  const collection = childrenByParentUID[item.uid];\n  if (!collection) {\n    return false;\n  }\n\n  return collection.items.some((v) => {\n    const thisIsSelected = selectedItems[v.kind][v.uid];\n    if (thisIsSelected) {\n      return thisIsSelected;\n    }\n\n    return hasSelectedDescendants(v, childrenByParentUID, selectedItems);\n  });\n}\n","import { FormProvider, useForm } from 'react-hook-form';\nimport { useNavigate } from 'react-router-dom-v5-compat';\n\nimport { AppEvents } from '@grafana/data';\nimport { Trans, t } from '@grafana/i18n';\nimport { getAppEvents } from '@grafana/runtime';\nimport { Alert, Button, Field, Input, Stack } from '@grafana/ui';\nimport { Folder } from 'app/api/clients/folder/v1beta1';\nimport { RepositoryView, useCreateRepositoryFilesWithPathMutation } from 'app/api/clients/provisioning/v0alpha1';\nimport { AnnoKeySourcePath, Resource } from 'app/features/apiserver/types';\nimport { PROVISIONING_URL } from 'app/features/provisioning/constants';\nimport { usePullRequestParam } from 'app/features/provisioning/hooks/usePullRequestParam';\nimport { FolderDTO } from 'app/types/folders';\n\nimport { useProvisionedFolderFormData } from '../../hooks/useProvisionedFolderFormData';\nimport { ProvisionedOperationInfo, useProvisionedRequestHandler } from '../../hooks/useProvisionedRequestHandler';\nimport { BaseProvisionedFormData } from '../../types/form';\nimport { buildResourceBranchRedirectUrl } from '../../utils/redirect';\nimport { RepoInvalidStateBanner } from '../Shared/RepoInvalidStateBanner';\nimport { ResourceEditFormSharedFields } from '../Shared/ResourceEditFormSharedFields';\n\ninterface FormProps extends Props {\n  initialValues: BaseProvisionedFormData;\n  repository?: RepositoryView;\n  workflowOptions: Array<{ label: string; value: string }>;\n  folder?: Folder;\n}\ninterface Props {\n  parentFolder?: FolderDTO;\n  onDismiss?: () => void;\n}\n\nfunction FormContent({ initialValues, repository, workflowOptions, folder, onDismiss }: FormProps) {\n  const { prURL } = usePullRequestParam();\n  const navigate = useNavigate();\n  const [create, request] = useCreateRepositoryFilesWithPathMutation();\n\n  const methods = useForm<BaseProvisionedFormData>({\n    defaultValues: initialValues,\n    mode: 'onBlur', // Validates when user leaves the field\n  });\n  const { handleSubmit, watch, register, formState } = methods;\n\n  const [workflow] = watch(['workflow']);\n\n  const onBranchSuccess = ({ urls }: { urls?: Record<string, string> }, info: ProvisionedOperationInfo) => {\n    const prUrl = urls?.newPullRequestURL;\n    if (prUrl) {\n      const url = buildResourceBranchRedirectUrl({\n        paramName: 'new_pull_request_url',\n        paramValue: prUrl,\n        repoType: info.repoType,\n      });\n      navigate(url);\n    }\n  };\n\n  const onWriteSuccess = (resource: Resource<FolderDTO>) => {\n    // Navigation for new folders (resource-specific concern)\n    if (resource?.metadata?.name) {\n      navigate(`/dashboards/f/${resource.metadata.name}/`);\n      return;\n    }\n\n    // Fallback to provisioning URL\n    if (repository?.name && request.data?.path) {\n      let url = `${PROVISIONING_URL}/${repository.name}/file/${request.data.path}`;\n      if (request.data.ref?.length) {\n        url += '?ref=' + request.data.ref;\n      }\n      navigate(url);\n    }\n  };\n\n  const onError = (error: unknown) => {\n    getAppEvents().publish({\n      type: AppEvents.alertError.name,\n      payload: [\n        t('browse-dashboards.new-provisioned-folder-form.alert-error-creating-folder', 'Error creating folder'),\n        error,\n      ],\n    });\n  };\n\n  // Use the repository-type and resource-type aware provisioned request handler\n  useProvisionedRequestHandler<FolderDTO>({\n    folderUID: folder?.metadata.name,\n    request,\n    workflow,\n    repository,\n    resourceType: 'folder',\n    handlers: {\n      onDismiss,\n      onBranchSuccess,\n      onWriteSuccess: (_, resource) => onWriteSuccess(resource),\n      onError,\n    },\n  });\n\n  const doSave = async ({ ref, title, workflow, comment }: BaseProvisionedFormData) => {\n    const repoName = repository?.name;\n    if (!title || !repoName) {\n      return;\n    }\n    const basePath = folder?.metadata?.annotations?.[AnnoKeySourcePath] ?? '';\n    const prefix = basePath ? `${basePath}/` : '';\n    const path = `${prefix}${title}/`;\n\n    const folderModel = {\n      title,\n      type: 'folder',\n    };\n\n    if (workflow === 'write') {\n      ref = undefined;\n    }\n\n    create({\n      ref,\n      name: repoName,\n      path,\n      message: comment || `Create folder: ${title}`,\n      body: folderModel,\n    });\n  };\n\n  return (\n    <FormProvider {...methods}>\n      <form onSubmit={handleSubmit(doSave)}>\n        <Stack direction=\"column\" gap={2}>\n          {!repository?.workflows?.length && (\n            <Alert\n              title={t(\n                'browse-dashboards.new-provisioned-folder-form.title-this-repository-is-read-only',\n                'This repository is read only'\n              )}\n            >\n              <Trans i18nKey=\"browse-dashboards.text-this-repository-is-read-only\">\n                If you have direct access to the target, copy the JSON and paste it there.\n              </Trans>\n            </Alert>\n          )}\n\n          <Field\n            noMargin\n            label={t('browse-dashboards.new-provisioned-folder-form.label-folder-name', 'Folder name')}\n            invalid={!!formState?.errors.title}\n            error={formState?.errors.title?.message}\n          >\n            <Input\n              {...register('title', {\n                required: t('browse-dashboards.new-provisioned-folder-form.error-required', 'Folder name is required'),\n                validate: validateProvisionedFolderName,\n              })}\n              placeholder={t(\n                'browse-dashboards.new-provisioned-folder-form.folder-name-input-placeholder-enter-folder-name',\n                'Enter folder name'\n              )}\n              id=\"folder-name-input\"\n            />\n          </Field>\n\n          <ResourceEditFormSharedFields\n            resourceType=\"folder\"\n            isNew\n            workflow={workflow}\n            workflowOptions={workflowOptions}\n            repository={repository}\n            hidePath\n          />\n\n          {prURL && (\n            <Alert\n              severity=\"info\"\n              title={t(\n                'browse-dashboards.new-provisioned-folder-form.title-pull-request-created',\n                'Pull request created'\n              )}\n            >\n              <Trans i18nKey=\"browse-dashboards.new-provisioned-folder-form.text-pull-request-created\">\n                A pull request has been created with changes to this folder:\n              </Trans>{' '}\n              <a href={prURL} target=\"_blank\" rel=\"noopener noreferrer\">\n                {prURL}\n              </a>\n            </Alert>\n          )}\n\n          <Stack gap={2}>\n            <Button variant=\"secondary\" fill=\"outline\" onClick={onDismiss}>\n              <Trans i18nKey=\"browse-dashboards.new-provisioned-folder-form.cancel\">Cancel</Trans>\n            </Button>\n            <Button type=\"submit\" disabled={request.isLoading || !!formState?.errors.title}>\n              {request.isLoading\n                ? t('browse-dashboards.new-provisioned-folder-form.button-creating', 'Creating...')\n                : t('browse-dashboards.new-provisioned-folder-form.button-create', 'Create')}\n            </Button>\n          </Stack>\n        </Stack>\n      </form>\n    </FormProvider>\n  );\n}\n\nexport function NewProvisionedFolderForm({ parentFolder, onDismiss }: Props) {\n  const { workflowOptions, repository, folder, initialValues, isReadOnlyRepo } = useProvisionedFolderFormData({\n    folderUid: parentFolder?.uid,\n    title: '', // Empty title for new folders\n  });\n\n  if (isReadOnlyRepo || !initialValues) {\n    return (\n      <RepoInvalidStateBanner\n        noRepository={!initialValues}\n        isReadOnlyRepo={isReadOnlyRepo}\n        readOnlyMessage={t(\n          'browse-dashboards.new-folder.read-only-message',\n          'To create this folder, please add the resource in your repository directly.'\n        )}\n      />\n    );\n  }\n\n  return (\n    <FormContent\n      parentFolder={parentFolder}\n      onDismiss={onDismiss}\n      initialValues={initialValues}\n      repository={repository}\n      workflowOptions={workflowOptions}\n      folder={folder}\n    />\n  );\n}\n\nfunction validateProvisionedFolderName(folderName: string): string | true {\n  if (!folderName || typeof folderName !== 'string') {\n    return t('browse-dashboards.new-provisioned-folder-form.error-required', 'Folder name is required');\n  }\n\n  // Backend allows: a-zA-Z0-9 _- (no dots, no forward slash for folder names)\n  const invalidCharRegex = /[^a-zA-Z0-9 _-]/;\n\n  if (invalidCharRegex.test(folderName)) {\n    return t(\n      'browse-dashboards.new-provisioned-folder-form.error-invalid-characters',\n      'Folder name contains invalid characters. Only letters, numbers, spaces, underscores, and hyphens are allowed.'\n    );\n  }\n\n  return true; // Valid\n}\n","import { useForm } from 'react-hook-form';\n\nimport { selectors } from '@grafana/e2e-selectors';\nimport { Trans, t } from '@grafana/i18n';\nimport { Button, Input, Field, Stack } from '@grafana/ui';\nimport { FolderDTO } from 'app/types/folders';\n\nimport { validationSrv } from '../../manage-dashboards/services/ValidationSrv';\n\ninterface Props {\n  onConfirm: (folderName: string) => void;\n  onCancel: () => void;\n  parentFolder?: FolderDTO;\n}\n\ninterface FormModel {\n  folderName: string;\n}\n\nconst initialFormModel: FormModel = { folderName: '' };\n\nexport function NewFolderForm({ onCancel, onConfirm, parentFolder }: Props) {\n  const {\n    handleSubmit,\n    register,\n    formState: { errors, isSubmitting },\n  } = useForm<FormModel>({ defaultValues: initialFormModel });\n\n  const translatedFolderNameRequiredPhrase = t(\n    'browse-dashboards.action.new-folder-name-required-phrase',\n    'Folder name is required.'\n  );\n\n  const fieldNameLabel = t('browse-dashboards.new-folder-form.name-label', 'Folder name');\n\n  return (\n    <form\n      name=\"addFolder\"\n      onSubmit={handleSubmit((form) => onConfirm(form.folderName))}\n      data-testid={selectors.pages.BrowseDashboards.NewFolderForm.form}\n    >\n      <Field\n        label={fieldNameLabel}\n        invalid={!!errors.folderName}\n        error={errors.folderName && errors.folderName.message}\n      >\n        <Input\n          data-testid={selectors.pages.BrowseDashboards.NewFolderForm.nameInput}\n          id=\"folder-name-input\"\n          defaultValue={initialFormModel.folderName}\n          {...register('folderName', {\n            required: translatedFolderNameRequiredPhrase,\n            validate: async (v) => await validateFolderName(v, parentFolder?.uid),\n          })}\n        />\n      </Field>\n      <Stack>\n        <Button variant=\"secondary\" fill=\"outline\" onClick={onCancel}>\n          <Trans i18nKey=\"browse-dashboards.new-folder-form.cancel-label\">Cancel</Trans>\n        </Button>\n        <Button type=\"submit\" disabled={isSubmitting}>\n          <Trans i18nKey=\"browse-dashboards.new-folder-form.create-label\">Create</Trans>\n        </Button>\n      </Stack>\n    </form>\n  );\n}\n\nexport async function validateFolderName(folderName: string, parentFolderUid?: string) {\n  try {\n    await validationSrv.validateNewFolderName(folderName, parentFolderUid);\n    return true;\n  } catch (e) {\n    if (e instanceof Error) {\n      return e.message;\n    } else {\n      throw e;\n    }\n  }\n}\n","import { useState } from 'react';\nimport { useLocation } from 'react-router-dom-v5-compat';\n\nimport { locationUtil } from '@grafana/data';\nimport { config, locationService, reportInteraction } from '@grafana/runtime';\nimport { Button, Drawer, Dropdown, Icon, Menu, MenuItem } from '@grafana/ui';\nimport { useCreateFolder } from 'app/api/clients/folder/v1beta1/hooks';\nimport { useAppNotification } from 'app/core/copy/appNotification';\nimport { RepoType } from 'app/features/provisioning/Wizard/types';\nimport { NewProvisionedFolderForm } from 'app/features/provisioning/components/Folders/NewProvisionedFolderForm';\nimport { useIsProvisionedInstance } from 'app/features/provisioning/hooks/useIsProvisionedInstance';\nimport { getReadOnlyTooltipText } from 'app/features/provisioning/utils/repository';\nimport {\n  getImportPhrase,\n  getNewDashboardPhrase,\n  getNewFolderPhrase,\n  getNewPhrase,\n} from 'app/features/search/tempI18nPhrases';\nimport { FolderDTO } from 'app/types/folders';\n\nimport { ManagerKind } from '../../apiserver/types';\n\nimport { NewFolderForm } from './NewFolderForm';\n\ninterface Props {\n  parentFolder?: FolderDTO;\n  canCreateFolder: boolean;\n  canCreateDashboard: boolean;\n  isReadOnlyRepo: boolean;\n  repoType?: RepoType;\n}\n\nexport default function CreateNewButton({\n  parentFolder,\n  canCreateDashboard,\n  canCreateFolder,\n  isReadOnlyRepo,\n  repoType,\n}: Props) {\n  const [isOpen, setIsOpen] = useState(false);\n  const location = useLocation();\n  const [newFolder] = useCreateFolder();\n  const [showNewFolderDrawer, setShowNewFolderDrawer] = useState(false);\n  const notifyApp = useAppNotification();\n  const isProvisionedInstance = useIsProvisionedInstance();\n\n  const onCreateFolder = async (folderName: string) => {\n    try {\n      const folder = await newFolder({\n        title: folderName,\n        parentUid: parentFolder?.uid,\n      });\n\n      const depth = parentFolder ? (parentFolder.parents?.length || 0) + 1 : 0;\n      reportInteraction('grafana_manage_dashboards_folder_created', {\n        is_subfolder: Boolean(parentFolder?.uid),\n        folder_depth: depth,\n      });\n\n      if (!folder.error) {\n        notifyApp.success('Folder created');\n      } else {\n        notifyApp.error('Failed to create folder');\n      }\n\n      if (folder.data) {\n        locationService.push(locationUtil.stripBaseFromUrl(folder.data.url));\n      }\n    } finally {\n      setShowNewFolderDrawer(false);\n    }\n  };\n\n  const newMenu = (\n    <Menu>\n      {canCreateDashboard && (\n        <MenuItem\n          label={getNewDashboardPhrase()}\n          onClick={() =>\n            reportInteraction('grafana_menu_item_clicked', {\n              url: buildUrl('/dashboard/new', parentFolder?.uid),\n              from: location.pathname,\n            })\n          }\n          url={buildUrl('/dashboard/new', parentFolder?.uid)}\n        />\n      )}\n      {canCreateFolder && <MenuItem onClick={() => setShowNewFolderDrawer(true)} label={getNewFolderPhrase()} />}\n      {canCreateDashboard && (\n        <MenuItem\n          label={getImportPhrase()}\n          onClick={() =>\n            reportInteraction('grafana_menu_item_clicked', {\n              url: buildUrl('/dashboard/import', parentFolder?.uid),\n              from: location.pathname,\n            })\n          }\n          url={buildUrl('/dashboard/import', parentFolder?.uid)}\n        />\n      )}\n    </Menu>\n  );\n\n  return (\n    <>\n      <Dropdown overlay={newMenu} onVisibleChange={setIsOpen}>\n        <Button\n          disabled={isReadOnlyRepo}\n          tooltip={isReadOnlyRepo ? getReadOnlyTooltipText({ isLocal: repoType === 'local' }) : undefined}\n          variant=\"secondary\"\n        >\n          {getNewPhrase()}\n          <Icon name={isOpen ? 'angle-up' : 'angle-down'} />\n        </Button>\n      </Dropdown>\n      {showNewFolderDrawer && (\n        <Drawer\n          title={getNewFolderPhrase()}\n          subtitle={parentFolder?.title ? `Location: ${parentFolder.title}` : undefined}\n          onClose={() => setShowNewFolderDrawer(false)}\n          size=\"sm\"\n        >\n          {parentFolder?.managedBy === ManagerKind.Repo || isProvisionedInstance ? (\n            <NewProvisionedFolderForm onDismiss={() => setShowNewFolderDrawer(false)} parentFolder={parentFolder} />\n          ) : (\n            <NewFolderForm\n              onConfirm={onCreateFolder}\n              onCancel={() => setShowNewFolderDrawer(false)}\n              parentFolder={parentFolder}\n            />\n          )}\n        </Drawer>\n      )}\n    </>\n  );\n}\n\n/**\n *\n * @param url without any parameters\n * @param folderUid  folder id\n * @returns url with paramter if folder is present\n */\nfunction buildUrl(url: string, folderUid: string | undefined) {\n  const baseUrl = folderUid ? url + '?folderUid=' + folderUid : url;\n  return config.appSubUrl ? config.appSubUrl + baseUrl : baseUrl;\n}\n","import { css } from '@emotion/css';\nimport { memo, useEffect, useMemo } from 'react';\nimport { useLocation, useParams } from 'react-router-dom-v5-compat';\nimport AutoSizer from 'react-virtualized-auto-sizer';\n\nimport { GrafanaTheme2 } from '@grafana/data';\nimport { Trans } from '@grafana/i18n';\nimport { config, reportInteraction } from '@grafana/runtime';\nimport { LinkButton, FilterInput, useStyles2, Text, Stack } from '@grafana/ui';\nimport { useGetFolderQueryFacade, useUpdateFolder } from 'app/api/clients/folder/v1beta1/hooks';\nimport { Page } from 'app/core/components/Page/Page';\nimport { getConfig } from 'app/core/config';\nimport { useDispatch } from 'app/types/store';\n\nimport { FolderRepo } from '../../core/components/NestedFolderPicker/FolderRepo';\nimport { contextSrv } from '../../core/services/context_srv';\nimport { ManagerKind } from '../apiserver/types';\nimport { buildNavModel, getDashboardsTabID } from '../folders/state/navModel';\nimport { ProvisionedFolderPreviewBanner } from '../provisioning/components/Folders/ProvisionedFolderPreviewBanner';\nimport { useGetResourceRepositoryView } from '../provisioning/hooks/useGetResourceRepositoryView';\nimport { useSearchStateManager } from '../search/state/SearchStateManager';\nimport { getSearchPlaceholder } from '../search/tempI18nPhrases';\n\nimport { BrowseActions } from './components/BrowseActions/BrowseActions';\nimport { BrowseFilters } from './components/BrowseFilters';\nimport { BrowseView } from './components/BrowseView';\nimport CreateNewButton from './components/CreateNewButton';\nimport { FolderActionsButton } from './components/FolderActionsButton';\nimport { SearchView } from './components/SearchView';\nimport { getFolderPermissions } from './permissions';\nimport { useHasSelection } from './state/hooks';\nimport { setAllSelection } from './state/slice';\n\n// New Browse/Manage/Search Dashboards views for nested folders\nconst BrowseDashboardsPage = memo(({ queryParams }: { queryParams: Record<string, string> }) => {\n  const { uid: folderUID } = useParams();\n  const dispatch = useDispatch();\n\n  const styles = useStyles2(getStyles);\n  const [searchState, stateManager] = useSearchStateManager();\n  const isSearching = stateManager.hasSearchFilters();\n  const location = useLocation();\n  const search = useMemo(() => new URLSearchParams(location.search), [location.search]);\n  const { isReadOnlyRepo, repoType } = useGetResourceRepositoryView({ folderName: folderUID });\n\n  useEffect(() => {\n    stateManager.initStateFromUrl(folderUID);\n\n    // Clear selected state when folderUID changes\n    dispatch(\n      setAllSelection({\n        isSelected: false,\n        folderUID: undefined,\n      })\n    );\n  }, [dispatch, folderUID, stateManager]);\n\n  // Trigger search when \"starred\" query param changes\n  useEffect(() => {\n    stateManager.onSetStarred(search.has('starred'));\n  }, [search, stateManager]);\n\n  useEffect(() => {\n    // Clear the search results when we leave SearchView to prevent old results flashing\n    // when starting a new search\n    if (!isSearching && searchState.result) {\n      stateManager.setState({ result: undefined, includePanels: undefined });\n    }\n    if (isSearching && searchState.result?.totalRows === 0) {\n      reportInteraction('grafana_empty_state_shown', { source: 'browse_dashboards' });\n    }\n  }, [isSearching, searchState.result, stateManager]);\n\n  const { data: folderDTO } = useGetFolderQueryFacade(folderUID);\n  const [saveFolder] = useUpdateFolder();\n  const navModel = useMemo(() => {\n    if (!folderDTO) {\n      return undefined;\n    }\n    const model = buildNavModel(folderDTO);\n\n    // Set the \"Dashboards\" tab to active\n    const dashboardsTabID = getDashboardsTabID(folderDTO.uid);\n    const dashboardsTab = model.children?.find((child) => child.id === dashboardsTabID);\n    if (dashboardsTab) {\n      dashboardsTab.active = true;\n    }\n    return model;\n  }, [folderDTO]);\n\n  const hasSelection = useHasSelection();\n\n  // Fetch the root (aka general) folder if we're not in a specific folder\n  const { data: rootFolderDTO } = useGetFolderQueryFacade(folderDTO ? undefined : 'general');\n  const folder = folderDTO ?? rootFolderDTO;\n\n  const {\n    canEditFolders,\n    canDeleteFolders,\n    canDeleteDashboards,\n    canEditDashboards,\n    canCreateDashboards,\n    canCreateFolders,\n  } = getFolderPermissions(folder);\n  const hasAdminRights = contextSrv.hasRole('Admin') || contextSrv.isGrafanaAdmin;\n  const isProvisionedFolder = folder?.managedBy === ManagerKind.Repo;\n  const showEditTitle = canEditFolders && folderUID && !isProvisionedFolder;\n  const permissions = {\n    canEditFolders,\n    canEditDashboards,\n    canDeleteFolders,\n    canDeleteDashboards,\n    isReadOnlyRepo,\n  };\n  const onEditTitle = async (newValue: string) => {\n    if (folderDTO) {\n      const result = await saveFolder({\n        ...folderDTO,\n        title: newValue,\n      });\n      if ('error' in result) {\n        reportInteraction('grafana_browse_dashboards_page_edit_folder_name', {\n          status: 'failed_with_error',\n        });\n        throw result.error;\n      } else {\n        reportInteraction('grafana_browse_dashboards_page_edit_folder_name', { status: 'success' });\n      }\n    } else {\n      reportInteraction('grafana_browse_dashboards_page_edit_folder_name', { status: 'failed_no_folderDTO' });\n    }\n  };\n\n  const handleButtonClickToRecentlyDeleted = () => {\n    reportInteraction('grafana_browse_dashboards_page_button_to_recently_deleted', {\n      origin: window.location.pathname === getConfig().appSubUrl + '/dashboards' ? 'Dashboards' : 'Folder view',\n    });\n  };\n\n  const renderTitle = (title: string) => {\n    return (\n      <Stack alignItems={'center'} gap={2}>\n        <Text element={'h1'}>{title}</Text> <FolderRepo folder={folder} />\n      </Stack>\n    );\n  };\n\n  return (\n    <Page\n      navId=\"dashboards/browse\"\n      pageNav={navModel}\n      onEditTitle={showEditTitle ? onEditTitle : undefined}\n      renderTitle={renderTitle}\n      actions={\n        <>\n          {config.featureToggles.restoreDashboards && hasAdminRights && (\n            <LinkButton\n              variant=\"secondary\"\n              href={getConfig().appSubUrl + '/dashboard/recently-deleted'}\n              onClick={handleButtonClickToRecentlyDeleted}\n            >\n              <Trans i18nKey=\"browse-dashboards.actions.button-to-recently-deleted\">Recently deleted</Trans>\n            </LinkButton>\n          )}\n          {folderDTO && <FolderActionsButton folder={folderDTO} repoType={repoType} isReadOnlyRepo={isReadOnlyRepo} />}\n          {(canCreateDashboards || canCreateFolders) && (\n            <CreateNewButton\n              parentFolder={folderDTO}\n              canCreateDashboard={canCreateDashboards}\n              canCreateFolder={canCreateFolders}\n              repoType={repoType}\n              isReadOnlyRepo={isReadOnlyRepo}\n            />\n          )}\n        </>\n      }\n    >\n      <Page.Contents className={styles.pageContents}>\n        <ProvisionedFolderPreviewBanner queryParams={queryParams} />\n        <div>\n          <FilterInput\n            placeholder={getSearchPlaceholder(searchState.includePanels)}\n            value={searchState.query}\n            escapeRegex={false}\n            onChange={(e) => stateManager.onQueryChange(e)}\n          />\n        </div>\n\n        {hasSelection ? (\n          <BrowseActions folderDTO={folderDTO} />\n        ) : (\n          <div className={styles.filters}>\n            <BrowseFilters />\n          </div>\n        )}\n\n        <div className={styles.subView}>\n          <AutoSizer>\n            {({ width, height }) =>\n              isSearching ? (\n                <SearchView\n                  permissions={permissions}\n                  width={width}\n                  height={height}\n                  searchState={searchState}\n                  searchStateManager={stateManager}\n                />\n              ) : (\n                <BrowseView permissions={permissions} width={width} height={height} folderUID={folderUID} />\n              )\n            }\n          </AutoSizer>\n        </div>\n      </Page.Contents>\n    </Page>\n  );\n});\n\nconst getStyles = (theme: GrafanaTheme2) => ({\n  pageContents: css({\n    display: 'flex',\n    flexDirection: 'column',\n    gap: theme.spacing(1),\n    height: '100%',\n  }),\n\n  // AutoSizer needs an element to measure the full height available\n  subView: css({\n    height: '100%',\n  }),\n\n  filters: css({\n    display: 'none',\n\n    [theme.breakpoints.up('md')]: {\n      display: 'block',\n    },\n  }),\n});\n\nBrowseDashboardsPage.displayName = 'BrowseDashboardsPage';\nexport default BrowseDashboardsPage;\n","import { RepositorySpec, SyncOptions } from 'app/api/clients/provisioning/v0alpha1';\n\nimport { StatusInfo, RepositoryFormData } from '../types';\n\nexport type WizardStep = 'connection' | 'bootstrap' | 'finish' | 'synchronize';\n\nexport type RepoType = RepositorySpec['type'];\n\nexport interface MigrateFormData {\n  history: boolean;\n  identifier: boolean;\n}\n\nexport interface WizardFormData {\n  repository: RepositoryFormData;\n  migrate?: MigrateFormData;\n  repositoryName?: string;\n}\n\nexport type Target = SyncOptions['target'];\n\nexport interface ModeOption {\n  target: Target;\n  label: string;\n  description: string;\n  subtitle: string;\n}\n\nexport type StepStatus = 'idle' | 'running' | 'error' | 'success';\n\nexport const RepoTypeDisplay: { [key in RepoType]: string } = {\n  github: 'GitHub',\n  gitlab: 'GitLab',\n  bitbucket: 'Bitbucket',\n  git: 'Git',\n  local: 'Local',\n};\n\nexport type StepStatusInfo =\n  | { status: 'idle' | 'running' }\n  | { status: 'success'; success?: string | StatusInfo }\n  | { status: 'error'; error: string | StatusInfo }\n  | { status: 'warning'; warning: string | StatusInfo };\n\nexport type InstructionAvailability = Extract<RepoType, 'bitbucket' | 'gitlab' | 'github'>;\n","import { textUtil } from '@grafana/data';\nimport { Trans, t } from '@grafana/i18n';\nimport { Alert, Icon, Stack } from '@grafana/ui';\nimport { RepoTypeDisplay, RepoType } from 'app/features/provisioning/Wizard/types';\nimport { usePullRequestParam } from 'app/features/provisioning/hooks/usePullRequestParam';\n\nimport { commonAlertProps } from '../Dashboards/DashboardPreviewBanner';\n\n// TODO: We have this https://github.com/grafana/git-ui-sync-project/issues/166 to add more details about the PR.\n\ninterface Props {\n  prParam?: string;\n  isNewPr?: boolean;\n  behindBranch?: boolean;\n  repoUrl?: string;\n}\n\n/**\n * @description This component is used to display a banner when a provisioned dashboard/folder is created or loaded from a new branch in repo.\n */\nexport function PreviewBannerViewPR({ prParam, isNewPr, behindBranch, repoUrl }: Props) {\n  const { repoType } = usePullRequestParam();\n\n  const capitalizedRepoType = isValidRepoType(repoType) ? RepoTypeDisplay[repoType] : 'repository';\n\n  const titleText = isNewPr\n    ? t(\n        'provisioned-resource-preview-banner.title-created-branch-in-repo',\n        'A new resource has been created in a branch in {{repoType}}.',\n        {\n          repoType: capitalizedRepoType,\n        }\n      )\n    : t(\n        'provisioned-resource-preview-banner.title-loaded-pull-request-in-repo',\n        'This resource is loaded from the branch you just created in {{repoType}} and it is only visible to you',\n        {\n          repoType: capitalizedRepoType,\n        }\n      );\n\n  if (behindBranch) {\n    return (\n      <Alert\n        {...commonAlertProps}\n        buttonContent={\n          <Stack alignItems=\"center\">\n            {t('provisioned-resource-preview-banner.preview-banner.open-in-repo-button', 'Open in {{repoType}}', {\n              repoType: capitalizedRepoType,\n            })}\n            <Icon name=\"external-link-alt\" />\n          </Stack>\n        }\n        title={t(\n          'provisioned-resource-preview-banner.preview-banner.behind-branch-text',\n          'This resource is behind the branch in {{repoType}}.',\n          {\n            repoType: capitalizedRepoType,\n          }\n        )}\n        onRemove={repoUrl ? () => window.open(textUtil.sanitizeUrl(repoUrl), '_blank') : undefined}\n      >\n        <Trans\n          i18nKey=\"provisioned-resource-preview-banner.preview-banner.view-in-repo-button\"\n          values={{ repoType: capitalizedRepoType }}\n        >\n          View it in {{ repoType }} to see the latest changes.\n        </Trans>\n      </Alert>\n    );\n  }\n\n  return (\n    <Alert\n      {...commonAlertProps}\n      title={titleText}\n      buttonContent={\n        <Stack alignItems=\"center\">\n          {isNewPr\n            ? t(\n                'provisioned-resource-preview-banner.preview-banner.open-pull-request-in-repo',\n                'Open pull request in {{repoType}}',\n                { repoType: capitalizedRepoType }\n              )\n            : t(\n                'provisioned-resource-preview-banner.preview-banner.view-pull-request-in-repo',\n                'View pull request in {{repoType}}',\n                { repoType: capitalizedRepoType }\n              )}\n          <Icon name=\"external-link-alt\" />\n        </Stack>\n      }\n      onRemove={prParam ? () => window.open(textUtil.sanitizeUrl(prParam), '_blank') : undefined}\n    >\n      <Trans i18nKey=\"provisioned-resource-preview-banner.preview-banner.not-saved\">\n        The rest of Grafana users in your organization will still see the current version saved to configured default\n        branch until this branch is merged\n      </Trans>\n    </Alert>\n  );\n}\n\nexport function isValidRepoType(repoType: string | undefined): repoType is RepoType {\n  if (typeof repoType !== 'string') {\n    return false;\n  }\n  return repoType in RepoTypeDisplay;\n}\n","import { ReactNode, useCallback } from 'react';\n\nimport { DataFrameView, toDataFrame } from '@grafana/data';\nimport { Trans, t } from '@grafana/i18n';\nimport { Button, EmptyState } from '@grafana/ui';\nimport { useKeyNavigationListener } from 'app/features/search/hooks/useSearchKeyboardSelection';\nimport { SearchResultsProps, SearchResultsTable } from 'app/features/search/page/components/SearchResultsTable';\nimport { SearchStateManager } from 'app/features/search/state/SearchStateManager';\nimport { DashboardViewItemKind, SearchState } from 'app/features/search/types';\nimport { useDispatch, useSelector } from 'app/types/store';\n\nimport { useHasSelection } from '../state/hooks';\nimport { setAllSelection, setItemSelectionState } from '../state/slice';\nimport { BrowseDashboardsPermissions } from '../types';\n\nimport { canEditItemType, canSelectItems } from './utils';\n\ninterface SearchViewProps {\n  height: number;\n  width: number;\n  permissions: BrowseDashboardsPermissions;\n  searchState: SearchState;\n  searchStateManager: SearchStateManager;\n  emptyState?: ReactNode;\n}\n\nconst NUM_PLACEHOLDER_ROWS = 25;\nconst initialLoadingView = {\n  view: new DataFrameView(\n    toDataFrame({\n      fields: [\n        { name: 'uid', display: true, values: Array(NUM_PLACEHOLDER_ROWS).fill(null) },\n        { name: 'kind', display: true, values: Array(NUM_PLACEHOLDER_ROWS).fill('dashboard') },\n        { name: 'name', display: true, values: Array(NUM_PLACEHOLDER_ROWS).fill('') },\n        { name: 'location', display: true, values: Array(NUM_PLACEHOLDER_ROWS).fill('') },\n        { name: 'tags', display: true, values: Array(NUM_PLACEHOLDER_ROWS).fill([]) },\n      ],\n      meta: {\n        custom: {\n          locationInfo: [],\n        },\n      },\n    })\n  ),\n  loadMoreItems: () => Promise.resolve(),\n  // this is key and controls whether to show the skeleton in generateColumns\n  isItemLoaded: () => false,\n  totalRows: NUM_PLACEHOLDER_ROWS,\n};\n\nexport function SearchView({\n  width,\n  height,\n  permissions,\n  searchState,\n  searchStateManager: stateManager,\n  emptyState: emptyStateProp,\n}: SearchViewProps) {\n  const dispatch = useDispatch();\n  const selectedItems = useSelector((wholeState) => wholeState.browseDashboards.selectedItems);\n  const hasSelection = useHasSelection();\n\n  const { keyboardEvents } = useKeyNavigationListener();\n\n  const value = searchState.result ?? initialLoadingView;\n\n  const selectionChecker = useCallback(\n    (kind: string | undefined, uid: string): boolean => {\n      if (!kind) {\n        return false;\n      }\n\n      // Check if user has permission to select this item type\n      if (!canEditItemType(kind, permissions)) {\n        return false;\n      }\n\n      // Currently, this indicates _some_ items are selected, not necessarily all are\n      // selected.\n      if (kind === '*' && uid === '*') {\n        return hasSelection;\n      } else if (kind === '*') {\n        // Unsure how this case can happen\n        return false;\n      }\n\n      return selectedItems[assertDashboardViewItemKind(kind)][uid] ?? false;\n    },\n    [selectedItems, hasSelection, permissions]\n  );\n\n  const clearSelection = useCallback(() => {\n    dispatch(setAllSelection({ isSelected: false, folderUID: undefined }));\n  }, [dispatch]);\n\n  const handleItemSelectionChange = useCallback(\n    (kind: string, uid: string) => {\n      if (!canEditItemType(kind, permissions)) {\n        return; // Cannot select this item\n      }\n\n      const newIsSelected = !selectionChecker(kind, uid);\n\n      dispatch(\n        setItemSelectionState({ item: { kind: assertDashboardViewItemKind(kind), uid }, isSelected: newIsSelected })\n      );\n    },\n    [selectionChecker, dispatch, permissions]\n  );\n\n  if (value.totalRows === 0) {\n    const emptyState = emptyStateProp ?? (\n      <EmptyState\n        button={\n          <Button variant=\"secondary\" onClick={stateManager.onClearSearchAndFilters}>\n            <Trans i18nKey=\"browse-dashboards.no-results.clear\">Clear search and filters</Trans>\n          </Button>\n        }\n        message={t('browse-dashboards.no-results.text', 'No results found for your query')}\n        variant=\"not-found\"\n        role=\"alert\"\n      />\n    );\n\n    return <div style={{ width }}>{emptyState}</div>;\n  }\n\n  const canSelect = canSelectItems(permissions);\n  const props: SearchResultsProps = {\n    response: value,\n    selection: canSelect ? selectionChecker : undefined,\n    selectionToggle: canSelect ? handleItemSelectionChange : undefined,\n    clearSelection,\n    width: width,\n    height: height,\n    onTagSelected: stateManager.onAddTag,\n    keyboardEvents,\n    onDatasourceChange: searchState.datasource ? stateManager.onDatasourceChange : undefined,\n    onClickItem: stateManager.onSearchItemClicked,\n  };\n\n  return <SearchResultsTable {...props} />;\n}\n\nfunction assertDashboardViewItemKind(kind: string): DashboardViewItemKind {\n  switch (kind) {\n    case 'folder':\n      return 'folder';\n    case 'dashboard':\n      return 'dashboard';\n    case 'panel':\n      return 'panel';\n  }\n\n  throw new Error('Unsupported kind' + kind);\n}\n","import { textUtil } from '@grafana/data';\nimport { useUrlParams } from 'app/core/navigation/hooks';\n\nexport const usePullRequestParam = () => {\n  const [params] = useUrlParams();\n  const prParam = params.get('pull_request_url');\n  const newPrParam = params.get('new_pull_request_url');\n  const repoUrl = params.get('repo_url');\n  const repoType = params.get('repo_type');\n\n  return {\n    prURL: prParam ? textUtil.sanitizeUrl(prParam) : undefined,\n    newPrURL: newPrParam ? textUtil.sanitizeUrl(newPrParam) : undefined,\n    repoURL: repoUrl ? textUtil.sanitizeUrl(repoUrl) : undefined,\n    repoType: repoType ? textUtil.sanitizeUrl(repoType) : undefined,\n  };\n};\n"],"names":["PullRequestButtons","urls","jobType","pullRequestURL","compareURL","branchURL","RepositoryLink","name","repoQuery","repo","repoHref","Text","Stack","TextLink","ProgressBar","progress","topBottomSpacing","styles","getStyles","theme","JobContent","job","isFinishedJob","onStatusChange","errorSetRef","state","message","summary","errors","repoName","Spinner","JobSummary","FinishedJobStatus","jobUid","repositoryName","hasRetried","finishedQuery","retryFailed","shouldRetry","timeoutId","JobStatus","watch","activeQuery","activeJob","repoLabel","shouldCheckFinishedJobs","getSummaryColumns","item","getLayoutOptions","getValidQueryLayout","q","layout","ActionRow","showStarredFilter","showLayout","sortPlaceholder","onLayoutChange","onSortChange","onStarredFilterChange","onTagFilterChange","getTagOptions","getSortOptions","onDatasourceChange","onPanelTypeChange","onSetIncludePanels","disabledOptions","change","commonAlertProps","DashboardPreviewBannerContent","queryParams","slug","path","prURL","file","error","index","repoUrl","DashboardPreviewBanner","route","initialState","defaultQueryParams","getLocalStorageLayout","SearchStateManager","query","tagToRemove","tag","tags","newTag","datasource","panel_type","e","starred","sort","includePanels","folderUid","doInitialSearch","stateFromUrl","prevSort","trackingInfo","searcher","searchTimestamp","result","stateManager","getSearchStateManager","useSearchStateManager","ProvisionedFolderPreviewBanner","provisioningEnabled","config","newPrURL","repoURL","usePullRequestParam","PreviewBannerViewPR","getSearchPlaceholder","getNewDashboardPhrase","getNewFolderPhrase","getImportPhrase","getNewPhrase","useSelectionRepoValidation","selectedItems","childrenByParentUID","rootItems","isProvisionedInstance","useIsProvisionedInstance","settingsData","getRepositoryByUid","repoUid","getRepoUid","uid","repoUIDs","id","repoId","selectedItemsRepoUID","isCrossRepo","useBulkActionJob","createJob","isLoading","repository","jobSpec","response","FormContent","initialValues","workflowOptions","onDismiss","setJob","hasSubmitted","setHasSubmitted","createBulkJob","isCreatingJob","methods","handleSubmit","workflow","handleSubmitForm","data","resources","disableBtn","Box","DescendantCount","ResourceEditFormSharedFields","Button","BulkDeleteProvisionedResource","isRootPage","isReadOnlyRepo","useGetResourceRepositoryView","RepoInvalidStateBanner","targetFolderUID","setTargetFolderUID","setError","clearErrors","targetFolder","setupMoveOperation","targetFolderPathInRepo","MoveActionAvailableTargetWarning","Field","ProvisioningAwareFolderPicker","BulkMoveProvisionedResource","folder","folderPath","useSelectionProvisioningStatus","isParentProvisioned","browseState","isSearching","status","setStatus","folderCache","setFolderCache","dashboardCache","setDashboardCache","folderClient","findItemInState","getFolderMeta","prev","getDashboardMeta","dto","isProvisioned","checkItemProvisioning","isFolder","folders","dashboards","hasProvisioned","hasNonProvisioned","allItems","SelectedMixResourcesMsgModal","Modal","BrowseActions","folderDTO","showBulkDeleteProvisionedResource","setShowBulkDeleteProvisionedResource","showBulkMoveProvisionedResource","setShowBulkMoveProvisionedResource","dispatch","deleteDashboards","deleteFolders","moveFolders","moveDashboards","onActionComplete","onDelete","selectedDashboards","selectedFolders","trackAction","onMove","destinationUID","showMoveModal","MoveModal","showDeleteModal","DeleteModal","moveButton","Drawer","actionMap","action","BrowseFilters","searchState","SelectionState","CheckboxCell","row","isSelected","onItemSelectionChange","permissions","isInLockedRepo","isUidInReadOnlyRepo","CheckboxSpacer","Checkbox","Tooltip","selectors","ev","CheckboxHeaderCell","onAllSelectionChange","CHEVRON_SIZE","ICON_SIZE","NameCell","onFolderClick","treeID","level","isOpen","iconName","Indent","IconButton","Icon","Link","FolderRepo","TagsCell","TagList","HEADER_HEIGHT","ROW_HEIGHT","DIVIDER_HEIGHT","DashboardsTree","items","width","height","isItemLoaded","requestLoadMore","infiniteLoaderRef","listRef","tableColumns","checkboxColumn","nameColumn","props","tagsColumns","table","getTableProps","getTableBodyProps","headerGroups","virtualData","handleIsItemLoaded","itemIndex","handleLoadMore","startIndex","endIndex","parentUID","getRowHeight","rowIndex","headerGroup","key","headerGroupProps","column","headerProps","onItemsRendered","ref","elem","VirtualListRow","style","rows","prepareRow","dashboardItem","rowProps","cell","cellProps","BrowseView","folderUID","flatTree","canSelect","hasNoRole","excludeUIDs","handleFolderClick","clickedFolderUID","handleItemSelectionChange","selection","hasSelectedDescendants","treeItem","EmptyState","CallToActionCard","newState","collection","v","thisIsSelected","navigate","create","request","register","formState","onBranchSuccess","info","prUrl","url","onWriteSuccess","resource","onError","useProvisionedRequestHandler","_","doSave","title","comment","basePath","folderModel","Alert","Input","validateProvisionedFolderName","NewProvisionedFolderForm","parentFolder","useProvisionedFolderFormData","folderName","initialFormModel","NewFolderForm","onCancel","onConfirm","isSubmitting","translatedFolderNameRequiredPhrase","fieldNameLabel","form","validateFolderName","parentFolderUid","CreateNewButton","canCreateDashboard","canCreateFolder","repoType","setIsOpen","location","newFolder","showNewFolderDrawer","setShowNewFolderDrawer","notifyApp","onCreateFolder","depth","newMenu","Menu","MenuItem","buildUrl","Dropdown","baseUrl","BrowseDashboardsPage","search","saveFolder","navModel","model","dashboardsTabID","dashboardsTab","child","hasSelection","rootFolderDTO","canEditFolders","canDeleteFolders","canDeleteDashboards","canEditDashboards","canCreateDashboards","canCreateFolders","hasAdminRights","isProvisionedFolder","showEditTitle","onEditTitle","newValue","handleButtonClickToRecentlyDeleted","renderTitle","Page","FolderActionsButton","FilterInput","SearchView","RepoTypeDisplay","prParam","isNewPr","behindBranch","capitalizedRepoType","isValidRepoType","titleText","NUM_PLACEHOLDER_ROWS","initialLoadingView","emptyStateProp","wholeState","keyboardEvents","value","selectionChecker","kind","assertDashboardViewItemKind","clearSelection","newIsSelected","emptyState","params","newPrParam"],"sourceRoot":""}