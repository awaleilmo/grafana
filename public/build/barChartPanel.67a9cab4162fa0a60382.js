"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[3124],{16913:(Xt,dt,t)=>{t.d(dt,{OG:()=>rt,u6:()=>x});var m=t(73163);const x=(L,b)=>{const s=[];if((L.config.links?.length??0)>0&&L.getLinks!=null){const i=L.values[b],F=L.display?L.display(i):{text:`${i}`,numeric:+i},G=new Set;L.getLinks({calculatedValue:F,valueRowIndex:b}).forEach(J=>{const k=`${J.title}/${J.href}`;G.has(k)||(s.push(J),G.add(k))})}return s},w=L=>{},rt=(L,b,s,i)=>{const F=[],G=new Set;return(0,m.ko)(L,b,b.state.scopedVars,s,b.config.actions??[],{valueRowIndex:i}).forEach(k=>{const Q=`${k.title}`;G.has(Q)||(F.push(k),G.add(Q))}),F}},24131:(Xt,dt,t)=>{t.r(dt),t.d(dt,{plugin:()=>Ge});var m=t(16207),x=t(83340),w=t(64394),rt=t(38809),L=t(38919),b=t(95004),s=t(92745),i=t(739),F=t(99555),G=t(44017),J=t(45013),k=t(79277),Q=t(41069),Ft=t(14099),pt=t(99709),u=t(74848),D=t(96540),Y=t(14477),N=t(43173),n=t(53568),p=t(23414),g=t(63142),V=t(64400),z=t(54735),O=t(92790),mt=t(69234),Ct=t(36100),it=t(78308),xt=t(2543),Mt=t(33553),q=t(76637),$=t(4268),vt=t(36192),_=t(68706);function Jt(e,o){return o[0].fields.slice(1).some(r=>!r.config.custom?.hideFrom?.legend)}const Wt=(0,D.memo)(({data:e,placement:o,calcs:r,displayMode:P,colorField:U,...B})=>{const M=(0,g.$j)(),H=e[0].fields[0].config,Z=H.color?.mode,E=[];if(Z===w.Y.Thresholds){const f={mode:Mt.O.Absolute,steps:[]},C={mode:Mt.O.Percentage,steps:[]};for(let tt=1;tt<e[0].fields.length;tt++){const et=e[0].fields[tt];if(et.config.thresholds&&et.config.thresholds.steps.length>1)if(et.config.thresholds.mode===Mt.O.Absolute)for(const R of et.config.thresholds.steps)(0,xt.includes)(f.steps,R)||f.steps.push(R);else for(const R of et.config.thresholds.steps)(0,xt.includes)(C.steps,R)||C.steps.push(R)}const nt=(0,_.EI)(H,M,f),yt=(0,_.EI)(H,M,C);E.push(...nt,...yt)}const at=[];for(let f=1;f<e[0].fields.length;f++){const C=e[0].fields[f].config.mappings;if(C)for(const nt of C)(0,xt.includes)(at,nt)||at.push(nt)}const ut=(0,_.K1)(at,M),bt=e[0].fields.slice(1).map((f,C)=>{const yt=C+1;if(!f||f.config.custom?.hideFrom?.legend)return;const tt=f.state?.displayName??f.name,et=(0,q.lz)(f,M).color;return{disabled:f.state?.hideFrom?.viz,color:et,label:tt,yAxis:f.config.custom?.axisPlacement===i.vM.Right?2:1,getDisplayValues:()=>(0,vt.UO)(r,f,M),getItemKey:()=>`${tt}-0-${yt}`}}).filter(f=>f!==void 0);return(0,u.jsx)(z.KU.Legend,{placement:o,...B,children:(0,u.jsx)($.t,{placement:o,items:bt,thresholdItems:E,mappingItems:ut,displayMode:P,sortBy:B.sortBy,sortDesc:B.sortDesc,isSortable:!0})})});Wt.displayName="BarChartLegend";var ct=t(36613),It=t(16515),ie=t(8721),ae=t(11576),jt=t(55386),re=t(21275),ge=t(47276),pe=t(62748),me=t(76234),ft=t(5421),Qt=t(80011),wt=t(6773),Dt=t(46485),ce=t(81897);const zt=ft.WC.interval,xe=Dt.ur,Me=Dt.ur,Oe=8,ve=30,be=.65,Ee=.1,Ce=.15,Te=5,Pe=10,Le=.1;function Ae(e,o,r,P,U){const B=(0,n.kD)(e,14),M=o/(B.width+2)*14,H=r/P,Z=Math.min(H,M);return{fontSize:Math.min(Z,U??Z),textMetrics:B}}function De(e,o){const{xOri:r,xDir:P,rawValue:U,getColor:B,formatValue:M,formatShortValue:H,fillOpacity:Z=1,showValue:E,xSpacing:at=0,hoverMulti:ut=!1,timeZone:bt="browser"}=e,f=r===i.Lt.Horizontal,C=!e.text?.valueSize,nt=e.stacking!==i.gs.None,yt=e.stacking===i.gs.Percent;let{groupWidth:tt,barWidth:et,barRadius:R=0}=e;nt&&([tt,et]=[et,tt]);let W;const Tt=Array(30).fill(null);let Bt;const X=l=>Array.from(l.data[0].map((a,c)=>c)),kt=at===0?void 0:(l,a)=>{const c=l.bbox.width,v=P*(f?1:-1);let y=a.length,S=y-1,A=0,Ot=c/ct.A.pxRatio,gt=Math.abs(Math.floor(Ot/at));A=y<gt?0:Math.ceil(y/gt);let Zt=a.map((Et,Gt)=>A!==0&&(at>0?Gt:S-Gt)%A>0?null:Et);return v===1?Zt:Zt.reverse()},Pt=(l,a,c,v,y)=>{if(e.xTimeAuto){let S=zt.year;return y<p.Zj.second?S=zt.millisecond:y<p.Zj.minute?S=zt.second:y<p.Zj.hour?S=zt.minute:y<p.Zj.day?S=zt.hour:y<p.Zj.month?S=zt.day:y<p.Zj.year?S=zt.month:S=zt.year,a.map(A=>A==null?"":(0,Qt.LE)(A,{format:S,timeZone:bt}))}return a.map(S=>f?H(0,S):M(0,S))},Nt=(l,a,c)=>{a=0,c=Math.max(1,l.data[0].length-1);let v=0;(0,Dt.mn)(l.data[0].length,tt,xe,0,(S,A,Ot)=>{v=A+Ot/2});let y=c-a;if(v===.5)a-=y;else{let A=(1/(1-v*2)*y-y)/2;a-=A,c+=A}return[a,c]};let st=(l,a)=>{let c=Array.from({length:a},()=>({offs:Array(l).fill(0),size:Array(l).fill(0)}));return(0,Dt.mn)(l,tt,xe,null,(v,y,S)=>{(0,Dt.mn)(a,et,Me,null,(A,Ot,gt)=>{c[A].offs[v]=y+S*Ot,c[A].size[v]=S*gt})}),c},j=(l,a)=>{let c=Array.from({length:a},()=>({offs:Array(l).fill(0),size:Array(l).fill(0)}));return(0,Dt.mn)(l,tt,xe,null,(v,y,S)=>{(0,Dt.mn)(a,et,Me,null,(A,Ot,gt)=>{c[A].offs[v]=y,c[A].size[v]=S})}),c};const _t=f?Ee:Ce,te=f?Te:Pe;let Ut=[],T=[],h=1,d,I=e.text?.valueSize??ve,K=te,Rt=1/0,ht=1/0,St=B!=null,Lt=St?{fill:{unit:3,values:(l,a)=>T[a].fill},stroke:{unit:3,values:(l,a)=>T[a].stroke}}:{},ot=ct.A.paths.bars({radius:yt?0:nt?(l,a)=>a===l.data.length-1?[R,0]:[0,0]:R,disp:{x0:{unit:2,values:(l,a)=>Ut[a].offs},size:{unit:2,values:(l,a)=>Ut[a].size},...Lt},each:(l,a,c,v,y,S,A)=>{v-=l.bbox.left,y-=l.bbox.top;let Ot=l.data[a][c];f?(Rt=Math.min(Rt,Ot<0?l.bbox.height-(y+A):y),ht=S):(Rt=A,ht=Math.min(ht,Ot<0?v:l.bbox.width-(v+S)));let gt={x:v,y,w:S,h:A,sidx:a,didx:c};if(!nt&&e.fullHighlight&&(e.xOri===i.Lt.Horizontal?(gt.y=0,gt.h=l.bbox.height):(gt.x=0,gt.w=l.bbox.width)),W.add(gt),E!==i.yL.Never){const Zt=U(a,c);let Et=1;yt&&ee[a][c]&&(Et=ee[a][c]);const Gt=Et===0?0:Zt/Et,se=M(a,Gt);if(K=Math.min(K,Math.round(_t*(f?S:A))),d[c]===void 0&&(d[c]={}),d[c][a]={text:se,value:U(a,c),hidden:!1},C){const{fontSize:Yt,textMetrics:Ht}=Ae(d[c][a].text,ht*(f?be:1)-(f?0:K),Rt*(f?1:be)-(f?K:0),1);d[c][a].textMetrics=Ht;let lt=Math.round(Math.min(I,ve,Yt));h=lt/I*(lt/14),I=lt}else d[c][a].textMetrics=(0,n.kD)(d[c][a].text,I);let he=f?0:-Math.round(Le*I),At=U(a,c);if(e.negY?.[a]&&At!=null&&(At*=-1),At!=null){const Yt=l.bbox.left+(f?v+S/2:At<0?v-K:v+S+K);let Ht=l.bbox.top+(f?At<0?y+A+K:y-K:y+A/2-he);const{textMetrics:lt={width:1,actualBoundingBoxAscent:1,actualBoundingBoxDescent:1}}=d[c][a];let oe=0,le=0;f?(oe=lt.width*h/2,le=At>0?(lt.actualBoundingBoxAscent+lt.actualBoundingBoxDescent)*h:0):(le=(lt.actualBoundingBoxAscent+lt.actualBoundingBoxDescent)*h/2,oe=At<0?lt.width*h:0),Ht-le<0&&(Ht=le),d[c][a].x=Yt,d[c][a].y=Ht,d[c][a].bbox={x:Yt-oe,y:Ht-le,w:lt.width*h,h:(lt.actualBoundingBoxAscent+lt.actualBoundingBoxDescent)*h}}}}});const $t=l=>{l.root.querySelectorAll(".u-cursor-pt").forEach(a=>{a.style.borderRadius="0",e.fullHighlight&&(a.style.zIndex="-1")})},fe={x:!1,y:!1,drag:{x:!1,y:!1},dataIdx:(l,a)=>{if(a===0){Tt.fill(null),Bt=null;let c=l.cursor.left*ct.A.pxRatio,v=l.cursor.top*ct.A.pxRatio;W.get(c,v,1,1,y=>{(0,ce.ur)(c,v,y.x,y.y,y.x+y.w,y.y+y.h)&&(Bt=Tt[0]=y,Tt[Bt.sidx]=Bt,ut&&(0,ce.Tr)(W,void 0,Bt.didx).forEach(S=>{Tt[S.sidx]=S}))})}return Tt[a]?.didx},points:{fill:"rgba(255,255,255,0.4)",bbox:(l,a)=>{let c=Tt[a],v=c!=null;return{left:v?c.x/ct.A.pxRatio:-10,top:v?c.y/ct.A.pxRatio:-10,width:v?c.w/ct.A.pxRatio:0,height:v?c.h/ct.A.pxRatio:0}}},focus:{prox:1e3,dist:(l,a)=>Bt?.sidx===a?0:1/0}},ue=l=>{if(W=W||new ce.C$(0,0,l.bbox.width,l.bbox.height),W.clear(),l.series.forEach(a=>{a._paths=null}),nt?Ut=[null,...j(l.data[0].length,l.data.length-1)]:Ut=[null,...st(l.data[0].length,l.data.length-1)],St){T=[null];for(let a=1;a<l.data.length;a++){let c=l.data[a].map((v,y)=>v!=null?B(a,y,v):null);T.push({fill:Z<1?c.map(v=>v!=null?wt.MV.alpha(v,Z):null):c,stroke:c})}}d={},I=e.text?.valueSize??ve,K=te,Rt=ht=1/0},ye=l=>{if(E===i.yL.Never||I<Oe)return;l.ctx.save(),l.ctx.fillStyle=o.colors.text.primary,l.ctx.font=`${I}px ${o.typography.fontFamily}`;let a,c;for(const v in d){let y=!0;for(const S in d[v]){const A=d[v][S],{text:Ot,x:gt=0,y:Zt=0}=A;let{value:Et}=A;e.negY?.[S]&&Et!=null&&(Et*=-1);let Gt=f?"center":Et!==null&&Et<0?"right":"left",se=f?Et!==null&&Et<0?"top":"alphabetic":"middle";if(Gt!==a&&(l.ctx.textAlign=a=Gt),se!==c&&(l.ctx.textBaseline=c=se),E===i.yL.Always)l.ctx.fillText(Ot,gt,Zt);else if(E===i.yL.Auto){let{bbox:he}=A,At=!1;if(he==null)At=!0,A.hidden=!0;else if(!y)for(const Yt in d[v]){if(Yt===S)continue;const Ht=d[v][Yt],{bbox:lt,hidden:oe}=Ht;if(!oe&&lt&&(0,ce.HY)(he,lt)){At=!0,A.hidden=!0;break}}y=!1,!At&&l.ctx.fillText(Ot,gt,Zt)}}}l.ctx.restore()};let ee=null;function Xe(l,a){return ee=null,(0,vt.bq)(l[0],a,({totals:c})=>{ee=c})}return{cursor:fe,xRange:Nt,xValues:Pt,xSplits:X,hFilter:kt,barsBuilder:ot,init:$t,drawClear:ue,draw:ye,prepData:Xe}}const Vt={barRadius:0,barWidth:.97,fullHighlight:!1,groupWidth:.7,orientation:i.wV.Auto,showValue:i.yL.Auto,stacking:i.gs.None,xTickLabelRotation:0,xTickLabelSpacing:0},Se={fillOpacity:80,gradientMode:i.on.None,lineWidth:1};function Be(e,o,r,P,U,B){if(e.length===0||e.every(E=>E.length===0))return{warn:"",series:[],_rest:[]};(0,It.Fm)(e),(0,It.j2)(e,o);let M={...e[0]};const H=M.fields.findIndex(E=>E.type===b.PU.time);H>=0&&e.length>1&&(M=(0,ie.Fd)({frames:e,keepDisplayNames:!0})??M);const Z=M.fields.find(E=>E.state?.displayName===U||E.name===U)??M.fields.find(E=>E.type===b.PU.string)??M.fields[H];if(Z!=null){const E=[Z],at=[],ut=B==null?void 0:M.fields.find(C=>C.state?.displayName===B||C.name===B);M.fields.forEach(C=>{if(C!==Z)if(C.type===b.PU.number&&!C.config.custom?.hideFrom?.viz){const nt={...C,values:C.values.map(yt=>Number.isFinite(yt)?yt:null),config:{...C.config,custom:{...C.config.custom,stacking:{group:"_",mode:r}}}};E.push(nt)}else at.push(C)});let bt=null;E.length===1&&(bt=(0,s.t)("bar-chart.warn.missing-numeric","No numeric fields found")),M.fields=E;const f=[M];return(0,me.O2)(f,P,0),{series:f,_rest:at,color:ut,warn:bt}}return{series:[],_rest:[],color:null,warn:(0,s.t)("bar-chart.warn.missing-series","Bar charts require a string or time field")}}const Re=({series:e,totalSeries:o,color:r,orientation:P,options:U,timeZone:B,theme:M})=>{let{showValue:H,groupWidth:Z,barWidth:E,barRadius:at=0,stacking:ut,text:bt,tooltip:f,xTickLabelRotation:C,xTickLabelMaxLength:nt,xTickLabelSpacing:yt=0,legend:tt,fullHighlight:et}=U,R=e[0];const W=new ge.e,qt=R.fields.map((T,h)=>ut===i.gs.Percent?(0,ae.J)({field:{...T,config:{...T.config,unit:"percentunit"}},theme:M}):T.display),Tt=(T,h)=>(0,jt.cN)(qt[T](h)),Bt=(T,h)=>de(Tt(T,h),nt),X=We(P);R.fields.length===2&&ut===i.gs.None&&(o===1&&(Z=E),E=1);const kt=(T,h)=>R.fields[T].values[h];let Pt,Nt=1;if(r!=null){const T=r.display;Nt=(r.config.custom.fillOpacity??100)/100,Pt=(h,d)=>T(r.values[d]).color}else R.fields.some(h=>h.config.color?.mode===re.Yb.Thresholds||h.config.mappings?.some(I=>I.type==="value"?Object.values(I.options).some(K=>K.color!=null):I.options.result.color!=null))&&(Nt=(R.fields.find(d=>d.type===b.PU.number)?.config?.custom?.fillOpacity??100)/100,Pt=(d,I)=>{let K=R.fields[d];return K.display(K.values[I]).color});const st={xOri:X.xOri,xDir:X.xDir,groupWidth:Z,barWidth:E,barRadius:at,stacking:ut,rawValue:kt,getColor:Pt,fillOpacity:Nt,formatValue:Tt,formatShortValue:Bt,timeZone:B,text:bt,showValue:H,legend:tt,xSpacing:yt,xTimeAuto:R.fields[0]?.type===b.PU.time&&!R.fields[0].config.unit?.startsWith("time:"),negY:R.fields.map(T=>T.config.custom?.transform===i.NU.NegativeY),fullHighlight:et,hoverMulti:f.mode===i.$N.Multi},j=De(st,M);if(W.setCursor(j.cursor),W.addHook("init",j.init),W.addHook("drawClear",j.drawClear),W.addHook("draw",j.draw),C!==0){let T=50,h=X.xOri===i.Lt.Horizontal?14:5;W.setPadding(Fe(R,C,nt,T,h))}W.setPrepData(j.prepData),W.addScale({scaleKey:"x",isTime:!1,range:j.xRange,distribution:i.L4.Ordinal,orientation:X.xOri,direction:X.xDir});const _t=R.fields[0]?.config.custom?.axisPlacement!==i.vM.Hidden?X.xOri===i.Lt.Horizontal?i.vM.Bottom:i.vM.Left:i.vM.Hidden,te=R.fields[0]?.config.custom?.axisPlacement!==i.vM.Hidden;W.addAxis({scaleKey:"x",isTime:!1,placement:_t,label:R.fields[0]?.config.custom?.axisLabel,splits:j.xSplits,filter:X.xOri===0?j.hFilter:void 0,values:j.xValues,timeZone:B,grid:{show:!1},ticks:{show:!1},gap:15,tickLabelRotation:X.xOri===0?C*-1:0,theme:M,show:te});for(let T=1;T<R.fields.length;T++){const h=R.fields[T],d={...Se,...h.config.custom},I=h.config.unit||pe.s,K=(0,q.Qi)(h),ht=(0,q.lz)(h,M).color;let St=d.axisSoftMin,Lt=d.axisSoftMax;if(St==null&&h.config.min==null&&(St=0),Lt==null&&h.config.max==null&&(Lt=0),d.thresholdsStyle&&h.config.thresholds&&(d.thresholdsStyle.mode??i.Ly.Off)!==i.Ly.Off&&W.addThresholds({config:d.thresholdsStyle,thresholds:h.config.thresholds,scaleKey:I,theme:M,hardMin:h.config.min,hardMax:h.config.max,softMin:d.axisSoftMin,softMax:d.axisSoftMax}),W.addSeries({scaleKey:I,pxAlign:!0,lineWidth:d.lineWidth,lineColor:ht,fillOpacity:d.fillOpacity,theme:M,colorMode:K,pathBuilder:j.barsBuilder,show:!d.hideFrom?.viz,gradientMode:d.gradientMode,thresholds:h.config.thresholds,hardMin:h.config.min,hardMax:h.config.max,softMin:d.axisSoftMin,softMax:d.axisSoftMax}),W.addScale({scaleKey:I,min:h.config.min,max:h.config.max,softMin:St,softMax:Lt,centeredZero:d.axisCenteredZero,orientation:X.yOri,direction:X.yDir,distribution:d.scaleDistribution?.type,log:d.scaleDistribution?.log,decimals:h.config.decimals}),d.axisPlacement!==i.vM.Hidden){let ot=d.axisPlacement;(!ot||ot===i.vM.Auto)&&(ot=i.vM.Left),X.xOri===1&&(ot===i.vM.Left&&(ot=i.vM.Bottom),ot===i.vM.Right&&(ot=i.vM.Top));let $t={scaleKey:I,label:d.axisLabel,size:d.axisWidth,placement:ot,formatValue:(fe,ue)=>(0,jt.cN)(h.display(fe,ue)),filter:X.yOri===0?j.hFilter:void 0,tickLabelRotation:X.xOri===1?C*-1:0,theme:M,grid:{show:d.axisGridShow},decimals:h.config.decimals};d.axisBorderShow&&($t.border={show:!0}),d.axisColorMode===i.Y$.Series&&($t.color=ht),W.addAxis($t)}}let Ut=(0,vt.ro)(R);return W.setStackingGroups(Ut),{builder:W,prepData:(T,h)=>(e=T,R=e[0],r=h,W.prepData(e))}};function de(e,o){return e.length>o?e.substring(0,o).concat("..."):e}function Fe(e,o,r,P=0,U=0){const B=e.fields[0].values,M=p.pi,H=e.fields[0].display,Z=f=>H?H(B[f]):B[f];let E=0;for(let f=0;f<B.length;f++){let C=(0,n.kD)(de((0,jt.cN)(Z(f)),r),M);E=C.width>E?C.width:E}const at=o>0?Math.cos(o*Math.PI/180)*(0,n.kD)(de((0,jt.cN)(Z(B.length-1)),r),M).width:0,ut=o<0?Math.cos(o*-1*Math.PI/180)*(0,n.kD)(de((0,jt.cN)(Z(0)),r),M).width:0,bt=Math.sin((o>=0?o:o*-1)*Math.PI/180)*E-U;return[Math.round(p.pi*ct.A.pxRatio),at,bt,Math.max(0,ut-P)]}function We(e){return e===i.wV.Vertical?{xOri:i.Lt.Horizontal,xDir:i.ON.Right,yOri:i.Lt.Vertical,yDir:i.ON.Up}:{xOri:i.Lt.Vertical,xDir:i.ON.Down,yOri:i.Lt.Horizontal,yDir:i.ON.Right}}const Ve=(0,n.kD)("M",p.pi).width,Ne=Math.PI/180,Ue=e=>{const{data:o,options:r,fieldConfig:P,width:U,height:B,timeZone:M,id:H,replaceVariables:Z}=e,E=(0,g.$j)(),{onAddAdHocFilter:at,canExecuteActions:ut}=(0,V.d2)(),bt=(0,D.useMemo)(()=>ut?.()??!1,[ut]),{barWidth:f,barRadius:C=0,showValue:nt,groupWidth:yt,stacking:tt,legend:et,tooltip:R,text:W,xTickLabelRotation:qt,xTickLabelSpacing:Tt,fullHighlight:Bt,xField:X,colorByField:kt}=r;let{orientation:Pt,xTickLabelMaxLength:Nt=0}=r;Pt=Pt===L.wV.Auto?U<B?L.wV.Horizontal:L.wV.Vertical:Pt,Nt=qt===0?1/0:Nt||Math.floor(B/2/Math.sin(Math.abs(qt*Ne))/Ve-3);const st=(0,D.useMemo)(()=>Be(o.series,P,tt,E,X,kt),[o.series,P,tt,E,X,kt]),j=(0,D.useMemo)(()=>st.series.map(K=>({...K,fields:K.fields.filter((Rt,ht)=>ht===0||!Rt.state?.hideFrom?.viz)})),[st.series]),_t=j[0]?.length??0,te=j[0]?.fields.length??0,Ut=Math.max(0,(st.series[0]?.fields.length??0)-1);let{builder:T,prepData:h}=(0,D.useMemo)(()=>_t===0?{builder:null,prepData:null}:Re({series:j,totalSeries:Ut,color:st.color,orientation:Pt,options:r,timeZone:M,theme:E}),[Pt,M,e.data.structureRev,Ut,te,_t,f,C,nt,yt,tt,et,R,W?.valueSize,qt,Tt,Bt,X,kt,Nt]);const d=(0,D.useMemo)(()=>h==null?[]:h(j,st.color),[h,j,st.color]);if(st.warn!=null||T==null)return(0,u.jsx)(Y.a,{panelId:H,fieldConfig:P,data:o,message:st.warn??"",needsNumberField:!0});const I=et.showLegend&&Jt(T,st.series)?(0,u.jsx)(Wt,{data:st.series,colorField:st.color,...et}):null;return(0,u.jsx)(z.KU,{width:e.width,height:e.height,legend:I,children:(K,Rt)=>(0,u.jsx)(O.Z,{config:T,data:d,width:K,height:Rt,children:e.options.tooltip.mode!==i.$N.None&&(0,u.jsx)(mt.xl,{config:T,maxWidth:r.tooltip.maxWidth,hoverMode:r.tooltip.mode===i.$N.Single?mt.b3.xOne:mt.b3.xAll,getDataLinks:(ht,St)=>j[0].fields[ht].getLinks?.({valueRowIndex:St})??[],getAdHocFilters:(ht,St)=>{const Lt=j[0].fields[0];if(N.$.featureToggles.adhocFiltersInTooltips&&Lt.config.filterable&&at!=null){const ot={key:Lt.name,operator:Ct.mc,value:String(Lt.values[St])};return[{...ot,onClick:()=>at(ot)}]}return[]},render:(ht,St,Lt,ot,$t,fe,ue,ye,ee)=>(0,u.jsx)(it.k,{series:j[0],_rest:st._rest,dataIdxs:St,seriesIdx:Lt,mode:r.tooltip.mode,sortOrder:r.tooltip.sort,isPinned:ot,maxHeight:r.tooltip.maxHeight,replaceVariables:Z,dataLinks:ye,adHocFilters:ee,hideZeros:r.tooltip.hideZeros,canExecuteActions:bt})})})})};var je=t(41654),we=t(77824),ze=t(45967),He=t(32635);const Ie=e=>{const o=[{label:(0,s.t)("barchart.tick-spacing-editor.gaps-options.label-none","None"),value:0,description:(0,s.t)("barchart.tick-spacing-editor.gaps-options.description-none","Show all tick marks")},{label:(0,s.t)("barchart.tick-spacing-editor.gaps-options.label-small","Small"),value:100,description:(0,s.t)("barchart.tick-spacing-editor.gaps-options.description-small","Require {{spacing}} spacing",{spacing:"100px"})},{label:(0,s.t)("barchart.tick-spacing-editor.gaps-options.label-medium","Medium"),value:200,description:(0,s.t)("barchart.tick-spacing-editor.gaps-options.description-medium","Require {{spacing}} spacing",{spacing:"200px"})},{label:(0,s.t)("barchart.tick-spacing-editor.gaps-options.label-large","Large"),value:300,description:(0,s.t)("barchart.tick-spacing-editor.gaps-options.description-large","Require {{spacing}} spacing",{spacing:"300px"})}];let r=e.value??0;const P=r<0;P&&(r*=-1);let U=o[0];for(const H of o)if(U=H,r<=U.value)break;const B=H=>{e.onChange(H*(P?-1:1))},M=()=>{e.onChange(e.value*-1)};return(0,u.jsxs)(je.B,{children:[(0,u.jsx)(we.z,{value:U.value,options:o,onChange:B}),r!==0&&(0,u.jsx)(ze.m,{content:(0,s.t)("barchart.tick-spacing-editor.content-require-space-from-the-right-side","Require space from the right side"),placement:"top",children:(0,u.jsx)("div",{children:(0,u.jsx)(He.S,{value:P,onChange:M,label:(0,s.t)("barchart.tick-spacing-editor.label-rtl","RTL")})})})]})};var Ke=t(57866),ne=t(46644);const ke=(e,o,r)=>{if(o==="graph"){const P=r.angular,U=e.fieldConfig??{defaults:{},overrides:[]};if(P.xaxis?.mode==="series"){const B=e.transformations||[];B.push({id:"reduce",options:{reducers:$e(P.xaxis?.values)}},{id:"transpose",options:{}}),e.transformations=B,U.overrides.push({matcher:{id:Ke.Ct.byName,options:"Field"},properties:[{id:"custom.axisPlacement",value:i.vM.Hidden}]}),e.fieldConfig=U,e.options={...e.options,groupWidth:1}}}return{}},$e=e=>{const o=[];return e?.forEach(r=>{Object.values(ne.gy).includes(r)?o.push(r):r==="current"?o.push(ne.gy.lastNotNull):r==="total"?o.push(ne.gy.sum):r==="avg"&&o.push(ne.gy.mean)}),e?o:[ne.gy.sum]};var Kt=t(73495);class Ze{getListWithDefaults(o){return o.getListAppender({name:Kt.m.BarChart,pluginId:"barchart",options:{showValue:i.yL.Never,legend:{calcs:[],displayMode:i.lm.List,showLegend:!0,placement:"right"}},fieldConfig:{defaults:{unit:"short",custom:{}},overrides:[]},cardOptions:{previewModifier:r=>{r.options.barWidth=.8}}})}getSuggestionsForData(o){const r=this.getListWithDefaults(o),{dataSummary:P}=o;P.frameCount===1&&(!P.hasNumberField||!P.hasStringField||P.rowCountTotal>50||(r.append({name:Kt.m.BarChart}),P.numberFieldCount>1&&(r.append({name:Kt.m.BarChartStacked,options:{stacking:i.gs.Normal}}),r.append({name:Kt.m.BarChartStackedPercent,options:{stacking:i.gs.Percent}})),r.append({name:Kt.m.BarChartHorizontal,options:{orientation:L.wV.Horizontal}}),P.numberFieldCount>1&&(r.append({name:Kt.m.BarChartHorizontalStacked,options:{stacking:i.gs.Normal,orientation:L.wV.Horizontal}}),r.append({name:Kt.m.BarChartHorizontalStackedPercent,options:{orientation:L.wV.Horizontal,stacking:i.gs.Percent}}))))}}const Ge=new m.m(Ue).setPanelChangeHandler(ke).useFieldConfig({standardOptions:{[x.uo.Color]:{settings:{byValueSupport:!0,preferThresholdsMode:!1},defaultValue:{mode:w.Y.PaletteClassic}},[x.uo.Links]:{settings:{showOneClick:!0}},[x.uo.Actions]:{hideFromDefaults:!1}},useCustomConfig:e=>{const o=Se;e.addSliderInput({path:"lineWidth",name:(0,s.t)("barchart.config.name-line-width","Line width"),defaultValue:o.lineWidth,settings:{min:0,max:10,step:1}}).addSliderInput({path:"fillOpacity",name:(0,s.t)("barchart.config.name-fill-opacity","Fill opacity"),defaultValue:o.fillOpacity,settings:{min:0,max:100,step:1}}).addRadio({path:"gradientMode",name:(0,s.t)("barchart.config.name-gradient-mode","Gradient mode"),defaultValue:(0,F.P)().fillGradient[0].value,settings:{options:(0,F.P)().fillGradient}}),e.addSelect({category:["Graph styles"],name:(0,s.t)("barchart.config.name-transform","Transform"),path:"transform",settings:{options:[{label:(0,s.t)("barchart.config.transform-options.label-constant","Constant"),value:i.NU.Constant,description:(0,s.t)("barchart.config.transform-options.description-constant","The first value will be shown as a constant line")},{label:(0,s.t)("barchart.config.transform-options.label-negative-y","Negative Y"),value:i.NU.NegativeY,description:(0,s.t)("barchart.config.transform-options.description-negative-y","Flip the results to negative values on the y axis")}],isClearable:!0},hideFromDefaults:!0}),e.addCustomEditor({id:"thresholdsStyle",path:"thresholdsStyle",name:(0,s.t)("barchart.config.name-show-thresholds","Show thresholds"),category:[(0,s.t)("barchart.config.category-thresholds","Thresholds")],defaultValue:{mode:i.Ly.Off},settings:{options:(0,F.P)().thresholdsDisplayModes},editor:pt.D,override:pt.D,process:rt.hS,shouldApply:()=>!0}),G.rg(e,o),J.e(e)}}).setPanelOptions(e=>{e.addFieldNamePicker({path:"xField",name:(0,s.t)("barchart.config.name-x-axis","X Axis"),settings:{placeholderText:(0,s.t)("barchart.config.placeholder-x-axis","First string or time field")}}).addRadio({path:"orientation",name:(0,s.t)("barchart.config.name-orientation","Orientation"),settings:{options:[{value:L.wV.Auto,label:(0,s.t)("barchart.config.orientation-options.label-auto","Auto")},{value:L.wV.Horizontal,label:(0,s.t)("barchart.config.orientation-options.label-horizontal","Horizontal")},{value:L.wV.Vertical,label:(0,s.t)("barchart.config.orientation-options.label-line-vertical","Vertical")}]},defaultValue:Vt.orientation}).addSliderInput({path:"xTickLabelRotation",name:(0,s.t)("barchart.config.name-rotate-x-labels","Rotate x-axis tick labels"),defaultValue:Vt.xTickLabelRotation,settings:{min:-90,max:90,step:15,marks:{"-90":"-90\xB0","-45":"-45\xB0",0:"0\xB0",45:"45\xB0",90:"90\xB0"},included:!1}}).addNumberInput({path:"xTickLabelMaxLength",name:(0,s.t)("barchart.config.name-x-label-max-length","X-axis tick label max length"),description:(0,s.t)("barchart.config.description-x-label-max-length","X-axis labels will be truncated to the length provided"),settings:{placeholder:(0,s.t)("barchart.config.placeholder-x-label-max-length","None"),min:0},showIf:o=>o.xTickLabelRotation!==0}).addCustomEditor({id:"xTickLabelSpacing",path:"xTickLabelSpacing",name:(0,s.t)("barchart.config.name-x-label-min-spacing","X-axis labels minimum spacing"),defaultValue:Vt.xTickLabelSpacing,editor:Ie}).addRadio({path:"showValue",name:(0,s.t)("barchart.config.name-show-values","Show values"),settings:{options:[{value:i.yL.Auto,label:(0,s.t)("barchart.config.show-values-options.label-auto","Auto")},{value:i.yL.Always,label:(0,s.t)("barchart.config.show-values-options.label-always","Always")},{value:i.yL.Never,label:(0,s.t)("barchart.config.show-values-options.label-never","Never")}]},defaultValue:Vt.showValue}).addRadio({path:"stacking",name:(0,s.t)("barchart.config.name-stacking","Stacking"),settings:{options:(0,F.P)().stacking},defaultValue:Vt.stacking}).addSliderInput({path:"groupWidth",name:(0,s.t)("barchart.config.name-group-width","Group width"),defaultValue:Vt.groupWidth,settings:{min:0,max:1,step:.01},showIf:(o,r)=>o.stacking&&o.stacking!==i.gs.None?!1:Ye(r)!==1}).addSliderInput({path:"barWidth",name:(0,s.t)("barchart.config.name-bar-width","Bar width"),defaultValue:Vt.barWidth,settings:{min:0,max:1,step:.01}}).addSliderInput({path:"barRadius",name:(0,s.t)("barchart.config.name-bar-radius","Bar radius"),defaultValue:Vt.barRadius,settings:{min:0,max:.5,step:.05}}).addBooleanSwitch({path:"fullHighlight",name:(0,s.t)("barchart.config.name-full-highlight","Highlight full area on hover"),defaultValue:Vt.fullHighlight,showIf:o=>o.stacking===i.gs.None}),e.addFieldNamePicker({path:"colorByField",name:(0,s.t)("barchart.config.name-color-by-field","Color by field"),description:(0,s.t)("barchart.config.description-color-by-field","Use the color value for a sibling field to color each bar value.")}),k.D(e,!1,!1,k.U),Q.H(e),Ft.I(e,!1)}).setSuggestionsSupplier(new Ze);function Ye(e){let o=0;if(e)for(const r of e)for(const P of r.fields)P.type===b.PU.number&&o++;return o}},41530:(Xt,dt,t)=>{t.d(dt,{A:()=>L});var m=t(74848),x=t(22803),w=t(63142),rt=t(77239);const L=({item:s,isPinned:i})=>{const F=(0,w.of)(b),{label:G,value:J,color:k,colorIndicator:Q}=s;return(0,m.jsx)("div",{className:F.wrapper,children:(0,m.jsx)(rt.B,{label:G,value:J,color:k,colorIndicator:Q,marginRight:"22px",isPinned:i})})},b=s=>({wrapper:(0,x.css)({display:"flex",flexDirection:"column",flex:1,padding:s.spacing(1),lineHeight:1})})},47466:(Xt,dt,t)=>{t.d(dt,{o:()=>L});var m=t(74848),x=t(22803),w=t(63142),rt=t(77239);const L=({items:s,children:i,isPinned:F,scrollable:G=!1,maxHeight:J})=>{const k=(0,w.of)(b),Q=G?{maxHeight:J,overflowY:"auto"}:{};return(0,m.jsxs)("div",{className:k.wrapper,style:Q,children:[s.map(({label:Ft,value:pt,color:u,colorIndicator:D,colorPlacement:Y,isActive:N,lineStyle:n,isHiddenFromViz:p},g)=>(0,m.jsx)(rt.B,{label:Ft,value:pt,color:u,colorIndicator:D,colorPlacement:Y,isActive:N,justify:"space-between",isPinned:F,lineStyle:n,showValueScroll:!G,isHiddenFromViz:p},g)),i]})},b=s=>({wrapper:(0,x.css)({display:"flex",flexDirection:"column",flex:1,gap:2,borderTop:`1px solid ${s.colors.border.weak}`,padding:s.spacing(1)})})},76234:(Xt,dt,t)=>{t.d(dt,{B_:()=>J,Fg:()=>Ft,O2:()=>Q,T5:()=>pt});var m=t(16515),x=t(11576),w=t(63409),rt=t(34455),L=t(55386),b=t(95004),s=t(406),i=t(739),F=t(70332);function G(u){let D=new Map;return u.map(N=>({...N,fields:N.fields.map(n=>{if(n.type===b.PU.enum){let p=(0,F.M)(n.config,n.type),g=D.get(p);g||(g=[],D.set(p,g));let V=n.values.toArray().slice(),z=n.config.type.enum.text;if(g.length>0)for(let O=0;O<V.length;O++)V[O]+=g.length;return g.push(...z),n.config.type.enum.text=g,{...n,values:V}}return n})}))}function J(u,D,Y,N){if(!u?.length)return null;(0,m.Fm)(u);let n=N!=null;N!=null&&N>0&&(u=[{...u[0],fields:[u[0].fields[N],...u[0].fields.filter((z,O)=>O!==N)]}]);for(let z of u)for(let O of z.fields)O.type===b.PU.time&&typeof O.values[0]!="number"&&(O.values=(0,s.s7)(O,{destinationType:b.PU.time}).values);let p=0;t:for(let z of u)for(let O of z.fields)if(O.type===b.PU.enum&&++p>1){u=G(u);break t}let g;const V=[];for(let z of u){const O=[];let mt=!1,Ct=!1,it=n?z:(0,w.M)({frame:z,refFieldPseudoMin:Y?.from.valueOf(),refFieldPseudoMax:Y?.to.valueOf()});const xt=(0,rt.C)(it).fields;for(let Mt=0;Mt<(xt?.length||0);Mt++){const q=xt[Mt];switch(q.type){case b.PU.time:mt=!0,O.push(q);break;case b.PU.number:Ct=n?Mt>0:!0,g={...q,values:q.values.map(_=>Number.isFinite(_)||_==null?_:null)},O.push(g);break;case b.PU.enum:Ct=!0;case b.PU.string:g={...q,values:q.values},O.push(g);break;case b.PU.boolean:Ct=!0;const $=q.config?.custom??{},vt={...q.config,max:1,min:0,custom:$};$.lineInterpolation!==i.dx.StepBefore&&($.lineInterpolation=i.dx.StepAfter),g={...q,config:vt,type:b.PU.number,values:q.values.map(_=>_==null?_:_?1:0)},(0,L.j9)(vt.unit)||(vt.unit="bool",g.display=(0,x.J)({field:g,theme:D})),O.push(g);break}}(n||mt)&&Ct&&V.push({...z,length:it.length,fields:O})}return V.length?(Q(V,D,0),k(V,D),V):null}const k=(u,D)=>{const{palette:Y}=D.visualization;for(const N of u)for(const n of N.fields)if(n.type===b.PU.enum){const p=Y[n.state?.seriesIndex%Y.length],g=D.visualization.getColorByName(p),V=n.config.type.enum;V.color=Array(V.text.length).fill(g),n.display=(0,x.J)({field:n,theme:D})}},Q=(u,D,Y)=>{let N=0;u.forEach(n=>{n.fields.forEach((p,g)=>{g!==Y&&(p.type===b.PU.number||p.type===b.PU.boolean||p.type===b.PU.enum)&&(p.state={...p.state,seriesIndex:N++},p.display=(0,x.J)({field:p,theme:D}))})})};function Ft(u,D){return!u||!u.length?[D]:u.map(Y=>Y?.length?Y:D)}const pt=u=>u.mode===i.$N.Multi&&u.maxHeight!=null},77239:(Xt,dt,t)=>{t.d(dt,{B:()=>Y});var m=t(74848),x=t(22803),w=t(96540),rt=t(63142),L=t(53371),b=t(45967),s=t(64394),i=t(71479),F=t(55978),G=t(55302),J=(n=>(n[n.Leading=0]="Leading",n[n.Trailing=1]="Trailing",n))(J||{});const k=({color:n=s.F,colorIndicator:p=F.Ev,position:g=0,lineStyle:V,isHollow:z})=>{const O=(0,rt.of)(Q);return z?(0,m.jsx)("div",{style:{border:`1px solid ${n}`},className:(0,x.cx)(g===0?O.leading:O.trailing,(0,G.L$)(p,O))}):p===F.fX.series?(0,m.jsx)(i.p,{color:n,lineStyle:V,className:g===0?O.leading:O.trailing}):(0,m.jsx)("span",{style:{backgroundColor:n},className:(0,x.cx)(g===0?O.leading:O.trailing,(0,G.L$)(p,O))})},Q=n=>({leading:(0,x.css)({marginRight:n.spacing(.5)}),trailing:(0,x.css)({marginLeft:n.spacing(.5)}),series:(0,x.css)({width:"14px",height:"4px",borderRadius:n.shape.radius.pill,minWidth:"14px"}),value:(0,x.css)({width:"12px",height:"12px",borderRadius:n.shape.radius.default,fontWeight:500,minWidth:"12px"}),hexagon:(0,x.css)({}),pie_1_4:(0,x.css)({}),pie_2_4:(0,x.css)({}),pie_3_4:(0,x.css)({}),marker_sm:(0,x.css)({width:"4px",height:"4px",borderRadius:n.shape.radius.circle,minWidth:"4px"}),marker_md:(0,x.css)({width:"8px",height:"8px",borderRadius:n.shape.radius.circle,minWidth:"8px"}),marker_lg:(0,x.css)({width:"12px",height:"12px",borderRadius:n.shape.radius.circle,minWidth:"12px"})});var Ft=(n=>(n.label="label",n.value="value",n))(Ft||{});const pt="Copied to clipboard",u=2*1e3,D=7,Y=({label:n,value:p,color:g,colorIndicator:V,colorPlacement:z=F.lJ.first,justify:O="flex-start",isActive:mt=!1,marginRight:Ct="0px",isPinned:it,lineStyle:xt,showValueScroll:Mt,isHiddenFromViz:q})=>{const $=(0,rt.of)(N,O,Ct),vt=Mt?{maxHeight:55,whiteSpace:"wrap",wordBreak:"break-word",overflowY:"auto"}:{whiteSpace:"pre-line",wordBreak:"break-word",lineHeight:1.2},[_,Jt]=(0,w.useState)(!1),[Wt,ct]=(0,w.useState)(null),[It,ie]=(0,w.useState)(!1),ae=(0,w.useRef)(null),jt=(0,w.useRef)(null);(0,w.useEffect)(()=>{let ft;return It&&(ft=setTimeout(()=>{ie(!1)},u)),()=>{window.clearTimeout(ft)}},[It]);const re=async(ft,Qt)=>{if(!(navigator?.clipboard&&window.isSecureContext)){ge(ft,Qt);return}try{await navigator.clipboard.writeText(ft),ct({[`${Qt}`]:ft}),ie(!0)}catch{ct(null)}},ge=(ft,Qt)=>{const wt=document.createElement("textarea");ae.current?.appendChild(wt),wt.value=ft,wt.focus(),wt.select();try{document.execCommand("copy")&&(ct({[`${Qt}`]:ft}),ie(!0))}catch(Dt){console.error("Unable to copy to clipboard",Dt)}wt.remove()},pe=ft=>{ft.currentTarget.offsetWidth<ft.currentTarget.scrollWidth&&Jt(!0)},me=()=>Jt(!1);return n.length*D>window.innerWidth/2&&(n=n.replaceAll("{",`{
  `).replaceAll("}",`
}`).replaceAll(", ",`,
  `)),(0,m.jsxs)("div",{className:$.contentWrapper,children:[(g||n)&&(0,m.jsxs)("div",{className:$.valueWrapper,children:[g&&z===F.lJ.first&&(0,m.jsx)(k,{color:g,colorIndicator:V,lineStyle:xt,isHollow:q}),it?(0,m.jsx)(m.Fragment,{children:(0,m.jsx)(b.m,{content:n,interactive:!1,show:_,children:(0,m.jsxs)(m.Fragment,{children:[It&&Wt?.label&&(0,m.jsx)(L.r,{placement:"top",referenceElement:ae.current,children:pt}),(0,m.jsx)("div",{className:(0,x.cx)($.label,mt&&$.activeSeries,navigator?.clipboard&&$.copy),onMouseEnter:pe,onMouseLeave:me,onClick:()=>re(n,"label"),ref:ae,children:n})]})})}):(0,m.jsx)("div",{className:(0,x.cx)($.label,mt&&$.activeSeries),children:n})]}),(0,m.jsxs)("div",{className:$.valueWrapper,children:[g&&z===F.lJ.leading&&(0,m.jsx)(k,{color:g,colorIndicator:V,position:J.Leading,lineStyle:xt}),it?(0,m.jsxs)(m.Fragment,{children:[It&&Wt?.value&&(0,m.jsx)(L.r,{placement:"top",referenceElement:jt.current,children:pt}),(0,m.jsx)("div",{className:(0,x.cx)($.value,mt,navigator?.clipboard&&$.copy),style:vt,onClick:()=>re(p?p.toString():"","value"),ref:jt,children:p})]}):(0,m.jsx)("div",{className:(0,x.cx)($.value,mt),style:vt,children:p}),g&&z===F.lJ.trailing&&(0,m.jsx)(k,{color:g,colorIndicator:V,position:J.Trailing,lineStyle:xt})]})]})},N=(n,p,g)=>({contentWrapper:(0,x.css)({display:"flex",alignItems:"start",justifyContent:p,marginRight:g}),label:(0,x.css)({color:n.colors.text.secondary,fontWeight:400,textOverflow:"ellipsis",overflow:"hidden",marginRight:n.spacing(2)}),value:(0,x.css)({fontWeight:500,textOverflow:"ellipsis",overflow:"hidden"}),valueWrapper:(0,x.css)({display:"flex",alignItems:"center"}),activeSeries:(0,x.css)({fontWeight:n.typography.fontWeightBold,color:n.colors.text.maxContrast}),copy:(0,x.css)({cursor:"pointer"})})},78308:(Xt,dt,t)=>{t.d(dt,{k:()=>k});var m=t(74848),x=t(55386),w=t(95004),rt=t(739),L=t(47466),b=t(39064),s=t(41530),i=t(61048),F=t(55302),G=t(16913),J=t(76234);const k=({series:Q,_rest:Ft,dataIdxs:pt,seriesIdx:u,mode:D=rt.$N.Single,sortOrder:Y=rt.xB.None,isPinned:N,annotate:n,maxHeight:p,replaceVariables:g=it=>it,dataLinks:V,hideZeros:z,adHocFilters:O,canExecuteActions:mt,compareDiffMs:Ct})=>{const it=Q.fields[0];let xt=it.values[pt[0]];Ct!=null&&it.type===w.PU.time&&(xt+=Ct[u??1]);const Mt=(0,x.cN)(it.display(xt)),q=(0,F.cp)(Q.fields,it,pt,u,D,Y,_=>_.type===w.PU.number||_.type===w.PU.enum,z,Ft);let $;if(u!=null){const _=Q.fields[u],Jt=V.some(Wt=>Wt.oneClick===!0);if(N||Jt){const Wt=pt[u],ct=mt?(0,G.OG)(Q,_,g,Wt):[];$=(0,m.jsx)(b.S,{dataLinks:V,actions:ct,annotate:n,adHocFilters:O})}}const vt={label:it.type===w.PU.time?"":it.state?.displayName??it.name,value:Mt};return(0,m.jsxs)(i.i,{children:[vt!=null&&(0,m.jsx)(s.A,{item:vt,isPinned:N}),(0,m.jsx)(L.o,{items:q,isPinned:N,scrollable:(0,J.T5)({mode:D,maxHeight:p}),maxHeight:p}),$]})}}}]);

//# sourceMappingURL=barChartPanel.67a9cab4162fa0a60382.js.map