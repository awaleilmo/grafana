{"version":3,"file":"6436.2cba2dd66e0889ecb5f5.js","mappings":"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","sources":["webpack://grafana/./public/app/features/browse-dashboards/components/customFlexTableLayout.ts","webpack://grafana/./public/app/features/search/page/components/ExplainScorePopup.tsx","webpack://grafana/./public/app/features/search/page/components/columns.tsx","webpack://grafana/./public/app/features/search/page/components/SearchResultsTable.tsx"],"sourcesContent":["import { Hooks, UseTableColumnProps } from 'react-table';\n\n/**\n * Simplified flex layout module for react-table.\n * Uses the width of the column as the flex grow amount - the ratio of width between all columns\n *\n * Width of 0 for 'auto' width - useful for columns of fixed with that should shrink to the size\n * of content\n *\n * Originally based on https://github.com/TanStack/table/blob/v7/src/plugin-hooks/useFlexLayout.js\n */\nexport function useCustomFlexLayout<D extends object>(hooks: Hooks<D>) {\n  hooks.getRowProps.push((props) => [props, getRowStyles()]);\n  hooks.getHeaderGroupProps.push((props) => [props, getRowStyles()]);\n  hooks.getFooterGroupProps.push((props) => [props, getRowStyles()]);\n  hooks.getHeaderProps.push((props, { column }) => [props, getColumnStyleProps(column)]);\n  hooks.getCellProps.push((props, { cell }) => [props, getColumnStyleProps(cell.column)]);\n  hooks.getFooterProps.push((props, { column }) => [props, getColumnStyleProps(column)]);\n}\n\nuseCustomFlexLayout.pluginName = 'useCustomFlexLayout';\n\nfunction getColumnStyleProps<D extends object>(column: UseTableColumnProps<D>) {\n  return {\n    style: {\n      flex:\n        column.totalWidth === 0\n          ? // if width: 0, prevent the column from growing (or shrinking), and set basis to auto to\n            // fit column to the width of its content\n            '0 0 auto'\n          : // Otherwise, grow the content to a size in proportion to the other column widths\n            `${column.totalWidth} 0 0`,\n    },\n  };\n}\n\nfunction getRowStyles() {\n  return {\n    style: {\n      display: 'flex',\n      flex: '1 0 auto',\n    },\n  };\n}\n","import { useState } from 'react';\n\nimport { DataFrame } from '@grafana/data';\nimport { CodeEditor, Modal, ModalTabsHeader, TabContent } from '@grafana/ui';\nimport { DataHoverView } from 'app/features/visualization/data-hover/DataHoverView';\n\nexport interface Props {\n  name: string;\n  explain: {};\n  frame: DataFrame;\n  row: number;\n}\n\nconst tabs = [\n  { label: 'Score', value: 'score' },\n  { label: 'Fields', value: 'fields' },\n  { label: 'Allowed actions', value: 'allowed_actions' },\n];\n\nexport function ExplainScorePopup({ name, explain, frame, row }: Props) {\n  const [isOpen, setOpen] = useState<boolean>(true);\n  const [activeTab, setActiveTab] = useState('score');\n\n  const modalHeader = (\n    <ModalTabsHeader\n      title={name}\n      icon={'info'}\n      tabs={tabs}\n      activeTab={activeTab}\n      onChangeTab={(t) => {\n        setActiveTab(t.value);\n      }}\n    />\n  );\n\n  return (\n    <Modal title={modalHeader} isOpen={isOpen} onDismiss={() => setOpen(false)} closeOnBackdropClick closeOnEscape>\n      <TabContent>\n        {activeTab === tabs[0].value && (\n          <CodeEditor\n            width=\"100%\"\n            height=\"70vh\"\n            language=\"json\"\n            showLineNumbers={false}\n            showMiniMap={true}\n            value={JSON.stringify(explain, null, 2)}\n            readOnly={false}\n          />\n        )}\n        {activeTab === tabs[1].value && (\n          <div>\n            <DataHoverView data={frame} rowIndex={row} />\n          </div>\n        )}\n        {activeTab === tabs[2].value && (\n          <CodeEditor\n            width=\"100%\"\n            height=\"70vh\"\n            language=\"json\"\n            showLineNumbers={false}\n            showMiniMap={false}\n            value={(() => {\n              const allowedActions = frame.fields.find((f) => f.name === 'allowed_actions')?.values?.[row];\n              const dsUids = frame.fields.find((f) => f.name === 'ds_uid')?.values?.[row];\n              return JSON.stringify({ dsUids: dsUids ?? [], allowedActions: allowedActions ?? [] }, null, 2);\n            })()}\n            readOnly={false}\n          />\n        )}\n      </TabContent>\n    </Modal>\n  );\n}\n","import { cx } from '@emotion/css';\nimport { intervalToDuration } from 'date-fns';\nimport Skeleton from 'react-loading-skeleton';\n\nimport {\n  DisplayProcessor,\n  Field,\n  FieldType,\n  formattedValueToString,\n  getDisplayProcessor,\n  getFieldDisplayName,\n} from '@grafana/data';\nimport { Trans, t } from '@grafana/i18n';\nimport { config, getDataSourceSrv } from '@grafana/runtime';\nimport { Checkbox, Icon, IconName, TagList, Text, Tooltip } from '@grafana/ui';\nimport appEvents from 'app/core/app_events';\nimport { formatDate, formatDuration } from 'app/core/internationalization/dates';\nimport { PluginIconName } from 'app/features/plugins/admin/types';\nimport { ShowModalReactEvent } from 'app/types/events';\n\nimport { QueryResponse, SearchResultMeta } from '../../service/types';\nimport { getIconForKind } from '../../service/utils';\nimport { SelectionChecker, SelectionToggle } from '../selection';\n\nimport { ExplainScorePopup } from './ExplainScorePopup';\nimport { TableColumn } from './SearchResultsTable';\n\nconst TYPE_COLUMN_WIDTH = 175;\nconst DURATION_COLUMN_WIDTH = 200;\nconst DATASOURCE_COLUMN_WIDTH = 200;\n\nexport const generateColumns = (\n  response: QueryResponse,\n  availableWidth: number,\n  selection: SelectionChecker | undefined,\n  selectionToggle: SelectionToggle | undefined,\n  clearSelection: () => void,\n  styles: { [key: string]: string },\n  onTagSelected: (tag: string) => void,\n  onDatasourceChange?: (datasource?: string) => void,\n  showingEverything?: boolean\n): TableColumn[] => {\n  const columns: TableColumn[] = [];\n  const access = response.view.fields;\n  const uidField = access.uid;\n  const kindField = access.kind;\n  let sortFieldWith = 0;\n  const sortField: Field = access[response.view.dataFrame.meta?.custom?.sortBy];\n  if (sortField) {\n    sortFieldWith = 175;\n    if (sortField.type === FieldType.time) {\n      sortFieldWith += 25;\n    }\n    availableWidth -= sortFieldWith; // pre-allocate the space for the last column\n  }\n\n  if (access.explain && access.score) {\n    availableWidth -= 100; // pre-allocate the space for the last column\n  }\n\n  let width = 50;\n  if (selection && selectionToggle) {\n    width = 0;\n    columns.push({\n      id: `column-checkbox`,\n      width,\n      Header: () => {\n        const { view } = response;\n        const hasSelection = selection('*', '*');\n        const allSelected = view.every((item) => selection(item.kind, item.uid));\n        return (\n          <Checkbox\n            indeterminate={!allSelected && hasSelection}\n            checked={allSelected}\n            disabled={!response}\n            onChange={(e) => {\n              if (hasSelection) {\n                clearSelection();\n              } else {\n                for (let i = 0; i < view.length; i++) {\n                  const item = view.get(i);\n                  selectionToggle(item.kind, item.uid);\n                }\n              }\n            }}\n          />\n        );\n      },\n      Cell: (p) => {\n        const uid = uidField.values[p.row.index];\n        const kind = kindField ? kindField.values[p.row.index] : 'dashboard'; // HACK for now\n        const selected = selection(kind, uid);\n        const hasUID = uid != null; // Panels don't have UID! Likely should not be shown on pages with manage options\n        const { key, ...cellProps } = p.cellProps;\n        return (\n          <div key={key} {...cellProps} className={styles.cell}>\n            <Checkbox\n              disabled={!hasUID}\n              value={selected && hasUID}\n              onChange={(e) => {\n                selectionToggle(kind, uid);\n              }}\n            />\n          </div>\n        );\n      },\n      field: uidField,\n    });\n    availableWidth -= width;\n  }\n\n  // Name column\n  width = Math.max(availableWidth * 0.2, 300);\n  columns.push({\n    Cell: (p) => {\n      let classNames = cx(styles.nameCellStyle);\n      let name = access.name.values[p.row.index];\n      const isDeleted = access.isDeleted?.values[p.row.index];\n\n      if (!name?.length) {\n        const loading = p.row.index >= response.view.dataFrame.length;\n        name = loading ? 'Loading...' : 'Missing title'; // normal for panels\n        classNames += ' ' + styles.missingTitleText;\n      }\n      const { key, ...cellProps } = p.cellProps;\n\n      return (\n        <div key={key} className={styles.cell} {...cellProps}>\n          {!response.isItemLoaded(p.row.index) ? (\n            <Skeleton width={200} />\n          ) : isDeleted ? (\n            <span className={classNames}>{name}</span>\n          ) : (\n            <a href={p.userProps.href} onClick={p.userProps.onClick} className={classNames} title={name}>\n              {name}\n            </a>\n          )}\n        </div>\n      );\n    },\n    id: `column-name`,\n    field: access.name!,\n    Header: () => <div>{t('search.results-table.name-header', 'Name')}</div>,\n    width,\n  });\n  availableWidth -= width;\n\n  const showDeletedRemaining =\n    response.view.fields.permanentlyDeleteDate && hasValue(response.view.fields.permanentlyDeleteDate);\n\n  if (showDeletedRemaining && access.permanentlyDeleteDate) {\n    width = DURATION_COLUMN_WIDTH;\n    columns.push(makeDeletedRemainingColumn(response, access.permanentlyDeleteDate, width, styles));\n    availableWidth -= width;\n  } else {\n    width = TYPE_COLUMN_WIDTH;\n    columns.push(makeTypeColumn(response, access.kind, access.panel_type, width, styles));\n    availableWidth -= width;\n  }\n\n  // Show datasources if we have any\n  if (access.ds_uid && onDatasourceChange) {\n    width = Math.min(availableWidth / 2.5, DATASOURCE_COLUMN_WIDTH);\n    columns.push(\n      makeDataSourceColumn(\n        access.ds_uid,\n        width,\n        styles.typeIcon,\n        styles.datasourceItem,\n        styles.invalidDatasourceItem,\n        onDatasourceChange\n      )\n    );\n    availableWidth -= width;\n  }\n\n  const showTags = !showingEverything || hasValue(response.view.fields.tags);\n  const meta = response.view.dataFrame.meta?.custom as SearchResultMeta;\n  if (meta?.locationInfo && availableWidth > 0) {\n    width = showTags ? Math.max(availableWidth / 1.75, 300) : availableWidth;\n    availableWidth -= width;\n    columns.push({\n      Cell: (p) => {\n        const parts = (access.location?.values[p.row.index] ?? '').split('/');\n        const { key, ...cellProps } = p.cellProps;\n        return (\n          <div key={key} {...cellProps} className={styles.cell}>\n            {!response.isItemLoaded(p.row.index) ? (\n              <Skeleton width={150} />\n            ) : (\n              <div className={styles.locationContainer}>\n                {parts.map((p) => {\n                  let info = meta.locationInfo[p];\n                  if (!info && p === 'general') {\n                    info = { kind: 'folder', url: '/dashboards', name: 'Dashboards' };\n                  }\n\n                  if (info) {\n                    const content = (\n                      <>\n                        <Icon name={getIconForKind(info.kind)} />\n\n                        <Text variant=\"body\" truncate>\n                          {info.name}\n                        </Text>\n                      </>\n                    );\n\n                    if (info.url) {\n                      return (\n                        <a key={p} href={info.url} className={styles.locationItem}>\n                          {content}\n                        </a>\n                      );\n                    }\n\n                    return (\n                      <div key={p} className={styles.locationItem}>\n                        {content}\n                      </div>\n                    );\n                  }\n\n                  return <span key={p}>{p}</span>;\n                })}\n              </div>\n            )}\n          </div>\n        );\n      },\n      id: `column-location`,\n      field: access.location ?? access.url,\n      Header: t('search.results-table.location-header', 'Location'),\n      width,\n    });\n  }\n\n  if (availableWidth > 0 && showTags) {\n    columns.push(makeTagsColumn(response, access.tags, availableWidth, styles, onTagSelected));\n  }\n\n  if (sortField && sortFieldWith) {\n    const disp = sortField.display ?? getDisplayProcessor({ field: sortField, theme: config.theme2 });\n\n    columns.push({\n      Header: getFieldDisplayName(sortField),\n      Cell: (p) => {\n        const { key, ...cellProps } = p.cellProps;\n        return (\n          <div key={key} {...cellProps} className={styles.cell}>\n            {getDisplayValue({\n              sortField,\n              getDisplay: disp,\n              index: p.row.index,\n              kind: access.kind,\n            })}\n          </div>\n        );\n      },\n      id: `column-sort-field`,\n      field: sortField,\n      width: sortFieldWith,\n    });\n  }\n\n  if (access.explain && access.score) {\n    const vals = access.score.values;\n    const showExplainPopup = (row: number) => {\n      appEvents.publish(\n        new ShowModalReactEvent({\n          component: ExplainScorePopup,\n          props: {\n            name: access.name.values[row],\n            explain: access.explain.values[row],\n            frame: response.view.dataFrame,\n            row: row,\n          },\n        })\n      );\n    };\n\n    columns.push({\n      Header: () => (\n        <div className={styles.sortedHeader}>\n          <Trans i18nKey=\"search.generate-columns.score\">Score</Trans>\n        </div>\n      ),\n      Cell: (p) => {\n        const { key, ...cellProps } = p.cellProps;\n        return (\n          // TODO: fix keyboard a11y\n          // eslint-disable-next-line jsx-a11y/click-events-have-key-events, jsx-a11y/no-static-element-interactions\n          <div\n            key={key}\n            {...cellProps}\n            className={cx(styles.cell, styles.explainItem)}\n            onClick={() => showExplainPopup(p.row.index)}\n          >\n            {vals[p.row.index]}\n          </div>\n        );\n      },\n      id: `column-score-field`,\n      field: access.score,\n      width: 100,\n    });\n  }\n\n  return columns;\n};\n\nfunction hasValue(f: Field): boolean {\n  for (let i = 0; i < f.values.length; i++) {\n    if (f.values[i] != null) {\n      return true;\n    }\n  }\n  return false;\n}\n\nfunction makeDataSourceColumn(\n  field: Field<string[]>,\n  width: number,\n  iconClass: string,\n  datasourceItemClass: string,\n  invalidDatasourceItemClass: string,\n  onDatasourceChange: (datasource?: string) => void\n): TableColumn {\n  const srv = getDataSourceSrv();\n  return {\n    id: `column-datasource`,\n    field,\n    Header: t('search.results-table.datasource-header', 'Data source'),\n    Cell: (p) => {\n      const dslist = field.values[p.row.index];\n      if (!dslist?.length) {\n        return null;\n      }\n      const { key, ...cellProps } = p.cellProps;\n      return (\n        <div key={key} {...cellProps} className={cx(datasourceItemClass)}>\n          {dslist.map((v, i) => {\n            const settings = srv.getInstanceSettings(v);\n            const icon = settings?.meta?.info?.logos?.small;\n            if (icon) {\n              return (\n                // TODO: fix keyboard a11y\n                // eslint-disable-next-line jsx-a11y/click-events-have-key-events, jsx-a11y/no-static-element-interactions\n                <span\n                  key={i}\n                  onClick={(e) => {\n                    e.stopPropagation();\n                    e.preventDefault();\n                    onDatasourceChange(settings.uid);\n                  }}\n                >\n                  <img src={icon} alt=\"\" width={14} height={14} title={settings.type} className={iconClass} />\n                  {settings.name}\n                </span>\n              );\n            }\n            return (\n              <span className={invalidDatasourceItemClass} key={i}>\n                {v}\n              </span>\n            );\n          })}\n        </div>\n      );\n    },\n    width,\n  };\n}\n\nfunction makeDeletedRemainingColumn(\n  response: QueryResponse,\n  deletedField: Field<Date | undefined>,\n  width: number,\n  styles: Record<string, string>\n): TableColumn {\n  return {\n    id: 'column-delete-age',\n    field: deletedField,\n    width,\n    Header: t('search.results-table.deleted-remaining-header', 'Time remaining'),\n    Cell: (p) => {\n      const i = p.row.index;\n      const deletedDate = deletedField.values[i];\n      const { key, ...cellProps } = p.cellProps;\n\n      if (!deletedDate || !response.isItemLoaded(p.row.index)) {\n        return (\n          <div key={key} {...cellProps} className={cx(styles.cell, styles.typeCell)}>\n            <Skeleton width={100} />\n          </div>\n        );\n      }\n\n      const duration = calcCoarseDuration(new Date(), deletedDate);\n      const isDeletingSoon = !Object.values(duration).some((v) => v > 0);\n      const formatted = isDeletingSoon\n        ? t('search.results-table.deleted-less-than-1-min', '< 1 min')\n        : formatDuration(duration, { style: 'long' });\n\n      return (\n        <div key={key} {...cellProps} className={cx(styles.cell, styles.typeCell)}>\n          <Tooltip content={formatDate(deletedDate, { dateStyle: 'medium', timeStyle: 'short' })}>\n            <span>{formatted}</span>\n          </Tooltip>\n        </div>\n      );\n    },\n  };\n}\n\nfunction makeTypeColumn(\n  response: QueryResponse,\n  kindField: Field<string>,\n  typeField: Field<string>,\n  width: number,\n  styles: Record<string, string>\n): TableColumn {\n  return {\n    id: `column-type`,\n    field: kindField ?? typeField,\n    Header: t('search.results-table.type-header', 'Type'),\n    Cell: (p) => {\n      const i = p.row.index;\n      const kind = kindField?.values[i] ?? 'dashboard';\n      let icon: IconName = 'apps';\n      let txt = 'Dashboard';\n      if (kind) {\n        txt = kind;\n        switch (txt) {\n          case 'dashboard':\n            txt = t('search.results-table.type-dashboard', 'Dashboard');\n            break;\n\n          case 'folder':\n            icon = 'folder';\n            txt = t('search.results-table.type-folder', 'Folder');\n            break;\n\n          case 'panel':\n            icon = `${PluginIconName.panel}`;\n            const type = typeField.values[i];\n            if (type) {\n              txt = type;\n              const info = config.panels[txt];\n              if (info?.name) {\n                txt = info.name;\n              } else {\n                switch (type) {\n                  case 'row':\n                    txt = 'Row';\n                    icon = `bars`;\n                    break;\n                  case 'singlestat': // auto-migration\n                    txt = 'Singlestat';\n                    break;\n                  default:\n                    icon = `question-circle`; // plugin not found\n                }\n              }\n            }\n            break;\n        }\n      }\n      const { key, ...cellProps } = p.cellProps;\n      return (\n        <div key={key} {...cellProps} className={cx(styles.cell, styles.typeCell)}>\n          {!response.isItemLoaded(p.row.index) ? (\n            <Skeleton width={100} />\n          ) : (\n            <>\n              <Icon name={icon} size=\"sm\" title={txt} className={styles.typeIcon} />\n              {txt}\n            </>\n          )}\n        </div>\n      );\n    },\n    width,\n  };\n}\n\nfunction makeTagsColumn(\n  response: QueryResponse,\n  field: Field<string[]>,\n  width: number,\n  styles: Record<string, string>,\n  onTagSelected: (tag: string) => void\n): TableColumn {\n  return {\n    Cell: (p) => {\n      const tags = field.values[p.row.index];\n      const { key, ...cellProps } = p.cellProps;\n      return (\n        <div key={key} {...cellProps} className={styles.cell}>\n          {!response.isItemLoaded(p.row.index) ? (\n            <TagList.Skeleton />\n          ) : (\n            <>{tags ? <TagList className={styles.tagList} tags={tags} onClick={onTagSelected} /> : null}</>\n          )}\n        </div>\n      );\n    },\n    id: `column-tags`,\n    field: field,\n    Header: t('search.results-table.tags-header', 'Tags'),\n    width,\n  };\n}\n\nfunction getDisplayValue({\n  kind,\n  sortField,\n  index,\n  getDisplay,\n}: {\n  kind: Field;\n  sortField: Field;\n  index: number;\n  getDisplay: DisplayProcessor;\n}) {\n  const value = sortField.values[index];\n  if (['folder', 'panel'].includes(kind.values[index]) && value === 0) {\n    return '-';\n  }\n  return formattedValueToString(getDisplay(value));\n}\n\n/**\n * Calculates the rough duration between two dates, keeping only the most significant unit\n */\nfunction calcCoarseDuration(start: Date, end: Date) {\n  let { years = 0, months = 0, days = 0, hours = 0, minutes = 0 } = intervalToDuration({ start, end });\n\n  if (years > 0) {\n    return { years };\n  } else if (months > 0) {\n    return { months };\n  } else if (days > 0) {\n    return { days };\n  } else if (hours > 0) {\n    return { hours };\n  }\n\n  return { minutes };\n}\n","import { css } from '@emotion/css';\nimport { useEffect, useMemo, useRef, useCallback, useState, CSSProperties } from 'react';\nimport * as React from 'react';\nimport { useTable, Column, TableOptions, Cell } from 'react-table';\nimport { FixedSizeList } from 'react-window';\nimport InfiniteLoader from 'react-window-infinite-loader';\nimport { Observable } from 'rxjs';\n\nimport { Field, GrafanaTheme2 } from '@grafana/data';\nimport { Trans, t } from '@grafana/i18n';\nimport { TableCellHeight } from '@grafana/schema';\nimport { useStyles2, useTheme2 } from '@grafana/ui';\nimport { useTableStyles, TableCell } from '@grafana/ui/internal';\nimport { useCustomFlexLayout } from 'app/features/browse-dashboards/components/customFlexTableLayout';\n\nimport { useSearchKeyboardNavigation } from '../../hooks/useSearchKeyboardSelection';\nimport { QueryResponse } from '../../service/types';\nimport { SelectionChecker, SelectionToggle } from '../selection';\n\nimport { generateColumns } from './columns';\n\nexport type SearchResultsProps = {\n  response: QueryResponse;\n  width: number;\n  height: number;\n  selection?: SelectionChecker;\n  selectionToggle?: SelectionToggle;\n  clearSelection: () => void;\n  onTagSelected: (tag: string) => void;\n  onDatasourceChange?: (datasource?: string) => void;\n  onClickItem?: (event: React.MouseEvent<HTMLElement>) => void;\n  keyboardEvents: Observable<React.KeyboardEvent>;\n};\n\nexport type TableColumn = Column & {\n  field?: Field;\n};\n\nconst ROW_HEIGHT = 36; // pixels\n\nexport const SearchResultsTable = React.memo(\n  ({\n    response,\n    width,\n    height,\n    selection,\n    selectionToggle,\n    clearSelection,\n    onTagSelected,\n    onDatasourceChange,\n    onClickItem,\n    keyboardEvents,\n  }: SearchResultsProps) => {\n    const styles = useStyles2(getStyles);\n    const columnStyles = useStyles2(getColumnStyles);\n    const tableStyles = useTableStyles(useTheme2(), TableCellHeight.Sm);\n    const infiniteLoaderRef = useRef<InfiniteLoader>(null);\n    const [listEl, setListEl] = useState<FixedSizeList | null>(null);\n    const highlightIndex = useSearchKeyboardNavigation(keyboardEvents, 0, response);\n\n    const memoizedData = useMemo(() => {\n      if (!response?.view?.dataFrame.fields.length) {\n        return [];\n      }\n\n      // as we only use this to fake the length of our data set for react-table we need to make sure we always return an array\n      // filled with values at each index otherwise we'll end up trying to call accessRow for null|undefined value in\n      // https://github.com/tannerlinsley/react-table/blob/7be2fc9d8b5e223fc998af88865ae86a88792fdb/src/hooks/useTable.js#L585\n      return Array(response.totalRows).fill(0);\n    }, [response]);\n\n    // Scroll to the top and clear loader cache when the query results change\n    useEffect(() => {\n      if (infiniteLoaderRef.current) {\n        infiniteLoaderRef.current.resetloadMoreItemsCache();\n      }\n      if (listEl) {\n        listEl.scrollTo(0);\n      }\n    }, [memoizedData, listEl]);\n\n    // React-table column definitions\n    const memoizedColumns = useMemo(() => {\n      return generateColumns(\n        response,\n        width,\n        selection,\n        selectionToggle,\n        clearSelection,\n        columnStyles,\n        onTagSelected,\n        onDatasourceChange,\n        response.view?.length >= response.totalRows\n      );\n    }, [response, width, columnStyles, selection, selectionToggle, clearSelection, onTagSelected, onDatasourceChange]);\n\n    const options: TableOptions<{}> = useMemo(\n      () => ({\n        columns: memoizedColumns,\n        data: memoizedData,\n      }),\n      [memoizedColumns, memoizedData]\n    );\n\n    const { getTableProps, getTableBodyProps, headerGroups, rows, prepareRow } = useTable(options, useCustomFlexLayout);\n\n    const handleLoadMore = useCallback(\n      async (startIndex: number, endIndex: number) => {\n        await response.loadMoreItems(startIndex, endIndex);\n\n        // After we load more items, select them if the \"select all\" checkbox\n        // is selected\n        const isAllSelected = selection?.('*', '*');\n        if (!selectionToggle || !selection || !isAllSelected) {\n          return;\n        }\n\n        for (let index = startIndex; index < response.view.length; index++) {\n          const item = response.view.get(index);\n          const itemIsSelected = selection(item.kind, item.uid);\n          if (!itemIsSelected) {\n            selectionToggle(item.kind, item.uid);\n          }\n        }\n      },\n      [response, selection, selectionToggle]\n    );\n\n    const RenderRow = useCallback(\n      ({ index: rowIndex, style }: { index: number; style: CSSProperties }) => {\n        const row = rows[rowIndex];\n        prepareRow(row);\n\n        const url = response.view.fields.url?.values[rowIndex];\n        let className = styles.rowContainer;\n        if (rowIndex === highlightIndex.y) {\n          className += ' ' + styles.selectedRow;\n        }\n        const { key, ...rowProps } = row.getRowProps({ style });\n\n        return (\n          <div key={key} {...rowProps} className={className}>\n            {row.cells.map((cell: Cell, index: number) => {\n              return (\n                <TableCell\n                  key={index}\n                  tableStyles={tableStyles}\n                  cell={cell}\n                  columnIndex={index}\n                  columnCount={row.cells.length}\n                  userProps={{ href: url, onClick: onClickItem }}\n                  frame={response.view.dataFrame}\n                />\n              );\n            })}\n          </div>\n        );\n      },\n      [\n        rows,\n        prepareRow,\n        response.view.fields.url?.values,\n        highlightIndex,\n        styles,\n        tableStyles,\n        onClickItem,\n        response.view.dataFrame,\n      ]\n    );\n\n    if (!rows.length) {\n      return (\n        <div className={styles.noData}>\n          <Trans i18nKey=\"search.search-results-table.no-data\">No values</Trans>\n        </div>\n      );\n    }\n\n    return (\n      <div\n        {...getTableProps()}\n        aria-label={t('search.search-results-table.aria-label-search-results-table', 'Search results table')}\n        role=\"table\"\n      >\n        {headerGroups.map((headerGroup) => {\n          const { key, ...headerGroupProps } = headerGroup.getHeaderGroupProps({\n            style: { width },\n          });\n\n          return (\n            <div key={key} {...headerGroupProps} className={styles.headerRow}>\n              {headerGroup.headers.map((column) => {\n                const { key, ...headerProps } = column.getHeaderProps();\n                return (\n                  <div key={key} {...headerProps} role=\"columnheader\" className={styles.headerCell}>\n                    {column.render('Header')}\n                  </div>\n                );\n              })}\n            </div>\n          );\n        })}\n\n        <div {...getTableBodyProps()}>\n          <InfiniteLoader\n            ref={infiniteLoaderRef}\n            isItemLoaded={response.isItemLoaded}\n            itemCount={rows.length}\n            loadMoreItems={handleLoadMore}\n          >\n            {({ onItemsRendered, ref }) => (\n              <FixedSizeList\n                ref={(innerRef) => {\n                  ref(innerRef);\n                  setListEl(innerRef);\n                }}\n                onItemsRendered={onItemsRendered}\n                height={height - ROW_HEIGHT}\n                itemCount={rows.length}\n                itemSize={tableStyles.rowHeight}\n                width={width}\n                style={{ overflow: 'hidden auto' }}\n              >\n                {RenderRow}\n              </FixedSizeList>\n            )}\n          </InfiniteLoader>\n        </div>\n      </div>\n    );\n  }\n);\nSearchResultsTable.displayName = 'SearchResultsTable';\n\nconst getStyles = (theme: GrafanaTheme2) => {\n  const rowHoverBg = theme.colors.action.hover;\n\n  return {\n    noData: css({\n      display: 'flex',\n      flexDirection: 'column',\n      alignItems: 'center',\n      justifyContent: 'center',\n      height: '100%',\n    }),\n    headerCell: css({\n      alignItems: 'center',\n      display: 'flex',\n      overflo: 'hidden',\n      padding: theme.spacing(1),\n    }),\n    headerRow: css({\n      backgroundColor: theme.colors.background.secondary,\n      display: 'flex',\n      gap: theme.spacing(1),\n      height: `${ROW_HEIGHT}px`,\n    }),\n    selectedRow: css({\n      backgroundColor: rowHoverBg,\n      boxShadow: `inset 3px 0px ${theme.colors.primary.border}`,\n    }),\n    rowContainer: css({\n      display: 'flex',\n      gap: theme.spacing(1),\n      height: `${ROW_HEIGHT}px`,\n      label: 'row',\n      '&:hover': {\n        backgroundColor: rowHoverBg,\n      },\n\n      \"&:not(:hover) div[role='cell']\": {\n        whiteSpace: 'nowrap',\n        overflow: 'hidden',\n        textOverflow: 'ellipsis',\n      },\n    }),\n  };\n};\n\n// CSS for columns from react table\nconst getColumnStyles = (theme: GrafanaTheme2) => {\n  return {\n    cell: css({\n      padding: theme.spacing(1),\n      overflow: 'hidden', // Required so flex children can do text-overflow: ellipsis\n      display: 'flex',\n      alignItems: 'center',\n    }),\n    nameCellStyle: css({\n      overflow: 'hidden',\n      textOverflow: 'ellipsis',\n      userSelect: 'text',\n      whiteSpace: 'nowrap',\n    }),\n    typeCell: css({\n      gap: theme.spacing(0.5),\n    }),\n    typeIcon: css({\n      fill: theme.colors.text.secondary,\n    }),\n    datasourceItem: css({\n      span: {\n        '&:hover': {\n          color: theme.colors.text.link,\n        },\n      },\n    }),\n    missingTitleText: css({\n      color: theme.colors.text.disabled,\n      fontStyle: 'italic',\n    }),\n    invalidDatasourceItem: css({\n      color: theme.colors.error.main,\n      textDecoration: 'line-through',\n    }),\n    locationContainer: css({\n      display: 'flex',\n      flexWrap: 'nowrap',\n      gap: theme.spacing(1),\n      overflow: 'hidden',\n    }),\n    locationItem: css({\n      alignItems: 'center',\n      color: theme.colors.text.secondary,\n      display: 'flex',\n      flexWrap: 'nowrap',\n      gap: '4px',\n      overflow: 'hidden',\n    }),\n    explainItem: css({\n      cursor: 'pointer',\n    }),\n    tagList: css({\n      justifyContent: 'flex-start',\n      flexWrap: 'nowrap',\n    }),\n  };\n};\n"],"names":["useCustomFlexLayout","hooks","props","getRowStyles","column","getColumnStyleProps","cell","tabs","ExplainScorePopup","name","explain","frame","row","isOpen","setOpen","activeTab","setActiveTab","modalHeader","ModalTabsHeader","t","Modal","TabContent","CodeEditor","DataHoverView","allowedActions","f","dsUids","TYPE_COLUMN_WIDTH","DURATION_COLUMN_WIDTH","DATASOURCE_COLUMN_WIDTH","generateColumns","response","availableWidth","selection","selectionToggle","clearSelection","styles","onTagSelected","onDatasourceChange","showingEverything","columns","access","uidField","kindField","sortFieldWith","sortField","width","view","hasSelection","allSelected","item","Checkbox","e","i","p","uid","kind","selected","hasUID","key","cellProps","classNames","isDeleted","hasValue","makeDeletedRemainingColumn","makeTypeColumn","makeDataSourceColumn","showTags","meta","parts","info","content","Icon","Text","makeTagsColumn","disp","config","getDisplayValue","vals","showExplainPopup","field","iconClass","datasourceItemClass","invalidDatasourceItemClass","srv","dslist","v","settings","icon","deletedField","deletedDate","duration","calcCoarseDuration","formatted","Tooltip","typeField","txt","type","tags","TagList","index","getDisplay","value","start","end","years","months","days","hours","minutes","intervalToDuration","ROW_HEIGHT","SearchResultsTable","height","onClickItem","keyboardEvents","getStyles","columnStyles","getColumnStyles","tableStyles","infiniteLoaderRef","listEl","setListEl","highlightIndex","memoizedData","memoizedColumns","options","getTableProps","getTableBodyProps","headerGroups","rows","prepareRow","handleLoadMore","startIndex","endIndex","isAllSelected","RenderRow","rowIndex","style","url","className","rowProps","TableCell","headerGroup","headerGroupProps","headerProps","onItemsRendered","ref","innerRef","theme","rowHoverBg"],"sourceRoot":""}