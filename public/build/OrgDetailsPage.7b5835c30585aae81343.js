"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[1510],{73318:(E,d,n)=>{n.r(d),n.d(d,{OrgDetailsPage:()=>C,default:()=>R});var r=n(74848),P=n(96540),u=n(71468),e=n(92745),O=n(41654),c=n(13791),p=n(13126),o=n(73427),m=n(84057),a=n(11257),v=n(87745),i=n(16780),x=n(37386),z=n(63527),g=n(45861),f=n(74410);const y=({onSubmit:l,orgName:t})=>{const h=o.TP.hasPermission(a.w.OrgsWrite);return(0,r.jsx)(f.l,{defaultValues:{orgName:t},onSubmit:({orgName:s})=>l(s),children:({register:s})=>(0,r.jsxs)(i.n,{label:(0,e.t)("org.org-profile.label-organization-profile","Organization profile"),disabled:!h,children:[(0,r.jsx)(x.D,{label:(0,e.t)("org.org-profile.label-organization-name","Organization name"),children:(0,r.jsx)(z.p,{id:"org-name-input",type:"text",...s("orgName",{required:!0})})}),(0,r.jsx)(g.$n,{type:"submit",children:(0,r.jsx)(e.x6,{i18nKey:"org.org-profile.update-organization-name",children:"Update organization name"})})]})})};var D=n(93922),T=n(74396);class C extends P.PureComponent{constructor(){super(...arguments),this.onUpdateOrganization=t=>{this.props.setOrganizationName(t),this.props.updateOrganization()},this.handleConfirm=()=>new Promise(t=>{o.lE.publish(new v.bY({title:(0,e.t)("org.org-details-page.title.confirm-preferences-update","Confirm preferences update"),text:"This will update the preferences for the whole organization. Are you sure you want to update the preferences?",yesText:"Save",yesButtonVariant:"primary",onConfirm:async()=>t(!0),onDismiss:async()=>t(!1)}))})}async componentDidMount(){await this.props.loadOrganization()}render(){const{navModel:t,organization:h}=this.props,s=Object.keys(h).length===0,U=o.TP.hasPermission(a.w.OrgsRead),B=o.TP.hasPermission(a.w.OrgsPreferencesRead),N=o.TP.hasPermission(a.w.OrgsPreferencesWrite);return(0,r.jsx)(c.Y,{navModel:t,children:(0,r.jsx)(c.Y.Contents,{isLoading:s,children:!s&&(0,r.jsxs)(O.B,{direction:"column",gap:3,children:[U&&(0,r.jsx)(y,{onSubmit:this.onUpdateOrganization,orgName:h.name}),B&&(0,r.jsx)(p.A,{resourceUri:"org",disabled:!N,preferenceType:"org",onConfirm:this.handleConfirm})]})})})}}function S(l){return{navModel:(0,m.tc)(l.navIndex,"org-settings"),organization:l.organization.organization}}const M={loadOrganization:D.YS,setOrganizationName:T.n,updateOrganization:D.L_},R=(0,u.connect)(S,M)(C)},74410:(E,d,n)=>{n.d(d,{l:()=>O});var r=n(74848),P=n(22803),u=n(96540),e=n(49785);function O({defaultValues:c,onSubmit:p,validateOnMount:o=!1,validateFieldsOnMount:m,children:a,validateOn:v="onSubmit",maxWidth:i=600,...x}){const{handleSubmit:z,trigger:g,formState:f,...j}=(0,e.mN)({mode:v,defaultValues:c});return(0,u.useEffect)(()=>{o&&g(m)},[g,m,o]),(0,r.jsx)("form",{className:(0,P.css)({maxWidth:i!=="none"?i+"px":i,width:"100%"}),onSubmit:z(p),...x,children:a({errors:f.errors,formState:f,trigger:g,...j})})}}}]);

//# sourceMappingURL=OrgDetailsPage.7b5835c30585aae81343.js.map