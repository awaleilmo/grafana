"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[8706],{46485:(It,pt,w)=>{w.d(pt,{mn:()=>Z,ur:()=>k});var z=w(79243);const k=1,at=2,lt=3,E=(M,f,u,g)=>(0,z.h)(f+M*(u+g),6);function Z(M,f,u,g,m){let x=1-f,v=u===k?x/(M-1):u===at?x/M:u===lt?x/(M+1):0;(isNaN(v)||v===1/0)&&(v=0);let F=u===k?0:u===at?v/2:u===lt?v:0,K=f/M,q=(0,z.h)(K,6);if(g==null)for(let X=0;X<M;X++)m(X,E(X,F,K,v),q);else m(g,E(g,F,K,v),q)}},68706:(It,pt,w)=>{w.d(pt,{pm:()=>nt,GY:()=>ee,c5:()=>le,EI:()=>Et,K1:()=>qt,be:()=>kt,iE:()=>Zt,Qe:()=>Qt,Or:()=>Xt});var z=w(64394),k=w(18600),at=w(16515),lt=w(55386),E=w(95004),Z=w(33553),M=w(79118),f=w(36394),u=w(8721),g=w(63409),m=w(34455),x=w(92745),v=w(21275),F=w(739),K=w(47276),q=w(62748),X=w(36192),T=w(36613),wt=w(6773),mt=w(46485),zt=w(81897);const{round:I,min:Kt,ceil:Ot}=Math,Ut=2;let bt=6;const Yt=mt.ur;function $t(e,s,l,r,o){(0,mt.mn)(l,e,Yt,s,(d,i,c)=>{let n=r*i,N=r*c;o(d,n,N)})}function Rt(e,s,l){return typeof e=="boolean"||typeof e=="string"||typeof e=="number"&&!Number.isNaN(e)||e===null&&s||Number.isNaN(e)&&l?!0:!!e}function Ht(e){const{mode:s,numSeries:l,isDiscrete:r,hasMappedNull:o,hasMappedNaN:d,rowHeight:i=0,colWidth:c=0,showValue:n,mergeValues:N=!1,theme:A,label:U,formatValue:S,alignValue:C="left",getTimeRange:j,getValueColor:gt,getFieldConfig:rt,hoverMulti:B}=e;let O,ft;const Bt=t=>{ft=Array(l).fill(null).map(a=>Array(t).fill(null))},xt=`500 ${Math.round(12*devicePixelRatio)}px ${A.typography.fontFamily}`,ct=Array(l).fill(null);let y=null;const $=[c,1/0],_=1-$[0],yt=($[1]??1/0)*T.A.pxRatio,Mt=new Map,Pt=new Map;function ne(t){Mt.forEach((a,h)=>{t.fillStyle=h,t.fill(a)}),Pt.forEach((a,h)=>{t.strokeStyle=h,t.stroke(a)}),Mt.clear(),Pt.clear()}function Lt(t,a,h,p,V,b,P,R,D,W,st,Y,ot){P=Math.max(1,P);const G=gt(W+1,Y),vt=rt(W),ut=Gt(vt,G);if(ft[W][st]={x:I(V-h),y:I(b-p),w:P,h:R,sidx:W+1,didx:st,fillColor:ut},ot){let Nt=ut,tt=Mt.get(Nt);if(tt==null&&Mt.set(Nt,tt=new Path2D),a(tt,V,b,P,R),D){let et=G,Q=Pt.get(et);Q==null&&Pt.set(et,Q=new Path2D),a(Q,V+D/2,b+D/2,P-D,R-D)}}else t.beginPath(),a(t,V,b,P,R),t.fillStyle=ut,t.fill(),D&&(t.beginPath(),a(t,V+D/2,b+D/2,P-D,R-D),t.strokeStyle=G,t.lineWidth=D,t.stroke())}const se=(t,a,h,p)=>(T.A.orient(t,a,(V,b,P,R,D,W,st,Y,ot,G,vt,ut,Nt,tt)=>{let et=I((V.width||0)*T.A.pxRatio);const Q=r(a),it=Q&&o(a),At=Q&&d(a);t.ctx.save(),tt(t.ctx,t.bbox.left,t.bbox.top,t.bbox.width,t.bbox.height),t.ctx.clip(),$t(i,a-1,l,vt,(Dt,L,St)=>{if(s===nt.Changes)for(let H=0;H<P.length;H++){let dt=P[H];if(Rt(dt,it,At)){let Ft=Math.round(W(b[H],R,G,Y)),J=H;for(;++J<P.length&&(P[J]===void 0||N&&P[J]===dt););let Tt=J===P.length?Y+G+et:Math.round(W(b[J],R,G,Y));Lt(t.ctx,tt,Y,ot,Ft,I(ot+L),Tt-Ft,I(St),et,Dt,H,dt,Q),H=J-1}}else if(s===nt.Samples){let H=W(b[1],R,G,Y)-W(b[0],R,G,Y),dt=H*_,ht=I(Kt(yt,H-dt)-et),Ft=ht/2;for(let J=h;J<=p;J++){let Tt=P[J];if(Rt(Tt,it,At)){let ue=W(b[J],R,G,Y);Lt(t.ctx,tt,Y,ot,I(ue-Ft),I(ot+L),ht,I(St),et,Dt,J,Tt,Q)}}}}),Q&&(t.ctx.lineWidth=et,ne(t.ctx)),t.ctx.restore()}),null),oe=S==null||n===F.yL.Never?!1:(t,a,h,p)=>(t.ctx.save(),t.ctx.rect(t.bbox.left,t.bbox.top,t.bbox.width,t.bbox.height),t.ctx.clip(),t.ctx.font=xt,t.ctx.textAlign=s===nt.Changes?C:"center",t.ctx.textBaseline="middle",T.A.orient(t,a,(V,b,P,R,D,W,st,Y,ot,G,vt)=>{let ut=I((V.width||0)*T.A.pxRatio),Nt=I(st(Vt[a-1],D,vt,ot));const tt=r(a),et=tt&&o(a),Q=tt&&d(a);for(let it=0;it<P.length;it++){const At=P[it];if(Rt(At,et,Q)){const L=ft[a-1][it];if(!L||L.x>=G)continue;const St=L.x<0?L?.w+L.x:L?.w;let H=Math.floor(St/bt);if(n===F.yL.Auto&&H<2)continue;let dt=S(a,P[it]),ht=I(L.x+Y+L.w/2);s===nt.Changes&&(C==="left"?ht=I(Math.max(L.x,0)+Y+ut+Ut):C==="right"&&(ht=I(L.x+Y+L.w-ut-Ut))),t.ctx.fillStyle=A.colors.getContrastText(L.fillColor,3),t.ctx.fillText(dt.slice(0,H),ht,Nt)}}}),t.ctx.restore(),!1),ie=t=>{let a="";for(let h=32;h<=126;h++)a+=String.fromCharCode(h);bt=Math.ceil(t.ctx.measureText(a).width/a.length*T.A.pxRatio),bt+=2.5,t.root.querySelectorAll(".u-cursor-pt").forEach(h=>{h.style.borderRadius="0"})},ae=t=>{O=O||new zt.C$(0,0,t.bbox.width,t.bbox.height),O.clear(),Bt(t.data[0].length),t.series.forEach(a=>{a._paths=null})};function re(t,a,h=!1){ct.fill(null),y=null,!(t<0)&&O.get(t,0,T.A.pxRatio,1e4,p=>{t>=p.x&&t<=p.x+p.w&&(a>=p.y&&a<=p.y+p.h?ct[p.sidx]=y=p:(B||h)&&(ct[p.sidx]=p))})}const fe={x:s===nt.Changes,y:!1,dataIdx:(t,a)=>{if(a===1){if(O.o.length===0&&O.q==null)for(const V of ft)for(const b of V)b&&O.add(b);let h=t.cursor.left*T.A.pxRatio,p=t.cursor.top*T.A.pxRatio;re(h,p,t.cursor.event==null)}return ct[a]?.didx},focus:{prox:1e3,dist:(t,a)=>y?.sidx===a?0:1/0},points:{fill:"rgba(255,255,255,0.2)",bbox:(t,a)=>{let h=ct[a],p=h!=null;return{left:p?h.x/T.A.pxRatio:-10,top:p?h.y/T.A.pxRatio:-10,width:p?h.w/T.A.pxRatio:0,height:p?h.h/T.A.pxRatio:0}}}},Vt=Array(l).fill(0),ce=[0,1];return{cursor:fe,xSplits:s===nt.Samples?(t,a,h,p,V,b)=>{let P=[],R=t.data[0][1]-t.data[0][0],D=Ot(V/R);for(let W=0;W<t.data[0].length;W+=D){let st=t.data[0][W];st>=h&&st<=p&&P.push(st)}return P}:null,xRange:t=>{const a=j();let h=a.from.valueOf(),p=a.to.valueOf();if(s===nt.Samples){let P=(t.data[0][1]-t.data[0][0])/2;h<=t.data[0][0]&&(h=t.data[0][0]-P);let R=t.data[0].length-1;p>=t.data[0][R]&&(p=t.data[0][R]+P)}return[h,p]},ySplits:t=>($t(i,null,l,t.bbox.height,(a,h,p)=>{let V=I(h+p/2);Vt[a]=t.posToVal(V/T.A.pxRatio,q.s)}),Vt),yValues:(t,a)=>a.map((h,p)=>U(p+1)),yRange:ce,drawPaths:se,drawPoints:oe,init:ie,drawClear:ae}}function Gt(e,s){if(s[0]==="#"&&s.length===9)return s;const l=(e.fillOpacity??100)/100;return wt.MV.alpha(s,l)}var nt=(e=>(e.Changes="changes",e.Samples="samples",e))(nt||{});const Jt={lineWidth:0,fillOpacity:80},Ct=(e,s)=>e.config.mappings?.some(l=>l.type===v.dM.SpecialValue&&l.options.match===s)||!1,Zt=({frame:e,theme:s,timeZones:l,getTimeRange:r,mode:o,rowHeight:d,colWidth:i,showValue:c,alignValue:n,mergeValues:N,getValueColor:A,hoverMulti:U})=>{const S=new K.e(l[0]),C="x",j=y=>{const $=y.config?.color?.mode;return!($&&y.display&&$.startsWith("continuous-"))},gt=(y,$)=>{const _=e.fields[y];return _.state?.origin?.fieldIndex!==void 0&&_.state?.origin?.frameIndex!==void 0&&A?A(_.state?.origin?.frameIndex,_.state?.origin?.fieldIndex,$):z.F},rt={mode:o,numSeries:e.fields.length-1,isDiscrete:y=>j(e.fields[y]),hasMappedNull:y=>Ct(e.fields[y],k.W.Null)||Ct(e.fields[y],k.W.NullAndNaN),hasMappedNaN:y=>Ct(e.fields[y],k.W.NaN)||Ct(e.fields[y],k.W.NullAndNaN),mergeValues:N,rowHeight:d,colWidth:i,showValue:c,alignValue:n,theme:s,label:y=>(0,at.Ct)(e.fields[y],e),getFieldConfig:y=>e.fields[y].config.custom,getValueColor:gt,getTimeRange:r,formatValue:(y,$)=>(0,lt.cN)(e.fields[y].display($)),hoverMulti:U},B=Ht(rt);S.addHook("init",B.init),S.addHook("drawClear",B.drawClear),S.setPrepData(y=>(0,X.bq)(y[0],(0,X.ro)(y[0]))),S.setCursor(B.cursor),S.addScale({scaleKey:C,isTime:!0,orientation:F.Lt.Horizontal,direction:F.ON.Right,range:B.xRange}),S.addScale({scaleKey:q.s,isTime:!1,orientation:F.Lt.Vertical,direction:F.ON.Up,range:B.yRange});const O=e.fields[0].config.custom.axisPlacement===F.vM.Hidden;S.addAxis({show:!O,scaleKey:C,isTime:!0,splits:B.xSplits,placement:F.vM.Bottom,timeZone:l[0],theme:s});const ft=e.fields[1].config.custom,Bt=ft.axisWidth,xt=ft.axisPlacement===F.vM.Hidden;S.addAxis({scaleKey:q.s,isTime:!1,placement:F.vM.Left,splits:B.ySplits,values:xt?(y,$)=>$.map(_=>null):B.yValues,grid:{show:!1},ticks:{show:!1},gap:xt?0:16,size:xt?0:Bt,theme:s});let ct=0;for(let y=0;y<e.fields.length;y++){if(y===0)continue;const $=e.fields[y],_=$.config,yt={...Jt,..._.custom};$.state.seriesIndex=ct++,S.addSeries({scaleKey:q.s,pathBuilder:B.drawPaths,pointsBuilder:B.drawPoints,lineWidth:yt.lineWidth,fillOpacity:yt.fillOpacity,theme:s,show:!yt.hideFrom?.viz,thresholds:_.thresholds,dataFrameFieldIndex:$.state?.origin})}return S};function Wt(e){let s=e.config.custom?.spanNulls;return s?s===!0?1/0:s:-1}function jt(e,s){const l=e.config.thresholds;if(e.type!==E.PU.number||!l||!l.steps.length)return;const r=Et(e.config,s);if(r.length!==l.steps.length)return;const o=new Map,d=new Map;for(let n=0;n<r.length;n++)o.set(l.steps[n],r[n].label),d.set(r[n].label,r[n].color);let i=e.values;const c=new Array(e.values.length);if(l.mode===Z.O.Percentage){const{min:n,max:N}=(0,M.xg)(e),A=N-n;i=i.map(U=>U==null?U:(U-n)/A*100)}for(let n=0;n<c.length;n++){const N=i[n];N==null?c[n]=N:c[n]=o.get((0,f.yQ)(N,l.steps))}return{...e,config:{...e.config,custom:{...e.config.custom,spanNulls:Wt(e)}},type:E.PU.string,values:c,display:n=>({text:String(n),color:d.get(String(n)),numeric:NaN})}}function Qt(e,s,l,r){if(!e?.length)return{warn:""};(0,at.Fm)(e);let o=!1;const d=[];for(let i of e){let c=-1,n=-1;for(let C=0;C<i.fields.length;C++){let j=i.fields[C];if(j.type===E.PU.time&&typeof j.values[0]=="number"){if(c===-1)c=C;else if(n===-1){n=C;break}}}let N=c!==-1,A=!1;if(i=(0,u.Yj)(i,c),n!==-1){let C={...i,fields:i.fields.filter((gt,rt)=>rt!==n)},j={length:i.length,fields:[i.fields[n]]};i=(0,u.Fd)({frames:[C,j],keepDisplayNames:!0,nullMode:()=>u.WO}),i.fields.forEach((gt,rt)=>{if(rt>0){let B=gt.values;for(let O=0;O<B.length;O++)B[O]==null&&(B[O]=null)}}),A=!0}let U=(0,g.M)({frame:i,refFieldPseudoMin:l.from.valueOf(),refFieldPseudoMax:l.to.valueOf()});U!==i&&(A=!0),i=(0,m.C)(U);const S=[];for(let C of i.fields)switch(C.type){case E.PU.time:typeof C.values[0]=="number"&&(N=!0,o=!0,S.push(C));break;case E.PU.enum:case E.PU.number:if(s&&C.config.color?.mode===z.Y.Thresholds){const j=jt(C,r);if(j){S.push(j),A=!0;continue}}case E.PU.boolean:case E.PU.string:C={...C,config:{...C.config,custom:{...C.config.custom,spanNulls:Wt(C)}}},A=!0,S.push(C);break;default:A=!0}N&&S.length>1&&(o=!0,A?d.push({...i,fields:S}):d.push(i))}return o?d.length?{frames:d}:{warn:(0,x.t)("timeline.missing-field.all","No graphable fields")}:{warn:(0,x.t)("timeline.missing-field.time","Data does not have a time field")}}function kt(e){const s=[];for(let l of e){const r=l.fields.filter(o=>o.type===E.PU.time);if(r.length>0)for(let o of l.fields)o.type!==E.PU.time&&s.push({fields:[...r,o],length:l.length})}return s}function Et(e,s,l){const r=[],o=l||e.thresholds;if(!o||!o.steps.length)return r;const d=o.steps,i=(0,lt.j_)(o.mode===Z.O.Percentage?"percent":e.unit??""),c=n=>(0,lt.cN)(i(n,e.decimals??void 0));for(let n=0;n<d.length;n++){let N=d[n],A=N.value,U="",S="";A===-1/0&&n<d.length-1?(A=d[n+1].value,U="< "):S="+",r.push({label:`${U}${c(A)}${S}`,color:s.visualization.getColorByName(N.color),yAxis:1})}return r}function qt(e,s){const l=[];if(!e)return l;for(let r of e){const{options:o,type:d}=r;if(d===v.dM.ValueToText)for(let[i,c]of Object.entries(o)){const n=c.color;l.push({label:i,color:s.visualization.getColorByName(n??z.F),yAxis:1})}if(d===v.dM.RangeToText){const{from:i,result:c,to:n}=o,{text:N,color:A}=c,U=N?`[${i} - ${n}] ${N}`:`[${i} - ${n}]`;l.push({label:U,color:s.visualization.getColorByName(A??z.F),yAxis:1})}if(d===v.dM.RegexToText){const{pattern:i,result:c}=o,{text:n,color:N}=c,A=`${n||i}`;l.push({label:A,color:s.visualization.getColorByName(N??z.F),yAxis:1})}if(d===v.dM.SpecialValue){const{match:i,result:c}=o,{text:n,color:N}=c,A=`${n||i}`;l.push({label:A,color:s.visualization.getColorByName(N??z.F),yAxis:1})}}return l}function Xt(e,s,l){if(!(!e||s.showLegend===!1))return _t(te(e),l)}function _t(e,s){if(!e.length)return;const l=[],r=e[0].config,o=r.color?.mode??z.Y.Fixed,d=r.thresholds;if(o===z.Y.Thresholds&&d?.steps&&d.steps.length>1)return Et(r,s);if(o.startsWith("continuous"))return;const i=new Map;return e.forEach(c=>{c.config.custom?.hideFrom?.legend||c.values.forEach(n=>{let N=c.display(n);N.color&&i.set(N.text,N.color)})}),i.forEach((c,n)=>{n.length>0&&l.push({label:n,color:s.visualization.getColorByName(c??z.F),yAxis:1})}),l}function te(e){const s=[];for(const l of e)for(const r of l.fields)r.type!==E.PU.time&&s.push(r);return s}function ee(e,s){let l,r=s+1;if(r>=e.values.length)return null;const o=e.values[s];for(;l===void 0;){if(r>=e.values.length)return null;const d=e.values[r];d===void 0||d===o?r++:l=r}return l}function le(e){if(e<0||Number.isNaN(e))return"";let s,l,r,o,d,i,c,n;return c=Math.floor(e/1e3),i=Math.floor(c/60),c=c%60,d=Math.floor(i/60),i=i%60,o=Math.floor(d/24),d=d%24,s=Math.floor(o/365),s>0&&(o=o%365),l=Math.floor(o/30),l>0&&(o=o%30),r=Math.floor(o/7),r>0&&(o=o%7),n=Math.round(e%1e3*1e3)/1e3,(s>0?s+"y "+(l>0?l+"mo ":"")+(r>0?r+"w ":"")+(o>0?o+"d ":""):l>0?l+"mo "+(r>0?r+"w ":"")+(o>0?o+"d ":""):r>0?r+"w "+(o>0?o+"d ":""):o>0?o+"d "+(d>0?d+"h ":""):d>0?d+"h "+(i>0?i+"m ":""):i>0?i+"m "+(c>0?c+"s ":""):c>0?c+"s "+(n>0?n+"ms ":""):n>0?n+"ms ":"0").trim()}},81897:(It,pt,w)=>{w.d(pt,{C$:()=>Z,HY:()=>E,Tr:()=>lt,ur:()=>at});const z=10,k=4;function at(M,f,u,g,m,x){return M>=u&&M<=m&&f>=g&&f<=x}function lt(M,f,u){let g=[];if(M.o.length&&g.push(...M.o.filter(m=>(f==null||m.sidx===f)&&(u==null||m.didx===u))),M.q)for(let m=0;m<M.q.length;m++)g.push(...lt(M.q[m],f,u));return g}function E(M,f){return M.x<=f.x+f.w&&M.x+M.w>=f.x&&M.y+M.h>=f.y&&M.y<=f.y+f.h}class Z{constructor(f,u,g,m,x=0){this.x=f,this.y=u,this.w=g,this.h=m,this.l=x,this.o=[],this.q=null}split(){let f=this,u=f.x,g=f.y,m=f.w/2,x=f.h/2,v=f.l+1;f.q=[new Z(u+m,g,m,x,v),new Z(u,g,m,x,v),new Z(u,g+x,m,x,v),new Z(u+m,g+x,m,x,v)]}quads(f,u,g,m,x){let v=this,F=v.q,K=v.x+v.w/2,q=v.y+v.h/2,X=u<q,T=f<K,wt=f+g>K,mt=u+m>q;X&&wt&&x(F[0]),T&&X&&x(F[1]),T&&mt&&x(F[2]),wt&&mt&&x(F[3])}add(f){let u=this;if(u.q!=null)u.quads(f.x,f.y,f.w,f.h,g=>{g.add(f)});else{let g=u.o;if(g.push(f),g.length>z&&u.l<k){u.split();for(let m=0;m<g.length;m++){let x=g[m];u.quads(x.x,x.y,x.w,x.h,v=>{v.add(x)})}u.o.length=0}}}get(f,u,g,m,x){let v=this,F=v.o;for(let K=0;K<F.length;K++)x(F[K]);v.q!=null&&v.quads(f,u,g,m,K=>{K.get(f,u,g,m,x)})}clear(){this.o.length=0,this.q=null}}}}]);

//# sourceMappingURL=8706.6e130a0d06cfd385a5b2.js.map