"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[5428],{16913:(ut,k,i)=>{i.d(k,{OG:()=>L,u6:()=>$});var U=i(73163);const $=(S,A)=>{const P=[];if((S.config.links?.length??0)>0&&S.getLinks!=null){const T=S.values[A],C=S.display?S.display(T):{text:`${T}`,numeric:+T},K=new Set;S.getLinks({calculatedValue:C,valueRowIndex:A}).forEach(V=>{const r=`${V.title}/${V.href}`;K.has(r)||(P.push(V),K.add(r))})}return P},_=S=>{},L=(S,A,P,T)=>{const C=[],K=new Set;return(0,U.ko)(S,A,A.state.scopedVars,P,A.config.actions??[],{valueRowIndex:T}).forEach(r=>{const c=`${r.title}`;K.has(c)||(C.push(r),K.add(c))}),C}},17669:(ut,k,i)=>{i.d(k,{m:()=>V});var U=i(95004),$=i(63409),_=i(79243),L=i(8721);function S(r,c,n){let s,l;for(let o=0;o<c.length;o++)if(c[o]==null)l==null&&s!=null&&(l=o);else{if(l!=null&&s!=null){if(r[o]-s<n)for(;l<o;)c[l++]=void 0;l=null}s=r[o]}return c}var A=i(739);function P(r){return r.type===U.PU.number&&r.config.custom?.drawStyle===A.GR.Bars&&!r.config.custom?.hideFrom?.viz}function T(r,c){return r.fields.find(n=>c!=null?n.name===c:n.type===U.PU.time)}function C(r,c){const n=T(r,c);let s=n?.values;for(let l=0;l<r.fields.length;l++){let o=r.fields[l];if(o===n||P(o))continue;let f=o.config.custom?.spanNulls;typeof f=="number"&&f!==-1&&s&&(o.values=S(s,o.values,f))}return r}function K(r,c,n){for(let s of c.fields)if(r.x(s,c,n))return s}function V(r,c,n){r=r.map(f=>{const u=K(c,f,r);return u!=null&&!u.state?.nullThresholdApplied?(0,$.M)({frame:f,refFieldName:u.name,refFieldPseudoMin:n?.from.valueOf(),refFieldPseudoMax:n?.to.valueOf()}):f});let s=r.reduce((f,u)=>f+u.fields.reduce((x,p)=>x+(P(p)?1:0),0),0),l=null;if(s>1){const f=new Set;r.forEach(u=>{if(!u.fields.some(P))return;const x=K(c,u,r);if(x==null)return;let p=1/0;const y=x.values;for(let N=0;N<y.length;N++)N>0&&(p=Math.min(p,y[N]-y[N-1]));p!==1/0&&(Number.isInteger(p)||(p=(0,_.h)(p,6)),f.add(p))}),f.size>1&&(l=Math.min(...f))}let o=(0,L.Fd)({frames:r,joinBy:c.x,keep:c.y,keepOriginIndices:!0,keepDisplayNames:!0,nullMode:f=>{if(P(f))return L.WO;let u=f.config.custom?.spanNulls;return u===!0?L.RC:u===-1?L.WO:L.JI}});return o?(o=C(o,o.fields[0].name),l!=null&&(o.fields.forEach((f,u)=>{let x=f.values;if(u===0){let p=x[x.length-1];x.push(p+l,p+2*l)}else P(f)?x.push(null,null):x.push(void 0,void 0)}),o.length+=2),o):null}},25422:(ut,k,i)=>{i.d(k,{Z:()=>Z});var U=i(74848),$=i(96540),_=i(63142),L=i(61897),S=i(47220),A=i(2543),P=i(36613),T=i(95004),C=i(55386),K=i(11576),V=i(76637),r=i(64394),c=i(16515),n=i(739),s=i(47276),l=i(36192),o=i(70332),f=i(66650);const u=new Set(["bytes","bits","kbytes","mbytes","gbytes","tbytes","pbytes","binBps","binbps","KiBs","Kibits","MiBs","Mibits","GiBs","Gibits","TiBs","Tibits","PiBs","Pibits"]),x=Array(53);for(let a=0;a<x.length;a++)x[a]=2**a;const p=(a,d=1)=>a==null?"-":a.toFixed(d),y={drawStyle:n.GR.Line,showPoints:n.yL.Auto,axisPlacement:n.vM.Auto,showValues:!1},N=({frame:a,theme:d,timeZones:m,getTimeRange:B,allFrames:M,renderers:R,tweakScale:j=W=>W,tweakAxis:at=W=>W,hoverProximity:q,orientation:rt=n.wV.Horizontal})=>{const W=rt!==n.wV.Vertical,O=new s.e(m[0]);let Mt;O.setPrepData(h=>(Mt=h[0],(0,l.bq)(h[0],O.getStackingGroups())));const H=a.fields[0];if(!H)return O;const ht="x";let vt="";const Pt=H.config.custom?.axisPlacement===n.vM.Hidden?n.vM.Hidden:W?n.vM.Bottom:n.vM.Left,Dt=H.config.custom?.axisPlacement!==n.vM.Hidden;if(H.type===T.PU.time){O.addScale({scaleKey:ht,orientation:W?n.Lt.Horizontal:n.Lt.Vertical,direction:W?n.ON.Right:n.ON.Up,isTime:!0,range:()=>{const t=B();return[t.from.valueOf(),t.to.valueOf()]}});const h=m.length>1?(t,g)=>W?g.map((e,G)=>G<2?null:e):g:void 0;for(let t=0;t<m.length;t++){const g=m[t];O.addAxis({scaleKey:ht,isTime:!0,placement:Pt,show:Dt,label:H.config.custom?.axisLabel,timeZone:g,theme:d,grid:{show:t===0&&H.config.custom?.axisGridShow},filter:h})}m.length>1&&O.addHook("drawAxes",t=>{t.ctx.save();let g=0;t.axes.forEach(e=>{if(W&&e.side===2){t.ctx.fillStyle=d.colors.text.primary,t.ctx.textAlign="left",t.ctx.textBaseline="bottom";let G=e._pos+e._size;t.ctx.fillText(m[g],t.bbox.left,G*P.A.pxRatio),g++}}),t.ctx.restore()})}else{let h=H.config.custom,t={...h?.scaleDistribution};O.addScale({scaleKey:ht,orientation:W?n.Lt.Horizontal:n.Lt.Vertical,direction:W?n.ON.Right:n.ON.Up,distribution:t?.type,log:t?.log,linearThreshold:t?.linearThreshold,min:H.config.min,max:H.config.max,softMin:h?.axisSoftMin,softMax:h?.axisSoftMax,centeredZero:h?.axisCenteredZero,decimals:H.config.decimals,padMinBy:0,padMaxBy:0}),O.addAxis({scaleKey:ht,placement:Pt,show:Dt,label:h?.axisLabel,theme:d,grid:{show:h?.axisGridShow},formatValue:(g,e)=>(0,C.cN)(H.display(g,e))})}let Et=R?.flatMap(h=>Object.values(h.fieldMap).filter(t=>h.indicesOnly.indexOf(t)===-1))??[],st;for(let h=1;h<a.fields.length;h++){const t=a.fields[h],g={...t.config,custom:{...y,...t.config.custom}},e=g.custom;if(t===H||t.type!==T.PU.number&&t.type!==T.PU.enum)continue;let G=t.display??p;t.config.custom?.stacking?.mode===n.gs.Percent&&(G=(0,K.J)({field:{...t,config:{...t.config,unit:"percentunit"}},theme:d}));const Y=(0,o.M)(g,t.type),et=(0,V.Qi)(t),mt=(0,V.lz)(t,d).color;if(O.addScale(j({scaleKey:Y,orientation:W?n.Lt.Vertical:n.Lt.Horizontal,direction:W?n.ON.Up:n.ON.Right,distribution:e.scaleDistribution?.type,log:e.scaleDistribution?.log,linearThreshold:e.scaleDistribution?.linearThreshold,min:t.config.min,max:t.config.max,softMin:e.axisSoftMin,softMax:e.axisSoftMax,centeredZero:e.axisCenteredZero,stackingMode:e.stacking?.mode,range:t.type===T.PU.enum?(D,it,X)=>[-1,t.config.type.enum.text.length]:void 0,decimals:t.config.decimals},t)),vt||(vt=Y),e.axisPlacement!==n.vM.Hidden){let D;e.axisColorMode===n.Y$.Series&&(et.isByValue&&t.config.custom?.gradientMode===n.on.Scheme&&et.id===r.Y.Thresholds?D=(0,f.pl)(1,d,et,t.config.thresholds):D=mt);const it={border:{show:e.axisBorderShow||!1,width:1/devicePixelRatio,stroke:D||d.colors.text.primary},ticks:{show:e.axisBorderShow||!1,stroke:D||d.colors.text.primary},color:D||d.colors.text.primary};let X,E,w;if(u.has(g.unit))X=x;else if(t.type===T.PU.enum){let v=t.config.type.enum.text;w=v.map((I,F)=>F),E=v}O.addAxis(at({scaleKey:Y,label:e.axisLabel,size:e.axisWidth,placement:W?e.axisPlacement??n.vM.Auto:n.vM.Bottom,formatValue:(v,I)=>(0,C.cN)(G(v,I)),theme:d,grid:{show:e.axisGridShow},decimals:t.config.decimals,distr:e.scaleDistribution?.type,splits:w,values:E,incrs:X,...it},t))}const dt=e.drawStyle===n.GR.Points?n.yL.Always:e.showPoints;let pt=()=>null;e.spanNulls!==!0&&dt===n.yL.Auto&&(pt=(D,it,X,E)=>{let w=[];if(!X){const v=D.data[it];if(E&&E.length){const I=D.posToIdx(E[0][0],!0);v[I-1]==null&&w.push(I);for(let lt=0;lt<E.length;lt++){let ct=E[lt],yt=E[lt+1];if(yt&&ct[1]===yt[0]){let J=D.posToIdx(ct[1],!0);if(v[J]==null)for(let ot=1;ot<100;ot++){if(v[J+ot]!=null){J+=ot;break}if(v[J-ot]!=null){J-=ot;break}}w.push(J)}}const F=D.posToIdx(E[E.length-1][1],!0);v[F+1]==null&&w.push(F)}else{let I=0;for(;v[I]===null;)I++;let F=v.length-1;for(;F>=I&&v[F]===null;)F--;I===F&&w.push(I)}}return w.length?w:null});let{fillOpacity:tt}=e,nt=null,xt=null;if(t.state?.origin){st||(st=Q(a,M));const D=M[t.state.origin.frameIndex],it=D?.fields[t.state.origin.fieldIndex],X=(0,c.Ct)(it??t,D,M);if(Et.indexOf(X)>=0)nt=()=>null,xt=()=>{};else if(e.transform===n.NU.Constant){const E=P.A.paths.linear();nt=(w,v)=>{const I=w._data,F=B();let lt=[F.from.valueOf(),F.to.valueOf()],ct=I[v].find(ot=>ot!=null),yt=[ct,ct],J=I.slice();return J[0]=lt,J[v]=yt,E({...w,_data:J},v,0,1)}}if(e.fillBelowTo){const E=a.fields.find(F=>e.fillBelowTo===F.name||e.fillBelowTo===F.config?.displayNameFromDS||e.fillBelowTo===(0,c.Ct)(F,a,M)),w=E?(0,c.Ct)(E,a,M):e.fillBelowTo,v=st.get(X),I=st.get(w);(0,A.isNumber)(I)&&(0,A.isNumber)(v)?(O.addBand({series:[v,I],fill:void 0}),tt||(tt=35)):tt=0}}let ft;et.id===r.Y.Thresholds&&(ft=D=>(0,V.lz)(Mt.fields[D],d).color),O.addSeries({pathBuilder:nt,pointsBuilder:xt,scaleKey:Y,showPoints:dt,pointsFilter:pt,colorMode:et,fillOpacity:tt,theme:d,dynamicSeriesColor:ft,drawStyle:e.drawStyle,lineColor:e.lineColor??mt,lineWidth:e.lineWidth,lineInterpolation:e.lineInterpolation,lineStyle:e.lineStyle,barAlignment:e.barAlignment,barWidthFactor:e.barWidthFactor,barMaxWidth:e.barMaxWidth,pointSize:e.pointSize,spanNulls:e.spanNulls||!1,show:!e.hideFrom?.viz,gradientMode:e.gradientMode,thresholds:g.thresholds,hardMin:t.config.min,hardMax:t.config.max,softMin:e.axisSoftMin,softMax:e.axisSoftMax,dataFrameFieldIndex:t.state?.origin,showValues:e.showValues}),e.thresholdsStyle&&g.thresholds&&(e.thresholdsStyle.mode??n.Ly.Off)!==n.Ly.Off&&O.addThresholds({config:e.thresholdsStyle,thresholds:g.thresholds,scaleKey:Y,theme:d,hardMin:t.config.min,hardMax:t.config.max,softMin:e.axisSoftMin,softMax:e.axisSoftMax})}let Ot=(0,l.ro)(a);if(O.setStackingGroups(Ot),a.fields.some((h,t)=>{if(t===0)return!1;const g=h.config.custom??{};return g.showValues&&(g.drawStyle===n.GR.Points||g.showPoints!==n.yL.Never)})){const h=t=>{let g=t.bbox.width/P.A.pxRatio,e=t.data[0].length;return g/e>=30};O.addHook("draw",t=>{const e=`${12*P.A.pxRatio}px ${d.typography.fontFamily}`,{ctx:G}=t;G.save(),G.fillStyle=d.colors.text.primary,G.font=e,G.textAlign="center";for(let Y=1;Y<t.data.length;Y++){const et=t.series[Y],gt=a.fields[Y];if(gt.config.custom?.showValues&&(et.points?.show?.(t,Y)||gt.config.custom?.drawStyle===n.GR.Bars&&h(t))){const mt=t.data[0],dt=t.data[Y],pt=et.scale;for(let tt=0;tt<dt.length;tt++){const nt=dt[tt];if(nt!=null){const xt=(0,C.cN)(gt.display(nt)),ft=nt<0,D=ft?15:-5;G.textBaseline=ft?"top":"bottom";const it=mt[tt],X=t.valToPos(it,"x",!0),E=t.valToPos(nt,pt,!0);G.fillText(xt,X,E+D)}}}}G.restore()})}R?.forEach(h=>{st||(st=Q(a,M));let t={};for(let g in h.fieldMap){let e=h.fieldMap[g];t[g]=st.get(e)}h.init(O,t)});const St=15;let Tt={hover:{prox:(h,t,g)=>q??(h.data[t][g]===null?St:null),skip:[null]},focus:{prox:q??30},points:{one:!0}};return O.setCursor(Tt),O};function Q(a,d){const m=new Map;return a.fields.forEach((B,M)=>{const R=B.state?.origin;if(R){const j=d[R.frameIndex]?.fields[R.fieldIndex];j&&m.set((0,c.Ct)(j,d[R.frameIndex],d),M)}}),m}const b=["legend","options","theme"];class z extends $.Component{constructor(){super(...arguments),this.prepConfig=(d,m,B)=>{const{theme:M,timeZone:R,options:j,renderers:at,tweakAxis:q,tweakScale:rt}=this.props;return N({frame:d,theme:M,timeZones:Array.isArray(R)?R:[R],getTimeRange:B,allFrames:m,renderers:at,tweakScale:rt,tweakAxis:q,hoverProximity:j?.tooltip?.hoverProximity,orientation:j?.orientation})},this.renderLegend=d=>{const{legend:m,frames:B}=this.props;return!d||m&&!m.showLegend||!(0,L.t)(d,B)?null:(0,U.jsx)(L.$,{data:B,config:d,...m})}}render(){return(0,U.jsx)(S.o,{...this.props,prepConfig:this.prepConfig,propsToDiff:b,renderLegend:this.renderLegend})}}const Z=(0,_.cV)(z);Z.displayName="TimeSeries"},47220:(ut,k,i)=>{i.d(k,{o:()=>c});var U=i(74848),$=i(96540),_=i(36638),L=i(57866),S=i(60519),A=i(95004),P=i(54735),T=i(92790),C=i(36192),K=i(17669);function V(n,s,l=[]){for(const o of l)if(typeof o=="function"){if(!o(n,s))return!1}else if(s[o]!==n[o])return!1;return!0}const r={x:_.sJ.get(L.Ct.firstTimeField).get({}),y:_.sJ.get(L.Ct.byTypes).get(new Set([A.PU.number,A.PU.enum]))};class c extends $.Component{constructor(s){super(s),this.getTimeRange=()=>this.props.timeRange;let l=this.prepState(s);l.alignedData=l.config.prepData([l.alignedFrame]),this.state=l,this.plotInstance=$.createRef()}prepState(s,l=!0){let o=null;const{frames:f,fields:u=r,preparePlotFrame:x,replaceVariables:p,dataLinkPostProcessor:y}=s,N=x??K.m,Q=f.some(z=>z.fields.some(Z=>(Z.config.links?.length??0)>0)),b=N(f,{...u,y:Q?()=>!0:u.y},s.timeRange);if((0,C.uY)("GraphNG",!1,"data aligned",b),b){let z=b;if(Q){const a=Array.isArray(this.props.timeZone)?this.props.timeZone[0]:this.props.timeZone;let d=f.map((m,B)=>({...m,fields:b.fields.filter((M,R)=>R===0||M.state?.origin?.frameIndex===B),length:b.length}));d.forEach((m,B)=>{m.fields.forEach(M=>{M.getLinks=(0,S._M)(m,M,{...M.state?.scopedVars,__dataContext:{value:{data:d,field:M,frame:m,frameIndex:B}}},p,a,y)})}),z={...b,fields:b.fields.filter((m,B)=>B===0||u.y(m,b,[b]))}}if(s.omitHideFromViz){const a=z.fields.filter(d=>d.config.custom?.hideFrom?.viz!==!0);z={...z,fields:a,length:a.length}}let Z=this.state?.config;l&&(Z=s.prepConfig(z,this.props.frames,this.getTimeRange),(0,C.uY)("GraphNG",!1,"config prepared",Z)),o={alignedFrame:z,config:Z},(0,C.uY)("GraphNG",!1,"data prepared",o.alignedData)}return o}componentDidUpdate(s){const{frames:l,structureRev:o,timeZone:f,cursorSync:u,propsToDiff:x}=this.props,p=!V(s,this.props,x);if(l!==s.frames||p||f!==s.timeZone||u!==s.cursorSync){let y=this.prepState(this.props,!1);y&&((this.state.config===void 0||f!==s.timeZone||u!==s.cursorSync||o!==s.structureRev||!o||p)&&(y.config=this.props.prepConfig(y.alignedFrame,this.props.frames,this.getTimeRange),(0,C.uY)("GraphNG",!1,"config recreated",y.config)),y.alignedData=y.config.prepData([y.alignedFrame]),this.setState(y))}}render(){const{width:s,height:l,children:o,renderLegend:f}=this.props,{config:u,alignedFrame:x,alignedData:p}=this.state;return u?(0,U.jsx)(P.KU,{width:s,height:l,legend:f(u),children:(y,N)=>(0,U.jsx)(T.Z,{config:u,data:p,width:y,height:N,plotRef:Q=>this.plotInstance.current=Q,children:o?o(u,x):null})}):null}}},78308:(ut,k,i)=>{i.d(k,{k:()=>r});var U=i(74848),$=i(55386),_=i(95004),L=i(739),S=i(47466),A=i(39064),P=i(41530),T=i(61048),C=i(55302),K=i(16913),V=i(76234);const r=({series:c,_rest:n,dataIdxs:s,seriesIdx:l,mode:o=L.$N.Single,sortOrder:f=L.xB.None,isPinned:u,annotate:x,maxHeight:p,replaceVariables:y=a=>a,dataLinks:N,hideZeros:Q,adHocFilters:b,canExecuteActions:z,compareDiffMs:Z})=>{const a=c.fields[0];let d=a.values[s[0]];Z!=null&&a.type===_.PU.time&&(d+=Z[l??1]);const m=(0,$.cN)(a.display(d)),B=(0,C.cp)(c.fields,a,s,l,o,f,j=>j.type===_.PU.number||j.type===_.PU.enum,Q,n);let M;if(l!=null){const j=c.fields[l],at=N.some(q=>q.oneClick===!0);if(u||at){const q=s[l],rt=z?(0,K.OG)(c,j,y,q):[];M=(0,U.jsx)(A.S,{dataLinks:N,actions:rt,annotate:x,adHocFilters:b})}}const R={label:a.type===_.PU.time?"":a.state?.displayName??a.name,value:m};return(0,U.jsxs)(T.i,{children:[R!=null&&(0,U.jsx)(P.A,{item:R,isPinned:u}),(0,U.jsx)(S.o,{items:B,isPinned:u,scrollable:(0,V.T5)({mode:o,maxHeight:p}),maxHeight:p}),M]})}}}]);

//# sourceMappingURL=5428.8dbf17f6bd697efd0c54.js.map