"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[5594],{16913:(be,q,t)=>{t.d(q,{OG:()=>_,u6:()=>a});var S=t(73163);const a=(f,V)=>{const A=[];if((f.config.links?.length??0)>0&&f.getLinks!=null){const Y=f.values[V],M=f.display?f.display(Y):{text:`${Y}`,numeric:+Y},$=new Set;f.getLinks({calculatedValue:M,valueRowIndex:V}).forEach(L=>{const F=`${L.title}/${L.href}`;$.has(F)||(A.push(L),$.add(F))})}return A},H=f=>{},_=(f,V,A,Y)=>{const M=[],$=new Set;return(0,S.ko)(f,V,V.state.scopedVars,A,V.config.actions??[],{valueRowIndex:Y}).forEach(F=>{const X=`${F.title}`;$.has(X)||(M.push(F),$.add(X))}),M}},34316:(be,q,t)=>{t.d(q,{R:()=>M});var S=t(74848),a=t(22803),H=t(96540),_=t(92745),f=t(30703),V=t(12594),A=t(63527),Y=t(63142);const M=({name:L,onChange:F,verifyLayerNameUniqueness:X,overrideStyles:me})=>{const ee=(0,Y.of)($),[te,ce]=(0,H.useState)(!1),[Z,oe]=(0,H.useState)(null),g=B=>{ce(!0)},O=B=>{if(ce(!1),Z){oe(null);return}L!==B&&F(B)},N=B=>{const he=B.currentTarget.value.trim();if(he.length===0){oe("An empty layer name is not allowed");return}if(X&&!X(he)&&he!==L){oe("Layer name already exists");return}Z&&oe(null)},ue=B=>{O(B.currentTarget.value.trim())},re=B=>{B.key==="Enter"&&O(B.currentTarget.value)},Q=B=>{B.target.select()};return(0,S.jsx)(S.Fragment,{children:(0,S.jsxs)("div",{className:ee.wrapper,children:[!te&&(0,S.jsxs)("button",{className:ee.layerNameWrapper,title:(0,_.t)("layers.layer-name.edit-layer-title","Edit layer name"),onClick:g,"data-testid":"layer-name-div",children:[(0,S.jsx)("span",{className:me?"":ee.layerName,children:L}),(0,S.jsx)(f.I,{name:"pen",className:ee.layerEditIcon,size:"sm"})]}),te&&(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(A.p,{type:"text",defaultValue:L,onBlur:ue,autoFocus:!0,onKeyDown:re,onFocus:Q,invalid:Z!==null,onChange:N,className:ee.layerNameInput,"data-testid":"layer-name-input"}),Z&&(0,S.jsx)(V.P,{horizontal:!0,children:Z})]})]})})},$=L=>({wrapper:(0,a.css)({label:"Wrapper",display:"flex",alignItems:"center",marginLeft:L.spacing(.5)}),layerNameWrapper:(0,a.css)({display:"flex",cursor:"pointer",border:"1px solid transparent",borderRadius:L.shape.radius.default,alignItems:"center",padding:`0 0 0 ${L.spacing(.5)}`,margin:0,background:"transparent","&:hover":{background:L.colors.action.hover,border:`1px dashed ${L.colors.border.strong}`},"&:focus":{border:`2px solid ${L.colors.primary.border}`},"&:hover, &:focus":{".query-name-edit-icon":{visibility:"visible"}}}),layerName:(0,a.css)({fontWeight:L.typography.fontWeightMedium,color:L.colors.primary.text,cursor:"pointer",overflow:"hidden",marginLeft:L.spacing(.5)}),layerEditIcon:(0,a.cx)((0,a.css)({marginLeft:L.spacing(2),visibility:"hidden"}),"query-name-edit-icon"),layerNameInput:(0,a.css)({maxWidth:"300px",margin:"-4px 0"})})},41530:(be,q,t)=>{t.d(q,{A:()=>f});var S=t(74848),a=t(22803),H=t(63142),_=t(77239);const f=({item:A,isPinned:Y})=>{const M=(0,H.of)(V),{label:$,value:L,color:F,colorIndicator:X}=A;return(0,S.jsx)("div",{className:M.wrapper,children:(0,S.jsx)(_.B,{label:$,value:L,color:F,colorIndicator:X,marginRight:"22px",isPinned:Y})})},V=A=>({wrapper:(0,a.css)({display:"flex",flexDirection:"column",flex:1,padding:A.spacing(1),lineHeight:1})})},47466:(be,q,t)=>{t.d(q,{o:()=>f});var S=t(74848),a=t(22803),H=t(63142),_=t(77239);const f=({items:A,children:Y,isPinned:M,scrollable:$=!1,maxHeight:L})=>{const F=(0,H.of)(V),X=$?{maxHeight:L,overflowY:"auto"}:{};return(0,S.jsxs)("div",{className:F.wrapper,style:X,children:[A.map(({label:me,value:ee,color:te,colorIndicator:ce,colorPlacement:Z,isActive:oe,lineStyle:g,isHiddenFromViz:O},N)=>(0,S.jsx)(_.B,{label:me,value:ee,color:te,colorIndicator:ce,colorPlacement:Z,isActive:oe,justify:"space-between",isPinned:M,lineStyle:g,showValueScroll:!$,isHiddenFromViz:O},N)),Y]})},V=A=>({wrapper:(0,a.css)({display:"flex",flexDirection:"column",flex:1,gap:2,borderTop:`1px solid ${A.colors.border.weak}`,padding:A.spacing(1)})})},64406:(be,q,t)=>{t.r(q),t.d(q,{plugin:()=>At});var S=t(16207),a=t(92745),H=t(79277),_=t(41069),f=t(74848),V=t(22803),A=t(96540),Y=t(84596),M=t(57866),$=t(38809),L=t(16515),F=t(95004),X=t(63142),me=t(45861),ee=t(76319),te=t(37386),ce=t(18857),Z=t(48457),oe=t(34316),g=(e=>(e.Circle="circle",e.Square="square",e))(g||{}),O=(e=>(e.Auto="auto",e.Manual="manual",e))(O||{}),N=(e=>(e.Lines="lines",e.Points="points",e.PointsAndLines="points+lines",e))(N||{});const ue={id:""},re={fillOpacity:50,show:"points"},Q={series:[]},B=({value:e,onChange:n,context:o})=>{const r=(0,X.of)(he),p=o.options?.mapping,x=(0,Y.A)(p),b=x!=null&&p!==x,c={frame:{matcher:{id:M.jR.byIndex,options:0}}},[s,z]=(0,A.useState)(0);(b||e==null)&&(e=[{...c}],n([...e]),s>0&&z(0));const y=()=>{e=e.concat({...c}),z(e.length-1),n([...e])},R=l=>{e=e.filter((d,m)=>m!==l),z(0),n([...e])},E=e[s],D=`${p}${s}`,I=p===O.Manual?$.X4.ExcludeBaseNames:o.data.length===1?$.X4.IncludeAll:$.X4.OnlyBaseNames;o.data.forEach((l,d)=>{l.fields.forEach((m,C)=>{m.state={...m.state,origin:{frameIndex:d,fieldIndex:C}}})});const u=(0,A.useId)(),h=(0,A.useId)(),i=(0,A.useId)(),v=(0,A.useId)(),T=(0,A.useId)();return(0,f.jsxs)(f.Fragment,{children:[p===O.Manual&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(me.$n,{icon:"plus",size:"sm",variant:"secondary",onClick:y,className:r.marginBot,children:(0,f.jsx)(a.x6,{i18nKey:"xychart.series-editor.add-series",children:"Add series"})}),(0,f.jsx)("div",{className:r.marginBot,children:e.map((l,d)=>(0,f.jsxs)("div",{className:d===s?`${r.row} ${r.sel}`:r.row,onClick:()=>z(d),role:"button","aria-label":(0,a.t)("xychart.series-editor.aria-label-select-series","Select series {{seriesNum}}",{seriesNum:d+1}),tabIndex:0,onKeyPress:m=>{m.key==="Enter"&&z(d)},children:[(0,f.jsx)(oe.R,{name:l.name?.fixed??`Series ${d+1}`,onChange:m=>{l.name={fixed:m===""||m===`Series ${d+1}`?void 0:m},n([...e])}}),(0,f.jsx)(ee.K,{name:"trash-alt",className:(0,V.cx)(r.actionIcon),onClick:()=>R(d),tooltip:(0,a.t)("xychart.series-editor.tooltip-delete-series","Delete series")})]},`series/${d}`))})]}),s>=0&&E!=null&&(0,f.jsxs)(A.Fragment,{children:[(0,f.jsx)(te.D,{label:(0,a.t)("xychart.series-editor.label-frame","Frame"),children:(0,f.jsx)(ce.l6,{inputId:u,placeholder:p===O.Auto?(0,a.t)("xychart.series-editor.placeholder-all-frames","All frames"):(0,a.t)("xychart.series-editor.placeholder-select-frame","Select frame"),isClearable:!0,options:o.data.map((l,d)=>({value:d,label:`${(0,L.Ri)(l,d)} (index: ${d}, rows: ${l.length})`})),value:E.frame?.matcher.options,onChange:l=>{l==null?delete E.frame:E.frame={matcher:{id:M.jR.byIndex,options:Number(l.value)}},n([...e])}})}),(0,f.jsx)(te.D,{label:(0,a.t)("xychart.series-editor.label-x-field","X field"),children:(0,f.jsx)(Z.O,{id:h,value:E.x?.matcher.options,context:o,onChange:l=>{l==null?delete E.x:E.x={matcher:{id:M.Ct.byName,options:l}},n([...e])},item:{id:"x",name:"x",settings:{filter:l=>(p===O.Auto||l.state?.origin?.frameIndex===E.frame?.matcher.options)&&(l.type===F.PU.number||l.type===F.PU.time)&&!l.config.custom?.hideFrom?.viz,baseNameMode:I,placeholderText:p===O.Auto?(0,a.t)("xychart.series-editor.placeholder-x-field","First number or time field in each frame"):void 0}}})}),(0,f.jsx)(te.D,{label:(0,a.t)("xychart.series-editor.label-y-field","Y field"),children:(0,f.jsx)(Z.O,{id:i,value:E.y?.matcher?.options,context:o,onChange:l=>{l==null?delete E.y:E.y={matcher:{id:M.Ct.byName,options:l}},n([...e])},item:{id:"y",name:"y",settings:{filter:l=>(p===O.Auto||l.state?.origin?.frameIndex===E.frame?.matcher.options)&&l.type===F.PU.number&&!l.config.custom?.hideFrom?.viz,baseNameMode:I,placeholderText:p===O.Auto?(0,a.t)("xychart.series-editor.placeholder-y-field","Remaining number fields in each frame"):void 0}}})}),(0,f.jsx)(te.D,{label:(0,a.t)("xychart.series-editor.label-size-field","Size field"),children:(0,f.jsx)(Z.O,{id:v,value:E.size?.matcher?.options,context:o,onChange:l=>{l==null?delete E.size:E.size={matcher:{id:M.Ct.byName,options:l}},n([...e])},item:{id:"size",name:"size",settings:{filter:l=>(p===O.Auto||l.state?.origin?.frameIndex===E.frame?.matcher.options)&&l.type===F.PU.number&&!l.config.custom?.hideFrom?.viz,baseNameMode:I,placeholderText:""}}})}),(0,f.jsx)(te.D,{label:(0,a.t)("xychart.series-editor.label-color-field","Color field"),children:(0,f.jsx)(Z.O,{id:T,value:E.color?.matcher?.options,context:o,onChange:l=>{l==null?delete E.color:E.color={matcher:{id:M.Ct.byName,options:l}},n([...e])},item:{id:"color",name:"color",settings:{filter:l=>(p===O.Auto||l.state?.origin?.frameIndex===E.frame?.matcher.options)&&l.type===F.PU.number&&!l.config.custom?.hideFrom?.viz,baseNameMode:I,placeholderText:""}}})})]},D)]})},he=e=>({marginBot:(0,V.css)({marginBottom:"20px"}),row:(0,V.css)({padding:`${e.spacing(.5,1)}`,borderRadius:`${e.shape.radius.default}`,background:`${e.colors.background.secondary}`,minHeight:`${e.spacing(4)}`,display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"3px",cursor:"pointer",border:`1px solid ${e.components.input.borderColor}`,"&:hover":{border:`1px solid ${e.components.input.borderHover}`}}),sel:(0,V.css)({border:`1px solid ${e.colors.primary.border}`,"&:hover":{border:`1px solid ${e.colors.primary.border}`}}),actionIcon:(0,V.css)({color:`${e.colors.text.secondary}`,"&:hover":{color:`${e.colors.text}`}})});var ie=t(6773),se=t(64394),Oe=t(43173),He=t(64400),G=t(54735),je=t(4268),Ye=t(92790),U=t(739),Ee=t(69234),Me=t(36192),pe=t(16913),ze=t(55978),Te=t(39064),Fe=t(61048),De=t(41530),Xe=t(47466),Ie=t(55386),ge=t(36638);function K(e,n){return e.display?(0,Ie.cN)(e.display(n)):`${n}`}function ye(e){return e.id===M.jR.byIndex?(n,o)=>o===e.options:()=>!1}function fe(e,n,o,r){(0,L.Fm)(o),(0,L.j2)(o,r);let p=[];n.length===0&&(n=[{}]);const{palette:x,getColorByName:b}=Oe.$.theme2.visualization;if(n.forEach((c,s)=>{if(e===O.Manual&&(c.frame?.matcher==null||c.x?.matcher==null||c.y?.matcher==null))return;let z=(0,ge.NS)(c.x?.matcher??{id:M.Ct.byType,options:"number"}),y=(0,ge.NS)(c.y?.matcher??{id:M.Ct.byType,options:"number"}),R=c.color?(0,ge.NS)(c.color.matcher):null,E=c.size?(0,ge.NS)(c.size.matcher):null,D=c.frame?ye(c.frame.matcher):null;o.forEach((I,u)=>{if(D!=null&&!D(I,u))return;let h=[],i=[],v=I.fields.filter(C=>C.type===F.PU.number||C.type===F.PU.time),T=v.find(C=>z(C,I,o)),l=v.filter(C=>C.type===F.PU.number),d=R!=null?l.find(C=>R(C,I,o)):void 0,m=E!=null?l.find(C=>E(C,I,o)):void 0;T!=null&&(l.forEach(C=>{if(C!==T&&!(e===O.Auto&&(C===d||C===m))&&!(e===O.Manual&&i.length>0)&&y(C,I,o)&&!C.config.custom?.hideFrom?.viz){let j=C,W={name:{value:c.name?.fixed??(0,L.Ct)(j,I,o)},showPoints:j.config.custom.show===N.Lines?U.yL.Never:U.yL.Always,pointShape:j.config.custom.pointShape,pointStrokeWidth:j.config.custom.pointStrokeWidth,fillOpacity:j.config.custom.fillOpacity,showLine:j.config.custom.show!==N.Points,lineWidth:j.config.custom.lineWidth??2,lineStyle:j.config.custom.lineStyle,x:{field:T},y:{field:j},color:{},size:{},_rest:h};d!=null&&(W.color.field=d),m!=null&&(W.size.field=m,W.size.min=m.config.custom.pointSize?.min??5,W.size.max=m.config.custom.pointSize?.max??100),i.push(W)}}),i.length,I.fields.forEach(C=>{i.some(({x:P,y:W,color:w,size:J})=>P.field===C||W.field===C||w.field===C||J.field===C)||h.push(C)}),p.push(...i))})}),p.length!==0){let c=0;p.forEach((s,z)=>{if(s.color.field==null){let y=s.y.field.config.color??{mode:se.Y.PaletteClassic},R="";y.mode===se.Y.PaletteClassic?R=b(x[c++%x.length]):y.mode===se.Y.Fixed&&(R=b(y.fixedColor)),s.color.fixed=R}s.size.field==null&&(s.size.fixed=s.y.field.config.custom.pointSize?.fixed??5)}),Re(p)}return p}function Re(e){let n=e.map(p=>p.name.value.split(/\s+/g));const{prefix:o,suffix:r}=et(n);(o<1/0||r<1/0)&&e.forEach((p,x)=>{p.name.value=n[x].slice(o,n[x].length-r).join(" ")})}function _e(e){let n=e.map(b=>b.split(/\s+/g)),{prefix:o,suffix:r}=et(n),p=n[0];if(p.length===1&&o===1&&r===1)return"";let x=[];return o>0&&x.push(...p.slice(0,o)),r>0&&x.push(...p.slice(-r)),x.join(" ")}function et(e){let n=1/0,o=1/0,r=e[0];for(let p=1;p<e.length;p++)e[p].length<r.length&&(r=e[p]);for(let p=1;p<e.length;p++){let x=e[p];if(x!==r){let b=0;for(let s=0;s<r.length&&x[s]===r[s];s++)b++;b<n&&(n=b);let c=0;for(let s=r.length-1;s>=0&&x[s]===r[s];s--)c++;c<o&&(o=c)}}return{prefix:n,suffix:o}}function Le(e,n){return e!==n&&e.includes(" ")&&(e=e.replace(n,"").trim()),e}function Ne(e){return e.config.custom.hideFrom?.tooltip??!1}function We(e){return e.state?.displayName??e.name}const ft=({dataIdxs:e,seriesIdx:n,data:o,xySeries:r,dismiss:p,isPinned:x,replaceVariables:b,dataLinks:c,canExecuteActions:s})=>{const z=e.find(m=>m!==null),y=r[n-1],R=y.x.field,E=y.y.field,D=y.size.field,I=y.color.field;let u=y.name.value,h=I?.display?.(I.values[z]).color??y.color.fixed??"#fff",i=I?.config.custom?.fillOpacity;i!=null&&(h=ie.MV.alpha(h,i/100));const v={label:u,value:"",color:h,colorIndicator:ze.fX.marker_md},T=[],l=new Set;Ne(R)||(T.push({label:Le(We(R),u),value:K(R,R.values[z])}),l.add(R)),Ne(E)||(T.push({label:Le(We(E),u),value:K(E,E.values[z])}),l.add(E)),D!=null&&!l.has(D)&&!Ne(D)&&(T.push({label:Le(We(D),u),value:K(D,D.values[z])}),l.add(D)),I!=null&&!l.has(I)&&!Ne(I)&&(T.push({label:Le(We(I),u),value:K(I,I.values[z])}),l.add(I)),y._rest.forEach(m=>{Ne(m)||T.push({label:Le(m.state?.displayName??m.name,u),value:K(m,m.values[z])})});let d;if(n!=null){const m=c?.some(C=>C.oneClick===!0);if(x||m){const C=o.find(P=>P.fields.includes(E)),j=s?(0,pe.OG)(C,E,b,z):[];d=(0,f.jsx)(Te.S,{dataLinks:c,actions:j})}}return(0,f.jsxs)(Fe.i,{children:[(0,f.jsx)(De.A,{item:v,isPinned:x}),(0,f.jsx)(Xe.o,{items:T,isPinned:x}),d]})};var mt=t(84140),we=t(36613),ae=t(18600),ht=t(33553),pt=t(76637),xt=t(21275),gt=t(47276),tt=t(81897),yt=t(50348);const vt=(e,n)=>{if(e.length===0)return{builder:null,prepData:()=>[]};let o,r;function p(u){return(i,v,T,l)=>(we.A.orient(i,v,(d,m,C,j,P,W,w,J,lt,Ze,Se,Ot,ot,st,Xt)=>{const Ae=we.A.pxRatio,ne=e[v-1];let Ge=i.data[v],Je=ne.showLine,jt=ne.showPoints===U.yL.Always,xe=ne.pointStrokeWidth??0;i.ctx.save(),i.ctx.rect(i.bbox.left,i.bbox.top,i.bbox.width,i.bbox.height),i.ctx.clip();let Ve=ne.fillOpacity/100;i.ctx.fillStyle=ie.MV.alpha(d.fill(),Ve),i.ctx.strokeStyle=ie.MV.alpha(d.stroke(),1),i.ctx.lineWidth=xe;let Ft=2*Math.PI,at=j.key,nt=P.key;const rt=ne.y.field.config.custom.pointSize,Qe=ne.color.field!=null;let $e=(rt.max??rt.fixed)*Ae,Dt=i.posToVal(-$e/2,at),Rt=i.posToVal(i.bbox.width/Ae+$e/2,at),Wt=i.posToVal(i.bbox.height/Ae+$e/2,nt),wt=i.posToVal(-$e/2,nt),Vt=u.disp.size.values(i,v),dt=D[v-1].values,$t=D[v-1].index,Bt=D[v-1].hasAlpha,Ut=ne.pointShape===g.Square,ct=Je?new Path2D:null,Be=-1;for(let k=0;k<Ge[0].length;k++){let ke=Ge[0][k],qe=Ge[1][k];if(ke>=Dt&&ke<=Rt&&qe>=Wt&&qe<=wt){let le=Math.round(Vt[k]*Ae),Ue=W(ke,j,Ze,J),Ke=w(qe,P,Se,lt);if(Je&&ct.lineTo(Ue,Ke),jt){if(Qe&&dt[k]!==Be){Be=dt[k];let Ce=Be===-1?se.F:$t[Be];i.ctx.fillStyle=Bt?Ce:ie.MV.alpha(Ce,Ve),i.ctx.strokeStyle=ie.MV.alpha(Ce,1)}if(Ut){let Ce=Math.round(Ue-le/2),ut=Math.round(Ke-le/2);(Qe||Ve>0)&&i.ctx.fillRect(Ce,ut,le,le),xe>0&&i.ctx.strokeRect(Ce,ut,le,le)}else i.ctx.beginPath(),i.ctx.arc(Ue,Ke,le/2,0,Ft),(Qe||Ve>0)&&i.ctx.fill(),xe>0&&i.ctx.stroke();u.each(i,v,k,Ue-le/2-xe/2,Ke-le/2-xe/2,le+xe,le+xe)}}}if(Je){i.ctx.strokeStyle=ne.color.fixed,i.ctx.lineWidth=ne.lineWidth*Ae;const{lineStyle:k}=ne;k&&k.fill!=="solid"&&(k.fill==="dot"&&(i.ctx.lineCap="round"),i.ctx.setLineDash(k.dash??[10,10])),i.ctx.stroke(ct)}i.ctx.restore()}),null)}let x=p({disp:{size:{values:(u,h)=>u.data[h][2]},color:{values:(u,h)=>u.data[h][3]}},each:(u,h,i,v,T,l,d)=>{v-=u.bbox.left,T-=u.bbox.top,o.add({x:v,y:T,w:l,h:d,sidx:h,didx:i})}});const b=new gt.e;b.setCursor({drag:{setScale:!0},dataIdx:(u,h)=>{if(h===1){const i=we.A.pxRatio;r=null;let v=1/0,T=u.cursor.left*i,l=u.cursor.top*i;o.get(T,l,1,1,d=>{if((0,tt.ur)(T,l,d.x,d.y,d.x+d.w,d.y+d.h)){let m=d.x+d.w/2,C=d.y+d.h/2,j=m-T,P=C-l,W=Math.sqrt(j**2+P**2);W<=d.w/2&&W<=v&&(v=W,r=d)}})}return r&&h===r.sidx?r.didx:null},points:{size:(u,h)=>r&&h===r.sidx?r.w/we.A.pxRatio:0,fill:(u,h)=>"rgba(255,255,255,0.4)"}}),b.addHook("init",(u,h)=>{u.over.style.overflow="hidden"}),b.addHook("drawClear",u=>{o=o||new tt.C$(0,0,u.bbox.width,u.bbox.height),o.clear(),u.series.forEach((h,i)=>{i>0&&(h._paths=null)})}),b.setMode(2);let c=e[0].x.field,s=c.type===F.PU.time,z=c.config,y=z.custom,R=y?.scaleDistribution;b.addScale({scaleKey:"x",isTime:s,auto:!0,orientation:U.Lt.Horizontal,direction:U.ON.Right,distribution:R?.type,log:R?.log,linearThreshold:R?.linearThreshold,min:z.min,max:z.max,softMin:y?.axisSoftMin,softMax:y?.axisSoftMax,centeredZero:y?.axisCenteredZero,decimals:z.decimals,range:s?(u,h,i)=>[h,i]:void 0});let E=y.axisLabel;if(E==null||E===""){let u=e.map(i=>i.x.field.state?.displayName??""),h=e.length===1?c.state?.displayName??c.name:new Set(u).size===1?u[0]:_e(u);h!==""&&(E=h)}b.addAxis({scaleKey:"x",isTime:s,placement:y?.axisPlacement!==U.vM.Hidden?U.vM.Bottom:U.vM.Hidden,show:y?.axisPlacement!==U.vM.Hidden,grid:{show:y?.axisGridShow},border:{show:y?.axisBorderShow},theme:n,label:E,formatValue:s?void 0:(u,h)=>(0,Ie.cN)(c.display(u,h))}),e.forEach((u,h)=>{let i=u.y.field;const v=u.color.fixed,T=u.color.fixed;let l=i.config.unit??"y",d=i.config,m=d.custom,C=m?.scaleDistribution;b.addScale({scaleKey:l,orientation:U.Lt.Vertical,direction:U.ON.Up,distribution:C?.type,log:C?.log,linearThreshold:C?.linearThreshold,min:d.min,max:d.max,softMin:m?.axisSoftMin,softMax:m?.axisSoftMax,centeredZero:m?.axisCenteredZero,decimals:d.decimals});let j=m.axisLabel;if(j==null||j===""){let P=e.map(w=>w.y.field.state?.displayName??""),W=e.length===1?i.state?.displayName??i.name:new Set(P).size===1?P[0]:_e(P);W!==""&&(j=W)}b.addAxis({scaleKey:l,theme:n,placement:m?.axisPlacement===U.vM.Auto?U.vM.Left:m?.axisPlacement,show:m?.axisPlacement!==U.vM.Hidden,grid:{show:m?.axisGridShow},border:{show:m?.axisBorderShow},size:m?.axisWidth,label:j,formatValue:(P,W)=>(0,Ie.cN)(i.display(P,W))}),b.addSeries({facets:[{scale:"x",auto:!0},{scale:l,auto:!0}],pathBuilder:x,theme:n,scaleKey:"",lineColor:ie.MV.alpha(v??"#ffff",1),fillColor:ie.MV.alpha(T??"#ffff",.5),show:!i.state?.hideFrom?.viz})});const D=e.map(u=>{const h={index:[],getAll:()=>[],getOne:()=>-1,values:[],hasAlpha:!1},i=u.color.field;return i!=null&&(Object.assign(h,Ct(i,n)),h.hasAlpha=h.index.some(v=>!v.endsWith("ff"))),h});function I(u){const{size:h,color:i}=St(u);return u.forEach((v,T)=>{D[T].values=D[T].getAll(v.color.field?.values??[],i.min,i.max)}),[null,...u.map((v,T)=>{let l=v.x.field.values.length,d;if(v.size.field!=null){let{min:m,max:C}=v.size,j=m**2,W=C**2-j,w=v.size.field.values,J=h.min,Ze=h.max-J;d=Array(l);for(let Se=0;Se<w.length;Se++){let ot=(w[Se]-J)/Ze,st=j+ot*W;d[Se]=st**.5}}else d=Array(l).fill(v.size.fixed);return[v.x.field.values,v.y.field.values,d,Array(l).fill(v.color.fixed)]})]}return{builder:b,prepData:I}},St=e=>{const n={size:{min:1/0,max:-1/0},color:{min:1/0,max:-1/0}};return e.forEach(o=>{[o.size,o.color].forEach((r,p)=>{if(r.field!=null){let x=p===0?n.size:n.color;const b=r.field.values;for(let c=0;c<b.length;c++){const s=b[c];s!=null&&(s<x.min&&(x.min=s),s>x.max&&(x.max=s))}}})}),n};function Pe(e,n){return(0,mt.A)(n.visualization.getColorByName(e)).toHex8String()}function Ct(e,n){let o=[],r=()=>[],p=()=>-1,x="";if(e.config.mappings?.length??!1){let b=e.config.mappings;for(let c=0;c<b.length;c++){let s=b[c];if(s.type===ae.d.ValueToText)for(let z in s.options){let{color:y}=s.options[z];if(y!=null){let R=e.type===F.PU.string?JSON.stringify(z):Number(z);x+=`v === ${R} ? ${o.length} : `,o.push(Pe(y,n))}}else if(s.options.result.color!=null){let{color:z}=s.options.result;if(s.type===ae.d.RangeToText){let y=[];s.options.from!=null&&y.push(`v >= ${Number(s.options.from)}`),s.options.to!=null&&y.push(`v <= ${Number(s.options.to)}`),y.length>0&&(x+=`${y.join(" && ")} ? ${o.length} : `,o.push(Pe(z,n)))}else if(s.type===ae.d.SpecialValue){let y=s.options.match;y===ae.W.NaN?x+="isNaN(v)":y===ae.W.NullAndNaN?x+="v == null || isNaN(v)":x+=`v ${y===ae.W.True?"=== true":y===ae.W.False?"=== false":y===ae.W.Null?"== null":y===ae.W.Empty?'=== ""':"== null"}`,x+=` ? ${o.length} : `,o.push(Pe(z,n))}else s.type,ae.d.RegexToText}}x+="-1"}else if(e.config.color?.mode===xt.Yb.Thresholds){if(e.config.thresholds?.mode===ht.O.Absolute){let b=e.config.thresholds.steps,c=b.length-1;for(let s=c;s>0;s--){let z=Number(b[s].value);x+=`v >= ${z} ? ${s} : `}x+="0",o=b.map(s=>Pe(s.color,n))}}else if(e.config.color?.mode?.startsWith("continuous")){let b=(0,pt.Qi)(e).getCalculator(e,n);o=Array(32);for(let c=0;c<o.length;c++){let s=c/(o.length-1);o[c]=Pe(b(s,s),n)}r=(c,s,z)=>(0,yt.O4)(c,o,s,z)}return x!==""&&(p=new Function("v",`return ${x};`),r=new Function("vals",`
      let idxs = Array(vals.length);

      for (let i = 0; i < vals.length; i++) {
        let v = vals[i];
        idxs[i] = ${x};
      }

      return idxs;
    `)),{index:o,getOne:p,getAll:r}}const bt=e=>{const n=(0,X.of)(Et),o=(0,X.$j)(),{canExecuteActions:r}=(0,He.d2)(),p=(0,A.useMemo)(()=>r?.()??!1,[r]);let{mapping:x,series:b}=e.options,c=(0,A.useMemo)(()=>fe(x,b,e.data.series,e.fieldConfig),[x,b,e.data.series,e.fieldConfig]),{builder:s,prepData:z}=(0,A.useMemo)(()=>vt(c,Oe.$.theme2),[x,b,e.data.structureRev,e.fieldConfig,e.options.tooltip]),y=(0,A.useMemo)(()=>z(c),[c]),R=s==null||y.length===0?"Err":"";const E=()=>{if(!e.options.legend.showLegend)return null;const D=[];c.forEach((T,l)=>{let d=T.y.field;d.config.custom.hideFrom?.legend||D.push({yAxis:1,label:T.name.value,color:ie.MV.alpha(T.color.fixed??se.F,1),getItemKey:()=>`${l}-${T.name.value}`,fieldName:d.state?.displayName??d.name,disabled:d.state?.hideFrom?.viz??!1,getDisplayValues:()=>(0,Me.UO)(e.options.legend.calcs,d,o)})});const{placement:I,displayMode:u,width:h,sortBy:i,sortDesc:v}=e.options.legend;return(0,f.jsx)(G.KU.Legend,{placement:I,width:h,children:(0,f.jsx)(je.t,{className:n.legend,placement:I,items:D,displayMode:u,sortBy:i,sortDesc:v,isSortable:!0})})};return R?(0,f.jsx)("div",{className:"panel-empty",children:(0,f.jsx)("p",{children:R})}):(0,f.jsx)(G.KU,{width:e.width,height:e.height,legend:E(),children:(D,I)=>(0,f.jsx)(Ye.Z,{config:s,data:y,width:D,height:I,children:e.options.tooltip.mode!==U.$N.None&&(0,f.jsx)(Ee.xl,{config:s,hoverMode:Ee.b3.xyOne,getDataLinks:(u,h)=>{const i=c[u-1];return(0,pe.u6)(i.y.field,h)},render:(u,h,i,v,T,l,d,m)=>(0,f.jsx)(ft,{data:e.data.series,dataIdxs:h,xySeries:c,dismiss:T,isPinned:v,seriesIdx:i,replaceVariables:e.replaceVariables,dataLinks:m,canExecuteActions:p}),maxWidth:e.options.tooltip.maxWidth})})})},Et=()=>({legend:(0,V.css)({div:{justifyContent:"flex-start"}})});var de=t(83340),Mt=t(44017),zt=t(45013),it=t(32471);const Tt=5;function It(e){return{standardOptions:{[de.uo.Min]:{hideFromDefaults:!0},[de.uo.Max]:{hideFromDefaults:!0},[de.uo.Unit]:{hideFromDefaults:!0},[de.uo.Decimals]:{hideFromDefaults:!0},[de.uo.NoValue]:{hideFromDefaults:!0},[de.uo.DisplayName]:{hideFromDefaults:!0},[de.uo.Color]:{settings:{byValueSupport:!0,bySeriesSupport:!0,preferThresholdsMode:!1},defaultValue:{mode:se.Y.PaletteClassic}},[de.uo.Links]:{settings:{showOneClick:!0}},[de.uo.Actions]:{hideFromDefaults:!1}},useCustomConfig:n=>{const o=[(0,a.t)("xychart.category-xychart","XY Chart")];n.addRadio({path:"show",name:(0,a.t)("xychart.name-show","Show"),category:o,defaultValue:e.show,settings:{options:[{label:(0,a.t)("xychart.show-options.label-points","Points"),value:N.Points},{label:(0,a.t)("xychart.show-options.label-lines","Lines"),value:N.Lines},{label:(0,a.t)("xychart.show-options.label-both","Both"),value:N.PointsAndLines}]}}).addSliderInput({path:"pointSize.fixed",name:(0,a.t)("xychart.name-point-size","Point size"),category:o,defaultValue:e.pointSize?.fixed??Tt,settings:{min:1,max:100,step:1},showIf:r=>r.show!==N.Lines}).addNumberInput({path:"pointSize.min",name:(0,a.t)("xychart.name-min-point-size","Min point size"),category:o,showIf:r=>r.show!==N.Lines}).addNumberInput({path:"pointSize.max",name:(0,a.t)("xychart.name-max-point-size","Max point size"),category:o,showIf:r=>r.show!==N.Lines}).addRadio({path:"pointShape",name:(0,a.t)("xychart.name-point-shape","Point shape"),category:o,defaultValue:g.Circle,settings:{options:[{value:g.Circle,label:(0,a.t)("xychart.point-shape-options.label-circle","Circle")},{value:g.Square,label:(0,a.t)("xychart.point-shape-options.label-square","Square")}]},showIf:r=>r.show!==N.Lines}).addSliderInput({path:"pointStrokeWidth",name:(0,a.t)("xychart.name-point-stroke-width","Point stroke width"),category:o,defaultValue:1,settings:{min:0,max:10},showIf:r=>r.show!==N.Lines}).addSliderInput({path:"fillOpacity",name:(0,a.t)("xychart.name-fill-opacity","Fill opacity"),category:o,defaultValue:50,settings:{min:0,max:100,step:1},showIf:r=>r.show!==N.Lines}).addCustomEditor({id:"lineStyle",path:"lineStyle",name:(0,a.t)("xychart.name-line-style","Line style"),category:o,showIf:r=>r.show!==N.Points,editor:it.F,override:it.F,process:$.hS,shouldApply:r=>r.type===F.PU.number}).addSliderInput({path:"lineWidth",name:(0,a.t)("xychart.name-line-width","Line width"),category:o,defaultValue:e.lineWidth,settings:{min:0,max:10,step:1},showIf:r=>r.show!==N.Points}),Mt.rg(n,e),zt.e(n)}}}var ve=(e=>(e.Auto="auto",e.Manual="manual",e))(ve||{}),Lt=(e=>(e.Lines="lines",e.Points="points",e.PointsAndLines="points+lines",e))(Lt||{});const Kt={exclude:[]},Ht={label:U.yL.Auto,show:"points"},Yt={series:[]},Nt=e=>{const n=e?.pluginVersion??"";return n===""||parseFloat(n)<11.1?Pt(e):e.options};function Pt(e){const{dims:n,seriesMapping:o,series:r,...p}=e.options,{exclude:x=[],frame:b,x:c}=n??{},s=e.fieldConfig.defaults.custom;let z=r;o===ve.Auto&&(z=[{x:void 0,y:void 0}]);let y=0;const R=z.map(({x:D,y:I,pointColor:u,pointSize:h,frame:i})=>{const{fixed:v,field:T}=u??{},{fixed:l,field:d,min:m,max:C}=h??{};let j,P;return D==null&&c==null?j={id:M.Ct.byType,options:"number"}:j={id:M.Ct.byName,options:D??c},I==null?P={id:M.Ct.byType,options:"number"}:P={id:M.Ct.byName,options:I},T==null&&v&&s.pointColor?.fixed!==v&&(e.fieldConfig.overrides.some(w=>w.matcher.id===P.id&&w.matcher.options===P.options&&w.properties.some(J=>J.id==="color"))||e.fieldConfig.overrides.push({matcher:P,properties:[{id:"color",value:{mode:"fixed",fixedColor:v}}]})),d==null&&l&&s.pointSize?.fixed!==l&&(e.fieldConfig.overrides.some(w=>w.matcher.id===P.id&&w.matcher.options===P.options&&w.properties.some(J=>J.id==="custom.pointSize.fixed"))||e.fieldConfig.overrides.push({matcher:P,properties:[{id:"custom.pointSize.fixed",value:l}]})),d!=null&&(m&&s.pointSize?.min!==m&&(e.fieldConfig.overrides.some(w=>w.matcher.id===P.id&&w.matcher.options===P.options&&w.properties.some(J=>J.id==="custom.pointSize.min"))||e.fieldConfig.overrides.push({matcher:{id:M.Ct.byName,options:d},properties:[{id:"custom.pointSize.min",value:m}]})),C&&s.pointSize?.max!==C&&(e.fieldConfig.overrides.some(w=>w.matcher.id===P.id&&w.matcher.options===P.options&&w.properties.some(J=>J.id==="custom.pointSize.max"))||e.fieldConfig.overrides.push({matcher:{id:M.Ct.byName,options:d},properties:[{id:"custom.pointSize.max",value:C}]}))),{frame:{matcher:{id:M.jR.byIndex,options:i??(o===ve.Manual?y++:b??0)}},x:{matcher:j},y:{matcher:P,...x.length&&{exclude:{id:M.Ct.byNames,options:x}}},...T&&{color:{matcher:{id:M.Ct.byName,options:T}}},...d&&{size:{matcher:{id:M.Ct.byName,options:d}}}}});return{...p,mapping:o===ve.Auto?ve.Auto:ve.Manual,series:R}}const At=new S.m(bt).setMigrationHandler(Nt).useFieldConfig(It(re)).setPanelOptions(e=>{const n=[(0,a.t)("xychart.category-xychart","XY Chart")];e.addRadio({path:"mapping",name:(0,a.t)("xychart.name-series-mapping","Series mapping"),category:n,defaultValue:"auto",settings:{options:[{value:"auto",label:(0,a.t)("xychart.series-mapping-options.label-auto","Auto")},{value:"manual",label:(0,a.t)("xychart.series-mapping-options.label-manual","Manual")}]}}).addCustomEditor({id:"series",path:"series",name:"",category:n,editor:B,defaultValue:[{}]}),H.D(e,!0),_.H(e)})},77239:(be,q,t)=>{t.d(q,{B:()=>Z});var S=t(74848),a=t(22803),H=t(96540),_=t(63142),f=t(53371),V=t(45967),A=t(64394),Y=t(71479),M=t(55978),$=t(55302),L=(g=>(g[g.Leading=0]="Leading",g[g.Trailing=1]="Trailing",g))(L||{});const F=({color:g=A.F,colorIndicator:O=M.Ev,position:N=0,lineStyle:ue,isHollow:re})=>{const Q=(0,_.of)(X);return re?(0,S.jsx)("div",{style:{border:`1px solid ${g}`},className:(0,a.cx)(N===0?Q.leading:Q.trailing,(0,$.L$)(O,Q))}):O===M.fX.series?(0,S.jsx)(Y.p,{color:g,lineStyle:ue,className:N===0?Q.leading:Q.trailing}):(0,S.jsx)("span",{style:{backgroundColor:g},className:(0,a.cx)(N===0?Q.leading:Q.trailing,(0,$.L$)(O,Q))})},X=g=>({leading:(0,a.css)({marginRight:g.spacing(.5)}),trailing:(0,a.css)({marginLeft:g.spacing(.5)}),series:(0,a.css)({width:"14px",height:"4px",borderRadius:g.shape.radius.pill,minWidth:"14px"}),value:(0,a.css)({width:"12px",height:"12px",borderRadius:g.shape.radius.default,fontWeight:500,minWidth:"12px"}),hexagon:(0,a.css)({}),pie_1_4:(0,a.css)({}),pie_2_4:(0,a.css)({}),pie_3_4:(0,a.css)({}),marker_sm:(0,a.css)({width:"4px",height:"4px",borderRadius:g.shape.radius.circle,minWidth:"4px"}),marker_md:(0,a.css)({width:"8px",height:"8px",borderRadius:g.shape.radius.circle,minWidth:"8px"}),marker_lg:(0,a.css)({width:"12px",height:"12px",borderRadius:g.shape.radius.circle,minWidth:"12px"})});var me=(g=>(g.label="label",g.value="value",g))(me||{});const ee="Copied to clipboard",te=2*1e3,ce=7,Z=({label:g,value:O,color:N,colorIndicator:ue,colorPlacement:re=M.lJ.first,justify:Q="flex-start",isActive:B=!1,marginRight:he="0px",isPinned:ie,lineStyle:se,showValueScroll:Oe,isHiddenFromViz:He})=>{const G=(0,_.of)(oe,Q,he),je=Oe?{maxHeight:55,whiteSpace:"wrap",wordBreak:"break-word",overflowY:"auto"}:{whiteSpace:"pre-line",wordBreak:"break-word",lineHeight:1.2},[Ye,U]=(0,H.useState)(!1),[Ee,Me]=(0,H.useState)(null),[pe,ze]=(0,H.useState)(!1),Te=(0,H.useRef)(null),Fe=(0,H.useRef)(null);(0,H.useEffect)(()=>{let K;return pe&&(K=setTimeout(()=>{ze(!1)},te)),()=>{window.clearTimeout(K)}},[pe]);const De=async(K,ye)=>{if(!(navigator?.clipboard&&window.isSecureContext)){Xe(K,ye);return}try{await navigator.clipboard.writeText(K),Me({[`${ye}`]:K}),ze(!0)}catch{Me(null)}},Xe=(K,ye)=>{const fe=document.createElement("textarea");Te.current?.appendChild(fe),fe.value=K,fe.focus(),fe.select();try{document.execCommand("copy")&&(Me({[`${ye}`]:K}),ze(!0))}catch(Re){console.error("Unable to copy to clipboard",Re)}fe.remove()},Ie=K=>{K.currentTarget.offsetWidth<K.currentTarget.scrollWidth&&U(!0)},ge=()=>U(!1);return g.length*ce>window.innerWidth/2&&(g=g.replaceAll("{",`{
  `).replaceAll("}",`
}`).replaceAll(", ",`,
  `)),(0,S.jsxs)("div",{className:G.contentWrapper,children:[(N||g)&&(0,S.jsxs)("div",{className:G.valueWrapper,children:[N&&re===M.lJ.first&&(0,S.jsx)(F,{color:N,colorIndicator:ue,lineStyle:se,isHollow:He}),ie?(0,S.jsx)(S.Fragment,{children:(0,S.jsx)(V.m,{content:g,interactive:!1,show:Ye,children:(0,S.jsxs)(S.Fragment,{children:[pe&&Ee?.label&&(0,S.jsx)(f.r,{placement:"top",referenceElement:Te.current,children:ee}),(0,S.jsx)("div",{className:(0,a.cx)(G.label,B&&G.activeSeries,navigator?.clipboard&&G.copy),onMouseEnter:Ie,onMouseLeave:ge,onClick:()=>De(g,"label"),ref:Te,children:g})]})})}):(0,S.jsx)("div",{className:(0,a.cx)(G.label,B&&G.activeSeries),children:g})]}),(0,S.jsxs)("div",{className:G.valueWrapper,children:[N&&re===M.lJ.leading&&(0,S.jsx)(F,{color:N,colorIndicator:ue,position:L.Leading,lineStyle:se}),ie?(0,S.jsxs)(S.Fragment,{children:[pe&&Ee?.value&&(0,S.jsx)(f.r,{placement:"top",referenceElement:Fe.current,children:ee}),(0,S.jsx)("div",{className:(0,a.cx)(G.value,B,navigator?.clipboard&&G.copy),style:je,onClick:()=>De(O?O.toString():"","value"),ref:Fe,children:O})]}):(0,S.jsx)("div",{className:(0,a.cx)(G.value,B),style:je,children:O}),N&&re===M.lJ.trailing&&(0,S.jsx)(F,{color:N,colorIndicator:ue,position:L.Trailing,lineStyle:se})]})]})},oe=(g,O,N)=>({contentWrapper:(0,a.css)({display:"flex",alignItems:"start",justifyContent:O,marginRight:N}),label:(0,a.css)({color:g.colors.text.secondary,fontWeight:400,textOverflow:"ellipsis",overflow:"hidden",marginRight:g.spacing(2)}),value:(0,a.css)({fontWeight:500,textOverflow:"ellipsis",overflow:"hidden"}),valueWrapper:(0,a.css)({display:"flex",alignItems:"center"}),activeSeries:(0,a.css)({fontWeight:g.typography.fontWeightBold,color:g.colors.text.maxContrast}),copy:(0,a.css)({cursor:"pointer"})})}}]);

//# sourceMappingURL=xychart.00fad3433af8e002a728.js.map