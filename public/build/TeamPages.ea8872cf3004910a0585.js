"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[2212],{19192:(K,M,s)=>{s.d(M,{A:()=>x});var e=s(74848),y=s(22803),m=s(51898),E=s(92745),h=s(30703),C=s(34999),A=s(43951),c=s(45861);const o=(0,y.css)({textAlign:"center"}),u=(0,y.css)({maxWidth:"700px",margin:"0 auto"}),x=({title:i,buttonIcon:v,buttonLink:g,buttonTitle:P,buttonDisabled:B,onClick:$,proTip:L,proTipLink:S,proTipLinkTitle:b,proTipTarget:z,infoBox:a,infoBoxTitle:n})=>{const p=()=>(0,e.jsxs)(e.Fragment,{children:[L?(0,e.jsxs)("span",{children:[(0,e.jsx)(h.I,{name:"rocket"}),(0,e.jsxs)(E.x6,{i18nKey:"empty-list-cta.pro-tip",children:["ProTip: ",{proTip:L}]}),S&&(0,e.jsx)("a",{href:S,target:z,className:"text-link",children:b})]},"proTipFooter"):"",a?(0,e.jsx)(C.F,{severity:"info",title:n??"",className:u,children:(0,e.jsx)("div",{dangerouslySetInnerHTML:a})}):""]}),j=p()?"":(0,y.css)({marginBottom:"20px"}),U=g?c.z9:c.$n,F=(0,e.jsx)(U,{size:"lg",onClick:$,href:g,icon:v,className:j,"data-testid":m.Tp.components.CallToActionCard.buttonV2(P),disabled:B,children:P});return(0,e.jsx)(A.c,{className:o,message:i,footer:p(),callToActionElement:F})}},25096:(K,M,s)=>{s.d(M,{J:()=>C});var e=s(74848),y=s(22803),m=s(96540),E=s(27489),h=s(63142);const C=({text:c="PRO",className:o,experimentId:u,eventVariant:f="",...x})=>{const i=(0,h.of)(A);return(0,m.useEffect)(()=>{u&&(0,E.Xp)(u,"test",f)},[u,f]),(0,e.jsx)("span",{className:(0,y.cx)(i.badge,o),...x,children:c})},A=c=>({badge:(0,y.css)({marginLeft:c.spacing(1.25),borderRadius:c.shape.borderRadius(5),backgroundColor:c.colors.success.main,padding:c.spacing(.25,.75),color:"white",fontWeight:c.typography.fontWeightMedium,fontSize:c.typography.pxToRem(10)})})},42939:(K,M,s)=>{s.d(M,{pL:()=>y,z5:()=>E});var e=s(43173);const y=/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;function m(){const h=e.$.licenseInfo?.trialExpiry;return!!(h&&h>0)}const E=()=>m()&&e.$.featureToggles.featureHighlights},67145:(K,M,s)=>{s.d(M,{R:()=>f,X:()=>x});var e=s(92745),y=s(62061),m=s(25096),E=s(65642),h=s(15130),C=s(42939),A=s(11257),c=s(70590);const u={avatarUrl:s.p+"static/img/user_profile.4d4fc140.png",id:1,uid:"",name:"Loading",email:"loading",memberCount:0,permission:c.Xe.Member,accessControl:{isEditor:!1},orgId:0,updated:"",isProvisioned:!1};function f(i){const v={img:i.avatarUrl,id:"team-"+i.uid,subTitle:(0,e.t)("teams.build-nav-model.nav-model.subTitle.manage-members-and-settings","Manage members and settings"),url:`org/teams/edit/${i.uid}`,text:i.name,children:[{active:!1,icon:"sliders-v-alt",id:`team-settings-${i.uid}`,text:(0,e.t)("teams.build-nav-model.nav-model.text.settings","Settings"),url:`org/teams/edit/${i.uid}/settings`}]};(i===u||h.TP.hasPermissionInMetadata(A.w.ActionTeamsPermissionsRead,i))&&v.children.unshift({active:!1,icon:"users-alt",id:`team-members-${i.uid}`,text:(0,e.t)("teams.build-nav-model.text.members","Members"),url:`org/teams/edit/${i.uid}/members`});const g={active:!1,icon:"sync",id:`team-groupsync-${i.uid}`,text:(0,e.t)("teams.build-nav-model.team-group-sync.text.external-group-sync","External group sync"),url:`org/teams/edit/${i.uid}/groupsync`},P=i===u;return(0,C.z5)()&&(g.tabSuffix=()=>(0,m.J)({experimentId:P?"":"feature-highlights-team-sync-badge",eventVariant:"trial"})),(0,y.a)("teamsync")?(P||h.TP.hasPermissionInMetadata(A.w.ActionTeamsPermissionsRead,i))&&v.children.push(g):E.Ay.featureToggles.featureHighlights&&v.children.push({...g,tabSuffix:()=>(0,m.J)({experimentId:P?"":"feature-highlights-team-sync-badge"})}),v}function x(i){const v=f(u);let g;for(const P of v.children)if(P.id.indexOf(i)>0){P.active=!0,g=P;break}return{main:v,node:g}}},76172:(K,M,s)=>{s.r(M),s.d(M,{default:()=>Ae});var e=s(74848),y=s(25508),m=s(96540),E=s(54148),h=s(16817),C=s(62061),A=s(13791),c=s(22803),o=s(92745),u=s(27489),f=s(63142),x=s(30703),i=s(45861);const v=({featureName:t,className:r,children:l,text:d,featureId:T,eventVariant:D="",size:I="md",...O})=>{const R=(0,f.of)(g,I);return(0,m.useEffect)(()=>{(0,u.Xp)(`feature-highlights-${T}`,"test",D)},[D,T]),(0,e.jsxs)("div",{className:(0,c.cx)(R.box,r),...O,children:[(0,e.jsx)(x.I,{name:"rocket",className:R.icon}),(0,e.jsxs)("div",{className:R.inner,children:[(0,e.jsxs)("p",{className:R.text,children:[(0,e.jsx)(o.x6,{i18nKey:"upgrade-box.discovery-text",children:"You\u2019ve discovered a Pro feature!"})," ",d||(0,o.t)("upgrade-box.discovery-text-continued","Get the Grafana Pro plan to access {{featureName}}.",{featureName:t})]}),(0,e.jsx)(i.z9,{variant:"secondary",size:I,className:R.button,href:"https://grafana.com/profile/org/subscription",target:"__blank",rel:"noopener noreferrer",children:(0,e.jsx)(o.x6,{i18nKey:"upgrade-box.upgrade-button",children:"Upgrade"})})]})]})},g=(t,r)=>{const l=t.shape.borderRadius(2),d=r==="md"?"body":"bodySmall";return{box:(0,c.css)({display:"flex",alignItems:"center",position:"relative",borderRadius:l,background:t.colors.success.transparent,padding:t.spacing(2),color:t.colors.success.text,fontSize:t.typography[d].fontSize,textAlign:"left",lineHeight:"16px",margin:t.spacing(0,"auto",3,"auto"),maxWidth:`${t.breakpoints.values.xxl}px`,width:"100%"}),inner:(0,c.css)({display:"flex",alignItems:"center",width:"100%",justifyContent:"space-between"}),text:(0,c.css)({margin:0}),button:(0,c.css)({backgroundColor:t.colors.success.main,fontWeight:t.typography.fontWeightLight,color:"white","&:hover":{backgroundColor:t.colors.success.main},"&:focus-visible":{boxShadow:"none",color:t.colors.text.primary,outline:`2px solid ${t.colors.primary.main}`}}),icon:(0,c.css)({margin:t.spacing(.5,1,.5,.5)})}},P=({listItems:t,image:r,featureUrl:l,featureName:d,description:T,caption:D,action:I})=>{const O=(0,f.of)(B);return(0,e.jsxs)("div",{className:O.container,children:[(0,e.jsxs)("div",{className:O.content,children:[(0,e.jsx)("h3",{className:O.title,children:(0,e.jsxs)(o.x6,{i18nKey:"upgrade-box.get-started",children:["Get started with ",{featureName:d}]})}),T&&(0,e.jsx)("h6",{className:O.description,children:T}),(0,e.jsx)("ul",{className:O.list,children:t.map((R,Z)=>(0,e.jsxs)("li",{children:[(0,e.jsx)(x.I,{name:"check",size:"xl",className:O.icon})," ",R]},Z))}),I?.link&&(0,e.jsx)(i.z9,{variant:"primary",href:I.link,children:I.text}),I?.onClick&&(0,e.jsx)(i.$n,{variant:"primary",onClick:I.onClick,children:I.text}),l&&(0,e.jsx)(i.z9,{fill:"text",href:l,className:O.link,target:"_blank",rel:"noreferrer noopener",children:(0,e.jsx)(o.x6,{i18nKey:"upgrade-box.learn-more",children:"Learn more"})})]}),(0,e.jsxs)("div",{className:O.media,children:[(0,e.jsx)("img",{src:S(r),alt:"Feature screenshot"}),D&&(0,e.jsx)("p",{className:O.caption,children:D})]})]})},B=t=>({container:(0,c.css)({display:"flex",justifyContent:"space-between"}),content:(0,c.css)({width:"45%",marginRight:t.spacing(4)}),media:(0,c.css)({width:"55%",img:{width:"100%"}}),title:(0,c.css)({color:t.colors.text.maxContrast}),description:(0,c.css)({color:t.colors.text.primary,fontWeight:t.typography.fontWeightLight}),list:(0,c.css)({listStyle:"none",margin:t.spacing(4,0,2,0),li:{display:"flex",alignItems:"flex-start",color:t.colors.text.primary,padding:t.spacing(1,0)}}),icon:(0,c.css)({color:t.colors.success.main,marginRight:t.spacing(1)}),link:(0,c.css)({marginLeft:t.spacing(2)}),caption:(0,c.css)({fontWeight:t.typography.fontWeightLight,margin:t.spacing(1,0,0)})}),$=({featureName:t,description:r,featureUrl:l,image:d})=>{const T=useStyles2(L);return jsxs("div",{className:T.container,children:[jsx("h3",{className:T.title,children:jsxs(Trans,{i18nKey:"upgrade-box.get-started",children:["Get started with ",{featureName:t}]})}),r&&jsx("h6",{className:T.description,children:r}),jsx(LinkButton,{fill:"text",href:l,target:"_blank",rel:"noreferrer noopener",children:jsx(Trans,{i18nKey:"upgrade-box.learn-more",children:"Learn more"})}),jsx("div",{className:T.media,children:jsx("img",{src:S(d),alt:"Feature screenshot"})})]})},L=t=>({container:css({overflow:"auto",height:"100%"}),title:css({color:t.colors.text.maxContrast}),description:css({color:t.colors.text.primary,fontWeight:t.typography.fontWeightLight}),media:css({width:"100%",marginTop:t.spacing(2),img:{width:"100%"}})}),S=t=>t.startsWith("http")?t:"/public/build/img/enterprise/highlights/"+t;var b=s(65642),z=s(84057),a=s(15130),n=s(11257),p=s(52763),j=s(71468),U=s(45967),F=s(97095),Q=s(18027),W=s(63527),X=s(63722),w=s(15840),H=s(19192),N=s(42939),V=s(77174);const ne=t=>t.groups,oe=(t,r)=>t.team.uid===r?t.team:null;function k(t){return{groups:ne(t.team)}}const _={loadTeamGroups:V.aK,addTeamGroup:V.It,removeTeamGroup:V.nC},Me=(0,j.connect)(k,_),q="Sync LDAP, OAuth or SAML groups with your Grafana teams.";class re extends m.PureComponent{constructor(r){super(r),this.onToggleAdding=()=>{this.setState({isAdding:!this.state.isAdding})},this.onNewGroupIdChanged=l=>{this.setState({newGroupId:l.currentTarget.value})},this.onAddGroup=l=>{l.preventDefault(),this.props.addTeamGroup(this.state.newGroupId),this.setState({isAdding:!1,newGroupId:""})},this.onRemoveGroup=l=>{this.props.removeTeamGroup(l.groupId)},this.state={isAdding:!1,newGroupId:""}}componentDidMount(){this.fetchTeamGroups()}async fetchTeamGroups(){this.props.loadTeamGroups()}isNewGroupValid(){return this.state.newGroupId.length>1}renderGroup(r){const{isReadOnly:l}=this.props;return(0,e.jsxs)("tr",{children:[(0,e.jsx)("td",{children:r.groupId}),(0,e.jsx)("td",{style:{width:"1%"},children:(0,e.jsx)(i.$n,{size:"sm",variant:"destructive",onClick:()=>this.onRemoveGroup(r),disabled:l,"aria-label":(0,o.t)("teams.team-group-sync.aria-label-remove","Remove group {{groupName}}",{groupName:r.groupId}),children:(0,e.jsx)(x.I,{name:"times"})})})]},r.groupId)}render(){const{isAdding:r,newGroupId:l}=this.state,{groups:d,isReadOnly:T}=this.props,D=ce();return(0,e.jsxs)("div",{children:[(0,N.z5)()&&(0,e.jsx)(v,{featureId:"team-sync",eventVariant:"trial",featureName:"team sync",text:(0,o.t)("teams.team-group-sync.team-sync-upgrade","Add a group to enable team sync for free during your trial of Grafana Pro")}),(0,e.jsxs)("div",{className:"page-action-bar",children:[(!(0,N.z5)()||d.length>0)&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("h3",{className:"page-sub-heading",children:(0,e.jsx)(o.x6,{i18nKey:"teams.team-group-sync.external-group-sync",children:"External group sync"})}),(0,e.jsx)(U.m,{placement:"auto",content:q,children:(0,e.jsx)(x.I,{className:(0,c.cx)(D.icon,"page-sub-heading-icon"),name:"question-circle"})})]}),(0,e.jsx)("div",{className:"page-action-bar__spacer"}),d.length>0&&(0,e.jsx)(i.$n,{onClick:this.onToggleAdding,icon:"plus",disabled:T,children:(0,e.jsx)(o.x6,{i18nKey:"teams.team-group-sync.add-group-button",children:"Add group"})})]}),(0,e.jsx)(X.a,{in:r,children:(0,e.jsxs)("div",{className:"cta-form",children:[(0,e.jsx)(w.J,{onClick:this.onToggleAdding}),(0,e.jsx)("form",{onSubmit:this.onAddGroup,children:(0,e.jsxs)(F.C,{children:[(0,e.jsx)(Q.I,{label:(0,o.t)("teams.team-group-sync.label-add-external-group","Add external group"),tooltip:(0,o.t)("teams.team-group-sync.tooltip-add-external-group","LDAP group example: {{example}}",{example:"cn=users,ou=groups,dc=grafana,dc=org"}),children:(0,e.jsx)(W.p,{type:"text",id:"add-external-group",placeholder:"",value:l,onChange:this.onNewGroupIdChanged,disabled:T})}),(0,e.jsx)(i.$n,{type:"submit",disabled:T||!this.isNewGroupValid(),style:{marginLeft:4},children:(0,e.jsx)(o.x6,{i18nKey:"teams.team-group-sync.add-group",children:"Add group"})})]})})]})}),d.length===0&&!r&&((0,N.z5)()?(0,e.jsx)(ee,{action:{onClick:this.onToggleAdding,text:(0,o.t)("teams.team-group-sync.text.add-group","Add group")}}):(0,e.jsx)(H.A,{onClick:this.onToggleAdding,buttonIcon:"users-alt",title:(0,o.t)("teams.team-group-sync.title-there-external-groups","There are no external groups to sync with"),buttonTitle:"Add group",proTip:q,proTipLinkTitle:"Learn more",proTipLink:"https://grafana.com/docs/grafana/latest/setup-grafana/configure-security/configure-team-sync/",proTipTarget:"_blank",buttonDisabled:T})),d.length>0&&(0,e.jsx)("div",{className:"admin-list-table",children:(0,e.jsxs)("table",{className:"filter-table filter-table--hover form-inline",children:[(0,e.jsx)("thead",{children:(0,e.jsxs)("tr",{children:[(0,e.jsx)("th",{children:(0,e.jsx)(o.x6,{i18nKey:"teams.team-group-sync.external-group-id",children:"External Group ID"})}),(0,e.jsx)("th",{style:{width:"1%"}})]})}),(0,e.jsx)("tbody",{children:d.map(I=>this.renderGroup(I))})]})})]})}}const ee=({action:t})=>{const r=(0,f.$j)();return(0,e.jsx)(P,{action:t,listItems:["Stop managing user access in two places - assign users to groups in SAML, LDAP or Oauth, and manage access at a Team level in Grafana","Update users' permissions immediately when you add or remove them from an LDAP group, with no need for them to sign out and back in"],image:`team-sync-${r.isLight?"light":"dark"}.png`,featureName:"team sync",featureUrl:"https://grafana.com/docs/grafana/latest/enterprise/team-sync",description:(0,o.t)("teams.team-sync-upgrade-content.description","Team Sync makes it easier for you to manage users' access in Grafana, by immediately updating each user's Grafana teams and permissions based on their single sign-on group membership, instead of when users sign in")})},ie=(0,j.connect)(k,_)(re),ce=()=>({icon:(0,c.css)({opacity:.7,"&:hover":{opacity:1}})});var le=s(54384);const de=t=>{let r=a.TP.hasPermissionInMetadata(n.w.ActionTeamsPermissionsWrite,t.team);return t.team.isProvisioned&&(r=!1),(0,e.jsx)(le.x,{title:"",addPermissionTitle:"Add member",buttonLabel:"Add member",emptyLabel:"There are no members in this team or you do not have the permissions to list the current members.",resource:"teams",resourceId:t.team.id,canSetPermissions:r})};var me=s(49785),ge=s(41654),ue=s(16780),J=s(37386),pe=s(99929),he=s(99686),xe=s(13126);const fe={updateTeam:V.n7},ve=(0,j.connect)(null,fe)(({team:t,updateTeam:r})=>{const l=a.TP.hasPermissionInMetadata(n.w.ActionTeamsWrite,t),d=a.TP.user.orgId,[{roleOptions:T}]=(0,he.o)(d),{handleSubmit:D,register:I,formState:{errors:O}}=(0,me.mN)({defaultValues:t}),R=a.TP.hasPermission(n.w.ActionTeamsRolesAdd)&&a.TP.hasPermission(n.w.ActionTeamsRolesRemove),Z=a.TP.hasPermissionInMetadata(n.w.ActionTeamsRolesList,t)&&a.TP.hasPermission(n.w.ActionRolesList),G=async Y=>{r(Y.name,Y.email||"")};return(0,e.jsxs)(ge.B,{direction:"column",gap:3,children:[(0,e.jsx)("form",{onSubmit:D(G),style:{maxWidth:"600px"},children:(0,e.jsxs)(ue.n,{label:(0,o.t)("teams.team-settings.label-team-details","Team details"),children:[(0,e.jsx)(J.D,{label:(0,o.t)("teams.team-settings.label-numerical-identifier","Numerical identifier"),disabled:!0,children:(0,e.jsx)(W.p,{value:t.id,id:"id-input"})}),(0,e.jsx)(J.D,{label:(0,o.t)("teams.team-settings.label-name","Name"),disabled:!l||!!t.isProvisioned,required:!0,invalid:!!O.name,error:"Name is required",children:(0,e.jsx)(W.p,{...I("name",{required:!0}),id:"name-input"})}),a.TP.licensedAccessControlEnabled()&&Z&&(0,e.jsx)(J.D,{label:(0,o.t)("teams.team-settings.label-role","Role"),children:(0,e.jsx)(pe.Y,{teamId:t.id,roleOptions:T,disabled:!R,maxWidth:"100%"})}),(0,e.jsx)(J.D,{label:(0,o.t)("teams.team-settings.label-email","Email"),description:(0,o.t)("teams.team-settings.description-email","This is optional and is primarily used to set the team profile avatar (via gravatar service)"),disabled:!l,children:(0,e.jsx)(W.p,{...I("email"),placeholder:"team@email.com",type:"email",id:"email-input"})}),(0,e.jsx)(i.$n,{type:"submit",disabled:!l,children:(0,e.jsx)(o.x6,{i18nKey:"teams.team-settings.save",children:"Save"})})]})}),(0,e.jsx)(xe.u,{resourceUri:`teams/${t.id}`,disabled:!l,preferenceType:"team"})]})});var Te=s(67145),Pe=(t=>(t.Members="members",t.Settings="settings",t.GroupSync="groupsync",t))(Pe||{});const se=["members","settings","groupsync"],ye=(0,y.Mz)([t=>t.team,(t,r)=>r],(t,r)=>oe(t,r)),Ee=(0,y.Mz)([t=>t.navIndex,(t,r)=>r,(t,r,l)=>l],(t,r,l)=>{const d=(0,Te.X)(r);return(0,z.tc)(t,`team-${r}-${l}`,d).main}),te=(0,m.memo)(()=>{const t=(0,m.useRef)((0,C.a)("teamsync")),{uid:r="",page:l}=(0,E.g)(),d=(0,p.d4)(G=>ye(G,r));let T="members";(!d||!a.TP.hasPermissionInMetadata(n.w.ActionTeamsPermissionsRead,d))&&(T="settings");const D=l??T,I=(0,p.d4)(G=>Ee(G,D,r)),O=(0,p.wA)(),{loading:R}=(0,h.A)(async()=>O((0,V.eo)(r)),[r]),Z=()=>{const G=se.includes(D)?D:se[0],Y=a.TP.hasPermissionInMetadata(n.w.ActionTeamsRead,d),ae=a.TP.hasPermissionInMetadata(n.w.ActionTeamsPermissionsRead,d),je=a.TP.hasPermissionInMetadata(n.w.ActionTeamsPermissionsWrite,d);switch(G){case"members":return ae?(0,e.jsx)(de,{team:d}):null;case"settings":return Y&&(0,e.jsx)(ve,{team:d});case"groupsync":if(t.current){if(ae)return(0,e.jsx)(ie,{isReadOnly:!je})}else if(b.Ay.featureToggles.featureHighlights)return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(v,{featureName:"team sync",featureId:"team-sync"}),(0,e.jsx)(ee,{})]})}return null};return(0,e.jsx)(A.Y,{navId:"teams",pageNav:I,children:(0,e.jsx)(A.Y.Contents,{isLoading:R,children:d&&Object.keys(d).length!==0&&Z()})})});te.displayName="TeamPages";const Ae=te},77174:(K,M,s)=>{s.d(M,{Bu:()=>u,It:()=>S,To:()=>i,Vk:()=>P,aK:()=>L,eo:()=>x,n7:()=>$,nC:()=>b,nM:()=>v,yd:()=>g});var e=s(2543),y=s.n(e),m=s(68143),E=s(6890),h=s(73427),C=s(81871),A=s(11257),c=s(67145),o=s(27104);function u(a=!1){return async(n,p)=>{const{query:j,page:U,perPage:F,sort:Q}=p().teams;if(!h.TP.hasPermission(A.w.ActionTeamsRead)){n((0,o.Q9)({teams:[],totalCount:0,page:1,perPage:F,noTeams:!0}));return}const W=await(0,m.AI)().get("/api/teams/search",(0,C.F)({query:j,page:U,perpage:F,sort:Q}));let X=!1;if(a&&(X=W.teams.length===0),h.TP.licensedAccessControlEnabled()&&h.TP.hasPermission(A.w.ActionTeamsRolesList)){n((0,o.dJ)());const w=W?.teams.map(N=>N.id),H=await(0,m.AI)().post("/api/access-control/teams/roles/search",{teamIds:w});W.teams.forEach(N=>{N.roles=H?H[N.id]||[]:[]}),n((0,o.jE)())}n((0,o.Q9)({noTeams:X,...W}))}}const f=(0,e.debounce)(a=>a(u()),500);function x(a){return async n=>{const p=await(0,m.AI)().get(`/api/teams/${a}`,(0,C.F)());n((0,o.$T)(p)),n((0,E.Vz)((0,c.R)(p)))}}function i(a){return async n=>{await(0,m.AI)().delete(`/api/teams/${a}`),await h.TP.fetchUserPermissions(),n(u())}}function v(a){return async n=>{n((0,o.L5)(a)),f(n)}}function g(a){return async n=>{n((0,o.EC)(a)),n(u())}}function P({sortBy:a}){const n=a.length?`${a[0].id}-${a[0].desc?"desc":"asc"}`:void 0;return async p=>{p((0,o.$u)(n)),p(u())}}function B(){return async(a,n)=>{const p=n().team.team,j=await getBackendSrv().get(`/api/teams/${p.uid}/members`);a(teamMembersLoaded(j))}}function $(a,n){return async(p,j)=>{const U=j().team.team;await(0,m.AI)().put(`/api/teams/${U.uid}`,{name:a,email:n}),p(x(U.uid))}}function L(){return async(a,n)=>{const p=n().team.team,j=await(0,m.AI)().get(`/api/teams/${p.uid}/groups`);a((0,o.tC)(j))}}function S(a){return async(n,p)=>{const j=p().team.team;await(0,m.AI)().post(`/api/teams/${j.uid}/groups`,{groupId:a}),n(L())}}function b(a){return async(n,p)=>{const j=p().team.team;await(0,m.AI)().delete(`/api/teams/${j.uid}/groups?groupId=${encodeURIComponent(a)}`),n(L())}}function z(a){return async n=>{await getBackendSrv().put(`/api/teams/${a.teamId}/members/${a.userId}`,{permission:a.permission}),n(B())}}},99686:(K,M,s)=>{s.d(M,{o:()=>c});var e=s(2543),y=s.n(e),m=s(96540),E=s(24705),h=s(73427),C=s(11257),A=s(34418);const c=u=>{const[f,x]=(0,m.useState)(u),{value:i=[]}=(0,E.A)(async()=>h.TP.licensedAccessControlEnabled()&&h.TP.hasPermission(C.w.ActionRolesList)?(0,A.RL)(f):Promise.resolve([]),[f]);return[{roleOptions:i},x]},o=u=>{const[f,x]=useState({});return useDeepCompareEffect(()=>{if(!contextSrv.licensedAccessControlEnabled()||!contextSrv.hasPermission(AccessControlAction.ActionRolesList))return;const i=Object.keys(f).map(g=>typeof g=="number"?g:parseInt(g,10)),v=difference(u,i);Promise.all(v.map(g=>fetchRoleOptions(g).then(P=>[g,P]))).then(g=>{x({...f,...Object.fromEntries(g)})})},[u]),f}},99929:(K,M,s)=>{s.d(M,{Y:()=>c});var e=s(74848),y=s(96540),m=s(41053),E=s(73427),h=s(11257),C=s(59812),A=s(34418);const c=({teamId:o,roleOptions:u,disabled:f,roles:x,onApplyRoles:i,pendingRoles:v,apply:g=!1,maxWidth:P,width:B,isLoading:$})=>{const[{loading:L,value:S=x||[]},b]=(0,m.A)(async()=>{try{if(x)return x;if(g&&v?.length)return v;if(E.TP.hasPermission(h.w.ActionTeamsRolesList)&&o>0)return await(0,A.xN)(o)}catch(n){console.error("Error loading options",n)}return[]},[o,v,x]);(0,y.useEffect)(()=>{b()},[b]);const z=async n=>{g?i&&i(n):(await(0,A.G3)(n,o),await b())},a=E.TP.hasPermission(h.w.ActionTeamsRolesAdd)&&E.TP.hasPermission(h.w.ActionTeamsRolesRemove);return(0,e.jsx)(C.n,{apply:g,onRolesChange:z,roleOptions:u,appliedRoles:S,isLoading:L||$,disabled:f,basicRoleDisabled:!0,canUpdateRoles:a,maxWidth:P,width:B})}}}]);

//# sourceMappingURL=TeamPages.ea8872cf3004910a0585.js.map