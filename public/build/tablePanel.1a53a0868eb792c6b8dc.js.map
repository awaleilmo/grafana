{"version":3,"file":"tablePanel.1a53a0868eb792c6b8dc.js","mappings":"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","sources":["webpack://grafana/./public/app/plugins/panel/table/TablePanel.tsx","webpack://grafana/./public/app/plugins/panel/table/migrations.ts","webpack://grafana/./public/app/plugins/panel/table/PaginationEditor.tsx","webpack://grafana/./public/app/plugins/panel/table/cells/BarGaugeCellOptionsEditor.tsx","webpack://grafana/./public/app/plugins/panel/table/cells/ColorBackgroundCellOptionsEditor.tsx","webpack://grafana/./public/app/plugins/panel/table/cells/ImageCellOptionsEditor.tsx","webpack://grafana/./public/app/plugins/panel/table/cells/MarkdownCellOptionsEditor.tsx","webpack://grafana/./public/app/plugins/panel/table/cells/SparklineCellOptionsEditor.tsx","webpack://grafana/./public/app/plugins/panel/table/TableCellOptionEditor.tsx","webpack://grafana/./public/app/plugins/panel/table/panelcfg.gen.ts","webpack://grafana/./public/app/plugins/panel/table/suggestions.ts","webpack://grafana/./public/app/plugins/panel/table/module.tsx"],"sourcesContent":["import { css } from '@emotion/css';\nimport { useCallback, useMemo } from 'react';\n\nimport {\n  ActionModel,\n  DashboardCursorSync,\n  DataFrame,\n  FieldMatcherID,\n  getFrameDisplayName,\n  InterpolateFunction,\n  PanelProps,\n  SelectableValue,\n  Field,\n  cacheFieldDisplayNames,\n} from '@grafana/data';\nimport { config, PanelDataErrorView } from '@grafana/runtime';\nimport { Select, usePanelContext, useTheme2 } from '@grafana/ui';\nimport { TableSortByFieldState } from '@grafana/ui/internal';\nimport { TableNG } from '@grafana/ui/unstable';\nimport { getConfig } from 'app/core/config';\n\nimport { getActions } from '../../../features/actions/utils';\n\nimport { hasDeprecatedParentRowIndex, migrateFromParentRowIndexToNestedFrames } from './migrations';\nimport { Options } from './panelcfg.gen';\n\ninterface Props extends PanelProps<Options> {}\n\nexport function TablePanel(props: Props) {\n  const { data, height, width, options, fieldConfig, id, timeRange, replaceVariables, transparent } = props;\n\n  useMemo(() => {\n    cacheFieldDisplayNames(data.series);\n  }, [data.series]);\n\n  const theme = useTheme2();\n  const panelContext = usePanelContext();\n  const userCanExecuteActions = useMemo(() => panelContext.canExecuteActions?.() ?? false, [panelContext]);\n  const _getActions = useCallback(\n    (frame: DataFrame, field: Field, rowIndex: number) =>\n      userCanExecuteActions ? getCellActions(frame, field, rowIndex, replaceVariables) : [],\n    [replaceVariables, userCanExecuteActions]\n  );\n  const frames = hasDeprecatedParentRowIndex(data.series)\n    ? migrateFromParentRowIndexToNestedFrames(data.series)\n    : data.series;\n  const count = frames?.length;\n  const hasFields = frames.some((frame) => frame.fields.length > 0);\n  const currentIndex = getCurrentFrameIndex(frames, options);\n  const main = frames[currentIndex];\n\n  let tableHeight = height;\n\n  if (!count || !hasFields) {\n    return <PanelDataErrorView panelId={id} fieldConfig={fieldConfig} data={data} />;\n  }\n\n  if (count > 1) {\n    const inputHeight = theme.spacing.gridSize * theme.components.height.md;\n    const padding = theme.spacing.gridSize;\n\n    tableHeight = height - inputHeight - padding;\n  }\n\n  const enableSharedCrosshair = panelContext.sync && panelContext.sync() !== DashboardCursorSync.Off;\n\n  const disableSanitizeHtml = getConfig().disableSanitizeHtml;\n\n  const tableElement = (\n    <TableNG\n      height={tableHeight}\n      width={width}\n      data={main}\n      noHeader={!options.showHeader}\n      showTypeIcons={options.showTypeIcons}\n      resizable={true}\n      initialSortBy={options.sortBy}\n      onSortByChange={(sortBy) => onSortByChange(sortBy, props)}\n      onColumnResize={(displayName, resizedWidth) => onColumnResize(displayName, resizedWidth, props)}\n      onCellFilterAdded={panelContext.onAddAdHocFilter}\n      frozenColumns={options.frozenColumns?.left}\n      enablePagination={options.enablePagination}\n      cellHeight={options.cellHeight}\n      maxRowHeight={options.maxRowHeight}\n      timeRange={timeRange}\n      enableSharedCrosshair={config.featureToggles.tableSharedCrosshair && enableSharedCrosshair}\n      fieldConfig={fieldConfig}\n      getActions={_getActions}\n      structureRev={data.structureRev}\n      transparent={transparent}\n      disableSanitizeHtml={disableSanitizeHtml}\n    />\n  );\n\n  if (count === 1) {\n    return tableElement;\n  }\n\n  const names = frames.map((frame, index) => {\n    return {\n      label: getFrameDisplayName(frame),\n      value: index,\n    };\n  });\n\n  return (\n    <div className={tableStyles.wrapper}>\n      {tableElement}\n      <div className={tableStyles.selectWrapper}>\n        <Select options={names} value={names[currentIndex]} onChange={(val) => onChangeTableSelection(val, props)} />\n      </div>\n    </div>\n  );\n}\n\nfunction getCurrentFrameIndex(frames: DataFrame[], options: Options) {\n  return options.frameIndex > 0 && options.frameIndex < frames.length ? options.frameIndex : 0;\n}\n\nfunction onColumnResize(fieldDisplayName: string, width: number, props: Props) {\n  const { fieldConfig } = props;\n  const { overrides } = fieldConfig;\n\n  const matcherId = FieldMatcherID.byName;\n  const propId = 'custom.width';\n\n  // look for existing override\n  const override = overrides.find((o) => o.matcher.id === matcherId && o.matcher.options === fieldDisplayName);\n\n  if (override) {\n    // look for existing property\n    const property = override.properties.find((prop) => prop.id === propId);\n    if (property) {\n      property.value = width;\n    } else {\n      override.properties.push({ id: propId, value: width });\n    }\n  } else {\n    overrides.push({\n      matcher: { id: matcherId, options: fieldDisplayName },\n      properties: [{ id: propId, value: width }],\n    });\n  }\n\n  props.onFieldConfigChange({\n    ...fieldConfig,\n    overrides,\n  });\n}\n\nfunction onSortByChange(sortBy: TableSortByFieldState[], props: Props) {\n  props.onOptionsChange({\n    ...props.options,\n    sortBy,\n  });\n}\n\nfunction onChangeTableSelection(val: SelectableValue<number>, props: Props) {\n  props.onOptionsChange({\n    ...props.options,\n    frameIndex: val.value || 0,\n  });\n}\n\n// placeholder function; assuming the values are already interpolated\nconst replaceVars: InterpolateFunction = (value: string) => value;\n\nconst getCellActions = (\n  dataFrame: DataFrame,\n  field: Field,\n  rowIndex: number,\n  replaceVariables: InterpolateFunction | undefined\n): Array<ActionModel<Field>> => {\n  const numActions = field.config.actions?.length ?? 0;\n\n  if (numActions > 0) {\n    const actions = getActions(\n      dataFrame,\n      field,\n      field.state!.scopedVars!,\n      replaceVariables ?? replaceVars,\n      field.config.actions ?? [],\n      { valueRowIndex: rowIndex }\n    );\n\n    if (actions.length === 1) {\n      return actions;\n    } else {\n      const actionsOut: Array<ActionModel<Field>> = [];\n      const actionLookup = new Set<string>();\n\n      actions.forEach((action) => {\n        const key = action.title;\n\n        if (!actionLookup.has(key)) {\n          actionsOut.push(action);\n          actionLookup.add(key);\n        }\n      });\n\n      return actionsOut;\n    }\n  }\n\n  return [];\n};\n\nconst tableStyles = {\n  wrapper: css({\n    display: 'flex',\n    flexDirection: 'column',\n    justifyContent: 'space-between',\n    height: '100%',\n  }),\n  selectWrapper: css({\n    padding: '8px 8px 0px 8px',\n  }),\n};\n","import { omitBy, isNil, isNumber, defaultTo, groupBy, omit } from 'lodash';\n\nimport {\n  PanelModel,\n  FieldMatcherID,\n  ConfigOverrideRule,\n  ThresholdsMode,\n  ThresholdsConfig,\n  FieldConfig,\n  DataFrame,\n  FieldType,\n  ByNamesMatcherMode,\n} from '@grafana/data';\nimport { ReduceTransformerOptions } from '@grafana/data/internal';\n\nimport { Options } from './panelcfg.gen';\n\n/**\n * At 7.0, the `table` panel was swapped from an angular implementation to a react one.\n * The models do not match, so this process will delegate to the old implementation when\n * a saved table configuration exists.\n */\nexport const tableMigrationHandler = (panel: PanelModel<Options>): Partial<Options> => {\n  // Table was saved as an angular table, lets just swap to the 'table-old' panel\n  if (!panel.pluginVersion && 'columns' in panel) {\n    console.log('Was angular table', panel);\n  }\n\n  migrateTextWrapToFieldLevel(panel);\n  migrateHiddenFields(panel);\n  migrateFooterV2(panel);\n\n  // Nothing changed\n  return panel.options;\n};\n\nconst transformsMap = {\n  timeseries_to_rows: 'seriesToRows',\n  timeseries_to_columns: 'seriesToColumns',\n  timeseries_aggregations: 'reduce',\n  table: 'merge',\n};\n\nconst columnsMap = {\n  avg: 'mean',\n  min: 'min',\n  max: 'max',\n  total: 'sum',\n  current: 'lastNotNull',\n  count: 'count',\n};\n\nconst colorModeMap = {\n  cell: 'color-background',\n  row: 'color-background',\n  value: 'color-text',\n};\n\ntype Transformations = keyof typeof transformsMap;\n\ntype Transformation = {\n  id: string;\n  options: ReduceTransformerOptions;\n};\n\ntype Columns = keyof typeof columnsMap;\n\ntype Column = {\n  value: Columns;\n  text: string;\n};\n\ntype ColorModes = keyof typeof colorModeMap;\n\nconst generateThresholds = (thresholds: string[], colors: string[]) => {\n  return [-Infinity, ...thresholds].map((threshold, idx) => ({\n    color: colors[idx],\n    value: isNumber(threshold) ? threshold : parseInt(threshold, 10),\n  }));\n};\n\nconst migrateTransformations = (\n  panel: PanelModel<Partial<Options>>,\n  oldOpts: { columns: any; transform: Transformations }\n) => {\n  const transformations: Transformation[] = panel.transformations ?? [];\n  if (Object.keys(transformsMap).includes(oldOpts.transform)) {\n    const opts: ReduceTransformerOptions = {\n      reducers: [],\n    };\n    if (oldOpts.transform === 'timeseries_aggregations') {\n      opts.includeTimeField = false;\n      opts.reducers = oldOpts.columns.map((column: Column) => columnsMap[column.value]);\n    }\n    transformations.push({\n      id: transformsMap[oldOpts.transform],\n      options: opts,\n    });\n  }\n  return transformations;\n};\n\ntype Style = {\n  unit: string;\n  type: string;\n  alias: string;\n  decimals: number;\n  colors: string[];\n  colorMode: ColorModes;\n  pattern: string;\n  thresholds: string[];\n  align?: string;\n  dateFormat: string;\n  link: boolean;\n  linkTargetBlank?: boolean;\n  linkTooltip?: string;\n  linkUrl?: string;\n};\n\nconst migrateTableStyleToOverride = (style: Style) => {\n  const fieldMatcherId = /^\\/.*\\/$/.test(style.pattern) ? FieldMatcherID.byRegexp : FieldMatcherID.byName;\n  const override: ConfigOverrideRule = {\n    matcher: {\n      id: fieldMatcherId,\n      options: style.pattern,\n    },\n    properties: [],\n  };\n\n  if (style.alias) {\n    override.properties.push({\n      id: 'displayName',\n      value: style.alias,\n    });\n  }\n\n  if (style.unit) {\n    override.properties.push({\n      id: 'unit',\n      value: style.unit,\n    });\n  }\n\n  if (style.decimals !== undefined) {\n    override.properties.push({\n      id: 'decimals',\n      value: style.decimals,\n    });\n  }\n\n  if (style.type === 'date') {\n    override.properties.push({\n      id: 'unit',\n      value: `time: ${style.dateFormat}`,\n    });\n  }\n\n  if (style.type === 'hidden') {\n    override.properties.push({\n      id: 'custom.hidden',\n      value: true,\n    });\n  }\n\n  if (style.link) {\n    override.properties.push({\n      id: 'links',\n      value: [\n        {\n          title: defaultTo(style.linkTooltip, ''),\n          url: defaultTo(style.linkUrl, ''),\n          targetBlank: defaultTo(style.linkTargetBlank, false),\n        },\n      ],\n    });\n  }\n\n  if (style.colorMode) {\n    override.properties.push({\n      id: 'custom.cellOptions',\n      value: {\n        type: colorModeMap[style.colorMode],\n      },\n    });\n  }\n\n  if (style.align) {\n    override.properties.push({\n      id: 'custom.align',\n      value: style.align === 'auto' ? null : style.align,\n    });\n  }\n\n  if (style.thresholds?.length && style.colors?.length) {\n    override.properties.push({\n      id: 'thresholds',\n      value: {\n        mode: ThresholdsMode.Absolute,\n        steps: generateThresholds(style.thresholds, style.colors),\n      },\n    });\n  }\n\n  return override;\n};\n\nconst migrateDefaults = (prevDefaults: Style) => {\n  let defaults: FieldConfig = {\n    custom: {},\n  };\n  if (prevDefaults) {\n    defaults = omitBy(\n      {\n        unit: prevDefaults.unit,\n        decimals: prevDefaults.decimals,\n        displayName: prevDefaults.alias,\n        custom: {\n          align: prevDefaults.align === 'auto' ? null : prevDefaults.align,\n        },\n      },\n      isNil\n    );\n\n    if (prevDefaults.thresholds && prevDefaults.thresholds.length) {\n      const thresholds: ThresholdsConfig = {\n        mode: ThresholdsMode.Absolute,\n        steps: generateThresholds(prevDefaults.thresholds, prevDefaults.colors),\n      };\n      defaults.thresholds = thresholds;\n    }\n\n    if (prevDefaults.colorMode) {\n      defaults.custom.cellOptions = {\n        type: colorModeMap[prevDefaults.colorMode],\n      };\n    }\n  }\n  return defaults;\n};\n\n/**\n * This is called when the panel changes from another panel\n */\nexport const tablePanelChangedHandler = (\n  panel: PanelModel<Partial<Options>>,\n  prevPluginId: string,\n  prevOptions: any\n) => {\n  // Changing from angular table panel\n  if (prevPluginId === 'table-old' && prevOptions.angular) {\n    const oldOpts = prevOptions.angular;\n    const transformations = migrateTransformations(panel, oldOpts);\n    const prevDefaults = oldOpts.styles.find((style: any) => style.pattern === '/.*/');\n    const defaults = migrateDefaults(prevDefaults);\n    const overrides = oldOpts.styles.filter((style: any) => style.pattern !== '/.*/').map(migrateTableStyleToOverride);\n\n    panel.transformations = transformations;\n    panel.fieldConfig = {\n      defaults,\n      overrides,\n    };\n  }\n\n  return {};\n};\n\nconst getMainFrames = (frames: DataFrame[] | null) => {\n  return frames?.filter((df) => df.meta?.custom?.parentRowIndex === undefined) || [frames?.[0]];\n};\n\n/**\n * In 9.3 meta.custom.parentRowIndex was introduced to support sub-tables.\n * In 10.2 meta.custom.parentRowIndex was deprecated in favor of FieldType.nestedFrames, which supports multiple nested frames.\n * Migrate DataFrame[] from using meta.custom.parentRowIndex to using FieldType.nestedFrames\n */\nexport const migrateFromParentRowIndexToNestedFrames = (frames: DataFrame[] | null) => {\n  const migratedFrames: DataFrame[] = [];\n  const mainFrames = getMainFrames(frames).filter(\n    (frame: DataFrame | undefined): frame is DataFrame => !!frame && frame.length !== 0\n  );\n\n  mainFrames?.forEach((frame) => {\n    const subFrames = frames?.filter((df) => frame.refId === df.refId && df.meta?.custom?.parentRowIndex !== undefined);\n    const subFramesGrouped = groupBy(subFrames, (frame: DataFrame) => frame.meta?.custom?.parentRowIndex);\n    const subFramesByIndex = Object.keys(subFramesGrouped).map((key) => subFramesGrouped[key]);\n    const migratedFrame = { ...frame };\n\n    if (subFrames && subFrames.length > 0) {\n      migratedFrame.fields.push({\n        name: 'nested',\n        type: FieldType.nestedFrames,\n        config: {},\n        values: subFramesByIndex,\n      });\n    }\n    migratedFrames.push(migratedFrame);\n  });\n\n  return migratedFrames;\n};\n\nexport const hasDeprecatedParentRowIndex = (frames: DataFrame[] | null) => {\n  return frames?.some((df) => df.meta?.custom?.parentRowIndex !== undefined);\n};\n\nexport const migrateTextWrapToFieldLevel = (panel: PanelModel<Partial<Options>>) => {\n  if (panel.fieldConfig?.defaults.custom?.wrapText !== undefined) {\n    // already migrated\n    return;\n  }\n\n  const legacyDefaultWrapText: boolean | undefined = panel.fieldConfig?.defaults.custom?.cellOptions?.wrapText;\n\n  panel.fieldConfig.overrides = panel.fieldConfig.overrides.map((override) => {\n    if (override.properties) {\n      override.properties = override.properties.flatMap((property) => {\n        if (property.id === 'custom.cellOptions' && property.value && property.value.wrapText !== undefined) {\n          return [\n            { ...property, value: { ...omit(property.value, 'wrapText') } },\n            { id: 'custom.wrapText', value: property.value.wrapText },\n          ];\n        }\n        return [property];\n      });\n    }\n    return override;\n  });\n\n  panel.fieldConfig.defaults.custom = panel.fieldConfig.defaults.custom ?? {};\n  panel.fieldConfig.defaults.custom.wrapText = legacyDefaultWrapText;\n  delete panel.fieldConfig.defaults.custom.cellOptions?.wrapText;\n\n  return panel;\n};\n\nexport const migrateHiddenFields = (panel: PanelModel<Partial<Options>>) => {\n  panel.fieldConfig.overrides = panel.fieldConfig.overrides.map((override) => {\n    if (override.properties) {\n      override.properties = override.properties.map((property) => {\n        if (property.id === 'custom.hidden') {\n          return { ...property, id: 'custom.hideFrom.viz' };\n        }\n        return property;\n      });\n    }\n    return override;\n  });\n\n  return panel;\n};\n\ninterface LegacyTableFooterOptions {\n  show: boolean;\n  reducer: string[];\n  fields?: string[];\n  countRows?: boolean;\n  enablePagination?: boolean;\n}\n\nexport const migrateFooterV2 = (panel: PanelModel<Options>) => {\n  if (panel.options && 'footer' in panel.options) {\n    // we need to cast the footer to the old type to work with it here.\n    // eslint-disable-next-line @typescript-eslint/consistent-type-assertions\n    const oldFooter = panel.options.footer as LegacyTableFooterOptions;\n\n    if (oldFooter.show) {\n      const reducers = oldFooter.reducer;\n\n      panel.fieldConfig.defaults.custom = {\n        ...panel.fieldConfig.defaults.custom,\n        footer: {\n          reducers: reducers,\n        },\n      };\n\n      if (oldFooter.countRows && reducers[0] === 'count') {\n        panel.fieldConfig.defaults.custom.footer.reducers = ['countAll'];\n      } else if (oldFooter.fields && oldFooter.fields.length > 1) {\n        delete panel.fieldConfig.defaults.custom.footer;\n\n        // Fields is an array of field names, so push a byNames matcher\n        // on with the matched reducer.\n        panel.fieldConfig.overrides.push({\n          matcher: {\n            id: FieldMatcherID.byNames,\n            options: {\n              mode: ByNamesMatcherMode.include,\n              names: oldFooter.fields,\n            },\n          },\n          properties: [{ id: 'custom.footer.reducers', value: reducers }],\n        });\n      } else if (oldFooter.fields && oldFooter.fields.length === 1) {\n        delete panel.fieldConfig.defaults.custom.footer;\n\n        // Single field, so we can use a byName matcher\n        panel.fieldConfig.overrides.push({\n          matcher: {\n            id: FieldMatcherID.byName,\n            options: oldFooter.fields[0],\n          },\n          properties: [{ id: 'custom.footer.reducers', value: reducers }],\n        });\n      }\n    }\n\n    if (oldFooter.enablePagination != null) {\n      panel.options.enablePagination = oldFooter.enablePagination;\n    }\n\n    delete panel.options.footer;\n  }\n};\n","import * as React from 'react';\n\nimport { StandardEditorProps } from '@grafana/data';\nimport { selectors } from '@grafana/e2e-selectors';\nimport { Switch } from '@grafana/ui';\n\nexport function PaginationEditor({ onChange, value, id }: StandardEditorProps<boolean>) {\n  const changeValue = (event: React.FormEvent<HTMLInputElement> | undefined) => {\n    onChange(event?.currentTarget.checked);\n  };\n\n  return (\n    <Switch\n      id={id}\n      label={selectors.components.PanelEditor.OptionsPane.fieldLabel(`Enable pagination`)}\n      value={Boolean(value)}\n      onChange={changeValue}\n    />\n  );\n}\n","import { SelectableValue } from '@grafana/data';\nimport { t } from '@grafana/i18n';\nimport { BarGaugeDisplayMode, BarGaugeValueMode, TableBarGaugeCellOptions } from '@grafana/schema';\nimport { Field, RadioButtonGroup, Stack } from '@grafana/ui';\n\nimport { TableCellEditorProps } from '../TableCellOptionEditor';\n\ntype Props = TableCellEditorProps<TableBarGaugeCellOptions>;\n\nexport function BarGaugeCellOptionsEditor({ cellOptions, onChange }: Props) {\n  // Set the display mode on change\n\n  const onCellOptionsChange = (v: BarGaugeDisplayMode) => {\n    cellOptions.mode = v;\n    onChange(cellOptions);\n  };\n\n  const onValueModeChange = (v: BarGaugeValueMode) => {\n    cellOptions.valueDisplayMode = v;\n    onChange(cellOptions);\n  };\n\n  return (\n    <Stack direction=\"column\" gap={0}>\n      <Field label={t('table.bar-gauge-cell-options-editor.label-gauge-display-mode', 'Gauge display mode')}>\n        <RadioButtonGroup\n          value={cellOptions?.mode ?? BarGaugeDisplayMode.Gradient}\n          onChange={onCellOptionsChange}\n          options={barGaugeOpts}\n        />\n      </Field>\n      <Field label={t('table.bar-gauge-cell-options-editor.label-value-display', 'Value display')}>\n        <RadioButtonGroup\n          value={cellOptions?.valueDisplayMode ?? BarGaugeValueMode.Text}\n          onChange={onValueModeChange}\n          options={valueModes}\n        />\n      </Field>\n    </Stack>\n  );\n}\n\nconst barGaugeOpts: SelectableValue[] = [\n  { value: BarGaugeDisplayMode.Basic, label: 'Basic' },\n  { value: BarGaugeDisplayMode.Gradient, label: 'Gradient' },\n  { value: BarGaugeDisplayMode.Lcd, label: 'Retro LCD' },\n];\n\nconst valueModes: SelectableValue[] = [\n  { value: BarGaugeValueMode.Color, label: 'Value color' },\n  { value: BarGaugeValueMode.Text, label: 'Text color' },\n  { value: BarGaugeValueMode.Hidden, label: 'Hidden' },\n];\n","import { useId } from 'react';\n\nimport { SelectableValue } from '@grafana/data';\nimport { selectors } from '@grafana/e2e-selectors';\nimport { t } from '@grafana/i18n';\nimport { TableCellBackgroundDisplayMode, TableColoredBackgroundCellOptions } from '@grafana/schema';\nimport { Field, RadioButtonGroup, Switch } from '@grafana/ui';\n\nimport { TableCellEditorProps } from '../TableCellOptionEditor';\n\nconst colorBackgroundOpts: Array<SelectableValue<TableCellBackgroundDisplayMode>> = [\n  { value: TableCellBackgroundDisplayMode.Basic, label: 'Basic' },\n  { value: TableCellBackgroundDisplayMode.Gradient, label: 'Gradient' },\n];\nexport const ColorBackgroundCellOptionsEditor = ({\n  cellOptions,\n  onChange,\n}: TableCellEditorProps<TableColoredBackgroundCellOptions>) => {\n  // Set the display mode on change\n  const onCellOptionsChange = (v: TableCellBackgroundDisplayMode) => {\n    cellOptions.mode = v;\n    onChange(cellOptions);\n  };\n  const onColorRowChange = () => {\n    cellOptions.applyToRow = !cellOptions.applyToRow;\n    onChange(cellOptions);\n  };\n\n  const applyToRowSwitchId = useId();\n\n  return (\n    <>\n      <Field\n        label={t('table.color-background-cell-options-editor.label-background-display-mode', 'Background display mode')}\n      >\n        <RadioButtonGroup\n          aria-label={selectors.components.PanelEditor.OptionsPane.fieldLabel(`Background display mode`)}\n          value={cellOptions?.mode ?? TableCellBackgroundDisplayMode.Gradient}\n          onChange={onCellOptionsChange}\n          options={colorBackgroundOpts}\n        />\n      </Field>\n\n      <Field\n        label={t('table.color-background-cell-options-editor.label-apply-to-entire-row', 'Apply to entire row')}\n        description={t(\n          'table.color-background-cell-options-editor.description-apply-to-entire-row',\n          'If selected the entire row will be colored as this cell would be.'\n        )}\n      >\n        <Switch\n          id={applyToRowSwitchId}\n          label={selectors.components.PanelEditor.OptionsPane.fieldLabel(`Apply to entire row`)}\n          value={cellOptions.applyToRow}\n          onChange={onColorRowChange}\n        />\n      </Field>\n    </>\n  );\n};\n","import { FormEvent, useId } from 'react';\n\nimport { t } from '@grafana/i18n';\nimport { TableImageCellOptions } from '@grafana/schema';\nimport { Field, Input } from '@grafana/ui';\n\nimport { TableCellEditorProps } from '../TableCellOptionEditor';\n\nexport const ImageCellOptionsEditor = ({ cellOptions, onChange }: TableCellEditorProps<TableImageCellOptions>) => {\n  const onAltChange = (e: FormEvent<HTMLInputElement>) => {\n    cellOptions.alt = e.currentTarget.value;\n    onChange(cellOptions);\n  };\n\n  const onTitleChange = (e: FormEvent<HTMLInputElement>) => {\n    cellOptions.title = e.currentTarget.value;\n    onChange(cellOptions);\n  };\n\n  const altTextInputId = useId();\n  const titleTextInputId = useId();\n\n  return (\n    <>\n      <Field\n        label={t('table.image-cell-options-editor.label-alt-text', 'Alt text')}\n        description={t(\n          'table.image-cell-options-editor.description-alt-text',\n          \"Alternative text that will be displayed if an image can't be displayed or for users who use a screen reader\"\n        )}\n      >\n        <Input id={altTextInputId} onChange={onAltChange} defaultValue={cellOptions.alt} />\n      </Field>\n\n      <Field\n        label={t('table.image-cell-options-editor.label-title-text', 'Title text')}\n        description={t(\n          'table.image-cell-options-editor.description-title-text',\n          'Text that will be displayed when the image is hovered by a cursor'\n        )}\n      >\n        <Input id={titleTextInputId} onChange={onTitleChange} defaultValue={cellOptions.title} />\n      </Field>\n    </>\n  );\n};\n","import { FormEvent } from 'react';\n\nimport { t, Trans } from '@grafana/i18n';\nimport { TableMarkdownCellOptions } from '@grafana/schema';\nimport { Badge, Field, Label, Switch } from '@grafana/ui';\n\nimport { TableCellEditorProps } from '../TableCellOptionEditor';\n\nexport const MarkdownCellOptionsEditor = ({\n  cellOptions,\n  onChange,\n}: TableCellEditorProps<TableMarkdownCellOptions>) => {\n  const onDynamicHeightChange = (e: FormEvent<HTMLInputElement>) => {\n    cellOptions.dynamicHeight = e.currentTarget.checked;\n    onChange(cellOptions);\n  };\n\n  return (\n    <Field\n      label={\n        <Label\n          description={t(\n            'table.markdown-cell-options-editor.description-dynamic-height',\n            'We recommend enabling pagination with this option to avoid performance issues.'\n          )}\n        >\n          <Trans i18nKey=\"table.markdown-cell-options-editor.label-dynamic-height\">Dynamic height</Trans>{' '}\n          <Badge\n            text={t('table.markdown-cell-options-editor.label.text-alpha', 'Alpha')}\n            color=\"blue\"\n            style={{ fontSize: '11px', marginLeft: '5px', lineHeight: '1.2' }}\n          />\n        </Label>\n      }\n    >\n      <Switch onChange={onDynamicHeightChange} value={cellOptions.dynamicHeight} />\n    </Field>\n  );\n};\n","import { css } from '@emotion/css';\nimport { useId, useMemo } from 'react';\n\nimport { createFieldConfigRegistry, SetFieldConfigOptionsArgs } from '@grafana/data';\nimport { GraphFieldConfig, TableSparklineCellOptions } from '@grafana/schema';\nimport { Field, useStyles2, Stack } from '@grafana/ui';\nimport { defaultSparklineCellConfig } from '@grafana/ui/internal';\n\nimport { getGraphFieldConfig } from '../../timeseries/config';\nimport { TableCellEditorProps } from '../TableCellOptionEditor';\n\ntype OptionKey = keyof TableSparklineCellOptions;\n\nconst optionIds: Array<keyof TableSparklineCellOptions> = [\n  'hideValue',\n  'drawStyle',\n  'lineInterpolation',\n  'barAlignment',\n  'lineWidth',\n  'fillOpacity',\n  'gradientMode',\n  'lineStyle',\n  'spanNulls',\n  'showPoints',\n  'pointSize',\n];\n\nfunction getChartCellConfig(cfg: GraphFieldConfig): SetFieldConfigOptionsArgs<GraphFieldConfig> {\n  const graphFieldConfig = getGraphFieldConfig(cfg);\n  return {\n    ...graphFieldConfig,\n    useCustomConfig: (builder) => {\n      graphFieldConfig.useCustomConfig?.(builder);\n      builder.addBooleanSwitch({\n        path: 'hideValue',\n        name: 'Hide value',\n      });\n    },\n  };\n}\n\nexport const SparklineCellOptionsEditor = (props: TableCellEditorProps<TableSparklineCellOptions>) => {\n  const { cellOptions, onChange } = props;\n\n  const registry = useMemo(() => {\n    const config = getChartCellConfig(defaultSparklineCellConfig);\n    return createFieldConfigRegistry(config, 'ChartCell');\n  }, []);\n\n  const style = useStyles2(getStyles);\n\n  const values = { ...defaultSparklineCellConfig, ...cellOptions };\n\n  const htmlIdBase = useId();\n\n  return (\n    <Stack direction=\"column\">\n      {registry.list(optionIds.map((id) => `custom.${id}`)).map((item) => {\n        if (item.showIf && !item.showIf(values)) {\n          return null;\n        }\n        const Editor = item.editor;\n        const path = item.path;\n\n        return (\n          <Field label={item.name} key={item.id} className={style.field}>\n            <Editor\n              onChange={(val) => onChange({ ...cellOptions, [path]: val })}\n              value={(isOptionKey(path, values) ? values[path] : undefined) ?? item.defaultValue}\n              item={item}\n              context={{ data: [] }}\n              id={`${htmlIdBase}${item.id}`}\n            />\n          </Field>\n        );\n      })}\n    </Stack>\n  );\n};\n\n// jumping through hoops to avoid using \"any\"\nfunction isOptionKey(key: string, options: TableSparklineCellOptions): key is OptionKey {\n  return key in options;\n}\n\nconst getStyles = () => ({\n  field: css({\n    width: '100%',\n\n    // @TODO don't show \"scheme\" option for custom gradient mode.\n    // it needs thresholds to work, which are not supported\n    // for area chart cell right now\n    \"[title='Use color scheme to define gradient']\": {\n      display: 'none',\n    },\n  }),\n});\n","import { css } from '@emotion/css';\nimport { merge } from 'lodash';\nimport { useState } from 'react';\n\nimport { GrafanaTheme2 } from '@grafana/data';\nimport { t } from '@grafana/i18n';\nimport { TableCellOptions } from '@grafana/schema';\nimport { Combobox, ComboboxOption, Field, TableCellDisplayMode, useStyles2 } from '@grafana/ui';\n\nimport { BarGaugeCellOptionsEditor } from './cells/BarGaugeCellOptionsEditor';\nimport { ColorBackgroundCellOptionsEditor } from './cells/ColorBackgroundCellOptionsEditor';\nimport { ImageCellOptionsEditor } from './cells/ImageCellOptionsEditor';\nimport { MarkdownCellOptionsEditor } from './cells/MarkdownCellOptionsEditor';\nimport { SparklineCellOptionsEditor } from './cells/SparklineCellOptionsEditor';\n\n// The props that any cell type editor are expected\n// to handle. In this case the generic type should\n// be a discriminated interface of TableCellOptions\nexport interface TableCellEditorProps<T> {\n  cellOptions: T;\n  onChange: (value: T) => void;\n}\n\ninterface Props {\n  value: TableCellOptions;\n  onChange: (v: TableCellOptions) => void;\n  id?: string;\n}\n\nexport const TableCellOptionEditor = ({ value, onChange, id }: Props) => {\n  const cellType = value.type;\n  const styles = useStyles2(getStyles);\n  const cellDisplayModeOptions: Array<ComboboxOption<TableCellOptions['type']>> = [\n    { value: TableCellDisplayMode.Auto, label: t('table.cell-types.auto', 'Auto') },\n    { value: TableCellDisplayMode.ColorText, label: t('table.cell-types.color-text', 'Colored text') },\n    {\n      value: TableCellDisplayMode.ColorBackground,\n      label: t('table.cell-types.color-background', 'Colored background'),\n    },\n    { value: TableCellDisplayMode.DataLinks, label: t('table.cell-types.data-links', 'Data links') },\n    { value: TableCellDisplayMode.Gauge, label: t('table.cell-types.gauge', 'Gauge') },\n    { value: TableCellDisplayMode.Sparkline, label: t('table.cell-types.sparkline', 'Sparkline') },\n    { value: TableCellDisplayMode.JSONView, label: t('table.cell-types.json', 'JSON View') },\n    { value: TableCellDisplayMode.Pill, label: t('table.cell-types.pill', 'Pill') },\n    { value: TableCellDisplayMode.Markdown, label: t('table.cell-types.markdown', 'Markdown + HTML') },\n    { value: TableCellDisplayMode.Image, label: t('table.cell-types.image', 'Image') },\n    { value: TableCellDisplayMode.Actions, label: t('table.cell-types.actions', 'Actions') },\n  ];\n  const currentMode = cellDisplayModeOptions.find((o) => o.value === cellType)!;\n\n  let [settingCache, setSettingCache] = useState<Record<string, TableCellOptions>>({});\n\n  // Update display mode on change\n  const onCellTypeChange = (v: ComboboxOption<TableCellOptions['type']>) => {\n    if (v !== null) {\n      // Set the new type of cell starting\n      // with default settings\n      value = { type: v.value };\n\n      // When changing cell type see if there were previously stored\n      // settings and merge those with the changed value\n      if (settingCache[value.type] !== undefined && Object.keys(settingCache[value.type]).length > 1) {\n        value = merge({}, value, settingCache[value.type]);\n      }\n\n      onChange(value);\n    }\n  };\n\n  // When options for a cell change we merge\n  // any option changes with our options object\n  const onCellOptionsChange = (options: TableCellOptions) => {\n    settingCache[value.type] = merge({}, value, options);\n    setSettingCache(settingCache);\n    onChange(settingCache[value.type]);\n  };\n\n  // Setup and inject editor\n  return (\n    <div className={styles.fixBottomMargin}>\n      <Field>\n        <Combobox id={id} options={cellDisplayModeOptions} value={currentMode} onChange={onCellTypeChange} />\n      </Field>\n      {cellType === TableCellDisplayMode.Gauge && (\n        <BarGaugeCellOptionsEditor cellOptions={value} onChange={onCellOptionsChange} />\n      )}\n      {cellType === TableCellDisplayMode.ColorBackground && (\n        <ColorBackgroundCellOptionsEditor cellOptions={value} onChange={onCellOptionsChange} />\n      )}\n      {cellType === TableCellDisplayMode.Sparkline && (\n        <SparklineCellOptionsEditor cellOptions={value} onChange={onCellOptionsChange} />\n      )}\n      {cellType === TableCellDisplayMode.Image && (\n        <ImageCellOptionsEditor cellOptions={value} onChange={onCellOptionsChange} />\n      )}\n      {cellType === TableCellDisplayMode.Markdown && (\n        <MarkdownCellOptionsEditor cellOptions={value} onChange={onCellOptionsChange} />\n      )}\n    </div>\n  );\n};\n\nconst getStyles = (theme: GrafanaTheme2) => ({\n  fixBottomMargin: css({\n    position: 'relative',\n    marginBottom: theme.spacing(-2),\n  }),\n});\n","// Code generated - EDITING IS FUTILE. DO NOT EDIT.\n//\n// Generated by:\n//     public/app/plugins/gen.go\n// Using jennies:\n//     TSTypesJenny\n//     PluginTsTypesJenny\n//\n// Run 'make gen-cue' from repository root to regenerate.\n\nimport * as ui from '@grafana/schema';\n\nexport interface Options {\n  /**\n   * Controls the height of the rows\n   */\n  cellHeight?: ui.TableCellHeight;\n  /**\n   * Enable pagination on the table\n   */\n  enablePagination?: boolean;\n  /**\n   * Represents the index of the selected frame\n   */\n  frameIndex: number;\n  /**\n   * Defines the number of columns to freeze on the left side of the table\n   */\n  frozenColumns?: {\n    left?: number;\n  };\n  /**\n   * limits the maximum height of a row, if text wrapping or dynamic height is enabled\n   */\n  maxRowHeight?: number;\n  /**\n   * Controls whether the panel should show the header\n   */\n  showHeader: boolean;\n  /**\n   * Controls whether the header should show icons for the column types\n   */\n  showTypeIcons?: boolean;\n  /**\n   * Used to control row sorting\n   */\n  sortBy?: Array<ui.TableSortByFieldState>;\n}\n\nexport const defaultOptions: Partial<Options> = {\n  cellHeight: ui.TableCellHeight.Sm,\n  frameIndex: 0,\n  showHeader: true,\n  showTypeIcons: false,\n  sortBy: [],\n};\n\nexport interface FieldConfig extends ui.TableFieldOptions {}\n","import { VisualizationSuggestionsBuilder } from '@grafana/data';\nimport { TableFieldOptions } from '@grafana/schema';\nimport icnTablePanelSvg from 'app/plugins/panel/table/img/icn-table-panel.svg';\nimport { SuggestionName } from 'app/types/suggestions';\n\nimport { Options } from './panelcfg.gen';\n\nexport class TableSuggestionsSupplier {\n  getSuggestionsForData(builder: VisualizationSuggestionsBuilder) {\n    const list = builder.getListAppender<Options, TableFieldOptions>({\n      name: SuggestionName.Table,\n      pluginId: 'table',\n      options: {},\n      fieldConfig: {\n        defaults: {\n          custom: {},\n        },\n        overrides: [],\n      },\n      cardOptions: {\n        previewModifier: (s) => {\n          s.fieldConfig!.defaults.custom!.minWidth = 50;\n        },\n      },\n    });\n\n    // If there are not data suggest table anyway but use icon instead of real preview\n    if (builder.dataSummary.fieldCount === 0) {\n      list.append({\n        cardOptions: {\n          imgSrc: icnTablePanelSvg,\n        },\n      });\n    } else {\n      list.append({});\n    }\n  }\n}\n","import { PanelPlugin, standardEditorsRegistry, identityOverrideProcessor, FieldConfigProperty } from '@grafana/data';\nimport { t } from '@grafana/i18n';\nimport {\n  defaultTableFieldOptions,\n  TableCellOptions,\n  TableCellDisplayMode,\n  TableCellHeight,\n  TableCellTooltipPlacement,\n} from '@grafana/schema';\n\nimport { PaginationEditor } from './PaginationEditor';\nimport { TableCellOptionEditor } from './TableCellOptionEditor';\nimport { TablePanel } from './TablePanel';\nimport { tableMigrationHandler, tablePanelChangedHandler } from './migrations';\nimport { Options, defaultOptions, FieldConfig } from './panelcfg.gen';\nimport { TableSuggestionsSupplier } from './suggestions';\n\nexport const plugin = new PanelPlugin<Options, FieldConfig>(TablePanel)\n  .setPanelChangeHandler(tablePanelChangedHandler)\n  .setMigrationHandler(tableMigrationHandler)\n  .useFieldConfig({\n    standardOptions: {\n      [FieldConfigProperty.Actions]: {\n        hideFromDefaults: false,\n      },\n    },\n    useCustomConfig: (builder) => {\n      const category = [t('table.category-table', 'Table')];\n      const cellCategory = [t('table.category-cell-options', 'Cell options')];\n      builder\n        .addNumberInput({\n          path: 'minWidth',\n          name: t('table.name-min-column-width', 'Minimum column width'),\n          category,\n          description: t('table.description-min-column-width', 'The minimum width for column auto resizing'),\n          settings: {\n            placeholder: '150',\n            min: 50,\n            max: 500,\n          },\n          shouldApply: () => true,\n          defaultValue: defaultTableFieldOptions.minWidth,\n        })\n        .addNumberInput({\n          path: 'width',\n          name: t('table.name-column-width', 'Column width'),\n          category,\n          settings: {\n            placeholder: t('table.placeholder-column-width', 'auto'),\n            min: 20,\n          },\n          shouldApply: () => true,\n          defaultValue: defaultTableFieldOptions.width,\n        })\n        .addRadio({\n          path: 'align',\n          name: t('table.name-column-alignment', 'Column alignment'),\n          category,\n          settings: {\n            options: [\n              { label: t('table.column-alignment-options.label-auto', 'Auto'), value: 'auto' },\n              { label: t('table.column-alignment-options.label-left', 'Left'), value: 'left' },\n              { label: t('table.column-alignment-options.label-center', 'Center'), value: 'center' },\n              { label: t('table.column-alignment-options.label-right', 'Right'), value: 'right' },\n            ],\n          },\n          defaultValue: defaultTableFieldOptions.align,\n        })\n        .addBooleanSwitch({\n          path: 'filterable',\n          name: t('table.name-column-filter', 'Column filter'),\n          category,\n          description: t('table.description-column-filter', 'Enables/disables field filters in table'),\n          defaultValue: defaultTableFieldOptions.filterable,\n        })\n        .addBooleanSwitch({\n          path: 'wrapText',\n          name: t('table.name-wrap-text', 'Wrap text'),\n          category,\n        })\n        .addBooleanSwitch({\n          path: 'wrapHeaderText',\n          name: t('table.name-wrap-header-text', 'Wrap header text'),\n          category,\n        })\n        .addBooleanSwitch({\n          path: 'hideFrom.viz',\n          name: t('table.name-hide-in-table', 'Hide in table'),\n          category,\n          defaultValue: undefined,\n          hideFromDefaults: true,\n        })\n        .addCustomEditor({\n          id: 'footer.reducers',\n          category: [t('table.category-table-footer', 'Table footer')],\n          path: 'footer.reducers',\n          name: t('table.name-calculation', 'Calculation'),\n          description: t('table.description-calculation', 'Choose a reducer function / calculation'),\n          editor: standardEditorsRegistry.get('stats-picker').editor,\n          override: standardEditorsRegistry.get('stats-picker').editor,\n          defaultValue: [],\n          process: identityOverrideProcessor,\n          shouldApply: () => true,\n          settings: {\n            allowMultiple: true,\n          },\n        })\n        .addCustomEditor<void, TableCellOptions>({\n          id: 'cellOptions',\n          path: 'cellOptions',\n          name: t('table.name-cell-type', 'Cell type'),\n          editor: TableCellOptionEditor,\n          override: TableCellOptionEditor,\n          defaultValue: defaultTableFieldOptions.cellOptions,\n          process: identityOverrideProcessor,\n          category: cellCategory,\n          shouldApply: () => true,\n        })\n        .addBooleanSwitch({\n          path: 'inspect',\n          name: t('table.name-cell-value-inspect', 'Cell value inspect'),\n          description: t('table.description-cell-value-inspect', 'Enable cell value inspection in a modal window'),\n          defaultValue: false,\n          category: cellCategory,\n          showIf: (cfg) => {\n            return (\n              cfg.cellOptions.type === TableCellDisplayMode.Auto ||\n              cfg.cellOptions.type === TableCellDisplayMode.JSONView ||\n              cfg.cellOptions.type === TableCellDisplayMode.ColorText ||\n              cfg.cellOptions.type === TableCellDisplayMode.ColorBackground\n            );\n          },\n        })\n        .addFieldNamePicker({\n          path: 'tooltip.field',\n          name: t('table.name-tooltip-from-field', 'Tooltip from field'),\n          description: t(\n            'table.description-tooltip-from-field',\n            'Render a cell from a field (hidden or visible) in a tooltip'\n          ),\n          category: cellCategory,\n        })\n        .addSelect({\n          path: 'tooltip.placement',\n          name: t('table.name-tooltip-placement', 'Tooltip placement'),\n          category: cellCategory,\n          settings: {\n            options: [\n              {\n                label: t('table.tooltip-placement-options.label-auto', 'Auto'),\n                value: TableCellTooltipPlacement.Auto,\n              },\n              {\n                label: t('table.tooltip-placement-options.label-top', 'Top'),\n                value: TableCellTooltipPlacement.Top,\n              },\n              {\n                label: t('table.tooltip-placement-options.label-right', 'Right'),\n                value: TableCellTooltipPlacement.Right,\n              },\n              {\n                label: t('table.tooltip-placement-options.label-bottom', 'Bottom'),\n                value: TableCellTooltipPlacement.Bottom,\n              },\n              {\n                label: t('table.tooltip-placement-options.label-left', 'Left'),\n                value: TableCellTooltipPlacement.Left,\n              },\n            ],\n          },\n          showIf: (cfg) => cfg.tooltip?.field !== undefined,\n        });\n    },\n  })\n  .setPanelOptions((builder) => {\n    const category = [t('table.category-table', 'Table')];\n    builder\n      .addBooleanSwitch({\n        path: 'showHeader',\n        name: t('table.name-show-table-header', 'Show table header'),\n        category,\n        defaultValue: defaultOptions.showHeader,\n      })\n      .addNumberInput({\n        path: 'frozenColumns.left',\n        name: t('table.name-frozen-columns', 'Frozen columns'),\n        description: t('table.description-frozen-columns', 'Columns are frozen from the left side of the table'),\n        settings: {\n          placeholder: 'none',\n        },\n        category,\n      })\n      .addRadio({\n        path: 'cellHeight',\n        name: t('table.name-cell-height', 'Cell height'),\n        category,\n        defaultValue: defaultOptions.cellHeight,\n        settings: {\n          options: [\n            { value: TableCellHeight.Sm, label: t('table.cell-height-options.label-small', 'Small') },\n            { value: TableCellHeight.Md, label: t('table.cell-height-options.label-medium', 'Medium') },\n            { value: TableCellHeight.Lg, label: t('table.cell-height-options.label-large', 'Large') },\n          ],\n        },\n      })\n      .addNumberInput({\n        path: 'maxRowHeight',\n        name: t('table.name-max-height', 'Max row height'),\n        category,\n        settings: {\n          placeholder: t('table.placeholder-max-height', 'none'),\n          min: 0,\n        },\n      })\n      .addCustomEditor({\n        id: 'enablePagination',\n        path: 'enablePagination',\n        name: t('table.name-enable-pagination', 'Enable pagination'),\n        category,\n        editor: PaginationEditor,\n        defaultValue: defaultOptions?.enablePagination,\n      });\n  })\n  .setSuggestionsSupplier(new TableSuggestionsSupplier());\n"],"names":["TablePanel","props","data","height","width","options","fieldConfig","id","timeRange","replaceVariables","transparent","theme","panelContext","userCanExecuteActions","_getActions","frame","field","rowIndex","getCellActions","frames","count","hasFields","currentIndex","getCurrentFrameIndex","main","tableHeight","inputHeight","padding","enableSharedCrosshair","disableSanitizeHtml","tableElement","sortBy","onSortByChange","displayName","resizedWidth","onColumnResize","names","index","tableStyles","val","onChangeTableSelection","fieldDisplayName","overrides","matcherId","propId","override","o","property","prop","replaceVars","value","dataFrame","actions","actionsOut","actionLookup","action","key","tableMigrationHandler","panel","migrateTextWrapToFieldLevel","migrateHiddenFields","migrateFooterV2","transformsMap","columnsMap","colorModeMap","generateThresholds","thresholds","colors","threshold","idx","migrateTransformations","oldOpts","transformations","opts","column","migrateTableStyleToOverride","style","migrateDefaults","prevDefaults","defaults","tablePanelChangedHandler","prevPluginId","prevOptions","getMainFrames","df","migrateFromParentRowIndexToNestedFrames","migratedFrames","subFrames","subFramesGrouped","subFramesByIndex","migratedFrame","hasDeprecatedParentRowIndex","legacyDefaultWrapText","oldFooter","reducers","PaginationEditor","onChange","changeValue","event","Switch","selectors","BarGaugeCellOptionsEditor","cellOptions","onCellOptionsChange","v","onValueModeChange","Stack","Field","RadioButtonGroup","barGaugeOpts","valueModes","colorBackgroundOpts","ColorBackgroundCellOptionsEditor","onColorRowChange","applyToRowSwitchId","ImageCellOptionsEditor","onAltChange","e","onTitleChange","altTextInputId","titleTextInputId","Input","MarkdownCellOptionsEditor","onDynamicHeightChange","Label","Badge","optionIds","getChartCellConfig","cfg","graphFieldConfig","builder","SparklineCellOptionsEditor","registry","config","getStyles","values","htmlIdBase","item","Editor","path","isOptionKey","TableCellOptionEditor","cellType","styles","cellDisplayModeOptions","currentMode","settingCache","setSettingCache","onCellTypeChange","Combobox","defaultOptions","TableSuggestionsSupplier","list","s","PanelPlugin","category","cellCategory"],"sourceRoot":""}