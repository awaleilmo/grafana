"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[1168],{22129:(G,E,s)=>{s.r(E),s.d(E,{PlaylistPage:()=>H,default:()=>rt});var t=s(74848),o=s(96540),a=s(92745),m=s(45861),b=s(50201),I=s(89640),N=s(71599),A=s(13791),R=s(65064),j=s(15130),g=s(58614),p=s(22803),D=s(63142),T=s(21348),v=s(70255),c=s(8073),f=s(8515),O=s(41654),L=s(34339),B=s(5556),W=s(27489),U=s(22787),F=s(16780),P=s(37386),Z=s(77824),M=s(32635),Q=s(63527),J=s(47931),X=s(58662);const w=({playlistUid:e,onDismiss:n})=>{const[i,r]=(0,o.useState)(!1),[d,S]=(0,o.useState)(!1),y=[{label:(0,a.t)("share-playlist.mode-normal","Normal"),value:!1},{label:(0,a.t)("share-playlist.mode-kiosk","Kiosk"),value:!0}],u={};i&&(u.kiosk=i),d&&(u.autofitpanels=!0);const x=B.kM.renderUrl(`${(0,X.P_)()}/play/${e}`,u);return(0,t.jsx)(U.a,{isOpen:!0,title:(0,a.t)("share-playlist.title","Share playlist"),onDismiss:n,children:(0,t.jsxs)(F.n,{children:[(0,t.jsx)(P.D,{label:(0,a.t)("share-playlist.mode","Mode"),children:(0,t.jsx)(Z.z,{value:i,options:y,onChange:r})}),(0,t.jsx)(P.D,{children:(0,t.jsx)(M.S,{label:(0,a.t)("share-playlist.checkbox-label","Autofit"),description:(0,a.t)("share-playlist.checkbox-description","Panel heights will be adjusted to fit screen size"),name:"autofix",value:d,onChange:h=>S(h.currentTarget.checked)})}),(0,t.jsx)(P.D,{label:(0,a.t)("share-playlist.link-url-label","Link URL"),children:(0,t.jsx)(Q.p,{id:"link-url-input",value:x,readOnly:!0,addonAfter:(0,t.jsx)(J.b,{icon:"copy",variant:"primary",getText:()=>x,onClipboardCopy:()=>{(0,W.rR)("grafana_kiosk_mode",{action:"share_playlist",mode:i})},children:(0,t.jsx)(a.x6,{i18nKey:"share-playlist.copy-link-button",children:"Copy"})})})})]})})},q=({playlist:e,setStartPlaylist:n,setPlaylistToDelete:i})=>(0,t.jsxs)(c.Z,{children:[(0,t.jsxs)(c.Z.Heading,{children:[e.spec?.title,(0,t.jsx)(f.$s,{children:({showModal:r,hideModal:d})=>(0,t.jsx)(L._,{tooltip:(0,a.t)("playlist-page.card.tooltip","Share playlist"),icon:"share-alt",iconSize:"lg",onClick:()=>{r(w,{playlistUid:e.metadata?.name??"",onDismiss:d})}})},"button-share")]}),(0,t.jsxs)(c.Z.Actions,{children:[(0,t.jsx)(m.$n,{variant:"secondary",icon:"play",onClick:()=>n(e),children:(0,t.jsx)(a.x6,{i18nKey:"playlist-page.card.start",children:"Start playlist"})}),j.TP.isEditor&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(m.z9,{variant:"secondary",href:`/playlists/edit/${e.metadata?.name}`,icon:"cog",children:(0,t.jsx)(a.x6,{i18nKey:"playlist-page.card.edit",children:"Edit playlist"})},"edit"),(0,t.jsx)(m.$n,{disabled:!1,onClick:()=>i(e),icon:"trash-alt",variant:"destructive",children:(0,t.jsx)(a.x6,{i18nKey:"playlist-page.card.delete",children:"Delete playlist"})})]})]})]}),_=({rootProps:e})=>{const n=(0,D.of)(tt);return(0,t.jsxs)(c.Z,{...e,children:[(0,t.jsx)(c.Z.Heading,{children:(0,t.jsx)(v.A,{width:140})}),(0,t.jsx)(c.Z.Actions,{children:(0,t.jsxs)(O.B,{direction:"row",wrap:"wrap",children:[(0,t.jsx)(v.A,{containerClassName:n.button,width:142,height:32}),j.TP.isEditor&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(v.A,{containerClassName:n.button,width:135,height:32}),(0,t.jsx)(v.A,{containerClassName:n.button,width:153,height:32})]})]})})]})},K=(0,T.j)(q,_);function tt(e){return{button:(0,p.css)({lineHeight:1})}}const st=({playlists:e,setStartPlaylist:n,setPlaylistToDelete:i})=>{const r=(0,D.of)(Y);return(0,t.jsx)("ul",{className:r.list,children:e.map(d=>(0,t.jsx)("li",{className:r.listItem,children:(0,t.jsx)(K,{playlist:d,setStartPlaylist:n,setPlaylistToDelete:i})},d.metadata?.name))})},at=({rootProps:e})=>{const n=(0,D.of)(Y);return(0,t.jsxs)("div",{"data-testid":"playlist-page-list-skeleton",className:n.list,...e,children:[(0,t.jsx)(K.Skeleton,{}),(0,t.jsx)(K.Skeleton,{}),(0,t.jsx)(K.Skeleton,{})]})},V=(0,T.j)(st,at);function Y(e){return{list:(0,p.css)({display:"grid"}),listItem:(0,p.css)({listStyle:"none"})}}var et=s(36490),lt=s(43173),nt=s(31286);const it=({playlist:e,onDismiss:n})=>{const[i,r]=(0,o.useState)(!1),[d,S]=(0,o.useState)(!1),[y,u]=(0,o.useState)(!0),[x,h]=(0,o.useState)(!0),[C,z]=(0,o.useState)(!0),k=[{label:(0,a.t)("playlist.start-modal.modes.label.normal","Normal"),value:!1},{label:(0,a.t)("playlist.start-modal.modes.label.kiosk","Kiosk"),value:!0}],$=()=>{const l={};i&&(l.kiosk=i),d&&(l.autofitpanels=!0),y||(l["_dash.hideTimePicker"]=!0),x||(l["_dash.hideVariables"]=!0),C||(l["_dash.hideLinks"]=!0),et.Ny.push(B.kM.renderUrl(`/playlists/play/${e.metadata?.name}`,l)),(0,W.rR)("grafana_kiosk_mode",{action:"start_playlist",mode:i})};return(0,t.jsxs)(U.a,{isOpen:!0,icon:"play",title:(0,a.t)("playlist.start-modal.title-start-playlist","Start playlist"),onDismiss:n,children:[(0,t.jsxs)(F.n,{children:[(0,t.jsx)(P.D,{label:(0,a.t)("playlist.start-modal.label-mode","Mode"),children:(0,t.jsx)(Z.z,{value:i,options:k,onChange:r})}),(0,t.jsx)(P.D,{children:(0,t.jsx)(M.S,{label:(0,a.t)("playlist.start-modal.label-autofit","Autofit"),description:(0,a.t)("playlist.start-modal.description-panel-heights-adjusted-screen","Panel heights will be adjusted to fit screen size"),name:"autofix",value:d,onChange:l=>S(l.currentTarget.checked)})}),lt.$.featureToggles.dashboardScene&&(0,t.jsx)(P.D,{label:(0,a.t)("playlist.start-modal.label-display-dashboard-controls","Display dashboard controls"),description:(0,a.t)("playlist.start-modal.description-customize-dashboard-elements-visibility","Customize dashboard elements visibility"),children:(0,t.jsx)(nt.a,{marginTop:2,marginBottom:2,children:(0,t.jsxs)(O.B,{direction:"column",alignItems:"start",justifyContent:"left",gap:2,children:[(0,t.jsx)(M.S,{label:(0,a.t)("playlist.start-modal.label-time-and-refresh","Time and refresh"),name:"displayTimePicker",value:y,onChange:l=>u(l.currentTarget.checked)}),(0,t.jsx)(M.S,{label:(0,a.t)("playlist.start-modal.label-variables","Variables"),name:"displayVariableControls",value:x,onChange:l=>h(l.currentTarget.checked)}),(0,t.jsx)(M.S,{label:(0,a.t)("playlist.start-modal.label-dashboard-links","Dashboard links"),name:"displayLinks",value:C,onChange:l=>z(l.currentTarget.checked)})]})})})]}),(0,t.jsx)(U.a.ButtonRow,{children:(0,t.jsx)(m.$n,{variant:"primary",onClick:$,children:(0,t.jsxs)(a.x6,{i18nKey:"playlist.start-modal.button-start",values:{title:e.spec?.title},children:["Start ","{{title}}"]})})})]})};var ot=s(18984);const H=()=>{const{data:e,isLoading:n}=(0,g.o6)({}),[i]=(0,g.Iq)(),[r,d]=(0,o.useState)(""),S=(0,o.useMemo)(()=>e?.items??[],[e?.items]),y=(0,o.useMemo)(()=>(0,ot.GM)(S,r),[r,S]),[u,x]=(0,o.useState)(),[h,C]=(0,o.useState)(),z=y&&y.length>0,k=()=>C(void 0),$=()=>{h&&i({name:h.metadata?.name??""}).finally(()=>{C(void 0)})},l=n||y.length>0||r.length>0;return(0,t.jsx)(A.Y,{actions:j.TP.isEditor&&l?(0,t.jsx)(m.z9,{href:"/playlists/new",children:(0,t.jsx)(a.x6,{i18nKey:"playlist-page.create-button.title",children:"New playlist"})}):void 0,navId:"dashboards/playlists",children:(0,t.jsxs)(A.Y.Contents,{children:[l&&(0,t.jsx)(R.A,{searchQuery:r,setSearchQuery:d}),n?(0,t.jsx)(V.Skeleton,{}):(0,t.jsxs)(t.Fragment,{children:[!z&&r?(0,t.jsx)(b.p,{variant:"not-found",message:(0,a.t)("playlists.empty-state.message","No playlists found")}):(0,t.jsx)(V,{playlists:y,setStartPlaylist:x,setPlaylistToDelete:C}),!l&&(0,t.jsx)(b.p,{variant:"call-to-action",button:(0,t.jsx)(m.z9,{disabled:!j.TP.isEditor,href:"playlists/new",icon:"plus",size:"lg",children:(0,t.jsx)(a.x6,{i18nKey:"playlist-page.empty.button",children:"Create playlist"})}),message:(0,a.t)("playlist-page.empty.title","There are no playlists created yet"),children:(0,t.jsxs)(a.x6,{i18nKey:"playlist-page.empty.pro-tip",children:["You can use playlists to cycle dashboards on TVs without user control."," ",(0,t.jsx)(I.Y,{external:!0,href:"https://docs.grafana.org/reference/playlist/",children:"Learn more"})]})}),h&&(0,t.jsx)(N.u,{title:h.spec?.title??"",confirmText:(0,a.t)("playlist-page.delete-modal.confirm-text","Delete"),body:(0,a.t)("playlist-page.delete-modal.body","Are you sure you want to delete {{name}} playlist?",{name:h.spec?.title}),onConfirm:$,isOpen:!!h,onDismiss:k}),u&&(0,t.jsx)(it,{playlist:u,onDismiss:()=>x(void 0)})]})]})})},rt=H},65064:(G,E,s)=>{s.d(E,{A:()=>R});var t=s(74848),o=s(22803),a=s(45861),m=s(18027),b=s(12737),I=s(32635),N=s(63142),A=s(18552);function R({searchQuery:g,linkButton:p,setSearchQuery:D,target:T,placeholder:v="Search by name or type",sortPicker:c,filterCheckbox:f}){const O=(0,N.of)(j),L={href:p?.href,disabled:p?.disabled};return T&&(L.target=T),(0,t.jsxs)("div",{className:O.container,children:[(0,t.jsx)(m.I,{grow:!0,children:(0,t.jsx)(b.Z,{value:g,onChange:D,placeholder:v})}),f&&(0,t.jsx)(I.S,{label:f.label,value:f.value,onChange:B=>f.onChange(B.currentTarget.checked)}),c&&(0,t.jsx)(A.r,{onChange:c.onChange,value:c.value,getSortOptions:c.getSortOptions}),p&&(0,t.jsx)(a.z9,{...L,children:p.title})]})}const j=g=>({container:(0,o.css)({display:"flex",alignItems:"center",gap:g.spacing(2),marginBottom:g.spacing(2)})})}}]);

//# sourceMappingURL=PlaylistPage.a4bd337cef385596ca3a.js.map