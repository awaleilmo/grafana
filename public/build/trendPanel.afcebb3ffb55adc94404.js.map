{"version":3,"file":"trendPanel.afcebb3ffb55adc94404.js","mappings":"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","sources":["webpack://grafana/./packages/grafana-ui/src/components/VizTooltip/VizTooltipHeader.tsx","webpack://grafana/./packages/grafana-ui/src/components/VizTooltip/VizTooltipContent.tsx","webpack://grafana/./public/app/plugins/panel/timeseries/utils.ts","webpack://grafana/./packages/grafana-ui/src/components/VizTooltip/VizTooltipColorIndicator.tsx","webpack://grafana/./packages/grafana-ui/src/components/VizTooltip/VizTooltipRow.tsx","webpack://grafana/./public/app/plugins/panel/trend/TrendPanel.tsx","webpack://grafana/./public/app/plugins/panel/trend/suggestions.ts","webpack://grafana/./public/app/plugins/panel/trend/module.tsx"],"sourcesContent":["import { css } from '@emotion/css';\n\nimport { GrafanaTheme2 } from '@grafana/data';\n\nimport { useStyles2 } from '../../themes/ThemeContext';\n\nimport { VizTooltipRow } from './VizTooltipRow';\nimport { VizTooltipItem } from './types';\n\ninterface Props {\n  item: VizTooltipItem;\n  isPinned: boolean;\n}\nexport const VizTooltipHeader = ({ item, isPinned }: Props) => {\n  const styles = useStyles2(getStyles);\n\n  const { label, value, color, colorIndicator } = item;\n\n  return (\n    <div className={styles.wrapper}>\n      <VizTooltipRow\n        label={label}\n        value={value}\n        color={color}\n        colorIndicator={colorIndicator}\n        marginRight={'22px'}\n        isPinned={isPinned}\n      />\n    </div>\n  );\n};\n\nconst getStyles = (theme: GrafanaTheme2) => ({\n  wrapper: css({\n    display: 'flex',\n    flexDirection: 'column',\n    flex: 1,\n    padding: theme.spacing(1),\n    lineHeight: 1,\n  }),\n});\n","import { css } from '@emotion/css';\nimport { CSSProperties, ReactNode } from 'react';\n\nimport { GrafanaTheme2 } from '@grafana/data';\n\nimport { useStyles2 } from '../../themes/ThemeContext';\n\nimport { VizTooltipRow } from './VizTooltipRow';\nimport { VizTooltipItem } from './types';\n\ninterface VizTooltipContentProps {\n  items: VizTooltipItem[];\n  children?: ReactNode;\n  scrollable?: boolean;\n  isPinned: boolean;\n  maxHeight?: number;\n}\n\nexport const VizTooltipContent = ({\n  items,\n  children,\n  isPinned,\n  scrollable = false,\n  maxHeight,\n}: VizTooltipContentProps) => {\n  const styles = useStyles2(getStyles);\n\n  const scrollableStyle: CSSProperties = scrollable\n    ? {\n        maxHeight: maxHeight,\n        overflowY: 'auto',\n      }\n    : {};\n\n  return (\n    <div className={styles.wrapper} style={scrollableStyle}>\n      {items.map(({ label, value, color, colorIndicator, colorPlacement, isActive, lineStyle, isHiddenFromViz }, i) => (\n        <VizTooltipRow\n          key={i}\n          label={label}\n          value={value}\n          color={color}\n          colorIndicator={colorIndicator}\n          colorPlacement={colorPlacement}\n          isActive={isActive}\n          justify={'space-between'}\n          isPinned={isPinned}\n          lineStyle={lineStyle}\n          showValueScroll={!scrollable}\n          isHiddenFromViz={isHiddenFromViz}\n        />\n      ))}\n      {children}\n    </div>\n  );\n};\n\nconst getStyles = (theme: GrafanaTheme2) => ({\n  wrapper: css({\n    display: 'flex',\n    flexDirection: 'column',\n    flex: 1,\n    gap: 2,\n    borderTop: `1px solid ${theme.colors.border.weak}`,\n    padding: theme.spacing(1),\n  }),\n});\n","import {\n  DataFrame,\n  Field,\n  FieldType,\n  getDisplayProcessor,\n  GrafanaTheme2,\n  isBooleanUnit,\n  TimeRange,\n  cacheFieldDisplayNames,\n  applyNullInsertThreshold,\n  nullToValue,\n} from '@grafana/data';\nimport { convertFieldType } from '@grafana/data/internal';\nimport { GraphFieldConfig, LineInterpolation, TooltipDisplayMode, VizTooltipOptions } from '@grafana/schema';\nimport { buildScaleKey } from '@grafana/ui/internal';\n\nimport { HeatmapTooltip } from '../heatmap/panelcfg.gen';\n\ntype ScaleKey = string;\n\n// this will re-enumerate all enum fields on the same scale to create one ordinal progression\n// e.g. ['a','b'][0,1,0] + ['c','d'][1,0,1] -> ['a','b'][0,1,0] + ['c','d'][3,2,3]\nfunction reEnumFields(frames: DataFrame[]): DataFrame[] {\n  let allTextsByKey: Map<ScaleKey, string[]> = new Map();\n\n  let frames2: DataFrame[] = frames.map((frame) => {\n    return {\n      ...frame,\n      fields: frame.fields.map((field) => {\n        if (field.type === FieldType.enum) {\n          let scaleKey = buildScaleKey(field.config, field.type);\n          let allTexts = allTextsByKey.get(scaleKey);\n\n          if (!allTexts) {\n            allTexts = [];\n            allTextsByKey.set(scaleKey, allTexts);\n          }\n\n          let idxs: number[] = field.values.toArray().slice();\n          let txts = field.config.type!.enum!.text!;\n\n          // by-reference incrementing\n          if (allTexts.length > 0) {\n            for (let i = 0; i < idxs.length; i++) {\n              idxs[i] += allTexts.length;\n            }\n          }\n\n          allTexts.push(...txts);\n\n          // shared among all enum fields on same scale\n          field.config.type!.enum!.text! = allTexts;\n\n          return {\n            ...field,\n            values: idxs,\n          };\n\n          // TODO: update displayProcessor?\n        }\n\n        return field;\n      }),\n    };\n  });\n\n  return frames2;\n}\n\n/**\n * Returns null if there are no graphable fields\n */\nexport function prepareGraphableFields(\n  series: DataFrame[],\n  theme: GrafanaTheme2,\n  timeRange?: TimeRange,\n  // numeric X requires a single frame where the first field is numeric\n  xNumFieldIdx?: number\n): DataFrame[] | null {\n  if (!series?.length) {\n    return null;\n  }\n\n  cacheFieldDisplayNames(series);\n\n  let useNumericX = xNumFieldIdx != null;\n\n  // Make sure the numeric x field is first in the frame\n  if (xNumFieldIdx != null && xNumFieldIdx > 0) {\n    series = [\n      {\n        ...series[0],\n        fields: [series[0].fields[xNumFieldIdx], ...series[0].fields.filter((f, i) => i !== xNumFieldIdx)],\n      },\n    ];\n  }\n\n  // some datasources simply tag the field as time, but don't convert to milli epochs\n  // so we're stuck with doing the parsing here to avoid Moment slowness everywhere later\n  // this mutates (once)\n  for (let frame of series) {\n    for (let field of frame.fields) {\n      if (field.type === FieldType.time && typeof field.values[0] !== 'number') {\n        field.values = convertFieldType(field, { destinationType: FieldType.time }).values;\n      }\n    }\n  }\n\n  let enumFieldsCount = 0;\n\n  loopy: for (let frame of series) {\n    for (let field of frame.fields) {\n      if (field.type === FieldType.enum && ++enumFieldsCount > 1) {\n        series = reEnumFields(series);\n        break loopy;\n      }\n    }\n  }\n\n  let copy: Field;\n\n  const frames: DataFrame[] = [];\n\n  for (let frame of series) {\n    const fields: Field[] = [];\n\n    let hasTimeField = false;\n    let hasValueField = false;\n\n    let nulledFrame = useNumericX\n      ? frame\n      : applyNullInsertThreshold({\n          frame,\n          refFieldPseudoMin: timeRange?.from.valueOf(),\n          refFieldPseudoMax: timeRange?.to.valueOf(),\n        });\n\n    const frameFields = nullToValue(nulledFrame).fields;\n\n    for (let fieldIdx = 0; fieldIdx < (frameFields?.length || 0); fieldIdx++) {\n      const field = frameFields[fieldIdx];\n\n      switch (field.type) {\n        case FieldType.time:\n          hasTimeField = true;\n          fields.push(field);\n          break;\n        case FieldType.number:\n          hasValueField = useNumericX ? fieldIdx > 0 : true;\n          copy = {\n            ...field,\n            values: field.values.map((v) => {\n              if (!(Number.isFinite(v) || v == null)) {\n                return null;\n              }\n              return v;\n            }),\n          };\n\n          fields.push(copy);\n          break; // ok\n        case FieldType.enum:\n          hasValueField = true;\n        case FieldType.string:\n          copy = {\n            ...field,\n            values: field.values,\n          };\n\n          fields.push(copy);\n          break; // ok\n        case FieldType.boolean:\n          hasValueField = true;\n          const custom: GraphFieldConfig = field.config?.custom ?? {};\n          const config = {\n            ...field.config,\n            max: 1,\n            min: 0,\n            custom,\n          };\n\n          // smooth and linear do not make sense\n          if (custom.lineInterpolation !== LineInterpolation.StepBefore) {\n            custom.lineInterpolation = LineInterpolation.StepAfter;\n          }\n\n          copy = {\n            ...field,\n            config,\n            type: FieldType.number,\n            values: field.values.map((v) => {\n              if (v == null) {\n                return v;\n              }\n              return Boolean(v) ? 1 : 0;\n            }),\n          };\n\n          if (!isBooleanUnit(config.unit)) {\n            config.unit = 'bool';\n            copy.display = getDisplayProcessor({ field: copy, theme });\n          }\n\n          fields.push(copy);\n          break;\n      }\n    }\n\n    if ((useNumericX || hasTimeField) && hasValueField) {\n      frames.push({\n        ...frame,\n        length: nulledFrame.length,\n        fields,\n      });\n    }\n  }\n\n  if (frames.length) {\n    setClassicPaletteIdxs(frames, theme, 0);\n    matchEnumColorToSeriesColor(frames, theme);\n    return frames;\n  }\n\n  return null;\n}\n\nconst matchEnumColorToSeriesColor = (frames: DataFrame[], theme: GrafanaTheme2) => {\n  const { palette } = theme.visualization;\n  for (const frame of frames) {\n    for (const field of frame.fields) {\n      if (field.type === FieldType.enum) {\n        const namedColor = palette[field.state?.seriesIndex! % palette.length];\n        const hexColor = theme.visualization.getColorByName(namedColor);\n        const enumConfig = field.config.type!.enum!;\n\n        enumConfig.color = Array(enumConfig.text!.length).fill(hexColor);\n        field.display = getDisplayProcessor({ field, theme });\n      }\n    }\n  }\n};\n\nexport const setClassicPaletteIdxs = (frames: DataFrame[], theme: GrafanaTheme2, skipFieldIdx?: number) => {\n  let seriesIndex = 0;\n  frames.forEach((frame) => {\n    frame.fields.forEach((field, fieldIdx) => {\n      if (\n        fieldIdx !== skipFieldIdx &&\n        (field.type === FieldType.number || field.type === FieldType.boolean || field.type === FieldType.enum)\n      ) {\n        field.state = {\n          ...field.state,\n          seriesIndex: seriesIndex++, // TODO: skip this for fields with custom renderers (e.g. Candlestick)?\n        };\n        field.display = getDisplayProcessor({ field, theme });\n      }\n    });\n  });\n};\n\nexport function getTimezones(timezones: string[] | undefined, defaultTimezone: string): string[] {\n  if (!timezones || !timezones.length) {\n    return [defaultTimezone];\n  }\n  return timezones.map((v) => (v?.length ? v : defaultTimezone));\n}\n\nexport const isTooltipScrollable = (tooltipOptions: VizTooltipOptions | HeatmapTooltip) => {\n  return tooltipOptions.mode === TooltipDisplayMode.Multi && tooltipOptions.maxHeight != null;\n};\n","import { css, cx } from '@emotion/css';\n\nimport { FALLBACK_COLOR, GrafanaTheme2 } from '@grafana/data';\nimport { LineStyle } from '@grafana/schema';\n\nimport { useStyles2 } from '../../themes/ThemeContext';\nimport { SeriesIcon } from '../VizLegend/SeriesIcon';\n\nimport { ColorIndicator, DEFAULT_COLOR_INDICATOR } from './types';\nimport { getColorIndicatorClass } from './utils';\n\nexport enum ColorIndicatorPosition {\n  Leading,\n  Trailing,\n}\n\ninterface Props {\n  color?: string;\n  colorIndicator?: ColorIndicator;\n  position?: ColorIndicatorPosition;\n  lineStyle?: LineStyle;\n  isHollow?: boolean;\n}\n\nexport type ColorIndicatorStyles = ReturnType<typeof getStyles>;\n\nexport const VizTooltipColorIndicator = ({\n  color = FALLBACK_COLOR,\n  colorIndicator = DEFAULT_COLOR_INDICATOR,\n  position = ColorIndicatorPosition.Leading,\n  lineStyle,\n  isHollow,\n}: Props) => {\n  const styles = useStyles2(getStyles);\n\n  if (isHollow) {\n    return (\n      <div\n        style={{ border: `1px solid ${color}` }}\n        className={cx(\n          position === ColorIndicatorPosition.Leading ? styles.leading : styles.trailing,\n          getColorIndicatorClass(colorIndicator, styles)\n        )}\n      />\n    );\n  }\n\n  if (colorIndicator === ColorIndicator.series) {\n    return (\n      <SeriesIcon\n        color={color}\n        lineStyle={lineStyle}\n        className={position === ColorIndicatorPosition.Leading ? styles.leading : styles.trailing}\n      />\n    );\n  }\n\n  return (\n    <span\n      style={{ backgroundColor: color }}\n      className={cx(\n        position === ColorIndicatorPosition.Leading ? styles.leading : styles.trailing,\n        getColorIndicatorClass(colorIndicator, styles)\n      )}\n    />\n  );\n};\n\n// @TODO Update classes/add svgs\nconst getStyles = (theme: GrafanaTheme2) => ({\n  leading: css({\n    marginRight: theme.spacing(0.5),\n  }),\n  trailing: css({\n    marginLeft: theme.spacing(0.5),\n  }),\n  series: css({\n    width: '14px',\n    height: '4px',\n    borderRadius: theme.shape.radius.pill,\n    minWidth: '14px',\n  }),\n  value: css({\n    width: '12px',\n    height: '12px',\n    borderRadius: theme.shape.radius.default,\n    fontWeight: 500,\n    minWidth: '12px',\n  }),\n  hexagon: css({}),\n  pie_1_4: css({}),\n  pie_2_4: css({}),\n  pie_3_4: css({}),\n  marker_sm: css({\n    width: '4px',\n    height: '4px',\n    borderRadius: theme.shape.radius.circle,\n    minWidth: '4px',\n  }),\n  marker_md: css({\n    width: '8px',\n    height: '8px',\n    borderRadius: theme.shape.radius.circle,\n    minWidth: '8px',\n  }),\n  marker_lg: css({\n    width: '12px',\n    height: '12px',\n    borderRadius: theme.shape.radius.circle,\n    minWidth: '12px',\n  }),\n});\n","import { css, cx } from '@emotion/css';\nimport { CSSProperties, ReactNode, useEffect, useRef, useState } from 'react';\nimport * as React from 'react';\n\nimport { GrafanaTheme2 } from '@grafana/data';\n\nimport { useStyles2 } from '../../themes/ThemeContext';\nimport { InlineToast } from '../InlineToast/InlineToast';\nimport { Tooltip } from '../Tooltip/Tooltip';\n\nimport { ColorIndicatorPosition, VizTooltipColorIndicator } from './VizTooltipColorIndicator';\nimport { ColorPlacement, VizTooltipItem } from './types';\n\ninterface VizTooltipRowProps extends Omit<VizTooltipItem, 'value'> {\n  value: string | number | null | ReactNode;\n  justify?: string;\n  isActive?: boolean; // for series list\n  marginRight?: string;\n  isPinned: boolean;\n  showValueScroll?: boolean;\n  isHiddenFromViz?: boolean;\n}\n\nenum LabelValueTypes {\n  label = 'label',\n  value = 'value',\n}\n\nconst SUCCESSFULLY_COPIED_TEXT = 'Copied to clipboard';\nconst SHOW_SUCCESS_DURATION = 2 * 1000;\nconst HORIZONTAL_PX_PER_CHAR = 7;\n\nexport const VizTooltipRow = ({\n  label,\n  value,\n  color,\n  colorIndicator,\n  colorPlacement = ColorPlacement.first,\n  justify = 'flex-start',\n  isActive = false,\n  marginRight = '0px',\n  isPinned,\n  lineStyle,\n  showValueScroll,\n  isHiddenFromViz,\n}: VizTooltipRowProps) => {\n  const styles = useStyles2(getStyles, justify, marginRight);\n\n  const innerValueScrollStyle: CSSProperties = showValueScroll\n    ? {\n        maxHeight: 55,\n        whiteSpace: 'wrap',\n        wordBreak: 'break-word',\n        overflowY: 'auto',\n      }\n    : {\n        whiteSpace: 'pre-line',\n        wordBreak: 'break-word',\n        lineHeight: 1.2,\n      };\n\n  const [showLabelTooltip, setShowLabelTooltip] = useState(false);\n\n  const [copiedText, setCopiedText] = useState<Record<string, string> | null>(null);\n  const [showCopySuccess, setShowCopySuccess] = useState(false);\n\n  const labelRef = useRef<null | HTMLDivElement>(null);\n  const valueRef = useRef<null | HTMLDivElement>(null);\n\n  useEffect(() => {\n    let timeoutId: ReturnType<typeof setTimeout>;\n\n    if (showCopySuccess) {\n      timeoutId = setTimeout(() => {\n        setShowCopySuccess(false);\n      }, SHOW_SUCCESS_DURATION);\n    }\n\n    return () => {\n      window.clearTimeout(timeoutId);\n    };\n  }, [showCopySuccess]);\n\n  const copyToClipboard = async (text: string, type: LabelValueTypes) => {\n    if (!(navigator?.clipboard && window.isSecureContext)) {\n      fallbackCopyToClipboard(text, type);\n      return;\n    }\n\n    try {\n      await navigator.clipboard.writeText(text);\n      setCopiedText({ [`${type}`]: text });\n      setShowCopySuccess(true);\n    } catch (error) {\n      setCopiedText(null);\n    }\n  };\n\n  const fallbackCopyToClipboard = (text: string, type: LabelValueTypes) => {\n    // Use a fallback method for browsers/contexts that don't support the Clipboard API.\n    const textarea = document.createElement('textarea');\n    labelRef.current?.appendChild(textarea);\n    textarea.value = text;\n    textarea.focus();\n    textarea.select();\n    try {\n      const successful = document.execCommand('copy');\n      if (successful) {\n        setCopiedText({ [`${type}`]: text });\n        setShowCopySuccess(true);\n      }\n    } catch (err) {\n      console.error('Unable to copy to clipboard', err);\n    }\n\n    textarea.remove();\n  };\n\n  const onMouseEnterLabel = (event: React.MouseEvent<HTMLDivElement>) => {\n    if (event.currentTarget.offsetWidth < event.currentTarget.scrollWidth) {\n      setShowLabelTooltip(true);\n    }\n  };\n\n  const onMouseLeaveLabel = () => setShowLabelTooltip(false);\n\n  // if label is > 50% window width, try to put label/value pairs on new lines\n  if (label.length * HORIZONTAL_PX_PER_CHAR > window.innerWidth / 2) {\n    label = label.replaceAll('{', '{\\n  ').replaceAll('}', '\\n}').replaceAll(', ', ',\\n  ');\n  }\n\n  return (\n    <div className={styles.contentWrapper}>\n      {(color || label) && (\n        <div className={styles.valueWrapper}>\n          {color && colorPlacement === ColorPlacement.first && (\n            <VizTooltipColorIndicator\n              color={color}\n              colorIndicator={colorIndicator}\n              lineStyle={lineStyle}\n              isHollow={isHiddenFromViz}\n            />\n          )}\n          {!isPinned ? (\n            <div className={cx(styles.label, isActive && styles.activeSeries)}>{label}</div>\n          ) : (\n            <>\n              <Tooltip content={label} interactive={false} show={showLabelTooltip}>\n                <>\n                  {showCopySuccess && copiedText?.label && (\n                    <InlineToast placement=\"top\" referenceElement={labelRef.current}>\n                      {SUCCESSFULLY_COPIED_TEXT}\n                    </InlineToast>\n                  )}\n                  {/* eslint-disable-next-line jsx-a11y/click-events-have-key-events,jsx-a11y/no-static-element-interactions */}\n                  <div\n                    className={cx(styles.label, isActive && styles.activeSeries, navigator?.clipboard && styles.copy)}\n                    onMouseEnter={onMouseEnterLabel}\n                    onMouseLeave={onMouseLeaveLabel}\n                    onClick={() => copyToClipboard(label, LabelValueTypes.label)}\n                    ref={labelRef}\n                  >\n                    {label}\n                  </div>\n                </>\n              </Tooltip>\n            </>\n          )}\n        </div>\n      )}\n\n      <div className={styles.valueWrapper}>\n        {color && colorPlacement === ColorPlacement.leading && (\n          <VizTooltipColorIndicator\n            color={color}\n            colorIndicator={colorIndicator}\n            position={ColorIndicatorPosition.Leading}\n            lineStyle={lineStyle}\n          />\n        )}\n\n        {!isPinned ? (\n          <div className={cx(styles.value, isActive)} style={innerValueScrollStyle}>\n            {value}\n          </div>\n        ) : (\n          <>\n            {showCopySuccess && copiedText?.value && (\n              <InlineToast placement=\"top\" referenceElement={valueRef.current}>\n                {SUCCESSFULLY_COPIED_TEXT}\n              </InlineToast>\n            )}\n            {/* eslint-disable-next-line jsx-a11y/click-events-have-key-events,jsx-a11y/no-static-element-interactions */}\n            <div\n              className={cx(styles.value, isActive, navigator?.clipboard && styles.copy)}\n              style={innerValueScrollStyle}\n              onClick={() => copyToClipboard(value ? value.toString() : '', LabelValueTypes.value)}\n              ref={valueRef}\n            >\n              {value}\n            </div>\n          </>\n        )}\n\n        {color && colorPlacement === ColorPlacement.trailing && (\n          <VizTooltipColorIndicator\n            color={color}\n            colorIndicator={colorIndicator}\n            position={ColorIndicatorPosition.Trailing}\n            lineStyle={lineStyle}\n          />\n        )}\n      </div>\n    </div>\n  );\n};\n\nconst getStyles = (theme: GrafanaTheme2, justify: string, marginRight: string) => ({\n  contentWrapper: css({\n    display: 'flex',\n    alignItems: 'start',\n    justifyContent: justify,\n    marginRight: marginRight,\n  }),\n  label: css({\n    color: theme.colors.text.secondary,\n    fontWeight: 400,\n    textOverflow: 'ellipsis',\n    overflow: 'hidden',\n    marginRight: theme.spacing(2),\n  }),\n  value: css({\n    fontWeight: 500,\n    textOverflow: 'ellipsis',\n    overflow: 'hidden',\n  }),\n  valueWrapper: css({\n    display: 'flex',\n    alignItems: 'center',\n  }),\n  activeSeries: css({\n    fontWeight: theme.typography.fontWeightBold,\n    color: theme.colors.text.maxContrast,\n  }),\n  copy: css({\n    cursor: 'pointer',\n  }),\n});\n","import { useMemo } from 'react';\n\nimport {\n  isLikelyAscendingVector,\n  DataFrame,\n  FieldMatcherID,\n  fieldMatchers,\n  FieldType,\n  PanelProps,\n  TimeRange,\n} from '@grafana/data';\nimport { config, PanelDataErrorView } from '@grafana/runtime';\nimport { KeyboardPlugin, TooltipDisplayMode, usePanelContext, TooltipPlugin2 } from '@grafana/ui';\nimport { TooltipHoverMode } from '@grafana/ui/internal';\nimport { XYFieldMatchers } from 'app/core/components/GraphNG/types';\nimport { preparePlotFrame } from 'app/core/components/GraphNG/utils';\nimport { TimeSeries } from 'app/core/components/TimeSeries/TimeSeries';\nimport { findFieldIndex } from 'app/features/dimensions/utils';\n\nimport { TimeSeriesTooltip } from '../timeseries/TimeSeriesTooltip';\nimport { prepareGraphableFields } from '../timeseries/utils';\n\nimport { Options } from './panelcfg.gen';\n\nexport const TrendPanel = ({\n  data,\n  timeRange,\n  timeZone,\n  width,\n  height,\n  options,\n  fieldConfig,\n  replaceVariables,\n  id,\n}: PanelProps<Options>) => {\n  const { dataLinkPostProcessor, canExecuteActions } = usePanelContext();\n\n  const userCanExecuteActions = useMemo(() => canExecuteActions?.() ?? false, [canExecuteActions]);\n\n  // Need to fallback to first number field if no xField is set in options otherwise panel crashes ðŸ˜¬\n  const trendXFieldName =\n    options.xField ?? data.series[0]?.fields.find((field) => field.type === FieldType.number)?.name;\n  const preparePlotFrameTimeless = (frames: DataFrame[], dimFields: XYFieldMatchers, timeRange?: TimeRange | null) => {\n    dimFields = {\n      ...dimFields,\n      x: fieldMatchers.get(FieldMatcherID.byName).get(trendXFieldName),\n    };\n\n    return preparePlotFrame(frames, dimFields);\n  };\n\n  const info = useMemo(() => {\n    if (data.series.length > 1) {\n      return {\n        warning: 'Only one frame is supported, consider adding a join transformation',\n        frames: data.series,\n      };\n    }\n\n    let frames = data.series;\n    let xFieldIdx: number | undefined;\n    if (options.xField) {\n      xFieldIdx = findFieldIndex(options.xField, frames[0]);\n      if (xFieldIdx == null) {\n        return {\n          warning: 'Unable to find field: ' + options.xField,\n          frames: data.series,\n        };\n      }\n    } else {\n      // first number field\n      // Perhaps we can/should support any ordinal rather than an error here\n      xFieldIdx = frames[0] ? frames[0].fields.findIndex((f) => f.type === FieldType.number) : -1;\n      if (xFieldIdx === -1) {\n        return {\n          warning: 'No numeric fields found for X axis',\n          frames,\n        };\n      }\n    }\n\n    // Make sure values are ascending\n    if (xFieldIdx != null) {\n      const field = frames[0].fields[xFieldIdx];\n      if (field.type === FieldType.number && !isLikelyAscendingVector(field.values)) {\n        return {\n          warning: `Values must be in ascending order`,\n          frames,\n        };\n      }\n    }\n\n    return { frames: prepareGraphableFields(frames, config.theme2, undefined, xFieldIdx) };\n  }, [data.series, options.xField]);\n\n  if (info.warning || !info.frames) {\n    return (\n      <PanelDataErrorView\n        panelId={id}\n        fieldConfig={fieldConfig}\n        data={data}\n        message={info.warning}\n        needsNumberField={true}\n      />\n    );\n  }\n\n  return (\n    <TimeSeries // Name change!\n      frames={info.frames}\n      structureRev={data.structureRev}\n      timeRange={timeRange}\n      timeZone={timeZone}\n      width={width}\n      height={height}\n      legend={options.legend}\n      options={options}\n      preparePlotFrame={preparePlotFrameTimeless}\n      replaceVariables={replaceVariables}\n      dataLinkPostProcessor={dataLinkPostProcessor}\n    >\n      {(uPlotConfig, alignedDataFrame) => {\n        return (\n          <>\n            <KeyboardPlugin config={uPlotConfig} />\n            {options.tooltip.mode !== TooltipDisplayMode.None && (\n              <TooltipPlugin2\n                config={uPlotConfig}\n                hoverMode={\n                  options.tooltip.mode === TooltipDisplayMode.Single ? TooltipHoverMode.xOne : TooltipHoverMode.xAll\n                }\n                getDataLinks={(seriesIdx, dataIdx) =>\n                  alignedDataFrame.fields[seriesIdx].getLinks?.({ valueRowIndex: dataIdx }) ?? []\n                }\n                render={(u, dataIdxs, seriesIdx, isPinned = false, dismiss, timeRange, viaSync, dataLinks) => {\n                  return (\n                    <TimeSeriesTooltip\n                      series={alignedDataFrame}\n                      dataIdxs={dataIdxs}\n                      seriesIdx={seriesIdx}\n                      mode={options.tooltip.mode}\n                      sortOrder={options.tooltip.sort}\n                      isPinned={isPinned}\n                      maxHeight={options.tooltip.maxHeight}\n                      replaceVariables={replaceVariables}\n                      dataLinks={dataLinks}\n                      hideZeros={options.tooltip.hideZeros}\n                      canExecuteActions={userCanExecuteActions}\n                    />\n                  );\n                }}\n                maxWidth={options.tooltip.maxWidth}\n              />\n            )}\n          </>\n        );\n      }}\n    </TimeSeries>\n  );\n};\n","import { VisualizationSuggestionsBuilder } from '@grafana/data';\nimport { GraphDrawStyle, GraphFieldConfig, LegendDisplayMode } from '@grafana/schema';\nimport { SuggestionName } from 'app/types/suggestions';\n\nimport { Options } from './panelcfg.gen';\n\nexport class TrendSuggestionsSupplier {\n  getSuggestionsForData(builder: VisualizationSuggestionsBuilder) {\n    const { dataSummary } = builder;\n\n    if (dataSummary.numberFieldCount < 2 || dataSummary.rowCountTotal < 2 || dataSummary.rowCountTotal < 2) {\n      return;\n    }\n\n    // Super basic\n    const list = builder.getListAppender<Options, GraphFieldConfig>({\n      name: SuggestionName.LineChart,\n      pluginId: 'trend',\n      options: {\n        legend: {\n          calcs: [],\n          displayMode: LegendDisplayMode.Hidden,\n          placement: 'right',\n          showLegend: false,\n        },\n      },\n      fieldConfig: {\n        defaults: {\n          custom: {},\n        },\n        overrides: [],\n      },\n      cardOptions: {\n        previewModifier: (s) => {\n          if (s.fieldConfig?.defaults.custom?.drawStyle !== GraphDrawStyle.Bars) {\n            s.fieldConfig!.defaults.custom!.lineWidth = Math.max(s.fieldConfig!.defaults.custom!.lineWidth ?? 1, 2);\n          }\n        },\n      },\n    });\n    return list;\n  }\n}\n","import { Field, FieldType, PanelPlugin } from '@grafana/data';\nimport { t } from '@grafana/i18n';\nimport { commonOptionsBuilder } from '@grafana/ui';\nimport { optsWithHideZeros } from '@grafana/ui/internal';\n\nimport { defaultGraphConfig, getGraphFieldConfig } from '../timeseries/config';\n\nimport { TrendPanel } from './TrendPanel';\nimport { FieldConfig, Options } from './panelcfg.gen';\nimport { TrendSuggestionsSupplier } from './suggestions';\n\nexport const plugin = new PanelPlugin<Options, FieldConfig>(TrendPanel)\n  .useFieldConfig(getGraphFieldConfig(defaultGraphConfig, false))\n  .setPanelOptions((builder) => {\n    const category = [t('trend.category-x-axis', 'X axis')];\n    builder.addFieldNamePicker({\n      path: 'xField',\n      name: t('trend.name-x-field', 'X field'),\n      description: t('trend.description-x-field', 'An increasing numeric value'),\n      category,\n      defaultValue: undefined,\n      settings: {\n        isClearable: true,\n        placeholderText: t('trend.placeholder-x-field', 'First numeric value'),\n        filter: (field: Field) => field.type === FieldType.number,\n      },\n    });\n\n    commonOptionsBuilder.addTooltipOptions(builder, false, true, optsWithHideZeros);\n    commonOptionsBuilder.addLegendOptions(builder);\n  })\n  .setSuggestionsSupplier(new TrendSuggestionsSupplier());\n//.setDataSupport({ annotations: true, alertStates: true });\n"],"names":["VizTooltipHeader","item","isPinned","styles","getStyles","label","value","color","colorIndicator","theme","VizTooltipContent","items","children","scrollable","maxHeight","scrollableStyle","colorPlacement","isActive","lineStyle","isHiddenFromViz","i","reEnumFields","frames","allTextsByKey","frame","field","scaleKey","allTexts","idxs","txts","prepareGraphableFields","series","timeRange","xNumFieldIdx","useNumericX","f","enumFieldsCount","loopy","copy","fields","hasTimeField","hasValueField","nulledFrame","frameFields","fieldIdx","v","custom","config","setClassicPaletteIdxs","matchEnumColorToSeriesColor","palette","namedColor","hexColor","enumConfig","skipFieldIdx","seriesIndex","getTimezones","timezones","defaultTimezone","isTooltipScrollable","tooltipOptions","ColorIndicatorPosition","VizTooltipColorIndicator","position","isHollow","SeriesIcon","LabelValueTypes","SUCCESSFULLY_COPIED_TEXT","SHOW_SUCCESS_DURATION","HORIZONTAL_PX_PER_CHAR","VizTooltipRow","justify","marginRight","showValueScroll","innerValueScrollStyle","showLabelTooltip","setShowLabelTooltip","copiedText","setCopiedText","showCopySuccess","setShowCopySuccess","labelRef","valueRef","timeoutId","copyToClipboard","text","type","fallbackCopyToClipboard","textarea","err","onMouseEnterLabel","event","onMouseLeaveLabel","Tooltip","InlineToast","TrendPanel","data","timeZone","width","height","options","fieldConfig","replaceVariables","id","dataLinkPostProcessor","canExecuteActions","userCanExecuteActions","trendXFieldName","preparePlotFrameTimeless","dimFields","info","xFieldIdx","PanelDataErrorView","TimeSeries","uPlotConfig","alignedDataFrame","KeyboardPlugin","TooltipPlugin2","seriesIdx","dataIdx","u","dataIdxs","dismiss","viaSync","dataLinks","TimeSeriesTooltip","TrendSuggestionsSupplier","builder","dataSummary","s","PanelPlugin","category"],"sourceRoot":""}