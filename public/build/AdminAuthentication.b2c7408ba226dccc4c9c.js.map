{"version":3,"file":"AdminAuthentication.b2c7408ba226dccc4c9c.js","mappings":"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F,CACF,CACF,EACA,OAAQ,CACN,CACE,KAAMF,EACN,GAAI,UACJ,OAAQ,CACN,OACA,WACA,eACA,SACA,cACA,YACA,qBACA,aACF,CACF,EACA,CACE,KAAMC,EACN,GAAI,OACJ,OAAQ,CACN,oBACA,sBACA,aACA,0BACA,iBACF,CACF,EACA,CACE,KAAMC,EACN,GAAI,QACJ,OAAQ,CACN,aACA,eACA,iBACA,gBACA,UACA,kBACA,wBACA,gBACA,eACA,aACF,CACF,CACF,EACA,OAAQ,CACN,CACE,KAAMF,EACN,GAAI,UACJ,OAAQ,CACN,OACA,WACA,eACA,SACA,cACA,YACA,qBACA,aACF,CACF,EACA,CACE,KAAMC,EACN,GAAI,OACJ,OAAQ,CACN,oBACA,sBACA,aACA,0BACA,iBACF,CACF,EACA,CACE,KAAMC,EACN,GAAI,QACJ,OAAQ,CACN,uBACA,iBACA,UACA,UACA,kBACA,wBACA,gBACA,eACA,aACF,CACF,CACF,EACA,OAAQ,CACN,CACE,KAAMF,EACN,GAAI,UACJ,OAAQ,CACN,OACA,WACA,eACA,SACA,cACA,YACA,qBACA,aACF,CACF,EACA,CACE,KAAMC,EACN,GAAI,OACJ,OAAQ,CACN,oBACA,sBACA,aACA,0BACA,iBACF,CACF,EACA,CACE,KAAMC,EACN,GAAI,QACJ,OAAQ,CACN,iBACA,gBACA,UACA,kBACA,wBACA,gBACA,eACA,aACF,CACF,CACF,EACA,KAAM,CACJ,CACE,KAAMF,EACN,GAAI,UACJ,OAAQ,CACN,OACA,WACA,eACA,SACA,UACA,WACA,SACA,cACA,YACA,oBACF,CACF,EACA,CACE,KAAMC,EACN,GAAI,OACJ,OAAQ,CACN,oBACA,sBACA,aACA,mBACA,0BACA,iBACF,CACF,EACA,CACE,KAAMC,EACN,GAAI,QACJ,OAAQ,CACN,iBACA,gBACA,UACA,kBACA,wBACA,gBACA,eACA,aACF,CACF,CACF,CACF,CACF,EAKMC,GAAgB,YAChBC,GAAoB,gBACpBC,EAAc,SACdC,EAA8B,+BAC9BC,EAAe,WACfC,EAAgB,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","sources":["webpack://grafana/./public/app/features/auth-config/constants.ts","webpack://grafana/./public/app/core/components/Branding/CloudEnterpriseBadge.tsx","webpack://grafana/./public/app/features/auth-config/state/actions.ts","webpack://grafana/./public/app/core/components/Branding/OrangeBadge.tsx","webpack://grafana/./node_modules/uuid/dist/esm-browser/regex.js","webpack://grafana/./node_modules/uuid/dist/esm-browser/validate.js","webpack://grafana/./public/app/features/auth-config/AuthDrawer.tsx","webpack://grafana/./public/app/features/auth-config/components/ConfigureAuthCTA.tsx","webpack://grafana/./public/app/features/auth-config/components/ProviderCard.tsx","webpack://grafana/./public/app/features/auth-config/AuthProvidersListPage.tsx","webpack://grafana/./public/app/features/auth-config/utils/url.ts","webpack://grafana/./public/app/features/auth-config/components/ServerDiscoveryModal.tsx","webpack://grafana/./public/app/features/auth-config/components/ServerDiscoveryField.tsx","webpack://grafana/./public/app/features/auth-config/utils/guards.ts","webpack://grafana/./public/app/features/auth-config/fields.tsx","webpack://grafana/./public/app/features/auth-config/FieldRenderer.tsx","webpack://grafana/./public/app/features/auth-config/utils/data.ts","webpack://grafana/./public/app/features/auth-config/ProviderConfigForm.tsx","webpack://grafana/./public/app/features/auth-config/ProviderConfigPage.tsx","webpack://grafana/./public/app/core/components/FormPrompt/Prompt.tsx","webpack://grafana/./public/app/core/components/FormPrompt/FormPrompt.tsx"],"sourcesContent":["import { IconName } from '@grafana/data';\n\nexport const BASE_PATH = 'admin/authentication/';\n\n// TODO Remove when this is available from API\nexport const UIMap: Record<string, [IconName, string]> = {\n  github: ['github', 'GitHub'],\n  gitlab: ['gitlab', 'GitLab'],\n  google: ['google', 'Google'],\n  generic_oauth: ['lock', 'Generic OAuth'],\n  grafana_com: ['grafana', 'Grafana.com'],\n  azuread: ['microsoft', 'Azure AD'],\n  okta: ['okta', 'Okta'],\n  scim: ['scim', 'SCIM'],\n};\n","import { t } from '@grafana/i18n';\n\nimport { OrangeBadge } from './OrangeBadge';\n\nexport function CloudEnterpriseBadge() {\n  return <OrangeBadge text={t('cloud-enterprise-feature-badge', 'Cloud & Enterprise')} />;\n}\n","import { lastValueFrom } from 'rxjs';\n\nimport { getBackendSrv, isFetchError } from '@grafana/runtime';\nimport { contextSrv } from 'app/core/core';\nimport { AccessControlAction } from 'app/types/accessControl';\nimport { Settings, UpdateSettingsQuery } from 'app/types/settings';\nimport { ThunkResult } from 'app/types/store';\n\nimport { getAuthProviderStatus, getRegisteredAuthProviders, SSOProvider } from '..';\nimport { AuthProviderStatus, SettingsError } from '../types';\n\nimport {\n  loadingBegin,\n  loadingEnd,\n  providersLoaded,\n  providerStatusesLoaded,\n  resetError,\n  setError,\n  settingsUpdated,\n} from './reducers';\n\nexport function loadSettings(showSpinner = true): ThunkResult<Promise<Settings>> {\n  return async (dispatch) => {\n    if (contextSrv.hasPermission(AccessControlAction.SettingsRead)) {\n      if (showSpinner) {\n        dispatch(loadingBegin());\n      }\n      dispatch(loadProviders());\n      const result = await getBackendSrv().get('/api/admin/settings');\n      dispatch(settingsUpdated(result));\n      await dispatch(loadProviderStatuses());\n      if (showSpinner) {\n        dispatch(loadingEnd());\n      }\n      return result;\n    }\n  };\n}\n\nexport function loadProviders(provider = ''): ThunkResult<Promise<SSOProvider[]>> {\n  return async (dispatch) => {\n    const result = await getBackendSrv().get(`/api/v1/sso-settings${provider ? `/${provider}` : ''}`);\n    dispatch(providersLoaded(provider ? [result] : result));\n    return result;\n  };\n}\n\nexport function loadProviderStatuses(): ThunkResult<void> {\n  return async (dispatch) => {\n    const registeredProviders = getRegisteredAuthProviders();\n    const providerStatuses: Record<string, AuthProviderStatus> = {};\n    const getStatusPromises: Array<Promise<AuthProviderStatus>> = [];\n    for (const provider of registeredProviders) {\n      getStatusPromises.push(getAuthProviderStatus(provider.id));\n    }\n    const statuses = await Promise.all(getStatusPromises);\n    for (let i = 0; i < registeredProviders.length; i++) {\n      const provider = registeredProviders[i];\n      providerStatuses[provider.id] = statuses[i];\n    }\n    dispatch(providerStatusesLoaded(providerStatuses));\n  };\n}\n\nexport function saveSettings(data: UpdateSettingsQuery): ThunkResult<Promise<boolean>> {\n  return async (dispatch) => {\n    if (contextSrv.hasPermission(AccessControlAction.SettingsWrite)) {\n      try {\n        await lastValueFrom(\n          getBackendSrv().fetch({\n            url: '/api/admin/settings',\n            method: 'PUT',\n            data,\n            showSuccessAlert: false,\n            showErrorAlert: false,\n          })\n        );\n        dispatch(resetError());\n        return true;\n      } catch (error) {\n        console.log(error);\n        if (isFetchError(error)) {\n          error.isHandled = true;\n          const updateErr: SettingsError = {\n            message: error.data?.message,\n            errors: error.data?.errors,\n          };\n          dispatch(setError(updateErr));\n          return false;\n        }\n      }\n    }\n    return false;\n  };\n}\n","import { css } from '@emotion/css';\n\nimport { GrafanaTheme2 } from '@grafana/data';\nimport { Icon, useStyles2 } from '@grafana/ui';\n\nexport function OrangeBadge({ text }: { text: string }) {\n  const styles = useStyles2(getStyles);\n  return (\n    <div className={styles.wrapper}>\n      <Icon name=\"cloud\" size=\"sm\" />\n      {text}\n    </div>\n  );\n}\n\nconst getStyles = (theme: GrafanaTheme2) => {\n  return {\n    wrapper: css({\n      display: 'inline-flex',\n      padding: theme.spacing(0.5, 1),\n      borderRadius: theme.shape.radius.pill,\n      background: theme.colors.gradients.brandHorizontal,\n      color: theme.colors.primary.contrastText,\n      fontWeight: theme.typography.fontWeightMedium,\n      gap: theme.spacing(0.5),\n      fontSize: theme.typography.bodySmall.fontSize,\n      lineHeight: theme.typography.bodySmall.lineHeight,\n      alignItems: 'center',\n    }),\n  };\n};\n","export default /^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-8][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/i;\n","import REGEX from './regex.js';\nfunction validate(uuid) {\n    return typeof uuid === 'string' && REGEX.test(uuid);\n}\nexport default validate;\n","import { css } from '@emotion/css';\nimport { JSX } from 'react';\nimport { connect, ConnectedProps } from 'react-redux';\n\nimport { GrafanaTheme2 } from '@grafana/data';\nimport { Trans, t } from '@grafana/i18n';\nimport { Button, Drawer, Text, TextLink, Switch, useStyles2 } from '@grafana/ui';\nimport { useAppNotification } from 'app/core/copy/appNotification';\nimport { StoreState } from 'app/types/store';\n\nimport { loadSettings, saveSettings } from './state/actions';\n\ninterface OwnProps {\n  onClose: () => void;\n}\n\nexport type Props = OwnProps & ConnectedProps<typeof connector>;\n\nconst mapStateToProps = (state: StoreState) => {\n  const allowInsecureEmail =\n    state.authConfig.settings?.auth?.oauth_allow_insecure_email_lookup.toLowerCase() === 'true';\n  return {\n    allowInsecureEmail,\n  };\n};\n\nconst mapActionsToProps = {\n  loadSettings,\n  saveSettings,\n};\n\nconst connector = connect(mapStateToProps, mapActionsToProps);\n\nexport const AuthDrawerUnconnected = ({\n  allowInsecureEmail,\n  loadSettings,\n  onClose,\n  saveSettings,\n}: Props): JSX.Element => {\n  const notifyApp = useAppNotification();\n\n  const oauthAllowInsecureEmailLookupOnChange = async () => {\n    try {\n      await saveSettings({\n        updates: {\n          auth: {\n            oauth_allow_insecure_email_lookup: '' + !allowInsecureEmail,\n          },\n        },\n      });\n      await loadSettings(false);\n      notifyApp.success('Settings saved');\n    } catch (error) {\n      notifyApp.error('Failed to save settings');\n    }\n  };\n\n  const resetButtonOnClick = async () => {\n    try {\n      await saveSettings({\n        removals: {\n          auth: ['oauth_allow_insecure_email_lookup'],\n        },\n      });\n      await loadSettings(false);\n      notifyApp.success('Settings saved');\n    } catch (error) {\n      notifyApp.error('Failed to save settings');\n    }\n  };\n\n  const subtitle = (\n    <Trans i18nKey=\"auth-config.auth-drawer-unconneced.subtitle\">\n      Configure auth settings. Find out more in our{' '}\n      <TextLink\n        external={true}\n        href=\"https://grafana.com/docs/grafana/next/setup-grafana/configure-security/configure-authentication/#settings\"\n      >\n        documentation\n      </TextLink>\n      .\n    </Trans>\n  );\n\n  const styles = useStyles2(getStyles);\n\n  return (\n    <Drawer\n      title={t('auth-config.auth-drawer-unconnected.title-auth-settings', 'Auth settings')}\n      subtitle={subtitle}\n      size=\"md\"\n      onClose={onClose}\n    >\n      <div className={styles.advancedAuth}>\n        <Text variant=\"h4\">\n          <Trans i18nKey=\"auth-config.auth-drawer-unconnected.advanced-auth\">Advanced Auth</Trans>\n        </Text>\n        <Text variant=\"h5\">\n          <Trans i18nKey=\"auth-config.auth-drawer-unconnected.enable-insecure-email-lookup\">\n            Enable insecure email lookup\n          </Trans>\n        </Text>\n        <Text variant=\"body\" color=\"secondary\">\n          <Trans i18nKey=\"auth-config.auth-drawer-unconnected.enable-insecure-email-lookup-description\">\n            Allow users to use the same email address to log into Grafana with different identity providers.\n          </Trans>\n        </Text>\n        <Switch value={allowInsecureEmail} onChange={oauthAllowInsecureEmailLookupOnChange} />\n      </div>\n      <Button\n        size=\"md\"\n        variant=\"secondary\"\n        className={styles.button}\n        onClick={resetButtonOnClick}\n        tooltip={t(\n          'auth-config.auth-drawer-unconnected.reset-tooltip',\n          'This action will disregard any saved changes and load the configuration from the configuration file.'\n        )}\n      >\n        <Trans i18nKey=\"auth-config.auth-drawer-unconnected.reset\">Reset</Trans>\n      </Button>\n    </Drawer>\n  );\n};\n\nexport default connector(AuthDrawerUnconnected);\n\nconst getStyles = (theme: GrafanaTheme2) => {\n  return {\n    advancedAuth: css({\n      display: 'flex',\n      flexDirection: 'column',\n      gap: theme.spacing(1),\n    }),\n    button: css({\n      marginTop: theme.spacing(2),\n    }),\n  };\n};\n","import { css } from '@emotion/css';\nimport * as React from 'react';\n\nimport { GrafanaTheme2 } from '@grafana/data';\nimport { Trans } from '@grafana/i18n';\nimport { Icon, Stack, Text, TextLink, useStyles2 } from '@grafana/ui';\n\nexport interface Props {}\n\nconst ConfigureAuthCTA: React.FunctionComponent<Props> = () => {\n  const styles = useStyles2(getStyles);\n  return (\n    <div className={styles.container}>\n      <Stack gap={1} alignItems={'center'}>\n        <Icon name={'cog'} />\n        <Text>\n          <Trans i18nKey=\"auth-config.configure-auth-cta.configuration-required\">Configuration required</Trans>\n        </Text>\n      </Stack>\n      <Text variant={'bodySmall'} color={'secondary'}>\n        <Trans i18nKey=\"auth-config.configure-auth-cta.authentication-configuration-created-moment\">\n          You have no authentication configuration created at the moment.\n        </Trans>\n      </Text>\n      <TextLink href={'https://grafana.com/docs/grafana/latest/auth/overview/'} external>\n        <Trans i18nKey=\"auth-config.configure-auth-cta.refer-documentation-configure-authentication\">\n          Refer to the documentation on how to configure authentication\n        </Trans>\n      </TextLink>\n    </div>\n  );\n};\n\nconst getStyles = (theme: GrafanaTheme2) => {\n  return {\n    container: css({\n      display: 'flex',\n      flexDirection: 'column',\n      gap: theme.spacing(2),\n      backgroundColor: theme.colors.background.secondary,\n      borderRadius: theme.shape.radius.default,\n      padding: theme.spacing(3),\n      width: 'max-content',\n      margin: theme.spacing(3, 'auto'),\n    }),\n  };\n};\n\nexport default ConfigureAuthCTA;\n","import { isIconName } from '@grafana/data';\nimport { t } from '@grafana/i18n';\nimport { Badge, Card, Icon, TextLink } from '@grafana/ui';\nimport { CloudEnterpriseBadge } from 'app/core/components/Branding/CloudEnterpriseBadge';\n\nimport { UIMap } from '../constants';\nimport { getProviderUrl } from '../utils/url';\n\ntype Props = {\n  providerId: string;\n  enabled: boolean;\n  configPath?: string;\n  authType?: string;\n  onClick?: () => void;\n};\n\nexport function ProviderCard({ providerId, enabled, configPath, authType, onClick }: Props) {\n  //@ts-expect-error\n  const url = getProviderUrl({ configPath, id: providerId });\n  const [iconName, displayName] = UIMap[providerId] || ['lock', providerId.toUpperCase()];\n  return (\n    <Card href={url} onClick={onClick} noMargin>\n      <Card.Heading>{displayName}</Card.Heading>\n      <Card.Meta>{authType}</Card.Meta>\n      {isIconName(iconName) && (\n        <Card.Figure>\n          <Icon name={iconName} size={'xxxl'} />\n        </Card.Figure>\n      )}\n      <Card.Actions>\n        <Badge\n          text={\n            enabled\n              ? t('auth-config.provider-card.text-badge-enabled', 'Enabled')\n              : t('auth-config.provider-card.text-badge-not-enabled', 'Not enabled')\n          }\n          color={enabled ? 'green' : 'blue'}\n        />\n      </Card.Actions>\n    </Card>\n  );\n}\n\nexport function ProviderSAMLCard() {\n  return (\n    <Card noMargin>\n      {/* eslint-disable-next-line @grafana/i18n/no-untranslated-strings */}\n      <Card.Heading>SAML</Card.Heading>\n      <Card.Meta>\n        <TextLink\n          external\n          variant=\"bodySmall\"\n          color=\"secondary\"\n          href=\"https://grafana.com/auth/sign-up/create-user?cloud-auth=&redirectPath=cloud-auth&utm_source=oss-grafana&cnt=admin-authorization-saml\"\n        >\n          {t('auth-config.provider-card.saml-learn-more', 'Single sign-on (SSO) with SAML.')}\n        </TextLink>\n      </Card.Meta>\n      <Card.Figure>\n        <Icon name=\"lock\" size={'xxxl'} />\n      </Card.Figure>\n      <Card.Actions>\n        <CloudEnterpriseBadge />\n      </Card.Actions>\n    </Card>\n  );\n}\n\nexport function ProviderSCIMCard() {\n  return (\n    <Card noMargin>\n      {/* eslint-disable-next-line @grafana/i18n/no-untranslated-strings */}\n      <Card.Heading>SCIM</Card.Heading>\n      <Card.Meta>\n        <div>\n          <TextLink\n            external\n            variant=\"bodySmall\"\n            color=\"secondary\"\n            href=\"https://grafana.com/auth/sign-up/create-user?cloud-auth=&redirectPath=cloud-auth&utm_source=oss-grafana&cnt=admin-authorization-scim\"\n          >\n            {t('auth-config.provider-card.scim-learn-more', ' Sync users and teams with SCIM.')}\n          </TextLink>\n        </div>\n      </Card.Meta>\n      <Card.Figure>\n        <Icon name=\"sync\" size={'xxxl'} />\n      </Card.Figure>\n      <Card.Actions>\n        <CloudEnterpriseBadge />\n      </Card.Actions>\n    </Card>\n  );\n}\n","import { JSX, useEffect, useState } from 'react';\nimport { connect, ConnectedProps } from 'react-redux';\n\nimport { GrafanaEdition } from '@grafana/data/internal';\nimport { Trans } from '@grafana/i18n';\nimport { reportInteraction } from '@grafana/runtime';\nimport { Grid, TextLink, ToolbarButton } from '@grafana/ui';\nimport { Page } from 'app/core/components/Page/Page';\nimport { config } from 'app/core/config';\nimport { StoreState } from 'app/types/store';\n\nimport AuthDrawer from './AuthDrawer';\nimport ConfigureAuthCTA from './components/ConfigureAuthCTA';\nimport { ProviderCard, ProviderSAMLCard, ProviderSCIMCard } from './components/ProviderCard';\nimport { loadSettings } from './state/actions';\n\nimport { getRegisteredAuthProviders } from './index';\n\ninterface OwnProps {}\n\nexport type Props = OwnProps & ConnectedProps<typeof connector>;\n\nfunction mapStateToProps(state: StoreState) {\n  const { isLoading, providerStatuses, providers } = state.authConfig;\n  return {\n    isLoading,\n    providerStatuses,\n    providers,\n  };\n}\n\nconst mapDispatchToProps = {\n  loadSettings,\n};\n\nconst connector = connect(mapStateToProps, mapDispatchToProps);\n\nexport const AuthConfigPageUnconnected = ({\n  providerStatuses,\n  isLoading,\n  loadSettings,\n  providers,\n}: Props): JSX.Element => {\n  useEffect(() => {\n    loadSettings();\n  }, [loadSettings]);\n\n  const [showDrawer, setShowDrawer] = useState(false);\n  const authProviders = getRegisteredAuthProviders();\n  const availableProviders = authProviders.filter((p) => !providerStatuses[p.id]?.hide);\n  const onProviderCardClick = (providerType: string, enabled: boolean) => {\n    reportInteraction('authentication_ui_provider_clicked', { provider: providerType, enabled });\n  };\n\n  // filter out saml from sso providers because it is already included in availableProviders\n  providers = providers.filter((p) => p.provider !== 'saml');\n\n  providers = providers.map((p) => {\n    if (p.provider === 'ldap') {\n      return {\n        ...p,\n        settings: {\n          ...p.settings,\n          type: 'LDAP',\n        },\n      };\n    }\n    return p;\n  });\n\n  const providerList = availableProviders.length\n    ? [\n        ...availableProviders.map((p) => ({\n          provider: p.id,\n          settings: { ...providerStatuses[p.id], configPath: p.configPath, type: p.type },\n        })),\n        ...providers,\n      ]\n    : providers;\n  return (\n    <Page\n      navId=\"authentication\"\n      subTitle={\n        <Trans i18nKey=\"auth-config-auth-config-page-unconnected.subtitle\">\n          Manage your auth settings and configure single sign-on. Find out more in our{' '}\n          <TextLink\n            external={true}\n            href=\"https://grafana.com/docs/grafana/next/setup-grafana/configure-security/configure-authentication\"\n          >\n            documentation\n          </TextLink>\n          .\n        </Trans>\n      }\n      actions={\n        config.buildInfo.edition !== GrafanaEdition.OpenSource && (\n          <ToolbarButton icon=\"cog\" variant=\"canvas\" onClick={() => setShowDrawer(true)}>\n            <Trans i18nKey=\"auth-config.auth-config-page-unconnected.auth-settings\">Auth settings</Trans>\n          </ToolbarButton>\n        )\n      }\n    >\n      <Page.Contents isLoading={isLoading}>\n        {!providerList.length ? (\n          <ConfigureAuthCTA />\n        ) : (\n          <Grid gap={3} minColumnWidth={34}>\n            {providerList\n              // Temporarily filter out providers that don't have the UI implemented\n              .filter(({ provider }) => !['grafana_com'].includes(provider))\n              .map(({ provider, settings }) => (\n                <ProviderCard\n                  key={provider}\n                  authType={settings.type || 'OAuth'}\n                  providerId={provider}\n                  enabled={settings.enabled}\n                  onClick={() => onProviderCardClick(provider, settings.enabled)}\n                  //@ts-expect-error Remove legacy types\n                  configPath={settings.configPath}\n                />\n              ))}\n            {config.buildInfo.edition === GrafanaEdition.OpenSource && (\n              <>\n                <ProviderSAMLCard />\n                <ProviderSCIMCard />\n              </>\n            )}\n            {showDrawer && <AuthDrawer onClose={() => setShowDrawer(false)}></AuthDrawer>}\n          </Grid>\n        )}\n      </Page.Contents>\n    </Page>\n  );\n};\n\nexport default connector(AuthConfigPageUnconnected);\n","import { BASE_PATH } from '../constants';\nimport { AuthProviderInfo } from '../types';\n\nexport function getProviderUrl(provider: AuthProviderInfo) {\n  return BASE_PATH + (provider.configPath || provider.id);\n}\n\nexport const isUrlValid = (url: unknown): boolean => {\n  if (typeof url !== 'string') {\n    return false;\n  }\n  try {\n    const parsedUrl = new URL(url);\n    return parsedUrl.protocol.includes('http');\n  } catch (_) {\n    return false;\n  }\n};\n\nexport const isValidDomain = (domain: string): boolean => {\n  if (typeof domain !== 'string' || !domain.length) {\n    return false;\n  }\n\n  const domainRegex =\n    /^[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*\\.[a-zA-Z]{2,6}$/;\n  return domainRegex.test(domain);\n};\n","import { useForm } from 'react-hook-form';\n\nimport { Trans, t } from '@grafana/i18n';\nimport { Button, Input, Field, Modal } from '@grafana/ui';\n\nimport { ServerDiscoveryFormData } from '../types';\nimport { isUrlValid } from '../utils/url';\n\ninterface Props {\n  isOpen: boolean | undefined;\n  onClose: () => void;\n  onSuccess: (data: ServerDiscoveryFormData) => void;\n  isLoading: boolean;\n}\n\nexport const ServerDiscoveryModal = ({ isOpen, onClose, onSuccess, isLoading }: Props) => {\n  const {\n    handleSubmit,\n    register,\n    formState: { errors },\n  } = useForm({\n    mode: 'onBlur',\n    defaultValues: {\n      url: '',\n    },\n  });\n\n  const validateUrl = (value?: string) => {\n    if (value === '') {\n      return 'Please enter the .well-known/openid-configuration endpoint for your IdP';\n    }\n\n    if (!isUrlValid(value)) {\n      return 'Please enter a valid URL';\n    }\n\n    return true;\n  };\n\n  return (\n    <Modal\n      title={t(\n        'auth-config.server-discovery-modal.title-open-id-connect-discovery-url',\n        'OpenID Connect Discovery URL'\n      )}\n      onDismiss={onClose}\n      onClickBackdrop={onClose}\n      isOpen={isOpen}\n    >\n      <form\n        onSubmit={(e) => {\n          e.stopPropagation();\n          return handleSubmit(onSuccess)(e);\n        }}\n      >\n        <Field\n          label={t(\n            'auth-config.server-discovery-modal.label-the-wellknownopenidconfiguration-endpoint-for-your-id-p',\n            'The .well-known/openid-configuration endpoint for your IdP'\n          )}\n          invalid={!!errors.url}\n          error={errors.url?.message}\n          htmlFor=\"url\"\n        >\n          <Input {...register('url', { validate: validateUrl })} width={80} id=\"url\" />\n        </Field>\n        <Modal.ButtonRow>\n          <Button type=\"submit\" variant=\"primary\" disabled={isLoading}>\n            {isLoading ? (\n              <Trans i18nKey={'oauth.form.server-discovery-modal-loading'}>Loading...</Trans>\n            ) : (\n              <Trans i18nKey={'oauth.form.server-discovery-modal-submit'}>Submit</Trans>\n            )}\n          </Button>\n          <Button type=\"button\" variant=\"secondary\" onClick={onClose}>\n            <Trans i18nKey={'oauth.form.server-discovery-modal-close'}>Close</Trans>\n          </Button>\n        </Modal.ButtonRow>\n      </form>\n    </Modal>\n  );\n};\n","import { useState } from 'react';\nimport { UseFormSetValue } from 'react-hook-form';\n\nimport { AppEvents } from '@grafana/data';\nimport { Trans } from '@grafana/i18n';\nimport { getAppEvents, getBackendSrv } from '@grafana/runtime';\nimport { Button } from '@grafana/ui';\n\nimport { ServerDiscoveryFormData, SSOProviderDTO } from '../types';\n\nimport { ServerDiscoveryModal } from './ServerDiscoveryModal';\n\ninterface Props {\n  setValue: UseFormSetValue<SSOProviderDTO>;\n}\n\nexport const ServerDiscoveryField = ({ setValue }: Props) => {\n  const appEvents = getAppEvents();\n  const [isModalOpen, setModalVisibility] = useState(false);\n  const [isLoading, setLoading] = useState(false);\n\n  const onClose = () => setModalVisibility(false);\n  const onSuccess = async (data: ServerDiscoveryFormData) => {\n    setLoading(true);\n    try {\n      const wellKnownSuffix = '/.well-known/openid-configuration';\n      const url = new URL(data.url);\n      if (!url.pathname.includes(wellKnownSuffix)) {\n        data.url = url.origin + wellKnownSuffix;\n      }\n\n      const res = await getBackendSrv().get(data.url);\n\n      if (!res['token_endpoint'] || !res['authorization_endpoint']) {\n        appEvents.publish({\n          type: AppEvents.alertWarning.name,\n          payload: ['The URL provided is not a valid .well-known/openid-configuration endpoint'],\n        });\n        return;\n      }\n\n      setValue('tokenUrl', res['token_endpoint']);\n      setValue('authUrl', res['authorization_endpoint']);\n      if (res['userinfo_endpoint']) {\n        setValue('apiUrl', res['userinfo_endpoint']);\n      }\n\n      appEvents.publish({\n        type: AppEvents.alertSuccess.name,\n        payload: ['OpenID Connect Discovery URL has been successfully fetched.'],\n      });\n    } catch (error) {\n      appEvents.publish({\n        type: AppEvents.alertWarning.name,\n        payload: ['Failed to fetch URL or invalid content'],\n      });\n    } finally {\n      onClose();\n      setLoading(false);\n    }\n  };\n  return (\n    <>\n      <Button\n        type=\"button\"\n        variant=\"secondary\"\n        onClick={() => {\n          setModalVisibility(true);\n        }}\n      >\n        <Trans i18nKey={'oauth.form.server-discovery-action-button'}>Enter OpenID Connect Discovery URL</Trans>\n      </Button>\n      <ServerDiscoveryModal isOpen={isModalOpen} onClose={onClose} onSuccess={onSuccess} isLoading={isLoading} />\n    </>\n  );\n};\n","import { SelectableValue } from '@grafana/data';\n\nexport function isSelectableValueArray(value: unknown): value is SelectableValue[] {\n  return Array.isArray(value) && value.every((v) => typeof v === 'object' && v !== null && 'value' in v);\n}\n\nexport function isSelectableValue<T>(value: unknown): value is SelectableValue<T> {\n  return typeof value === 'object' && value !== null && 'value' in value;\n}\n","import { validate as uuidValidate } from 'uuid';\n\nimport { SelectableValue } from '@grafana/data';\nimport { Trans, t } from '@grafana/i18n';\nimport { config } from '@grafana/runtime';\nimport { TextLink } from '@grafana/ui';\nimport { contextSrv } from 'app/core/core';\n\nimport { ServerDiscoveryField } from './components/ServerDiscoveryField';\nimport { FieldData, SSOProvider, SSOSettingsField } from './types';\nimport { isSelectableValue, isSelectableValueArray } from './utils/guards';\nimport { isUrlValid, isValidDomain } from './utils/url';\n\ntype Section = Record<\n  SSOProvider['provider'],\n  Array<{\n    name: string;\n    id: string;\n    hidden?: boolean;\n    fields: SSOSettingsField[];\n  }>\n>;\n\nexport const getSectionFields = (): Section => {\n  const generalSettingsLabel = t('auth-config.fields.section-general-settings', 'General settings');\n  const userMappingLabel = t('auth-config.fields.section-user-mapping', 'User mapping');\n  const extraSecurityLabel = t('auth-config.fields.section-extra-security', 'Extra security measures');\n\n  return {\n    azuread: [\n      {\n        name: generalSettingsLabel,\n        id: 'general',\n        fields: [\n          'name',\n          'clientAuthentication',\n          'clientId',\n          'clientSecret',\n          'managedIdentityClientId',\n          'federatedCredentialAudience',\n          'scopes',\n          'authUrl',\n          'tokenUrl',\n          'allowSignUp',\n          'autoLogin',\n          'signoutRedirectUrl',\n          'loginPrompt',\n        ],\n      },\n      {\n        name: userMappingLabel,\n        id: 'user',\n        fields: ['roleAttributeStrict', 'orgMapping', 'allowAssignGrafanaAdmin', 'skipOrgRoleSync'],\n      },\n      {\n        name: extraSecurityLabel,\n        id: 'extra',\n        fields: [\n          'allowedOrganizations',\n          'allowedDomains',\n          'allowedGroups',\n          'forceUseGraphApi',\n          'domainHint',\n          'usePkce',\n          'useRefreshToken',\n          'tlsSkipVerifyInsecure',\n          'tlsClientCert',\n          'tlsClientKey',\n          'tlsClientCa',\n          'workloadIdentityTokenFile',\n        ],\n      },\n    ],\n    generic_oauth: [\n      {\n        name: generalSettingsLabel,\n        id: 'general',\n        fields: [\n          'name',\n          'clientId',\n          'clientSecret',\n          'authStyle',\n          'scopes',\n          'serverDiscoveryUrl',\n          'authUrl',\n          'tokenUrl',\n          'apiUrl',\n          'allowSignUp',\n          'autoLogin',\n          'signoutRedirectUrl',\n          'loginPrompt',\n        ],\n      },\n      {\n        name: userMappingLabel,\n        id: 'user',\n        fields: [\n          'nameAttributePath',\n          'loginAttributePath',\n          'emailAttributeName',\n          'emailAttributePath',\n          'idTokenAttributeName',\n          'roleAttributePath',\n          'roleAttributeStrict',\n          'orgMapping',\n          'orgAttributePath',\n          'allowAssignGrafanaAdmin',\n          'skipOrgRoleSync',\n        ],\n      },\n      {\n        name: extraSecurityLabel,\n        id: 'extra',\n        fields: [\n          'allowedOrganizations',\n          'allowedDomains',\n          'defineAllowedGroups',\n          { name: 'allowedGroups', dependsOn: 'defineAllowedGroups' },\n          { name: 'groupsAttributePath', dependsOn: 'defineAllowedGroups' },\n          'defineAllowedTeamsIds',\n          { name: 'teamIds', dependsOn: 'defineAllowedTeamsIds' },\n          { name: 'teamsUrl', dependsOn: 'defineAllowedTeamsIds' },\n          { name: 'teamIdsAttributePath', dependsOn: 'defineAllowedTeamsIds' },\n          'usePkce',\n          'useRefreshToken',\n          'tlsSkipVerifyInsecure',\n          'tlsClientCert',\n          'tlsClientKey',\n          'tlsClientCa',\n        ],\n      },\n    ],\n    google: [\n      {\n        name: generalSettingsLabel,\n        id: 'general',\n        fields: [\n          'name',\n          'clientId',\n          'clientSecret',\n          'scopes',\n          'allowSignUp',\n          'autoLogin',\n          'signoutRedirectUrl',\n          'loginPrompt',\n        ],\n      },\n      {\n        name: userMappingLabel,\n        id: 'user',\n        fields: [\n          'roleAttributePath',\n          'roleAttributeStrict',\n          'orgMapping',\n          'allowAssignGrafanaAdmin',\n          'skipOrgRoleSync',\n        ],\n      },\n      {\n        name: extraSecurityLabel,\n        id: 'extra',\n        fields: [\n          'validateHd',\n          'hostedDomain',\n          'allowedDomains',\n          'allowedGroups',\n          'usePkce',\n          'useRefreshToken',\n          'tlsSkipVerifyInsecure',\n          'tlsClientCert',\n          'tlsClientKey',\n          'tlsClientCa',\n        ],\n      },\n    ],\n    github: [\n      {\n        name: generalSettingsLabel,\n        id: 'general',\n        fields: [\n          'name',\n          'clientId',\n          'clientSecret',\n          'scopes',\n          'allowSignUp',\n          'autoLogin',\n          'signoutRedirectUrl',\n          'loginPrompt',\n        ],\n      },\n      {\n        name: userMappingLabel,\n        id: 'user',\n        fields: [\n          'roleAttributePath',\n          'roleAttributeStrict',\n          'orgMapping',\n          'allowAssignGrafanaAdmin',\n          'skipOrgRoleSync',\n        ],\n      },\n      {\n        name: extraSecurityLabel,\n        id: 'extra',\n        fields: [\n          'allowedOrganizations',\n          'allowedDomains',\n          'teamIds',\n          'usePkce',\n          'useRefreshToken',\n          'tlsSkipVerifyInsecure',\n          'tlsClientCert',\n          'tlsClientKey',\n          'tlsClientCa',\n        ],\n      },\n    ],\n    gitlab: [\n      {\n        name: generalSettingsLabel,\n        id: 'general',\n        fields: [\n          'name',\n          'clientId',\n          'clientSecret',\n          'scopes',\n          'allowSignUp',\n          'autoLogin',\n          'signoutRedirectUrl',\n          'loginPrompt',\n        ],\n      },\n      {\n        name: userMappingLabel,\n        id: 'user',\n        fields: [\n          'roleAttributePath',\n          'roleAttributeStrict',\n          'orgMapping',\n          'allowAssignGrafanaAdmin',\n          'skipOrgRoleSync',\n        ],\n      },\n      {\n        name: extraSecurityLabel,\n        id: 'extra',\n        fields: [\n          'allowedDomains',\n          'allowedGroups',\n          'usePkce',\n          'useRefreshToken',\n          'tlsSkipVerifyInsecure',\n          'tlsClientCert',\n          'tlsClientKey',\n          'tlsClientCa',\n        ],\n      },\n    ],\n    okta: [\n      {\n        name: generalSettingsLabel,\n        id: 'general',\n        fields: [\n          'name',\n          'clientId',\n          'clientSecret',\n          'scopes',\n          'authUrl',\n          'tokenUrl',\n          'apiUrl',\n          'allowSignUp',\n          'autoLogin',\n          'signoutRedirectUrl',\n        ],\n      },\n      {\n        name: userMappingLabel,\n        id: 'user',\n        fields: [\n          'roleAttributePath',\n          'roleAttributeStrict',\n          'orgMapping',\n          'orgAttributePath',\n          'allowAssignGrafanaAdmin',\n          'skipOrgRoleSync',\n        ],\n      },\n      {\n        name: extraSecurityLabel,\n        id: 'extra',\n        fields: [\n          'allowedDomains',\n          'allowedGroups',\n          'usePkce',\n          'useRefreshToken',\n          'tlsSkipVerifyInsecure',\n          'tlsClientCert',\n          'tlsClientKey',\n          'tlsClientCa',\n        ],\n      },\n    ],\n  };\n};\n\n// These field names should not be translated because they refer to specific technical terminology.\n// We put them in variables so they can be referred to in otherwise translated descriptions and not\n// risk being translated.\nconst clientIDLabel = 'Client ID';\nconst clientSecretLabel = 'Client secret';\nconst scopesLabel = 'Scopes';\nconst openIDConnectDiscoveryLabel = 'OpenID Connect Discovery URL';\nconst authURLLabel = 'Auth URL';\nconst tokenURLLabel = 'Token URL';\nconst apiURLLabel = 'API URL';\nconst jmesPathLabel = 'JMESPath';\nconst workloadIdentityLabel = 'Workload identity';\n\n/**\n * List all the fields that can be used in the form\n */\nexport function fieldMap(provider: string): Record<string, FieldData> {\n  const orgMappingLabel = t('auth-config.fields.organization-mapping-label', 'Organization mapping');\n  const orgAttributePathLabel = t(\n    'auth-config.fields.organization-attribute-path-label',\n    'Organization attribute path'\n  );\n\n  const teamsURLLabel = t('auth-config.fields.teams-url-label', 'Teams URL');\n  const teamIDsAttributePathLabel = t('auth-config.fields.team-ids-attribute-path-label', 'Team IDs attribute path');\n\n  const allowedGroupsLabel = t('auth-config.fields.allowed-groups-label', 'Allowed groups');\n  const groupsAttributePathLabel = t('auth-config.fields.groups-attribute-path-label', 'Groups attribute path');\n  const teamIDsLabel = t('auth-config.fields.team-ids-label', 'Team IDs');\n  const allowedDomainsLabel = t('auth-config.fields.allowed-domains-label', 'Allowed domains');\n\n  return {\n    clientAuthentication: {\n      label: t('auth-config.fields.client-authentication-label', 'Client authentication'),\n      type: 'select',\n      description: t(\n        'auth-config.fields.client-authentication-description',\n        'The client authentication method used to authenticate to the token endpoint.'\n      ),\n      multi: false,\n      options: clientAuthenticationOptions(provider),\n      defaultValue: { value: 'none', label: t('auth-config.field-map.label.none', 'None') },\n      validation: {\n        required: true,\n        message: t('auth-config.fields.required', 'This field is required'),\n      },\n    },\n    clientId: {\n      label: clientIDLabel,\n      type: 'text',\n      description: t('auth-config.fields.client-id-description', 'The {{ clientIDLabel }} of your OAuth2 app.', {\n        clientIDLabel,\n      }),\n      validation: {\n        required: true,\n        message: t('auth-config.fields.required', 'This field is required'),\n      },\n    },\n    clientSecret: {\n      label: clientSecretLabel,\n      type: 'secret',\n      description: t(\n        'auth-config.fields.client-secret-description',\n        'The {{ clientSecretLabel }} of your OAuth2 app.',\n        {\n          clientSecretLabel,\n        }\n      ),\n    },\n    managedIdentityClientId: {\n      label: t('auth-config.fields.managed-identity-client-id-label', 'FIC managed identity client ID'),\n      type: 'text',\n      description: t(\n        'auth-config.fields.managed-identity-client-id-description',\n        'The managed identity client ID of the federated identity credential of your OAuth2 app.'\n      ),\n    },\n    federatedCredentialAudience: {\n      label: t('auth-config.fields.federated-credential-audience-label', 'FIC audience'),\n      type: 'text',\n      description: t(\n        'auth-config.fields.federated-credential-audience-description',\n        'The audience of the federated identity credential of your OAuth2 app.'\n      ),\n    },\n    workloadIdentityTokenFile: {\n      label: t('auth-config.fields.workload-identity-token-file-label', '{{ workloadIdentityLabel }} token file', {\n        workloadIdentityLabel,\n      }),\n      type: 'text',\n      description: t(\n        'auth-config.fields.workload-identity-token-file-description',\n        'The file path to the token file used to authenticate to the OAuth2 provider. This is only required when client authentication is set to \"workload_identity\". Defaults to /var/run/secrets/azure/tokens/azure-identity-token.'\n      ),\n      validation: {\n        validate: (value, formValues) => {\n          let clientAuth = formValues.clientAuthentication;\n          if (isSelectableValue<string>(clientAuth)) {\n            clientAuth = clientAuth.value;\n          }\n          if (clientAuth === 'workload_identity') {\n            return !!value;\n          }\n          return true;\n        },\n        message: t(\n          'auth-config.fields.workload-identity-token-file-required',\n          'This field must be set when client authentication is set to \"Workload identity\".'\n        ),\n      },\n    },\n    allowedOrganizations: {\n      label: t('auth-config.fields.allowed-organizations-label', 'Allowed organizations'),\n      type: 'select',\n      description: t(\n        'auth-config.fields.allowed-organizations-description',\n        'List of comma- or space-separated organizations. The user should be a member \\nof at least one organization to log in.'\n      ),\n      multi: true,\n      allowCustomValue: true,\n      options: [],\n      placeholder: t(\n        'auth-config.fields.allowed-organizations-placeholder',\n        'Enter organizations (my-team, myteam...) and press Enter to add'\n      ),\n    },\n    allowedDomains: {\n      label: allowedDomainsLabel,\n      type: 'select',\n      description: t(\n        'auth-config.fields.allowed-domains-description',\n        'List of comma- or space-separated domains. The user should belong to at least \\none domain to log in.'\n      ),\n      multi: true,\n      allowCustomValue: true,\n      options: [],\n    },\n    authUrl: {\n      label: authURLLabel,\n      type: 'text',\n      description: t('auth-config.fields.auth-url-description', 'The authorization endpoint of your OAuth2 provider.'),\n      validation: {\n        required: true,\n        validate: (value) => {\n          return isUrlValid(value);\n        },\n        message: t('auth-config.fields.auth-url-required', 'This field is required and must be a valid URL.'),\n      },\n    },\n    authStyle: {\n      label: t('auth-config.fields.auth-style-label', 'Auth style'),\n      type: 'select',\n      description: t(\n        'auth-config.fields.auth-style-description',\n        'It determines how \"{{ clientIDLabel }}\" and \"{{ clientSecretLabel }}\" are sent to Oauth2 provider. Default is AutoDetect.',\n        { clientIDLabel, clientSecretLabel }\n      ),\n      multi: false,\n      options: [\n        /* eslint-disable @grafana/i18n/no-untranslated-strings */\n        { value: 'AutoDetect', label: 'AutoDetect' },\n        { value: 'InParams', label: 'InParams' },\n        { value: 'InHeader', label: 'InHeader' },\n      ],\n      defaultValue: { value: 'AutoDetect', label: 'AutoDetect' },\n      /* eslint-enable @grafana/i18n/no-untranslated-strings */\n    },\n    tokenUrl: {\n      label: tokenURLLabel,\n      type: 'text',\n      description: t('auth-config.fields.token-url-description', 'The token endpoint of your OAuth2 provider.'),\n      validation: {\n        required: true,\n        validate: (value) => {\n          return isUrlValid(value);\n        },\n        message: t('auth-config.fields.token-url-required', 'This field is required and must be a valid URL.'),\n      },\n    },\n    scopes: {\n      label: scopesLabel,\n      type: 'select',\n      description: t(\n        'auth-config.fields.scopes-description',\n        'List of comma- or space-separated OAuth2 {{ scopesLabel }}.',\n        {\n          scopesLabel,\n        }\n      ),\n      multi: true,\n      allowCustomValue: true,\n      options: [],\n    },\n    allowedGroups: {\n      label: allowedGroupsLabel,\n      type: 'select',\n      description: (\n        <>\n          <Trans i18nKey=\"auth-config.fields.allowed-groups-description\">\n            List of comma- or space-separated groups. The user should be a member of at least one group to log in.\n          </Trans>{' '}\n          {provider === 'generic_oauth' &&\n            t(\n              'auth-config.fields.allowed-groups-description-oauth',\n              'If you configure \"{{ allowedGroupsLabel }}\", you must also configure \"{{ groupsAttributePathLabel }}\".',\n              { allowedGroupsLabel, groupsAttributePathLabel }\n            )}\n        </>\n      ),\n      multi: true,\n      allowCustomValue: true,\n      options: [],\n      validation:\n        provider === 'azuread'\n          ? {\n              validate: (value) => {\n                if (typeof value === 'string') {\n                  return uuidValidate(value);\n                }\n                if (isSelectableValueArray(value)) {\n                  return value.every((v) => v?.value && uuidValidate(v.value));\n                }\n                return true;\n              },\n              message: t(\n                'auth-config.fields.allowed-groups-object-ids',\n                '{{ allowedGroupsLabel }} must be {{ objectIDsField }}.',\n                {\n                  objectIDsField: 'Object IDs',\n                }\n              ),\n            }\n          : undefined,\n    },\n    apiUrl: {\n      label: apiURLLabel,\n      type: 'text',\n      description: (\n        <Trans i18nKey=\"auth-config.fields.api-url-description\">\n          The user information endpoint of your OAuth2 provider. Information returned by this endpoint must be\n          compatible with{' '}\n          <TextLink href={'https://connect2id.com/products/server/docs/api/userinfo'} external variant={'bodySmall'}>\n            OpenID UserInfo\n          </TextLink>\n          .\n        </Trans>\n      ),\n      validation: {\n        required: false,\n        validate: (value) => {\n          if (typeof value !== 'string') {\n            return false;\n          }\n\n          if (value.length) {\n            return isUrlValid(value);\n          }\n\n          return true;\n        },\n        message: t('auth-config.fields.api-url-required', 'This field must be a valid URL if set.'),\n      },\n    },\n    roleAttributePath: {\n      label: t('auth-config.fields.role-attribute-path-label', 'Role attribute path'),\n      description: t(\n        'auth-config.fields.role-attribute-path-description',\n        '{{ jmesPathLabel }} expression to use for Grafana role lookup.',\n        { jmesPathLabel }\n      ),\n      type: 'text',\n      validation: {\n        required: false,\n      },\n    },\n    name: {\n      label: t('auth-config.fields.display-name-label', 'Display name'),\n      description: t(\n        'auth-config.fields.display-name-description',\n        'Will be displayed on the login page as \"Sign in with ...\". Helpful if you use more than one identity providers or SSO protocols.'\n      ),\n      type: 'text',\n    },\n    allowSignUp: {\n      label: t('auth-config.fields.allow-sign-up-label', 'Allow sign up'),\n      description: t(\n        'auth-config.fields.allow-sign-up-description',\n        'If not enabled, only existing Grafana users can log in using OAuth.'\n      ),\n      type: 'switch',\n    },\n    autoLogin: {\n      label: t('auth-config.fields.auto-login-label', 'Auto login'),\n      description: t('auth-config.fields.auto-login-description', 'Log in automatically, skipping the login screen.'),\n      type: 'switch',\n    },\n    signoutRedirectUrl: {\n      label: t('auth-config.fields.signout-redirect-url-label', 'Sign out redirect URL'),\n      description: t(\n        'auth-config.fields.signout-redirect-url-description',\n        'The URL to redirect the user to after signing out from Grafana.'\n      ),\n      type: 'text',\n      validation: {\n        required: false,\n      },\n    },\n    emailAttributeName: {\n      label: t('auth-config.fields.email-attribute-name-label', 'Email attribute name'),\n      description: t(\n        'auth-config.fields.email-attribute-name-description',\n        'Name of the key to use for user email lookup within the attributes map of OAuth2 ID token.'\n      ),\n      type: 'text',\n    },\n    emailAttributePath: {\n      label: t('auth-config.fields.email-attribute-path-label', 'Email attribute path'),\n      description: t(\n        'auth-config.fields.email-attribute-path-description',\n        'JMESPath expression to use for user email lookup from the user information.'\n      ),\n      type: 'text',\n    },\n    nameAttributePath: {\n      label: t('auth-config.fields.name-attribute-path-label', 'Name attribute path'),\n      description: t(\n        'auth-config.fields.name-attribute-path-description',\n        \"JMESPath expression to use for user name lookup from the user ID token. \\nThis name will be used as the user's display name.\"\n      ),\n      type: 'text',\n    },\n    loginAttributePath: {\n      label: t('auth-config.fields.login-attribute-path-label', 'Login attribute path'),\n      description: t(\n        'auth-config.fields.login-attribute-path-description',\n        'JMESPath expression to use for user login lookup from the user ID token.'\n      ),\n      type: 'text',\n    },\n    idTokenAttributeName: {\n      label: t('auth-config.fields.id-token-attribute-name-label', 'ID token attribute name'),\n      description: t(\n        'auth-config.fields.id-token-attribute-name-description',\n        'The name of the key used to extract the ID token from the returned OAuth2 token.'\n      ),\n      type: 'text',\n    },\n    roleAttributeStrict: {\n      label: t('auth-config.fields.role-attribute-strict-label', 'Role attribute strict mode'),\n      description: t(\n        'auth-config.fields.role-attribute-strict-description',\n        'If enabled, denies user login if the Grafana role cannot be extracted using Role attribute path.'\n      ),\n      type: 'switch',\n    },\n    allowAssignGrafanaAdmin: {\n      label: t('auth-config.fields.allow-assign-grafana-admin-label', 'Allow assign Grafana admin'),\n      description: t(\n        'auth-config.fields.allow-assign-grafana-admin-description',\n        'If enabled, it will automatically sync the Grafana server administrator role.'\n      ),\n      type: 'switch',\n      hidden: !contextSrv.isGrafanaAdmin,\n    },\n    skipOrgRoleSync: {\n      label: t('auth-config.fields.skip-org-role-sync-label', 'Skip organization role sync'),\n      description: t(\n        'auth-config.fields.skip-org-role-sync-description',\n        \"Prevent synchronizing users' organization roles from your IdP.\"\n      ),\n      type: 'switch',\n    },\n    orgMapping: {\n      label: orgMappingLabel,\n      description: orgMappingDescription(provider),\n      type: 'select',\n      hidden: !contextSrv.isGrafanaAdmin,\n      multi: true,\n      allowCustomValue: true,\n      options: [],\n      placeholder: t(\n        'auth-config.fields.organization-mapping-placeholder',\n        'Enter mappings (my-team:1:Viewer...) and press Enter to add'\n      ),\n    },\n    orgAttributePath: {\n      label: orgAttributePathLabel,\n      description: t(\n        'auth-config.fields.organization-attribute-path-description',\n        'JMESPath expression to use for organization lookup. If you configure \"{{ orgMappingLabel }}\", you must also configure \"{{ orgAttributePathLabel }}\".',\n        { orgMappingLabel, orgAttributePathLabel }\n      ),\n      type: 'text',\n      hidden: !(['generic_oauth', 'okta'].includes(provider) && contextSrv.isGrafanaAdmin),\n    },\n    defineAllowedGroups: {\n      label: t('auth-config.fields.define-allowed-groups-label', 'Define allowed groups'),\n      type: 'switch',\n    },\n    defineAllowedTeamsIds: {\n      label: t('auth-config.fields.define-allowed-teams-ids-label', 'Define allowed teams IDs'),\n      type: 'switch',\n    },\n    forceUseGraphApi: {\n      label: t('auth-config.fields.force-use-graph-api-label', 'Force use Graph API'),\n      description: t(\n        'auth-config.fields.force-use-graph-api-description',\n        \"If enabled, Grafana will fetch the users' groups using the Microsoft Graph API.\"\n      ),\n      type: 'checkbox',\n    },\n    usePkce: {\n      label: t('auth-config.fields.use-pkce-label', 'Use PKCE'),\n      description: (\n        <Trans i18nKey=\"auth-config.fields.use-pkce-description\">\n          If enabled, Grafana will use{' '}\n          <TextLink external variant={'bodySmall'} href={'https://datatracker.ietf.org/doc/html/rfc7636'}>\n            Proof Key for Code Exchange (PKCE)\n          </TextLink>{' '}\n          with the OAuth2 Authorization Code Grant.\n        </Trans>\n      ),\n      type: 'checkbox',\n    },\n    useRefreshToken: {\n      label: t('auth-config.fields.use-refresh-token-label', 'Use refresh token'),\n      description: t(\n        'auth-config.fields.use-refresh-token-description',\n        'If enabled, Grafana will fetch a new access token using the refresh token provided by the OAuth2 provider.'\n      ),\n      type: 'checkbox',\n    },\n    tlsClientCa: {\n      label: t('auth-config.fields.tls-client-ca-label', 'TLS client CA'),\n      description: t(\n        'auth-config.fields.tls-client-ca-description',\n        'The file path to the trusted certificate authority list. Is not applicable on Grafana Cloud.'\n      ),\n      type: 'text',\n      hidden: !config.localFileSystemAvailable,\n    },\n    tlsClientCert: {\n      label: t('auth-config.fields.tls-client-cert-label', 'TLS client cert'),\n      description: t(\n        'auth-config.fields.tls-client-cert-description',\n        'The file path to the certificate. Is not applicable on Grafana Cloud.'\n      ),\n      type: 'text',\n      hidden: !config.localFileSystemAvailable,\n    },\n    tlsClientKey: {\n      label: t('auth-config.fields.tls-client-key-label', 'TLS client key'),\n      description: t(\n        'auth-config.fields.tls-client-key-description',\n        'The file path to the key. Is not applicable on Grafana Cloud.'\n      ),\n      type: 'text',\n      hidden: !config.localFileSystemAvailable,\n    },\n    tlsSkipVerifyInsecure: {\n      label: t('auth-config.fields.tls-skip-verify-label', 'TLS skip verify'),\n      description: t(\n        'auth-config.fields.tls-skip-verify-description',\n        'If enabled, the client accepts any certificate presented by the server and any host \\nname in that certificate. You should only use this for testing, because this mode leaves \\nSSL/TLS susceptible to man-in-the-middle attacks.'\n      ),\n      type: 'switch',\n    },\n    groupsAttributePath: {\n      label: groupsAttributePathLabel,\n      description: t(\n        'auth-config.fields.groups-attribute-path-description',\n        'JMESPath expression to use for user group lookup. If you configure \"{{ allowedGroupsLabel }}\", \\nyou must also configure \"{{ groupsAttributePathLabel }}\".',\n        { allowedGroupsLabel, groupsAttributePathLabel }\n      ),\n      type: 'text',\n    },\n    teamsUrl: {\n      label: teamsURLLabel,\n      description: (\n        <>\n          <Trans i18nKey=\"auth-config.fields.teams-url-description\">\n            The URL used to query for Team IDs. If not set, the default value is /teams.\n          </Trans>{' '}\n          {provider === 'generic_oauth' &&\n            t(\n              'auth-config.fields.teams-url-description-oauth',\n              'If you configure \"{{ teamsURLLabel }}\", you must also configure \"{{ teamIDsAttributePathLabel }}\".',\n              { teamsURLLabel, teamIDsAttributePathLabel }\n            )}\n        </>\n      ),\n      type: 'text',\n      validation: {\n        validate: (value, formValues) => {\n          let result = true;\n          if (formValues.teamIds.length) {\n            result = !!value;\n          }\n\n          if (typeof value === 'string' && value.length) {\n            result = isUrlValid(value);\n          }\n          return result;\n        },\n        message: t(\n          'auth-config.fields.teams-url-required',\n          'This field must be set if \"{{ teamIDsLabel }}\" are configured and must be a valid URL.',\n          { teamIDsLabel }\n        ),\n      },\n    },\n    teamIdsAttributePath: {\n      label: teamIDsAttributePathLabel,\n      description: t(\n        'auth-config.fields.team-ids-attribute-path-description',\n        'The JMESPath expression to use for Grafana Team ID lookup within the results returned by the \"{{ teamsURLLabel }}\" endpoint.',\n        { teamsURLLabel }\n      ),\n      type: 'text',\n      validation: {\n        validate: (value, formValues) => {\n          if (formValues.teamIds.length) {\n            return !!value;\n          }\n          return true;\n        },\n        message: t(\n          'auth-config.fields.team-ids-attribute-path-required',\n          'This field must be set if \"{{ teamIDsLabel }}\" are configured.',\n          { teamIDsLabel }\n        ),\n      },\n    },\n    teamIds: {\n      label: teamIDsLabel,\n      type: 'select',\n      description: (\n        <>\n          {provider === 'github'\n            ? t('auth-config.fields.team-ids-github', 'Integer list of Team IDs.')\n            : t('auth-config.fields.team-ids-other', 'String list of Team IDs.')}{' '}\n          <Trans i18nKey=\"auth-config.fields.team-ids-description\">\n            If set, the user must be a member of one of the given teams to log in.\n          </Trans>{' '}\n          {provider === 'generic_oauth' &&\n            t(\n              'auth-config.fields.team-ids-description-oauth',\n              'If you configure \"{{ teamIDsLabel }}\", you must also configure \"{{ teamsURLLabel }}\" and \"{{ teamIDsAttributePathLabel }}\".',\n              { teamIDsLabel, teamsURLLabel, teamIDsAttributePathLabel }\n            )}\n        </>\n      ),\n      multi: true,\n      allowCustomValue: true,\n      options: [],\n      placeholder: t('auth-config.fields.team-ids-placeholder', 'Enter Team IDs and press Enter to add'),\n      validation:\n        provider === 'github'\n          ? {\n              validate: (value) => {\n                if (typeof value === 'string') {\n                  return isNumeric(value);\n                }\n                if (isSelectableValueArray(value)) {\n                  return value.every((v) => v?.value && isNumeric(v.value));\n                }\n                return true;\n              },\n              message: t('auth-config.fields.team-ids-numbers', 'Team IDs must be numbers.'),\n            }\n          : undefined,\n    },\n    hostedDomain: {\n      label: t('auth-config.fields.hosted-domain-label', 'Hosted domain'),\n      description: t(\n        'auth-config.fields.hosted-domain-description',\n        'The domain under which Grafana is hosted and accessible.'\n      ),\n      type: 'text',\n    },\n    validateHd: {\n      label: t('auth-config.fields.validate-hosted-domain-label', 'Validate hosted domain'),\n      description: t(\n        'auth-config.fields.validate-hosted-domain-description',\n        'If enabled, Grafana will match the Hosted Domain retrieved from the Google ID Token against the \"{{ allowedDomainsLabel }}\" list specified by the user.',\n        { allowedDomainsLabel }\n      ),\n      type: 'checkbox',\n    },\n    serverDiscoveryUrl: {\n      label: openIDConnectDiscoveryLabel,\n      description: t(\n        'auth-config.fields.server-discovery-url-description',\n        'The .well-known/openid-configuration endpoint for your IdP. The info extracted from this URL will be used to populate the \"{{ authURLLabel }}\", \"{{ tokenURLLabel }}\" and \"{{ apiURLLabel }}\" fields.',\n        { authURLLabel, tokenURLLabel, apiURLLabel }\n      ),\n      type: 'custom',\n      content: (setValue) => <ServerDiscoveryField setValue={setValue} />,\n    },\n    domainHint: {\n      label: t('auth-config.fields.domain-hint-label', 'Domain hint'),\n      description: t(\n        'auth-config.fields.domain-hint-description',\n        'Parameter to indicate the realm of the user in the Azure AD/Entra ID tenant and streamline the login process.'\n      ),\n      type: 'text',\n      validation: {\n        validate: (value) => {\n          if (typeof value === 'string' && value.length) {\n            return isValidDomain(value);\n          }\n          return true;\n        },\n        message: t('auth-config.fields.domain-hint-valid-domain', 'This field must be a valid domain.'),\n      },\n    },\n    loginPrompt: {\n      label: t('auth-config.fields.login-prompt-label', 'Login prompt'),\n      type: 'select',\n      description: t(\n        'auth-config.fields.login-prompt-description',\n        'Indicates the type of user interaction when the user logs in with the IdP.'\n      ),\n      multi: false,\n      options: [\n        { value: '', label: '' },\n        { value: 'login', label: t('auth-config.fields.login-prompt-login', 'Login') },\n        { value: 'consent', label: t('auth-config.fields.login-prompt-consent', 'Consent') },\n        { value: 'select_account', label: t('auth-config.fields.login-prompt-select-account', 'Select account') },\n      ],\n      defaultValue: { value: '', label: '' },\n    },\n  };\n}\n\n// Check if a string contains only numeric values\nfunction isNumeric(value: string) {\n  return /^-?\\d+$/.test(value);\n}\n\nfunction orgMappingDescription(provider: string): string {\n  switch (provider) {\n    case 'azuread':\n      return t(\n        'auth-config.fields.org-mapping-description-azuread',\n        'List of \"<GroupID>:<OrgIdOrName>:<Role>\" mappings.'\n      );\n    case 'github':\n      return t(\n        'auth-config.fields.org-mapping-description-github',\n        'List of \"<GitHubTeamName>:<OrgIdOrName>:<Role>\" mappings.'\n      );\n    case 'gitlab':\n      return t(\n        'auth-config.fields.org-mapping-description-gitlab',\n        'List of \"<GitlabGroupName>:<OrgIdOrName>:<Role>\" mappings.'\n      );\n    case 'google':\n      return t(\n        'auth-config.fields.org-mapping-description-google',\n        'List of \"<GoogleGroupName>:<OrgIdOrName>:<Role>\" mappings.'\n      );\n    default:\n      // Generic OAuth, Okta\n      return t(\n        'auth-config.fields.org-mapping-description-generic',\n        'List of \"<ExternalName>:<OrgIdOrName>:<Role>\" mappings.'\n      );\n  }\n}\n\nfunction clientAuthenticationOptions(provider: string): Array<SelectableValue<string>> {\n  // Other options are purposefully not translated\n  /* eslint-disable @grafana/i18n/no-untranslated-strings */\n  switch (provider) {\n    case 'azuread':\n      return [\n        { value: 'none', label: t('auth-config.fields.client-authentication-none', 'None') },\n        { value: 'client_secret_post', label: 'Client secret' },\n        { value: 'managed_identity', label: 'Managed identity' },\n        { value: 'workload_identity', label: 'Workload identity' },\n      ];\n    // Other providers ...\n    default:\n      return [\n        { value: 'none', label: 'None' },\n        { value: 'client_secret_post', label: 'Client secret' },\n      ];\n  }\n  /* eslint-enable @grafana/i18n/no-untranslated-strings */\n}\n","import { css } from '@emotion/css';\nimport { useEffect, useState } from 'react';\nimport { UseFormReturn, Controller } from 'react-hook-form';\n\nimport { SelectableValue } from '@grafana/data';\nimport { Checkbox, Field, Input, SecretInput, Select, Switch, useTheme2 } from '@grafana/ui';\n\nimport { fieldMap } from './fields';\nimport { SSOProviderDTO, SSOSettingsField } from './types';\nimport { isSelectableValueArray } from './utils/guards';\n\ninterface FieldRendererProps\n  extends Pick<\n    UseFormReturn<SSOProviderDTO>,\n    'register' | 'control' | 'watch' | 'setValue' | 'getValues' | 'unregister'\n  > {\n  field: SSOSettingsField;\n  errors: UseFormReturn['formState']['errors'];\n  secretConfigured: boolean;\n  provider: string;\n}\n\nexport const FieldRenderer = ({\n  field,\n  register,\n  errors,\n  watch,\n  setValue,\n  getValues,\n  control,\n  unregister,\n  secretConfigured,\n  provider,\n}: FieldRendererProps) => {\n  const [isSecretConfigured, setIsSecretConfigured] = useState(secretConfigured);\n  const isDependantField = typeof field !== 'string';\n  const name = isDependantField ? field.name : field;\n  const parentValue = isDependantField ? watch(field.dependsOn) : null;\n  const fieldData = fieldMap(provider)[name];\n  const theme = useTheme2();\n  // Unregister a field that depends on a toggle to clear its data\n  useEffect(() => {\n    if (isDependantField) {\n      if (!parentValue) {\n        unregister(name);\n      }\n    }\n  }, [unregister, name, parentValue, isDependantField]);\n\n  const isNotEmptySelectableValueArray = (\n    current: string | boolean | Record<string, string> | Array<SelectableValue<string>> | undefined\n  ): current is Array<SelectableValue<string>> => {\n    return Array.isArray(current) && current.length > 0 && 'value' in current[0];\n  };\n\n  useEffect(() => {\n    if (fieldData.defaultValue) {\n      const current = getValues(name);\n      const obj = fieldData.options?.find(\n        (option) => option.value === (isNotEmptySelectableValueArray(current) ? current[0].value : undefined)\n      );\n      setValue(name, obj?.value || fieldData.defaultValue.value);\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  if (!field) {\n    console.log('missing field:', name);\n    return null;\n  }\n\n  if (!!fieldData.hidden) {\n    return null;\n  }\n\n  // Dependant field means the field depends on another field's value and shouldn't be rendered if the parent field is false\n  if (isDependantField) {\n    const parentValue = watch(field.dependsOn);\n    if (!parentValue) {\n      return null;\n    }\n  }\n  const fieldProps = {\n    label: fieldData.label,\n    required: !!fieldData.validation?.required,\n    invalid: !!errors[name],\n    error: fieldData.validation?.message,\n    description: fieldData.description,\n    defaultValue: fieldData.defaultValue?.value,\n  };\n\n  switch (fieldData.type) {\n    case 'text':\n      return (\n        <Field key={name} {...fieldProps}>\n          <Input {...register(name, fieldData.validation)} type={fieldData.type} id={name} autoComplete={'off'} />\n        </Field>\n      );\n    case 'secret':\n      return (\n        <Field key={name} {...fieldProps} htmlFor={name}>\n          <Controller\n            name={name}\n            control={control}\n            rules={fieldData.validation}\n            render={({ field: { ref, value, ...field } }) => (\n              <SecretInput\n                {...field}\n                autoComplete={'off'}\n                id={name}\n                value={typeof value === 'string' ? value : ''}\n                isConfigured={isSecretConfigured}\n                onReset={() => {\n                  setIsSecretConfigured(false);\n                  setValue(name, '');\n                }}\n              />\n            )}\n          />\n        </Field>\n      );\n    case 'select':\n      const watchOptions = watch(name);\n      let options = fieldData.options;\n      if (!fieldData.options?.length) {\n        options = isSelectableValueArray(watchOptions) ? watchOptions : [];\n      }\n      return (\n        <Field key={name} {...fieldProps} htmlFor={name}>\n          <Controller\n            rules={fieldData.validation}\n            name={name}\n            control={control}\n            render={({ field: { ref, onChange, ...fieldProps }, fieldState: { invalid } }) => {\n              return (\n                <Select\n                  {...fieldProps}\n                  placeholder={fieldData.placeholder}\n                  isMulti={fieldData.multi}\n                  invalid={invalid}\n                  inputId={name}\n                  options={options}\n                  allowCustomValue={!!fieldData.allowCustomValue}\n                  defaultValue={fieldData.defaultValue}\n                  onChange={onChange}\n                  onCreateOption={(v) => {\n                    const customValue = { value: v, label: v };\n                    onChange([...(options || []), customValue]);\n                  }}\n                />\n              );\n            }}\n          />\n        </Field>\n      );\n    case 'switch':\n      return (\n        <Field key={name} {...fieldProps}>\n          <Switch {...register(name)} id={name} />\n        </Field>\n      );\n    case 'checkbox':\n      return (\n        <Checkbox\n          key={name}\n          {...register(name)}\n          id={name}\n          {...fieldProps}\n          className={css({ marginBottom: theme.spacing(2) })}\n        />\n      );\n    case 'custom':\n      return (\n        <Field key={name} {...fieldProps}>\n          {fieldData.content ? fieldData.content(setValue) : <></>}\n        </Field>\n      );\n    default:\n      console.error(`Unknown field type: ${fieldData.type}`);\n      return null;\n  }\n};\n","import { SelectableValue } from '@grafana/data';\n\nimport { fieldMap, getSectionFields } from '../fields';\nimport { FieldData, SSOProvider, SSOProviderDTO } from '../types';\n\nimport { isSelectableValueArray } from './guards';\n\nexport const emptySettings: SSOProviderDTO = {\n  allowAssignGrafanaAdmin: false,\n  allowSignUp: false,\n  allowedDomains: [],\n  allowedGroups: [],\n  allowedOrganizations: [],\n  apiUrl: '',\n  authStyle: '',\n  authUrl: '',\n  autoLogin: false,\n  clientAuthentication: '',\n  clientId: '',\n  clientSecret: '',\n  managedIdentityClientId: '',\n  federatedCredentialAudience: '',\n  workloadIdentityTokenFile: '',\n  emailAttributeName: '',\n  emailAttributePath: '',\n  emptyScopes: false,\n  enabled: false,\n  loginPrompt: '',\n  extra: {},\n  groupsAttributePath: '',\n  hostedDomain: '',\n  icon: 'shield',\n  name: '',\n  roleAttributePath: '',\n  roleAttributeStrict: false,\n  scopes: [],\n  signoutRedirectUrl: '',\n  skipOrgRoleSync: false,\n  teamIds: [],\n  teamIdsAttributePath: '',\n  teamsUrl: '',\n  tlsClientCa: '',\n  tlsClientCert: '',\n  tlsClientKey: '',\n  tlsSkipVerify: false,\n  tokenUrl: '',\n  type: '',\n  usePkce: false,\n  useRefreshToken: false,\n};\n\nconst strToValue = (val: string | string[]): SelectableValue[] => {\n  if (!val?.length) {\n    return [];\n  }\n  if (Array.isArray(val)) {\n    return val.map((v) => ({ label: v, value: v }));\n  }\n  // Stored as JSON Array\n  if (val.startsWith('[') && val.endsWith(']')) {\n    // Fallback to parsing it like a non-json string if it is not valid json, instead of crashing.\n    try {\n      return JSON.parse(val).map((v: string) => ({ label: v, value: v }));\n    } catch {}\n  }\n\n  return val.split(/[\\s,]/).map((s) => ({ label: s, value: s }));\n};\n\nexport function dataToDTO(data?: SSOProvider): SSOProviderDTO {\n  if (!data) {\n    return emptySettings;\n  }\n  const providerFields = getFieldsForProvider(data.provider);\n  const arrayFields = getArrayFields(fieldMap(data.provider), providerFields);\n  const settings = { ...data.settings };\n  for (const field of arrayFields) {\n    //@ts-expect-error\n    settings[field] = strToValue(settings[field]);\n  }\n  //@ts-expect-error\n  return settings;\n}\n\nconst valuesToString = (values: Array<SelectableValue<string>>) => {\n  // Store arrays as JSON array\n  return JSON.stringify(values.map(({ value }) => value));\n};\n\nconst getFieldsForProvider = (provider: string) => {\n  const sections = getSectionFields()[provider];\n\n  // include the enabled field because it is not part of the fields defined for providers\n  const fields = ['enabled'];\n\n  return Object.values(sections).reduce(\n    (result, section) => [\n      ...result,\n      ...section.fields.map((field) => (typeof field === 'string' ? field : field.name)),\n    ],\n    fields\n  );\n};\n\n// Convert the DTO to the data format used by the API\nexport function dtoToData(dto: SSOProviderDTO, provider: string) {\n  let current: Partial<SSOProviderDTO> = dto;\n\n  const providerFields = getFieldsForProvider(provider);\n  const arrayFields = getArrayFields(fieldMap(provider), providerFields);\n\n  // filter out the fields that are not defined on the provider\n  const settings: Partial<SSOProviderDTO> = Object.keys(current)\n    .filter((key) => providerFields.includes(key))\n    .reduce((obj, key) => {\n      //@ts-expect-error\n      return { ...obj, [key]: current[key] };\n    }, {});\n\n  for (const field of arrayFields) {\n    const value = current[field];\n    if (value) {\n      if (isSelectableValueArray(value)) {\n        //@ts-expect-error\n        settings[field] = valuesToString(value);\n      } else if (isSelectableValueArray([value])) {\n        //@ts-expect-error\n        settings[field] = value.value;\n      }\n    }\n  }\n  return settings;\n}\n\nexport function getArrayFields(obj: Record<string, FieldData>, providerFields: string[]): Array<keyof SSOProviderDTO> {\n  return Object.entries(obj)\n    .filter(([key, value]) => providerFields.includes(key) && value.type === 'select')\n    .map(([key]) => key as keyof SSOProviderDTO); // TODO: replace this with a type guard\n}\n","import { useMemo, useState } from 'react';\nimport { useForm } from 'react-hook-form';\n\nimport { AppEvents } from '@grafana/data';\nimport { Trans, t } from '@grafana/i18n';\nimport { getAppEvents, getBackendSrv, isFetchError, locationService, reportInteraction } from '@grafana/runtime';\nimport {\n  Box,\n  Button,\n  CollapsableSection,\n  ConfirmModal,\n  Dropdown,\n  Field,\n  IconButton,\n  LinkButton,\n  Menu,\n  Stack,\n  Switch,\n} from '@grafana/ui';\n\nimport { FormPrompt } from '../../core/components/FormPrompt/FormPrompt';\nimport { Page } from '../../core/components/Page/Page';\n\nimport { FieldRenderer } from './FieldRenderer';\nimport { getSectionFields } from './fields';\nimport { SSOProvider, SSOProviderDTO } from './types';\nimport { dataToDTO, dtoToData } from './utils/data';\n\nconst appEvents = getAppEvents();\n\ninterface ProviderConfigProps {\n  config?: SSOProvider;\n  isLoading?: boolean;\n  provider: string;\n}\n\nexport const ProviderConfigForm = ({ config, provider, isLoading }: ProviderConfigProps) => {\n  const {\n    register,\n    handleSubmit,\n    control,\n    reset,\n    watch,\n    setValue,\n    getValues,\n    unregister,\n    formState: { errors, dirtyFields, isSubmitted },\n  } = useForm({ defaultValues: dataToDTO(config), mode: 'onSubmit', reValidateMode: 'onChange' });\n  const [isSaving, setIsSaving] = useState(false);\n  const [submitError, setSubmitError] = useState(false);\n  const dataSubmitted = isSubmitted && !submitError;\n  const sections = useMemo(() => getSectionFields()[provider], [provider]);\n  const [resetConfig, setResetConfig] = useState(false);\n\n  const additionalActionsMenu = (\n    <Menu>\n      <Menu.Item\n        label={t(\n          'auth-config.provider-config-form.additional-actions-menu.label-reset-to-default-values',\n          'Reset to default values'\n        )}\n        icon=\"history-alt\"\n        onClick={() => {\n          setResetConfig(true);\n        }}\n      />\n    </Menu>\n  );\n\n  const onSubmit = async (data: SSOProviderDTO) => {\n    setIsSaving(true);\n    setSubmitError(false);\n    const requestData = dtoToData(data, provider);\n    try {\n      await getBackendSrv().put(\n        `/api/v1/sso-settings/${provider}`,\n        {\n          id: config?.id,\n          provider: config?.provider,\n          settings: { ...requestData },\n        },\n        {\n          showErrorAlert: false,\n        }\n      );\n\n      reportInteraction('grafana_authentication_ssosettings_saved', {\n        provider,\n        enabled: requestData.enabled,\n      });\n\n      appEvents.publish({\n        type: AppEvents.alertSuccess.name,\n        payload: ['Settings saved'],\n      });\n      reset(data);\n      // Delay redirect so the form state can update\n      setTimeout(() => {\n        locationService.push(`/admin/authentication`);\n      }, 300);\n    } catch (error) {\n      let message = '';\n      if (isFetchError(error)) {\n        message = error.data.message;\n      } else if (error instanceof Error) {\n        message = error.message;\n      }\n      appEvents.publish({\n        type: AppEvents.alertError.name,\n        payload: [message],\n      });\n      setSubmitError(true);\n      setIsSaving(false);\n    }\n  };\n\n  const onResetConfig = async () => {\n    try {\n      await getBackendSrv().delete(`/api/v1/sso-settings/${provider}`, undefined, { showSuccessAlert: false });\n      reportInteraction('grafana_authentication_ssosettings_removed', {\n        provider,\n      });\n\n      appEvents.publish({\n        type: AppEvents.alertSuccess.name,\n        payload: ['Settings reset to defaults'],\n      });\n      setTimeout(() => {\n        locationService.push(`/admin/authentication`);\n      });\n    } catch (error) {\n      let message = '';\n      if (isFetchError(error)) {\n        message = error.data.message;\n      } else if (error instanceof Error) {\n        message = error.message;\n      }\n      appEvents.publish({\n        type: AppEvents.alertError.name,\n        payload: [message],\n      });\n    }\n  };\n\n  const isEnabled = config?.settings.enabled;\n\n  const onSaveAttempt = (toggleEnabled: boolean) => {\n    reportInteraction('grafana_authentication_ssosettings_save_attempt', {\n      provider,\n      enabled: toggleEnabled ? !isEnabled : isEnabled,\n    });\n\n    if (toggleEnabled) {\n      setValue('enabled', !isEnabled);\n    }\n  };\n\n  return (\n    <Page.Contents isLoading={isLoading}>\n      <form onSubmit={handleSubmit(onSubmit)} style={{ maxWidth: '600px' }}>\n        <FormPrompt\n          confirmRedirect={!!Object.keys(dirtyFields).length && !dataSubmitted}\n          onDiscard={() => {\n            reportInteraction('grafana_authentication_ssosettings_abandoned', {\n              provider,\n            });\n            reset();\n          }}\n        />\n        <Field label={t('auth-config.provider-config-form.label-enabled', 'Enabled')} hidden={true}>\n          <Switch\n            {...register('enabled')}\n            id=\"enabled\"\n            label={t('auth-config.provider-config-form.enabled-label-enabled', 'Enabled')}\n          />\n        </Field>\n        <Stack gap={2} direction={'column'}>\n          {sections\n            .filter((section) => !section.hidden)\n            .map((section, index) => {\n              return (\n                <CollapsableSection label={section.name} isOpen={index === 0} key={section.name}>\n                  {section.fields\n                    .filter((field) => (typeof field !== 'string' ? !field.hidden : true))\n                    .map((field) => {\n                      return (\n                        <FieldRenderer\n                          key={typeof field === 'string' ? field : field.name}\n                          field={field}\n                          control={control}\n                          errors={errors}\n                          setValue={setValue}\n                          getValues={getValues}\n                          register={register}\n                          watch={watch}\n                          unregister={unregister}\n                          provider={provider}\n                          secretConfigured={!!config?.settings.clientSecret}\n                        />\n                      );\n                    })}\n                </CollapsableSection>\n              );\n            })}\n        </Stack>\n        <Box display={'flex'} gap={2} marginTop={5}>\n          <Stack alignItems={'center'} gap={2}>\n            <Button\n              type={'submit'}\n              disabled={isSaving}\n              onClick={() => onSaveAttempt(true)}\n              variant={isEnabled ? 'secondary' : undefined}\n            >\n              {isSaving\n                ? isEnabled\n                  ? t('auth-config.provider-config-form.disabling', 'Disabling...')\n                  : t('auth-config.provider-config-form.saving', 'Saving...')\n                : isEnabled\n                  ? t('auth-config.provider-config-form.disable', 'Disable')\n                  : t('auth-config.provider-config-form.save-and-enable', 'Save and enable')}\n            </Button>\n\n            <Button type={'submit'} disabled={isSaving} variant={'secondary'} onClick={() => onSaveAttempt(false)}>\n              {isSaving\n                ? t('auth-config.provider-config-form.saving', 'Saving...')\n                : t('auth-config.provider-config-form.save', 'Save')}\n            </Button>\n            <LinkButton href={'/admin/authentication'} variant={'secondary'}>\n              <Trans i18nKey=\"auth-config.provider-config-form.discard\">Discard</Trans>\n            </LinkButton>\n\n            <Dropdown overlay={additionalActionsMenu} placement=\"bottom-start\">\n              <IconButton\n                tooltip={t('auth-config.provider-config-form.tooltip-more-actions', 'More actions')}\n                title={t('auth-config.provider-config-form.title-more-actions', 'More actions')}\n                tooltipPlacement=\"top\"\n                size=\"md\"\n                variant=\"secondary\"\n                name=\"ellipsis-v\"\n                hidden={config?.source === 'system'}\n              />\n            </Dropdown>\n          </Stack>\n        </Box>\n      </form>\n      {resetConfig && (\n        <ConfirmModal\n          isOpen\n          icon=\"trash-alt\"\n          title={t('auth-config.provider-config-form.title-reset', 'Reset')}\n          body={\n            <Stack direction={'column'} gap={3}>\n              <span>\n                <Trans i18nKey=\"auth-config.provider-config-form.reset-configuration\">\n                  Are you sure you want to reset this configuration?\n                </Trans>\n              </span>\n              <small>\n                <Trans i18nKey=\"auth-config.provider-config-form.reset-configuration-description\">\n                  After resetting these settings Grafana will use the provider configuration from the system (config\n                  file/environment variables) if any.\n                </Trans>\n              </small>\n            </Stack>\n          }\n          confirmText={t('auth-config.provider-config-form.confirmText-reset', 'Reset')}\n          onDismiss={() => setResetConfig(false)}\n          onConfirm={async () => {\n            await onResetConfig();\n            setResetConfig(false);\n          }}\n        />\n      )}\n    </Page.Contents>\n  );\n};\n","import { useEffect } from 'react';\nimport { useParams } from 'react-router-dom-v5-compat';\n\nimport { NavModelItem } from '@grafana/data';\nimport { t } from '@grafana/i18n';\nimport { Badge, Stack, Text } from '@grafana/ui';\nimport { Page } from 'app/core/components/Page/Page';\nimport { PageNotFound } from 'app/core/components/PageNotFound/PageNotFound';\nimport { useDispatch, useSelector } from 'app/types/store';\n\nimport { ProviderConfigForm } from './ProviderConfigForm';\nimport { UIMap } from './constants';\nimport { loadProviders } from './state/actions';\nimport { SSOProvider } from './types';\n\nconst getPageNav = (config?: SSOProvider): NavModelItem => {\n  if (!config) {\n    return {\n      text: t('auth-config.get-page-nav.text.authentication', 'Authentication'),\n      subTitle: t(\n        'auth-config.get-page-nav.subTitle.configure-authentication-providers',\n        'Configure authentication providers'\n      ),\n      icon: 'shield',\n      id: 'authentication',\n    };\n  }\n\n  const providerDisplayName = UIMap[config.provider][1] || config.provider.toUpperCase();\n\n  return {\n    text: providerDisplayName || '',\n    subTitle: `To configure ${providerDisplayName} OAuth2 you must register your application with ${providerDisplayName}. The provider will generate a Client ID and Client Secret for you to use.`,\n    icon: config.settings.icon || 'shield',\n    id: config.provider,\n  };\n};\n\n/**\n * Separate the Page logic from the Content logic for easier testing.\n */\nexport const ProviderConfigPage = () => {\n  const dispatch = useDispatch();\n  const { isLoading, providers } = useSelector((store) => store.authConfig);\n  const { provider = '' } = useParams();\n  const config = providers.find((config) => config.provider === provider);\n\n  useEffect(() => {\n    dispatch(loadProviders(provider));\n  }, [dispatch, provider]);\n\n  if (!config || !config.provider || !UIMap[config.provider]) {\n    return <PageNotFound />;\n  }\n\n  const pageNav = getPageNav(config);\n\n  return (\n    <Page\n      navId=\"authentication\"\n      pageNav={pageNav}\n      renderTitle={(title) => (\n        <Stack gap={2} alignItems=\"center\">\n          <Text variant={'h1'}>{title}</Text>\n          <Badge\n            text={\n              config.settings.enabled\n                ? t('auth-config.provider-config-page.text-badge-enabled', 'Enabled')\n                : t('auth-config.provider-config-page.text-badge-not-enabled', 'Not enabled')\n            }\n            color={config.settings.enabled ? 'green' : 'blue'}\n            icon={config.settings.enabled ? 'check' : undefined}\n          />\n        </Stack>\n      )}\n    >\n      <ProviderConfigForm config={config} isLoading={isLoading} provider={provider} />\n    </Page>\n  );\n};\n\nexport default ProviderConfigPage;\n","import * as H from 'history';\nimport { useEffect } from 'react';\n\nimport { locationService } from '@grafana/runtime';\n\ninterface PromptProps {\n  when?: boolean;\n  message: string | ((location: H.Location) => string | boolean);\n}\n\nexport const Prompt = ({ message, when = true }: PromptProps) => {\n  const history = locationService.getHistory();\n\n  useEffect(() => {\n    if (!when) {\n      return undefined;\n    }\n    //@ts-expect-error TODO Update the history package to fix types\n    const unblock = history.block(message);\n\n    return () => {\n      unblock();\n    };\n  }, [when, message, history]);\n\n  return null;\n};\n","import { css } from '@emotion/css';\nimport history from 'history';\nimport { useEffect, useState } from 'react';\nimport { Navigate } from 'react-router-dom-v5-compat';\n\nimport { Trans, t } from '@grafana/i18n';\nimport { Button, Modal } from '@grafana/ui';\n\nimport { Prompt } from './Prompt';\n\nexport interface Props {\n  confirmRedirect?: boolean;\n  onDiscard: () => void;\n  /** Extra check to invoke when location changes.\n   * Could be useful in multistep forms where each step has a separate URL\n   */\n  onLocationChange?: (location: history.Location) => void;\n}\n\n/**\n * Component handling redirects when a form has unsaved changes.\n * Page reloads are handled in useEffect via beforeunload event.\n * URL navigation is handled by react-router's components since it does not trigger beforeunload event.\n */\nexport const FormPrompt = ({ confirmRedirect, onDiscard, onLocationChange }: Props) => {\n  const [modalIsOpen, setModalIsOpen] = useState(false);\n  const [blockedLocation, setBlockedLocation] = useState<history.Location | null>(null);\n  const [changesDiscarded, setChangesDiscarded] = useState(false);\n\n  useEffect(() => {\n    const onBeforeUnload = (e: BeforeUnloadEvent) => {\n      if (confirmRedirect) {\n        e.preventDefault();\n        e.returnValue = '';\n      }\n    };\n    window.addEventListener('beforeunload', onBeforeUnload);\n    return () => {\n      window.removeEventListener('beforeunload', onBeforeUnload);\n    };\n  }, [confirmRedirect]);\n\n  // Returning 'false' from this function will prevent navigation to the next URL\n  const handleRedirect = (location: history.Location) => {\n    // Do not show the unsaved changes modal if only the URL params have changed\n    const currentPath = window.location.pathname;\n    const nextPath = location.pathname;\n    if (currentPath === nextPath) {\n      return true;\n    }\n\n    const locationChangeCheck = onLocationChange?.(location);\n\n    let blockRedirect = confirmRedirect && !changesDiscarded;\n    if (locationChangeCheck !== undefined) {\n      blockRedirect = blockRedirect && locationChangeCheck;\n    }\n\n    if (blockRedirect) {\n      setModalIsOpen(true);\n      setBlockedLocation(location);\n      return false;\n    }\n\n    if (locationChangeCheck) {\n      onDiscard();\n    }\n\n    return true;\n  };\n\n  const onBackToForm = () => {\n    setModalIsOpen(false);\n    setBlockedLocation(null);\n  };\n\n  const onDiscardChanges = () => {\n    setModalIsOpen(false);\n    setChangesDiscarded(true);\n    onDiscard();\n  };\n\n  return (\n    <>\n      <Prompt when={true} message={handleRedirect} />\n      {blockedLocation && changesDiscarded && <Navigate replace to={blockedLocation} />}\n      <UnsavedChangesModal isOpen={modalIsOpen} onDiscard={onDiscardChanges} onBackToForm={onBackToForm} />\n    </>\n  );\n};\n\ninterface UnsavedChangesModalProps {\n  onDiscard: () => void;\n  onBackToForm: () => void;\n  isOpen: boolean;\n}\n\nconst UnsavedChangesModal = ({ onDiscard, onBackToForm, isOpen }: UnsavedChangesModalProps) => {\n  return (\n    <Modal\n      isOpen={isOpen}\n      title={t('form-prompt.title', 'Leave page?')}\n      onDismiss={onBackToForm}\n      icon=\"exclamation-triangle\"\n      className={css({ width: '500px' })}\n    >\n      <h5>\n        <Trans i18nKey=\"form-prompt.description\">Changes that you made may not be saved.</Trans>\n      </h5>\n      <Modal.ButtonRow>\n        <Button variant=\"secondary\" onClick={onBackToForm} fill=\"outline\">\n          <Trans i18nKey=\"form-prompt.continue-button\">Continue editing</Trans>\n        </Button>\n        <Button variant=\"destructive\" onClick={onDiscard}>\n          <Trans i18nKey=\"form-prompt.discard-button\">Discard unsaved changes</Trans>\n        </Button>\n      </Modal.ButtonRow>\n    </Modal>\n  );\n};\n"],"names":["BASE_PATH","UIMap","CloudEnterpriseBadge","loadSettings","showSpinner","dispatch","loadProviders","result","loadProviderStatuses","provider","registeredProviders","providerStatuses","getStatusPromises","statuses","i","saveSettings","data","error","updateErr","OrangeBadge","text","styles","getStyles","theme","validate","uuid","mapStateToProps","state","mapActionsToProps","allowInsecureEmail","onClose","notifyApp","oauthAllowInsecureEmailLookupOnChange","resetButtonOnClick","subtitle","TextLink","Drawer","Text","Switch","Button","ConfigureAuthCTA","Stack","Icon","ProviderCard","providerId","enabled","configPath","authType","onClick","url","iconName","displayName","Card","Badge","ProviderSAMLCard","ProviderSCIMCard","isLoading","providers","mapDispatchToProps","AuthConfigPageUnconnected","showDrawer","setShowDrawer","availableProviders","p","onProviderCardClick","providerType","providerList","Page","ToolbarButton","Grid","settings","AuthDrawer","getProviderUrl","isUrlValid","isValidDomain","domain","ServerDiscoveryModal","isOpen","onSuccess","handleSubmit","register","errors","validateUrl","value","Modal","e","Field","Input","ServerDiscoveryField","setValue","appEvents","isModalOpen","setModalVisibility","setLoading","wellKnownSuffix","res","isSelectableValueArray","v","isSelectableValue","getSectionFields","generalSettingsLabel","userMappingLabel","extraSecurityLabel","clientIDLabel","clientSecretLabel","scopesLabel","openIDConnectDiscoveryLabel","authURLLabel","tokenURLLabel","apiURLLabel","jmesPathLabel","workloadIdentityLabel","fieldMap","orgMappingLabel","orgAttributePathLabel","teamsURLLabel","teamIDsAttributePathLabel","allowedGroupsLabel","groupsAttributePathLabel","teamIDsLabel","allowedDomainsLabel","clientAuthenticationOptions","formValues","clientAuth","orgMappingDescription","config","isNumeric","FieldRenderer","field","watch","getValues","control","unregister","secretConfigured","isSecretConfigured","setIsSecretConfigured","isDependantField","name","parentValue","fieldData","isNotEmptySelectableValueArray","current","obj","option","fieldProps","ref","SecretInput","watchOptions","options","onChange","invalid","Select","customValue","Checkbox","emptySettings","strToValue","val","s","dataToDTO","providerFields","getFieldsForProvider","arrayFields","getArrayFields","valuesToString","values","sections","fields","section","dtoToData","dto","key","ProviderConfigForm","reset","dirtyFields","isSubmitted","isSaving","setIsSaving","submitError","setSubmitError","dataSubmitted","resetConfig","setResetConfig","additionalActionsMenu","Menu","onSubmit","requestData","message","onResetConfig","isEnabled","onSaveAttempt","toggleEnabled","FormPrompt","index","CollapsableSection","Box","Dropdown","IconButton","ConfirmModal","getPageNav","providerDisplayName","ProviderConfigPage","store","PageNotFound","pageNav","title","Prompt","when","history","unblock","confirmRedirect","onDiscard","onLocationChange","modalIsOpen","setModalIsOpen","blockedLocation","setBlockedLocation","changesDiscarded","setChangesDiscarded","onBeforeUnload","handleRedirect","location","currentPath","nextPath","locationChangeCheck","blockRedirect","onBackToForm","onDiscardChanges","UnsavedChangesModal"],"sourceRoot":""}