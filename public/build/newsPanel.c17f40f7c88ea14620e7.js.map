{"version":3,"file":"newsPanel.c17f40f7c88ea14620e7.js","mappings":"6PAcO,SAASA,EAAUC,EAAuB,CAC/C,KAAM,CACJ,MAAAC,EACA,QAAS,CAAE,QAAAC,EAAU,IAAkB,UAAAC,CAAU,CACnD,EAAIH,EAEE,CAAE,MAAAI,EAAO,QAAAC,CAAQ,KAAIC,EAAA,GAAYJ,CAAO,EAc9C,SAZA,aAAU,IAAM,CACd,MAAMK,EAAMP,EAAM,SAAS,UAAU,IAAcK,CAAO,EAE1D,MAAO,IAAM,CACXE,EAAI,YAAY,CAClB,CACF,EAAG,CAACF,EAASL,EAAM,QAAQ,CAAC,KAE5B,aAAU,IAAM,CACdK,EAAQ,CACV,EAAG,CAACA,CAAO,CAAC,EAERD,EAAM,SAEN,OAACI,EAAA,EAAK,CAAC,SAAO,KAAE,+CAAgD,wBAAwB,EACtF,oBAAC,KAAK,CAAC,QAAQ,8CAA8C,4GACqC,OAChG,OAACC,EAAA,EAAQ,CAAC,KAAK,qFAAqF,SAAQ,GAAC,qCAE7G,GACF,EACF,EAGAL,EAAM,WAEN,OAAC,OACC,mBAAC,KAAK,CAAC,QAAQ,0BAA0B,sBAAU,EACrD,EAICA,EAAM,SAKT,OAACM,EAAA,EAAe,CAAC,UAAU,OACxB,SAAAN,EAAM,MAAM,IAAI,CAACO,EAAGC,OACZ,OAACC,EAAA,EAAI,CAAa,MAAAD,EAAc,MAAAX,EAAc,UAAAE,EAAsB,KAAMC,EAAM,OAArEQ,CAA4E,CAC/F,EACH,EARO,IAUX,CC/CO,MAAME,EAAmC,CAC9C,UAAW,EACb,ECba,EAAS,IAAIC,EAAA,EAAqBhB,CAAS,EAAE,gBAAiBiB,GAAY,CACrF,MAAMC,EAAW,IAAC,KAAE,qBAAsB,MAAM,CAAC,EACjDD,EACG,aAAa,CACZ,KAAM,UACN,QAAM,KAAE,gBAAiB,KAAK,EAC9B,SAAAC,EACA,eAAa,KAAE,uBAAwB,6BAA6B,EACpE,SAAU,CACR,YAAa,GACf,EACA,aAAcH,EAAe,OAC/B,CAAC,EACA,iBAAiB,CAChB,KAAM,YACN,QAAM,KAAE,uBAAwB,YAAY,EAC5C,SAAAG,EACA,eAAa,KACX,8BACA,+EACF,EACA,aAAcH,EAAe,SAC/B,CAAC,CACL,CAAC,C","sources":["webpack://grafana/./public/app/plugins/panel/news/NewsPanel.tsx","webpack://grafana/./public/app/plugins/panel/news/panelcfg.gen.ts","webpack://grafana/./public/app/plugins/panel/news/module.tsx"],"sourcesContent":["import { useEffect } from 'react';\n\nimport { PanelProps } from '@grafana/data';\nimport { Trans, t } from '@grafana/i18n';\nimport { RefreshEvent } from '@grafana/runtime';\nimport { Alert, ScrollContainer, TextLink } from '@grafana/ui';\n\nimport { News } from './component/News';\nimport { DEFAULT_FEED_URL } from './constants';\nimport { Options } from './panelcfg.gen';\nimport { useNewsFeed } from './useNewsFeed';\n\ninterface NewsPanelProps extends PanelProps<Options> {}\n\nexport function NewsPanel(props: NewsPanelProps) {\n  const {\n    width,\n    options: { feedUrl = DEFAULT_FEED_URL, showImage },\n  } = props;\n\n  const { state, getNews } = useNewsFeed(feedUrl);\n\n  useEffect(() => {\n    const sub = props.eventBus.subscribe(RefreshEvent, getNews);\n\n    return () => {\n      sub.unsubscribe();\n    };\n  }, [getNews, props.eventBus]);\n\n  useEffect(() => {\n    getNews();\n  }, [getNews]);\n\n  if (state.error) {\n    return (\n      <Alert title={t('news.news-panel.title-error-loading-rss-feed', 'Error loading RSS feed')}>\n        <Trans i18nKey=\"news.news-panel.body-error-loading-rss-feed\">\n          Make sure that the feed URL is correct and that CORS is configured correctly on the server. See{' '}\n          <TextLink href=\"https://grafana.com/docs/grafana/latest/panels-visualizations/visualizations/news/\" external>\n            News panel documentation.\n          </TextLink>\n        </Trans>\n      </Alert>\n    );\n  }\n  if (state.loading) {\n    return (\n      <div>\n        <Trans i18nKey=\"news.news-panel.loading\">Loading...</Trans>\n      </div>\n    );\n  }\n\n  if (!state.value) {\n    return null;\n  }\n\n  return (\n    <ScrollContainer minHeight=\"100%\">\n      {state.value.map((_, index) => {\n        return <News key={index} index={index} width={width} showImage={showImage} data={state.value} />;\n      })}\n    </ScrollContainer>\n  );\n}\n","// Code generated - EDITING IS FUTILE. DO NOT EDIT.\n//\n// Generated by:\n//     public/app/plugins/gen.go\n// Using jennies:\n//     TSTypesJenny\n//     PluginTsTypesJenny\n//\n// Run 'make gen-cue' from repository root to regenerate.\n\nexport interface Options {\n  /**\n   * empty/missing will default to grafana blog\n   */\n  feedUrl?: string;\n  showImage?: boolean;\n}\n\nexport const defaultOptions: Partial<Options> = {\n  showImage: true,\n};\n","import { PanelPlugin } from '@grafana/data';\nimport { t } from '@grafana/i18n';\n\nimport { NewsPanel } from './NewsPanel';\nimport { DEFAULT_FEED_URL } from './constants';\nimport { Options, defaultOptions } from './panelcfg.gen';\n\nexport const plugin = new PanelPlugin<Options>(NewsPanel).setPanelOptions((builder) => {\n  const category = [t('news.category-news', 'News')];\n  builder\n    .addTextInput({\n      path: 'feedUrl',\n      name: t('news.name-url', 'URL'),\n      category,\n      description: t('news.description-url', 'Supports RSS and Atom feeds'),\n      settings: {\n        placeholder: DEFAULT_FEED_URL,\n      },\n      defaultValue: defaultOptions.feedUrl,\n    })\n    .addBooleanSwitch({\n      path: 'showImage',\n      name: t('news.name-show-image', 'Show image'),\n      category,\n      description: t(\n        'news.description-show-image',\n        'Controls if the news item social (og:image) image is shown above text content'\n      ),\n      defaultValue: defaultOptions.showImage,\n    });\n});\n"],"names":["NewsPanel","props","width","feedUrl","showImage","state","getNews","useNewsFeed","sub","Alert","TextLink","ScrollContainer","_","index","News","defaultOptions","PanelPlugin","builder","category"],"sourceRoot":""}