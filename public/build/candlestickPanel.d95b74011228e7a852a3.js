"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[3090],{50784:(Qe,Ce,e)=>{e.d(Ce,{z:()=>E,e:()=>ie});var m=e(74848),k=e(96540),Pe=e(95004),r=e(62748),be=e(7515),w=e(22803),Me=e(34743),H=e(83505),A=e(46885),X=e(55386),ue=e(51898),Se=e(63142),ae=e(15245),Q=e(15840),Ne=e(73125),P=e(16913);const D=({timeZone:n,dataFrame:f,frameIndex:b,rowIndex:u,config:g,exemplarColor:M,clickedRowIndex:p,setClickedRowIndex:o,maxHeight:y,maxWidth:N})=>{const F=(0,Se.of)(j,N),[R,S]=(0,k.useState)(!1),[$,G]=(0,k.useState)(!1),_=[(0,Me.UU)({fallbackAxisSideDirection:"end",crossAxis:!1,boundary:document.body}),(0,Me.BN)()],{context:ke,refs:ee,floatingStyles:re}=(0,H.we)({open:R,placement:"bottom",onOpenChange:S,middleware:_,whileElementsMounted:A.ll,strategy:"fixed"}),fe=(0,H.s9)(ke),$e=(0,H.Mk)(ke,{handleClose:(0,H.iB)(),enabled:p===void 0}),{getReferenceProps:qe,getFloatingProps:ze}=(0,H.bv)([fe,$e]);(0,k.useEffect)(()=>{p!==u&&G(!1)},[p,u]);const _e=()=>(0,m.jsx)("rect",{fill:M,x:"3.38672",width:"4.78985",height:"4.78985",transform:"rotate(45 3.38672 0)"},"diamond"),Ae=()=>{G(!0)},et=(0,k.useCallback)(()=>{const s=()=>{G(!1),S(!1),o(void 0)};let d=[],x=[];return f.fields.forEach(v=>{const h=v.values[u];x.push(...(0,P.u6)(v,u));const t=v.display?.(h)??{text:`${h}`,numeric:+h};d.push({label:v.state?.displayName??v.name,value:(0,X.cN)(t)})}),(0,m.jsxs)("div",{className:(0,w.cx)(F.tooltipWrapper,$&&F.pinned),ref:ee.setFloating,style:re,...ze(),children:[$&&(0,m.jsx)(Q.J,{onClick:s}),(0,m.jsx)(Ne.A,{items:d,links:x,isPinned:$,maxHeight:y})]})},[f.fields,u,F,$,o,re,ze,ee.setFloating,y]),l=g.getSeries().find(s=>s.props.dataFrameFieldIndex?.frameIndex===b)?.props.lineColor,c=()=>{o(u),Ae()};return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("div",{ref:ee.setReference,className:F.markerWrapper,"data-testid":ue.Tp.components.DataSource.Prometheus.exemplarMarker,role:"button",tabIndex:0,...qe(),onClick:c,onKeyDown:s=>{s.key==="Enter"&&c()},children:(0,m.jsx)("svg",{viewBox:"0 0 7 7",width:"7",height:"7",style:{fill:l},className:(0,w.cx)(F.marble,(R||$)&&F.activeMarble),children:_e()})}),(R||$)&&(0,m.jsx)(ae.ZL,{children:et()})]})},j=(n,f)=>({markerWrapper:(0,w.css)({padding:"0 4px 4px 4px",width:"8px",height:"8px",boxSizing:"content-box",transform:"translate3d(-50%, 0, 0)","&:hover":{"> svg":{transform:"scale(1.3)",opacity:1,filter:"drop-shadow(0 0 8px rgba(0, 0, 0, 0.5))"}}}),marker:(0,w.css)({width:0,height:0,borderLeft:"4px solid transparent",borderRight:"4px solid transparent",borderBottom:`4px solid ${n.v1.palette.red}`,pointerEvents:"none"}),marble:(0,w.css)({display:"block",opacity:.5,[n.transitions.handleMotion("no-preference")]:{transition:"transform 0.15s ease-out"}}),activeMarble:(0,w.css)({transform:"scale(1.3)",opacity:1,filter:"drop-shadow(0 0 8px rgba(0, 0, 0, 0.5))"}),tooltipWrapper:(0,w.css)({background:n.colors.background.elevated,maxWidth:f??"none",whiteSpace:"pre",borderRadius:n.shape.radius.default,position:"fixed",border:`1px solid ${n.colors.border.weak}`,boxShadow:n.shadows.z2,userSelect:"text"}),pinned:(0,w.css)({boxShadow:n.shadows.z3})}),E=({exemplars:n,timeZone:f,config:b,visibleSeries:u,maxHeight:g,maxWidth:M})=>{const p=(0,k.useRef)(),[o,y]=(0,k.useState)();(0,k.useLayoutEffect)(()=>{b.addHook("init",R=>{p.current=R})},[b]);const N=(0,k.useCallback)((R,S)=>{const $=R.fields.find(fe=>fe.name===Pe.LE),G=R.fields.find(fe=>fe.name===Pe.Bc);if(!$||!G||!p.current)return;const _=Object.keys(p.current.scales).find(fe=>!["x","y"].some($e=>$e===fe))??r.s,ke=p.current.scales[_].min,ee=p.current.scales[_].max;let re=G.values[S];return ke!=null&&re<ke&&(re=ke),ee!=null&&re>ee&&(re=ee),{x:p.current.valToPos($.values[S],"x"),y:p.current.valToPos(re,_)}},[]),F=(0,k.useCallback)((R,S)=>{const $=u!==void 0?q(u,R,S):!0,G=u!==void 0?K(R,S,u):void 0;return $?(0,m.jsx)(D,{setClickedRowIndex:y,clickedRowIndex:o,timeZone:f,dataFrame:R,frameIndex:0,rowIndex:S,config:b,exemplarColor:G,maxHeight:g,maxWidth:M}):(0,m.jsx)(m.Fragment,{})},[u,o,f,b,g,M]);return(0,m.jsx)(be.a,{config:b,id:"exemplars",events:n,renderEventMarker:F,mapEventToXYCoords:N})},ie=(n,f)=>{const b=n.series.filter(g=>g.props.show),u=[];return f?.length&&b.forEach(g=>{const M=g.props?.dataFrameFieldIndex?.frameIndex,p=g.props?.dataFrameFieldIndex?.fieldIndex;if(M!==void 0&&p!==void 0){const o=f[M]?.fields[p];o?.labels&&u.push({labels:o.labels,color:g.props?.lineColor??""})}}),{labels:u,totalSeriesCount:n.series.length}},K=(n,f,b)=>{let u;return b.labels.some(g=>{const M=Object.keys(g.labels),p=n.fields.filter(o=>M.find(y=>y===o.name));return p.length&&p.every((y,N,F)=>{const R=y.values[f];return g.labels[y.name]===R})?(u=g.color,!0):!1}),u},q=(n,f,b)=>{let u=!1;return n.labels.length===n.totalSeriesCount?u=!0:n.labels.some(g=>{const M=Object.keys(g.labels);if(Object.keys(g.labels).length===0)u=!0;else{const p=f.fields.filter(o=>M.find(y=>y===o.name));p.length&&(u=n.labels.some(o=>Object.keys(o.labels).every(y=>{const N=o.labels[y];return p.find(F=>F.values[b]===N)})))}return u}),u}},66881:(Qe,Ce,e)=>{e.d(Ce,{p:()=>Ne});var m=e(74848),k=e(96540),Pe=e(95004),r=e(55386),be=e(70332),w=e(22803),Me=e(2543),H=e(55794),A=e.n(H),X=e(63142);const ue=({step:P,y:D,dragBounds:j,mapPositionToValue:E,formatValue:ie,onChange:K})=>{const q=(0,X.$j)();let n=D,f="none";D<(j.top??0)&&(f="top"),D>(j.bottom??0)+22&&(f="bottom"),f==="bottom"&&(n=j.bottom??D),f==="top"&&(n=j.top??D);const b=typeof K!="function",u=(0,X.of)(Se,P,f,b),[g,M]=(0,k.useState)(P.value),p=(0,k.useMemo)(()=>q.colors.getContrastText(q.visualization.getColorByName(P.color)),[P.color,q]);return(0,m.jsx)(A(),{axis:"y",grid:[1,1],disabled:b,onStop:b?Me.noop:(o,y)=>(K(E(y.lastY)),!1),onDrag:(o,y)=>M(E(y.lastY)),position:{x:0,y:n},bounds:j,children:(0,m.jsx)("div",{className:u.handle,style:{color:p},children:(0,m.jsx)("span",{className:u.handleText,children:ie(g)})})})};ue.displayName="ThresholdDragHandle";const Se=(P,D,j,E)=>{const ie=P.visualization.getColorByName(D.color),K=ae(j),q=j!=="none";return{handle:(0,w.css)({display:"flex",alignItems:"center",position:"absolute",left:0,width:"calc(100% - 9px)",height:"18px",marginTop:"-9px",borderColor:ie,cursor:E?"initial":"grab",borderTopRightRadius:P.shape.radius.default,borderBottomRightRadius:P.shape.radius.default,background:ie,fontSize:P.typography.bodySmall.fontSize,"&:before":K},q&&{marginTop:0,borderRadius:P.shape.radius.default}),handleText:(0,w.css)({textAlign:"center",width:"100%",display:"block",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"})}};function ae(P){const D=P==="none",j=E=>({content:"''",position:"absolute",bottom:0,top:0,width:0,height:0,left:0,borderRightStyle:"solid",borderRightWidth:`${E}px`,borderRightColor:"inherit",borderTop:`${E}px solid transparent`,borderBottom:`${E}px solid transparent`});return D?(0,w.css)({...j(9),left:"-9px"}):P==="top"?(0,w.css)({...j(5),left:"calc(50% - 2.5px)",top:"-7px",transform:"rotate(90deg)"}):P==="bottom"?(0,w.css)({...j(5),left:"calc(50% - 2.5px)",top:"calc(100% - 2.5px)",transform:"rotate(-90deg)"}):""}const Q=60,Ne=({config:P,fieldConfig:D,onThresholdsChange:j})=>{const E=(0,k.useRef)(),[ie,K]=(0,k.useState)(0);(0,k.useLayoutEffect)(()=>{P.setPadding([0,Q,0,0]),P.addHook("init",n=>{E.current=n}),P.addHook("draw",()=>{K(n=>n+1)})},[P]);const q=(0,k.useMemo)(()=>{const n=E.current;if(!n)return null;const f=D.defaults.thresholds;if(!f)return null;const b=(0,be.M)(D.defaults,Pe.PU.number),u=D.defaults.decimals,g=[];for(let M=0;M<f.steps.length;M++){const p=f.steps[M],o=n.valToPos(p.value,b);if(Number.isNaN(o)||!Number.isFinite(o))continue;const y=n.bbox.height/window.devicePixelRatio,F=typeof j=="function"?S=>{const $=[...f.steps.slice(0,M),...f.steps.slice(M+1),{...f.steps[M],value:S}].sort((G,_)=>G.value-_.value);j({...f,steps:$})}:void 0,R=(0,m.jsx)(ue,{step:p,y:o,dragBounds:{top:0,bottom:y},mapPositionToValue:S=>n.posToVal(S,b),formatValue:S=>(0,r.j_)(b)(S,u).text,onChange:F},`${p.value}-${M}`);g.push(R)}return g},[ie,D,j]);return E.current?(0,m.jsx)("div",{style:{position:"absolute",overflow:"visible",left:`${(E.current.bbox.left+E.current.bbox.width)/window.devicePixelRatio}px`,top:`${E.current.bbox.top/window.devicePixelRatio}px`,width:`${Q}px`,height:`${E.current.bbox.height/window.devicePixelRatio}px`},children:q}):null};Ne.displayName="ThresholdControlsPlugin"},73125:(Qe,Ce,e)=>{e.d(Ce,{A:()=>Me});var m=e(74848),k=e(92745),Pe=e(47466),r=e(39064),be=e(41530),w=e(61048);const Me=({items:H,links:A,isPinned:X,maxHeight:ue})=>{const Se=H.find(ae=>ae.label==="Time");return(0,m.jsxs)(w.i,{children:[(0,m.jsx)(be.A,{item:{label:(0,k.t)("exemplar-tooltip-header","Exemplar"),value:Se?.value??""},isPinned:X}),(0,m.jsx)(Pe.o,{items:H.filter(ae=>ae!==Se),isPinned:X,maxHeight:ue,scrollable:ue!=null}),(0,m.jsx)(r.S,{dataLinks:A??[]})]})}},80959:(Qe,Ce,e)=>{e.r(Ce),e.d(Ce,{plugin:()=>et});var m=e(95004),k=e(16515),Pe=e(16207),r=e(92745),be=e(43173),w=e(79277),Me=e(41069),H=e(12241),A=e(74848),X=e(96540),ue=e(11576),Se=e(14477),ae=e(21275),Q=e(739),Ne=e(64400),P=e(63142),D=e(93630),j=e(18667),E=e(69234),ie=e(25422),K=e(65642),q=e(78308),n=e(36327),f=e(50784),b=e(13507),u=e(66881),g=e(8721),M=e(59427),p=e(76234),o=(l=>(l.Candles="candles",l.CandlesVolume="candles+volume",l.Volume="volume",l))(o||{}),y=(l=>(l.Candles="candles",l.OHLCBars="ohlcbars",l))(y||{}),N=(l=>(l.CloseClose="close-close",l.OpenClose="open-close",l))(N||{});const F={down:"red",flat:"gray",up:"green"},S={...{candleStyle:"candles",colorStrategy:"open-close",colors:{down:"red",up:"green",flat:"gray"},fields:{},includeAllFields:!1,mode:"candles+volume"},legend:{displayMode:Q.lm.List,showLegend:!0,placement:"bottom",calcs:[]},tooltip:{mode:Q.$N.Multi,sort:Q.xB.None}},$=()=>({open:{key:"open",name:(0,r.t)("candlestick.name-open","Open"),defaults:["open","o"],description:(0,r.t)("candlestick.description-open","Value at the start of the period")},high:{key:"high",name:(0,r.t)("candlestick.name-high","High"),defaults:["high","h","max"],description:(0,r.t)("candlestick.description-high","Maximum value within the period")},low:{key:"low",name:(0,r.t)("candlestick.name-low","Low"),defaults:["low","l","min"],description:(0,r.t)("candlestick.description-low","Minimum value within the period")},close:{key:"close",name:(0,r.t)("candlestick.name-close","Close"),defaults:["close","c"],description:(0,r.t)("candlestick.description-close","Value at the end of the period")},volume:{key:"volume",name:(0,r.t)("candlestick.name-volume","Volume"),defaults:["volume","v"],description:(0,r.t)("candlestick.description-volume","Sample count within the period")}});function G(l,c,s){const d=(0,M.UI)(l,s[c.key]);if(!d)for(const x of l.fields){const v=(0,k.Ct)(x,l).toLowerCase();if(c.defaults.includes(v)||c.defaults.includes(x.name))return x}return d}function _(l,c,s,d){if(!l?.length)return null;const x=$(),v=c.fields??{},h=l.length===1?(0,g.Yj)(l[0],l[0].fields.findIndex(i=>i.type===m.PU.time)):(0,g.Fd)({frames:l});if(!h?.length)return null;const t={aligned:h,frame:h,names:{}},me=(0,p.B_)([h],s,d);if(!me)return null;const W=t.frame=me[0],te=W.fields.findIndex(i=>i.type===m.PU.time);if(te<0)return null;const J=new Set;for(const i of Object.values(x)){const U=G(W,i,v);U&&(t[i.key]=U,J.add(U))}if(!t.open&&!t.close&&(t.open=W.fields.find(i=>i.type===m.PU.number),t.open&&J.add(t.open)),t.open&&!t.close&&!v.close){const i=t.open.values.slice(1);i.push(i[i.length-1]),t.close={...t.open,values:i,name:"Next open",state:void 0},J.add(t.close),W.fields.push(t.close),t.autoOpenClose=!0}if(t.close&&!t.open&&!v.open){const i=t.close.values.slice();i.unshift(i[0]),i.length=W.length,t.open={...t.close,values:i,name:"Previous close",state:void 0},J.add(t.open),W.fields.push(t.open),t.autoOpenClose=!0}!t.high&&!v.high&&(t.high=t.open),!t.low&&!v.low&&(t.low=t.open),c.mode===o.Volume?(t.high&&(t.high!==t.open&&J.delete(t.high),t.high=void 0),t.low&&(t.low!==t.open&&J.delete(t.low),t.low=void 0)):c.mode===o.Candles&&t.volume&&(J.delete(t.volume),t.volume=void 0);for(const i of Object.values(x)){const U=t[i.key];U&&(t.names[i.key]=(0,k.Ct)(U,t.frame))}const he=W.fields[te],pe=[he];c.includeAllFields?pe.push(...W.fields.filter(i=>i!==he)):pe.push(...J),t.frame={...t.frame,fields:pe};for(let i=0;i<t.frame.fields.length;i++){const U=t.frame.fields[i];U.state={...U.state,seriesIndex:i-1,origin:{fieldIndex:i,frameIndex:0}}}return t}var ke=e(6773);const{alpha:ee}=ke.MV;function re(l){let{mode:c,candleStyle:s,fields:d,colorStrategy:x,upColor:v,downColor:h,flatColor:t,volumeAlpha:me,flatAsUp:W=!0}=l;const te=c!==o.Volume&&d.high!=null&&d.low!=null,J=te&&s===y.Candles,he=c!==o.Candles&&d.volume!=null;function pe(a,B,de,le,oe){return a>0?de:a<0?le:oe?de:B}let i=0,U=d.open,Ye=d.high,Ze=d.low,He=d.close,Be=d.volume;return a=>{let B,de,le,oe,Ee,De;te&&(le=new Path2D,de=new Path2D,B=new Path2D),he&&(oe=new Path2D,Ee=new Path2D,De=new Path2D);let Xe=new Path2D,T=a.ctx,Ge=a.data[i],I=a.data[U],L=a.data[He],se=te?a.data[Ye]:null,je=te?a.data[Ze]:null,Te=he?a.data[Be]:null,Ke=Be!=null?Math.round(a.valToPos(0,a.series[Be].scale,!0)):null,[ve,Oe]=a.series[0].idxs,z=a.data[0],Le=I,Fe=a.bbox.width;if(z.length>1){let C=null;for(let V=0,ne=1/0;V<z.length;V++)if(Le[V]!==void 0){if(C!=null){let ye=Math.abs(z[V]-z[C]);ye<ne&&(ne=ye,Fe=Math.abs(a.valToPos(z[V],"x",!0)-a.valToPos(z[C],"x",!0)))}C=V}}let Y=Math.round(.6*Fe),we=2,xe=2;Y<=12&&(we=xe=1);let ge=Math.floor(Y/2);for(let C=ve;C<=Oe;C++){let V=Math.round(a.valToPos(Ge[C],"x",!0)),ne=C===ve?0:Math.sign(L[C]-L[C-1]),ye=Math.sign(L[C]-I[C]);if(he&&De&&Ee&&oe){let O=pe(x===N.CloseClose?ne:ye,De,Ee,oe,C===ve&&N.CloseClose?!1:W),Z=Math.round(a.valToPos(Te[C],a.series[Be].scale,!0));O.rect(V-ge,Z,Y,Ke-Z)}if(te&&le&&de&&B){let O=pe(x===N.CloseClose?ne:ye,le,de,B,C===ve&&N.CloseClose?!1:W),Z=Math.round(a.valToPos(se[C],a.series[Ye].scale,!0)),ce=Math.round(a.valToPos(je[C],a.series[Ze].scale,!0));O.rect(V-Math.floor(we/2),Z,we,ce-Z);let Re=Math.round(a.valToPos(I[C],a.series[U].scale,!0)),Ie=Math.round(a.valToPos(L[C],a.series[He].scale,!0));if(J){let We=Math.min(Re,Ie),Ve=Math.max(Re,Ie),Ue=Math.max(1,Ve-We);O.rect(V-ge,We,Y,Ue),x===N.CloseClose&&ye>=0&&Ue>xe*2&&Xe.rect(V-ge+xe,We+xe,Y-xe*2,Ue-xe*2)}else O.rect(V-ge,Re,ge,we),O.rect(V,Ie,ge,we)}}T.save(),T.rect(a.bbox.left,a.bbox.top,a.bbox.width,a.bbox.height),T.clip(),he&&De&&Ee&&oe&&(T.fillStyle=ee(v,me),T.fill(Ee),T.fillStyle=ee(h,me),T.fill(oe),T.fillStyle=ee(t,me),T.fill(De)),te&&le&&de&&B&&(T.fillStyle=v,T.fill(de),T.fillStyle=h,T.fill(B),T.fillStyle=t,T.fill(le),T.globalCompositeOperation="destination-out",T.fill(Xe)),T.restore()}}const fe=({data:l,id:c,timeRange:s,timeZone:d,width:x,height:v,options:h,fieldConfig:t,onChangeTimeRange:me,replaceVariables:W})=>{const{sync:te,eventsScope:J,canAddAnnotations:he,onThresholdsChange:pe,canEditThresholds:i,showThresholds:U,dataLinkPostProcessor:Ye,eventBus:Ze,canExecuteActions:He}=(0,Ne.d2)(),Be=(0,X.useMemo)(()=>He?.()??!1,[He]),a=(0,P.$j)(),B=(0,X.useMemo)(()=>_(l.series,h,a,s),[l.series,h,a,s]),[de,le]=(0,X.useState)(null),oe=te?.()??ae.yV.Off,{renderers:Ee,tweakScale:De,tweakAxis:Xe,shouldRenderPrice:T}=(0,X.useMemo)(()=>{let I=(O,Z)=>O,L=(O,Z)=>O,se={renderers:[],tweakScale:I,tweakAxis:L,shouldRenderPrice:!1};if(!B)return se;const je=B.names;if(!Object.keys(je).length)return se;const{mode:Te,candleStyle:Ke,colorStrategy:ve}=h,Oe={...F,...h.colors};let{open:z,high:Le,low:Fe,close:Y,volume:we}=je;if(z==null||Y==null)return se;let xe=.5,ge=-1,C=!1;if(we!=null&&Te!==o.Candles){let O=B.volume;if(O!=null){C=!0;let{fillOpacity:Z}=O.config.custom;Z&&(xe=Z/100),Te!==o.Volume&&(O.config={...O.config},O.config.unit="short",O.display=(0,ue.J)({field:O,theme:K.$W.theme2}),L=(ce,Re)=>{if(Re.name===B.volume?.name){let Ie=(We,Ve)=>{let Ue=[],tt=We.series[ge].max;for(let Je=0;Je<Ve.length&&(Ue.push(Ve[Je]),!(tt&&Ve[Je]>tt));Je++);return Ue};ce.space=20,ce.filter=Ie,ce.ticks={...ce.ticks,filter:Ie}}return ce},I=(ce,Re)=>(Re.name===B.volume?.name&&(ce.range=(Ie,We,Ve)=>[0,Ve*7]),ce))}}let V=Te!==o.Volume&&Le!=null&&Fe!=null;if(!V&&!C)return se;let ne={},ye=[];return V?ne={open:z,high:Le,low:Fe,close:Y}:ye.push(z,Y),C&&(ne.volume=we,ne.open=z,ne.close=Y),{shouldRenderPrice:V,renderers:[{fieldMap:ne,indicesOnly:ye,init:(O,Z)=>{ge=Z.volume,O.addHook("drawAxes",re({mode:Te,fields:Z,upColor:K.$W.theme2.visualization.getColorByName(Oe.up),downColor:K.$W.theme2.visualization.getColorByName(Oe.down),flatColor:K.$W.theme2.visualization.getColorByName(Oe.flat),volumeAlpha:xe,colorStrategy:ve,candleStyle:Ke,flatAsUp:!0}))}}],tweakScale:I,tweakAxis:L}},[h,l.structureRev,l.series.length]);if(!B)return(0,A.jsx)(Se.a,{panelId:c,fieldConfig:t,data:l,needsTimeField:!0,needsNumberField:!0});if(T)for(let I in Ee[0].fieldMap){let L=B[I];L.config={...L.config,custom:{...L.config.custom,hideFrom:{legend:!0,tooltip:!1,viz:!1}}}}const Ge=!!he?.();return(0,A.jsx)(ie.Z,{frames:[B.frame],structureRev:l.structureRev,timeRange:s,timeZone:d,width:x,height:v,legend:h.legend,renderers:Ee,tweakAxis:Xe,tweakScale:De,options:h,replaceVariables:W,dataLinkPostProcessor:Ye,cursorSync:oe,children:(I,L)=>(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(D.Z,{config:I}),oe!==ae.yV.Off&&(0,A.jsx)(j.K,{config:I,eventBus:Ze,frame:L}),h.tooltip.mode!==Q.$N.None&&(0,A.jsx)(E.xl,{config:I,hoverMode:h.tooltip.mode===Q.$N.Single?E.b3.xOne:E.b3.xAll,queryZoom:me,clientZoom:!0,syncMode:oe,syncScope:J,getDataLinks:(se,je)=>L.fields[se].getLinks?.({valueRowIndex:je})??[],render:(se,je,Te,Ke=!1,ve,Oe,z,Le)=>{if(Ge&&Oe!=null){le(Oe),ve();return}const Fe=()=>{let Y=se.posToVal(se.cursor.left,"x");le({from:Y,to:Y}),ve()};return(0,A.jsx)(q.k,{series:L,dataIdxs:je,seriesIdx:Te,mode:z?Q.$N.Multi:h.tooltip.mode,sortOrder:h.tooltip.sort,isPinned:Ke,annotate:Ge?Fe:void 0,maxHeight:h.tooltip.maxHeight,replaceVariables:W,dataLinks:Le,canExecuteActions:Be})},maxWidth:h.tooltip.maxWidth}),(0,A.jsx)(n.W,{annotations:l.annotations??[],config:I,timeZone:d,newRange:de,setNewRange:le}),(0,A.jsx)(b.U,{config:I,onChangeTimeRange:me}),l.annotations&&(0,A.jsx)(f.z,{config:I,exemplars:l.annotations,timeZone:d,maxHeight:h.tooltip.maxHeight,maxWidth:h.tooltip.maxWidth}),(i&&pe||U)&&(0,A.jsx)(u.p,{config:I,fieldConfig:t,onThresholdsChange:i?pe:void 0})]})})};var $e=e(38919),qe=e(73495);class ze{getSuggestionsForData(c){const{dataSummary:s}=c;if(!c.data?.series||!s.hasData||s.timeFieldCount<1||s.numberFieldCount<2||s.numberFieldCount>10)return;const d=_(c.data.series,S,be.$.theme2);if(!d||d.open===d.high&&d.open===d.low)return;c.getListAppender({name:"",pluginId:"candlestick",options:{},fieldConfig:{defaults:{custom:{}},overrides:[]}}).append({name:qe.m.Candlestick,options:S,fieldConfig:{defaults:{},overrides:[]},score:d.autoOpenClose?$e.nQ.Good:$e.nQ.Best})}}const _e=l=>l.type===m.PU.number;function Ae(l,c,s,d){let x="Auto ";if(s){const v=s[c.key];v?.config?(x+="= "+(0,k.Ct)(v),v===s?.open&&c.key!=="open"&&(x+=` (${c.defaults.join(",")})`)):x+=`(${c.defaults.join(",")})`}l.addFieldNamePicker({path:`fields.${c.key}`,name:c.name,description:c.description,category:d,settings:{filter:_e,placeholderText:x}})}const et=new Pe.m(fe).useFieldConfig((0,H.V)(H.S)).setPanelOptions((l,c)=>{const s=[(0,r.t)("candlestick.category-candlestick","Candlestick")],d=c.options??S,x=_(c.data,d,be.$.theme2);l.addRadio({path:"mode",name:(0,r.t)("candlestick.name-mode","Mode"),category:s,description:"",defaultValue:S.mode,settings:{options:[{label:(0,r.t)("candlestick.mode-options.label-candles","Candles"),value:o.Candles},{label:(0,r.t)("candlestick.mode-options.label-volume","Volume"),value:o.Volume},{label:(0,r.t)("candlestick.mode-options.label-both","Both"),value:o.CandlesVolume}]}}).addRadio({path:"candleStyle",name:(0,r.t)("candlestick.name-candle-style","Candle style"),category:s,description:"",defaultValue:S.candleStyle,settings:{options:[{label:(0,r.t)("candlestick.candle-style-options.label-candles","Candles"),value:y.Candles},{label:(0,r.t)("candlestick.candle-style-options.label-ohlc-bars","OHLC Bars"),value:y.OHLCBars}]},showIf:h=>h.mode!==o.Volume}).addRadio({path:"colorStrategy",name:(0,r.t)("candlestick.name-color-strategy","Color strategy"),category:s,description:"",defaultValue:S.colorStrategy,settings:{options:[{label:(0,r.t)("candlestick.color-strategy-options.label-since-open","Since Open"),value:N.OpenClose},{label:(0,r.t)("candlestick.color-strategy-options.label-since-prior-close","Since Prior Close"),value:N.CloseClose}]}}).addColorPicker({path:"colors.up",name:(0,r.t)("candlestick.name-up-color","Up color"),category:s,defaultValue:F.up}).addColorPicker({path:"colors.down",name:(0,r.t)("candlestick.name-down-color","Down color"),category:s,defaultValue:F.down});const v=$();Ae(l,v.open,x,s),d.mode!==o.Volume&&(Ae(l,v.high,x,s),Ae(l,v.low,x,s)),Ae(l,v.close,x,s),d.mode!==o.Candles&&Ae(l,v.volume,x,s),l.addRadio({path:"includeAllFields",name:(0,r.t)("candlestick.name-additional-fields","Additional fields"),category:s,description:(0,r.t)("candlestick.description-additional-fields","Use standard timeseries options to configure any fields not mapped above"),defaultValue:S.includeAllFields,settings:{options:[{label:(0,r.t)("candlestick.additional-fields-options.label-ignore","Ignore"),value:!1},{label:(0,r.t)("candlestick.additional-fields-options.label-include","Include"),value:!0}]}}),w.D(l,!1,!0),Me.H(l)}).setDataSupport({annotations:!0,alertStates:!0}).setSuggestionsSupplier(new ze)}}]);

//# sourceMappingURL=candlestickPanel.d95b74011228e7a852a3.js.map