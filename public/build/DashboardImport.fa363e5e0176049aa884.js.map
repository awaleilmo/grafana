{"version":3,"file":"DashboardImport.fa363e5e0176049aa884.js","mappings":"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","sources":["webpack://grafana/./public/app/features/manage-dashboards/state/actions.ts","webpack://grafana/./public/app/features/manage-dashboards/utils/validation.ts","webpack://grafana/./public/app/features/dashboard-scene/v2schema/ImportDashboardFormV2.tsx","webpack://grafana/./public/app/features/dashboard-scene/v2schema/ImportDashboardOverviewV2.tsx","webpack://grafana/./public/app/features/manage-dashboards/components/ImportDashboardLibraryPanelsList.tsx","webpack://grafana/./public/app/features/manage-dashboards/components/ImportDashboardForm.tsx","webpack://grafana/./public/app/features/manage-dashboards/components/ImportDashboardOverview.tsx","webpack://grafana/./public/app/features/manage-dashboards/DashboardImportPage.tsx","webpack://grafana/./public/app/core/components/Form/Form.tsx"],"sourcesContent":["import { DataSourceInstanceSettings } from '@grafana/data';\nimport { getBackendSrv, getDataSourceSrv, isFetchError } from '@grafana/runtime';\nimport {\n  Spec as DashboardV2Spec,\n  QueryVariableKind,\n  PanelQueryKind,\n  AnnotationQueryKind,\n} from '@grafana/schema/dist/esm/schema/dashboard/v2';\nimport { notifyApp } from 'app/core/actions';\nimport { createErrorNotification } from 'app/core/copy/appNotification';\nimport { browseDashboardsAPI, ImportInputs } from 'app/features/browse-dashboards/api/browseDashboardsAPI';\nimport { getDatasourceSrv } from 'app/features/plugins/datasource_srv';\nimport { ThunkResult } from 'app/types/store';\n\nimport {\n  Input,\n  InputUsage,\n  LibraryElementExport,\n  LibraryPanel,\n} from '../../dashboard/components/DashExportModal/DashboardExporter';\nimport { getLibraryPanel } from '../../library-panels/state/api';\nimport { LibraryElementDTO, LibraryElementKind } from '../../library-panels/types';\nimport { DashboardJson } from '../types';\n\nimport {\n  clearDashboard,\n  DataSourceInput,\n  fetchDashboard,\n  fetchFailed,\n  ImportDashboardDTO,\n  ImportDashboardState,\n  InputType,\n  LibraryPanelInput,\n  LibraryPanelInputState,\n  setGcomDashboard,\n  setInputs,\n  setJsonDashboard,\n  setLibraryPanelInputs,\n} from './reducers';\n\nexport function fetchGcomDashboard(id: string): ThunkResult<void> {\n  return async (dispatch) => {\n    try {\n      dispatch(fetchDashboard());\n      const dashboard = await getBackendSrv().get(`/api/gnet/dashboards/${id}`);\n      await dispatch(processElements(dashboard.json));\n      await dispatch(processGcomDashboard(dashboard));\n      dispatch(processInputs());\n    } catch (error) {\n      dispatch(fetchFailed());\n      if (isFetchError(error)) {\n        dispatch(notifyApp(createErrorNotification(error.data.message || error)));\n      }\n    }\n  };\n}\n\nexport function importDashboardJson(dashboard: any): ThunkResult<void> {\n  return async (dispatch) => {\n    await dispatch(processElements(dashboard));\n    await dispatch(processJsonDashboard(dashboard));\n    dispatch(processInputs());\n  };\n}\n\nexport function importDashboardV2Json(dashboard: DashboardV2Spec): ThunkResult<void> {\n  return async (dispatch) => {\n    dispatch(setJsonDashboard(dashboard));\n    dispatch(processV2Datasources(dashboard));\n  };\n}\n\nconst getNewLibraryPanelsByInput = (input: Input, state: ImportDashboardState): LibraryPanel[] | undefined => {\n  return input?.usage?.libraryPanels?.filter((usageLibPanel) =>\n    state.inputs.libraryPanels.some(\n      (libPanel) => libPanel.state !== LibraryPanelInputState.Exists && libPanel.model.uid === usageLibPanel.uid\n    )\n  );\n};\n\nexport function processDashboard(dashboardJson: DashboardJson, state: ImportDashboardState): DashboardJson {\n  let inputs = dashboardJson.__inputs;\n  if (!!state.inputs.libraryPanels?.length) {\n    const filteredUsedInputs: Input[] = [];\n    dashboardJson.__inputs?.forEach((input: Input) => {\n      if (!input?.usage?.libraryPanels) {\n        filteredUsedInputs.push(input);\n        return;\n      }\n\n      const newLibraryPanels = getNewLibraryPanelsByInput(input, state);\n      input.usage = { libraryPanels: newLibraryPanels };\n\n      const isInputBeingUsedByANewLibraryPanel = !!newLibraryPanels?.length;\n      if (isInputBeingUsedByANewLibraryPanel) {\n        filteredUsedInputs.push(input);\n      }\n    });\n    inputs = filteredUsedInputs;\n  }\n\n  return { ...dashboardJson, __inputs: inputs };\n}\n\nfunction processGcomDashboard(dashboard: { json: DashboardJson }): ThunkResult<void> {\n  return (dispatch, getState) => {\n    const state = getState().importDashboard;\n    const dashboardJson = processDashboard(dashboard.json, state);\n    dispatch(setGcomDashboard({ ...dashboard, json: dashboardJson }));\n  };\n}\n\nfunction processJsonDashboard(dashboardJson: DashboardJson): ThunkResult<void> {\n  return (dispatch, getState) => {\n    const state = getState().importDashboard;\n    const dashboard = processDashboard(dashboardJson, state);\n    dispatch(setJsonDashboard(dashboard));\n  };\n}\n\nfunction processInputs(): ThunkResult<void> {\n  return (dispatch, getState) => {\n    const dashboard = getState().importDashboard.dashboard;\n    if (dashboard && dashboard.__inputs) {\n      const inputs: any[] = [];\n      dashboard.__inputs.forEach((input: any) => {\n        const inputModel: any = {\n          name: input.name,\n          label: input.label,\n          info: input.description,\n          value: input.value,\n          type: input.type,\n          pluginId: input.pluginId,\n          options: [],\n        };\n\n        inputModel.description = getDataSourceDescription(input);\n\n        if (input.type === InputType.DataSource) {\n          getDataSourceOptions(input, inputModel);\n        } else if (!inputModel.info) {\n          inputModel.info = 'Specify a string constant';\n        }\n\n        inputs.push(inputModel);\n      });\n      dispatch(setInputs(inputs));\n    }\n  };\n}\n\nfunction processElements(dashboardJson?: { __elements?: Record<string, LibraryElementExport> }): ThunkResult<void> {\n  return async function (dispatch) {\n    const libraryPanelInputs = await getLibraryPanelInputs(dashboardJson);\n    dispatch(setLibraryPanelInputs(libraryPanelInputs));\n  };\n}\n\nexport function processV2Datasources(dashboard: DashboardV2Spec): ThunkResult<void> {\n  return async function (dispatch) {\n    const { elements, variables, annotations } = dashboard;\n    // get elements from dashboard\n    // each element can only be a panel\n    let inputs: Record<string, DataSourceInput> = {};\n    for (const element of Object.values(elements)) {\n      if (element.kind !== 'Panel') {\n        throw new Error('Only panels are currenlty supported in v2 dashboards');\n      }\n\n      if (element.spec.data.spec.queries.length > 0) {\n        for (const query of element.spec.data.spec.queries) {\n          inputs = await processV2DatasourceInput(query.spec, inputs);\n        }\n      }\n    }\n\n    for (const variable of variables) {\n      if (variable.kind === 'QueryVariable') {\n        inputs = await processV2DatasourceInput(variable.spec, inputs);\n      }\n    }\n\n    for (const annotation of annotations) {\n      inputs = await processV2DatasourceInput(annotation.spec, inputs);\n    }\n\n    dispatch(setInputs(Object.values(inputs)));\n  };\n}\n\nexport async function getLibraryPanelInputs(dashboardJson?: {\n  __elements?: Record<string, LibraryElementExport>;\n}): Promise<LibraryPanelInput[]> {\n  if (!dashboardJson || !dashboardJson.__elements) {\n    return [];\n  }\n\n  const libraryPanelInputs: LibraryPanelInput[] = [];\n\n  for (const element of Object.values(dashboardJson.__elements)) {\n    if (element.kind !== LibraryElementKind.Panel) {\n      continue;\n    }\n\n    const model = element.model;\n    const { type, description } = model;\n    const { uid, name } = element;\n    const input: LibraryPanelInput = {\n      model: {\n        model,\n        uid,\n        name,\n        version: 0,\n        type,\n        kind: LibraryElementKind.Panel,\n        description,\n      } as LibraryElementDTO,\n      state: LibraryPanelInputState.New,\n    };\n\n    try {\n      const panelInDb = await getLibraryPanel(uid, true);\n      input.state = LibraryPanelInputState.Exists;\n      input.model = panelInDb;\n    } catch (e: any) {\n      if (e.status !== 404) {\n        throw e;\n      }\n    }\n\n    libraryPanelInputs.push(input);\n  }\n\n  return libraryPanelInputs;\n}\n\nexport function clearLoadedDashboard(): ThunkResult<void> {\n  return (dispatch) => {\n    dispatch(clearDashboard());\n  };\n}\n\nexport function importDashboard(importDashboardForm: ImportDashboardDTO): ThunkResult<void> {\n  return async (dispatch, getState) => {\n    const dashboard = getState().importDashboard.dashboard;\n    const inputs = getState().importDashboard.inputs;\n\n    const inputsToPersist: ImportInputs[] = [];\n    importDashboardForm.dataSources?.forEach((dataSource: DataSourceInstanceSettings, index: number) => {\n      const input = inputs.dataSources[index];\n      inputsToPersist.push({\n        name: input.name,\n        type: input.type,\n        pluginId: input.pluginId,\n        value: dataSource.uid,\n      });\n    });\n\n    importDashboardForm.constants?.forEach((constant, index) => {\n      const input = inputs.constants[index];\n\n      inputsToPersist.push({\n        value: constant,\n        name: input.name,\n        type: input.type,\n      });\n    });\n\n    dispatch(\n      browseDashboardsAPI.endpoints.importDashboard.initiate({\n        // uid: if user changed it, take the new uid from importDashboardForm,\n        // else read it from original dashboard\n        // by default the uid input is disabled, onSubmit ignores values from disabled inputs\n        dashboard: { ...dashboard, title: importDashboardForm.title, uid: importDashboardForm.uid || dashboard.uid },\n        overwrite: true,\n        inputs: inputsToPersist,\n        folderUid: importDashboardForm.folder.uid,\n      })\n    );\n  };\n}\n\nconst getDataSourceOptions = (input: { pluginId: string; pluginName: string }, inputModel: any) => {\n  const sources = getDataSourceSrv().getList({ pluginId: input.pluginId });\n\n  if (sources.length === 0) {\n    inputModel.info = 'No data sources of type ' + input.pluginName + ' found';\n  } else if (!inputModel.info) {\n    inputModel.info = 'Select a ' + input.pluginName + ' data source';\n  }\n};\n\nconst getDataSourceDescription = (input: { usage?: InputUsage }): string | undefined => {\n  if (!input.usage) {\n    return undefined;\n  }\n\n  if (input.usage.libraryPanels) {\n    const libPanelNames = input.usage.libraryPanels.reduce(\n      (acc: string, libPanel, index) => (index === 0 ? libPanel.name : `${acc}, ${libPanel.name}`),\n      ''\n    );\n    return `List of affected library panels: ${libPanelNames}`;\n  }\n\n  return undefined;\n};\n\nexport async function processV2DatasourceInput(\n  spec: PanelQueryKind['spec'] | QueryVariableKind['spec'] | AnnotationQueryKind['spec'],\n  inputs: Record<string, DataSourceInput> = {}\n) {\n  const datasourceRef = spec.query.datasource;\n  let dataSourceInput: DataSourceInput | undefined;\n  const dsType = spec.query.group;\n\n  if (!datasourceRef) {\n    // if dsType is grafana, it means we are using a built-in annotation or default grafana datasource, in those\n    // cases we don't need to map it\n    // \"datasource\" type is what we call \"--Dashboard--\" datasource <.-.>\n    if (dsType === 'grafana' || dsType === 'datasource') {\n      return inputs;\n    }\n  }\n\n  const datasource = await getDatasourceSrv().get({ type: dsType });\n  if (datasource) {\n    dataSourceInput = {\n      name: datasource.name,\n      label: datasource.name,\n      info: `Select a ${datasource.name} data source`,\n      value: datasource.uid,\n      type: InputType.DataSource,\n      pluginId: datasource.meta?.id,\n    };\n    inputs[datasource.meta?.id] = dataSourceInput;\n  } else {\n    dataSourceInput = {\n      name: dsType,\n      label: dsType,\n      info: `No data sources of type ${dsType} found`,\n      value: '',\n      type: InputType.DataSource,\n      pluginId: dsType,\n    };\n    inputs[dsType] = dataSourceInput;\n  }\n  return inputs;\n}\n","import { t } from '@grafana/i18n';\nimport { AnnoKeyFolderTitle } from 'app/features/apiserver/types';\nimport { getDashboardAPI } from 'app/features/dashboard/api/dashboard_api';\nimport { isDashboardV2Resource } from 'app/features/dashboard/api/utils';\n\nimport { validationSrv } from '../services/ValidationSrv';\n\nexport const validateDashboardJson = (json: string) => {\n  let dashboard;\n  try {\n    dashboard = JSON.parse(json);\n  } catch (error) {\n    return t('dashboard.validation.invalid-json', 'Not valid JSON');\n  }\n  if (dashboard && dashboard.hasOwnProperty('tags')) {\n    if (Array.isArray(dashboard.tags)) {\n      const hasInvalidTag = dashboard.tags.some((tag: string) => typeof tag !== 'string');\n      if (hasInvalidTag) {\n        return t('dashboard.validation.tags-expected-strings', 'tags expected array of strings');\n      }\n    } else {\n      return t('dashboard.validation.tags-expected-array', 'tags expected array');\n    }\n  }\n  return true;\n};\n\nexport const validateGcomDashboard = (gcomDashboard: string) => {\n  // From DashboardImportCtrl\n  const match = /(^\\d+$)|dashboards\\/(\\d+)/.exec(gcomDashboard);\n\n  return match && (match[1] || match[2])\n    ? true\n    : t('dashboard.validation.invalid-dashboard-id', 'Could not find a valid Grafana.com ID');\n};\n\nexport const validateTitle = (newTitle: string, folderUid: string) => {\n  return validationSrv\n    .validateNewDashboardName(folderUid, newTitle)\n    .then(() => {\n      return true;\n    })\n    .catch((error) => {\n      if (error.type === 'EXISTING') {\n        return error.message;\n      }\n    });\n};\n\nexport const validateUid = (value: string) => {\n  return getDashboardAPI()\n    .getDashboardDTO(value)\n    .then((existingDashboard) => {\n      const isV2 = isDashboardV2Resource(existingDashboard);\n      const dashboard = isV2 ? existingDashboard.spec : existingDashboard.dashboard;\n      const folderTitle = isV2\n        ? existingDashboard.metadata.annotations?.[AnnoKeyFolderTitle]\n        : existingDashboard.meta.folderTitle;\n      return `Dashboard named '${dashboard.title}' in folder '${folderTitle}' has the same UID`;\n    })\n    .catch((error) => {\n      error.isHandled = true;\n\n      // when Editor user tries to import admin only dashboard (with same uid) he gets an unhelpful 403 error\n      //  therefore handling this use case to return some indication of whats wrong\n      if (error.status === 403) {\n        return 'Dashboard with the same UID already exists';\n      }\n      return true;\n    });\n};\n","import { useEffect, useState } from 'react';\nimport { Controller, FieldErrors, UseFormReturn } from 'react-hook-form';\n\nimport { selectors } from '@grafana/e2e-selectors';\nimport { Trans, t } from '@grafana/i18n';\nimport { ExpressionDatasourceRef } from '@grafana/runtime/internal';\nimport { Spec as DashboardV2Spec } from '@grafana/schema/dist/esm/schema/dashboard/v2';\nimport { Button, Field, FormFieldErrors, FormsOnSubmit, Stack, Input } from '@grafana/ui';\nimport { FolderPicker } from 'app/core/components/Select/FolderPicker';\nimport { SaveDashboardCommand } from 'app/features/dashboard/components/SaveDashboard/types';\nimport { DataSourcePicker } from 'app/features/datasources/components/picker/DataSourcePicker';\nimport { DashboardInputs, DataSourceInput } from 'app/features/manage-dashboards/state/reducers';\nimport { validateTitle } from 'app/features/manage-dashboards/utils/validation';\ninterface Props\n  extends Pick<\n    UseFormReturn<SaveDashboardCommand<DashboardV2Spec> & { [key: `datasource-${string}`]: string }>,\n    'register' | 'control' | 'getValues' | 'watch'\n  > {\n  inputs: DashboardInputs;\n  uidReset: boolean;\n  errors: FieldErrors<SaveDashboardCommand<DashboardV2Spec> & { [key: `datasource-${string}`]: string }>;\n  onCancel: () => void;\n  onUidReset: () => void;\n  onSubmit: FormsOnSubmit<SaveDashboardCommand<DashboardV2Spec> & { [key: `datasource-${string}`]: string }>;\n}\n\nexport const ImportDashboardFormV2 = ({\n  register,\n  errors,\n  control,\n  inputs,\n  getValues,\n  uidReset,\n  onUidReset,\n  onCancel,\n  onSubmit,\n  watch,\n}: Props) => {\n  const [isSubmitted, setSubmitted] = useState(false);\n  const [selectedDataSources, setSelectedDataSources] = useState<Record<string, { uid: string; type: string }>>({});\n  /*\n    This useEffect is needed for overwriting a dashboard. It\n    submits the form even if there's validation errors on title or uid.\n  */\n  useEffect(() => {\n    if (isSubmitted && (errors.dashboard?.title || errors.k8s?.name)) {\n      const formValues = getValues();\n      onSubmit({\n        ...formValues,\n        dashboard: {\n          ...formValues.dashboard,\n          title: formValues.dashboard.title,\n        },\n      });\n    }\n  }, [errors, getValues, isSubmitted, onSubmit]);\n\n  return (\n    <>\n      <Trans i18nKey=\"manage-dashboards.import-dashboard-form.options\">Options</Trans>\n      <Field\n        label={t('manage-dashboards.import-dashboard-form.label-name', 'Name')}\n        invalid={!!errors.dashboard?.title}\n        error={errors.dashboard?.title && errors.dashboard?.title.message}\n      >\n        <Input\n          {...(register as any)('dashboard.title', {\n            required: 'Name is required',\n            validate: async (v: string) => await validateTitle(v, getValues().folderUid ?? ''),\n          })}\n          type=\"text\"\n          data-testid={selectors.components.ImportDashboardForm.name}\n        />\n      </Field>\n      <Field label={t('dashboard-scene.import-dashboard-form-v2.label-folder', 'Folder')}>\n        <Controller<any>\n          render={({ field: { ref, value, onChange, ...field } }) => (\n            <FolderPicker\n              {...field}\n              onChange={(uid, title) => {\n                onChange(uid, title);\n              }}\n              value={value}\n            />\n          )}\n          name=\"folderUid\"\n          control={control}\n        />\n      </Field>\n      {inputs.dataSources &&\n        inputs.dataSources.map((input: DataSourceInput) => {\n          if (input.pluginId === ExpressionDatasourceRef.type) {\n            return null;\n          }\n\n          const dataSourceOption = `datasource-${input.pluginId}` as const;\n\n          return (\n            <Field\n              label={input.label}\n              description={input.description}\n              key={input.pluginId}\n              invalid={!!errors[dataSourceOption]}\n              error={errors[dataSourceOption] ? 'Please select a data source' : undefined}\n            >\n              <Controller<any>\n                name={dataSourceOption}\n                render={({ field: { ref, ...field } }) => (\n                  <DataSourcePicker\n                    {...field}\n                    noDefault={true}\n                    placeholder={input.info}\n                    pluginId={input.pluginId}\n                    current={selectedDataSources[input.pluginId]}\n                    onChange={(ds) => {\n                      field.onChange(ds);\n                      // Update our selected datasources map\n                      setSelectedDataSources((prev) => ({\n                        ...prev,\n                        [input.pluginId]: {\n                          uid: ds.uid,\n                          type: ds.type,\n                        },\n                      }));\n                    }}\n                  />\n                )}\n                control={control}\n                rules={{ required: true }}\n              />\n            </Field>\n          );\n        })}\n\n      <Stack>\n        <Button\n          type=\"submit\"\n          data-testid={selectors.components.ImportDashboardForm.submit}\n          variant={getButtonVariant(errors)}\n          onClick={() => {\n            setSubmitted(true);\n          }}\n        >\n          {getButtonText(errors)}\n        </Button>\n        <Button type=\"reset\" variant=\"secondary\" onClick={onCancel}>\n          <Trans i18nKey=\"dashboard-scene.import-dashboard-form-v2.cancel\">Cancel</Trans>\n        </Button>\n      </Stack>\n    </>\n  );\n};\n\nfunction getButtonVariant(\n  errors: FormFieldErrors<SaveDashboardCommand<DashboardV2Spec> & { [key: `datasource-${string}`]: string }>\n) {\n  return errors && (errors.dashboard?.title || errors.k8s?.name) ? 'destructive' : 'primary';\n}\n\nfunction getButtonText(\n  errors: FormFieldErrors<SaveDashboardCommand<DashboardV2Spec> & { [key: `datasource-${string}`]: string }>\n) {\n  return errors && (errors.dashboard?.title || errors.k8s?.name) ? 'Import (Overwrite)' : 'Import';\n}\n","import { useState } from 'react';\n\nimport { locationUtil } from '@grafana/data';\nimport { locationService, reportInteraction } from '@grafana/runtime';\nimport {\n  AnnotationQueryKind,\n  Spec as DashboardV2Spec,\n  defaultDataQueryKind,\n} from '@grafana/schema/dist/esm/schema/dashboard/v2';\nimport { Form } from 'app/core/components/Form/Form';\nimport { getDashboardAPI } from 'app/features/dashboard/api/dashboard_api';\nimport { SaveDashboardCommand } from 'app/features/dashboard/components/SaveDashboard/types';\nimport { clearLoadedDashboard } from 'app/features/manage-dashboards/state/actions';\nimport { useDispatch, useSelector, StoreState } from 'app/types/store';\n\nimport { ImportDashboardFormV2 } from './ImportDashboardFormV2';\n\nconst IMPORT_FINISHED_EVENT_NAME = 'dashboard_import_imported';\n\ntype FormData = SaveDashboardCommand<DashboardV2Spec> & { [key: `datasource-${string}`]: string };\n\nexport function ImportDashboardOverviewV2() {\n  const [uidReset, setUidReset] = useState(false);\n  const dispatch = useDispatch();\n\n  // Get state from Redux store\n  const searchObj = locationService.getSearchObject();\n  const dashboard = useSelector((state: StoreState) => state.importDashboard.dashboard as DashboardV2Spec);\n  const inputs = useSelector((state: StoreState) => state.importDashboard.inputs);\n  const folder = searchObj.folderUid ? { uid: String(searchObj.folderUid) } : { uid: '' };\n\n  function onUidReset() {\n    setUidReset(true);\n  }\n\n  function onCancel() {\n    dispatch(clearLoadedDashboard());\n  }\n\n  async function onSubmit(form: FormData) {\n    reportInteraction(IMPORT_FINISHED_EVENT_NAME);\n\n    const dashboardWithDataSources: DashboardV2Spec = {\n      ...dashboard,\n      title: form.dashboard.title,\n      annotations: dashboard.annotations?.map((annotation: AnnotationQueryKind) => {\n        const dsType = annotation.spec.query?.spec.group;\n        if (dsType) {\n          if (form[`datasource-${dsType}` as keyof typeof form]) {\n            const ds = form[`datasource-${dsType}` as keyof typeof form] as { uid: string; type: string };\n            return {\n              ...annotation,\n              spec: {\n                ...annotation.spec,\n                query: {\n                  kind: 'DataQuery',\n                  group: dsType,\n                  version: defaultDataQueryKind().version,\n                  datasource: { name: ds.uid },\n                  spec: {\n                    ...annotation.spec.query?.spec,\n                  },\n                },\n              },\n            };\n          }\n        }\n        return annotation;\n      }),\n      variables: dashboard.variables?.map((variable) => {\n        if (variable.kind === 'QueryVariable') {\n          const dsType = variable.spec.query?.spec.group;\n          if (dsType) {\n            if (form[`datasource-${dsType}` as keyof typeof form]) {\n              const ds = form[`datasource-${dsType}` as keyof typeof form] as { uid: string; type: string };\n              return {\n                ...variable,\n                spec: {\n                  ...variable.spec,\n                  query: {\n                    ...variable.spec.query,\n                    spec: {\n                      ...variable.spec.query.spec,\n                      group: ds.type,\n                      datasource: {\n                        name: ds.uid,\n                      },\n                    },\n                  },\n                  options: [],\n                  current: {\n                    text: '',\n                    value: '',\n                  },\n                  refresh: 'onDashboardLoad',\n                },\n              };\n            }\n          }\n        } else if (variable.kind === 'DatasourceVariable') {\n          return {\n            ...variable,\n            spec: {\n              ...variable.spec,\n              current: {\n                text: '',\n                value: '',\n              },\n            },\n          };\n        }\n        return variable;\n      }),\n      elements: Object.fromEntries(\n        Object.entries(dashboard.elements).map(([key, element]) => {\n          if (element.kind === 'Panel') {\n            const panel = { ...element.spec };\n            if (panel.data?.kind === 'QueryGroup') {\n              const newQueries = panel.data.spec.queries.map((query) => {\n                if (query.kind === 'PanelQuery') {\n                  const queryType = query.spec.query?.kind;\n                  // Match datasource by query kind\n                  if (queryType && form[`datasource-${queryType}` as keyof typeof form]) {\n                    const ds = form[`datasource-${queryType}` as keyof typeof form] as { uid: string; type: string };\n                    return {\n                      ...query,\n                      spec: {\n                        ...query.spec,\n                        datasource: {\n                          uid: ds.uid,\n                          type: ds.type,\n                        },\n                      },\n                    };\n                  }\n                }\n                return query;\n              });\n              panel.data = {\n                ...panel.data,\n                spec: {\n                  ...panel.data.spec,\n                  queries: newQueries,\n                },\n              };\n            }\n            return [\n              key,\n              {\n                kind: element.kind,\n                spec: panel,\n              },\n            ];\n          }\n          return [key, element];\n        })\n      ),\n    };\n\n    const result = await getDashboardAPI('v2').saveDashboard({\n      ...form,\n      dashboard: dashboardWithDataSources,\n    });\n\n    if (result.url) {\n      const dashboardUrl = locationUtil.stripBaseFromUrl(result.url);\n      locationService.push(dashboardUrl);\n    }\n  }\n\n  return (\n    <>\n      <Form<FormData>\n        onSubmit={onSubmit}\n        defaultValues={{ dashboard, k8s: { annotations: { 'grafana.app/folder': folder.uid } } }}\n        validateOnMount\n        validateOn=\"onChange\"\n      >\n        {({ register, errors, control, watch, getValues }) => (\n          <ImportDashboardFormV2\n            register={register}\n            inputs={inputs}\n            errors={errors}\n            control={control}\n            getValues={getValues}\n            uidReset={uidReset}\n            onCancel={onCancel}\n            onUidReset={onUidReset}\n            onSubmit={onSubmit}\n            watch={watch}\n          />\n        )}\n      </Form>\n    </>\n  );\n}\n","import { css } from '@emotion/css';\nimport { ReactElement } from 'react';\n\nimport { GrafanaTheme2 } from '@grafana/data';\nimport { LibraryPanel } from '@grafana/schema';\nimport { Field, useStyles2 } from '@grafana/ui';\n\nimport { LibraryPanelCard } from '../../library-panels/components/LibraryPanelCard/LibraryPanelCard';\nimport { LibraryPanelInput, LibraryPanelInputState } from '../state/reducers';\n\ninterface ImportDashboardLibraryPanelsListProps {\n  inputs: LibraryPanelInput[];\n  label: string;\n  description: string;\n  folderName?: string;\n}\n\nexport function ImportDashboardLibraryPanelsList({\n  inputs,\n  label,\n  description,\n  folderName,\n}: ImportDashboardLibraryPanelsListProps): ReactElement | null {\n  const styles = useStyles2(getStyles);\n\n  if (!Boolean(inputs?.length)) {\n    return null;\n  }\n\n  return (\n    <div className={styles.spacer}>\n      <Field label={label} description={description}>\n        <>\n          {inputs.map((input, index) => {\n            const libraryPanelIndex = `elements[${index}]`;\n            const libraryPanel =\n              input.state === LibraryPanelInputState.New\n                ? { ...input.model, meta: { ...input.model.meta, folderName: folderName ?? 'Dashboards' } }\n                : { ...input.model };\n\n            return (\n              <div className={styles.item} key={libraryPanelIndex}>\n                <LibraryPanelCard libraryPanel={libraryPanel as LibraryPanel} onClick={() => undefined} />\n              </div>\n            );\n          })}\n        </>\n      </Field>\n    </div>\n  );\n}\n\nfunction getStyles(theme: GrafanaTheme2) {\n  return {\n    spacer: css({\n      marginBottom: theme.spacing(2),\n    }),\n    item: css({\n      marginBottom: theme.spacing(1),\n    }),\n  };\n}\n","import { useEffect, useState } from 'react';\nimport { Controller, FieldErrors, UseFormReturn } from 'react-hook-form';\n\nimport { selectors } from '@grafana/e2e-selectors';\nimport { Trans, t } from '@grafana/i18n';\nimport { ExpressionDatasourceRef } from '@grafana/runtime/internal';\nimport { Button, Field, FormFieldErrors, FormsOnSubmit, Stack, Input, Legend } from '@grafana/ui';\nimport { FolderPicker } from 'app/core/components/Select/FolderPicker';\nimport { DataSourcePicker } from 'app/features/datasources/components/picker/DataSourcePicker';\n\nimport {\n  DashboardInput,\n  DashboardInputs,\n  DataSourceInput,\n  ImportDashboardDTO,\n  LibraryPanelInputState,\n} from '../state/reducers';\nimport { validateTitle, validateUid } from '../utils/validation';\n\nimport { ImportDashboardLibraryPanelsList } from './ImportDashboardLibraryPanelsList';\n\ninterface Props extends Pick<UseFormReturn<ImportDashboardDTO>, 'register' | 'control' | 'getValues' | 'watch'> {\n  uidReset: boolean;\n  inputs: DashboardInputs;\n  errors: FieldErrors<ImportDashboardDTO>;\n  onCancel: () => void;\n  onUidReset: () => void;\n  onSubmit: FormsOnSubmit<ImportDashboardDTO>;\n}\n\nexport const ImportDashboardForm = ({\n  register,\n  errors,\n  control,\n  getValues,\n  uidReset,\n  inputs,\n  onUidReset,\n  onCancel,\n  onSubmit,\n  watch,\n}: Props) => {\n  const [isSubmitted, setSubmitted] = useState(false);\n  const watchDataSources = watch('dataSources');\n  const watchFolder = watch('folder');\n\n  /*\n    This useEffect is needed for overwriting a dashboard. It\n    submits the form even if there's validation errors on title or uid.\n  */\n  useEffect(() => {\n    if (isSubmitted && (errors.title || errors.uid)) {\n      onSubmit(getValues());\n    }\n  }, [errors, getValues, isSubmitted, onSubmit]);\n\n  const newLibraryPanels = inputs?.libraryPanels?.filter((i) => i.state === LibraryPanelInputState.New) ?? [];\n  const existingLibraryPanels = inputs?.libraryPanels?.filter((i) => i.state === LibraryPanelInputState.Exists) ?? [];\n\n  return (\n    <>\n      <Legend>\n        <Trans i18nKey=\"manage-dashboards.import-dashboard-form.options\">Options</Trans>\n      </Legend>\n      <Field\n        label={t('manage-dashboards.import-dashboard-form.label-name', 'Name')}\n        invalid={!!errors.title}\n        error={errors.title && errors.title.message}\n      >\n        <Input\n          {...register('title', {\n            required: 'Name is required',\n            validate: async (v: string) => await validateTitle(v, getValues().folder.uid),\n          })}\n          type=\"text\"\n          data-testid={selectors.components.ImportDashboardForm.name}\n        />\n      </Field>\n      <Field label={t('manage-dashboards.import-dashboard-form.label-folder', 'Folder')}>\n        <Controller\n          render={({ field: { ref, value, onChange, ...field } }) => (\n            <FolderPicker {...field} onChange={(uid, title) => onChange({ uid, title })} value={value.uid} />\n          )}\n          name=\"folder\"\n          control={control}\n        />\n      </Field>\n      <Field\n        label={t('manage-dashboards.import-dashboard-form.label-unique-identifier-uid', 'Unique identifier (UID)')}\n        description={t(\n          'manage-dashboards.import-dashboard-form.description-unique-identifier-uid',\n          'The unique identifier (UID) of a dashboard can be used for uniquely identify a dashboard between multiple Grafana installs. The UID allows having consistent URLs for accessing dashboards so changing the title of a dashboard will not break any bookmarked links to that dashboard.'\n        )}\n        invalid={!!errors.uid}\n        error={errors.uid && errors.uid.message}\n      >\n        <>\n          {!uidReset ? (\n            <Input\n              disabled\n              {...register('uid', { validate: async (v: string) => await validateUid(v) })}\n              addonAfter={\n                !uidReset && (\n                  <Button onClick={onUidReset}>\n                    <Trans i18nKey=\"manage-dashboards.import-dashboard-form.change-uid\">Change uid</Trans>\n                  </Button>\n                )\n              }\n            />\n          ) : (\n            <Input {...register('uid', { required: true, validate: async (v: string) => await validateUid(v) })} />\n          )}\n        </>\n      </Field>\n      {inputs.dataSources &&\n        inputs.dataSources.map((input: DataSourceInput, index: number) => {\n          if (input.pluginId === ExpressionDatasourceRef.type) {\n            return null;\n          }\n          const dataSourceOption = `dataSources.${index}` as const;\n          const current = watchDataSources ?? [];\n          return (\n            <Field\n              label={input.label}\n              description={input.description}\n              key={dataSourceOption}\n              invalid={errors.dataSources && !!errors.dataSources[index]}\n              error={errors.dataSources && errors.dataSources[index] && 'A data source is required'}\n            >\n              <Controller\n                name={dataSourceOption}\n                render={({ field: { ref, ...field } }) => (\n                  <DataSourcePicker\n                    {...field}\n                    noDefault={true}\n                    placeholder={input.info}\n                    pluginId={input.pluginId}\n                    current={current[index]?.uid}\n                  />\n                )}\n                control={control}\n                rules={{ required: true }}\n              />\n            </Field>\n          );\n        })}\n      {inputs.constants &&\n        inputs.constants.map((input: DashboardInput, index) => {\n          const constantIndex = `constants.${index}` as const;\n          return (\n            <Field\n              label={input.label}\n              error={errors.constants && errors.constants[index] && `${input.label} needs a value`}\n              invalid={errors.constants && !!errors.constants[index]}\n              key={constantIndex}\n            >\n              <Input {...register(constantIndex, { required: true })} defaultValue={input.value} />\n            </Field>\n          );\n        })}\n      <ImportDashboardLibraryPanelsList\n        inputs={newLibraryPanels}\n        label={t('manage-dashboards.import-dashboard-form.label-new-library-panels', 'New library panels')}\n        description={t(\n          'manage-dashboards.import-dashboard-form.description-library-panels-imported',\n          'List of new library panels that will get imported.'\n        )}\n        folderName={watchFolder.title}\n      />\n      <ImportDashboardLibraryPanelsList\n        inputs={existingLibraryPanels}\n        label={t('manage-dashboards.import-dashboard-form.label-existing-library-panels', 'Existing library panels')}\n        description={t(\n          'manage-dashbaords.import-dashboard-form.description-existing-library-panels',\n          'List of existing library panels. These panels are not affected by the import.'\n        )}\n        folderName={watchFolder.title}\n      />\n      <Stack>\n        <Button\n          type=\"submit\"\n          data-testid={selectors.components.ImportDashboardForm.submit}\n          variant={getButtonVariant(errors)}\n          onClick={() => {\n            setSubmitted(true);\n          }}\n        >\n          {getButtonText(errors)}\n        </Button>\n        <Button type=\"reset\" variant=\"secondary\" onClick={onCancel}>\n          <Trans i18nKey=\"manage-dashboards.import-dashboard-form.cancel\">Cancel</Trans>\n        </Button>\n      </Stack>\n    </>\n  );\n};\n\nfunction getButtonVariant(errors: FormFieldErrors<ImportDashboardDTO>) {\n  return errors && (errors.title || errors.uid) ? 'destructive' : 'primary';\n}\n\nfunction getButtonText(errors: FormFieldErrors<ImportDashboardDTO>) {\n  return errors && (errors.title || errors.uid) ? 'Import (Overwrite)' : 'Import';\n}\n","import { PureComponent } from 'react';\nimport { connect, ConnectedProps } from 'react-redux';\n\nimport { dateTimeFormat } from '@grafana/data';\nimport { Trans } from '@grafana/i18n';\nimport { locationService, reportInteraction } from '@grafana/runtime';\nimport { Box, Legend, TextLink } from '@grafana/ui';\nimport { Form } from 'app/core/components/Form/Form';\nimport { StoreState } from 'app/types/store';\n\nimport { clearLoadedDashboard, importDashboard } from '../state/actions';\nimport { DashboardSource, ImportDashboardDTO } from '../state/reducers';\n\nimport { ImportDashboardForm } from './ImportDashboardForm';\n\nconst IMPORT_FINISHED_EVENT_NAME = 'dashboard_import_imported';\n\nconst mapStateToProps = (state: StoreState) => {\n  const searchObj = locationService.getSearchObject();\n\n  return {\n    dashboard: state.importDashboard.dashboard,\n    meta: state.importDashboard.meta,\n    source: state.importDashboard.source,\n    inputs: state.importDashboard.inputs,\n    folder: searchObj.folderUid ? { uid: String(searchObj.folderUid) } : { uid: '' },\n  };\n};\n\nconst mapDispatchToProps = {\n  clearLoadedDashboard,\n  importDashboard,\n};\n\nconst connector = connect(mapStateToProps, mapDispatchToProps);\n\ntype Props = ConnectedProps<typeof connector>;\n\ninterface State {\n  uidReset: boolean;\n}\n\nclass ImportDashboardOverviewUnConnected extends PureComponent<Props, State> {\n  state: State = {\n    uidReset: false,\n  };\n\n  onSubmit = (form: ImportDashboardDTO) => {\n    reportInteraction(IMPORT_FINISHED_EVENT_NAME);\n\n    this.props.importDashboard(form);\n  };\n\n  onCancel = () => {\n    this.props.clearLoadedDashboard();\n  };\n\n  onUidReset = () => {\n    this.setState({ uidReset: true });\n  };\n\n  render() {\n    const { dashboard, inputs, meta, source, folder } = this.props;\n    const { uidReset } = this.state;\n\n    return (\n      <>\n        {source === DashboardSource.Gcom && (\n          <Box marginBottom={3}>\n            <div>\n              <Legend>\n                <Trans i18nKey=\"manage-dashboards.import-dashboard-overview-un-connected.importing-from\">\n                  Importing dashboard from{' '}\n                  <TextLink href={`https://grafana.com/dashboards/${dashboard.gnetId}`}>Grafana.com</TextLink>\n                </Trans>\n              </Legend>\n            </div>\n            <table className=\"filter-table form-inline\">\n              <tbody>\n                <tr>\n                  <td>\n                    <Trans i18nKey=\"manage-dashboards.import-dashboard-overview-un-connected.published-by\">\n                      Published by\n                    </Trans>\n                  </td>\n                  <td>{meta.orgName}</td>\n                </tr>\n                <tr>\n                  <td>\n                    <Trans i18nKey=\"manage-dashboards.import-dashboard-overview-un-connected.updated-on\">\n                      Updated on\n                    </Trans>\n                  </td>\n                  <td>{dateTimeFormat(meta.updatedAt)}</td>\n                </tr>\n              </tbody>\n            </table>\n          </Box>\n        )}\n        <Form\n          onSubmit={this.onSubmit}\n          defaultValues={{ ...dashboard, constants: [], dataSources: [], elements: [], folder: folder }}\n          validateOnMount\n          validateFieldsOnMount={['title', 'uid']}\n          validateOn=\"onChange\"\n        >\n          {({ register, errors, control, watch, getValues }) => (\n            <ImportDashboardForm\n              register={register}\n              errors={errors}\n              control={control}\n              getValues={getValues}\n              uidReset={uidReset}\n              inputs={inputs}\n              onCancel={this.onCancel}\n              onUidReset={this.onUidReset}\n              onSubmit={this.onSubmit}\n              watch={watch}\n            />\n          )}\n        </Form>\n      </>\n    );\n  }\n}\n\nexport const ImportDashboardOverview = connector(ImportDashboardOverviewUnConnected);\nImportDashboardOverview.displayName = 'ImportDashboardOverview';\n","import { css } from '@emotion/css';\nimport { PureComponent } from 'react';\nimport { connect, ConnectedProps } from 'react-redux';\n\nimport { AppEvents, GrafanaTheme2, LoadingState, NavModelItem } from '@grafana/data';\nimport { selectors } from '@grafana/e2e-selectors';\nimport { Trans, t } from '@grafana/i18n';\nimport { config, reportInteraction } from '@grafana/runtime';\nimport {\n  Button,\n  Field,\n  Input,\n  Spinner,\n  stylesFactory,\n  TextArea,\n  Themeable2,\n  FileDropzone,\n  withTheme2,\n  DropzoneFile,\n  FileDropzoneDefaultChildren,\n  LinkButton,\n  TextLink,\n  Label,\n  Stack,\n} from '@grafana/ui';\nimport appEvents from 'app/core/app_events';\nimport { Form } from 'app/core/components/Form/Form';\nimport { Page } from 'app/core/components/Page/Page';\nimport { GrafanaRouteComponentProps } from 'app/core/navigation/types';\nimport { dispatch } from 'app/store/store';\nimport { StoreState } from 'app/types/store';\n\nimport { cleanUpAction } from '../../core/actions/cleanUp';\nimport { ImportDashboardOverviewV2 } from '../dashboard-scene/v2schema/ImportDashboardOverviewV2';\n\nimport { ImportDashboardOverview } from './components/ImportDashboardOverview';\nimport { fetchGcomDashboard, importDashboardJson, importDashboardV2Json } from './state/actions';\nimport { initialImportDashboardState } from './state/reducers';\nimport { validateDashboardJson, validateGcomDashboard } from './utils/validation';\n\ntype DashboardImportPageRouteSearchParams = {\n  gcomDashboardId?: string;\n};\n\ntype OwnProps = Themeable2 & GrafanaRouteComponentProps<{}, DashboardImportPageRouteSearchParams>;\n\nconst IMPORT_STARTED_EVENT_NAME = 'dashboard_import_loaded';\nconst JSON_PLACEHOLDER = `{\n    \"title\": \"Example - Repeating Dictionary variables\",\n    \"uid\": \"_0HnEoN4z\",\n    \"panels\": [...]\n    ...\n}\n`;\n\nconst mapStateToProps = (state: StoreState) => ({\n  loadingState: state.importDashboard.state,\n  dashboard: state.importDashboard.dashboard,\n});\n\nconst mapDispatchToProps = {\n  fetchGcomDashboard,\n  importDashboardJson,\n  cleanUpAction,\n};\n\nconst connector = connect(mapStateToProps, mapDispatchToProps);\n\ntype Props = OwnProps & ConnectedProps<typeof connector>;\n\nclass UnthemedDashboardImport extends PureComponent<Props> {\n  constructor(props: Props) {\n    super(props);\n    const { gcomDashboardId } = this.props.queryParams;\n    if (gcomDashboardId) {\n      this.getGcomDashboard({ gcomDashboard: gcomDashboardId });\n      return;\n    }\n  }\n\n  componentWillUnmount() {\n    this.props.cleanUpAction({ cleanupAction: (state) => (state.importDashboard = initialImportDashboardState) });\n  }\n\n  // Do not display upload file list\n  fileListRenderer = (file: DropzoneFile, removeFile: (file: DropzoneFile) => void) => null;\n\n  onFileUpload = (result: string | ArrayBuffer | null) => {\n    reportInteraction(IMPORT_STARTED_EVENT_NAME, {\n      import_source: 'json_uploaded',\n    });\n\n    try {\n      const json = JSON.parse(String(result));\n\n      if (json.spec?.elements) {\n        dispatch(importDashboardV2Json(json.spec));\n        return;\n      } else if (json.elements) {\n        dispatch(importDashboardV2Json(json));\n        return;\n      }\n\n      // check if it's a v1 resource format\n      if (json.spec) {\n        this.props.importDashboardJson(json.spec);\n        return;\n      }\n\n      this.props.importDashboardJson(json);\n    } catch (error) {\n      if (error instanceof Error) {\n        appEvents.emit(AppEvents.alertError, ['Import failed', 'JSON -> JS Serialization failed: ' + error.message]);\n      }\n      return;\n    }\n  };\n\n  getDashboardFromJson = (formData: { dashboardJson: string }) => {\n    reportInteraction(IMPORT_STARTED_EVENT_NAME, {\n      import_source: 'json_pasted',\n    });\n\n    const dashboard = JSON.parse(formData.dashboardJson);\n\n    // check if it's a v2 resource format\n    if (dashboard.spec?.elements) {\n      dispatch(importDashboardV2Json(dashboard.spec));\n      return;\n      // check if it's just a v2 spec\n    } else if (dashboard.elements) {\n      dispatch(importDashboardV2Json(dashboard));\n      return;\n    }\n\n    // check if it's a v1 resource format\n    if (dashboard.spec) {\n      this.props.importDashboardJson(dashboard.spec);\n      return;\n    }\n\n    this.props.importDashboardJson(dashboard);\n  };\n\n  getGcomDashboard = (formData: { gcomDashboard: string }) => {\n    reportInteraction(IMPORT_STARTED_EVENT_NAME, {\n      import_source: 'gcom',\n    });\n\n    let dashboardId;\n    const match = /(^\\d+$)|dashboards\\/(\\d+)/.exec(formData.gcomDashboard);\n    if (match && match[1]) {\n      dashboardId = match[1];\n    } else if (match && match[2]) {\n      dashboardId = match[2];\n    }\n\n    if (dashboardId) {\n      this.props.fetchGcomDashboard(dashboardId);\n    }\n  };\n\n  renderImportForm() {\n    const styles = importStyles(this.props.theme);\n\n    const GcomDashboardsLink = () => (\n      // eslint-disable-next-line @grafana/i18n/no-untranslated-strings\n      <TextLink variant=\"bodySmall\" href=\"https://grafana.com/grafana/dashboards/\" external>\n        grafana.com/dashboards\n      </TextLink>\n    );\n\n    return (\n      <>\n        <div className={styles.option}>\n          <FileDropzone\n            options={{ multiple: false, accept: ['.json', '.txt'] }}\n            readAs=\"readAsText\"\n            fileListRenderer={this.fileListRenderer}\n            onLoad={this.onFileUpload}\n          >\n            <FileDropzoneDefaultChildren\n              primaryText={t('dashboard-import.file-dropzone.primary-text', 'Upload dashboard JSON file')}\n              secondaryText={t(\n                'dashboard-import.file-dropzone.secondary-text',\n                'Drag and drop here or click to browse'\n              )}\n            />\n          </FileDropzone>\n        </div>\n        <div className={styles.option}>\n          <Form onSubmit={this.getGcomDashboard} defaultValues={{ gcomDashboard: '' }}>\n            {({ register, errors }) => (\n              <Field\n                label={\n                  <Label className={styles.labelWithLink} htmlFor=\"url-input\">\n                    <span>\n                      <Trans i18nKey=\"dashboard-import.gcom-field.label\">\n                        Find and import dashboards for common applications at <GcomDashboardsLink />\n                      </Trans>\n                    </span>\n                  </Label>\n                }\n                invalid={!!errors.gcomDashboard}\n                error={errors.gcomDashboard && errors.gcomDashboard.message}\n              >\n                <Input\n                  id=\"url-input\"\n                  placeholder={t('dashboard-import.gcom-field.placeholder', 'Grafana.com dashboard URL or ID')}\n                  type=\"text\"\n                  {...register('gcomDashboard', {\n                    required: t(\n                      'dashboard-import.gcom-field.validation-required',\n                      'A Grafana dashboard URL or ID is required'\n                    ),\n                    validate: validateGcomDashboard,\n                  })}\n                  addonAfter={\n                    <Button type=\"submit\">\n                      <Trans i18nKey=\"dashboard-import.gcom-field.load-button\">Load</Trans>\n                    </Button>\n                  }\n                />\n              </Field>\n            )}\n          </Form>\n        </div>\n        <div className={styles.option}>\n          <Form onSubmit={this.getDashboardFromJson} defaultValues={{ dashboardJson: '' }}>\n            {({ register, errors }) => (\n              <>\n                <Field\n                  label={t('dashboard-import.json-field.label', 'Import via dashboard JSON model')}\n                  invalid={!!errors.dashboardJson}\n                  error={errors.dashboardJson && errors.dashboardJson.message}\n                >\n                  <TextArea\n                    {...register('dashboardJson', {\n                      required: t('dashboard-import.json-field.validation-required', 'Need a dashboard JSON model'),\n                      validate: validateDashboardJson,\n                    })}\n                    data-testid={selectors.components.DashboardImportPage.textarea}\n                    id=\"dashboard-json-textarea\"\n                    rows={10}\n                    placeholder={JSON_PLACEHOLDER}\n                  />\n                </Field>\n                <Stack>\n                  <Button type=\"submit\" data-testid={selectors.components.DashboardImportPage.submit}>\n                    <Trans i18nKey=\"dashboard-import.form-actions.load\">Load</Trans>\n                  </Button>\n                  <LinkButton variant=\"secondary\" href={`${config.appSubUrl}/dashboards`}>\n                    <Trans i18nKey=\"dashboard-import.form-actions.cancel\">Cancel</Trans>\n                  </LinkButton>\n                </Stack>\n              </>\n            )}\n          </Form>\n        </div>\n      </>\n    );\n  }\n\n  pageNav: NavModelItem = {\n    text: t('manage-dashboards.unthemed-dashboard-import.text.import-dashboard', 'Import dashboard'),\n    subTitle: t(\n      'manage-dashboards.unthemed-dashboard-import.subTitle.import-dashboard-from-file-or-grafanacom',\n      'Import dashboard from file or Grafana.com'\n    ),\n  };\n\n  getDashboardOverview() {\n    const { loadingState, dashboard } = this.props;\n\n    if (loadingState === LoadingState.Done) {\n      if (dashboard.elements || dashboard.spec?.elements) {\n        return <ImportDashboardOverviewV2 />;\n      }\n      return <ImportDashboardOverview />;\n    }\n\n    return null;\n  }\n\n  render() {\n    const { loadingState } = this.props;\n\n    return (\n      <Page navId=\"dashboards/browse\" pageNav={this.pageNav}>\n        <Page.Contents>\n          {loadingState === LoadingState.Loading && (\n            <Stack direction={'column'} justifyContent=\"center\">\n              <Stack justifyContent=\"center\">\n                <Spinner size=\"xxl\" />\n              </Stack>\n            </Stack>\n          )}\n          {[LoadingState.Error, LoadingState.NotStarted].includes(loadingState) && this.renderImportForm()}\n          {this.getDashboardOverview()}\n        </Page.Contents>\n      </Page>\n    );\n  }\n}\n\nconst DashboardImportUnConnected = withTheme2(UnthemedDashboardImport);\nconst DashboardImport = connector(DashboardImportUnConnected);\nDashboardImport.displayName = 'DashboardImport';\nexport default DashboardImport;\n\nconst importStyles = stylesFactory((theme: GrafanaTheme2) => {\n  return {\n    option: css({\n      marginBottom: theme.spacing(4),\n      maxWidth: '600px',\n    }),\n    labelWithLink: css({\n      maxWidth: '100%',\n    }),\n    linkWithinLabel: css({\n      fontSize: 'inherit',\n    }),\n  };\n});\n","import { css } from '@emotion/css';\nimport { HTMLProps, useEffect } from 'react';\nimport * as React from 'react';\nimport {\n  useForm,\n  Mode,\n  DefaultValues,\n  SubmitHandler,\n  FieldValues,\n  UseFormReturn,\n  FieldErrors,\n  FieldPath,\n} from 'react-hook-form';\n\nexport type FormAPI<T extends FieldValues> = Omit<UseFormReturn<T>, 'handleSubmit'> & {\n  errors: FieldErrors<T>;\n};\n\ninterface FormProps<T extends FieldValues> extends Omit<HTMLProps<HTMLFormElement>, 'onSubmit' | 'children'> {\n  validateOn?: Mode;\n  validateOnMount?: boolean;\n  validateFieldsOnMount?: FieldPath<T> | Array<FieldPath<T>>;\n  defaultValues?: DefaultValues<T>;\n  onSubmit: SubmitHandler<T>;\n  children: (api: FormAPI<T>) => React.ReactNode;\n  /** Sets max-width for container. Use it instead of setting individual widths on inputs.*/\n  maxWidth?: number | 'none';\n}\n\nexport function Form<T extends FieldValues>({\n  defaultValues,\n  onSubmit,\n  validateOnMount = false,\n  validateFieldsOnMount,\n  children,\n  validateOn = 'onSubmit',\n  maxWidth = 600,\n  ...htmlProps\n}: FormProps<T>) {\n  const { handleSubmit, trigger, formState, ...rest } = useForm<T>({\n    mode: validateOn,\n    defaultValues,\n  });\n\n  useEffect(() => {\n    if (validateOnMount) {\n      trigger(validateFieldsOnMount);\n    }\n  }, [trigger, validateFieldsOnMount, validateOnMount]);\n\n  return (\n    <form\n      className={css({\n        maxWidth: maxWidth !== 'none' ? maxWidth + 'px' : maxWidth,\n        width: '100%',\n      })}\n      onSubmit={handleSubmit(onSubmit)}\n      {...htmlProps}\n    >\n      {children({ errors: formState.errors, formState, trigger, ...rest })}\n    </form>\n  );\n}\n"],"names":["fetchGcomDashboard","id","dispatch","dashboard","processElements","processGcomDashboard","processInputs","error","importDashboardJson","processJsonDashboard","importDashboardV2Json","processV2Datasources","getNewLibraryPanelsByInput","input","state","usageLibPanel","libPanel","processDashboard","dashboardJson","inputs","filteredUsedInputs","newLibraryPanels","getState","inputModel","getDataSourceDescription","getDataSourceOptions","libraryPanelInputs","getLibraryPanelInputs","elements","variables","annotations","element","query","processV2DatasourceInput","variable","annotation","model","type","description","uid","name","panelInDb","e","clearLoadedDashboard","importDashboard","importDashboardForm","inputsToPersist","dataSource","index","constant","browseDashboardsAPI","acc","spec","datasourceRef","dataSourceInput","dsType","datasource","validateDashboardJson","json","tag","validateGcomDashboard","gcomDashboard","match","validateTitle","newTitle","folderUid","validateUid","value","existingDashboard","isV2","folderTitle","ImportDashboardFormV2","register","errors","control","getValues","uidReset","onUidReset","onCancel","onSubmit","watch","isSubmitted","setSubmitted","selectedDataSources","setSelectedDataSources","formValues","Field","Input","v","selectors","ref","onChange","field","FolderPicker","title","dataSourceOption","DataSourcePicker","ds","prev","Stack","Button","getButtonVariant","getButtonText","IMPORT_FINISHED_EVENT_NAME","ImportDashboardOverviewV2","setUidReset","searchObj","folder","form","dashboardWithDataSources","key","panel","newQueries","queryType","result","dashboardUrl","Form","ImportDashboardLibraryPanelsList","label","folderName","styles","getStyles","libraryPanelIndex","libraryPanel","LibraryPanelCard","theme","ImportDashboardForm","watchDataSources","watchFolder","i","existingLibraryPanels","Legend","current","constantIndex","mapStateToProps","mapDispatchToProps","connector","ImportDashboardOverviewUnConnected","meta","source","Box","TextLink","ImportDashboardOverview","IMPORT_STARTED_EVENT_NAME","JSON_PLACEHOLDER","UnthemedDashboardImport","props","file","removeFile","formData","dashboardId","gcomDashboardId","importStyles","GcomDashboardsLink","FileDropzone","Label","TextArea","config","loadingState","Page","Spinner","DashboardImportUnConnected","DashboardImport","stylesFactory","defaultValues","validateOnMount","validateFieldsOnMount","children","validateOn","maxWidth","htmlProps","handleSubmit","trigger","formState","rest"],"sourceRoot":""}