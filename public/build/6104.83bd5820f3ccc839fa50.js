"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[6104],{22001:(K,p,n)=>{n.d(p,{h:()=>f});var e=n(74848),_=n(96540),i=n(92745),o=n(739),c=n(45861),m=n(18027),P=n(97095),W=n(77824),R=n(48457),M=n(41185);const d={settings:{}},D={settings:{}},f=({value:E,context:a,onChange:s})=>{const T=[{label:(0,i.t)("dimensions.text-dimension-editor.label-fixed","Fixed"),value:o.RU.Fixed,description:(0,i.t)("dimensions.text-dimension-editor.description-fixed","Fixed value")},{label:(0,i.t)("dimensions.text-dimension-editor.label-field","Field"),value:o.RU.Field,description:(0,i.t)("dimensions.text-dimension-editor.description-field","Display field value")}],t=9,u=(0,_.useCallback)(r=>{s({...E,mode:r})},[s,E]),x=(0,_.useCallback)(r=>{s({...E,field:r})},[s,E]),g=(0,_.useCallback)((r="")=>{s({...E,fixed:r})},[s,E]),h=()=>{g("")},v=(0,_.useId)(),I=(0,_.useId)(),U=(0,_.useId)(),l=E?.mode??o.RU.Fixed;return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(P.C,{children:(0,e.jsx)(m.I,{label:(0,i.t)("dimensions.text-dimension-editor.label-source","Source"),labelWidth:t,grow:!0,children:(0,e.jsx)(W.z,{value:l,options:T,onChange:u,fullWidth:!0})})}),l!==o.RU.Fixed&&(0,e.jsx)(P.C,{children:(0,e.jsx)(m.I,{label:(0,i.t)("dimensions.text-dimension-editor.label-field","Field"),labelWidth:t,grow:!0,children:(0,e.jsx)(R.O,{id:v,context:a,value:E.field??"",onChange:x,item:d})})}),l===o.RU.Fixed&&(0,e.jsx)(P.C,{children:(0,e.jsx)(m.I,{label:(0,i.t)("dimensions.text-dimension-editor.label-value","Value"),labelWidth:t,grow:!0,children:(0,e.jsx)(M.g,{id:I,context:a,value:E?.fixed,onChange:g,item:D,suffix:E?.fixed&&(0,e.jsx)(c.$n,{"aria-label":(0,i.t)("dimensions.text-dimension-editor.aria-label-clear-value","Clear value"),icon:"times",variant:"secondary",fill:"text",size:"sm",onClick:h})})})},E?.fixed),l===o.RU.Template&&(0,e.jsx)(P.C,{children:(0,e.jsx)(m.I,{label:(0,i.t)("dimensions.text-dimension-editor.label-template","Template"),labelWidth:t,grow:!0,children:(0,e.jsx)(M.g,{id:U,context:a,value:E?.fixed,onChange:g,item:D})})})]})}},34316:(K,p,n)=>{n.d(p,{R:()=>R});var e=n(74848),_=n(22803),i=n(96540),o=n(92745),c=n(30703),m=n(12594),P=n(63527),W=n(63142);const R=({name:d,onChange:D,verifyLayerNameUniqueness:f,overrideStyles:E})=>{const a=(0,W.of)(M),[s,T]=(0,i.useState)(!1),[t,u]=(0,i.useState)(null),x=l=>{T(!0)},g=l=>{if(T(!1),t){u(null);return}d!==l&&D(l)},h=l=>{const r=l.currentTarget.value.trim();if(r.length===0){u("An empty layer name is not allowed");return}if(f&&!f(r)&&r!==d){u("Layer name already exists");return}t&&u(null)},v=l=>{g(l.currentTarget.value.trim())},I=l=>{l.key==="Enter"&&g(l.currentTarget.value)},U=l=>{l.target.select()};return(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)("div",{className:a.wrapper,children:[!s&&(0,e.jsxs)("button",{className:a.layerNameWrapper,title:(0,o.t)("layers.layer-name.edit-layer-title","Edit layer name"),onClick:x,"data-testid":"layer-name-div",children:[(0,e.jsx)("span",{className:E?"":a.layerName,children:d}),(0,e.jsx)(c.I,{name:"pen",className:a.layerEditIcon,size:"sm"})]}),s&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(P.p,{type:"text",defaultValue:d,onBlur:v,autoFocus:!0,onKeyDown:I,onFocus:U,invalid:t!==null,onChange:h,className:a.layerNameInput,"data-testid":"layer-name-input"}),t&&(0,e.jsx)(m.P,{horizontal:!0,children:t})]})]})})},M=d=>({wrapper:(0,_.css)({label:"Wrapper",display:"flex",alignItems:"center",marginLeft:d.spacing(.5)}),layerNameWrapper:(0,_.css)({display:"flex",cursor:"pointer",border:"1px solid transparent",borderRadius:d.shape.radius.default,alignItems:"center",padding:`0 0 0 ${d.spacing(.5)}`,margin:0,background:"transparent","&:hover":{background:d.colors.action.hover,border:`1px dashed ${d.colors.border.strong}`},"&:focus":{border:`2px solid ${d.colors.primary.border}`},"&:hover, &:focus":{".query-name-edit-icon":{visibility:"visible"}}}),layerName:(0,_.css)({fontWeight:d.typography.fontWeightMedium,color:d.colors.primary.text,cursor:"pointer",overflow:"hidden",marginLeft:d.spacing(.5)}),layerEditIcon:(0,_.cx)((0,_.css)({marginLeft:d.spacing(2),visibility:"hidden"}),"query-name-edit-icon"),layerNameInput:(0,_.css)({maxWidth:"300px",margin:"-4px 0"})})},44798:(K,p,n)=>{n.d(p,{m:()=>f});var e=n(74848),_=n(96540),i=n(92745),o=n(739),c=n(18027),m=n(97095),P=n(77824),W=n(48457),R=n(20012),M=n(4896),d=n(71451);const D={settings:{}},f=a=>{const{value:s,context:T,onChange:t,item:u}=a,x=9,g=[{label:(0,i.t)("dimensions.resource-dimension-editor.label-fixed","Fixed"),value:o.q_.Fixed,description:(0,i.t)("dimensions.resource-dimension-editor.description-fixed","Fixed value")},{label:(0,i.t)("dimensions.resource-dimension-editor.label-field","Field"),value:o.q_.Field,description:(0,i.t)("dimensions.resource-dimension-editor.description-field","Use a string field result")}],h=(0,_.useCallback)(L=>{t({...s,mode:L})},[t,s]),v=(0,_.useCallback)((L="")=>{t({...s,field:L})},[t,s]),I=(0,_.useCallback)(L=>{t({...s,fixed:L??""})},[t,s]),U=L=>{L.stopPropagation(),t({mode:o.q_.Fixed,fixed:"",field:""})},l=s?.mode??o.q_.Fixed,r=u.settings?.showSourceRadio??!0,O=u.settings?.resourceType??M.zu.Icon,A=u.settings?.folderName??M.Iu.Icon,y=u.settings?.maxFiles;let B="";return O===M.zu.Icon&&(s?.fixed?B=(0,R.D)(s.fixed):u.settings?.placeholderValue&&(B=(0,R.D)(u.settings.placeholderValue))),(0,e.jsxs)(e.Fragment,{children:[r&&(0,e.jsx)(m.C,{children:(0,e.jsx)(c.I,{label:(0,i.t)("dimensions.resource-dimension-editor.label-source","Source"),labelWidth:x,grow:!0,children:(0,e.jsx)(P.z,{value:l,options:g,onChange:h,fullWidth:!0})})}),l!==o.q_.Fixed&&(0,e.jsx)(m.C,{children:(0,e.jsx)(c.I,{label:(0,i.t)("dimensions.resource-dimension-editor.label-field","Field"),labelWidth:x,grow:!0,children:(0,e.jsx)(W.O,{context:T,value:s.field??"",onChange:v,item:D})})}),l===o.q_.Fixed&&(0,e.jsx)(d.n,{onChange:I,onClear:U,value:s?.fixed,src:B,placeholder:u.settings?.placeholderText??"Select a value",name:E(s?.fixed)??"",mediaType:O,folderName:A,size:M.Iy.NORMAL,maxFiles:y}),l===o.q_.Mapping&&(0,e.jsx)(m.C,{children:(0,e.jsx)(c.I,{label:(0,i.t)("dimensions.resource-dimension-editor.label-mappings","Mappings"),labelWidth:x,grow:!0,children:(0,e.jsx)("div",{children:"TODO mappings editor!"})})})]})};function E(a){if(!a)return;const s=a.lastIndexOf("/");return s>0?a.substring(s+1):a}},68694:(K,p,n)=>{n.d(p,{A:()=>E});var e=n(74848),_=n(22803),i=n(96540),o=n(95004),c=n(92745),m=n(739),P=n(18027),W=n(97095),R=n(18857),M=n(77824),d=n(63142),D=n(56755),f=n(19753);const E=({value:s,context:T,onChange:t,item:u})=>{const{settings:x}=u,g=(0,i.useMemo)(()=>({label:(0,c.t)("dimensions.scalar-dimension-editor.fixed-value-options.label-fixed-values","Fixed value"),value:"_____fixed_____"}),[]),h=[{label:(0,c.t)("dimensions.scalar-dimension-editor.scalar-options.label-mod","Mod"),value:m.WQ.Mod,description:(0,c.t)("dimensions.scalar-dimension-editor.scalar-options.description-mod","Use field values, mod from max")},{label:(0,c.t)("dimensions.scalar-dimension-editor.scalar-options.label-clamped","Clamped"),value:m.WQ.Clamped,description:(0,c.t)("dimensions.scalar-dimension-editor.scalar-options.description-clamped","Use field values, clamped to max and min")}],v=0,I=s?.field,U=!I,l=(0,D.sE)(T.data),r=(0,D.m3)(l,I,g,o.PU.number),O=(0,d.of)(a),A=(0,i.useCallback)(j=>{const F=j.value;if(F&&F!==g.value)t({...s,field:F});else{const C=s.fixed??v;t({...s,field:void 0,fixed:C})}},[t,s,g.value]),y=(0,i.useCallback)(j=>{t({...s,mode:j})},[t,s]),B=(0,i.useCallback)(j=>{t({...s,field:void 0,fixed:j??v})},[t,s]),L=(0,i.useId)(),b=s??{},N=s?.mode??m.WQ.Mod,S=U?g:r.find(j=>j.value===I);return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("div",{children:[(0,e.jsx)(W.C,{children:(0,e.jsx)(P.I,{label:(0,c.t)("dimensions.scalar-dimension-editor.label-limit","Limit"),labelWidth:8,grow:!0,children:(0,e.jsx)(M.z,{value:N,options:h,onChange:y,fullWidth:!0})})}),(0,e.jsx)(R.l6,{value:S,options:r,onChange:A,noOptionsMessage:(0,c.t)("dimensions.scalar-dimension-editor.noOptionsMessage-no-fields-found","No fields found")})]}),(0,e.jsx)("div",{className:O.range,children:U&&(0,e.jsx)(W.C,{children:(0,e.jsx)(P.I,{label:(0,c.t)("dimensions.scalar-dimension-editor.label-value","Value"),labelWidth:8,grow:!0,children:(0,e.jsx)(f.Q,{id:L,value:b?.fixed??v,onChange:B,max:x?.max,min:x?.min})})})})]})},a=s=>({range:(0,_.css)({paddingTop:s.spacing(1)})})},71820:(K,p,n)=>{n.d(p,{g:()=>D});var e=n(74848),_=n(22803),i=n(96540),o=n(92745),c=n(18027),m=n(97095),P=n(18857),W=n(63142),R=n(56755),M=n(19753),d=n(88011);const D=E=>{const{value:a,context:s,onChange:T,item:t,id:u}=E,{settings:x}=t,g=(0,W.of)(f),h=(0,i.useMemo)(()=>({label:(0,o.t)("dimensions.scale-dimension-editor.fixed-value-option.label.fixed-value","Fixed value"),value:"_____fixed_____"}),[]),v=a?.field,I=!v,U=(0,R.sE)(s.data),l=(0,R.m3)(U,v,h,x?.filteredFieldType),r=(0,i.useMemo)(()=>(0,d.Nn)(x),[x]),O=(0,i.useCallback)(C=>{T((0,d.Ru)(C,r))},[T,r]),A=(0,i.useCallback)(C=>{const V=C.value;V&&V!==h.value?O({...a,field:V}):O({...a,field:void 0})},[O,a,h.value]),y=(0,i.useCallback)(C=>{C!==void 0&&O({...a,min:C})},[O,a]),B=(0,i.useCallback)(C=>{C!==void 0&&O({...a,max:C})},[O,a]),L=(0,i.useCallback)(C=>{C!==void 0&&O({...a,fixed:C})},[O,a]),b=(0,i.useId)(),N=(0,i.useId)(),S=(0,i.useId)(),j=a??{},F=I?h:l.find(C=>C.value===v);return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{children:(0,e.jsx)(P.l6,{inputId:u,value:F,options:l,onChange:A,noOptionsMessage:(0,o.t)("dimensions.scale-dimension-editor.noOptionsMessage-no-fields-found","No fields found")})}),(0,e.jsxs)("div",{className:g.range,children:[I&&(0,e.jsx)(m.C,{children:(0,e.jsx)(c.I,{label:(0,o.t)("dimensions.scale-dimension-editor.label-value","Value"),labelWidth:8,grow:!0,children:(0,e.jsx)(M.Q,{id:b,value:j.fixed,...r,onChange:L})})}),!I&&!r.hideRange&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(m.C,{children:(0,e.jsx)(c.I,{label:(0,o.t)("dimensions.scale-dimension-editor.label-min","Min"),labelWidth:8,grow:!0,children:(0,e.jsx)(M.Q,{id:N,value:j.min,...r,onChange:y})})}),(0,e.jsx)(m.C,{children:(0,e.jsx)(c.I,{label:(0,o.t)("dimensions.scale-dimension-editor.label-max","Max"),labelWidth:8,grow:!0,children:(0,e.jsx)(M.Q,{id:S,value:j.max,...r,onChange:B})})})]})]})]})},f=E=>({range:(0,_.css)({paddingTop:E.spacing(1)})})},86956:(K,p,n)=>{n.d(p,{r:()=>i});var e=n(74848),_=n(59695);const i=({onChange:o,options:c,label:m})=>(0,e.jsx)(_.i,{icon:"plus",label:m,variant:"secondary",options:c,onChange:o,isFullWidth:!0})},87405:(K,p,n)=>{n.d(p,{N:()=>R});var e=n(74848),_=n(22803),i=n(96540),o=n(92745),c=n(35427),m=n(18857),P=n(63142),W=n(56755);const R=d=>{const D=(0,i.useMemo)(()=>({label:(0,o.t)("dimensions.color-dimension-editor.label-fixed-color","Fixed color"),value:"_____fixed_____"}),[]),{value:f,context:E,onChange:a,item:s,id:T}=d,t="dark-green",u=(0,P.of)(M),x=f?.field,g=f&&!x&&f?.fixed,h=(0,W.sE)(E.data),v=(0,W.m3)(h,x,D,void 0,s.settings?.baseNameMode),I=(0,i.useCallback)(r=>{if(!r){a(void 0);return}const O=r.value;if(O&&O!==D.value)a({...f,field:O});else{const A=f?.fixed??t;a({...f,field:void 0,fixed:A})}},[D.value,a,f]),U=(0,i.useCallback)(r=>{a({field:void 0,fixed:r??t})},[a]),l=g?D:v.find(r=>r.value===x);return(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)("div",{className:u.container,children:[(0,e.jsx)(m.l6,{inputId:T,value:l,options:v,onChange:I,noOptionsMessage:(0,o.t)("dimensions.color-dimension-editor.noOptionsMessage-no-fields-found","No fields found"),isClearable:s.settings?.isClearable,placeholder:s.settings?.placeholder}),g&&(0,e.jsx)("div",{className:u.picker,children:(0,e.jsx)(c.sk,{color:f?.fixed,onChange:U,enableNamedColors:!0})})]})})},M=d=>({container:(0,_.css)({display:"flex",flexWrap:"nowrap",justifyContent:"flex-end",alignItems:"center"}),picker:(0,_.css)({paddingLeft:d.spacing(1)})})}}]);

//# sourceMappingURL=6104.83bd5820f3ccc839fa50.js.map