{"version":3,"file":"1167.df8204e4796af6a9e2ce.js","mappings":"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","sources":["webpack://grafana/./public/app/features/provisioning/Wizard/fields.ts","webpack://grafana/./public/app/features/provisioning/Shared/TokenPermissionsInfo.tsx","webpack://grafana/./public/app/features/provisioning/hooks/useCreateOrUpdateRepository.ts","webpack://grafana/./public/app/features/provisioning/Config/defaults.ts","webpack://grafana/./public/app/features/provisioning/utils/data.ts","webpack://grafana/./public/app/core/components/FormPrompt/Prompt.tsx","webpack://grafana/./public/app/core/components/FormPrompt/FormPrompt.tsx"],"sourcesContent":["import { t } from '@grafana/i18n';\n\nimport { RepoType } from './types';\n\nexport interface FieldConfig {\n  label: string;\n  description?: string;\n  placeholder?: string;\n  required?: boolean;\n  validation?: {\n    required?: string | boolean;\n    pattern?: {\n      value: RegExp;\n      message: string;\n    };\n  };\n}\n\n// Provider-specific field configurations for all providers\n// This needs to be a function for translations to work\nconst getProviderConfigs = (): Record<RepoType, Record<string, FieldConfig>> => ({\n  github: {\n    token: {\n      label: t('provisioning.github.token-label', 'Personal Access Token'),\n      description: t(\n        'provisioning.github.token-description',\n        'GitHub Personal Access Token with repository permissions'\n      ),\n      // eslint-disable-next-line @grafana/i18n/no-untranslated-strings\n      placeholder: 'ghp_xxxxxxxxxxxxxxxxxxxx',\n      required: true,\n      validation: {\n        required: t('provisioning.github.token-required', 'GitHub token is required'),\n      },\n    },\n    url: {\n      label: t('provisioning.github.url-label', 'Repository URL'),\n      description: t('provisioning.github.url-description', 'The GitHub repository URL'),\n      // eslint-disable-next-line @grafana/i18n/no-untranslated-strings\n      placeholder: 'https://github.com/owner/repository',\n      required: true,\n      validation: {\n        required: t('provisioning.github.url-required', 'Repository URL is required'),\n        pattern: {\n          value: /^https:\\/\\/github\\.com\\/[^\\/]+\\/[^\\/]+\\/?$/,\n          message: t('provisioning.github.url-pattern', 'Must be a valid GitHub repository URL'),\n        },\n      },\n    },\n    branch: {\n      label: t('provisioning.github.branch-label', 'Branch'),\n      description: t('provisioning.github.branch-description', 'The branch to use for provisioning'),\n      // eslint-disable-next-line @grafana/i18n/no-untranslated-strings\n      placeholder: 'main',\n      required: true,\n      validation: {\n        required: t('provisioning.github.branch-required', 'Branch is required'),\n      },\n    },\n    path: {\n      label: t('provisioning.github.path-label', 'Path'),\n      description: t('provisioning.github.path-description', 'Optional subdirectory path within the repository'),\n      // eslint-disable-next-line @grafana/i18n/no-untranslated-strings\n      placeholder: 'grafana/',\n      required: false,\n    },\n    prWorkflow: {\n      label: t('provisioning.github.pr-workflow-label', 'Enable pull request option when saving'),\n      description: t(\n        'provisioning.github.pr-workflow-description',\n        'Allows users to choose whether to open a pull request when saving changes. If the repository does not allow direct changes to the main branch, a pull request may still be required.'\n      ),\n    },\n  },\n  gitlab: {\n    token: {\n      label: t('provisioning.gitlab.token-label', 'Project Access Token'),\n      description: t(\n        'provisioning.gitlab.token-description',\n        'GitLab Project Access Token with repository permissions'\n      ),\n      // eslint-disable-next-line @grafana/i18n/no-untranslated-strings\n      placeholder: 'glpat-xxxxxxxxxxxxxxxxxxxx',\n      required: true,\n      validation: {\n        required: t('provisioning.gitlab.token-required', 'GitLab token is required'),\n      },\n    },\n    url: {\n      label: t('provisioning.gitlab.url-label', 'Repository URL'),\n      description: t('provisioning.gitlab.url-description', 'The GitLab repository URL'),\n      // eslint-disable-next-line @grafana/i18n/no-untranslated-strings\n      placeholder: 'https://gitlab.com/owner/repository',\n      required: true,\n      validation: {\n        required: t('provisioning.gitlab.url-required', 'Repository URL is required'),\n        pattern: {\n          value: /^https:\\/\\/gitlab\\.com\\/[^\\/]+\\/[^\\/]+\\/?$/,\n          message: t('provisioning.gitlab.url-pattern', 'Must be a valid GitLab repository URL'),\n        },\n      },\n    },\n    branch: {\n      label: t('provisioning.gitlab.branch-label', 'Branch'),\n      description: t('provisioning.gitlab.branch-description', 'The branch to use for provisioning'),\n      // eslint-disable-next-line @grafana/i18n/no-untranslated-strings\n      placeholder: 'main',\n      required: true,\n      validation: {\n        required: t('provisioning.gitlab.branch-required', 'Branch is required'),\n      },\n    },\n    path: {\n      label: t('provisioning.gitlab.path-label', 'Path'),\n      description: t('provisioning.gitlab.path-description', 'Optional subdirectory path within the repository'),\n      // eslint-disable-next-line @grafana/i18n/no-untranslated-strings\n      placeholder: 'grafana/',\n      required: false,\n    },\n    prWorkflow: {\n      label: t('provisioning.gitlab.pr-workflow-label', 'Enable merge request option when saving'),\n      description: t(\n        'provisioning.gitlab.pr-workflow-description',\n        'Allows users to choose whether to open a merge request when saving changes. If the repository does not allow direct changes to the main branch, a merge request may still be required.'\n      ),\n    },\n  },\n  bitbucket: {\n    token: {\n      label: t('provisioning.bitbucket.token-label', 'App Password'),\n      description: t('provisioning.bitbucket.token-description', 'Bitbucket App Password with repository permissions'),\n      // eslint-disable-next-line @grafana/i18n/no-untranslated-strings\n      placeholder: 'ATBBxxxxxxxxxxxxxxxx',\n      required: true,\n      validation: {\n        required: t('provisioning.bitbucket.token-required', 'Bitbucket token is required'),\n      },\n    },\n    tokenUser: {\n      label: t('provisioning.bitbucket.token-user-label', 'Username'),\n      description: t(\n        'provisioning.bitbucket.token-user-description',\n        'The username that will be used to access the repository with the app password'\n      ),\n      // eslint-disable-next-line @grafana/i18n/no-untranslated-strings\n      placeholder: 'username',\n      required: true,\n      validation: {\n        required: t('provisioning.bitbucket.token-user-required', 'Username is required'),\n      },\n    },\n    url: {\n      label: t('provisioning.bitbucket.url-label', 'Repository URL'),\n      description: t('provisioning.bitbucket.url-description', 'The Bitbucket repository URL'),\n      // eslint-disable-next-line @grafana/i18n/no-untranslated-strings\n      placeholder: 'https://bitbucket.org/owner/repository',\n      required: true,\n      validation: {\n        required: t('provisioning.bitbucket.url-required', 'Repository URL is required'),\n        pattern: {\n          value: /^https:\\/\\/bitbucket\\.org\\/[^\\/]+\\/[^\\/]+\\/?$/,\n          message: t('provisioning.bitbucket.url-pattern', 'Must be a valid Bitbucket repository URL'),\n        },\n      },\n    },\n    branch: {\n      label: t('provisioning.bitbucket.branch-label', 'Branch'),\n      description: t('provisioning.bitbucket.branch-description', 'The branch to use for provisioning'),\n      // eslint-disable-next-line @grafana/i18n/no-untranslated-strings\n      placeholder: 'main',\n      required: true,\n      validation: {\n        required: t('provisioning.bitbucket.branch-required', 'Branch is required'),\n      },\n    },\n    path: {\n      label: t('provisioning.bitbucket.path-label', 'Path'),\n      description: t('provisioning.bitbucket.path-description', 'Optional subdirectory path within the repository'),\n      // eslint-disable-next-line @grafana/i18n/no-untranslated-strings\n      placeholder: 'grafana/',\n      required: false,\n    },\n    prWorkflow: {\n      label: t('provisioning.bitbucket.pr-workflow-label', 'Enable pull request option when saving'),\n      description: t(\n        'provisioning.bitbucket.pr-workflow-description',\n        'Allows users to choose whether to open a pull request when saving changes. If the repository does not allow direct changes to the main branch, a pull request may still be required.'\n      ),\n    },\n  },\n  git: {\n    token: {\n      label: t('provisioning.git.token-label', 'Access Token'),\n      description: t('provisioning.git.token-description', 'Git repository access token or password'),\n      // eslint-disable-next-line @grafana/i18n/no-untranslated-strings\n      placeholder: 'token or password',\n      required: true,\n      validation: {\n        required: t('provisioning.git.token-required', 'Git token is required'),\n      },\n    },\n    tokenUser: {\n      label: t('provisioning.git.token-user-label', 'Username'),\n      description: t(\n        'provisioning.git.token-user-description',\n        'The username that will be used to access the repository with the access token'\n      ),\n      // eslint-disable-next-line @grafana/i18n/no-untranslated-strings\n      placeholder: 'username',\n      required: true,\n      validation: {\n        required: t('provisioning.git.token-user-required', 'Username is required'),\n      },\n    },\n    url: {\n      label: t('provisioning.git.url-label', 'Repository URL'),\n      description: t('provisioning.git.url-description', 'The Git repository URL'),\n      // eslint-disable-next-line @grafana/i18n/no-untranslated-strings\n      placeholder: 'https://git.example.com/owner/repository.git',\n      required: true,\n      validation: {\n        required: t('provisioning.git.url-required', 'Repository URL is required'),\n        pattern: {\n          value: /^https?:\\/\\/.+/,\n          message: t('provisioning.git.url-pattern', 'Must be a valid Git repository URL'),\n        },\n      },\n    },\n    branch: {\n      label: t('provisioning.git.branch-label', 'Branch'),\n      description: t('provisioning.git.branch-description', 'The branch to use for provisioning'),\n      // eslint-disable-next-line @grafana/i18n/no-untranslated-strings\n      placeholder: 'main',\n      required: true,\n      validation: {\n        required: t('provisioning.git.branch-required', 'Branch is required'),\n      },\n    },\n    path: {\n      label: t('provisioning.git.path-label', 'Path'),\n      description: t('provisioning.git.path-description', 'Optional subdirectory path within the repository'),\n      // eslint-disable-next-line @grafana/i18n/no-untranslated-strings\n      placeholder: 'grafana/',\n      required: false,\n    },\n    prWorkflow: {\n      label: t('provisioning.git.pr-workflow-label', 'Enable pull request option when saving'),\n      description: t(\n        'provisioning.git.pr-workflow-description',\n        'Allows users to choose whether to open a pull request when saving changes. If the repository does not allow direct changes to the main branch, a pull request may still be required.'\n      ),\n    },\n  },\n  local: {\n    path: {\n      label: t('provisioning.local.path-label', 'Repository Path'),\n      description: t('provisioning.local.path-description', 'Local file system path to the repository'),\n      // eslint-disable-next-line @grafana/i18n/no-untranslated-strings\n      placeholder: '/path/to/repository',\n      required: true,\n      validation: {\n        required: t('provisioning.local.path-required', 'Repository path is required'),\n      },\n    },\n  },\n});\n\n/**\n * Get git provider field configurations that are guaranteed to exist\n * This should only be called for git-based providers\n */\nexport const getGitProviderFields = (\n  type: RepoType\n):\n  | {\n      tokenConfig: FieldConfig;\n      tokenUserConfig?: FieldConfig;\n      urlConfig: FieldConfig;\n      branchConfig: FieldConfig;\n      pathConfig: FieldConfig;\n      prWorkflowConfig: FieldConfig;\n    }\n  | undefined => {\n  const configs = getProviderConfigs()[type];\n  if (!configs) {\n    throw new Error(`No configuration found for repository type: ${type}`);\n  }\n\n  // For git providers, these fields are guaranteed to exist\n  const tokenConfig = configs.token;\n  const tokenUserConfig = configs.tokenUser; // Optional field, only for some providers\n  const urlConfig = configs.url;\n  const branchConfig = configs.branch;\n  const pathConfig = configs.path;\n  const prWorkflowConfig = configs.prWorkflow;\n\n  if (!tokenConfig || !urlConfig || !branchConfig || !pathConfig || !prWorkflowConfig) {\n    throw new Error(`Missing required field configurations for ${type}`);\n  }\n\n  return {\n    tokenConfig,\n    tokenUserConfig,\n    urlConfig,\n    branchConfig,\n    pathConfig,\n    prWorkflowConfig,\n  };\n};\n\n/**\n * Get local provider field configurations that are guaranteed to exist\n * This should only be called for local providers\n */\nexport const getLocalProviderFields = (\n  type: RepoType\n):\n  | {\n      pathConfig: FieldConfig;\n    }\n  | undefined => {\n  const configs = getProviderConfigs()[type];\n  if (!configs) {\n    throw new Error(`No configuration found for repository type: ${type}`);\n  }\n\n  // For local providers, the path field is guaranteed to exist\n  const pathConfig = configs.path;\n\n  if (!pathConfig) {\n    throw new Error(`Missing required field configuration for ${type}: path`);\n  }\n\n  return {\n    pathConfig,\n  };\n};\n","import { css } from '@emotion/css';\n\nimport { GrafanaTheme2 } from '@grafana/data';\nimport { t, Trans } from '@grafana/i18n';\nimport { Stack, TextLink, useStyles2 } from '@grafana/ui';\n\nimport { InstructionAvailability } from '../Wizard/types';\n\nexport function TokenPermissionsInfo({ type }: { type: InstructionAvailability }) {\n  const styles = useStyles2(getStyles);\n  const { tokenText, createTokenLink, createTokenButtonText } = connectStepInstruction()[type];\n\n  return (\n    <div className={styles.container}>\n      <Stack gap={0.5} wrap={'wrap'}>\n        <Trans i18nKey=\"provisioning.token-permissions-info.go-to\">Go to</Trans>\n        <TextLink external href={createTokenLink}>\n          {tokenText}\n        </TextLink>\n        <Trans i18nKey=\"provisioning.token-permissions-info.and-click\">and click</Trans>\n        <strong>\"{createTokenButtonText}\".</strong>\n        <Trans i18nKey=\"provisioning.token-permissions-info.make-sure\">Make sure to include these permissions</Trans>:\n      </Stack>\n\n      <ul className={styles.permissionsList}>\n        {getPermissionsForProvider(type).map((permission) => (\n          <AccessLevelField key={permission.name} label={permission.name} access={permission.access} />\n        ))}\n      </ul>\n    </div>\n  );\n}\n\nfunction getStyles(theme: GrafanaTheme2) {\n  return {\n    container: css({\n      marginBottom: theme.spacing(1),\n      position: 'relative',\n      width: '100%',\n      display: 'flex',\n      flexDirection: 'column',\n      flex: '1 1 0',\n      padding: theme.spacing(theme.components.panel.padding),\n    }),\n    permissionsList: css({\n      marginTop: theme.spacing(2),\n      marginBottom: theme.spacing(1),\n      paddingLeft: theme.spacing(3),\n\n      li: css({\n        marginBottom: theme.spacing(1),\n      }),\n    }),\n    accessLevel: css({\n      fontFamily: theme.typography.fontFamilyMonospace,\n      background: theme.colors.background.secondary,\n      borderRadius: theme.shape.radius.default,\n      padding: theme.spacing(0.25, 0.5),\n    }),\n  };\n}\n\ntype Permission = {\n  name: string;\n  access: string;\n};\n\nfunction getPermissionsForProvider(type: InstructionAvailability): Permission[] {\n  switch (type) {\n    case 'github':\n      // GitHub UI is English only, so these strings are not translated\n      return [\n        { name: 'Contents', access: 'Read and write' },\n        { name: 'Metadata', access: 'Read only' },\n        { name: 'Pull requests', access: 'Read and write' },\n        { name: 'Webhooks', access: 'Read and write' },\n      ];\n    case 'gitlab':\n      return [\n        {\n          name: t('provisioning.gitlab.permissions.repository-label', 'Repository'),\n          access: t('provisioning.gitlab.permissions.repository-read-write', 'Read and write'),\n        },\n        {\n          name: t('provisioning.gitlab.permissions.user-label', 'User'),\n          access: t('provisioning.gitlab.permissions.user-read', 'Read only'),\n        },\n        {\n          name: t('provisioning.gitlab.permissions.api', 'API'),\n          access: t('provisioning.gitlab.permissions.api-read-write', 'Read and write'),\n        },\n      ];\n    case 'bitbucket':\n      return [\n        {\n          name: t('provisioning.bitbucket.permissions.repository-label', 'Repositories'),\n          access: t('provisioning.bitbucket.permissions.repository-read-write-admin', 'Read, and write'),\n        },\n        {\n          name: t('provisioning.bitbucket.permissions.pull-requests-label', 'Pull requests'),\n          access: t('provisioning.bitbucket.permissions.pull-requests-read-write', 'Read and write'),\n        },\n        {\n          name: t('provisioning.bitbucket.permissions.webhooks-label', 'Webhooks'),\n          access: t('provisioning.bitbucket.permissions.webhooks-read-write', 'Read and write'),\n        },\n      ];\n    default:\n      return [];\n  }\n}\n\nfunction AccessLevelField({ label, access }: { label: string; access: string }) {\n  const styles = useStyles2(getStyles);\n  return (\n    <li>\n      {label}: <span className={styles.accessLevel}>{access}</span>\n    </li>\n  );\n}\n\nfunction connectStepInstruction() {\n  return {\n    bitbucket: {\n      // Bitbucket App password will be replaced by API tokens on Sep 9 2025\n      createTokenLink: 'https://bitbucket.org/account/settings/app-passwords/',\n      tokenText: t('provisioning.token-permissions-info.bitbucket.token-text', 'Bitbucket Personal Access Token'),\n      createTokenButtonText: t(\n        'provisioning.token-permissions-info.bitbucket.create-token-button',\n        'Create App passwords'\n      ),\n    },\n    gitlab: {\n      createTokenLink: 'https://gitlab.com/-/user_settings/personal_access_tokens',\n      tokenText: t('provisioning.token-permissions-info.gitlab.token-text', 'GitLab Personal Access Token'),\n      createTokenButtonText: t('provisioning.token-permissions-info.gitlab.create-token-button', 'Add new token'),\n    },\n    // GitHub UI is English only, so these strings are not translated\n    github: {\n      createTokenLink: 'https://github.com/settings/personal-access-tokens/new',\n      tokenText: 'GitHub Personal Access Token',\n      createTokenButtonText: 'Fine-grained token',\n    },\n  };\n}\n","import { useCallback } from 'react';\n\nimport {\n  RepositorySpec,\n  useCreateRepositoryMutation,\n  useCreateRepositoryTestMutation,\n  useReplaceRepositoryMutation,\n} from 'app/api/clients/provisioning/v0alpha1';\n\nexport function useCreateOrUpdateRepository(name?: string) {\n  const [create, createRequest] = useCreateRepositoryMutation();\n  const [update, updateRequest] = useReplaceRepositoryMutation();\n  const [testConfig, testRequest] = useCreateRepositoryTestMutation();\n\n  const updateOrCreate = useCallback(\n    async (data: RepositorySpec, token?: string) => {\n      const secure = token?.length ? { token: { create: token } } : undefined;\n\n      // First test the config and wait for the result\n      // unwrap will throw an error if the test fails\n      await testConfig({\n        // HACK: we need to provide a name to the test configuration\n        name: name || 'new',\n        body: {\n          spec: data,\n          secure,\n        },\n      }).unwrap();\n\n      // If test passes, proceed with create/update\n      if (name) {\n        return update({\n          name,\n          repository: {\n            metadata: {\n              name,\n              // TODO? -- replace with patch spec, so the rest of the metadata is not replaced?\n              // Can that support optimistic locking? (eg, make sure the RV is the same?)\n              finalizers: ['cleanup', 'remove-orphan-resources'],\n            },\n            spec: data,\n            secure,\n          },\n        });\n      }\n      return create({ repository: { metadata: generateRepositoryMetadata(data), spec: data, secure } });\n    },\n    [create, name, update, testConfig]\n  );\n\n  return [updateOrCreate, name ? updateRequest : createRequest, testRequest] as const;\n}\n\nconst generateRepositoryMetadata = (data: RepositorySpec) => {\n  // We don't know for sure that we can use a normalised name. If we can't, we'll ask the server to generate one for us.\n  const normalisedName = data.title.toLowerCase().replaceAll(/[^a-z0-9\\-_]+/g, '');\n\n  if (\n    crypto.randomUUID && // we might not be in a secure context\n    normalisedName && // we need a non-empty string before we check the first character\n    normalisedName.charAt(0) >= 'a' && // required to start with a letter to be a valid k8s name\n    normalisedName.charAt(0) <= 'z' &&\n    normalisedName.replaceAll(/[^a-z]/g, '').length >= 3 // must look sensible to a human\n  ) {\n    // We still want a suffix, to avoid name collisions.\n    const randomBit = crypto.randomUUID().substring(0, 7);\n    const shortenedName = normalisedName.substring(0, 63 - 1 - randomBit.length);\n    return { name: `${shortenedName}-${randomBit}` };\n  } else {\n    return { generateName: 'r' };\n  }\n};\n","import { t } from '@grafana/i18n';\n\nimport { RepositorySpec } from '../../../api/clients/provisioning/v0alpha1';\nimport { RepositoryFormData } from '../types';\nimport { specToData } from '../utils/data';\n\nexport function getDefaultValues(repository?: RepositorySpec): RepositoryFormData {\n  if (!repository) {\n    return {\n      type: 'github',\n      title: t('provisioning.get-default-values.title.repository', 'Repository'),\n      token: '',\n      url: '',\n      branch: 'main',\n      generateDashboardPreviews: false,\n      readOnly: false,\n      prWorkflow: true,\n      path: 'grafana/',\n      sync: {\n        enabled: false,\n        target: 'folder', // start with folder so we can shift to instance later (without an error)\n        intervalSeconds: 60,\n      },\n    };\n  }\n  return specToData(repository);\n}\n","import { RepositorySpec } from 'app/api/clients/provisioning/v0alpha1';\n\nimport { RepositoryFormData } from '../types';\n\nconst getWorkflows = (data: RepositoryFormData): RepositorySpec['workflows'] => {\n  if (data.readOnly) {\n    return [];\n  }\n  const workflows: RepositorySpec['workflows'] = ['write'];\n\n  if (!data.prWorkflow) {\n    return workflows;\n  }\n\n  return [...workflows, 'branch'];\n};\n\nexport const dataToSpec = (data: RepositoryFormData): RepositorySpec => {\n  const spec: RepositorySpec = {\n    type: data.type,\n    sync: data.sync,\n    title: data.title || '',\n    workflows: getWorkflows(data),\n  };\n\n  const baseConfig = {\n    url: data.url || '',\n    branch: data.branch,\n    path: data.path,\n  };\n\n  switch (data.type) {\n    case 'github':\n      spec.github = {\n        ...baseConfig,\n        generateDashboardPreviews: data.generateDashboardPreviews,\n      };\n      break;\n    case 'gitlab':\n      spec.gitlab = baseConfig;\n      break;\n    case 'bitbucket':\n      spec.bitbucket = baseConfig;\n      break;\n    case 'git':\n      spec.git = baseConfig;\n      break;\n    case 'local':\n      spec.local = {\n        path: data.path,\n      };\n      spec.workflows = spec.workflows.filter((v) => v !== 'branch'); // branch only supported by github\n      break;\n  }\n\n  // We need to deep clone the data, so it doesn't become immutable\n  return structuredClone(spec);\n};\n\nexport const specToData = (spec: RepositorySpec): RepositoryFormData => {\n  const remoteConfig = spec.github || spec.gitlab || spec.bitbucket || spec.git;\n\n  return structuredClone({\n    ...spec,\n    ...remoteConfig,\n    ...spec.local,\n    branch: remoteConfig?.branch || '',\n    url: remoteConfig?.url || '',\n    generateDashboardPreviews: spec.github?.generateDashboardPreviews || false,\n    readOnly: !spec.workflows.length,\n    prWorkflow: spec.workflows.includes('branch'),\n  });\n};\n\nexport const generateRepositoryTitle = (repository: Pick<RepositoryFormData, 'type' | 'url' | 'path'>): string => {\n  switch (repository.type) {\n    case 'github':\n      const name = repository.url ?? 'github';\n      return name.replace('https://github.com/', '');\n    case 'gitlab':\n      const gitlabName = repository.url ?? 'gitlab';\n      return gitlabName.replace('https://gitlab.com/', '');\n    case 'bitbucket':\n      const bitbucketName = repository.url ?? 'bitbucket';\n      return bitbucketName.replace('https://bitbucket.org/', '');\n    case 'git':\n      const gitName = repository.url ?? 'git';\n      return gitName.replace(/^https?:\\/\\/[^\\/]+\\//, '');\n    case 'local':\n      return repository.path ?? 'local';\n    default:\n      return '';\n  }\n};\n","import * as H from 'history';\nimport { useEffect } from 'react';\n\nimport { locationService } from '@grafana/runtime';\n\ninterface PromptProps {\n  when?: boolean;\n  message: string | ((location: H.Location) => string | boolean);\n}\n\nexport const Prompt = ({ message, when = true }: PromptProps) => {\n  const history = locationService.getHistory();\n\n  useEffect(() => {\n    if (!when) {\n      return undefined;\n    }\n    //@ts-expect-error TODO Update the history package to fix types\n    const unblock = history.block(message);\n\n    return () => {\n      unblock();\n    };\n  }, [when, message, history]);\n\n  return null;\n};\n","import { css } from '@emotion/css';\nimport history from 'history';\nimport { useEffect, useState } from 'react';\nimport { Navigate } from 'react-router-dom-v5-compat';\n\nimport { Trans, t } from '@grafana/i18n';\nimport { Button, Modal } from '@grafana/ui';\n\nimport { Prompt } from './Prompt';\n\nexport interface Props {\n  confirmRedirect?: boolean;\n  onDiscard: () => void;\n  /** Extra check to invoke when location changes.\n   * Could be useful in multistep forms where each step has a separate URL\n   */\n  onLocationChange?: (location: history.Location) => void;\n}\n\n/**\n * Component handling redirects when a form has unsaved changes.\n * Page reloads are handled in useEffect via beforeunload event.\n * URL navigation is handled by react-router's components since it does not trigger beforeunload event.\n */\nexport const FormPrompt = ({ confirmRedirect, onDiscard, onLocationChange }: Props) => {\n  const [modalIsOpen, setModalIsOpen] = useState(false);\n  const [blockedLocation, setBlockedLocation] = useState<history.Location | null>(null);\n  const [changesDiscarded, setChangesDiscarded] = useState(false);\n\n  useEffect(() => {\n    const onBeforeUnload = (e: BeforeUnloadEvent) => {\n      if (confirmRedirect) {\n        e.preventDefault();\n        e.returnValue = '';\n      }\n    };\n    window.addEventListener('beforeunload', onBeforeUnload);\n    return () => {\n      window.removeEventListener('beforeunload', onBeforeUnload);\n    };\n  }, [confirmRedirect]);\n\n  // Returning 'false' from this function will prevent navigation to the next URL\n  const handleRedirect = (location: history.Location) => {\n    // Do not show the unsaved changes modal if only the URL params have changed\n    const currentPath = window.location.pathname;\n    const nextPath = location.pathname;\n    if (currentPath === nextPath) {\n      return true;\n    }\n\n    const locationChangeCheck = onLocationChange?.(location);\n\n    let blockRedirect = confirmRedirect && !changesDiscarded;\n    if (locationChangeCheck !== undefined) {\n      blockRedirect = blockRedirect && locationChangeCheck;\n    }\n\n    if (blockRedirect) {\n      setModalIsOpen(true);\n      setBlockedLocation(location);\n      return false;\n    }\n\n    if (locationChangeCheck) {\n      onDiscard();\n    }\n\n    return true;\n  };\n\n  const onBackToForm = () => {\n    setModalIsOpen(false);\n    setBlockedLocation(null);\n  };\n\n  const onDiscardChanges = () => {\n    setModalIsOpen(false);\n    setChangesDiscarded(true);\n    onDiscard();\n  };\n\n  return (\n    <>\n      <Prompt when={true} message={handleRedirect} />\n      {blockedLocation && changesDiscarded && <Navigate replace to={blockedLocation} />}\n      <UnsavedChangesModal isOpen={modalIsOpen} onDiscard={onDiscardChanges} onBackToForm={onBackToForm} />\n    </>\n  );\n};\n\ninterface UnsavedChangesModalProps {\n  onDiscard: () => void;\n  onBackToForm: () => void;\n  isOpen: boolean;\n}\n\nconst UnsavedChangesModal = ({ onDiscard, onBackToForm, isOpen }: UnsavedChangesModalProps) => {\n  return (\n    <Modal\n      isOpen={isOpen}\n      title={t('form-prompt.title', 'Leave page?')}\n      onDismiss={onBackToForm}\n      icon=\"exclamation-triangle\"\n      className={css({ width: '500px' })}\n    >\n      <h5>\n        <Trans i18nKey=\"form-prompt.description\">Changes that you made may not be saved.</Trans>\n      </h5>\n      <Modal.ButtonRow>\n        <Button variant=\"secondary\" onClick={onBackToForm} fill=\"outline\">\n          <Trans i18nKey=\"form-prompt.continue-button\">Continue editing</Trans>\n        </Button>\n        <Button variant=\"destructive\" onClick={onDiscard}>\n          <Trans i18nKey=\"form-prompt.discard-button\">Discard unsaved changes</Trans>\n        </Button>\n      </Modal.ButtonRow>\n    </Modal>\n  );\n};\n"],"names":["getProviderConfigs","getGitProviderFields","type","configs","tokenConfig","tokenUserConfig","urlConfig","branchConfig","pathConfig","prWorkflowConfig","getLocalProviderFields","TokenPermissionsInfo","styles","getStyles","tokenText","createTokenLink","createTokenButtonText","connectStepInstruction","getPermissionsForProvider","permission","AccessLevelField","theme","label","access","useCreateOrUpdateRepository","name","create","createRequest","update","updateRequest","testConfig","testRequest","data","token","secure","generateRepositoryMetadata","normalisedName","randomBit","getDefaultValues","repository","getWorkflows","workflows","dataToSpec","spec","baseConfig","v","specToData","remoteConfig","generateRepositoryTitle","Prompt","message","when","history","unblock","FormPrompt","confirmRedirect","onDiscard","onLocationChange","modalIsOpen","setModalIsOpen","blockedLocation","setBlockedLocation","changesDiscarded","setChangesDiscarded","onBeforeUnload","e","handleRedirect","location","currentPath","nextPath","locationChangeCheck","blockRedirect","onBackToForm","onDiscardChanges","UnsavedChangesModal","isOpen"],"sourceRoot":""}