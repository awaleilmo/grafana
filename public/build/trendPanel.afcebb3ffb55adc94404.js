"use strict";(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[2666],{41530:(G,j,e)=>{e.d(j,{A:()=>L});var l=e(74848),n=e(22803),h=e(63142),D=e(77239);const L=({item:f,isPinned:M})=>{const C=(0,h.of)(d),{label:R,value:U,color:W,colorIndicator:A}=f;return(0,l.jsx)("div",{className:C.wrapper,children:(0,l.jsx)(D.B,{label:R,value:U,color:W,colorIndicator:A,marginRight:"22px",isPinned:M})})},d=f=>({wrapper:(0,n.css)({display:"flex",flexDirection:"column",flex:1,padding:f.spacing(1),lineHeight:1})})},47466:(G,j,e)=>{e.d(j,{o:()=>L});var l=e(74848),n=e(22803),h=e(63142),D=e(77239);const L=({items:f,children:M,isPinned:C,scrollable:R=!1,maxHeight:U})=>{const W=(0,h.of)(d),A=R?{maxHeight:U,overflowY:"auto"}:{};return(0,l.jsxs)("div",{className:W.wrapper,style:A,children:[f.map(({label:w,value:N,color:a,colorIndicator:c,colorPlacement:v,isActive:m,lineStyle:t,isHiddenFromViz:o},s)=>(0,l.jsx)(D.B,{label:w,value:N,color:a,colorIndicator:c,colorPlacement:v,isActive:m,justify:"space-between",isPinned:C,lineStyle:t,showValueScroll:!R,isHiddenFromViz:o},s)),M]})},d=f=>({wrapper:(0,n.css)({display:"flex",flexDirection:"column",flex:1,gap:2,borderTop:`1px solid ${f.colors.border.weak}`,padding:f.spacing(1)})})},76234:(G,j,e)=>{e.d(j,{B_:()=>U,Fg:()=>w,O2:()=>A,T5:()=>N});var l=e(16515),n=e(11576),h=e(63409),D=e(34455),L=e(55386),d=e(95004),f=e(406),M=e(739),C=e(70332);function R(a){let c=new Map;return a.map(m=>({...m,fields:m.fields.map(t=>{if(t.type===d.PU.enum){let o=(0,C.M)(t.config,t.type),s=c.get(o);s||(s=[],c.set(o,s));let u=t.values.toArray().slice(),p=t.config.type.enum.text;if(s.length>0)for(let r=0;r<u.length;r++)u[r]+=s.length;return s.push(...p),t.config.type.enum.text=s,{...t,values:u}}return t})}))}function U(a,c,v,m){if(!a?.length)return null;(0,l.Fm)(a);let t=m!=null;m!=null&&m>0&&(a=[{...a[0],fields:[a[0].fields[m],...a[0].fields.filter((p,r)=>r!==m)]}]);for(let p of a)for(let r of p.fields)r.type===d.PU.time&&typeof r.values[0]!="number"&&(r.values=(0,f.s7)(r,{destinationType:d.PU.time}).values);let o=0;e:for(let p of a)for(let r of p.fields)if(r.type===d.PU.enum&&++o>1){a=R(a);break e}let s;const u=[];for(let p of a){const r=[];let F=!1,g=!1,O=t?p:(0,h.M)({frame:p,refFieldPseudoMin:v?.from.valueOf(),refFieldPseudoMax:v?.to.valueOf()});const P=(0,D.C)(O).fields;for(let I=0;I<(P?.length||0);I++){const x=P[I];switch(x.type){case d.PU.time:F=!0,r.push(x);break;case d.PU.number:g=t?I>0:!0,s={...x,values:x.values.map(S=>Number.isFinite(S)||S==null?S:null)},r.push(s);break;case d.PU.enum:g=!0;case d.PU.string:s={...x,values:x.values},r.push(s);break;case d.PU.boolean:g=!0;const i=x.config?.custom??{},K={...x.config,max:1,min:0,custom:i};i.lineInterpolation!==M.dx.StepBefore&&(i.lineInterpolation=M.dx.StepAfter),s={...x,config:K,type:d.PU.number,values:x.values.map(S=>S==null?S:S?1:0)},(0,L.j9)(K.unit)||(K.unit="bool",s.display=(0,n.J)({field:s,theme:c})),r.push(s);break}}(t||F)&&g&&u.push({...p,length:O.length,fields:r})}return u.length?(A(u,c,0),W(u,c),u):null}const W=(a,c)=>{const{palette:v}=c.visualization;for(const m of a)for(const t of m.fields)if(t.type===d.PU.enum){const o=v[t.state?.seriesIndex%v.length],s=c.visualization.getColorByName(o),u=t.config.type.enum;u.color=Array(u.text.length).fill(s),t.display=(0,n.J)({field:t,theme:c})}},A=(a,c,v)=>{let m=0;a.forEach(t=>{t.fields.forEach((o,s)=>{s!==v&&(o.type===d.PU.number||o.type===d.PU.boolean||o.type===d.PU.enum)&&(o.state={...o.state,seriesIndex:m++},o.display=(0,n.J)({field:o,theme:c}))})})};function w(a,c){return!a||!a.length?[c]:a.map(v=>v?.length?v:c)}const N=a=>a.mode===M.$N.Multi&&a.maxHeight!=null},77239:(G,j,e)=>{e.d(j,{B:()=>v});var l=e(74848),n=e(22803),h=e(96540),D=e(63142),L=e(53371),d=e(45967),f=e(64394),M=e(71479),C=e(55978),R=e(55302),U=(t=>(t[t.Leading=0]="Leading",t[t.Trailing=1]="Trailing",t))(U||{});const W=({color:t=f.F,colorIndicator:o=C.Ev,position:s=0,lineStyle:u,isHollow:p})=>{const r=(0,D.of)(A);return p?(0,l.jsx)("div",{style:{border:`1px solid ${t}`},className:(0,n.cx)(s===0?r.leading:r.trailing,(0,R.L$)(o,r))}):o===C.fX.series?(0,l.jsx)(M.p,{color:t,lineStyle:u,className:s===0?r.leading:r.trailing}):(0,l.jsx)("span",{style:{backgroundColor:t},className:(0,n.cx)(s===0?r.leading:r.trailing,(0,R.L$)(o,r))})},A=t=>({leading:(0,n.css)({marginRight:t.spacing(.5)}),trailing:(0,n.css)({marginLeft:t.spacing(.5)}),series:(0,n.css)({width:"14px",height:"4px",borderRadius:t.shape.radius.pill,minWidth:"14px"}),value:(0,n.css)({width:"12px",height:"12px",borderRadius:t.shape.radius.default,fontWeight:500,minWidth:"12px"}),hexagon:(0,n.css)({}),pie_1_4:(0,n.css)({}),pie_2_4:(0,n.css)({}),pie_3_4:(0,n.css)({}),marker_sm:(0,n.css)({width:"4px",height:"4px",borderRadius:t.shape.radius.circle,minWidth:"4px"}),marker_md:(0,n.css)({width:"8px",height:"8px",borderRadius:t.shape.radius.circle,minWidth:"8px"}),marker_lg:(0,n.css)({width:"12px",height:"12px",borderRadius:t.shape.radius.circle,minWidth:"12px"})});var w=(t=>(t.label="label",t.value="value",t))(w||{});const N="Copied to clipboard",a=2*1e3,c=7,v=({label:t,value:o,color:s,colorIndicator:u,colorPlacement:p=C.lJ.first,justify:r="flex-start",isActive:F=!1,marginRight:g="0px",isPinned:O,lineStyle:P,showValueScroll:I,isHiddenFromViz:x})=>{const i=(0,D.of)(m,r,g),K=I?{maxHeight:55,whiteSpace:"wrap",wordBreak:"break-word",overflowY:"auto"}:{whiteSpace:"pre-line",wordBreak:"break-word",lineHeight:1.2},[S,Y]=(0,h.useState)(!1),[Q,$]=(0,h.useState)(null),[J,z]=(0,h.useState)(!1),b=(0,h.useRef)(null),H=(0,h.useRef)(null);(0,h.useEffect)(()=>{let T;return J&&(T=setTimeout(()=>{z(!1)},a)),()=>{window.clearTimeout(T)}},[J]);const y=async(T,X)=>{if(!(navigator?.clipboard&&window.isSecureContext)){E(T,X);return}try{await navigator.clipboard.writeText(T),$({[`${X}`]:T}),z(!0)}catch{$(null)}},E=(T,X)=>{const V=document.createElement("textarea");b.current?.appendChild(V),V.value=T,V.focus(),V.select();try{document.execCommand("copy")&&($({[`${X}`]:T}),z(!0))}catch(k){console.error("Unable to copy to clipboard",k)}V.remove()},B=T=>{T.currentTarget.offsetWidth<T.currentTarget.scrollWidth&&Y(!0)},Z=()=>Y(!1);return t.length*c>window.innerWidth/2&&(t=t.replaceAll("{",`{
  `).replaceAll("}",`
}`).replaceAll(", ",`,
  `)),(0,l.jsxs)("div",{className:i.contentWrapper,children:[(s||t)&&(0,l.jsxs)("div",{className:i.valueWrapper,children:[s&&p===C.lJ.first&&(0,l.jsx)(W,{color:s,colorIndicator:u,lineStyle:P,isHollow:x}),O?(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(d.m,{content:t,interactive:!1,show:S,children:(0,l.jsxs)(l.Fragment,{children:[J&&Q?.label&&(0,l.jsx)(L.r,{placement:"top",referenceElement:b.current,children:N}),(0,l.jsx)("div",{className:(0,n.cx)(i.label,F&&i.activeSeries,navigator?.clipboard&&i.copy),onMouseEnter:B,onMouseLeave:Z,onClick:()=>y(t,"label"),ref:b,children:t})]})})}):(0,l.jsx)("div",{className:(0,n.cx)(i.label,F&&i.activeSeries),children:t})]}),(0,l.jsxs)("div",{className:i.valueWrapper,children:[s&&p===C.lJ.leading&&(0,l.jsx)(W,{color:s,colorIndicator:u,position:U.Leading,lineStyle:P}),O?(0,l.jsxs)(l.Fragment,{children:[J&&Q?.value&&(0,l.jsx)(L.r,{placement:"top",referenceElement:H.current,children:N}),(0,l.jsx)("div",{className:(0,n.cx)(i.value,F,navigator?.clipboard&&i.copy),style:K,onClick:()=>y(o?o.toString():"","value"),ref:H,children:o})]}):(0,l.jsx)("div",{className:(0,n.cx)(i.value,F),style:K,children:o}),s&&p===C.lJ.trailing&&(0,l.jsx)(W,{color:s,colorIndicator:u,position:U.Trailing,lineStyle:P})]})]})},m=(t,o,s)=>({contentWrapper:(0,n.css)({display:"flex",alignItems:"start",justifyContent:o,marginRight:s}),label:(0,n.css)({color:t.colors.text.secondary,fontWeight:400,textOverflow:"ellipsis",overflow:"hidden",marginRight:t.spacing(2)}),value:(0,n.css)({fontWeight:500,textOverflow:"ellipsis",overflow:"hidden"}),valueWrapper:(0,n.css)({display:"flex",alignItems:"center"}),activeSeries:(0,n.css)({fontWeight:t.typography.fontWeightBold,color:t.colors.text.maxContrast}),copy:(0,n.css)({cursor:"pointer"})})},96827:(G,j,e)=>{e.r(j),e.d(j,{plugin:()=>F});var l=e(16207),n=e(95004),h=e(92745),D=e(79277),L=e(41069),d=e(12241),f=e(74848),M=e(96540),C=e(36638),R=e(57866),U=e(8721),W=e(43173),A=e(14477),w=e(64400),N=e(93630),a=e(739),c=e(69234),v=e(17669),m=e(25422),t=e(59427),o=e(78308),s=e(76234);const u=({data:g,timeRange:O,timeZone:P,width:I,height:x,options:i,fieldConfig:K,replaceVariables:S,id:Y})=>{const{dataLinkPostProcessor:Q,canExecuteActions:$}=(0,w.d2)(),J=(0,M.useMemo)(()=>$?.()??!1,[$]),z=i.xField??g.series[0]?.fields.find(y=>y.type===n.PU.number)?.name,b=(y,E,B)=>(E={...E,x:C.sJ.get(R.Ct.byName).get(z)},(0,v.m)(y,E)),H=(0,M.useMemo)(()=>{if(g.series.length>1)return{warning:"Only one frame is supported, consider adding a join transformation",frames:g.series};let y=g.series,E;if(i.xField){if(E=(0,t.gG)(i.xField,y[0]),E==null)return{warning:"Unable to find field: "+i.xField,frames:g.series}}else if(E=y[0]?y[0].fields.findIndex(B=>B.type===n.PU.number):-1,E===-1)return{warning:"No numeric fields found for X axis",frames:y};if(E!=null){const B=y[0].fields[E];if(B.type===n.PU.number&&!(0,U.g2)(B.values))return{warning:"Values must be in ascending order",frames:y}}return{frames:(0,s.B_)(y,W.$.theme2,void 0,E)}},[g.series,i.xField]);return H.warning||!H.frames?(0,f.jsx)(A.a,{panelId:Y,fieldConfig:K,data:g,message:H.warning,needsNumberField:!0}):(0,f.jsx)(m.Z,{frames:H.frames,structureRev:g.structureRev,timeRange:O,timeZone:P,width:I,height:x,legend:i.legend,options:i,preparePlotFrame:b,replaceVariables:S,dataLinkPostProcessor:Q,children:(y,E)=>(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(N.Z,{config:y}),i.tooltip.mode!==a.$N.None&&(0,f.jsx)(c.xl,{config:y,hoverMode:i.tooltip.mode===a.$N.Single?c.b3.xOne:c.b3.xAll,getDataLinks:(B,Z)=>E.fields[B].getLinks?.({valueRowIndex:Z})??[],render:(B,Z,T,X=!1,V,k,_,q)=>(0,f.jsx)(o.k,{series:E,dataIdxs:Z,seriesIdx:T,mode:i.tooltip.mode,sortOrder:i.tooltip.sort,isPinned:X,maxHeight:i.tooltip.maxHeight,replaceVariables:S,dataLinks:q,hideZeros:i.tooltip.hideZeros,canExecuteActions:J}),maxWidth:i.tooltip.maxWidth})]})})};var p=e(73495);class r{getSuggestionsForData(O){const{dataSummary:P}=O;return P.numberFieldCount<2||P.rowCountTotal<2||P.rowCountTotal<2?void 0:O.getListAppender({name:p.m.LineChart,pluginId:"trend",options:{legend:{calcs:[],displayMode:a.lm.Hidden,placement:"right",showLegend:!1}},fieldConfig:{defaults:{custom:{}},overrides:[]},cardOptions:{previewModifier:x=>{x.fieldConfig?.defaults.custom?.drawStyle!==a.GR.Bars&&(x.fieldConfig.defaults.custom.lineWidth=Math.max(x.fieldConfig.defaults.custom.lineWidth??1,2))}}})}}const F=new l.m(u).useFieldConfig((0,d.V)(d.S,!1)).setPanelOptions(g=>{const O=[(0,h.t)("trend.category-x-axis","X axis")];g.addFieldNamePicker({path:"xField",name:(0,h.t)("trend.name-x-field","X field"),description:(0,h.t)("trend.description-x-field","An increasing numeric value"),category:O,defaultValue:void 0,settings:{isClearable:!0,placeholderText:(0,h.t)("trend.placeholder-x-field","First numeric value"),filter:P=>P.type===n.PU.number}}),D.D(g,!1,!0,D.U),L.H(g)}).setSuggestionsSupplier(new r)}}]);

//# sourceMappingURL=trendPanel.afcebb3ffb55adc94404.js.map