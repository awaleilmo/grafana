{"version":3,"file":"4514.42d324f558a5fdc837aa.js","mappings":"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","sources":["webpack://grafana/./public/app/features/alerting/unified/enterprise-components/AI/AIGenAlertRuleButton/addAIAlertRuleButton.ts","webpack://grafana/./public/app/features/alerting/unified/components/export/GrafanaRuleFolderExporter.tsx","webpack://grafana/./public/app/features/alerting/unified/components/rules/NoRulesCTA.tsx","webpack://grafana/./public/app/features/alerting/unified/components/CollapseToggle.tsx","webpack://grafana/./packages/grafana-alerting/src/grafana/contactPoints/hooks/v0alpha1/useContactPoints.tsx","webpack://grafana/./packages/grafana-alerting/src/grafana/contactPoints/utils.ts","webpack://grafana/./packages/grafana-alerting/src/grafana/contactPoints/components/ContactPointSelector/ContactPointSelector.tsx","webpack://grafana/./public/app/features/alerting/unified/components/rules/MultipleDataSourcePicker.tsx","webpack://grafana/./public/app/features/alerting/unified/components/rules/Filter/RulesFilter.v1.tsx","webpack://grafana/./public/app/features/alerting/unified/rule-list/components/ListSection.tsx","webpack://grafana/./node_modules/react-use/esm/useInterval.js","webpack://grafana/./public/app/features/alerting/unified/components/rules/ActionIcon.tsx","webpack://grafana/./public/app/features/alerting/unified/components/rules/Filter/RulesViewModeSelector.tsx","webpack://grafana/./public/app/features/alerting/unified/components/rules/RuleListErrors.tsx","webpack://grafana/./public/app/features/alerting/unified/components/rules/RulesGroup.tsx","webpack://grafana/./public/app/features/alerting/unified/components/rules/useCombinedGroupNamespace.tsx","webpack://grafana/./public/app/features/alerting/unified/components/rules/CloudRules.tsx","webpack://grafana/./public/app/features/alerting/unified/components/rules/GrafanaRules.tsx","webpack://grafana/./public/app/features/alerting/unified/components/rules/RuleListGroupView.tsx","webpack://grafana/./public/app/features/alerting/unified/components/rules/RuleListStateView.tsx","webpack://grafana/./public/app/features/alerting/unified/rule-list/components/RuleListActionButtons.tsx","webpack://grafana/./public/app/features/alerting/unified/rule-list/RuleList.v1.tsx","webpack://grafana/./public/app/features/alerting/unified/RuleList.tsx","webpack://grafana/./public/app/features/alerting/unified/rule-list/RuleListPageTitle.tsx","webpack://grafana/./public/app/features/alerting/unified/api/alertingFolderActionsApi.ts","webpack://grafana/./public/app/features/alerting/unified/components/folder-actions/DeleteModal.tsx","webpack://grafana/./public/app/features/alerting/unified/components/folder-actions/PauseUnpauseActionMenuItem.tsx","webpack://grafana/./public/app/features/alerting/unified/components/folder-actions/FolderActionsButton.tsx","webpack://grafana/./public/app/features/alerting/unified/components/export/GrafanaRulesExporter.tsx","webpack://grafana/./public/app/features/alerting/unified/plugins/useAlertingHomePageExtensions.ts"],"sourcesContent":["import { ComponentType, createElement } from 'react';\n\nimport { t } from '@grafana/i18n';\nimport { withErrorBoundary } from '@grafana/ui';\n\nimport { logError } from '../../../Analytics';\n\nexport interface GenAIAlertRuleButtonProps {}\n\n// Internal variable to store the actual component\nlet InternalAIAlertRuleButtonComponent: ComponentType<GenAIAlertRuleButtonProps> | null = null;\n\nexport const AIAlertRuleButtonComponent: ComponentType<GenAIAlertRuleButtonProps> = (props) => {\n  if (!InternalAIAlertRuleButtonComponent) {\n    return null;\n  }\n\n  // Wrap the component with error boundary\n  const WrappedComponent = withErrorBoundary(InternalAIAlertRuleButtonComponent, {\n    title: t('alerting.ai.error-boundary.alert-rule-button', 'AI Alert Rule Button failed to load'),\n    style: 'alertbox',\n    errorLogger: logError,\n  });\n\n  return createElement(WrappedComponent, props);\n};\n\nexport function addAIAlertRuleButton(component: ComponentType<GenAIAlertRuleButtonProps> | null) {\n  InternalAIAlertRuleButtonComponent = component;\n}\n","import { useState } from 'react';\n\nimport { t } from '@grafana/i18n';\nimport { LoadingPlaceholder } from '@grafana/ui';\nimport { FolderDTO } from 'app/types/folders';\n\nimport { alertRuleApi } from '../../api/alertRuleApi';\n\nimport { FileExportPreview } from './FileExportPreview';\nimport { GrafanaExportDrawer } from './GrafanaExportDrawer';\nimport { ExportFormats, allGrafanaExportProviders } from './providers';\n\ninterface GrafanaRuleFolderExporterProps {\n  folder: FolderDTO;\n  onClose: () => void;\n}\n\nexport function GrafanaRuleFolderExporter({ folder, onClose }: GrafanaRuleFolderExporterProps) {\n  const [activeTab, setActiveTab] = useState<ExportFormats>('yaml');\n\n  return (\n    <GrafanaExportDrawer\n      title={t('alerting.grafana-rule-folder-exporter.title-drawer', 'Export {{folderName}} rules', {\n        folderName: folder.title,\n      })}\n      activeTab={activeTab}\n      onTabChange={setActiveTab}\n      onClose={onClose}\n      formatProviders={Object.values(allGrafanaExportProviders)}\n    >\n      <GrafanaRuleFolderExportPreview folder={folder} exportFormat={activeTab} onClose={onClose} />\n    </GrafanaExportDrawer>\n  );\n}\n\ninterface GrafanaRuleFolderExportPreviewProps {\n  folder: FolderDTO;\n  exportFormat: ExportFormats;\n  onClose: () => void;\n}\n\nfunction GrafanaRuleFolderExportPreview({ folder, exportFormat, onClose }: GrafanaRuleFolderExportPreviewProps) {\n  const { currentData: exportFolderDefinition = '', isFetching } = alertRuleApi.endpoints.exportRules.useQuery({\n    folderUid: folder.uid,\n    format: exportFormat,\n  });\n\n  if (isFetching) {\n    return <LoadingPlaceholder text={t('alerting.grafana-rule-folder-export-preview.text-loading', 'Loading....')} />;\n  }\n\n  const downloadFileName = `${folder.title}-${folder.uid}`;\n\n  return (\n    <FileExportPreview\n      format={exportFormat}\n      textDefinition={exportFolderDefinition}\n      downloadFileName={downloadFileName}\n      onClose={onClose}\n    />\n  );\n}\n","import { css } from '@emotion/css';\n\nimport { GrafanaTheme2 } from '@grafana/data';\nimport { Trans, t } from '@grafana/i18n';\nimport { config } from '@grafana/runtime';\nimport { Dropdown, EmptyState, LinkButton, Menu, MenuItem, Stack, Text, TextLink, useStyles2 } from '@grafana/ui';\n\nimport { RuleFormType, RuleFormValues } from '../../types/rule-form';\nimport { useRulesAccess } from '../../utils/accessControlHooks';\nimport { createRelativeUrl } from '../../utils/url';\n\nconst RecordingRulesButtons = () => {\n  const { canCreateGrafanaRules, canCreateCloudRules } = useRulesAccess();\n\n  const grafanaRecordingRulesEnabled = config.unifiedAlerting.recordingRulesEnabled && canCreateGrafanaRules;\n\n  const canCreateAll = canCreateGrafanaRules && canCreateCloudRules && grafanaRecordingRulesEnabled;\n\n  // User can create Grafana and DS-managed recording rules, show a dropdown\n  if (canCreateAll) {\n    return (\n      <Dropdown\n        overlay={\n          <Menu>\n            <MenuItem\n              url=\"alerting/new/grafana-recording\"\n              icon=\"plus\"\n              label={t('alerting.list-view.empty.new-grafana-recording-rule', 'New recording rule')}\n            />\n            <MenuItem\n              url=\"alerting/new/recording\"\n              icon=\"plus\"\n              label={t(\n                'alerting.list-view.empty.new-ds-managed-recording-rule',\n                'New data source-managed recording rule'\n              )}\n            />\n          </Menu>\n        }\n      >\n        <LinkButton variant=\"primary\" icon=\"plus\" size=\"lg\">\n          <Trans i18nKey=\"alerting.list-view.empty.new-recording-rule\">New recording rule</Trans>\n        </LinkButton>\n      </Dropdown>\n    );\n  }\n\n  // ...Otherwise, just show the buttons for each type of recording rule\n  // (this will just be one or the other)\n  return (\n    <>\n      {canCreateGrafanaRules && grafanaRecordingRulesEnabled && (\n        <LinkButton variant=\"primary\" icon=\"plus\" size=\"lg\" href=\"alerting/new/grafana-recording\">\n          <Trans i18nKey=\"alerting.list-view.empty.new-grafana-recording-rule\">New recording rule</Trans>\n        </LinkButton>\n      )}\n      {canCreateCloudRules && (\n        <LinkButton variant=\"primary\" icon=\"plus\" size=\"lg\" href=\"alerting/new/recording\">\n          <Trans i18nKey=\"alerting.list-view.empty.new-ds-managed-recording-rule\">\n            New data source-managed recording rule\n          </Trans>\n        </LinkButton>\n      )}\n    </>\n  );\n};\n\nexport const NoRulesSplash = () => {\n  const { canCreateGrafanaRules, canCreateCloudRules } = useRulesAccess();\n  const canCreateAnything = canCreateGrafanaRules || canCreateCloudRules;\n\n  return (\n    <div>\n      <EmptyState\n        message={t('alerting.list-view.empty.no-rules-created', \"You haven't created any rules yet\")}\n        variant=\"call-to-action\"\n        button={\n          canCreateAnything ? (\n            <Stack direction=\"column\" alignItems=\"center\" justifyContent=\"center\">\n              {canCreateAnything && (\n                <LinkButton variant=\"primary\" icon=\"plus\" size=\"lg\" href=\"alerting/new/alerting\">\n                  <Trans i18nKey=\"alerting.list-view.empty.new-alert-rule\">New alert rule</Trans>\n                </LinkButton>\n              )}\n              <RecordingRulesButtons />\n            </Stack>\n          ) : null\n        }\n      >\n        <Trans i18nKey=\"alerting.list-view.empty.provisioning\">\n          You can also define rules through file provisioning or Terraform\n        </Trans>\n        <TextLink href=\"https://grafana.com/docs/grafana/latest/alerting/set-up/provision-alerting-resources/\" external>\n          <Trans i18nKey=\"alerting.common.learn-more\">Learn more</Trans>\n        </TextLink>\n      </EmptyState>\n    </div>\n  );\n};\n\nexport function GrafanaNoRulesCTA() {\n  const { canCreateGrafanaRules } = useRulesAccess();\n\n  const grafanaRecordingRulesEnabled = config.unifiedAlerting.recordingRulesEnabled && canCreateGrafanaRules;\n\n  return (\n    <EmptyState\n      message={t('alerting.list-view.empty.no-rules-created', \"You haven't created any rules yet\")}\n      variant=\"call-to-action\"\n    >\n      <Stack direction=\"column\" alignItems=\"center\" justifyContent=\"center\" gap={2}>\n        <Stack direction=\"row\" alignItems=\"center\" justifyContent=\"center\">\n          <Trans i18nKey=\"alerting.list-view.empty.provisioning\">\n            You can also define rules through file provisioning or Terraform\n          </Trans>\n          <TextLink\n            href=\"https://grafana.com/docs/grafana/latest/alerting/set-up/provision-alerting-resources/\"\n            external\n          >\n            <Trans i18nKey=\"alerting.common.learn-more\">Learn more</Trans>\n          </TextLink>\n        </Stack>\n        <Stack direction=\"row\" alignItems=\"center\" justifyContent=\"center\">\n          {canCreateGrafanaRules && (\n            <LinkButton variant=\"primary\" icon=\"plus\" href=\"alerting/new/alerting\">\n              <Trans i18nKey=\"alerting.list-view.empty.new-grafana-alerting-rule\">New alert rule</Trans>\n            </LinkButton>\n          )}\n          {canCreateGrafanaRules && grafanaRecordingRulesEnabled && (\n            <LinkButton variant=\"primary\" icon=\"plus\" href=\"alerting/new/grafana-recording\">\n              <Trans i18nKey=\"alerting.list-view.empty.new-grafana-recording-rule\">New recording rule</Trans>\n            </LinkButton>\n          )}\n        </Stack>\n      </Stack>\n    </EmptyState>\n  );\n}\n\nexport function CloudNoRulesCTA({ dataSourceName }: { dataSourceName: string }) {\n  const styles = useStyles2(getCloudNoRulesStyles);\n  const { canCreateCloudRules } = useRulesAccess();\n\n  const newAlertingRuleUrl = getNewDataSourceRuleUrl(dataSourceName, RuleFormType.cloudAlerting);\n  const newRecordingRuleUrl = getNewDataSourceRuleUrl(dataSourceName, RuleFormType.cloudRecording);\n\n  return (\n    <div className={styles.container}>\n      <Text variant=\"h5\">\n        <Trans i18nKey=\"alerting.list-view.empty.ds-no-rules\">This data source has no rules configured</Trans>\n      </Text>\n      {canCreateCloudRules && (\n        <Stack direction=\"row\" alignItems=\"center\" justifyContent=\"center\">\n          <LinkButton variant=\"secondary\" size=\"sm\" icon=\"plus\" href={newAlertingRuleUrl}>\n            <Trans i18nKey=\"alerting.list-view.empty.new-ds-managed-alerting-rule\">\n              New data source-managed alerting rule\n            </Trans>\n          </LinkButton>\n          <LinkButton variant=\"secondary\" size=\"sm\" icon=\"plus\" href={newRecordingRuleUrl}>\n            <Trans i18nKey=\"alerting.list-view.empty.new-ds-managed-recording-rule\">\n              New data source-managed recording rule\n            </Trans>\n          </LinkButton>\n        </Stack>\n      )}\n    </div>\n  );\n}\n\nfunction getNewDataSourceRuleUrl(\n  dataSourceName: string,\n  type: RuleFormType.cloudAlerting | RuleFormType.cloudRecording\n) {\n  const urlRuleType = type === RuleFormType.cloudAlerting ? 'alerting' : 'recording';\n  const formDefaults: Partial<RuleFormValues> = {\n    dataSourceName,\n    editorSettings: {\n      simplifiedQueryEditor: false,\n      simplifiedNotificationEditor: false,\n    },\n    type,\n  };\n\n  return createRelativeUrl(`/alerting/new/${urlRuleType}`, { defaults: JSON.stringify(formDefaults) });\n}\n\nconst getCloudNoRulesStyles = (theme: GrafanaTheme2) => ({\n  container: css({\n    display: 'flex',\n    gap: theme.spacing(1),\n    flexDirection: 'column',\n    alignItems: 'center',\n    justifyContent: 'center',\n    padding: theme.spacing(2, 1),\n  }),\n});\n","import { HTMLAttributes } from 'react';\n\nimport { Button, IconSize } from '@grafana/ui';\n\ninterface Props extends HTMLAttributes<HTMLButtonElement> {\n  isCollapsed: boolean;\n  onToggle: (isCollapsed: boolean) => void;\n  // Todo: this should be made compulsory for a11y purposes\n  idControlled?: string;\n  size?: IconSize;\n  className?: string;\n  text?: string;\n}\n\nexport const CollapseToggle = ({\n  isCollapsed,\n  onToggle,\n  idControlled,\n  className,\n  text,\n  size = 'xl',\n  ...restOfProps\n}: Props) => {\n  return (\n    <Button\n      type=\"button\"\n      fill=\"text\"\n      variant=\"secondary\"\n      aria-expanded={!isCollapsed}\n      aria-controls={idControlled}\n      className={className}\n      icon={isCollapsed ? 'angle-right' : 'angle-down'}\n      onClick={() => onToggle(!isCollapsed)}\n      {...restOfProps}\n    >\n      {text}\n    </Button>\n  );\n};\n","import {\n  type TypedUseMutationResult,\n  type TypedUseQueryHookResult,\n  fetchBaseQuery,\n} from '@reduxjs/toolkit/query/react';\nimport { OverrideProperties } from 'type-fest';\n\nimport { CreateReceiverApiArg, type ListReceiverApiArg, alertingAPI } from '../../../api/v0alpha1/api.gen';\nimport type { ContactPoint, EnhancedListReceiverApiResponse } from '../../../api/v0alpha1/types';\n\n// this is a workaround for the fact that the generated types are not narrow enough\ntype ListContactPointsHookResult = TypedUseQueryHookResult<\n  EnhancedListReceiverApiResponse,\n  ListReceiverApiArg,\n  ReturnType<typeof fetchBaseQuery>\n>;\n\n// Type for the options that can be passed to the hook\n// Based on the pattern used for mutation options in this file\ntype ListContactPointsQueryArgs = Parameters<\n  typeof alertingAPI.endpoints.listReceiver.useQuery<ListContactPointsHookResult>\n>[0];\n\ntype ListContactPointsQueryOptions = Parameters<\n  typeof alertingAPI.endpoints.listReceiver.useQuery<ListContactPointsHookResult>\n>[1];\n\n/**\n * useListContactPoints is a hook that fetches a list of contact points\n *\n * This function wraps the alertingAPI.useListReceiverQuery with proper typing\n * to ensure that the returned ContactPoints are correctly typed in the data.items array.\n *\n * It automatically uses the configured namespace for the query.\n *\n * @param queryOptions - Optional query options that will be passed to the underlying useListReceiverQuery hook.\n *                      These options can include refetchOnFocus, refetchOnMountOrArgChange, skip, etc.\n */\nexport function useListContactPoints(\n  queryArgs: ListContactPointsQueryArgs = {},\n  queryOptions: ListContactPointsQueryOptions = {}\n) {\n  return alertingAPI.useListReceiverQuery<ListContactPointsHookResult>(queryArgs, queryOptions);\n}\n\n// type narrowing mutations requires us to define a few helper types\ntype CreateContactPointArgs = OverrideProperties<\n  CreateReceiverApiArg,\n  { receiver: Omit<ContactPoint, 'status' | 'metadata'> }\n>;\n\ntype CreateContactPointMutation = TypedUseMutationResult<\n  ContactPoint,\n  CreateContactPointArgs,\n  ReturnType<typeof fetchBaseQuery>\n>;\n\ntype UseCreateContactPointOptions = Parameters<\n  typeof alertingAPI.endpoints.createReceiver.useMutation<CreateContactPointMutation>\n>[0];\n\n/**\n * useCreateContactPoint is a hook that creates a new contact point with one or more integrations\n *\n * This function wraps the alertingAPI.useCreateReceiverMutation with proper typing\n * to ensure that the payload supports type narrowing.\n */\nexport function useCreateContactPoint(options?: UseCreateContactPointOptions) {\n  const [updateFn, result] = alertingAPI.endpoints.createReceiver.useMutation<CreateContactPointMutation>(options);\n\n  const typedUpdateFn = (args: CreateContactPointArgs) => {\n    // @ts-expect-error this one is just impossible for me to figure out\n    const response = updateFn(args);\n    return response;\n  };\n\n  return [typedUpdateFn, result] as const;\n}\n","import { countBy, isEmpty } from 'lodash';\n\nimport { Receiver } from '../api/v0alpha1/api.gen';\nimport { ContactPoint } from '../api/v0alpha1/types';\n\n/**\n * Generates a human-readable description of a ContactPoint by summarizing its integrations.\n * If the ContactPoint has no integrations, it returns an empty placeholder text.\n *\n * For integrations, it counts the occurrences of each type and formats them as a comma-separated list.\n * Multiple integrations of the same type are indicated with a count in parentheses.\n *\n * @param contactPoint - The ContactPoint object to describe\n * @returns A string description of the ContactPoint's integrations\n */\nexport function getContactPointDescription(contactPoint: ContactPoint | Receiver): string {\n  if (isEmpty(contactPoint.spec.integrations)) {\n    return '<empty contact point>';\n  }\n\n  // Count the occurrences of each integration type\n  const integrationCounts = countBy(contactPoint.spec.integrations, (integration) => integration.type);\n\n  const description = Object.entries(integrationCounts)\n    .map(([type, count]) => {\n      // either \"email\" or \"email (2)\" but not \"email (1)\"\n      return count > 1 ? `${type} (${count})` : type;\n    })\n    .join(', ');\n\n  return description;\n}\n","import { chain } from 'lodash';\n\nimport { Combobox, ComboboxOption } from '@grafana/ui';\n\nimport type { ContactPoint } from '../../../api/v0alpha1/types';\nimport { useListContactPoints } from '../../hooks/v0alpha1/useContactPoints';\nimport { getContactPointDescription } from '../../utils';\n\nimport { CustomComboBoxProps } from './ComboBox.types';\n\nconst collator = new Intl.Collator('en', { sensitivity: 'accent' });\n\nexport type ContactPointSelectorProps = CustomComboBoxProps<ContactPoint>;\n\n/**\n * Contact Point Combobox which lists all available contact points\n * @TODO make ComboBox accept a ReactNode so we can use icons and such\n */\nfunction ContactPointSelector(props: ContactPointSelectorProps) {\n  const { currentData: contactPoints, isLoading } = useListContactPoints(\n    {},\n    { refetchOnFocus: true, refetchOnMountOrArgChange: true }\n  );\n\n  // Create a mapping of options with their corresponding contact points\n  const contactPointOptions = chain(contactPoints?.items)\n    .toArray()\n    .map((contactPoint) => ({\n      option: {\n        label: contactPoint.spec.title,\n        value: contactPoint.metadata.uid ?? contactPoint.spec.title,\n        description: getContactPointDescription(contactPoint),\n      } satisfies ComboboxOption<string>,\n      contactPoint,\n    }))\n    .value()\n    .sort((a, b) => collator.compare(a.option.label, b.option.label));\n\n  const options = contactPointOptions.map<ComboboxOption>((item) => item.option);\n\n  const handleChange = (selectedOption: ComboboxOption<string> | null) => {\n    if (selectedOption == null && props.isClearable) {\n      props.onChange(null);\n      return;\n    }\n\n    if (selectedOption) {\n      const matchedOption = contactPointOptions.find(({ option }) => option.value === selectedOption.value);\n      if (!matchedOption) {\n        return;\n      }\n\n      props.onChange(matchedOption.contactPoint);\n    }\n  };\n\n  return <Combobox {...props} loading={isLoading} options={options} onChange={handleChange} />;\n}\n\nexport { ContactPointSelector };\n","import { useState } from 'react';\nimport { PopValueActionMeta, RemoveValueActionMeta } from 'react-select';\n\nimport {\n  DataSourceInstanceSettings,\n  SelectableValue,\n  getDataSourceUID,\n  isUnsignedPluginSignature,\n} from '@grafana/data';\nimport { selectors } from '@grafana/e2e-selectors';\nimport { t } from '@grafana/i18n';\nimport { DataSourcePickerProps, DataSourcePickerState, getDataSourceSrv } from '@grafana/runtime';\nimport { ExpressionDatasourceRef } from '@grafana/runtime/internal';\nimport { ActionMeta, MultiSelect, PluginSignatureBadge, Stack } from '@grafana/ui';\n\nimport { isDataSourceManagingAlerts } from '../../utils/datasource';\n\nexport interface MultipleDataSourcePickerProps extends Omit<DataSourcePickerProps, 'onChange' | 'current'> {\n  onChange: (ds: DataSourceInstanceSettings, action: 'add' | 'remove') => void;\n  current: string[] | undefined;\n}\n\nexport const MultipleDataSourcePicker = (props: MultipleDataSourcePickerProps) => {\n  const dataSourceSrv = getDataSourceSrv();\n\n  const [state, setState] = useState<DataSourcePickerState>();\n\n  const onChange = (items: Array<SelectableValue<string>>, actionMeta: ActionMeta) => {\n    if (actionMeta.action === 'clear' && props.onClear) {\n      props.onClear();\n      return;\n    }\n\n    const selectedItem = items[items.length - 1];\n\n    let dataSourceName, action: 'add' | 'remove';\n\n    if (actionMeta.action === 'pop-value' || actionMeta.action === 'remove-value') {\n      const castedActionMeta:\n        | RemoveValueActionMeta<SelectableValue<string>>\n        | PopValueActionMeta<SelectableValue<string>> = actionMeta;\n      dataSourceName = castedActionMeta.removedValue?.value;\n      action = 'remove';\n    } else {\n      dataSourceName = selectedItem.value;\n      action = 'add';\n    }\n\n    const dsSettings = dataSourceSrv.getInstanceSettings(dataSourceName);\n\n    if (dsSettings) {\n      props.onChange(dsSettings, action);\n      setState({ error: undefined });\n    }\n  };\n\n  const getCurrentValue = (): Array<SelectableValue<string>> | undefined => {\n    const { current, hideTextValue, noDefault } = props;\n    if (!current && noDefault) {\n      return;\n    }\n\n    return current?.map((dataSourceName: string) => {\n      const ds = dataSourceSrv.getInstanceSettings(dataSourceName);\n      if (ds) {\n        return {\n          label: ds.name.slice(0, 37),\n          value: ds.name,\n          imgUrl: ds.meta.info.logos.small,\n          hideText: hideTextValue,\n          meta: ds.meta,\n        };\n      }\n\n      const uid = getDataSourceUID(dataSourceName);\n\n      if (uid === ExpressionDatasourceRef.uid || uid === ExpressionDatasourceRef.name) {\n        return { label: uid, value: uid, hideText: hideTextValue };\n      }\n\n      return {\n        label: (uid ?? 'no name') + ' - not found',\n        value: uid ?? undefined,\n        imgUrl: '',\n        hideText: hideTextValue,\n      };\n    });\n  };\n\n  const getDataSourceOptions = () => {\n    const { alerting, tracing, metrics, mixed, dashboard, variables, annotations, pluginId, type, filter, logs } =\n      props;\n\n    const dataSources = dataSourceSrv.getList({\n      alerting,\n      tracing,\n      metrics,\n      logs,\n      dashboard,\n      mixed,\n      variables,\n      annotations,\n      pluginId,\n      filter,\n      type,\n    });\n\n    const alertManagingDs = dataSources.filter(isDataSourceManagingAlerts).map((ds) => ({\n      value: ds.name,\n      label: `${ds.name}${ds.isDefault ? ' (default)' : ''}`,\n      imgUrl: ds.meta.info.logos.small,\n      meta: ds.meta,\n    }));\n\n    const nonAlertManagingDs = dataSources\n      .filter((ds) => !isDataSourceManagingAlerts(ds))\n      .map((ds) => ({\n        value: ds.name,\n        label: `${ds.name}${ds.isDefault ? ' (default)' : ''}`,\n        imgUrl: ds.meta.info.logos.small,\n        meta: ds.meta,\n      }));\n\n    const groupedOptions = [\n      {\n        label: t(\n          'alerting.multiple-data-source-picker.get-data-source-options.grouped-options.label.data-sources-with-configured-alert-rules',\n          'Data sources with configured alert rules'\n        ),\n        options: alertManagingDs,\n        expanded: true,\n      },\n      {\n        label: t(\n          'alerting.multiple-data-source-picker.get-data-source-options.grouped-options.label.other-data-sources',\n          'Other data sources'\n        ),\n        options: nonAlertManagingDs,\n        expanded: true,\n      },\n    ];\n\n    return groupedOptions;\n  };\n\n  const {\n    autoFocus,\n    onBlur,\n    onClear,\n    openMenuOnFocus,\n    placeholder,\n    width,\n    inputId,\n    disabled = false,\n    isLoading = false,\n  } = props;\n\n  const options = getDataSourceOptions();\n  const value = getCurrentValue();\n  const isClearable = typeof onClear === 'function';\n\n  return (\n    <div data-testid={selectors.components.DataSourcePicker.container}>\n      <MultiSelect\n        isLoading={isLoading}\n        disabled={disabled}\n        data-testid={selectors.components.DataSourcePicker.inputV2}\n        inputId={inputId || 'data-source-picker'}\n        className=\"ds-picker select-container\"\n        isClearable={isClearable}\n        backspaceRemovesValue={true}\n        onChange={onChange}\n        options={options}\n        autoFocus={autoFocus}\n        onBlur={onBlur}\n        width={width}\n        openMenuOnFocus={openMenuOnFocus}\n        maxMenuHeight={500}\n        placeholder={placeholder}\n        noOptionsMessage={t(\n          'alerting.multiple-data-source-picker.noOptionsMessage-no-datasources-found',\n          'No datasources found'\n        )}\n        value={value ?? []}\n        invalid={Boolean(state?.error) || Boolean(props.invalid)}\n        getOptionLabel={(o) => {\n          if (o.meta && isUnsignedPluginSignature(o.meta.signature) && o !== value) {\n            return (\n              <Stack alignItems=\"center\" justifyContent=\"space-between\">\n                <span>{o.label}</span> <PluginSignatureBadge status={o.meta.signature} />\n              </Stack>\n            );\n          }\n          return o.label || '';\n        }}\n      />\n    </div>\n  );\n};\n","import { css } from '@emotion/css';\nimport { useEffect, useRef, useState } from 'react';\nimport { useForm } from 'react-hook-form';\n\nimport { ContactPointSelector } from '@grafana/alerting/unstable';\nimport { DataSourceInstanceSettings, GrafanaTheme2, SelectableValue } from '@grafana/data';\nimport { Trans, t } from '@grafana/i18n';\nimport { Button, Field, Icon, Input, Label, RadioButtonGroup, Stack, Tooltip, useStyles2 } from '@grafana/ui';\nimport { DashboardPicker } from 'app/core/components/Select/DashboardPicker';\nimport { contextSrv } from 'app/core/core';\nimport { AccessControlAction } from 'app/types/accessControl';\nimport { PromAlertingRuleState, PromRuleType } from 'app/types/unified-alerting-dto';\n\nimport { LogMessages, logInfo, trackAlertRuleFilterEvent } from '../../../Analytics';\nimport { useRulesFilter } from '../../../hooks/useFilteredRules';\nimport { useAlertingHomePageExtensions } from '../../../plugins/useAlertingHomePageExtensions';\nimport { RulesFilterProps } from '../../../rule-list/filter/RulesFilter';\nimport { RuleHealth, getSearchFilterFromQuery } from '../../../search/rulesSearchParser';\nimport { alertStateToReadable } from '../../../utils/rules';\nimport { PopupCard } from '../../HoverCard';\nimport { MultipleDataSourcePicker } from '../MultipleDataSourcePicker';\n\nimport { RulesViewModeSelector } from './RulesViewModeSelector';\n\nconst RuleTypeOptions: SelectableValue[] = [\n  { label: 'Alert ', value: PromRuleType.Alerting },\n  { label: 'Recording ', value: PromRuleType.Recording },\n];\n\nconst RuleHealthOptions: SelectableValue[] = [\n  { label: 'Ok', value: RuleHealth.Ok },\n  { label: 'No Data', value: RuleHealth.NoData },\n  { label: 'Error', value: RuleHealth.Error },\n];\n\nconst canRenderContactPointSelector = contextSrv.hasPermission(AccessControlAction.AlertingReceiversRead);\n\nconst RuleStateOptions = Object.entries(PromAlertingRuleState)\n  .filter(([key, value]) => value !== PromAlertingRuleState.Unknown) // Exclude Unknown state from filter options\n  .map(([key, value]) => ({\n    label: alertStateToReadable(value),\n    value,\n  }));\n\nconst RulesFilter = ({ onClear = () => undefined, viewMode, onViewModeChange }: RulesFilterProps) => {\n  const styles = useStyles2(getStyles);\n  const { pluginsFilterEnabled } = usePluginsFilterStatus();\n  const { filterState, hasActiveFilters, searchQuery, setSearchQuery, updateFilters } = useRulesFilter();\n\n  // This key is used to force a rerender on the inputs when the filters are cleared\n  const [filterKey, setFilterKey] = useState<number>(Math.floor(Math.random() * 100));\n  const dataSourceKey = `dataSource-${filterKey}`;\n  const queryStringKey = `queryString-${filterKey}`;\n\n  const searchQueryRef = useRef<HTMLInputElement | null>(null);\n  const { handleSubmit, register, setValue } = useForm<{ searchQuery: string }>({\n    defaultValues: { searchQuery },\n  });\n  const { ref, ...rest } = register('searchQuery');\n\n  useEffect(() => {\n    setValue('searchQuery', searchQuery);\n  }, [searchQuery, setValue]);\n\n  const handleDataSourceChange = (dataSourceValue: DataSourceInstanceSettings, action: 'add' | 'remove') => {\n    const dataSourceNames =\n      action === 'add'\n        ? [...filterState.dataSourceNames].concat([dataSourceValue.name])\n        : filterState.dataSourceNames.filter((name) => name !== dataSourceValue.name);\n\n    updateFilters({\n      ...filterState,\n      dataSourceNames,\n    });\n\n    setFilterKey((key) => key + 1);\n    trackAlertRuleFilterEvent({ filterMethod: 'filter-component', filter: 'dataSourceNames' });\n  };\n\n  type Filters = typeof filterState;\n\n  const updateAndTrack =\n    <K extends keyof Filters>(key: K) =>\n    (value: Filters[K]) => {\n      updateFilters({ ...filterState, [key]: value });\n      trackAlertRuleFilterEvent({ filterMethod: 'filter-component', filter: key });\n    };\n\n  const clearDataSource = () => {\n    updateFilters({ ...filterState, dataSourceNames: [] });\n    setFilterKey((key) => key + 1);\n  };\n\n  // Note: keep explicit logging for alert state filter clicks\n  const handleAlertStateChange = (value: PromAlertingRuleState) => {\n    logInfo(LogMessages.clickingAlertStateFilters);\n    updateAndTrack('ruleState')(value);\n  };\n\n  const handleClearFiltersClick = () => {\n    setSearchQuery(undefined);\n    onClear();\n\n    setTimeout(() => setFilterKey(filterKey + 1), 100);\n  };\n\n  const handleContactPointChange = (contactPoint: string) => {\n    updateAndTrack('contactPoint')(contactPoint);\n  };\n\n  const searchIcon = <Icon name={'search'} />;\n\n  return (\n    <Stack direction=\"column\" gap={0}>\n      <Stack direction=\"row\" gap={1} wrap=\"wrap\">\n        <Field\n          className={styles.dsPickerContainer}\n          label={\n            <Label htmlFor=\"data-source-picker\">\n              <Stack gap={0.5} alignItems=\"center\">\n                <span>\n                  <Trans i18nKey=\"alerting.rules-filter.search-by-data-sources\">Search by data sources</Trans>\n                </span>\n                <Tooltip\n                  content={\n                    <div>\n                      <p>\n                        <Trans i18nKey=\"alerting.rules-filter.configured-alert-rules\">\n                          Data sources containing configured alert rules are Mimir or Loki data sources where alert\n                          rules are stored and evaluated in the data source itself.\n                        </Trans>\n                      </p>\n                      <p>\n                        <Trans i18nKey=\"alerting.rules-filter.manage-alerts\">\n                          In these data sources, you can select Manage alerts via Alerting UI to be able to manage these\n                          alert rules in the Grafana UI as well as in the data source where they were configured.\n                        </Trans>\n                      </p>\n                    </div>\n                  }\n                >\n                  <Icon\n                    id=\"data-source-picker-inline-help\"\n                    name=\"info-circle\"\n                    size=\"sm\"\n                    title={t(\n                      'alerting.rules-filter.data-source-picker-inline-help-title-search-by-data-sources-help',\n                      'Search by data sources help'\n                    )}\n                  />\n                </Tooltip>\n              </Stack>\n            </Label>\n          }\n        >\n          <MultipleDataSourcePicker\n            key={dataSourceKey}\n            alerting\n            noDefault\n            placeholder={t('alerting.rules-filter.placeholder-all-data-sources', 'All data sources')}\n            current={filterState.dataSourceNames}\n            onChange={handleDataSourceChange}\n            onClear={clearDataSource}\n          />\n        </Field>\n\n        <Field\n          className={styles.dashboardPickerContainer}\n          label={\n            <Label htmlFor=\"filters-dashboard-picker\">\n              <Trans i18nKey=\"alerting.rules-filter.dashboard\">Dashboard</Trans>\n            </Label>\n          }\n        >\n          {/* The key prop is to clear the picker value */}\n          {/* DashboardPicker doesn't do that itself when value is undefined */}\n          <DashboardPicker\n            inputId=\"filters-dashboard-picker\"\n            key={filterState.dashboardUid ? 'dashboard-defined' : 'dashboard-not-defined'}\n            value={filterState.dashboardUid}\n            onChange={(value) => updateAndTrack('dashboardUid')(value?.uid)}\n            isClearable\n            cacheOptions\n          />\n        </Field>\n\n        <div>\n          <Label>\n            <Trans i18nKey=\"alerting.rules-filter.state\">State</Trans>\n          </Label>\n          <RadioButtonGroup\n            options={RuleStateOptions}\n            value={filterState.ruleState}\n            onChange={handleAlertStateChange}\n          />\n        </div>\n        <div>\n          <Label>\n            <Trans i18nKey=\"alerting.rules-filter.rule-type\">Rule type</Trans>\n          </Label>\n          <RadioButtonGroup\n            options={RuleTypeOptions}\n            value={filterState.ruleType}\n            onChange={updateAndTrack('ruleType')}\n          />\n        </div>\n        <div>\n          <Label>\n            <Trans i18nKey=\"alerting.rules-filter.health\">Health</Trans>\n          </Label>\n          <RadioButtonGroup\n            options={RuleHealthOptions}\n            value={filterState.ruleHealth}\n            onChange={updateAndTrack('ruleHealth')}\n          />\n        </div>\n        {canRenderContactPointSelector && (\n          <Stack direction=\"column\" gap={0}>\n            <Field\n              label={\n                <Label htmlFor=\"contactPointFilter\">\n                  <Trans i18nKey=\"alerting.contactPointFilter.label\">Contact point</Trans>\n                </Label>\n              }\n            >\n              <ContactPointSelector\n                id=\"contactPointFilter\"\n                value={filterState.contactPoint ?? null}\n                width={40}\n                placeholder={t(\n                  'alerting.notification-policies-filter.placeholder-search-by-contact-point',\n                  'Choose a contact point'\n                )}\n                isClearable\n                onChange={(contactPoint) => {\n                  handleContactPointChange(contactPoint?.spec.title ?? '');\n                }}\n              />\n            </Field>\n          </Stack>\n        )}\n        {pluginsFilterEnabled && (\n          <div>\n            <Label>\n              <Trans i18nKey=\"alerting.rules-filter.plugin-rules\">Plugin rules</Trans>\n            </Label>\n            <RadioButtonGroup<'hide'>\n              options={[\n                { label: t('alerting.rules-filter.label.show', 'Show'), value: undefined },\n                { label: t('alerting.rules-filter.label.hide', 'Hide'), value: 'hide' },\n              ]}\n              value={filterState.plugins}\n              onChange={(value) => updateFilters({ ...filterState, plugins: value })}\n            />\n          </div>\n        )}\n      </Stack>\n\n      <Stack direction=\"column\" gap={0}>\n        <Stack direction=\"row\" gap={1}>\n          <form\n            className={styles.searchInput}\n            onSubmit={handleSubmit((data) => {\n              setSearchQuery(data.searchQuery);\n              searchQueryRef.current?.blur();\n              trackAlertRuleFilterEvent({\n                filterMethod: 'search-input',\n                filter: getSearchFilterFromQuery(data.searchQuery),\n              });\n            })}\n          >\n            <Field\n              label={\n                <Label htmlFor=\"rulesSearchInput\">\n                  <Stack gap={0.5} alignItems=\"center\">\n                    <span>\n                      <Trans i18nKey=\"alerting.rules-filter.search\">Search</Trans>\n                    </span>\n                    <PopupCard content={<SearchQueryHelp />}>\n                      <Icon\n                        name=\"info-circle\"\n                        size=\"sm\"\n                        tabIndex={0}\n                        title={t('alerting.rules-filter.title-search-help', 'Search help')}\n                      />\n                    </PopupCard>\n                  </Stack>\n                </Label>\n              }\n            >\n              <Input\n                id=\"rulesSearchInput\"\n                key={queryStringKey}\n                prefix={searchIcon}\n                ref={(e) => {\n                  ref(e);\n                  searchQueryRef.current = e;\n                }}\n                {...rest}\n                placeholder={t('alerting.rules-filter.rulesSearchInput-placeholder-search', 'Search')}\n                data-testid=\"search-query-input\"\n              />\n            </Field>\n            <input type=\"submit\" hidden />\n          </form>\n          <div>\n            <Label>\n              <Trans i18nKey=\"alerting.rules-filter.view-as\">View as</Trans>\n            </Label>\n            <RulesViewModeSelector viewMode={viewMode} onViewModeChange={onViewModeChange} />\n          </div>\n        </Stack>\n        {hasActiveFilters && (\n          <div>\n            <Button fullWidth={false} icon=\"times\" variant=\"secondary\" onClick={handleClearFiltersClick}>\n              <Trans i18nKey=\"alerting.rules-filter.clear-filters\">Clear filters</Trans>\n            </Button>\n          </div>\n        )}\n      </Stack>\n    </Stack>\n  );\n};\n\nconst getStyles = (theme: GrafanaTheme2) => {\n  return {\n    dsPickerContainer: css({\n      width: theme.spacing(60),\n      flexGrow: 0,\n      margin: 0,\n    }),\n    dashboardPickerContainer: css({\n      minWidth: theme.spacing(50),\n    }),\n    searchInput: css({\n      flex: 1,\n      margin: 0,\n    }),\n  };\n};\n\nfunction SearchQueryHelp() {\n  const styles = useStyles2(helpStyles);\n\n  return (\n    <div>\n      <div>\n        <Trans i18nKey=\"alerting.search-query-help.search-syntax\">\n          Search syntax allows to query alert rules by the parameters defined below.\n        </Trans>\n      </div>\n      <hr />\n      <div className={styles.grid}>\n        <div>\n          <Trans i18nKey=\"alerting.search-query-help.filter-type\">Filter type</Trans>\n        </div>\n        <div>\n          <Trans i18nKey=\"alerting.search-query-help.expression\">Expression</Trans>\n        </div>\n        <HelpRow\n          title={t('alerting.search-query-help.title-datasources', 'Datasources')}\n          expr=\"datasource:mimir datasource:prometheus\"\n        />\n        <HelpRow\n          title={t('alerting.search-query-help.title-folder-namespace', 'Folder/Namespace')}\n          expr=\"namespace:global\"\n        />\n        <HelpRow title={t('alerting.search-query-help.title-group', 'Group')} expr=\"group:cpu-usage\" />\n        <HelpRow title={t('alerting.search-query-help.title-rule', 'Rule')} expr='rule:\"cpu 80%\"' />\n        <HelpRow title={t('alerting.search-query-help.title-labels', 'Labels')} expr=\"label:team=A label:cluster=a1\" />\n        <HelpRow title={t('alerting.search-query-help.title-state', 'State')} expr=\"state:firing|normal|pending\" />\n        <HelpRow title={t('alerting.search-query-help.title-type', 'Type')} expr=\"type:alerting|recording\" />\n        <HelpRow title={t('alerting.search-query-help.title-health', 'Health')} expr=\"health:ok|nodata|error\" />\n        <HelpRow\n          title={t('alerting.search-query-help.title-dashboard-uid', 'Dashboard UID')}\n          expr=\"dashboard:eadde4c7-54e6-4964-85c0-484ab852fd04\"\n        />\n        <HelpRow\n          title={t('alerting.search-query-help.title-contact-point', 'Contact point')}\n          expr=\"contactPoint:slack\"\n        />\n      </div>\n    </div>\n  );\n}\n\nfunction HelpRow({ title, expr }: { title: string; expr: string }) {\n  const styles = useStyles2(helpStyles);\n\n  return (\n    <>\n      <div>{title}</div>\n      <code className={styles.code}>{expr}</code>\n    </>\n  );\n}\n\nconst helpStyles = (theme: GrafanaTheme2) => ({\n  grid: css({\n    display: 'grid',\n    gridTemplateColumns: 'max-content auto',\n    gap: theme.spacing(1),\n    alignItems: 'center',\n  }),\n  code: css({\n    display: 'block',\n    textAlign: 'center',\n  }),\n});\n\nfunction usePluginsFilterStatus() {\n  const { components } = useAlertingHomePageExtensions();\n  return { pluginsFilterEnabled: components.length > 0 };\n}\n\nexport default RulesFilter;\n","import { css } from '@emotion/css';\nimport { isEmpty } from 'lodash';\nimport { PropsWithChildren, ReactNode } from 'react';\nimport { useToggle } from 'react-use';\n\nimport { GrafanaTheme2 } from '@grafana/data';\nimport { t } from '@grafana/i18n';\nimport { IconButton, Stack, useStyles2 } from '@grafana/ui';\n\nimport { Spacer } from '../../components/Spacer';\n\ninterface ListSectionProps extends PropsWithChildren {\n  title: ReactNode;\n  collapsed?: boolean;\n  actions?: ReactNode;\n  pagination?: ReactNode;\n}\n\nexport const ListSection = ({\n  children,\n  title,\n  collapsed = false,\n  actions = null,\n  pagination = null,\n}: ListSectionProps) => {\n  const styles = useStyles2(getStyles);\n  const [isCollapsed, toggleCollapsed] = useToggle(collapsed);\n\n  return (\n    <li className={styles.wrapper} role=\"treeitem\" aria-selected=\"false\">\n      <div className={styles.sectionTitle}>\n        <Stack alignItems=\"center\">\n          <Stack alignItems=\"center\" gap={0.5}>\n            <IconButton\n              name={isCollapsed ? 'angle-right' : 'angle-down'}\n              onClick={toggleCollapsed}\n              aria-label={t('common.collapse', 'Collapse')}\n            />\n            {title}\n          </Stack>\n          {actions && (\n            <>\n              <Spacer />\n              {actions}\n            </>\n          )}\n        </Stack>\n      </div>\n      {!isEmpty(children) && !isCollapsed && (\n        <>\n          <ul role=\"group\" className={styles.groupItemsWrapper}>\n            {children}\n          </ul>\n          {pagination}\n        </>\n      )}\n    </li>\n  );\n};\n\nconst getStyles = (theme: GrafanaTheme2) => ({\n  groupItemsWrapper: css({\n    position: 'relative',\n\n    // unfortunately we have to resort to this since we can't overwrite the styles of the list items individually\n    // unless we clone the React Elements and modify className\n    'li[role=treeitem]': {\n      listStyle: 'none',\n      position: 'relative',\n      paddingLeft: theme.spacing(6.5),\n\n      '&:before': {\n        content: \"''\",\n        position: 'absolute',\n        height: '100%',\n\n        marginLeft: theme.spacing(-1.5),\n        marginTop: theme.spacing(-1),\n        borderLeft: `solid 1px ${theme.colors.border.weak}`,\n      },\n    },\n  }),\n  wrapper: css({\n    display: 'flex',\n    flexDirection: 'column',\n  }),\n  sectionTitle: css({\n    padding: theme.spacing(1, 1.5),\n\n    '&:hover': {\n      background: theme.colors.action.hover,\n    },\n  }),\n});\n","import { useEffect, useRef } from 'react';\nvar useInterval = function (callback, delay) {\n    var savedCallback = useRef(function () { });\n    useEffect(function () {\n        savedCallback.current = callback;\n    });\n    useEffect(function () {\n        if (delay !== null) {\n            var interval_1 = setInterval(function () { return savedCallback.current(); }, delay || 0);\n            return function () { return clearInterval(interval_1); };\n        }\n        return undefined;\n    }, [delay]);\n};\nexport default useInterval;\n","import { ComponentProps } from 'react';\n\nimport { Button, IconName, LinkButton, Tooltip } from '@grafana/ui';\n\ntype TooltipProps = ComponentProps<typeof Tooltip>;\n\ninterface Props {\n  tooltip: TooltipProps['content'];\n  icon: IconName;\n  className?: string;\n  tooltipPlacement?: TooltipProps['placement'];\n  to?: string;\n  target?: string;\n  onClick?: () => void;\n  'data-testid'?: string;\n}\n\nexport const ActionIcon = ({\n  tooltip,\n  icon,\n  to,\n  target,\n  onClick,\n  className,\n  tooltipPlacement = 'top',\n  ...rest\n}: Props) => {\n  const ariaLabel = typeof tooltip === 'string' ? tooltip : undefined;\n\n  return to ? (\n    <LinkButton\n      tooltip={tooltip}\n      tooltipPlacement={tooltipPlacement}\n      variant=\"secondary\"\n      fill=\"text\"\n      icon={icon}\n      href={to}\n      size=\"sm\"\n      target={target}\n      {...rest}\n      aria-label={ariaLabel}\n    />\n  ) : (\n    <Button\n      tooltip={tooltip}\n      tooltipPlacement={tooltipPlacement}\n      className={className}\n      variant=\"secondary\"\n      fill=\"text\"\n      size=\"sm\"\n      icon={icon}\n      type=\"button\"\n      onClick={onClick}\n      {...rest}\n      aria-label={ariaLabel}\n    />\n  );\n};\n","import { useCallback } from 'react';\n\nimport { SelectableValue } from '@grafana/data';\nimport { RadioButtonGroup } from '@grafana/ui';\n\nimport { trackRulesListViewChange } from '../../../Analytics';\nimport { shouldUseAlertingListViewV2 } from '../../../featureToggles';\nimport { useRulesFilter } from '../../../hooks/useFilteredRules';\nimport { useURLSearchParams } from '../../../hooks/useURLSearchParams';\n\nexport type SupportedView = 'list' | 'grouped';\n\ntype LegacySupportedView = 'list' | 'grouped' | 'state';\n\nconst ViewOptions: Array<SelectableValue<SupportedView>> = [\n  { icon: 'folder', value: 'grouped', label: 'Grouped' },\n  { icon: 'list-ul', value: 'list', label: 'List' },\n];\n\ninterface RulesViewModeSelectorV2Props {\n  viewMode?: SupportedView;\n  onViewModeChange?: (viewMode: SupportedView) => void;\n}\n\n/**\n * Selecting a view mode is no longer a simple toggle relying on the URL query params.\n * We now need to check if the current filters are compatible with the grouped view.\n * If they are, we show the grouped view by default.\n * If they are not, we show the list view.\n * Use the complementary {@link useListViewMode} hook to get the current view mode and a handler for changing it.\n */\nfunction RulesViewModeSelectorV2({ viewMode, onViewModeChange }: RulesViewModeSelectorV2Props) {\n  return <RadioButtonGroup options={ViewOptions} value={viewMode} onChange={onViewModeChange} />;\n}\n\nexport function useListViewMode() {\n  const [queryParams, updateQueryParams] = useURLSearchParams();\n  const { activeFilters } = useRulesFilter();\n\n  const queryStringView: SupportedView = queryParams.get('view') === 'list' ? 'list' : 'grouped';\n\n  const areFiltersGroupedViewCompatible = activeFilters.every(\n    (filter) => filter === 'groupName' || filter === 'namespace'\n  );\n  const showListView = areFiltersGroupedViewCompatible === false || queryStringView === 'list';\n\n  const handleViewChange = useCallback(\n    (view: SupportedView) => {\n      if (view === 'grouped') {\n        // When switching to grouped view, preserve filters only if they are grouped-view compatible\n        if (areFiltersGroupedViewCompatible) {\n          // Only remove view parameter, keep search (preserve group/namespace filters)\n          updateQueryParams({ view: undefined });\n        } else {\n          // Clear both view and search (clear all filters)\n          updateQueryParams({ view: undefined, search: undefined });\n        }\n      } else {\n        updateQueryParams({ view });\n      }\n      trackRulesListViewChange({ view });\n    },\n    [updateQueryParams, areFiltersGroupedViewCompatible]\n  );\n\n  const viewMode: SupportedView = showListView ? 'list' : 'grouped';\n\n  return {\n    viewMode,\n    handleViewChange,\n  };\n}\n\nconst LegacyViewOptions: Array<SelectableValue<LegacySupportedView>> = [\n  { label: 'Grouped', value: 'grouped' },\n  { label: 'List', value: 'list' },\n  { label: 'State', value: 'state' },\n];\n\nfunction RulesViewModeSelectorV1() {\n  const [queryParams, updateQueryParams] = useURLSearchParams();\n  const viewParam = queryParams.get('view');\n\n  const currentView = viewParamToLegacyView(viewParam);\n\n  const handleViewChange = (view: LegacySupportedView) => {\n    updateQueryParams({ view });\n  };\n\n  return <RadioButtonGroup options={LegacyViewOptions} value={currentView} onChange={handleViewChange} />;\n}\n\nfunction viewParamToLegacyView(viewParam: string | null): LegacySupportedView {\n  if (viewParam === 'list') {\n    return 'list';\n  }\n\n  if (viewParam === 'state') {\n    return 'state';\n  }\n\n  return 'grouped';\n}\n\ninterface RulesViewModeSelectorProps {\n  viewMode?: SupportedView;\n  onViewModeChange?: (viewMode: SupportedView) => void;\n}\n\nexport function RulesViewModeSelector({ viewMode, onViewModeChange }: RulesViewModeSelectorProps) {\n  if (shouldUseAlertingListViewV2()) {\n    return <RulesViewModeSelectorV2 viewMode={viewMode} onViewModeChange={onViewModeChange} />;\n  }\n\n  return <RulesViewModeSelectorV1 />;\n}\n","import { css } from '@emotion/css';\nimport { SerializedError } from '@reduxjs/toolkit';\nimport { FC, ReactElement, useMemo, useState } from 'react';\nimport { useLocalStorage } from 'react-use';\n\nimport { DataSourceInstanceSettings, GrafanaTheme2 } from '@grafana/data';\nimport { Trans, t } from '@grafana/i18n';\nimport { Alert, Button, Tooltip, useStyles2 } from '@grafana/ui';\n\nimport { useUnifiedAlertingSelector } from '../../hooks/useUnifiedAlertingSelector';\nimport { GRAFANA_RULES_SOURCE_NAME, getRulesDataSources } from '../../utils/datasource';\nimport { makeDataSourceLink } from '../../utils/misc';\nimport { isRulerNotSupportedResponse } from '../../utils/rules';\n\nexport function RuleListErrors(): ReactElement {\n  const [expanded, setExpanded] = useState(false);\n  const [closed, setClosed] = useLocalStorage('grafana.unifiedalerting.hideErrors', false);\n  const promRuleRequests = useUnifiedAlertingSelector((state) => state.promRules);\n  const rulerRuleRequests = useUnifiedAlertingSelector((state) => state.rulerRules);\n  const styles = useStyles2(getStyles);\n\n  const errors = useMemo((): JSX.Element[] => {\n    const [promRequestErrors, rulerRequestErrors] = [promRuleRequests, rulerRuleRequests].map((requests) =>\n      getRulesDataSources().reduce<Array<{ error: SerializedError; dataSource: DataSourceInstanceSettings }>>(\n        (result, dataSource) => {\n          const error = requests[dataSource.name]?.error;\n          if (requests[dataSource.name] && error && !isRulerNotSupportedResponse(requests[dataSource.name])) {\n            return [...result, { dataSource, error }];\n          }\n          return result;\n        },\n        []\n      )\n    );\n    const grafanaPromError = promRuleRequests[GRAFANA_RULES_SOURCE_NAME]?.error;\n    const grafanaRulerError = rulerRuleRequests[GRAFANA_RULES_SOURCE_NAME]?.error;\n\n    const result: JSX.Element[] = [];\n\n    const unknownError = t('alerting.rule-list-errors.unknown-error', 'Unknown error.');\n\n    if (grafanaPromError) {\n      result.push(\n        <>\n          <Trans i18nKey=\"alerting.rule-list-errors.failed-to-load-grafana-rules-state\">\n            Failed to load Grafana rules state:\n          </Trans>{' '}\n          {grafanaPromError.message || unknownError}\n        </>\n      );\n    }\n    if (grafanaRulerError) {\n      result.push(\n        <>\n          <Trans i18nKey=\"alerting.rule-list-errors.failed-to-load-grafana-rules-config\">\n            Failed to load Grafana rules config:\n          </Trans>{' '}\n          {grafanaRulerError?.message || unknownError}\n        </>\n      );\n    }\n\n    promRequestErrors.forEach(({ dataSource, error }) =>\n      result.push(\n        <>\n          <Trans\n            i18nKey=\"alerting.rule-list-errors.failed-to-load-rules-state\"\n            values={{ dataSource: dataSource.name }}\n          >\n            Failed to load rules state from{' '}\n            <a href={makeDataSourceLink(dataSource.uid)} className={styles.dsLink}>\n              {'{{dataSource}}'}\n            </a>\n          </Trans>\n          : {error.message || unknownError}\n        </>\n      )\n    );\n\n    rulerRequestErrors.forEach(({ dataSource, error }) =>\n      result.push(\n        <>\n          <Trans\n            i18nKey=\"alerting.rule-list-errors.failed-to-load-rules-config\"\n            values={{ dataSource: dataSource.name }}\n          >\n            Failed to load rules config from{' '}\n            <a href={makeDataSourceLink(dataSource.uid)} className={styles.dsLink}>\n              {'{{dataSource}}'}\n            </a>\n          </Trans>\n          : {error.message || unknownError}\n        </>\n      )\n    );\n\n    return result;\n  }, [promRuleRequests, rulerRuleRequests, styles.dsLink]);\n\n  return (\n    <>\n      {!!errors.length && closed && (\n        <ErrorSummaryButton count={errors.length} onClick={() => setClosed((closed) => !closed)} />\n      )}\n      {!!errors.length && !closed && (\n        <Alert\n          data-testid=\"cloud-rulessource-errors\"\n          title={t(\n            'alerting.rule-list-errors.cloud-rulessource-errors-title-errors-loading-rules',\n            'Errors loading rules'\n          )}\n          severity=\"error\"\n          onRemove={() => setClosed(true)}\n        >\n          {expanded && errors.map((item, idx) => <div key={idx}>{item}</div>)}\n          {!expanded && (\n            <>\n              <div>{errors[0]}</div>\n              {errors.length >= 2 && (\n                <Button\n                  className={styles.moreButton}\n                  fill=\"text\"\n                  icon=\"angle-right\"\n                  size=\"sm\"\n                  onClick={() => setExpanded(true)}\n                >\n                  <Trans i18nKey=\"alerting.rule-list-errors.more-errors\" count={errors.length - 1}>\n                    {'{{count}}'} more errors\n                  </Trans>\n                </Button>\n              )}\n            </>\n          )}\n        </Alert>\n      )}\n    </>\n  );\n}\n\ninterface ErrorSummaryProps {\n  count: number;\n  onClick: () => void;\n}\n\nconst ErrorSummaryButton: FC<ErrorSummaryProps> = ({ count, onClick }) => {\n  const styles = useStyles2(getStyles);\n\n  return (\n    <div className={styles.floatRight}>\n      <Tooltip\n        content={t('alerting.error-summary-button.content-show-all-errors', 'Show all errors')}\n        placement=\"bottom\"\n      >\n        <Button fill=\"text\" variant=\"destructive\" icon=\"exclamation-triangle\" onClick={onClick}>\n          <Trans i18nKey=\"alerting.rule-list-errors.button-errors\" count={count}>\n            {'{{count}}'} errors\n          </Trans>\n        </Button>\n      </Tooltip>\n    </div>\n  );\n};\n\nconst getStyles = (theme: GrafanaTheme2) => ({\n  moreButton: css({\n    padding: 0,\n  }),\n  floatRight: css({\n    display: 'flex',\n    justifyContent: 'flex-end',\n  }),\n  dsLink: css({\n    fontWeight: theme.typography.fontWeightBold,\n    color: theme.colors.text.link,\n  }),\n});\n","import { css } from '@emotion/css';\nimport React, { useEffect, useState } from 'react';\n\nimport { GrafanaTheme2 } from '@grafana/data';\nimport { selectors } from '@grafana/e2e-selectors';\nimport { Trans, t } from '@grafana/i18n';\nimport { Badge, Icon, Spinner, Stack, Tooltip, useStyles2 } from '@grafana/ui';\nimport { CombinedRuleGroup, CombinedRuleNamespace, RulesSource } from 'app/types/unified-alerting';\n\nimport { useFolder } from '../../hooks/useFolder';\nimport { useHasRuler } from '../../hooks/useHasRuler';\nimport { useRulesAccess } from '../../utils/accessControlHooks';\nimport { GRAFANA_RULES_SOURCE_NAME, getRulesSourceName, isCloudRulesSource } from '../../utils/datasource';\nimport { makeFolderLink } from '../../utils/misc';\nimport { groups } from '../../utils/navigation';\nimport { isFederatedRuleGroup, isPluginProvidedRule, rulerRuleType } from '../../utils/rules';\nimport { CollapseToggle } from '../CollapseToggle';\nimport { RuleLocation } from '../RuleLocation';\nimport { GrafanaRuleFolderExporter } from '../export/GrafanaRuleFolderExporter';\nimport { decodeGrafanaNamespace } from '../expressions/util';\nimport { FolderActionsButton } from '../folder-actions/FolderActionsButton';\n\nimport { ActionIcon } from './ActionIcon';\nimport { RuleGroupStats } from './RuleStats';\nimport { RulesTable, useIsRulesLoading } from './RulesTable';\n\ntype ViewMode = 'grouped' | 'list';\n\ninterface Props {\n  namespace: CombinedRuleNamespace;\n  group: CombinedRuleGroup;\n  expandAll: boolean;\n  viewMode: ViewMode;\n}\n\nexport const RulesGroup = React.memo(({ group, namespace, expandAll, viewMode }: Props) => {\n  const { rulesSource } = namespace;\n  const rulesSourceName = getRulesSourceName(rulesSource);\n  const rulerRulesLoaded = useIsRulesLoading(rulesSource);\n\n  const styles = useStyles2(getStyles);\n\n  const [isExporting, setIsExporting] = useState<'folder' | undefined>(undefined);\n  const [isCollapsed, setIsCollapsed] = useState(!expandAll);\n\n  useEffect(() => {\n    setIsCollapsed(!expandAll);\n  }, [expandAll]);\n\n  const { hasRuler } = useHasRuler(namespace.rulesSource);\n\n  const rulerRule = group.rules[0]?.rulerRule;\n  const folderUID =\n    (rulerRule && rulerRuleType.grafana.rule(rulerRule) && rulerRule.grafana_alert.namespace_uid) || undefined;\n  const { folder } = useFolder(folderUID);\n\n  const { canEditRules } = useRulesAccess();\n\n  // group \"is deleting\" if rules source has ruler, but this group has no rules that are in ruler\n  const isDeleting = hasRuler && rulerRulesLoaded && !group.rules.find((rule) => !!rule.rulerRule);\n  const isFederated = isFederatedRuleGroup(group);\n\n  // check if group has provisioned items\n  const isProvisioned = group.rules.some((rule) => {\n    return rulerRuleType.grafana.rule(rule.rulerRule) && rule.rulerRule.grafana_alert.provenance;\n  });\n  const isPluginProvided = group.rules.some((rule) => isPluginProvidedRule(rule.rulerRule ?? rule.promRule));\n\n  const canEditGroup = hasRuler && !isProvisioned && !isFederated && !isPluginProvided && canEditRules(rulesSourceName);\n\n  // check what view mode we are in\n  const isListView = viewMode === 'list';\n  const isGroupView = viewMode === 'grouped';\n\n  const actionIcons: React.ReactNode[] = [];\n\n  // for grafana, link to folder views\n  if (isDeleting) {\n    actionIcons.push(\n      <Stack key=\"is-deleting\">\n        <Spinner />\n        <Trans i18nKey=\"alerting.rules-group.deleting\">Deleting</Trans>\n      </Stack>\n    );\n  } else if (rulesSource === GRAFANA_RULES_SOURCE_NAME) {\n    if (folderUID) {\n      const baseUrl = makeFolderLink(folderUID);\n      if (isGroupView) {\n        actionIcons.push(\n          <ActionIcon\n            aria-label={t('alerting.rule-group-action.details', 'rule group details')}\n            key=\"rule-group-details\"\n            icon=\"info-circle\"\n            tooltip={t('alerting.rule-group-action.details', 'rule group details')}\n            to={groups.detailsPageLink('grafana', folderUID, group.name, { includeReturnTo: true })}\n          />\n        );\n        if (folder?.canSave && canEditGroup) {\n          actionIcons.push(\n            <ActionIcon\n              aria-label={t('alerting.rule-group-action.edit', 'edit rule group')}\n              key=\"rule-group-edit\"\n              icon=\"pen\"\n              tooltip={t('alerting.rule-group-action.edit', 'edit rule group')}\n              to={groups.editPageLink('grafana', folderUID, group.name, { includeReturnTo: true })}\n            />\n          );\n        }\n      }\n      if (folder?.canSave) {\n        if (isListView) {\n          actionIcons.push(\n            <ActionIcon\n              aria-label={t('alerting.rule-group-action.go-to-folder', 'go to folder')}\n              key=\"goto\"\n              icon=\"folder-open\"\n              tooltip={t('alerting.rule-group-action.go-to-folder', 'go to folder')}\n              to={baseUrl}\n              target=\"__blank\"\n            />\n          );\n\n          if (folder?.canAdmin) {\n            actionIcons.push(\n              <ActionIcon\n                aria-label={t('alerting.rule-group-action.manage-permissions', 'manage permissions')}\n                key=\"manage-perms\"\n                icon=\"lock\"\n                tooltip={t('alerting.rule-group-action.manage-permissions', 'manage permissions')}\n                to={baseUrl + '/permissions'}\n                target=\"__blank\"\n              />\n            );\n          }\n        }\n      }\n      if (folder) {\n        if (isListView) {\n          actionIcons.push(<FolderActionsButton folderUID={folderUID} key=\"folder-bulk-actions\" />);\n        }\n      }\n    }\n  } else {\n    actionIcons.push(\n      <ActionIcon\n        aria-label={t('alerting.rule-group-action.details', 'rule group details')}\n        key=\"rule-group-details\"\n        icon=\"info-circle\"\n        tooltip={t('alerting.rule-group-action.details', 'rule group details')}\n        to={groups.detailsPageLink(rulesSource.uid, namespace.name, group.name, { includeReturnTo: true })}\n      />\n    );\n    if (canEditGroup) {\n      actionIcons.push(\n        <ActionIcon\n          aria-label={t('alerting.rule-group-action.edit', 'edit rule group')}\n          key=\"rule-group-edit\"\n          icon=\"pen\"\n          tooltip={t('alerting.rule-group-action.edit', 'edit rule group')}\n          to={groups.editPageLink(rulesSource.uid, namespace.name, group.name, { includeReturnTo: true })}\n        />\n      );\n    }\n  }\n\n  // ungrouped rules are rules that are in the \"default\" group name\n  const groupName = isListView ? (\n    <RuleLocation namespace={decodeGrafanaNamespace(namespace).name} />\n  ) : (\n    <RuleLocation namespace={decodeGrafanaNamespace(namespace).name} group={group.name} />\n  );\n\n  return (\n    <div className={styles.wrapper} data-testid=\"rule-group\">\n      <div className={styles.header} data-testid=\"rule-group-header\">\n        <CollapseToggle\n          size=\"sm\"\n          className={styles.collapseToggle}\n          isCollapsed={isCollapsed}\n          onToggle={setIsCollapsed}\n          data-testid={selectors.components.AlertRules.groupToggle}\n        />\n        <FolderIcon isCollapsed={isCollapsed} />\n        <CloudSourceLogo rulesSource={rulesSource} />\n        {\n          // eslint-disable-next-line\n          <div className={styles.groupName} onClick={() => setIsCollapsed(!isCollapsed)}>\n            {isFederated && <Badge color=\"purple\" text={t('alerting.rules-group.text-federated', 'Federated')} />}{' '}\n            {groupName}\n          </div>\n        }\n        <div className={styles.spacer} />\n        <div className={styles.headerStats}>\n          <RuleGroupStats group={group} />\n        </div>\n        {isProvisioned && (\n          <>\n            <div className={styles.actionsSeparator}>|</div>\n            <div className={styles.actionIcons}>\n              <Badge color=\"purple\" text={t('alerting.rules-group.text-provisioned', 'Provisioned')} />\n            </div>\n          </>\n        )}\n        {!!actionIcons.length && (\n          <>\n            <div className={styles.actionsSeparator}>|</div>\n            <div className={styles.actionIcons}>\n              <Stack gap={0.5}>{actionIcons}</Stack>\n            </div>\n          </>\n        )}\n      </div>\n      {!isCollapsed && (\n        <RulesTable\n          showSummaryColumn={true}\n          className={styles.rulesTable}\n          showGuidelines={true}\n          showNextEvaluationColumn={Boolean(group.interval)}\n          rules={group.rules}\n        />\n      )}\n      {folder && isExporting === 'folder' && (\n        <GrafanaRuleFolderExporter folder={folder} onClose={() => setIsExporting(undefined)} />\n      )}\n    </div>\n  );\n});\n\nRulesGroup.displayName = 'RulesGroup';\n\n// It's a simple component but we render 80 of them on the list page it needs to be fast\n// The Tooltip component is expensive to render and the rulesSource doesn't change often\n// so memoization seems to bring a lot of benefit here\nconst CloudSourceLogo = React.memo(({ rulesSource }: { rulesSource: RulesSource | string }) => {\n  const styles = useStyles2(getStyles);\n\n  if (isCloudRulesSource(rulesSource)) {\n    return (\n      <Tooltip content={rulesSource.name} placement=\"top\">\n        <img alt={rulesSource.meta.name} className={styles.dataSourceIcon} src={rulesSource.meta.info.logos.small} />\n      </Tooltip>\n    );\n  }\n\n  return null;\n});\n\nCloudSourceLogo.displayName = 'CloudSourceLogo';\n\n// We render a lot of these on the list page, and the Icon component does quite a bit of work\n// to render its contents\nconst FolderIcon = React.memo(({ isCollapsed }: { isCollapsed: boolean }) => {\n  return <Icon name={isCollapsed ? 'folder' : 'folder-open'} />;\n});\n\nFolderIcon.displayName = 'FolderIcon';\n\nexport const getStyles = (theme: GrafanaTheme2) => {\n  return {\n    wrapper: css({}),\n    header: css({\n      display: 'flex',\n      flexDirection: 'row',\n      alignItems: 'center',\n      padding: `${theme.spacing(1)} ${theme.spacing(1)} ${theme.spacing(1)} 0`,\n      flexWrap: 'nowrap',\n      borderBottom: `1px solid ${theme.colors.border.weak}`,\n\n      '&:hover': {\n        backgroundColor: theme.components.table.rowHoverBackground,\n      },\n    }),\n    headerStats: css({\n      flexShrink: 0,\n\n      span: {\n        verticalAlign: 'middle',\n      },\n\n      [theme.breakpoints.down('sm')]: {\n        order: 2,\n        width: '100%',\n        paddingLeft: theme.spacing(1),\n      },\n    }),\n    groupName: css({\n      marginLeft: theme.spacing(1),\n      marginBottom: 0,\n      cursor: 'pointer',\n\n      whiteSpace: 'nowrap',\n      overflow: 'hidden',\n      textOverflow: 'ellipsis',\n    }),\n    spacer: css({\n      flex: 1,\n    }),\n    collapseToggle: css({\n      background: 'none',\n      border: 'none',\n      marginTop: `-${theme.spacing(1)}`,\n      marginBottom: `-${theme.spacing(1)}`,\n\n      svg: {\n        marginBottom: 0,\n      },\n    }),\n    dataSourceIcon: css({\n      width: theme.spacing(2),\n      height: theme.spacing(2),\n      marginLeft: theme.spacing(2),\n    }),\n    dataSourceOrigin: css({\n      marginRight: '1em',\n      color: theme.colors.text.disabled,\n    }),\n    actionsSeparator: css({\n      margin: `0 ${theme.spacing(2)}`,\n    }),\n    actionIcons: css({\n      width: '120px',\n      alignItems: 'center',\n\n      flexShrink: 0,\n    }),\n    rulesTable: css({\n      margin: theme.spacing(2, 0),\n    }),\n    rotate90: css({\n      transform: 'rotate(90deg)',\n    }),\n  };\n};\n","import { useMemo } from 'react';\n\nimport { CombinedRuleNamespace } from '../../../../../types/unified-alerting';\n\nexport function useCombinedGroupNamespace(namespaces: CombinedRuleNamespace[]) {\n  return useMemo(\n    () =>\n      namespaces.flatMap((ns) =>\n        ns.groups.map((g) => ({\n          namespace: ns,\n          group: g,\n        }))\n      ),\n    [namespaces]\n  );\n}\n","import { css } from '@emotion/css';\nimport { useMemo } from 'react';\nimport { useLocation } from 'react-router-dom-v5-compat';\n\nimport { GrafanaTheme2, urlUtil } from '@grafana/data';\nimport { Trans, t } from '@grafana/i18n';\nimport { config } from '@grafana/runtime';\nimport { Badge, LinkButton, LoadingPlaceholder, Pagination, Spinner, Stack, Text, useStyles2 } from '@grafana/ui';\nimport { contextSrv } from 'app/core/services/context_srv';\nimport { AccessControlAction } from 'app/types/accessControl';\nimport { CombinedRuleNamespace } from 'app/types/unified-alerting';\n\nimport { DEFAULT_PER_PAGE_PAGINATION } from '../../../../../core/constants';\nimport { AlertingAction, useAlertingAbility } from '../../hooks/useAbilities';\nimport { usePagination } from '../../hooks/usePagination';\nimport { useUnifiedAlertingSelector } from '../../hooks/useUnifiedAlertingSelector';\nimport { getPaginationStyles } from '../../styles/pagination';\nimport { getRulesDataSources, getRulesSourceUid } from '../../utils/datasource';\nimport { isAsyncRequestStatePending } from '../../utils/redux';\nimport { createRelativeUrl } from '../../utils/url';\n\nimport { RulesGroup } from './RulesGroup';\nimport { useCombinedGroupNamespace } from './useCombinedGroupNamespace';\n\ninterface Props {\n  namespaces: CombinedRuleNamespace[];\n  expandAll: boolean;\n}\n\nexport const CloudRules = ({ namespaces, expandAll }: Props) => {\n  const styles = useStyles2(getStyles);\n\n  const promRules = useUnifiedAlertingSelector((state) => state.promRules);\n  const rulesDataSources = useMemo(getRulesDataSources, []);\n  const groupsWithNamespaces = useCombinedGroupNamespace(namespaces);\n\n  const dataSourcesLoading = useMemo(\n    () => rulesDataSources.filter((ds) => isAsyncRequestStatePending(promRules[ds.name])),\n    [promRules, rulesDataSources]\n  );\n\n  const hasSomeResults = rulesDataSources.some((ds) => Boolean(promRules[ds.name]?.result?.length));\n  const hasDataSourcesConfigured = rulesDataSources.length > 0;\n  const hasDataSourcesLoading = dataSourcesLoading.length > 0;\n  const hasNamespaces = namespaces.length > 0;\n\n  const { numberOfPages, onPageChange, page, pageItems } = usePagination(\n    groupsWithNamespaces,\n    1,\n    DEFAULT_PER_PAGE_PAGINATION\n  );\n\n  const canMigrateToGMA =\n    hasDataSourcesConfigured &&\n    config.featureToggles.alertingMigrationUI &&\n    contextSrv.hasPermission(AccessControlAction.AlertingRuleCreate) &&\n    contextSrv.hasPermission(AccessControlAction.AlertingProvisioningSetStatus);\n\n  return (\n    <section className={styles.wrapper}>\n      <Stack gap={2} direction=\"column\">\n        <div className={styles.sectionHeader}>\n          <div className={styles.headerRow}>\n            <Text element=\"h2\" variant=\"h5\">\n              <Trans i18nKey=\"alerting.list-view.section.dataSourceManaged.title\">Data source-managed</Trans>\n            </Text>\n            {dataSourcesLoading.length ? (\n              <LoadingPlaceholder\n                className={styles.loader}\n                text={t('alerting.list-view.section.loading-rules', 'Loading rules from {{count}} sources', {\n                  count: dataSourcesLoading.length,\n                })}\n              />\n            ) : (\n              <div />\n            )}\n            <Stack gap={1}>\n              {canMigrateToGMA && hasSomeResults && <MigrateToGMAButton />}\n              <CreateRecordingRuleButton />\n            </Stack>\n          </div>\n        </div>\n      </Stack>\n\n      {pageItems.map(({ group, namespace }) => (\n        <RulesGroup\n          group={group}\n          key={`${getRulesSourceUid(namespace.rulesSource)}-${namespace.name}-${group.name}`}\n          namespace={namespace}\n          expandAll={expandAll}\n          viewMode={'grouped'}\n        />\n      ))}\n\n      {!hasDataSourcesConfigured && (\n        <p>\n          <Trans i18nKey=\"alerting.list-view.no-prom-or-loki-rules\">\n            There are no Prometheus or Loki data sources configured\n          </Trans>\n        </p>\n      )}\n      {hasDataSourcesConfigured && !hasDataSourcesLoading && !hasNamespaces && (\n        <p>\n          <Trans i18nKey=\"alerting.list-view.no-rules\">No rules found.</Trans>\n        </p>\n      )}\n      {!hasSomeResults && hasDataSourcesLoading && <Spinner size=\"xl\" className={styles.spinner} />}\n\n      <Pagination\n        className={styles.pagination}\n        currentPage={page}\n        numberOfPages={numberOfPages}\n        onNavigate={onPageChange}\n        hideWhenSinglePage\n      />\n    </section>\n  );\n};\n\nconst getStyles = (theme: GrafanaTheme2) => ({\n  loader: css({\n    marginBottom: 0,\n  }),\n  sectionHeader: css({\n    display: 'flex',\n    justifyContent: 'space-between',\n  }),\n  wrapper: css({\n    marginBottom: theme.spacing(4),\n  }),\n  spinner: css({\n    textAlign: 'center',\n    padding: theme.spacing(2),\n  }),\n  pagination: getPaginationStyles(theme),\n  headerRow: css({\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'space-between',\n    width: '100%',\n    marginBottom: theme.spacing(1),\n  }),\n});\n\nexport function CreateRecordingRuleButton() {\n  const [createCloudRuleSupported, createCloudRuleAllowed] = useAlertingAbility(AlertingAction.CreateExternalAlertRule);\n  const location = useLocation();\n\n  const canCreateCloudRules = createCloudRuleSupported && createCloudRuleAllowed;\n\n  if (canCreateCloudRules) {\n    return (\n      <LinkButton\n        key=\"new-recording-rule\"\n        href={urlUtil.renderUrl(`alerting/new/recording`, {\n          returnTo: location.pathname + location.search,\n        })}\n        icon=\"plus\"\n        variant=\"secondary\"\n      >\n        <Trans i18nKey=\"alerting.list-view.empty.new-ds-managed-recording-rule\">\n          New data source-managed recording rule\n        </Trans>\n      </LinkButton>\n    );\n  }\n  return null;\n}\n\nfunction MigrateToGMAButton() {\n  const importUrl = createRelativeUrl('/alerting/import-datasource-managed-rules');\n\n  return (\n    <LinkButton variant=\"secondary\" href={importUrl} icon=\"arrow-up\">\n      <Stack direction=\"row\" gap={1} alignItems=\"center\">\n        <Trans i18nKey=\"alerting.rule-list.import-to-gma.text\">Import to Grafana-managed rules</Trans>\n        <Badge\n          text={t('alerting.rule-list.import-to-gma.new-badge', 'New!')}\n          aria-label={t('alerting.migrate-to-gmabutton.aria-label-new', 'new')}\n          color=\"blue\"\n          icon=\"rocket\"\n        />\n      </Stack>\n    </LinkButton>\n  );\n}\n","import { css } from '@emotion/css';\nimport { useToggle } from 'react-use';\n\nimport { GrafanaTheme2 } from '@grafana/data';\nimport { Trans, t } from '@grafana/i18n';\nimport { config } from '@grafana/runtime';\nimport { Button, LinkButton, LoadingPlaceholder, Pagination, Spinner, Stack, Text, useStyles2 } from '@grafana/ui';\nimport { useQueryParams } from 'app/core/hooks/useQueryParams';\nimport { CombinedRuleNamespace } from 'app/types/unified-alerting';\n\nimport { DEFAULT_PER_PAGE_PAGINATION } from '../../../../../core/constants';\nimport { LogMessages, logInfo } from '../../Analytics';\nimport { AlertingAction, useAlertingAbility } from '../../hooks/useAbilities';\nimport { flattenGrafanaManagedRules } from '../../hooks/useCombinedRuleNamespaces';\nimport { usePagination } from '../../hooks/usePagination';\nimport { useUnifiedAlertingSelector } from '../../hooks/useUnifiedAlertingSelector';\nimport { getPaginationStyles } from '../../styles/pagination';\nimport { useRulesAccess } from '../../utils/accessControlHooks';\nimport { GRAFANA_RULES_SOURCE_NAME } from '../../utils/datasource';\nimport { initialAsyncRequestState } from '../../utils/redux';\nimport { createRelativeUrl } from '../../utils/url';\nimport { GrafanaRulesExporter } from '../export/GrafanaRulesExporter';\n\nimport { RulesGroup } from './RulesGroup';\nimport { useCombinedGroupNamespace } from './useCombinedGroupNamespace';\n\ninterface Props {\n  namespaces: CombinedRuleNamespace[];\n  expandAll: boolean;\n}\n\nexport const GrafanaRules = ({ namespaces, expandAll }: Props) => {\n  const styles = useStyles2(getStyles);\n  const [queryParams] = useQueryParams();\n\n  const { prom, ruler } = useUnifiedAlertingSelector((state) => ({\n    prom: state.promRules[GRAFANA_RULES_SOURCE_NAME] || initialAsyncRequestState,\n    ruler: state.rulerRules[GRAFANA_RULES_SOURCE_NAME] || initialAsyncRequestState,\n  }));\n\n  const loading = prom.loading || ruler.loading;\n  const hasResult = !!prom.result || !!ruler.result;\n\n  const wantsListView = queryParams.view === 'list';\n  const namespacesFormat = wantsListView ? flattenGrafanaManagedRules(namespaces) : namespaces;\n\n  const groupsWithNamespaces = useCombinedGroupNamespace(namespacesFormat);\n\n  const { numberOfPages, onPageChange, page, pageItems } = usePagination(\n    groupsWithNamespaces,\n    1,\n    DEFAULT_PER_PAGE_PAGINATION\n  );\n\n  const [exportRulesSupported, exportRulesAllowed] = useAlertingAbility(AlertingAction.ExportGrafanaManagedRules);\n  const canExportRules = exportRulesSupported && exportRulesAllowed;\n\n  const [showExportDrawer, toggleShowExportDrawer] = useToggle(false);\n  const hasGrafanaAlerts = namespaces.length > 0;\n  const { canCreateGrafanaRules } = useRulesAccess();\n  const grafanaRecordingRulesEnabled = config.unifiedAlerting.recordingRulesEnabled && canCreateGrafanaRules;\n\n  return (\n    <section className={styles.wrapper}>\n      <div className={styles.sectionHeader}>\n        <div className={styles.headerRow}>\n          <Text element=\"h2\" variant=\"h5\">\n            <Trans i18nKey=\"alerting.list-view.section.grafanaManaged.title\">Grafana-managed</Trans>\n          </Text>\n          {loading ? (\n            <LoadingPlaceholder\n              className={styles.loader}\n              text={t('alerting.list-view.section.grafanaManaged.loading', 'Loading...')}\n            />\n          ) : (\n            <div />\n          )}\n          <Stack direction=\"row\" alignItems=\"center\" justifyContent=\"flex-end\">\n            {hasGrafanaAlerts && canExportRules && (\n              <Button\n                aria-label={t(\n                  'alerting.grafana-rules.export-all-grafana-rules-aria-label-export-all-grafana-rules',\n                  'export all grafana rules'\n                )}\n                data-testid=\"export-all-grafana-rules\"\n                icon=\"download-alt\"\n                tooltip={t(\n                  'alerting.grafana-rules.export-all-grafana-rules-tooltip-export-all-grafanamanaged-rules',\n                  'Export all Grafana-managed rules'\n                )}\n                onClick={toggleShowExportDrawer}\n                variant=\"secondary\"\n              >\n                <Trans i18nKey=\"alerting.list-view.section.grafanaManaged.export-rules\">Export rules</Trans>\n              </Button>\n            )}\n            {grafanaRecordingRulesEnabled && (\n              <LinkButton\n                href={createRelativeUrl('/alerting/new/grafana-recording', {\n                  returnTo: '/alerting/list' + window.location.search,\n                })}\n                icon=\"plus\"\n                variant=\"secondary\"\n                tooltip={t(\n                  'alerting.grafana-rules.tooltip-create-new-grafanamanaged-recording-rule',\n                  'Create new Grafana-managed recording rule'\n                )}\n                onClick={() => logInfo(LogMessages.grafanaRecording)}\n              >\n                <Trans i18nKey=\"alerting.list-view.section.grafanaManaged.new-recording-rule\">New recording rule</Trans>\n              </LinkButton>\n            )}\n          </Stack>\n        </div>\n      </div>\n\n      {pageItems.map(({ group, namespace }) => (\n        <RulesGroup\n          group={group}\n          key={`${namespace.name}-${group.name}`}\n          namespace={namespace}\n          expandAll={expandAll}\n          viewMode={wantsListView ? 'list' : 'grouped'}\n        />\n      ))}\n      {hasResult && namespacesFormat?.length === 0 && (\n        <p>\n          <Trans i18nKey=\"alerting.grafana-rules.no-rules-found\">No rules found.</Trans>\n        </p>\n      )}\n      {!hasResult && loading && <Spinner size=\"xl\" className={styles.spinner} />}\n      <Pagination\n        className={styles.pagination}\n        currentPage={page}\n        numberOfPages={numberOfPages}\n        onNavigate={onPageChange}\n        hideWhenSinglePage\n      />\n      {canExportRules && showExportDrawer && <GrafanaRulesExporter onClose={toggleShowExportDrawer} />}\n    </section>\n  );\n};\n\nconst getStyles = (theme: GrafanaTheme2) => ({\n  loader: css({\n    marginBottom: 0,\n  }),\n  sectionHeader: css({\n    display: 'flex',\n    justifyContent: 'space-between',\n    marginBottom: theme.spacing(1),\n  }),\n  wrapper: css({\n    marginBottom: theme.spacing(4),\n  }),\n  spinner: css({\n    textAlign: 'center',\n    padding: theme.spacing(2),\n  }),\n  pagination: getPaginationStyles(theme),\n  headerRow: css({\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'space-between',\n    width: '100%',\n    flexDirection: 'row',\n  }),\n});\n","import { useEffect, useMemo } from 'react';\n\nimport { CombinedRuleNamespace } from 'app/types/unified-alerting';\n\nimport { LogMessages, logInfo } from '../../Analytics';\nimport { AlertingAction } from '../../hooks/useAbilities';\nimport { isCloudRulesSource, isGrafanaRulesSource } from '../../utils/datasource';\nimport { Authorize } from '../Authorize';\n\nimport { CloudRules } from './CloudRules';\nimport { GrafanaRules } from './GrafanaRules';\n\ninterface Props {\n  namespaces: CombinedRuleNamespace[];\n  expandAll: boolean;\n}\n\nexport const RuleListGroupView = ({ namespaces, expandAll }: Props) => {\n  const [grafanaNamespaces, cloudNamespaces] = useMemo(() => {\n    const sorted = namespaces\n      .map((namespace) => ({\n        ...namespace,\n        groups: namespace.groups.sort((a, b) => a.name.localeCompare(b.name)),\n      }))\n      .sort((a, b) => a.name.localeCompare(b.name));\n    return [\n      sorted.filter((ns) => isGrafanaRulesSource(ns.rulesSource)),\n      sorted.filter((ns) => isCloudRulesSource(ns.rulesSource)),\n    ];\n  }, [namespaces]);\n\n  useEffect(() => {\n    logInfo(LogMessages.loadedList);\n  }, []);\n\n  return (\n    <>\n      <Authorize actions={[AlertingAction.ViewAlertRule]}>\n        <GrafanaRules namespaces={grafanaNamespaces} expandAll={expandAll} />\n      </Authorize>\n      <Authorize actions={[AlertingAction.ViewExternalAlertRule]}>\n        <CloudRules namespaces={cloudNamespaces} expandAll={expandAll} />\n      </Authorize>\n    </>\n  );\n};\n","import { useMemo } from 'react';\nimport { useMeasure } from 'react-use';\n\nimport { Counter, LoadingBar, Pagination, Stack } from '@grafana/ui';\nimport { DEFAULT_PER_PAGE_PAGINATION } from 'app/core/constants';\nimport { CombinedRule, CombinedRuleNamespace } from 'app/types/unified-alerting';\nimport { PromAlertingRuleState } from 'app/types/unified-alerting-dto';\n\nimport { usePagination } from '../../hooks/usePagination';\nimport { useUnifiedAlertingSelector } from '../../hooks/useUnifiedAlertingSelector';\nimport { AlertRuleListItem } from '../../rule-list/components/AlertRuleListItem';\nimport { ListSection } from '../../rule-list/components/ListSection';\nimport { GRAFANA_RULES_SOURCE_NAME, getRulesDataSources } from '../../utils/datasource';\nimport { createViewLink } from '../../utils/misc';\nimport { isAsyncRequestStatePending } from '../../utils/redux';\nimport { hashRule } from '../../utils/rule-id';\nimport { getRulePluginOrigin, isProvisionedRule, prometheusRuleType } from '../../utils/rules';\nimport { calculateTotalInstances } from '../rule-viewer/RuleViewer';\n\nimport { RuleActionsButtons } from './RuleActionsButtons';\n\ninterface Props {\n  namespaces: CombinedRuleNamespace[];\n}\n\ntype GroupedRules = Map<PromAlertingRuleState, CombinedRule[]>;\n\nexport const RuleListStateView = ({ namespaces }: Props) => {\n  const [ref, { width }] = useMeasure<HTMLUListElement>();\n\n  const isLoading = useDataSourcesLoadingState();\n\n  const groupedRules = useMemo(() => {\n    const result: GroupedRules = new Map([\n      [PromAlertingRuleState.Firing, []],\n      [PromAlertingRuleState.Pending, []],\n      [PromAlertingRuleState.Recovering, []],\n      [PromAlertingRuleState.Inactive, []],\n      [PromAlertingRuleState.Unknown, []],\n    ]);\n\n    namespaces.forEach((namespace) =>\n      namespace.groups.forEach((group) =>\n        group.rules.forEach((rule) => {\n          // We might hit edge cases where there type = alerting, but there is no state.\n          // In this case, we shouldn't try to group these alerts in the state view\n          // Even though we handle this at the API layer, this is a last catch point for any edge cases\n          if (prometheusRuleType.alertingRule(rule.promRule) && rule.promRule.state) {\n            result.get(rule.promRule.state)?.push(rule);\n          }\n        })\n      )\n    );\n\n    result.forEach((rules) => rules.sort((a, b) => a.name.localeCompare(b.name)));\n\n    return result;\n  }, [namespaces]);\n\n  const entries = groupedRules.entries();\n\n  return (\n    <ul role=\"tree\" ref={ref}>\n      {isLoading && <LoadingBar width={width} />}\n      <Stack direction=\"column\">\n        {Array.from(entries).map(([state, rules]) => (\n          <RulesByState key={state} state={state} rules={rules} />\n        ))}\n      </Stack>\n    </ul>\n  );\n};\n\nconst STATE_TITLES: Record<PromAlertingRuleState, string> = {\n  [PromAlertingRuleState.Firing]: 'Firing',\n  [PromAlertingRuleState.Pending]: 'Pending',\n  [PromAlertingRuleState.Inactive]: 'Normal',\n  [PromAlertingRuleState.Recovering]: 'Recovering',\n  [PromAlertingRuleState.Unknown]: 'Unknown',\n};\n\nconst RulesByState = ({ state, rules }: { state: PromAlertingRuleState; rules: CombinedRule[] }) => {\n  const { page, pageItems, numberOfPages, onPageChange } = usePagination(rules, 1, DEFAULT_PER_PAGE_PAGINATION);\n\n  const isFiringState = state !== PromAlertingRuleState.Firing;\n  const hasRulesMatchingState = rules.length > 0;\n\n  return (\n    <ListSection\n      title={\n        <Stack alignItems=\"center\" gap={0}>\n          {STATE_TITLES[state] ?? 'Unknown'}\n          <Counter value={rules.length} />\n        </Stack>\n      }\n      collapsed={isFiringState || hasRulesMatchingState}\n      pagination={\n        <Pagination\n          currentPage={page}\n          numberOfPages={numberOfPages}\n          onNavigate={onPageChange}\n          hideWhenSinglePage={true}\n        />\n      }\n    >\n      {pageItems.map((rule) => {\n        const { rulerRule, promRule } = rule;\n\n        const isProvisioned = rulerRule ? isProvisionedRule(rulerRule) : false;\n        const instancesCount = prometheusRuleType.alertingRule(rule.promRule)\n          ? calculateTotalInstances(rule.instanceTotals)\n          : undefined;\n\n        if (!promRule) {\n          return null;\n        }\n\n        const originMeta = getRulePluginOrigin(rule.promRule);\n\n        return (\n          <AlertRuleListItem\n            key={hashRule(promRule)}\n            name={rule.name}\n            href={createViewLink(rule.namespace.rulesSource, rule)}\n            summary={rule.annotations.summary}\n            state={state}\n            health={rule.promRule?.health}\n            error={rule.promRule?.lastError}\n            labels={rule.promRule?.labels}\n            isProvisioned={isProvisioned}\n            instancesCount={instancesCount}\n            namespace={rule.namespace.name}\n            group={rule.group.name}\n            actions={<RuleActionsButtons compact rule={rule} rulesSource={rule.namespace.rulesSource} />}\n            origin={originMeta}\n          />\n        );\n      })}\n    </ListSection>\n  );\n};\n\nfunction useDataSourcesLoadingState() {\n  const promRules = useUnifiedAlertingSelector((state) => state.promRules);\n  const rulesDataSources = useMemo(getRulesDataSources, []);\n\n  const grafanaLoading = useUnifiedAlertingSelector((state) => {\n    const promLoading = isAsyncRequestStatePending(state.promRules[GRAFANA_RULES_SOURCE_NAME]);\n    const rulerLoading = isAsyncRequestStatePending(state.rulerRules[GRAFANA_RULES_SOURCE_NAME]);\n\n    return promLoading || rulerLoading;\n  });\n\n  const externalDataSourcesLoading = rulesDataSources.some((ds) => isAsyncRequestStatePending(promRules[ds.name]));\n\n  const loading = grafanaLoading || externalDataSourcesLoading;\n\n  return loading;\n}\n","import { memo } from 'react';\n\nimport { Trans, t } from '@grafana/i18n';\nimport { logInfo } from '@grafana/runtime';\nimport { LinkButton, Stack } from '@grafana/ui';\n\nimport { LogMessages } from '../../Analytics';\nimport { AIAlertRuleButtonComponent } from '../../enterprise-components/AI/AIGenAlertRuleButton/addAIAlertRuleButton';\nimport { AlertingAction, useAlertingAbility } from '../../hooks/useAbilities';\nimport { createReturnTo } from '../../hooks/useReturnTo';\nimport { createRelativeUrl } from '../../utils/url';\n\ninterface RuleListActionButtonsProps {\n  hasAlertRulesCreated: boolean;\n}\n\nexport const RuleListActionButtons = memo<RuleListActionButtonsProps>(({ hasAlertRulesCreated }) => {\n  if (!hasAlertRulesCreated) {\n    return null;\n  }\n\n  return (\n    <Stack gap={1}>\n      <CreateAlertButtons />\n      <ExportNewRuleButton />\n    </Stack>\n  );\n});\n\nRuleListActionButtons.displayName = 'RuleListActionButtons';\n\nfunction CreateAlertButtons() {\n  const [createRuleSupported, createRuleAllowed] = useAlertingAbility(AlertingAction.CreateAlertRule);\n  const [createCloudRuleSupported, createCloudRuleAllowed] = useAlertingAbility(AlertingAction.CreateExternalAlertRule);\n\n  const returnTo = createReturnTo();\n\n  const canCreateCloudRules = createCloudRuleSupported && createCloudRuleAllowed;\n  const canCreateGrafanaRules = createRuleSupported && createRuleAllowed;\n\n  if (canCreateGrafanaRules || canCreateCloudRules) {\n    return (\n      <Stack direction=\"row\" gap={1}>\n        {canCreateGrafanaRules && <AIAlertRuleButtonComponent />}\n        <LinkButton\n          href={createRelativeUrl('/alerting/new/alerting', { returnTo })}\n          icon=\"plus\"\n          onClick={() => logInfo(LogMessages.alertRuleFromScratch)}\n        >\n          <Trans i18nKey=\"alerting.rule-list.new-alert-rule\">New alert rule</Trans>\n        </LinkButton>\n      </Stack>\n    );\n  }\n  return null;\n}\n\nfunction ExportNewRuleButton() {\n  const returnTo = createReturnTo();\n  const url = createRelativeUrl(`/alerting/export-new-rule`, {\n    returnTo,\n  });\n  return (\n    <LinkButton\n      href={url}\n      icon=\"download-alt\"\n      variant=\"secondary\"\n      tooltip={t('alerting.export-new-rule-button.tooltip-export-new-grafana-rule', 'Export new grafana rule')}\n      onClick={() => logInfo(LogMessages.exportNewGrafanaRule)}\n    >\n      <Trans i18nKey=\"alerting.list-view.section.grafanaManaged.export-new-rule\">Export rule definition</Trans>\n    </LinkButton>\n  );\n}\n","import { useCallback, useEffect, useMemo, useState } from 'react';\nimport { useAsyncFn, useInterval } from 'react-use';\n\nimport { t } from '@grafana/i18n';\nimport { Button, Stack } from '@grafana/ui';\nimport { useQueryParams } from 'app/core/hooks/useQueryParams';\nimport { useDispatch } from 'app/types/store';\nimport { CombinedRuleNamespace } from 'app/types/unified-alerting';\n\nimport { trackRuleListNavigation } from '../Analytics';\nimport { AlertingPageWrapper } from '../components/AlertingPageWrapper';\nimport RulesFilter from '../components/rules/Filter/RulesFilter.v1';\nimport { NoRulesSplash } from '../components/rules/NoRulesCTA';\nimport { INSTANCES_DISPLAY_LIMIT } from '../components/rules/RuleDetails';\nimport { RuleListErrors } from '../components/rules/RuleListErrors';\nimport { RuleListGroupView } from '../components/rules/RuleListGroupView';\nimport { RuleListStateView } from '../components/rules/RuleListStateView';\nimport { RuleStats } from '../components/rules/RuleStats';\nimport { shouldUsePrometheusRulesPrimary } from '../featureToggles';\nimport { useCombinedRuleNamespaces } from '../hooks/useCombinedRuleNamespaces';\nimport { useFilteredRules, useRulesFilter } from '../hooks/useFilteredRules';\nimport { useUnifiedAlertingSelector } from '../hooks/useUnifiedAlertingSelector';\nimport { fetchAllPromAndRulerRulesAction, fetchAllPromRulesAction, fetchRulerRulesAction } from '../state/actions';\nimport { RULE_LIST_POLL_INTERVAL_MS } from '../utils/constants';\nimport { GRAFANA_RULES_SOURCE_NAME, getAllRulesSourceNames } from '../utils/datasource';\n\nimport { RuleListPageTitle } from './RuleListPageTitle';\nimport { RuleListActionButtons } from './components/RuleListActionButtons';\n\nconst VIEWS = {\n  groups: RuleListGroupView,\n  state: RuleListStateView,\n};\n\n// make sure we ask for 1 more so we show the \"show x more\" button\nconst LIMIT_ALERTS = INSTANCES_DISPLAY_LIMIT + 1;\n\nconst prometheusRulesPrimary = shouldUsePrometheusRulesPrimary();\n\nconst RuleListV1 = () => {\n  const dispatch = useDispatch();\n  const rulesDataSourceNames = useMemo(getAllRulesSourceNames, []);\n  const [expandAll, setExpandAll] = useState(false);\n\n  const onFilterCleared = useCallback(() => setExpandAll(false), []);\n\n  const [queryParams] = useQueryParams();\n  const { filterState, hasActiveFilters } = useRulesFilter();\n\n  const hasActiveLabelsFilter = filterState.labels.length > 0;\n\n  const queryParamView = queryParams.view;\n  const viewType = queryParamView === 'state' || queryParamView === 'groups' ? queryParamView : 'groups';\n  const view = VIEWS[viewType] ? viewType : 'groups';\n\n  const ViewComponent = VIEWS[view];\n\n  const promRuleRequests = useUnifiedAlertingSelector((state) => state.promRules);\n  const rulerRuleRequests = useUnifiedAlertingSelector((state) => state.rulerRules);\n\n  const loading = rulesDataSourceNames.some(\n    (name) => promRuleRequests[name]?.loading || rulerRuleRequests[name]?.loading\n  );\n\n  const promRequests = Object.entries(promRuleRequests);\n  const rulerRequests = Object.entries(rulerRuleRequests);\n\n  const allPromLoaded = promRequests.every(\n    ([_, state]) => state.dispatched && (state?.result !== undefined || state?.error !== undefined)\n  );\n  const allRulerLoaded = rulerRequests.every(\n    ([_, state]) => state.dispatched && (state?.result !== undefined || state?.error !== undefined)\n  );\n\n  const allPromEmpty = promRequests.every(([_, state]) => state.dispatched && state?.result?.length === 0);\n\n  const allRulerEmpty = rulerRequests.every(([_, state]) => {\n    const rulerRules = Object.entries(state?.result ?? {});\n    const noRules = rulerRules.every(([_, result]) => result?.length === 0);\n    return noRules && state.dispatched;\n  });\n\n  const limitAlerts = hasActiveLabelsFilter ? undefined : LIMIT_ALERTS;\n  // Trigger data refresh only when the RULE_LIST_POLL_INTERVAL_MS elapsed since the previous load FINISHED\n  const [_, fetchRules] = useAsyncFn(async () => {\n    if (!loading) {\n      if (prometheusRulesPrimary) {\n        await dispatch(fetchRulerRulesAction({ rulesSourceName: GRAFANA_RULES_SOURCE_NAME }));\n        await dispatch(fetchAllPromRulesAction(false, { limitAlerts }));\n      } else {\n        await dispatch(fetchAllPromAndRulerRulesAction(false, { limitAlerts }));\n      }\n    }\n  }, [loading, limitAlerts, dispatch]);\n\n  useEffect(() => {\n    trackRuleListNavigation().catch(() => {});\n  }, []);\n\n  // fetch rules, then poll every RULE_LIST_POLL_INTERVAL_MS\n  useEffect(() => {\n    if (prometheusRulesPrimary) {\n      dispatch(fetchRulerRulesAction({ rulesSourceName: GRAFANA_RULES_SOURCE_NAME }));\n      dispatch(fetchAllPromRulesAction(false, { limitAlerts }));\n    } else {\n      dispatch(fetchAllPromAndRulerRulesAction(false, { limitAlerts }));\n    }\n  }, [dispatch, limitAlerts]);\n  useInterval(fetchRules, RULE_LIST_POLL_INTERVAL_MS);\n\n  // Show splash only when we loaded all of the data sources and none of them has alerts\n  const hasNoAlertRulesCreatedYet =\n    allPromLoaded && allPromEmpty && promRequests.length > 0 && allRulerEmpty && allRulerLoaded;\n  const hasAlertRulesCreated = !hasNoAlertRulesCreatedYet;\n\n  const combinedNamespaces: CombinedRuleNamespace[] = useCombinedRuleNamespaces();\n  const filteredNamespaces = useFilteredRules(combinedNamespaces, filterState);\n  return (\n    // We don't want to show the Loading... indicator for the whole page.\n    // We show separate indicators for Grafana-managed and Cloud rules\n    <AlertingPageWrapper\n      navId=\"alert-list\"\n      isLoading={false}\n      renderTitle={(title) => <RuleListPageTitle title={title} />}\n      actions={<RuleListActionButtons hasAlertRulesCreated={hasAlertRulesCreated} />}\n    >\n      <Stack direction=\"column\">\n        <RuleListErrors />\n        <RulesFilter onClear={onFilterCleared} />\n        {hasAlertRulesCreated && (\n          <Stack direction=\"row\" alignItems=\"center\">\n            {view === 'groups' && hasActiveFilters && (\n              <Button\n                icon={expandAll ? 'angle-double-up' : 'angle-double-down'}\n                variant=\"secondary\"\n                onClick={() => setExpandAll(!expandAll)}\n              >\n                {expandAll\n                  ? t('alerting.rule-list-v1.collapse-all', 'Collapse all')\n                  : t('alerting.rule-list-v1.expand-all', 'Expand all')}\n              </Button>\n            )}\n          </Stack>\n        )}\n        <RuleStats namespaces={filteredNamespaces} />\n        {hasNoAlertRulesCreatedYet && <NoRulesSplash />}\n        {hasAlertRulesCreated && <ViewComponent expandAll={expandAll} namespaces={filteredNamespaces} />}\n      </Stack>\n    </AlertingPageWrapper>\n  );\n};\n\nexport default RuleListV1;\n","import { Suspense, lazy } from 'react';\n\nimport { shouldUseAlertingListViewV2 } from './featureToggles';\nimport RuleListV1 from './rule-list/RuleList.v1';\nimport { withPageErrorBoundary } from './withPageErrorBoundary';\n\nconst RuleListV2 = lazy(() => import('./rule-list/RuleList.v2'));\n\nconst RuleList = () => {\n  const newView = shouldUseAlertingListViewV2();\n\n  return <Suspense>{newView ? <RuleListV2 /> : <RuleListV1 />}</Suspense>;\n};\n\nexport default withPageErrorBoundary(RuleList);\n","import { t } from '@grafana/i18n';\nimport { config, reportInteraction } from '@grafana/runtime';\nimport { Button, ButtonProps, Stack } from '@grafana/ui';\n\nimport { shouldUseAlertingListViewV2 } from '../featureToggles';\nimport { setPreviewToggle } from '../previewToggles';\n\nexport function RuleListPageTitle({ title }: { title: string }) {\n  const shouldShowV2Toggle = config.featureToggles.alertingListViewV2PreviewToggle ?? false;\n\n  const listViewV2Enabled = shouldUseAlertingListViewV2();\n\n  const toggleListView = () => {\n    if (listViewV2Enabled) {\n      setPreviewToggle('alertingListViewV2', false);\n      reportInteraction('alerting.list_view.v2.disabled');\n    } else {\n      setPreviewToggle('alertingListViewV2', true);\n      reportInteraction('alerting.list_view.v2.enabled');\n    }\n    window.location.reload();\n  };\n\n  const configToUse: ButtonProps & { 'data-testid': string } = listViewV2Enabled\n    ? {\n        variant: 'secondary',\n        icon: undefined,\n        children: t('alerting.rule-list.toggle.go-back-to-old-look', 'Go back to the old look'),\n        'data-testid': 'alerting-list-view-toggle-v1',\n      }\n    : {\n        variant: 'primary',\n        icon: 'rocket',\n        children: t('alerting.rule-list.toggle.try-out-the-new-look', 'Try out the new look!'),\n        'data-testid': 'alerting-list-view-toggle-v2',\n      };\n\n  return (\n    <Stack direction=\"row\" alignItems=\"center\" justifyContent=\"space-between\" gap={2}>\n      <h1>{title}</h1>\n      {shouldShowV2Toggle && (\n        <div>\n          <Button size=\"sm\" fill=\"outline\" {...configToUse} onClick={toggleListView} className=\"fs-unmask\" />\n        </div>\n      )}\n    </Stack>\n  );\n}\n","import { t } from '@grafana/i18n';\n\nimport { WithNotificationOptions, alertingApi } from './alertingApi';\nimport { GRAFANA_RULER_CONFIG } from './featureDiscoveryApi';\nimport { rulerUrlBuilder } from './ruler';\n\nexport const alertingFolderActionsApi = alertingApi.injectEndpoints({\n  endpoints: (build) => ({\n    pauseFolder: build.mutation<void, WithNotificationOptions<{ namespace: string }>>({\n      query: ({ namespace, notificationOptions }) => {\n        const successMessage = t(\n          'alerting.bulk-actions.pause.success',\n          'Rules evaluation successfully paused for folder'\n        );\n        const { path, params } = rulerUrlBuilder(GRAFANA_RULER_CONFIG).namespace(namespace);\n\n        return {\n          url: path,\n          params,\n          body: {\n            is_paused: true,\n          },\n          method: 'PATCH',\n          notificationOptions: {\n            successMessage,\n            ...notificationOptions,\n          },\n        };\n      },\n    }),\n    unpauseFolder: build.mutation<void, WithNotificationOptions<{ namespace: string }>>({\n      query: ({ namespace, notificationOptions }) => {\n        const successMessage = t(\n          'alerting.bulk-actions.unpause.success',\n          'Rules successfully unpaused for this folder'\n        );\n        const { path, params } = rulerUrlBuilder(GRAFANA_RULER_CONFIG).namespace(namespace);\n\n        return {\n          url: path,\n          params,\n          body: {\n            is_paused: false,\n          },\n          method: 'PATCH',\n          notificationOptions: {\n            successMessage,\n            ...notificationOptions,\n          },\n        };\n      },\n    }),\n    deleteGrafanaRulesFromFolder: build.mutation<void, WithNotificationOptions<{ namespace: string }>>({\n      query: ({ namespace, notificationOptions }) => {\n        const successMessage = t('alerting.bulk-actions.delete.success', 'Rules successfully deleted from folder');\n        const { path, params } = rulerUrlBuilder(GRAFANA_RULER_CONFIG).namespace(namespace);\n\n        return {\n          url: path,\n          params,\n          method: 'DELETE',\n          notificationOptions: {\n            successMessage,\n            ...notificationOptions,\n          },\n        };\n      },\n    }),\n  }),\n});\n","import React, { useState } from 'react';\n\nimport { Trans, t } from '@grafana/i18n';\nimport { ConfirmModal, Space, Text } from '@grafana/ui';\n\nimport { trackFolderBulkActionsDeleteFail, trackFolderBulkActionsDeleteSuccess } from '../../Analytics';\n\nexport interface Props {\n  isOpen: boolean;\n  onConfirm: () => Promise<void>;\n  onDismiss: () => void;\n  folderName: string;\n}\n\nexport const DeleteModal = React.memo(({ onConfirm, onDismiss, isOpen, folderName }: Props) => {\n  const [isDeleting, setIsDeleting] = useState(false);\n\n  const onDeleteConfirm = async () => {\n    setIsDeleting(true);\n    try {\n      await onConfirm();\n      trackFolderBulkActionsDeleteSuccess();\n      onDismiss();\n    } catch {\n      trackFolderBulkActionsDeleteFail();\n    } finally {\n      setIsDeleting(false);\n    }\n  };\n\n  return (\n    <ConfirmModal\n      body={\n        <>\n          <Text element=\"p\">\n            <Trans i18nKey=\"alerting.folder-bulk-actions.delete-modal-text\" values={{ folderName: folderName }}>\n              This action will delete all alert rules in the <code>{'{{folderName}}'}</code> folder. Nested folders will\n              not be affected.\n            </Trans>\n          </Text>\n          <Space v={2} />\n        </>\n      }\n      confirmationText={t('alerting.folder-bulk-actions.delete-modal-confirmation-text', 'Delete')}\n      confirmText={\n        isDeleting\n          ? t('alerting.folder-bulk-actions.delete-modal-deleting', 'Deleting...')\n          : t('alerting.folder-bulk-actions.delete-modal-delete-button', 'Delete')\n      }\n      onDismiss={onDismiss}\n      onConfirm={onDeleteConfirm}\n      title={t('alerting.folder-bulk-actions.delete-modal-title', 'Delete')}\n      isOpen={isOpen}\n    />\n  );\n});\nDeleteModal.displayName = 'DeleteModal';\n","import { t } from '@grafana/i18n';\nimport { Menu } from '@grafana/ui';\nimport { useAppNotification } from 'app/core/copy/appNotification';\n\nimport {\n  trackFolderBulkActionsPauseFail,\n  trackFolderBulkActionsPauseSuccess,\n  trackFolderBulkActionsUnpauseFail,\n  trackFolderBulkActionsUnpauseSuccess,\n} from '../../Analytics';\nimport { stringifyErrorLike } from '../../utils/misc';\ninterface Props {\n  folderUID: string;\n  action: 'pause' | 'unpause';\n  executeAction: (folderUID: string) => Promise<void>;\n  isLoading: boolean;\n}\nexport function PauseUnpauseActionMenuItem({ folderUID, executeAction, isLoading, action }: Props) {\n  const notifyApp = useAppNotification();\n\n  const label =\n    action === 'pause'\n      ? t('alerting.folder-bulk-actions.pause.button.label', 'Pause all rules')\n      : t('alerting.folder-bulk-actions.unpause.button.label', 'Resume all rules');\n  const icon = action === 'pause' ? 'pause' : 'play';\n  const trackActionSuccess =\n    action === 'pause' ? trackFolderBulkActionsPauseSuccess : trackFolderBulkActionsUnpauseSuccess;\n  const trackActionFail = action === 'pause' ? trackFolderBulkActionsPauseFail : trackFolderBulkActionsUnpauseFail;\n  const onActionClick = async () => {\n    try {\n      await executeAction(folderUID);\n      trackActionSuccess();\n    } catch (error) {\n      trackActionFail();\n      notifyApp.error(\n        t('alerting.folder-bulk-actions.error', 'Failed to execute action for folder: {{error}}', {\n          error: stringifyErrorLike(error),\n        })\n      );\n    }\n  };\n\n  return <Menu.Item label={label} icon={icon} disabled={isLoading} onClick={onActionClick} />;\n}\n","import { useState } from 'react';\n\nimport { t } from '@grafana/i18n';\nimport { config, locationService } from '@grafana/runtime';\nimport { Dropdown, Menu } from '@grafana/ui';\nimport { useDispatch } from 'app/types/store';\n\nimport { alertingFolderActionsApi } from '../../api/alertingFolderActionsApi';\nimport { shouldUseAlertingListViewV2, shouldUsePrometheusRulesPrimary } from '../../featureToggles';\nimport {\n  AlertingAction,\n  FolderBulkAction,\n  useAlertingAbility,\n  useFolderBulkActionAbility,\n} from '../../hooks/useAbilities';\nimport { useFolder } from '../../hooks/useFolder';\nimport { fetchAllPromAndRulerRulesAction, fetchAllPromRulesAction, fetchRulerRulesAction } from '../../state/actions';\nimport { GRAFANA_RULES_SOURCE_NAME } from '../../utils/datasource';\nimport { makeFolderLink } from '../../utils/misc';\nimport { createRelativeUrl } from '../../utils/url';\nimport MoreButton from '../MoreButton';\nimport { GrafanaRuleFolderExporter } from '../export/GrafanaRuleFolderExporter';\n\nimport { DeleteModal } from './DeleteModal';\nimport { PauseUnpauseActionMenuItem } from './PauseUnpauseActionMenuItem';\ninterface Props {\n  folderUID: string;\n}\n\nexport const FolderActionsButton = ({ folderUID }: Props) => {\n  // state\n  const [isDeleteModalOpen, setIsDeleteModalOpen] = useState(false);\n  const [isExporting, setIsExporting] = useState<boolean>(false);\n\n  // feature toggles\n  const bulkActionsEnabled = config.featureToggles.alertingBulkActionsInUI;\n  const listView2Enabled = shouldUseAlertingListViewV2();\n\n  const [exportRulesSupported, exportRulesAllowed] = useAlertingAbility(AlertingAction.ExportGrafanaManagedRules);\n\n  const canExportRules = exportRulesSupported && exportRulesAllowed;\n\n  const [deleteGrafanaRulesFromFolder, deleteState] =\n    alertingFolderActionsApi.endpoints.deleteGrafanaRulesFromFolder.useMutation();\n\n  const { folder } = useFolder(folderUID);\n  const folderName = folder?.title || 'unknown folder';\n  const folderUrl = makeFolderLink(folderUID);\n  const viewComponent = listView2Enabled ? 'list' : 'grouped';\n\n  // URLs\n  const redirectToListView = useRedirectToListView(viewComponent);\n\n  if (!folder) {\n    return null;\n  }\n\n  const onConfirmDelete = async () => {\n    await deleteGrafanaRulesFromFolder({ namespace: folderUID }).unwrap();\n    await redirectToListView();\n  };\n\n  const menuItems = (\n    <>\n      <Menu.Item\n        url={folderUrl}\n        icon=\"eye\"\n        aria-label={t('alerting.list-view.folder-actions.view.aria-label', 'View folder')}\n        label={t('alerting.list-view.folder-actions.view.label', 'View folder')}\n      />\n      <BulkActions folderUID={folderUID} onClickDelete={setIsDeleteModalOpen} isLoading={deleteState.isLoading} />\n      {canExportRules && (\n        <>\n          {bulkActionsEnabled && <Menu.Divider />}\n          <ExportFolderButton onClickExport={() => setIsExporting(true)} />\n        </>\n      )}\n    </>\n  );\n\n  return (\n    <>\n      <Dropdown placement=\"bottom\" overlay={<Menu>{menuItems}</Menu>}>\n        <MoreButton\n          fill=\"text\"\n          size=\"sm\"\n          aria-label={t('alerting.list-view.folder-actions.button.aria-label', 'Folder actions')}\n          title={t('alerting.list-view.folder-actions.button.title', 'Actions')}\n        />\n      </Dropdown>\n      {isExporting && <GrafanaRuleFolderExporter folder={folder} onClose={() => setIsExporting(false)} />}\n      <DeleteModal\n        isOpen={isDeleteModalOpen}\n        onConfirm={onConfirmDelete}\n        onDismiss={() => setIsDeleteModalOpen(false)}\n        folderName={folderName}\n      />\n    </>\n  );\n};\n\nfunction useRedirectToListView(view: string) {\n  const dispatch = useDispatch();\n  const prometheusRulesPrimary = shouldUsePrometheusRulesPrimary();\n  const redirectToListView = async () => {\n    if (prometheusRulesPrimary) {\n      await dispatch(fetchRulerRulesAction({ rulesSourceName: GRAFANA_RULES_SOURCE_NAME }));\n      await dispatch(fetchAllPromRulesAction(false));\n    } else {\n      await dispatch(fetchAllPromAndRulerRulesAction(false));\n    }\n    locationService.push(createRelativeUrl('/alerting/list', { view }, { skipSubPath: true }));\n  };\n\n  return redirectToListView;\n}\n\nfunction ExportFolderButton({ onClickExport }: { onClickExport: () => void }) {\n  return (\n    <Menu.Item\n      aria-label={t('alerting.list-view.folder-actions.export.aria-label', 'Export rules folder')}\n      data-testid=\"export-folder\"\n      key=\"export-folder\"\n      label={t('alerting.list-view.folder-actions.export.label', 'Export rules folder')}\n      icon=\"download-alt\"\n      onClick={onClickExport}\n    />\n  );\n}\n\nfunction BulkActions({\n  folderUID,\n  onClickDelete,\n  isLoading,\n}: {\n  folderUID: string;\n  onClickDelete: (showModal: boolean) => void;\n  isLoading: boolean;\n}) {\n  // feature toggles\n  const listView2Enabled = shouldUseAlertingListViewV2();\n  const bulkActionsEnabled = config.featureToggles.alertingBulkActionsInUI;\n\n  // abilities\n  const [pauseSupported, pauseAllowed] = useFolderBulkActionAbility(FolderBulkAction.Pause);\n  const [deleteSupported, deleteAllowed] = useFolderBulkActionAbility(FolderBulkAction.Delete);\n\n  const canPause = pauseSupported && pauseAllowed;\n  const canDelete = deleteSupported && deleteAllowed;\n\n  // mutations\n  const [pauseFolder, updateState] = alertingFolderActionsApi.endpoints.pauseFolder.useMutation();\n  const [unpauseFolder, unpauseState] = alertingFolderActionsApi.endpoints.unpauseFolder.useMutation();\n\n  // URLs\n  const viewComponent = listView2Enabled ? 'list' : 'grouped';\n  const redirectToListView = useRedirectToListView(viewComponent);\n\n  if (!bulkActionsEnabled) {\n    return null;\n  }\n\n  if (!canPause && !canDelete) {\n    return null;\n  }\n\n  return (\n    <>\n      <Menu.Divider />\n      {canPause && (\n        <>\n          <PauseUnpauseActionMenuItem\n            folderUID={folderUID}\n            action=\"pause\"\n            executeAction={async (folderUID) => {\n              await pauseFolder({ namespace: folderUID }).unwrap();\n              await redirectToListView();\n            }}\n            isLoading={updateState.isLoading}\n          />\n          <PauseUnpauseActionMenuItem\n            folderUID={folderUID}\n            action=\"unpause\"\n            executeAction={async (folderUID) => {\n              await unpauseFolder({ namespace: folderUID }).unwrap();\n              await redirectToListView();\n            }}\n            isLoading={unpauseState.isLoading}\n          />\n        </>\n      )}\n      {canDelete && (\n        <Menu.Item\n          label={t('alerting.folder-bulk-actions.delete.button.label', 'Delete all rules')}\n          icon=\"trash-alt\"\n          onClick={() => onClickDelete(true)}\n          disabled={isLoading}\n        />\n      )}\n    </>\n  );\n}\n","import { useState } from 'react';\n\nimport { t } from '@grafana/i18n';\nimport { LoadingPlaceholder } from '@grafana/ui';\n\nimport { alertRuleApi } from '../../api/alertRuleApi';\n\nimport { FileExportPreview } from './FileExportPreview';\nimport { GrafanaExportDrawer } from './GrafanaExportDrawer';\nimport { ExportFormats, allGrafanaExportProviders } from './providers';\n\ninterface GrafanaRulesExporterProps {\n  onClose: () => void;\n}\n\nexport function GrafanaRulesExporter({ onClose }: GrafanaRulesExporterProps) {\n  const [activeTab, setActiveTab] = useState<ExportFormats>('yaml');\n\n  return (\n    <GrafanaExportDrawer\n      activeTab={activeTab}\n      onTabChange={setActiveTab}\n      onClose={onClose}\n      formatProviders={Object.values(allGrafanaExportProviders)}\n    >\n      <GrafanaRulesExportPreview exportFormat={activeTab} onClose={onClose} />\n    </GrafanaExportDrawer>\n  );\n}\n\ninterface GrafanaRulesExportPreviewProps {\n  exportFormat: ExportFormats;\n  onClose: () => void;\n}\n\nfunction GrafanaRulesExportPreview({ exportFormat, onClose }: GrafanaRulesExportPreviewProps) {\n  const { currentData: rulesDefinition = '', isFetching } = alertRuleApi.endpoints.exportRules.useQuery({\n    format: exportFormat,\n  });\n\n  const downloadFileName = `alert-rules-${new Date().getTime()}`;\n\n  if (isFetching) {\n    return <LoadingPlaceholder text={t('alerting.grafana-rules-export-preview.text-loading', 'Loading....')} />;\n  }\n\n  return (\n    <FileExportPreview\n      format={exportFormat}\n      textDefinition={rulesDefinition}\n      downloadFileName={downloadFileName}\n      onClose={onClose}\n    />\n  );\n}\n","import { PluginExtensionPoints } from '@grafana/data';\nimport { usePluginComponents } from '@grafana/runtime';\n\nexport function useAlertingHomePageExtensions() {\n  return usePluginComponents({\n    extensionPointId: PluginExtensionPoints.AlertingHomePage,\n    limitPerPlugin: 1,\n  });\n}\n"],"names":["InternalAIAlertRuleButtonComponent","AIAlertRuleButtonComponent","props","WrappedComponent","addAIAlertRuleButton","component","GrafanaRuleFolderExporter","folder","onClose","activeTab","setActiveTab","GrafanaRuleFolderExportPreview","exportFormat","exportFolderDefinition","isFetching","downloadFileName","RecordingRulesButtons","canCreateGrafanaRules","canCreateCloudRules","grafanaRecordingRulesEnabled","NoRulesSplash","canCreateAnything","GrafanaNoRulesCTA","CloudNoRulesCTA","dataSourceName","styles","getCloudNoRulesStyles","newAlertingRuleUrl","getNewDataSourceRuleUrl","newRecordingRuleUrl","type","urlRuleType","formDefaults","theme","CollapseToggle","isCollapsed","onToggle","idControlled","className","text","size","restOfProps","useListContactPoints","queryArgs","queryOptions","useCreateContactPoint","options","updateFn","result","args","getContactPointDescription","contactPoint","integrationCounts","integration","count","collator","ContactPointSelector","contactPoints","isLoading","contactPointOptions","a","b","item","handleChange","selectedOption","matchedOption","option","Combobox","MultipleDataSourcePicker","dataSourceSrv","state","setState","onChange","items","actionMeta","selectedItem","action","dsSettings","getCurrentValue","current","hideTextValue","noDefault","ds","uid","getDataSourceOptions","alerting","tracing","metrics","mixed","dashboard","variables","annotations","pluginId","filter","logs","dataSources","alertManagingDs","nonAlertManagingDs","autoFocus","onBlur","onClear","openMenuOnFocus","placeholder","width","inputId","disabled","value","isClearable","selectors","o","Stack","PluginSignatureBadge","RuleTypeOptions","RuleHealthOptions","canRenderContactPointSelector","RuleStateOptions","key","RulesFilter","viewMode","onViewModeChange","getStyles","pluginsFilterEnabled","usePluginsFilterStatus","filterState","hasActiveFilters","searchQuery","setSearchQuery","updateFilters","filterKey","setFilterKey","dataSourceKey","queryStringKey","searchQueryRef","handleSubmit","register","setValue","ref","rest","handleDataSourceChange","dataSourceValue","dataSourceNames","name","updateAndTrack","clearDataSource","handleAlertStateChange","handleClearFiltersClick","handleContactPointChange","searchIcon","Icon","Field","Label","Tooltip","DashboardPicker","RadioButtonGroup","data","SearchQueryHelp","Input","e","RulesViewModeSelector","Button","helpStyles","HelpRow","title","expr","components","useAlertingHomePageExtensions","ListSection","children","collapsed","actions","pagination","toggleCollapsed","useInterval","callback","delay","savedCallback","interval_1","ActionIcon","tooltip","icon","to","target","onClick","tooltipPlacement","ariaLabel","ViewOptions","RulesViewModeSelectorV2","useListViewMode","queryParams","updateQueryParams","activeFilters","queryStringView","areFiltersGroupedViewCompatible","showListView","handleViewChange","view","LegacyViewOptions","RulesViewModeSelectorV1","viewParam","currentView","viewParamToLegacyView","RuleListErrors","expanded","setExpanded","closed","setClosed","useLocalStorage","promRuleRequests","useUnifiedAlertingSelector","rulerRuleRequests","errors","promRequestErrors","rulerRequestErrors","requests","dataSource","error","grafanaPromError","grafanaRulerError","unknownError","ErrorSummaryButton","Alert","idx","RulesGroup","group","namespace","expandAll","rulesSource","rulesSourceName","rulerRulesLoaded","isExporting","setIsExporting","setIsCollapsed","hasRuler","useHasRuler","rulerRule","folderUID","useFolder","canEditRules","isDeleting","rule","isFederated","isProvisioned","isPluginProvided","canEditGroup","isListView","isGroupView","actionIcons","Spinner","baseUrl","FolderActionsButton","groupName","RuleLocation","FolderIcon","CloudSourceLogo","Badge","RulesTable","useCombinedGroupNamespace","namespaces","ns","g","CloudRules","promRules","rulesDataSources","groupsWithNamespaces","dataSourcesLoading","hasSomeResults","hasDataSourcesConfigured","hasDataSourcesLoading","hasNamespaces","numberOfPages","onPageChange","page","pageItems","usePagination","canMigrateToGMA","config","Text","LoadingPlaceholder","MigrateToGMAButton","CreateRecordingRuleButton","Pagination","createCloudRuleSupported","createCloudRuleAllowed","location","url","importUrl","GrafanaRules","useQueryParams","prom","ruler","loading","hasResult","wantsListView","namespacesFormat","exportRulesSupported","exportRulesAllowed","canExportRules","showExportDrawer","toggleShowExportDrawer","useToggle","hasGrafanaAlerts","GrafanaRulesExporter","RuleListGroupView","grafanaNamespaces","cloudNamespaces","sorted","Authorize","RuleListStateView","useMeasure","useDataSourcesLoadingState","entries","rules","LoadingBar","RulesByState","STATE_TITLES","isFiringState","hasRulesMatchingState","Counter","promRule","instancesCount","originMeta","AlertRuleListItem","RuleActionsButtons","grafanaLoading","promLoading","rulerLoading","externalDataSourcesLoading","RuleListActionButtons","hasAlertRulesCreated","CreateAlertButtons","ExportNewRuleButton","createRuleSupported","createRuleAllowed","returnTo","VIEWS","LIMIT_ALERTS","prometheusRulesPrimary","dispatch","rulesDataSourceNames","setExpandAll","onFilterCleared","hasActiveLabelsFilter","queryParamView","viewType","ViewComponent","promRequests","rulerRequests","allPromLoaded","_","allRulerLoaded","allPromEmpty","allRulerEmpty","limitAlerts","fetchRules","useAsyncFn","hasNoAlertRulesCreatedYet","combinedNamespaces","useCombinedRuleNamespaces","filteredNamespaces","useFilteredRules","AlertingPageWrapper","RuleListPageTitle","RuleStats","RuleListV2","RuleList","newView","withPageErrorBoundary","shouldShowV2Toggle","listViewV2Enabled","toggleListView","configToUse","alertingFolderActionsApi","alertingApi","build","notificationOptions","successMessage","path","params","DeleteModal","onConfirm","onDismiss","isOpen","folderName","setIsDeleting","onDeleteConfirm","ConfirmModal","Space","PauseUnpauseActionMenuItem","executeAction","notifyApp","label","trackActionSuccess","trackActionFail","onActionClick","Menu","isDeleteModalOpen","setIsDeleteModalOpen","bulkActionsEnabled","listView2Enabled","deleteGrafanaRulesFromFolder","deleteState","folderUrl","redirectToListView","useRedirectToListView","onConfirmDelete","menuItems","BulkActions","ExportFolderButton","Dropdown","MoreButton","onClickExport","onClickDelete","pauseSupported","pauseAllowed","deleteSupported","deleteAllowed","canPause","canDelete","pauseFolder","updateState","unpauseFolder","unpauseState","GrafanaRulesExportPreview","rulesDefinition"],"sourceRoot":""}